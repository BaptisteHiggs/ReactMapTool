(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(t,e,o){"use strict";(function(t){var n=o(15);const{toString:r}=Object.prototype,{getPrototypeOf:i}=Object,a=(s=Object.create(null),t=>{const e=r.call(t);return s[e]||(s[e]=e.slice(8,-1).toLowerCase())});var s;const l=t=>(t=t.toLowerCase(),e=>a(e)===t),u=t=>e=>typeof e===t,{isArray:c}=Array,p=u("undefined");const d=l("ArrayBuffer");const h=u("string"),f=u("function"),g=u("number"),y=t=>null!==t&&"object"===typeof t,v=t=>{if("object"!==a(t))return!1;const e=i(t);return(null===e||e===Object.prototype||null===Object.getPrototypeOf(e))&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},m=l("Date"),C=l("File"),_=l("Blob"),w=l("FileList"),b=l("URLSearchParams");function S(t,e){let o,n,{allOwnKeys:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),c(t))for(o=0,n=t.length;o<n;o++)e.call(null,t[o],o,t);else{const n=r?Object.getOwnPropertyNames(t):Object.keys(t),i=n.length;let a;for(o=0;o<i;o++)a=n[o],e.call(null,t[a],a,t)}}function E(t,e){e=e.toLowerCase();const o=Object.keys(t);let n,r=o.length;for(;r-- >0;)if(e===(n=o[r]).toLowerCase())return n;return null}const x="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:t,T=t=>!p(t)&&t!==x;const O=(R="undefined"!==typeof Uint8Array&&i(Uint8Array),t=>R&&t instanceof R);var R;const P=l("HTMLFormElement"),A=(t=>{let{hasOwnProperty:e}=t;return(t,o)=>e.call(t,o)})(Object.prototype),D=l("RegExp"),M=(t,e)=>{const o=Object.getOwnPropertyDescriptors(t),n={};S(o,(o,r)=>{let i;!1!==(i=e(o,r,t))&&(n[r]=i||o)}),Object.defineProperties(t,n)},I="abcdefghijklmnopqrstuvwxyz",L={DIGIT:"0123456789",ALPHA:I,ALPHA_DIGIT:I+I.toUpperCase()+"0123456789"};const F=l("AsyncFunction");e.a={isArray:c,isArrayBuffer:d,isBuffer:function(t){return null!==t&&!p(t)&&null!==t.constructor&&!p(t.constructor)&&f(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{let e;return t&&("function"===typeof FormData&&t instanceof FormData||f(t.append)&&("formdata"===(e=a(t))||"object"===e&&f(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&d(t.buffer)},isString:h,isNumber:g,isBoolean:t=>!0===t||!1===t,isObject:y,isPlainObject:v,isUndefined:p,isDate:m,isFile:C,isBlob:_,isRegExp:D,isFunction:f,isStream:t=>y(t)&&f(t.pipe),isURLSearchParams:b,isTypedArray:O,isFileList:w,forEach:S,merge:function t(){const{caseless:e}=T(this)&&this||{},o={},n=(n,r)=>{const i=e&&E(o,r)||r;v(o[i])&&v(n)?o[i]=t(o[i],n):v(n)?o[i]=t({},n):c(n)?o[i]=n.slice():o[i]=n};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&S(arguments[r],n);return o},extend:function(t,e,o){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return S(e,(e,r)=>{o&&f(e)?t[r]=Object(n.a)(e,o):t[r]=e},{allOwnKeys:r}),t},trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,o,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),o&&Object.assign(t.prototype,o)},toFlatObject:(t,e,o,n)=>{let r,a,s;const l={};if(e=e||{},null==t)return e;do{for(a=(r=Object.getOwnPropertyNames(t)).length;a-- >0;)s=r[a],n&&!n(s,t,e)||l[s]||(e[s]=t[s],l[s]=!0);t=!1!==o&&i(t)}while(t&&(!o||o(t,e))&&t!==Object.prototype);return e},kindOf:a,kindOfTest:l,endsWith:(t,e,o)=>{t=String(t),(void 0===o||o>t.length)&&(o=t.length),o-=e.length;const n=t.indexOf(e,o);return-1!==n&&n===o},toArray:t=>{if(!t)return null;if(c(t))return t;let e=t.length;if(!g(e))return null;const o=new Array(e);for(;e-- >0;)o[e]=t[e];return o},forEachEntry:(t,e)=>{const o=(t&&t[Symbol.iterator]).call(t);let n;for(;(n=o.next())&&!n.done;){const o=n.value;e.call(t,o[0],o[1])}},matchAll:(t,e)=>{let o;const n=[];for(;null!==(o=t.exec(e));)n.push(o);return n},isHTMLForm:P,hasOwnProperty:A,hasOwnProp:A,reduceDescriptors:M,freezeMethods:t=>{M(t,(e,o)=>{if(f(t)&&-1!==["arguments","caller","callee"].indexOf(o))return!1;const n=t[o];f(n)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=(()=>{throw Error("Can not rewrite read-only method '"+o+"'")})))})},toObjectSet:(t,e)=>{const o={},n=t=>{t.forEach(t=>{o[t]=!0})};return c(t)?n(t):n(String(t).split(e)),o},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,e,o){return e.toUpperCase()+o}),noop:()=>{},toFiniteNumber:(t,e)=>(t=+t,Number.isFinite(t)?t:e),findKey:E,global:x,isContextDefined:T,ALPHABET:L,generateString:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.ALPHA_DIGIT,o="";const{length:n}=e;for(;t--;)o+=e[Math.random()*n|0];return o},isSpecCompliantForm:function(t){return!!(t&&f(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:t=>{const e=new Array(10),o=(t,n)=>{if(y(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[n]=t;const r=c(t)?[]:{};return S(t,(t,e)=>{const i=o(t,n+1);!p(i)&&(r[e]=i)}),e[n]=void 0,r}}return t};return o(t,0)},isAsyncFn:F,isThenable:t=>t&&(y(t)||f(t))&&f(t.then)&&f(t.catch)}}).call(this,o(11))},function(t,e,o){"use strict";t.exports=o(36)},function(t,e,o){"use strict";var n=o(0);function r(t,e,o,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),o&&(this.config=o),n&&(this.request=n),r&&(this.response=r)}n.a.inherits(r,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:n.a.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const i=r.prototype,a={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{a[t]={value:t}}),Object.defineProperties(r,a),Object.defineProperty(i,"isAxiosError",{value:!0}),r.from=((t,e,o,a,s,l)=>{const u=Object.create(i);return n.a.toFlatObject(t,u,function(t){return t!==Error.prototype},t=>"isAxiosError"!==t),r.call(u,t.message,e,o,a,s),u.cause=t,u.name=t.name,l&&Object.assign(u,l),u}),e.a=r},function(t,e,o){t.exports=function(){"use strict";var t,e,o;function n(n,r){if(t)if(e){var i="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",a={};t(a),(o=r(a)).workerUrl=window.URL.createObjectURL(new Blob([i],{type:"text/javascript"}))}else e=r;else t=r}return n(0,function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var o=n;function n(t,e,o,n){this.cx=3*t,this.bx=3*(o-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=o,this.p2y=n}n.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},n.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},n.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},n.prototype.solveCurveX=function(t,e){var o,n,r,i,a;for(void 0===e&&(e=1e-6),r=t,a=0;a<8;a++){if(i=this.sampleCurveX(r)-t,Math.abs(i)<e)return r;var s=this.sampleCurveDerivativeX(r);if(Math.abs(s)<1e-6)break;r-=i/s}if((r=t)<(o=0))return o;if(r>(n=1))return n;for(;o<n;){if(i=this.sampleCurveX(r),Math.abs(i-t)<e)return r;t>i?o=r:n=r,r=.5*(n-o)+o}return r},n.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var r=i;function i(t,e){this.x=t,this.y=e}function a(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var o=0;o<t.length;o++)if(!a(t[o],e[o]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!a(t[n],e[n]))return!1;return!0}return t===e}function s(t,e,n,r){var i=new o(t,e,n,r);return function(t){return i.solve(t)}}i.prototype={clone:function(){return new i(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,o=t.y-this.y;return e*e+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,o=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=o,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),o=Math.sin(t),n=e*this.x-o*this.y,r=o*this.x+e*this.y;return this.x=n,this.y=r,this},_rotateAround:function(t,e){var o=Math.cos(t),n=Math.sin(t),r=e.x+o*(this.x-e.x)-n*(this.y-e.y),i=e.y+n*(this.x-e.x)+o*(this.y-e.y);return this.x=r,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(t){return t instanceof i?t:Array.isArray(t)?new i(t[0],t[1]):t};var l=s(.25,.1,.25,1);function u(t,e,o){return Math.min(o,Math.max(e,t))}function c(t,e,o){var n=o-e,r=((t-e)%n+n)%n+e;return r===e?o:r}function p(t){for(var e=[],o=arguments.length-1;o-- >0;)e[o]=arguments[o+1];for(var n=0,r=e;n<r.length;n+=1){var i=r[n];for(var a in i)t[a]=i[a]}return t}var d=1;function h(){return d++}function f(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function g(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function y(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})}function v(t,e){return-1!==t.indexOf(e,t.length-e.length)}function m(t,e,o){var n={};for(var r in t)n[r]=e.call(o||this,t[r],r,t);return n}function C(t,e,o){var n={};for(var r in t)e.call(o||this,t[r],r,t)&&(n[r]=t[r]);return n}function _(t){return Array.isArray(t)?t.map(_):"object"==typeof t&&t?m(t,_):t}var w={};function b(t){w[t]||("undefined"!=typeof console&&console.warn(t),w[t]=!0)}function S(t,e,o){return(o.y-t.y)*(e.x-t.x)>(e.y-t.y)*(o.x-t.x)}function E(t){for(var e=0,o=0,n=t.length,r=n-1,i=void 0,a=void 0;o<n;r=o++)i=t[o],e+=((a=t[r]).x-i.x)*(i.y+a.y);return e}function x(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,o,n,r){var i=n||r;return e[o]=!i||i.toLowerCase(),""}),e["max-age"]){var o=parseInt(e["max-age"],10);isNaN(o)?delete e["max-age"]:e["max-age"]=o}return e}function T(t){try{var e=self[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var O,R,P,A=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),D=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,M=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,I={now:A,frame:function(t){var e=D(t);return{cancel:function(){return M(e)}}},getImageData:function(t){var e=self.document.createElement("canvas"),o=e.getContext("2d");if(!o)throw new Error("failed to create canvas 2d context");return e.width=t.width,e.height=t.height,o.drawImage(t,0,0,t.width,t.height),o.getImageData(0,0,t.width,t.height)},resolveURL:function(t){return O||(O=self.document.createElement("a")),O.href=t,O.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio}},L={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},F={supported:!1,testSupport:function(t){!N&&P&&(k?G(t):R=t)}},N=!1,k=!1;function G(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,P),t.isContextLost())return;F.supported=!0}catch(t){}t.deleteTexture(e),N=!0}self.document&&((P=self.document.createElement("img")).onload=function(){R&&G(R),R=null,k=!0},P.onerror=function(){N=!0,R=null},P.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var V="01",B=function(t){this._transformRequestFn=t,this._createSkuToken()};B.prototype._createSkuToken=function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",V,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},B.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},B.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},B.prototype.normalizeStyleURL=function(t,e){return K(t,e)},B.prototype.normalizeGlyphsURL=function(t,e){return q(t,e)},B.prototype.normalizeSourceURL=function(t,e){return Y(t,e)},B.prototype.normalizeSpriteURL=function(t,e,o,n){return Z(t,e,o,n)},B.prototype.normalizeTileURL=function(t,e,o){return this._isSkuTokenExpired()&&this._createSkuToken(),J(t,e,o,this._skuToken)},B.prototype.canonicalizeTileURL=function(t){return $(t)},B.prototype.canonicalizeTileset=function(t,e){return tt(t,e)};var z="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes";function H(t,e){var o=ot(L.API_URL);if(t.protocol=o.protocol,t.authority=o.authority,"/"!==o.path&&(t.path=""+o.path+t.path),!L.REQUIRE_ACCESS_TOKEN)return nt(t);if(!(e=e||L.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+z);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+z);return t.params.push("access_token="+e),nt(t)}function j(t){return 0===t.indexOf("mapbox:")}var U=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function W(t){return U.test(t)}var K=function(t,e){if(!j(t))return t;var o=ot(t);return o.path="/styles/v1"+o.path,H(o,e)},q=function(t,e){if(!j(t))return t;var o=ot(t);return o.path="/fonts/v1"+o.path,H(o,e)},Y=function(t,e){if(!j(t))return t;var o=ot(t);return o.path="/v4/"+o.authority+".json",o.params.push("secure"),H(o,e)},Z=function(t,e,o,n){var r=ot(t);return j(t)?(r.path="/styles/v1"+r.path+"/sprite"+e+o,H(r,n)):(r.path+=""+e+o,nt(r))},X=/(\.(png|jpg)\d*)(?=$)/,J=function(t,e,o,n){if(!e||!j(e))return t;var r=ot(t),i=I.devicePixelRatio>=2||512===o?"@2x":"",a=F.supported?".webp":"$1";return r.path=r.path.replace(X,""+i+a),r.path="/v4"+r.path,L.REQUIRE_ACCESS_TOKEN&&L.ACCESS_TOKEN&&n&&r.params.push("sku="+n),H(r)},Q=/\.[\w]+$/,$=function(t){var e=ot(t);if(!e.path.match(/(^\/v4\/)/)||!e.path.match(Q))return t;var o="mapbox://tiles/";o+=e.path.replace("/v4/","");var n=e.params.filter(function(t){return!t.match(/^access_token=/)});return n.length&&(o+="?"+n.join("&")),o},tt=function(t,e){if(!j(e))return t.tiles||[];for(var o=[],n=0,r=t.tiles;n<r.length;n+=1){var i=r[n],a=$(i);o.push(a)}return o},et=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/;function ot(t){var e=t.match(et);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function nt(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function rt(t){if(!t)return null;var e,o=t.split(".");if(!o||3!==o.length)return null;try{return JSON.parse((e=o[1],decodeURIComponent(self.atob(e).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch(t){return null}}var it=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};it.prototype.getStorageKey=function(t){var e,o=rt(L.ACCESS_TOKEN),n="";return o&&o.u?(e=o.u,n=self.btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(Number("0x"+e))}))):n=L.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+n:"mapbox.eventData:"+n},it.prototype.fetchEventData=function(){var t=T("localStorage"),e=this.getStorageKey(),o=this.getStorageKey("uuid");if(t)try{var n=self.localStorage.getItem(e);n&&(this.eventData=JSON.parse(n));var r=self.localStorage.getItem(o);r&&(this.anonId=r)}catch(t){b("Unable to read from LocalStorage")}},it.prototype.saveEventData=function(){var t=T("localStorage"),e=this.getStorageKey(),o=this.getStorageKey("uuid");if(t)try{self.localStorage.setItem(o,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){b("Unable to write to LocalStorage")}},it.prototype.processRequests=function(){},it.prototype.postEvent=function(t,e,o){var n=this;if(L.EVENTS_URL){var r=ot(L.EVENTS_URL);r.params.push("access_token="+(L.ACCESS_TOKEN||""));var i={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.1.1",skuId:V,userId:this.anonId},a=e?p(i,e):i,s={url:nt(r),headers:{"Content-Type":"text/plain"},body:JSON.stringify([a])};this.pendingRequest=Ot(s,function(t){n.pendingRequest=null,o(t),n.saveEventData(),n.processRequests()})}},it.prototype.queueRequest=function(t){this.queue.push(t),this.processRequests()};var at,st=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postMapLoadEvent=function(t,e,o){this.skuToken=o,L.EVENTS_URL&&L.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return j(t)||W(t)})&&this.queueRequest({id:e,timestamp:Date.now()})},e.prototype.processRequests=function(){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var e=this.queue.shift(),o=e.id,n=e.timestamp;o&&this.success[o]||(this.anonId||this.fetchEventData(),g(this.anonId)||(this.anonId=f()),this.postEvent(n,{skuToken:this.skuToken},function(e){e||o&&(t.success[o]=!0)}))}},e}(it),lt=new(function(t){function e(){t.call(this,"appUserTurnstile")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.postTurnstileEvent=function(t){L.EVENTS_URL&&L.ACCESS_TOKEN&&Array.isArray(t)&&t.some(function(t){return j(t)||W(t)})&&this.queueRequest(Date.now())},e.prototype.processRequests=function(){var t=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var e=rt(L.ACCESS_TOKEN),o=e?e.u:L.ACCESS_TOKEN,n=o!==this.eventData.tokenU;g(this.anonId)||(this.anonId=f(),n=!0);var r=this.queue.shift();if(this.eventData.lastSuccess){var i=new Date(this.eventData.lastSuccess),a=new Date(r),s=(r-this.eventData.lastSuccess)/864e5;n=n||s>=1||s<-1||i.getDate()!==a.getDate()}else n=!0;if(!n)return this.processRequests();this.postEvent(r,{"enabled.telemetry":!1},function(e){e||(t.eventData.lastSuccess=r,t.eventData.tokenU=o)})}},e}(it)),ut=lt.postTurnstileEvent.bind(lt),ct=new st,pt=ct.postMapLoadEvent.bind(ct),dt="mapbox-tiles",ht=500,ft=50,gt=42e4;function yt(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}var vt=1/0,mt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(mt);var Ct=function(t){function e(e,o,n){401===o&&W(n)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=o,this.url=n,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error);function _t(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}var wt=_t()?function(){return self.worker&&self.worker.referrer}:function(){var t=self.location.origin;if(t&&"null"!==t&&"file://"!==t)return t+self.location.pathname};function bt(t,e){var o,n=new self.AbortController,r=new self.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:wt(),signal:n.signal}),i=!1,a=!1,s=(o=r.url).indexOf("sku=")>0&&W(o);"json"===t.type&&r.headers.set("Accept","application/json");var l=function(o,n,i){if(!a){if(o&&"SecurityError"!==o.message&&b(o),n&&i)return u(n);var l=Date.now();self.fetch(r).then(function(o){if(o.ok){var n=s?o.clone():null;return u(o,n,l)}return e(new Ct(o.statusText,o.status,t.url))}).catch(function(t){20!==t.code&&e(new Error(t.message))})}},u=function(o,n,s){("arrayBuffer"===t.type?o.arrayBuffer():"json"===t.type?o.json():o.text()).then(function(t){a||(n&&s&&function(t,e,o){if(self.caches){var n={status:e.status,statusText:e.statusText,headers:new self.Headers};e.headers.forEach(function(t,e){return n.headers.set(e,t)});var r=x(e.headers.get("Cache-Control")||"");r["no-store"]||(r["max-age"]&&n.headers.set("Expires",new Date(o+1e3*r["max-age"]).toUTCString()),new Date(n.headers.get("Expires")).getTime()-o<gt||function(t,e){if(void 0===at)try{new Response(new ReadableStream),at=!0}catch(t){at=!1}at?e(t.body):t.blob().then(e)}(e,function(e){var o=new self.Response(e,n);self.caches.open(dt).then(function(e){return e.put(yt(t.url),o)})}))}}(r,n,s),i=!0,e(null,t,o.headers.get("Cache-Control"),o.headers.get("Expires")))}).catch(function(t){return e(new Error(t.message))})};return s?function(t,e){if(!self.caches)return e(null);var o=yt(t.url);self.caches.open(dt).catch(e).then(function(t){t.match(o).catch(e).then(function(n){var r=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")),o=x(t.headers.get("Cache-Control")||"");return e>Date.now()&&!o["no-cache"]}(n);t.delete(o),r&&t.put(o,n.clone()),e(null,n,r)})})}(r,l):l(null,null),{cancel:function(){a=!0,i||n.abort()}}}var St,Et,xt=function(t,e){if(!/^file:/.test(t.url)){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return bt(t,e);if(_t()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e)}return function(t,e){var o=new self.XMLHttpRequest;for(var n in o.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(o.responseType="arraybuffer"),t.headers)o.setRequestHeader(n,t.headers[n]);return"json"===t.type&&o.setRequestHeader("Accept","application/json"),o.withCredentials="include"===t.credentials,o.onerror=function(){e(new Error(o.statusText))},o.onload=function(){if((o.status>=200&&o.status<300||0===o.status)&&null!==o.response){var n=o.response;if("json"===t.type)try{n=JSON.parse(o.response)}catch(t){return e(t)}e(null,n,o.getResponseHeader("Cache-Control"),o.getResponseHeader("Expires"))}else e(new Ct(o.statusText,o.status,t.url))},o.send(t.body),{cancel:function(){return o.abort()}}}(t,e)},Tt=function(t,e){return xt(p(t,{type:"arrayBuffer"}),e)},Ot=function(t,e){return xt(p(t,{method:"POST"}),e)};St=[],Et=0;var Rt=function(t,e){if(Et>=L.MAX_PARALLEL_IMAGE_REQUESTS){var o={requestParameters:t,callback:e,cancelled:!1,cancel:function(){this.cancelled=!0}};return St.push(o),o}Et++;var n=!1,r=function(){if(!n)for(n=!0,Et--;St.length&&Et<L.MAX_PARALLEL_IMAGE_REQUESTS;){var t=St.shift(),e=t.requestParameters,o=t.callback;t.cancelled||(t.cancel=Rt(e,o).cancel)}},i=Tt(t,function(t,o,n,i){if(r(),t)e(t);else if(o){var a=new self.Image,s=self.URL||self.webkitURL;a.onload=function(){e(null,a),s.revokeObjectURL(a.src)},a.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var l=new self.Blob([new Uint8Array(o)],{type:"image/png"});a.cacheControl=n,a.expires=i,a.src=o.byteLength?s.createObjectURL(l):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}});return{cancel:function(){i.cancel(),r()}}};function Pt(t,e,o){o[t]&&-1!==o[t].indexOf(e)||(o[t]=o[t]||[],o[t].push(e))}function At(t,e,o){if(o&&o[t]){var n=o[t].indexOf(e);-1!==n&&o[t].splice(n,1)}}var Dt=function(t,e){void 0===e&&(e={}),p(this,e),this.type=t},Mt=function(t){function e(e,o){void 0===o&&(o={}),t.call(this,"error",p({error:e},o))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Dt),It=function(){};It.prototype.on=function(t,e){return this._listeners=this._listeners||{},Pt(t,e,this._listeners),this},It.prototype.off=function(t,e){return At(t,e,this._listeners),At(t,e,this._oneTimeListeners),this},It.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},Pt(t,e,this._oneTimeListeners),this},It.prototype.fire=function(t,e){"string"==typeof t&&(t=new Dt(t,e||{}));var o=t.type;if(this.listens(o)){t.target=this;for(var n=0,r=this._listeners&&this._listeners[o]?this._listeners[o].slice():[];n<r.length;n+=1)r[n].call(this,t);for(var i=0,a=this._oneTimeListeners&&this._oneTimeListeners[o]?this._oneTimeListeners[o].slice():[];i<a.length;i+=1){var s=a[i];At(o,s,this._oneTimeListeners),s.call(this,t)}var l=this._eventedParent;l&&(p(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),l.fire(t))}else t instanceof Mt&&console.error(t.error);return this},It.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},It.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var Lt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"string",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:[{"!":"text-offset"}],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:[{"!":"text-anchor"},{"!":"text-offset"},{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",requires:["text-field"],values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},Ft=function(t,e,o,n){this.message=(t?t+": ":"")+o,n&&(this.identifier=n),null!=e&&e.__line__&&(this.line=e.__line__)};function Nt(t){var e=t.key,o=t.value;return o?[new Ft(e,o,"constants have been deprecated as of v8")]:[]}function kt(t){for(var e=[],o=arguments.length-1;o-- >0;)e[o]=arguments[o+1];for(var n=0,r=e;n<r.length;n+=1){var i=r[n];for(var a in i)t[a]=i[a]}return t}function Gt(t){return t instanceof Number||t instanceof String||t instanceof Boolean}function Vt(t){return Gt(t)?t.valueOf():t}function Bt(t){if(Array.isArray(t))return t.map(Bt);if(t instanceof Object&&!Gt(t)){var e={};for(var o in t)e[o]=Bt(t[o]);return e}return Vt(t)}var zt=function(t){function e(e,o){t.call(this,o),this.message=o,this.key=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Ht=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var o=0,n=e;o<n.length;o+=1){var r=n[o],i=r[0],a=r[1];this.bindings[i]=a}};Ht.prototype.concat=function(t){return new Ht(this,t)},Ht.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Ht.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var jt={kind:"null"},Ut={kind:"number"},Wt={kind:"string"},Kt={kind:"boolean"},qt={kind:"color"},Yt={kind:"object"},Zt={kind:"value"},Xt={kind:"collator"},Jt={kind:"formatted"};function Qt(t,e){return{kind:"array",itemType:t,N:e}}function $t(t){if("array"===t.kind){var e=$t(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var te=[jt,Ut,Wt,Kt,qt,Jt,Yt,Qt(Zt)];function ee(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!ee(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var o=0,n=te;o<n.length;o+=1)if(!ee(n[o],e))return null}return"Expected "+$t(t)+" but found "+$t(e)+" instead."}var oe=e(function(t,e){var o={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function n(t){return(t=Math.round(t))<0?0:t>255?255:t}function r(t){return t<0?0:t>1?1:t}function i(t){return"%"===t[t.length-1]?n(parseFloat(t)/100*255):n(parseInt(t))}function a(t){return"%"===t[t.length-1]?r(parseFloat(t)/100):r(parseFloat(t))}function s(t,e,o){return o<0?o+=1:o>1&&(o-=1),6*o<1?t+(e-t)*o*6:2*o<1?e:3*o<2?t+(e-t)*(2/3-o)*6:t}try{e.parseCSSColor=function(t){var e,r=t.replace(/ /g,"").toLowerCase();if(r in o)return o[r].slice();if("#"===r[0])return 4===r.length?(e=parseInt(r.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===r.length&&(e=parseInt(r.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var l=r.indexOf("("),u=r.indexOf(")");if(-1!==l&&u+1===r.length){var c=r.substr(0,l),p=r.substr(l+1,u-(l+1)).split(","),d=1;switch(c){case"rgba":if(4!==p.length)return null;d=a(p.pop());case"rgb":return 3!==p.length?null:[i(p[0]),i(p[1]),i(p[2]),d];case"hsla":if(4!==p.length)return null;d=a(p.pop());case"hsl":if(3!==p.length)return null;var h=(parseFloat(p[0])%360+360)%360/360,f=a(p[1]),g=a(p[2]),y=g<=.5?g*(f+1):g+f-g*f,v=2*g-y;return[n(255*s(v,y,h+1/3)),n(255*s(v,y,h)),n(255*s(v,y,h-1/3)),d];default:return null}}return null}}catch(t){}}).parseCSSColor,ne=function(t,e,o,n){void 0===n&&(n=1),this.r=t,this.g=e,this.b=o,this.a=n};ne.parse=function(t){if(t){if(t instanceof ne)return t;if("string"==typeof t){var e=oe(t);if(e)return new ne(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},ne.prototype.toString=function(){var t=this.toArray(),e=t[0],o=t[1],n=t[2],r=t[3];return"rgba("+Math.round(e)+","+Math.round(o)+","+Math.round(n)+","+r+")"},ne.prototype.toArray=function(){var t=this.r,e=this.g,o=this.b,n=this.a;return 0===n?[0,0,0,0]:[255*t/n,255*e/n,255*o/n,n]},ne.black=new ne(0,0,0,1),ne.white=new ne(1,1,1,1),ne.transparent=new ne(0,0,0,0),ne.red=new ne(1,0,0,1);var re=function(t,e,o){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=o,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};re.prototype.compare=function(t,e){return this.collator.compare(t,e)},re.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ie=function(t,e,o){this.text=t,this.scale=e,this.fontStack=o},ae=function(t){this.sections=t};function se(t,e,o,n){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof o&&o>=0&&o<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:"Invalid rgba value ["+[t,e,o,n].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof n?[t,e,o,n]:[t,e,o]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function le(t){if(null===t)return jt;if("string"==typeof t)return Wt;if("boolean"==typeof t)return Kt;if("number"==typeof t)return Ut;if(t instanceof ne)return qt;if(t instanceof re)return Xt;if(t instanceof ae)return Jt;if(Array.isArray(t)){for(var e,o=t.length,n=0,r=t;n<r.length;n+=1){var i=le(r[n]);if(e){if(e===i)continue;e=Zt;break}e=i}return Qt(e||Zt,o)}return Yt}function ue(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof ne||t instanceof ae?t.toString():JSON.stringify(t)}ae.fromString=function(t){return new ae([new ie(t,null,null)])},ae.prototype.toString=function(){return this.sections.map(function(t){return t.text}).join("")},ae.prototype.serialize=function(){for(var t=["format"],e=0,o=this.sections;e<o.length;e+=1){var n=o[e];t.push(n.text);var r={};n.fontStack&&(r["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(r["font-scale"]=n.scale),t.push(r)}return t};var ce=function(t,e){this.type=t,this.value=e};ce.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!function t(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof ne)return!0;if(e instanceof re)return!0;if(e instanceof ae)return!0;if(Array.isArray(e)){for(var o=0,n=e;o<n.length;o+=1)if(!t(n[o]))return!1;return!0}if("object"==typeof e){for(var r in e)if(!t(e[r]))return!1;return!0}return!1}(t[1]))return e.error("invalid value");var o=t[1],n=le(o),r=e.expectedType;return"array"!==n.kind||0!==n.N||!r||"array"!==r.kind||"number"==typeof r.N&&0!==r.N||(n=r),new ce(n,o)},ce.prototype.evaluate=function(){return this.value},ce.prototype.eachChild=function(){},ce.prototype.possibleOutputs=function(){return[this.value]},ce.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof ne?["rgba"].concat(this.value.toArray()):this.value instanceof ae?this.value.serialize():this.value};var pe=function(t){this.name="ExpressionEvaluationError",this.message=t};pe.prototype.toJSON=function(){return this.message};var de={string:Wt,number:Ut,boolean:Kt,object:Yt},he=function(t,e){this.type=t,this.args=e};he.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var o,n=1,r=t[0];if("array"===r){var i,a;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in de)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);i=de[s],n++}else i=Zt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],n++}o=Qt(i,a)}else o=de[r];for(var l=[];n<t.length;n++){var u=e.parse(t[n],n,Zt);if(!u)return null;l.push(u)}return new he(o,l)},he.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var o=this.args[e].evaluate(t);if(!ee(this.type,le(o)))return o;if(e===this.args.length-1)throw new pe("Expected value to be of type "+$t(this.type)+", but found "+$t(le(o))+" instead.")}return null},he.prototype.eachChild=function(t){this.args.forEach(t)},he.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},he.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var o=t.itemType;if("string"===o.kind||"number"===o.kind||"boolean"===o.kind){e.push(o.kind);var n=t.N;("number"==typeof n||this.args.length>1)&&e.push(n)}}return e.concat(this.args.map(function(t){return t.serialize()}))};var fe=function(t){this.type=Jt,this.sections=t};fe.parse=function(t,e){if(t.length<3)return e.error("Expected at least two arguments.");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");for(var o=[],n=1;n<t.length-1;n+=2){var r=e.parse(t[n],1,Zt);if(!r)return null;var i=r.type.kind;if("string"!==i&&"value"!==i&&"null"!==i)return e.error("Formatted text type must be 'string', 'value', or 'null'.");var a=t[n+1];if("object"!=typeof a||Array.isArray(a))return e.error("Format options argument must be an object.");var s=null;if(a["font-scale"]&&!(s=e.parse(a["font-scale"],1,Ut)))return null;var l=null;if(a["text-font"]&&!(l=e.parse(a["text-font"],1,Qt(Wt))))return null;o.push({text:r,scale:s,font:l})}return new fe(o)},fe.prototype.evaluate=function(t){return new ae(this.sections.map(function(e){return new ie(ue(e.text.evaluate(t)),e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null)}))},fe.prototype.eachChild=function(t){for(var e=0,o=this.sections;e<o.length;e+=1){var n=o[e];t(n.text),n.scale&&t(n.scale),n.font&&t(n.font)}},fe.prototype.possibleOutputs=function(){return[void 0]},fe.prototype.serialize=function(){for(var t=["format"],e=0,o=this.sections;e<o.length;e+=1){var n=o[e];t.push(n.text.serialize());var r={};n.scale&&(r["font-scale"]=n.scale.serialize()),n.font&&(r["text-font"]=n.font.serialize()),t.push(r)}return t};var ge={"to-boolean":Kt,"to-color":qt,"to-number":Ut,"to-string":Wt},ye=function(t,e){this.type=t,this.args=e};ye.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var o=t[0];if(("to-boolean"===o||"to-string"===o)&&2!==t.length)return e.error("Expected one argument.");for(var n=ge[o],r=[],i=1;i<t.length;i++){var a=e.parse(t[i],i,Zt);if(!a)return null;r.push(a)}return new ye(n,r)},ye.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,o,n=0,r=this.args;n<r.length;n+=1){if(o=null,(e=r[n].evaluate(t))instanceof ne)return e;if("string"==typeof e){var i=t.parseColor(e);if(i)return i}else if(Array.isArray(e)&&!(o=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":se(e[0],e[1],e[2],e[3])))return new ne(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new pe(o||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var a=null,s=0,l=this.args;s<l.length;s+=1){if(null===(a=l[s].evaluate(t)))return 0;var u=Number(a);if(!isNaN(u))return u}throw new pe("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?ae.fromString(ue(this.args[0].evaluate(t))):ue(this.args[0].evaluate(t))},ye.prototype.eachChild=function(t){this.args.forEach(t)},ye.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},ye.prototype.serialize=function(){if("formatted"===this.type.kind)return new fe([{text:this.args[0],scale:null,font:null}]).serialize();var t=["to-"+this.type.kind];return this.eachChild(function(e){t.push(e.serialize())}),t};var ve=["Unknown","Point","LineString","Polygon"],me=function(){this.globals=null,this.feature=null,this.featureState=null,this._parseColorCache={}};me.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},me.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?ve[this.feature.type]:this.feature.type:null},me.prototype.properties=function(){return this.feature&&this.feature.properties||{}},me.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=ne.parse(t)),e};var Ce=function(t,e,o,n){this.name=t,this.type=e,this._evaluate=o,this.args=n};Ce.prototype.evaluate=function(t){return this._evaluate(t,this.args)},Ce.prototype.eachChild=function(t){this.args.forEach(t)},Ce.prototype.possibleOutputs=function(){return[void 0]},Ce.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},Ce.parse=function(t,e){var o,n=t[0],r=Ce.definitions[n];if(!r)return e.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var i=Array.isArray(r)?r[0]:r.type,a=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,s=a.filter(function(e){var o=e[0];return!Array.isArray(o)||o.length===t.length-1}),l=null,u=0,c=s;u<c.length;u+=1){var p=c[u],d=p[0],h=p[1];l=new xe(e.registry,e.path,null,e.scope);for(var f=[],g=!1,y=1;y<t.length;y++){var v=t[y],m=Array.isArray(d)?d[y-1]:d.type,C=l.parse(v,1+f.length,m);if(!C){g=!0;break}f.push(C)}if(!g)if(Array.isArray(d)&&d.length!==f.length)l.error("Expected "+d.length+" arguments, but found "+f.length+" instead.");else{for(var _=0;_<f.length;_++){var w=Array.isArray(d)?d[_]:d.type,b=f[_];l.concat(_+1).checkSubtype(w,b.type)}if(0===l.errors.length)return new Ce(n,i,h,f)}}if(1===s.length)(o=e.errors).push.apply(o,l.errors);else{for(var S=(s.length?s:a).map(function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map($t).join(", ")+")":"("+$t(e.type)+"...)"}).join(" | "),E=[],x=1;x<t.length;x++){var T=e.parse(t[x],1+E.length);if(!T)return null;E.push($t(T.type))}e.error("Expected arguments of type "+S+", but found ("+E.join(", ")+") instead.")}return null},Ce.register=function(t,e){for(var o in Ce.definitions=e,e)t[o]=Ce};var _e=function(t,e,o){this.type=Xt,this.locale=o,this.caseSensitive=t,this.diacriticSensitive=e};function we(t){if(t instanceof Ce){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}var e=!0;return t.eachChild(function(t){e&&!we(t)&&(e=!1)}),e}function be(t){if(t instanceof Ce&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild(function(t){e&&!be(t)&&(e=!1)}),e}function Se(t,e){if(t instanceof Ce&&e.indexOf(t.name)>=0)return!1;var o=!0;return t.eachChild(function(t){o&&!Se(t,e)&&(o=!1)}),o}_e.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var o=t[1];if("object"!=typeof o||Array.isArray(o))return e.error("Collator options argument must be an object.");var n=e.parse(void 0!==o["case-sensitive"]&&o["case-sensitive"],1,Kt);if(!n)return null;var r=e.parse(void 0!==o["diacritic-sensitive"]&&o["diacritic-sensitive"],1,Kt);if(!r)return null;var i=null;return o.locale&&!(i=e.parse(o.locale,1,Wt))?null:new _e(n,r,i)},_e.prototype.evaluate=function(t){return new re(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},_e.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},_e.prototype.possibleOutputs=function(){return[void 0]},_e.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Ee=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};Ee.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var o=t[1];return e.scope.has(o)?new Ee(o,e.scope.get(o)):e.error('Unknown variable "'+o+'". Make sure "'+o+'" has been bound in an enclosing "let" expression before using it.',1)},Ee.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},Ee.prototype.eachChild=function(){},Ee.prototype.possibleOutputs=function(){return[void 0]},Ee.prototype.serialize=function(){return["var",this.name]};var xe=function(t,e,o,n,r){void 0===e&&(e=[]),void 0===n&&(n=new Ht),void 0===r&&(r=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=n,this.errors=r,this.expectedType=o};function Te(t,e){for(var o,n,r=t.length-1,i=0,a=r,s=0;i<=a;)if(o=t[s=Math.floor((i+a)/2)],n=t[s+1],o<=e){if(s===r||e<n)return s;i=s+1}else{if(!(o>e))throw new pe("Input is not a number.");a=s-1}return 0}xe.prototype.parse=function(t,e,o,n,r){return void 0===r&&(r={}),e?this.concat(e,o,n)._parse(t,r):this._parse(t,r)},xe.prototype._parse=function(t,e){function o(t,e,o){return"assert"===o?new he(e,[t]):"coerce"===o?new ye(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=t[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found "+typeof n+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var r=this.registry[n];if(r){var i=r.parse(t,this);if(!i)return null;if(this.expectedType){var a=this.expectedType,s=i.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else i=o(i,a,e.typeAnnotation||"coerce");else i=o(i,a,e.typeAnnotation||"assert")}if(!(i instanceof ce)&&function t(e){if(e instanceof Ee)return t(e.boundExpression);if(e instanceof Ce&&"error"===e.name)return!1;if(e instanceof _e)return!1;var o=e instanceof ye||e instanceof he,n=!0;return e.eachChild(function(e){n=o?n&&t(e):n&&e instanceof ce}),!!n&&we(e)&&Se(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(i)){var l=new me;try{i=new ce(i.type,i.evaluate(l))}catch(t){return this.error(t.message),null}}return i}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof t+" instead.")},xe.prototype.concat=function(t,e,o){var n="number"==typeof t?this.path.concat(t):this.path,r=o?this.scope.concat(o):this.scope;return new xe(this.registry,n,e||null,r,this.errors)},xe.prototype.error=function(t){for(var e=[],o=arguments.length-1;o-- >0;)e[o]=arguments[o+1];var n=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new zt(n,t))},xe.prototype.checkSubtype=function(t,e){var o=ee(t,e);return o&&this.error(o),o};var Oe=function(t,e,o){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var n=0,r=o;n<r.length;n+=1){var i=r[n],a=i[0],s=i[1];this.labels.push(a),this.outputs.push(s)}};function Re(t,e,o){return t*(1-o)+e*o}Oe.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var o=e.parse(t[1],1,Ut);if(!o)return null;var n=[],r=null;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var i=1;i<t.length;i+=2){var a=1===i?-1/0:t[i],s=t[i+1],l=i,u=i+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(n.length&&n[n.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var c=e.parse(s,u,r);if(!c)return null;r=r||c.type,n.push([a,c])}return new Oe(r,o,n)},Oe.prototype.evaluate=function(t){var e=this.labels,o=this.outputs;if(1===e.length)return o[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return o[0].evaluate(t);var r=e.length;return n>=e[r-1]?o[r-1].evaluate(t):o[Te(e,n)].evaluate(t)},Oe.prototype.eachChild=function(t){t(this.input);for(var e=0,o=this.outputs;e<o.length;e+=1)t(o[e])},Oe.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}))},Oe.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var Pe=Object.freeze({number:Re,color:function(t,e,o){return new ne(Re(t.r,e.r,o),Re(t.g,e.g,o),Re(t.b,e.b,o),Re(t.a,e.a,o))},array:function(t,e,o){return t.map(function(t,n){return Re(t,e[n],o)})}}),Ae=.95047,De=1,Me=1.08883,Ie=4/29,Le=6/29,Fe=3*Le*Le,Ne=Le*Le*Le,ke=Math.PI/180,Ge=180/Math.PI;function Ve(t){return t>Ne?Math.pow(t,1/3):t/Fe+Ie}function Be(t){return t>Le?t*t*t:Fe*(t-Ie)}function ze(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function He(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function je(t){var e=He(t.r),o=He(t.g),n=He(t.b),r=Ve((.4124564*e+.3575761*o+.1804375*n)/Ae),i=Ve((.2126729*e+.7151522*o+.072175*n)/De);return{l:116*i-16,a:500*(r-i),b:200*(i-Ve((.0193339*e+.119192*o+.9503041*n)/Me)),alpha:t.a}}function Ue(t){var e=(t.l+16)/116,o=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=De*Be(e),o=Ae*Be(o),n=Me*Be(n),new ne(ze(3.2404542*o-1.5371385*e-.4985314*n),ze(-.969266*o+1.8760108*e+.041556*n),ze(.0556434*o-.2040259*e+1.0572252*n),t.alpha)}function We(t,e,o){var n=e-t;return t+o*(n>180||n<-180?n-360*Math.round(n/360):n)}var Ke={forward:je,reverse:Ue,interpolate:function(t,e,o){return{l:Re(t.l,e.l,o),a:Re(t.a,e.a,o),b:Re(t.b,e.b,o),alpha:Re(t.alpha,e.alpha,o)}}},qe={forward:function(t){var e=je(t),o=e.l,n=e.a,r=e.b,i=Math.atan2(r,n)*Ge;return{h:i<0?i+360:i,c:Math.sqrt(n*n+r*r),l:o,alpha:t.a}},reverse:function(t){var e=t.h*ke,o=t.c;return Ue({l:t.l,a:Math.cos(e)*o,b:Math.sin(e)*o,alpha:t.alpha})},interpolate:function(t,e,o){return{h:We(t.h,e.h,o),c:Re(t.c,e.c,o),l:Re(t.l,e.l,o),alpha:Re(t.alpha,e.alpha,o)}}},Ye=Object.freeze({lab:Ke,hcl:qe}),Ze=function(t,e,o,n,r){this.type=t,this.operator=e,this.interpolation=o,this.input=n,this.labels=[],this.outputs=[];for(var i=0,a=r;i<a.length;i+=1){var s=a[i],l=s[0],u=s[1];this.labels.push(l),this.outputs.push(u)}};function Xe(t,e,o,n){var r=n-o,i=t-o;return 0===r?0:1===e?i/r:(Math.pow(e,i)-1)/(Math.pow(e,r)-1)}Ze.interpolationFactor=function(t,e,n,r){var i=0;if("exponential"===t.name)i=Xe(e,t.base,n,r);else if("linear"===t.name)i=Xe(e,1,n,r);else if("cubic-bezier"===t.name){var a=t.controlPoints;i=new o(a[0],a[1],a[2],a[3]).solve(Xe(e,1,n,r))}return i},Ze.parse=function(t,e){var o=t[0],n=t[1],r=t[2],i=t.slice(3);if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var a=n[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:a}}else{if("cubic-bezier"!==n[0])return e.error("Unknown interpolation type "+String(n[0]),1,0);var s=n.slice(1);if(4!==s.length||s.some(function(t){return"number"!=typeof t||t<0||t>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(r=e.parse(r,2,Ut)))return null;var l=[],u=null;"interpolate-hcl"===o||"interpolate-lab"===o?u=qt:e.expectedType&&"value"!==e.expectedType.kind&&(u=e.expectedType);for(var c=0;c<i.length;c+=2){var p=i[c],d=i[c+1],h=c+3,f=c+4;if("number"!=typeof p)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(l.length&&l[l.length-1][0]>=p)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',h);var g=e.parse(d,f,u);if(!g)return null;u=u||g.type,l.push([p,g])}return"number"===u.kind||"color"===u.kind||"array"===u.kind&&"number"===u.itemType.kind&&"number"==typeof u.N?new Ze(u,o,n,r,l):e.error("Type "+$t(u)+" is not interpolatable.")},Ze.prototype.evaluate=function(t){var e=this.labels,o=this.outputs;if(1===e.length)return o[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return o[0].evaluate(t);var r=e.length;if(n>=e[r-1])return o[r-1].evaluate(t);var i=Te(e,n),a=e[i],s=e[i+1],l=Ze.interpolationFactor(this.interpolation,n,a,s),u=o[i].evaluate(t),c=o[i+1].evaluate(t);return"interpolate"===this.operator?Pe[this.type.kind.toLowerCase()](u,c,l):"interpolate-hcl"===this.operator?qe.reverse(qe.interpolate(qe.forward(u),qe.forward(c),l)):Ke.reverse(Ke.interpolate(Ke.forward(u),Ke.forward(c),l))},Ze.prototype.eachChild=function(t){t(this.input);for(var e=0,o=this.outputs;e<o.length;e+=1)t(o[e])},Ze.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()}))},Ze.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],o=0;o<this.labels.length;o++)e.push(this.labels[o],this.outputs[o].serialize());return e};var Je=function(t,e){this.type=t,this.args=e};Je.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var o=null,n=e.expectedType;n&&"value"!==n.kind&&(o=n);for(var r=[],i=0,a=t.slice(1);i<a.length;i+=1){var s=a[i],l=e.parse(s,1+r.length,o,void 0,{typeAnnotation:"omit"});if(!l)return null;o=o||l.type,r.push(l)}var u=n&&r.some(function(t){return ee(n,t.type)});return new Je(u?Zt:o,r)},Je.prototype.evaluate=function(t){for(var e=null,o=0,n=this.args;o<n.length&&null===(e=n[o].evaluate(t));o+=1);return e},Je.prototype.eachChild=function(t){this.args.forEach(t)},Je.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.args.map(function(t){return t.possibleOutputs()}))},Je.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(e){t.push(e.serialize())}),t};var Qe=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};Qe.prototype.evaluate=function(t){return this.result.evaluate(t)},Qe.prototype.eachChild=function(t){for(var e=0,o=this.bindings;e<o.length;e+=1)t(o[e][1]);t(this.result)},Qe.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var o=[],n=1;n<t.length-1;n+=2){var r=t[n];if("string"!=typeof r)return e.error("Expected string, but found "+typeof r+" instead.",n);if(/[^a-zA-Z0-9_]/.test(r))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);var i=e.parse(t[n+1],n+1);if(!i)return null;o.push([r,i])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,o);return a?new Qe(o,a):null},Qe.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},Qe.prototype.serialize=function(){for(var t=["let"],e=0,o=this.bindings;e<o.length;e+=1){var n=o[e],r=n[0],i=n[1];t.push(r,i.serialize())}return t.push(this.result.serialize()),t};var $e=function(t,e,o){this.type=t,this.index=e,this.input=o};$e.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var o=e.parse(t[1],1,Ut),n=e.parse(t[2],2,Qt(e.expectedType||Zt));if(!o||!n)return null;var r=n.type;return new $e(r.itemType,o,n)},$e.prototype.evaluate=function(t){var e=this.index.evaluate(t),o=this.input.evaluate(t);if(e<0)throw new pe("Array index out of bounds: "+e+" < 0.");if(e>=o.length)throw new pe("Array index out of bounds: "+e+" > "+(o.length-1)+".");if(e!==Math.floor(e))throw new pe("Array index must be an integer, but found "+e+" instead.");return o[e]},$e.prototype.eachChild=function(t){t(this.index),t(this.input)},$e.prototype.possibleOutputs=function(){return[void 0]},$e.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var to=function(t,e,o,n,r,i){this.inputType=t,this.type=e,this.input=o,this.cases=n,this.outputs=r,this.otherwise=i};to.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var o,n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var r={},i=[],a=2;a<t.length-1;a+=2){var s=t[a],l=t[a+1];Array.isArray(s)||(s=[s]);var u=e.concat(a);if(0===s.length)return u.error("Expected at least one branch label.");for(var c=0,p=s;c<p.length;c+=1){var d=p[c];if("number"!=typeof d&&"string"!=typeof d)return u.error("Branch labels must be numbers or strings.");if("number"==typeof d&&Math.abs(d)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof d&&Math.floor(d)!==d)return u.error("Numeric branch labels must be integer values.");if(o){if(u.checkSubtype(o,le(d)))return null}else o=le(d);if(void 0!==r[String(d)])return u.error("Branch labels must be unique.");r[String(d)]=i.length}var h=e.parse(l,a,n);if(!h)return null;n=n||h.type,i.push(h)}var f=e.parse(t[1],1,Zt);if(!f)return null;var g=e.parse(t[t.length-1],t.length-1,n);return g?"value"!==f.type.kind&&e.concat(1).checkSubtype(o,f.type)?null:new to(o,n,f,r,i,g):null},to.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(le(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},to.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},to.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.outputs.map(function(t){return t.possibleOutputs()})).concat(this.otherwise.possibleOutputs())},to.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],o=[],n={},r=0,i=Object.keys(this.cases).sort();r<i.length;r+=1){var a=i[r];void 0===(p=n[this.cases[a]])?(n[this.cases[a]]=o.length,o.push([this.cases[a],[a]])):o[p][1].push(a)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},l=0,u=o;l<u.length;l+=1){var c=u[l],p=c[0],d=c[1];1===d.length?e.push(s(d[0])):e.push(d.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var eo=function(t,e,o){this.type=t,this.branches=e,this.otherwise=o};function oo(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function no(t,e,o,n){return 0===n.compare(e,o)}function ro(t,e,o){var n="=="!==t&&"!="!==t;return function(){function r(t,e,o){this.type=Kt,this.lhs=t,this.rhs=e,this.collator=o,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return r.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var o=t[0],i=e.parse(t[1],1,Zt);if(!i)return null;if(!oo(o,i.type))return e.concat(1).error('"'+o+"\" comparisons are not supported for type '"+$t(i.type)+"'.");var a=e.parse(t[2],2,Zt);if(!a)return null;if(!oo(o,a.type))return e.concat(2).error('"'+o+"\" comparisons are not supported for type '"+$t(a.type)+"'.");if(i.type.kind!==a.type.kind&&"value"!==i.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '"+$t(i.type)+"' and '"+$t(a.type)+"'.");n&&("value"===i.type.kind&&"value"!==a.type.kind?i=new he(a.type,[i]):"value"!==i.type.kind&&"value"===a.type.kind&&(a=new he(i.type,[a])));var s=null;if(4===t.length){if("string"!==i.type.kind&&"string"!==a.type.kind&&"value"!==i.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,Xt)))return null}return new r(i,a,s)},r.prototype.evaluate=function(r){var i=this.lhs.evaluate(r),a=this.rhs.evaluate(r);if(n&&this.hasUntypedArgument){var s=le(i),l=le(a);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new pe('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+l.kind+") instead.")}if(this.collator&&!n&&this.hasUntypedArgument){var u=le(i),c=le(a);if("string"!==u.kind||"string"!==c.kind)return e(r,i,a)}return this.collator?o(r,i,a,this.collator.evaluate(r)):e(r,i,a)},r.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},r.prototype.possibleOutputs=function(){return[!0,!1]},r.prototype.serialize=function(){var e=[t];return this.eachChild(function(t){e.push(t.serialize())}),e},r}()}eo.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var o;e.expectedType&&"value"!==e.expectedType.kind&&(o=e.expectedType);for(var n=[],r=1;r<t.length-1;r+=2){var i=e.parse(t[r],r,Kt);if(!i)return null;var a=e.parse(t[r+1],r+1,o);if(!a)return null;n.push([i,a]),o=o||a.type}var s=e.parse(t[t.length-1],t.length-1,o);return s?new eo(o,n,s):null},eo.prototype.evaluate=function(t){for(var e=0,o=this.branches;e<o.length;e+=1){var n=o[e],r=n[0],i=n[1];if(r.evaluate(t))return i.evaluate(t)}return this.otherwise.evaluate(t)},eo.prototype.eachChild=function(t){for(var e=0,o=this.branches;e<o.length;e+=1){var n=o[e],r=n[0],i=n[1];t(r),t(i)}t(this.otherwise)},eo.prototype.possibleOutputs=function(){var t;return(t=[]).concat.apply(t,this.branches.map(function(t){return t[0],t[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs())},eo.prototype.serialize=function(){var t=["case"];return this.eachChild(function(e){t.push(e.serialize())}),t};var io=ro("==",function(t,e,o){return e===o},no),ao=ro("!=",function(t,e,o){return e!==o},function(t,e,o,n){return!no(0,e,o,n)}),so=ro("<",function(t,e,o){return e<o},function(t,e,o,n){return n.compare(e,o)<0}),lo=ro(">",function(t,e,o){return e>o},function(t,e,o,n){return n.compare(e,o)>0}),uo=ro("<=",function(t,e,o){return e<=o},function(t,e,o,n){return n.compare(e,o)<=0}),co=ro(">=",function(t,e,o){return e>=o},function(t,e,o,n){return n.compare(e,o)>=0}),po=function(t,e,o,n,r){this.type=Wt,this.number=t,this.locale=e,this.currency=o,this.minFractionDigits=n,this.maxFractionDigits=r};po.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var o=e.parse(t[1],1,Ut);if(!o)return null;var n=t[2];if("object"!=typeof n||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");var r=null;if(n.locale&&!(r=e.parse(n.locale,1,Wt)))return null;var i=null;if(n.currency&&!(i=e.parse(n.currency,1,Wt)))return null;var a=null;if(n["min-fraction-digits"]&&!(a=e.parse(n["min-fraction-digits"],1,Ut)))return null;var s=null;return n["max-fraction-digits"]&&!(s=e.parse(n["max-fraction-digits"],1,Ut))?null:new po(o,r,i,a,s)},po.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},po.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},po.prototype.possibleOutputs=function(){return[void 0]},po.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var ho=function(t){this.type=Ut,this.input=t};ho.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var o=e.parse(t[1],1);return o?"array"!==o.type.kind&&"string"!==o.type.kind&&"value"!==o.type.kind?e.error("Expected argument of type string or array, but found "+$t(o.type)+" instead."):new ho(o):null},ho.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new pe("Expected value to be of type string or array, but found "+$t(le(e))+" instead.")},ho.prototype.eachChild=function(t){t(this.input)},ho.prototype.possibleOutputs=function(){return[void 0]},ho.prototype.serialize=function(){var t=["length"];return this.eachChild(function(e){t.push(e.serialize())}),t};var fo={"==":io,"!=":ao,">":lo,"<":so,">=":co,"<=":uo,array:he,at:$e,boolean:he,case:eo,coalesce:Je,collator:_e,format:fe,interpolate:Ze,"interpolate-hcl":Ze,"interpolate-lab":Ze,length:ho,let:Qe,literal:ce,match:to,number:he,"number-format":po,object:he,step:Oe,string:he,"to-boolean":ye,"to-color":ye,"to-number":ye,"to-string":ye,var:Ee};function go(t,e){var o=e[0],n=e[1],r=e[2],i=e[3];o=o.evaluate(t),n=n.evaluate(t),r=r.evaluate(t);var a=i?i.evaluate(t):1,s=se(o,n,r,a);if(s)throw new pe(s);return new ne(o/255*a,n/255*a,r/255*a,a)}function yo(t,e){return t in e}function vo(t,e){var o=e[t];return void 0===o?null:o}function mo(t){return{type:t}}function Co(t){return{result:"success",value:t}}function _o(t){return{result:"error",value:t}}function wo(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function bo(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function So(t){return!!t.expression&&t.expression.interpolated}function Eo(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function xo(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function To(t){return t}function Oo(t,e,o){return void 0!==t?t:void 0!==e?e:void 0!==o?o:void 0}function Ro(t,e,o,n,r){return Oo(typeof o===r?n[o]:void 0,t.default,e.default)}function Po(t,e,o){if("number"!==Eo(o))return Oo(t.default,e.default);var n=t.stops.length;if(1===n)return t.stops[0][1];if(o<=t.stops[0][0])return t.stops[0][1];if(o>=t.stops[n-1][0])return t.stops[n-1][1];var r=Te(t.stops.map(function(t){return t[0]}),o);return t.stops[r][1]}function Ao(t,e,o){var n=void 0!==t.base?t.base:1;if("number"!==Eo(o))return Oo(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(o<=t.stops[0][0])return t.stops[0][1];if(o>=t.stops[r-1][0])return t.stops[r-1][1];var i=Te(t.stops.map(function(t){return t[0]}),o),a=function(t,e,o,n){var r=n-o,i=t-o;return 0===r?0:1===e?i/r:(Math.pow(e,i)-1)/(Math.pow(e,r)-1)}(o,n,t.stops[i][0],t.stops[i+1][0]),s=t.stops[i][1],l=t.stops[i+1][1],u=Pe[e.type]||To;if(t.colorSpace&&"rgb"!==t.colorSpace){var c=Ye[t.colorSpace];u=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var o=s.evaluate.apply(void 0,t),n=l.evaluate.apply(void 0,t);if(void 0!==o&&void 0!==n)return u(o,n,a)}}:u(s,l,a)}function Do(t,e,o){return"color"===e.type?o=ne.parse(o):"formatted"===e.type?o=ae.fromString(o.toString()):Eo(o)===e.type||"enum"===e.type&&e.values[o]||(o=void 0),Oo(o,t.default,e.default)}Ce.register(fo,{error:[{kind:"error"},[Wt],function(t,e){var o=e[0];throw new pe(o.evaluate(t))}],typeof:[Wt,[Zt],function(t,e){return $t(le(e[0].evaluate(t)))}],"to-rgba":[Qt(Ut,4),[qt],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[qt,[Ut,Ut,Ut],go],rgba:[qt,[Ut,Ut,Ut,Ut],go],has:{type:Kt,overloads:[[[Wt],function(t,e){return yo(e[0].evaluate(t),t.properties())}],[[Wt,Yt],function(t,e){var o=e[0],n=e[1];return yo(o.evaluate(t),n.evaluate(t))}]]},get:{type:Zt,overloads:[[[Wt],function(t,e){return vo(e[0].evaluate(t),t.properties())}],[[Wt,Yt],function(t,e){var o=e[0],n=e[1];return vo(o.evaluate(t),n.evaluate(t))}]]},"feature-state":[Zt,[Wt],function(t,e){return vo(e[0].evaluate(t),t.featureState||{})}],properties:[Yt,[],function(t){return t.properties()}],"geometry-type":[Wt,[],function(t){return t.geometryType()}],id:[Zt,[],function(t){return t.id()}],zoom:[Ut,[],function(t){return t.globals.zoom}],"heatmap-density":[Ut,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[Ut,[],function(t){return t.globals.lineProgress||0}],accumulated:[Zt,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[Ut,mo(Ut),function(t,e){for(var o=0,n=0,r=e;n<r.length;n+=1)o+=r[n].evaluate(t);return o}],"*":[Ut,mo(Ut),function(t,e){for(var o=1,n=0,r=e;n<r.length;n+=1)o*=r[n].evaluate(t);return o}],"-":{type:Ut,overloads:[[[Ut,Ut],function(t,e){var o=e[0],n=e[1];return o.evaluate(t)-n.evaluate(t)}],[[Ut],function(t,e){return-e[0].evaluate(t)}]]},"/":[Ut,[Ut,Ut],function(t,e){var o=e[0],n=e[1];return o.evaluate(t)/n.evaluate(t)}],"%":[Ut,[Ut,Ut],function(t,e){var o=e[0],n=e[1];return o.evaluate(t)%n.evaluate(t)}],ln2:[Ut,[],function(){return Math.LN2}],pi:[Ut,[],function(){return Math.PI}],e:[Ut,[],function(){return Math.E}],"^":[Ut,[Ut,Ut],function(t,e){var o=e[0],n=e[1];return Math.pow(o.evaluate(t),n.evaluate(t))}],sqrt:[Ut,[Ut],function(t,e){var o=e[0];return Math.sqrt(o.evaluate(t))}],log10:[Ut,[Ut],function(t,e){var o=e[0];return Math.log(o.evaluate(t))/Math.LN10}],ln:[Ut,[Ut],function(t,e){var o=e[0];return Math.log(o.evaluate(t))}],log2:[Ut,[Ut],function(t,e){var o=e[0];return Math.log(o.evaluate(t))/Math.LN2}],sin:[Ut,[Ut],function(t,e){var o=e[0];return Math.sin(o.evaluate(t))}],cos:[Ut,[Ut],function(t,e){var o=e[0];return Math.cos(o.evaluate(t))}],tan:[Ut,[Ut],function(t,e){var o=e[0];return Math.tan(o.evaluate(t))}],asin:[Ut,[Ut],function(t,e){var o=e[0];return Math.asin(o.evaluate(t))}],acos:[Ut,[Ut],function(t,e){var o=e[0];return Math.acos(o.evaluate(t))}],atan:[Ut,[Ut],function(t,e){var o=e[0];return Math.atan(o.evaluate(t))}],min:[Ut,mo(Ut),function(t,e){return Math.min.apply(Math,e.map(function(e){return e.evaluate(t)}))}],max:[Ut,mo(Ut),function(t,e){return Math.max.apply(Math,e.map(function(e){return e.evaluate(t)}))}],abs:[Ut,[Ut],function(t,e){var o=e[0];return Math.abs(o.evaluate(t))}],round:[Ut,[Ut],function(t,e){var o=e[0].evaluate(t);return o<0?-Math.round(-o):Math.round(o)}],floor:[Ut,[Ut],function(t,e){var o=e[0];return Math.floor(o.evaluate(t))}],ceil:[Ut,[Ut],function(t,e){var o=e[0];return Math.ceil(o.evaluate(t))}],"filter-==":[Kt,[Wt,Zt],function(t,e){var o=e[0],n=e[1];return t.properties()[o.value]===n.value}],"filter-id-==":[Kt,[Zt],function(t,e){var o=e[0];return t.id()===o.value}],"filter-type-==":[Kt,[Wt],function(t,e){var o=e[0];return t.geometryType()===o.value}],"filter-<":[Kt,[Wt,Zt],function(t,e){var o=e[0],n=e[1],r=t.properties()[o.value],i=n.value;return typeof r==typeof i&&r<i}],"filter-id-<":[Kt,[Zt],function(t,e){var o=e[0],n=t.id(),r=o.value;return typeof n==typeof r&&n<r}],"filter->":[Kt,[Wt,Zt],function(t,e){var o=e[0],n=e[1],r=t.properties()[o.value],i=n.value;return typeof r==typeof i&&r>i}],"filter-id->":[Kt,[Zt],function(t,e){var o=e[0],n=t.id(),r=o.value;return typeof n==typeof r&&n>r}],"filter-<=":[Kt,[Wt,Zt],function(t,e){var o=e[0],n=e[1],r=t.properties()[o.value],i=n.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[Kt,[Zt],function(t,e){var o=e[0],n=t.id(),r=o.value;return typeof n==typeof r&&n<=r}],"filter->=":[Kt,[Wt,Zt],function(t,e){var o=e[0],n=e[1],r=t.properties()[o.value],i=n.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[Kt,[Zt],function(t,e){var o=e[0],n=t.id(),r=o.value;return typeof n==typeof r&&n>=r}],"filter-has":[Kt,[Zt],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[Kt,[],function(t){return null!==t.id()}],"filter-type-in":[Kt,[Qt(Wt)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[Kt,[Qt(Zt)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[Kt,[Wt,Qt(Zt)],function(t,e){var o=e[0];return e[1].value.indexOf(t.properties()[o.value])>=0}],"filter-in-large":[Kt,[Wt,Qt(Zt)],function(t,e){var o=e[0],n=e[1];return function(t,e,o,n){for(;o<=n;){var r=o+n>>1;if(e[r]===t)return!0;e[r]>t?n=r-1:o=r+1}return!1}(t.properties()[o.value],n.value,0,n.value.length-1)}],all:{type:Kt,overloads:[[[Kt,Kt],function(t,e){var o=e[0],n=e[1];return o.evaluate(t)&&n.evaluate(t)}],[mo(Kt),function(t,e){for(var o=0,n=e;o<n.length;o+=1)if(!n[o].evaluate(t))return!1;return!0}]]},any:{type:Kt,overloads:[[[Kt,Kt],function(t,e){var o=e[0],n=e[1];return o.evaluate(t)||n.evaluate(t)}],[mo(Kt),function(t,e){for(var o=0,n=e;o<n.length;o+=1)if(n[o].evaluate(t))return!0;return!1}]]},"!":[Kt,[Kt],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[Kt,[Wt],function(t,e){var o=e[0],n=t.globals&&t.globals.isSupportedScript;return!n||n(o.evaluate(t))}],upcase:[Wt,[Wt],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[Wt,[Wt],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[Wt,mo(Zt),function(t,e){return e.map(function(e){return ue(e.evaluate(t))}).join("")}],"resolved-locale":[Wt,[Xt],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var Mo=function(t,e){var o;this.expression=t,this._warningHistory={},this._evaluator=new me,this._defaultValue=e?"color"===(o=e).type&&xo(o.default)?new ne(0,0,0,0):"color"===o.type?ne.parse(o.default)||null:void 0===o.default?null:o.default:null,this._enumValues=e&&"enum"===e.type?e.values:null};function Io(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in fo}function Lo(t,e){var o=new xe(fo,[],e?function(t){var e={color:qt,string:Wt,number:Ut,enum:Wt,boolean:Kt,formatted:Jt};return"array"===t.type?Qt(e[t.value]||Zt,t.length):e[t.type]}(e):void 0),n=o.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return n?Co(new Mo(n,e)):_o(o.errors)}Mo.prototype.evaluateWithoutErrorHandling=function(t,e,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=o,this.expression.evaluate(this._evaluator)},Mo.prototype.evaluate=function(t,e,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=o||null;try{var n=this.expression.evaluate(this._evaluator);if(null==n)return this._defaultValue;if(this._enumValues&&!(n in this._enumValues))throw new pe("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(n)+" instead.");return n}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var Fo=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!be(e.expression)};Fo.prototype.evaluateWithoutErrorHandling=function(t,e,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,o)},Fo.prototype.evaluate=function(t,e,o){return this._styleExpression.evaluate(t,e,o)};var No=function(t,e,o){this.kind=t,this.zoomStops=o.labels,this._styleExpression=e,this.isStateDependent="camera"!==t&&!be(e.expression),o instanceof Ze&&(this.interpolationType=o.interpolation)};function ko(t,e){if("error"===(t=Lo(t,e)).result)return t;var o=t.value.expression,n=we(o);if(!n&&!wo(e))return _o([new zt("","data expressions not supported")]);var r=Se(o,["zoom"]);if(!r&&!bo(e))return _o([new zt("","zoom expressions not supported")]);var i=function t(e){var o=null;if(e instanceof Qe)o=t(e.result);else if(e instanceof Je)for(var n=0,r=e.args;n<r.length;n+=1){var i=r[n];if(o=t(i))break}else(e instanceof Oe||e instanceof Ze)&&e.input instanceof Ce&&"zoom"===e.input.name&&(o=e);return o instanceof zt?o:(e.eachChild(function(e){var n=t(e);n instanceof zt?o=n:!o&&n?o=new zt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&n&&o!==n&&(o=new zt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o)}(o);return i||r?i instanceof zt?_o([i]):i instanceof Ze&&!So(e)?_o([new zt("",'"interpolate" expressions cannot be used with this property')]):Co(i?new No(n?"camera":"composite",t.value,i):new Fo(n?"constant":"source",t.value)):_o([new zt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}No.prototype.evaluateWithoutErrorHandling=function(t,e,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,o)},No.prototype.evaluate=function(t,e,o){return this._styleExpression.evaluate(t,e,o)},No.prototype.interpolationFactor=function(t,e,o){return this.interpolationType?Ze.interpolationFactor(this.interpolationType,t,e,o):0};var Go=function(t,e){this._parameters=t,this._specification=e,kt(this,function t(e,o){var n,r,i,a="color"===o.type,s=e.stops&&"object"==typeof e.stops[0][0],l=s||void 0!==e.property,u=s||!l,c=e.type||(So(o)?"exponential":"interval");if(a&&((e=kt({},e)).stops&&(e.stops=e.stops.map(function(t){return[t[0],ne.parse(t[1])]})),e.default?e.default=ne.parse(e.default):e.default=ne.parse(o.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Ye[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===c)n=Ao;else if("interval"===c)n=Po;else if("categorical"===c){n=Ro,r=Object.create(null);for(var p=0,d=e.stops;p<d.length;p+=1){var h=d[p];r[h[0]]=h[1]}i=typeof e.stops[0][0]}else{if("identity"!==c)throw new Error('Unknown function type "'+c+'"');n=Do}if(s){for(var f={},g=[],y=0;y<e.stops.length;y++){var v=e.stops[y],m=v[0].zoom;void 0===f[m]&&(f[m]={zoom:m,type:e.type,property:e.property,default:e.default,stops:[]},g.push(m)),f[m].stops.push([v[0].value,v[1]])}for(var C=[],_=0,w=g;_<w.length;_+=1){var b=w[_];C.push([f[b].zoom,t(f[b],o)])}var S={name:"linear"};return{kind:"composite",interpolationType:S,interpolationFactor:Ze.interpolationFactor.bind(void 0,S),zoomStops:C.map(function(t){return t[0]}),evaluate:function(t,n){var r=t.zoom;return Ao({stops:C,base:e.base},o,r).evaluate(r,n)}}}if(u){var E="exponential"===c?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:E,interpolationFactor:Ze.interpolationFactor.bind(void 0,E),zoomStops:e.stops.map(function(t){return t[0]}),evaluate:function(t){var a=t.zoom;return n(e,o,a,r,i)}}}return{kind:"source",evaluate:function(t,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?Oo(e.default,o.default):n(e,o,s,r,i)}}}(this._parameters,this._specification))};function Vo(t){var e=t.key,o=t.value,n=t.valueSpec||{},r=t.objectElementValidators||{},i=t.style,a=t.styleSpec,s=[],l=Eo(o);if("object"!==l)return[new Ft(e,o,"object expected, "+l+" found")];for(var u in o){var c=u.split(".")[0],p=n[c]||n["*"],d=void 0;if(r[c])d=r[c];else if(n[c])d=cn;else if(r["*"])d=r["*"];else{if(!n["*"]){s.push(new Ft(e,o[u],'unknown property "'+u+'"'));continue}d=cn}s=s.concat(d({key:(e?e+".":e)+u,value:o[u],valueSpec:p,style:i,styleSpec:a,object:o,objectKey:u},o))}for(var h in n)r[h]||n[h].required&&void 0===n[h].default&&void 0===o[h]&&s.push(new Ft(e,o,'missing required property "'+h+'"'));return s}function Bo(t){var e=t.value,o=t.valueSpec,n=t.style,r=t.styleSpec,i=t.key,a=t.arrayElementValidator||cn;if("array"!==Eo(e))return[new Ft(i,e,"array expected, "+Eo(e)+" found")];if(o.length&&e.length!==o.length)return[new Ft(i,e,"array length "+o.length+" expected, length "+e.length+" found")];if(o["min-length"]&&e.length<o["min-length"])return[new Ft(i,e,"array length at least "+o["min-length"]+" expected, length "+e.length+" found")];var s={type:o.value,values:o.values};r.$version<7&&(s.function=o.function),"object"===Eo(o.value)&&(s=o.value);for(var l=[],u=0;u<e.length;u++)l=l.concat(a({array:e,arrayIndex:u,value:e[u],valueSpec:s,style:n,styleSpec:r,key:i+"["+u+"]"}));return l}function zo(t){var e=t.key,o=t.value,n=t.valueSpec,r=Eo(o);return"number"!==r?[new Ft(e,o,"number expected, "+r+" found")]:"minimum"in n&&o<n.minimum?[new Ft(e,o,o+" is less than the minimum value "+n.minimum)]:"maximum"in n&&o>n.maximum?[new Ft(e,o,o+" is greater than the maximum value "+n.maximum)]:[]}function Ho(t){var e,o,n,r=t.valueSpec,i=Vt(t.value.type),a={},s="categorical"!==i&&void 0===t.value.property,l=!s,u="array"===Eo(t.value.stops)&&"array"===Eo(t.value.stops[0])&&"object"===Eo(t.value.stops[0][0]),c=Vo({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===i)return[new Ft(t.key,t.value,'identity function may not have a "stops" property')];var e=[],o=t.value;return e=e.concat(Bo({key:t.key,value:o,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:p})),"array"===Eo(o)&&0===o.length&&e.push(new Ft(t.key,o,"array must have at least one stop")),e},default:function(t){return cn({key:t.key,value:t.value,valueSpec:r,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===i&&s&&c.push(new Ft(t.key,t.value,'missing required property "property"')),"identity"===i||t.value.stops||c.push(new Ft(t.key,t.value,'missing required property "stops"')),"exponential"===i&&t.valueSpec.expression&&!So(t.valueSpec)&&c.push(new Ft(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(l&&!wo(t.valueSpec)?c.push(new Ft(t.key,t.value,"property functions not supported")):s&&!bo(t.valueSpec)&&c.push(new Ft(t.key,t.value,"zoom functions not supported"))),"categorical"!==i&&!u||void 0!==t.value.property||c.push(new Ft(t.key,t.value,'"property" property is required')),c;function p(t){var e=[],i=t.value,s=t.key;if("array"!==Eo(i))return[new Ft(s,i,"array expected, "+Eo(i)+" found")];if(2!==i.length)return[new Ft(s,i,"array length 2 expected, length "+i.length+" found")];if(u){if("object"!==Eo(i[0]))return[new Ft(s,i,"object expected, "+Eo(i[0])+" found")];if(void 0===i[0].zoom)return[new Ft(s,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new Ft(s,i,"object stop key must have value")];if(n&&n>Vt(i[0].zoom))return[new Ft(s,i[0].zoom,"stop zoom values must appear in ascending order")];Vt(i[0].zoom)!==n&&(n=Vt(i[0].zoom),o=void 0,a={}),e=e.concat(Vo({key:s+"[0]",value:i[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:zo,value:d}}))}else e=e.concat(d({key:s+"[0]",value:i[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},i));return Io(Bt(i[1]))?e.concat([new Ft(s+"[1]",i[1],"expressions are not allowed in function stops.")]):e.concat(cn({key:s+"[1]",value:i[1],valueSpec:r,style:t.style,styleSpec:t.styleSpec}))}function d(t,n){var s=Eo(t.value),l=Vt(t.value),u=null!==t.value?t.value:n;if(e){if(s!==e)return[new Ft(t.key,u,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Ft(t.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==i){var c="number expected, "+s+" found";return wo(r)&&void 0===i&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ft(t.key,u,c)]}return"categorical"!==i||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==i&&"number"===s&&void 0!==o&&l<o?[new Ft(t.key,u,"stop domain values must appear in ascending order")]:(o=l,"categorical"===i&&l in a?[new Ft(t.key,u,"stop domain values must be unique")]:(a[l]=!0,[])):[new Ft(t.key,u,"integer expected, found "+l)]}}function jo(t){var e=("property"===t.expressionContext?ko:Lo)(Bt(t.value),t.valueSpec);if("error"===e.result)return e.value.map(function(e){return new Ft(""+t.key+e.key,t.value,e.message)});var o=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&-1!==o.possibleOutputs().indexOf(void 0))return[new Ft(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!be(o))return[new Ft(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!be(o))return[new Ft(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Se(o,["zoom","feature-state"]))return[new Ft(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!we(o))return[new Ft(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Uo(t){var e=t.key,o=t.value,n=t.valueSpec,r=[];return Array.isArray(n.values)?-1===n.values.indexOf(Vt(o))&&r.push(new Ft(e,o,"expected one of ["+n.values.join(", ")+"], "+JSON.stringify(o)+" found")):-1===Object.keys(n.values).indexOf(Vt(o))&&r.push(new Ft(e,o,"expected one of ["+Object.keys(n.values).join(", ")+"], "+JSON.stringify(o)+" found")),r}function Wo(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,o=t.slice(1);e<o.length;e+=1){var n=o[e];if(!Wo(n)&&"boolean"!=typeof n)return!1}return!0;default:return!0}}Go.deserialize=function(t){return new Go(t._parameters,t._specification)},Go.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var Ko={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function qo(t){if(null==t)return function(){return!0};Wo(t)||(t=Zo(t));var e=Lo(t,Ko);if("error"===e.result)throw new Error(e.value.map(function(t){return t.key+": "+t.message}).join(", "));return function(t,o){return e.value.evaluate(t,o)}}function Yo(t,e){return t<e?-1:t>e?1:0}function Zo(t){if(!t)return!0;var e,o=t[0];return t.length<=1?"any"!==o:"=="===o?Xo(t[1],t[2],"=="):"!="===o?$o(Xo(t[1],t[2],"==")):"<"===o||">"===o||"<="===o||">="===o?Xo(t[1],t[2],o):"any"===o?(e=t.slice(1),["any"].concat(e.map(Zo))):"all"===o?["all"].concat(t.slice(1).map(Zo)):"none"===o?["all"].concat(t.slice(1).map(Zo).map($o)):"in"===o?Jo(t[1],t.slice(2)):"!in"===o?$o(Jo(t[1],t.slice(2))):"has"===o?Qo(t[1]):"!has"!==o||$o(Qo(t[1]))}function Xo(t,e,o){switch(t){case"$type":return["filter-type-"+o,e];case"$id":return["filter-id-"+o,e];default:return["filter-"+o,t,e]}}function Jo(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(function(t){return typeof t!=typeof e[0]})?["filter-in-large",t,["literal",e.sort(Yo)]]:["filter-in-small",t,["literal",e]]}}function Qo(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function $o(t){return["!",t]}function tn(t){return Wo(Bt(t.value))?jo(kt({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var o=e.value,n=e.key;if("array"!==Eo(o))return[new Ft(n,o,"array expected, "+Eo(o)+" found")];var r,i=e.styleSpec,a=[];if(o.length<1)return[new Ft(n,o,"filter array must have at least 1 element")];switch(a=a.concat(Uo({key:n+"[0]",value:o[0],valueSpec:i.filter_operator,style:e.style,styleSpec:e.styleSpec})),Vt(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&"$type"===Vt(o[1])&&a.push(new Ft(n,o,'"$type" cannot be use with operator "'+o[0]+'"'));case"==":case"!=":3!==o.length&&a.push(new Ft(n,o,'filter array for operator "'+o[0]+'" must have 3 elements'));case"in":case"!in":o.length>=2&&"string"!==(r=Eo(o[1]))&&a.push(new Ft(n+"[1]",o[1],"string expected, "+r+" found"));for(var s=2;s<o.length;s++)r=Eo(o[s]),"$type"===Vt(o[1])?a=a.concat(Uo({key:n+"["+s+"]",value:o[s],valueSpec:i.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&a.push(new Ft(n+"["+s+"]",o[s],"string, number, or boolean expected, "+r+" found"));break;case"any":case"all":case"none":for(var l=1;l<o.length;l++)a=a.concat(t({key:n+"["+l+"]",value:o[l],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":r=Eo(o[1]),2!==o.length?a.push(new Ft(n,o,'filter array for "'+o[0]+'" operator must have 2 elements')):"string"!==r&&a.push(new Ft(n+"[1]",o[1],"string expected, "+r+" found"))}return a}(t)}function en(t,e){var o=t.key,n=t.style,r=t.styleSpec,i=t.value,a=t.objectKey,s=r[e+"_"+t.layerType];if(!s)return[];var l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return cn({key:o,value:i,valueSpec:r.transition,style:n,styleSpec:r});var u,c=t.valueSpec||s[a];if(!c)return[new Ft(o,i,'unknown property "'+a+'"')];if("string"===Eo(i)&&wo(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(i)))return[new Ft(o,i,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(u[1])+" }`.")];var p=[];return"symbol"===t.layerType&&("text-field"===a&&n&&!n.glyphs&&p.push(new Ft(o,i,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&xo(Bt(i))&&"identity"===Vt(i.type)&&p.push(new Ft(o,i,'"text-font" does not support identity functions'))),p.concat(cn({key:t.key,value:i,valueSpec:c,style:n,styleSpec:r,expressionContext:"property",propertyType:e,propertyKey:a}))}function on(t){return en(t,"paint")}function nn(t){return en(t,"layout")}function rn(t){var e=[],o=t.value,n=t.key,r=t.style,i=t.styleSpec;o.type||o.ref||e.push(new Ft(n,o,'either "type" or "ref" is required'));var a,s=Vt(o.type),l=Vt(o.ref);if(o.id)for(var u=Vt(o.id),c=0;c<t.arrayIndex;c++){var p=r.layers[c];Vt(p.id)===u&&e.push(new Ft(n,o.id,'duplicate layer id "'+o.id+'", previously used at line '+p.id.__line__))}if("ref"in o)["type","source","source-layer","filter","layout"].forEach(function(t){t in o&&e.push(new Ft(n,o[t],'"'+t+'" is prohibited for ref layers'))}),r.layers.forEach(function(t){Vt(t.id)===l&&(a=t)}),a?a.ref?e.push(new Ft(n,o.ref,"ref cannot reference another ref layer")):s=Vt(a.type):e.push(new Ft(n,o.ref,'ref layer "'+l+'" not found'));else if("background"!==s)if(o.source){var d=r.sources&&r.sources[o.source],h=d&&Vt(d.type);d?"vector"===h&&"raster"===s?e.push(new Ft(n,o.source,'layer "'+o.id+'" requires a raster source')):"raster"===h&&"raster"!==s?e.push(new Ft(n,o.source,'layer "'+o.id+'" requires a vector source')):"vector"!==h||o["source-layer"]?"raster-dem"===h&&"hillshade"!==s?e.push(new Ft(n,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!o.paint||!o.paint["line-gradient"]||"geojson"===h&&d.lineMetrics||e.push(new Ft(n,o,'layer "'+o.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new Ft(n,o,'layer "'+o.id+'" must specify a "source-layer"')):e.push(new Ft(n,o.source,'source "'+o.source+'" not found'))}else e.push(new Ft(n,o,'missing required property "source"'));return e=e.concat(Vo({key:n,value:o,valueSpec:i.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return cn({key:n+".type",value:o.type,valueSpec:i.layer.type,style:t.style,styleSpec:t.styleSpec,object:o,objectKey:"type"})},filter:tn,layout:function(t){return Vo({layer:o,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return nn(kt({layerType:s},t))}}})},paint:function(t){return Vo({layer:o,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return on(kt({layerType:s},t))}}})}}}))}function an(t){var e=t.value,o=t.key,n=t.styleSpec,r=t.style;if(!e.type)return[new Ft(o,e,'"type" is required')];var i,a=Vt(e.type);switch(a){case"vector":case"raster":case"raster-dem":if(i=Vo({key:o,value:e,valueSpec:n["source_"+a.replace("-","_")],style:t.style,styleSpec:n}),"url"in e)for(var s in e)["type","url","tileSize"].indexOf(s)<0&&i.push(new Ft(o+"."+s,e[s],'a source with a "url" property may not include a "'+s+'" property'));return i;case"geojson":if(i=Vo({key:o,value:e,valueSpec:n.source_geojson,style:r,styleSpec:n}),e.cluster)for(var l in e.clusterProperties){var u=e.clusterProperties[l],c=u[0],p=u[1],d="string"==typeof c?[c,["accumulated"],["get",l]]:c;i.push.apply(i,jo({key:o+"."+l+".map",value:p,expressionContext:"cluster-map"})),i.push.apply(i,jo({key:o+"."+l+".reduce",value:d,expressionContext:"cluster-reduce"}))}return i;case"video":return Vo({key:o,value:e,valueSpec:n.source_video,style:r,styleSpec:n});case"image":return Vo({key:o,value:e,valueSpec:n.source_image,style:r,styleSpec:n});case"canvas":return[new Ft(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Uo({key:o+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:r,styleSpec:n})}}function sn(t){var e=t.value,o=t.styleSpec,n=o.light,r=t.style,i=[],a=Eo(e);if(void 0===e)return i;if("object"!==a)return i.concat([new Ft("light",e,"object expected, "+a+" found")]);for(var s in e){var l=s.match(/^(.*)-transition$/);i=l&&n[l[1]]&&n[l[1]].transition?i.concat(cn({key:s,value:e[s],valueSpec:o.transition,style:r,styleSpec:o})):n[s]?i.concat(cn({key:s,value:e[s],valueSpec:n[s],style:r,styleSpec:o})):i.concat([new Ft(s,e[s],'unknown property "'+s+'"')])}return i}function ln(t){var e=t.value,o=t.key,n=Eo(e);return"string"!==n?[new Ft(o,e,"string expected, "+n+" found")]:[]}var un={"*":function(){return[]},array:Bo,boolean:function(t){var e=t.value,o=t.key,n=Eo(e);return"boolean"!==n?[new Ft(o,e,"boolean expected, "+n+" found")]:[]},number:zo,color:function(t){var e=t.key,o=t.value,n=Eo(o);return"string"!==n?[new Ft(e,o,"color expected, "+n+" found")]:null===oe(o)?[new Ft(e,o,'color expected, "'+o+'" found')]:[]},constants:Nt,enum:Uo,filter:tn,function:Ho,layer:rn,object:Vo,source:an,light:sn,string:ln,formatted:function(t){return 0===ln(t).length?[]:jo(t)}};function cn(t){var e=t.value,o=t.valueSpec,n=t.styleSpec;return o.expression&&xo(Vt(e))?Ho(t):o.expression&&Io(Bt(e))?jo(t):o.type&&un[o.type]?un[o.type](t):Vo(kt({},t,{valueSpec:o.type?n[o.type]:o}))}function pn(t){var e=t.value,o=t.key,n=ln(t);return n.length?n:(-1===e.indexOf("{fontstack}")&&n.push(new Ft(o,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&n.push(new Ft(o,e,'"glyphs" url must include a "{range}" token')),n)}function dn(t,e){e=e||Lt;var o=[];return o=o.concat(cn({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:pn,"*":function(){return[]}}})),t.constants&&(o=o.concat(Nt({key:"constants",value:t.constants,style:t,styleSpec:e}))),hn(o)}function hn(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function fn(t){return function(){for(var e=[],o=arguments.length;o--;)e[o]=arguments[o];return hn(t.apply(this,e))}}dn.source=fn(an),dn.light=fn(sn),dn.layer=fn(rn),dn.filter=fn(tn),dn.paintProperty=fn(on),dn.layoutProperty=fn(nn);var gn=dn,yn=gn.light,vn=gn.paintProperty,mn=gn.layoutProperty;function Cn(t,e){var o=!1;if(e&&e.length)for(var n=0,r=e;n<r.length;n+=1){var i=r[n];t.fire(new Mt(new Error(i.message))),o=!0}return o}var _n=bn,wn=3;function bn(t,e,o){var n=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var r=new Int32Array(this.arrayBuffer);t=r[0],e=r[1],o=r[2],this.d=e+2*o;for(var i=0;i<this.d*this.d;i++){var a=r[wn+i],s=r[wn+i+1];n.push(a===s?null:r.subarray(a,s))}var l=r[wn+n.length],u=r[wn+n.length+1];this.keys=r.subarray(l,u),this.bboxes=r.subarray(u),this.insert=this._insertReadonly}else{this.d=e+2*o;for(var c=0;c<this.d*this.d;c++)n.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=o,this.scale=e/t,this.uid=0;var p=o/e*t;this.min=-p,this.max=t+p}bn.prototype.insert=function(t,e,o,n,r){this._forEachCell(e,o,n,r,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(o),this.bboxes.push(n),this.bboxes.push(r)},bn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},bn.prototype._insertCell=function(t,e,o,n,r,i){this.cells[r].push(i)},bn.prototype.query=function(t,e,o,n,r){var i=this.min,a=this.max;if(t<=i&&e<=i&&a<=o&&a<=n&&!r)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,o,n,this._queryCell,s,{},r),s},bn.prototype._queryCell=function(t,e,o,n,r,i,a,s){var l=this.cells[r];if(null!==l)for(var u=this.keys,c=this.bboxes,p=0;p<l.length;p++){var d=l[p];if(void 0===a[d]){var h=4*d;(s?s(c[h+0],c[h+1],c[h+2],c[h+3]):t<=c[h+2]&&e<=c[h+3]&&o>=c[h+0]&&n>=c[h+1])?(a[d]=!0,i.push(u[d])):a[d]=!1}}},bn.prototype._forEachCell=function(t,e,o,n,r,i,a,s){for(var l=this._convertToCellCoord(t),u=this._convertToCellCoord(e),c=this._convertToCellCoord(o),p=this._convertToCellCoord(n),d=l;d<=c;d++)for(var h=u;h<=p;h++){var f=this.d*h+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(h),this._convertFromCellCoord(d+1),this._convertFromCellCoord(h+1)))&&r.call(this,t,e,o,n,f,i,a,s))return}},bn.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},bn.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},bn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=wn+this.cells.length+1+1,o=0,n=0;n<this.cells.length;n++)o+=this.cells[n].length;var r=new Int32Array(e+o+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;for(var i=e,a=0;a<t.length;a++){var s=t[a];r[wn+a]=i,r.set(s,i),i+=s.length}return r[wn+t.length]=i,r.set(this.keys,i),i+=this.keys.length,r[wn+t.length+1]=i,r.set(this.bboxes,i),i+=this.bboxes.length,r.buffer};var Sn=self.ImageData,En={};function xn(t,e,o){void 0===o&&(o={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),En[t]={klass:e,omit:o.omit||[],shallow:o.shallow||[]}}for(var Tn in xn("Object",Object),_n.serialize=function(t,e){var o=t.toArrayBuffer();return e&&e.push(o),{buffer:o}},_n.deserialize=function(t){return new _n(t.buffer)},xn("Grid",_n),xn("Color",ne),xn("Error",Error),xn("StylePropertyFunction",Go),xn("StyleExpression",Mo,{omit:["_evaluator"]}),xn("ZoomDependentExpression",No),xn("ZoomConstantExpression",Fo),xn("CompoundExpression",Ce,{omit:["_evaluate"]}),fo)fo[Tn]._classRegistryKey||xn("Expression_"+Tn,fo[Tn]);function On(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(t instanceof ArrayBuffer)return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var o=t;return e&&e.push(o.buffer),o}if(t instanceof Sn)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var n=[],r=0,i=t;r<i.length;r+=1){var a=i[r];n.push(On(a,e))}return n}if("object"==typeof t){var s=t.constructor,l=s._classRegistryKey;if(!l)throw new Error("can't serialize object of unregistered class");var u=s.serialize?s.serialize(t,e):{};if(!s.serialize){for(var c in t)if(t.hasOwnProperty(c)&&!(En[l].omit.indexOf(c)>=0)){var p=t[c];u[c]=En[l].shallow.indexOf(c)>=0?p:On(p,e)}t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==l&&(u.$name=l),u}throw new Error("can't serialize object of type "+typeof t)}function Rn(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||t instanceof ArrayBuffer||ArrayBuffer.isView(t)||t instanceof Sn)return t;if(Array.isArray(t))return t.map(Rn);if("object"==typeof t){var e=t.$name||"Object",o=En[e].klass;if(!o)throw new Error("can't deserialize unregistered class "+e);if(o.deserialize)return o.deserialize(t);for(var n=Object.create(o.prototype),r=0,i=Object.keys(t);r<i.length;r+=1){var a=i[r];if("$name"!==a){var s=t[a];n[a]=En[e].shallow.indexOf(a)>=0?s:Rn(s)}}return n}throw new Error("can't deserialize object of type "+typeof t)}var Pn=function(){this.first=!0};Pn.prototype.update=function(t,e){var o=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=o,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=o,!0):(this.lastFloorZoom>o?(this.lastIntegerZoom=o+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<o&&(this.lastIntegerZoom=o,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=o,!0))};var An={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function Dn(t){for(var e=0,o=t;e<o.length;e+=1)if(Ln(o[e].charCodeAt(0)))return!0;return!1}function Mn(t){for(var e=0,o=t;e<o.length;e+=1)if(!In(o[e].charCodeAt(0)))return!1;return!0}function In(t){return!An.Arabic(t)&&!An["Arabic Supplement"](t)&&!An["Arabic Extended-A"](t)&&!An["Arabic Presentation Forms-A"](t)&&!An["Arabic Presentation Forms-B"](t)}function Ln(t){return 746===t||747===t||!(t<4352)&&(!!An["Bopomofo Extended"](t)||!!An.Bopomofo(t)||!(!An["CJK Compatibility Forms"](t)||t>=65097&&t<=65103)||!!An["CJK Compatibility Ideographs"](t)||!!An["CJK Compatibility"](t)||!!An["CJK Radicals Supplement"](t)||!!An["CJK Strokes"](t)||!(!An["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||!!An["CJK Unified Ideographs Extension A"](t)||!!An["CJK Unified Ideographs"](t)||!!An["Enclosed CJK Letters and Months"](t)||!!An["Hangul Compatibility Jamo"](t)||!!An["Hangul Jamo Extended-A"](t)||!!An["Hangul Jamo Extended-B"](t)||!!An["Hangul Jamo"](t)||!!An["Hangul Syllables"](t)||!!An.Hiragana(t)||!!An["Ideographic Description Characters"](t)||!!An.Kanbun(t)||!!An["Kangxi Radicals"](t)||!!An["Katakana Phonetic Extensions"](t)||!(!An.Katakana(t)||12540===t)||!(!An["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!An["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||!!An["Unified Canadian Aboriginal Syllabics"](t)||!!An["Unified Canadian Aboriginal Syllabics Extended"](t)||!!An["Vertical Forms"](t)||!!An["Yijing Hexagram Symbols"](t)||!!An["Yi Syllables"](t)||!!An["Yi Radicals"](t))}function Fn(t){return!(Ln(t)||function(t){return!!(An["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||An["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||An["Letterlike Symbols"](t)||An["Number Forms"](t)||An["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||An["Control Pictures"](t)&&9251!==t||An["Optical Character Recognition"](t)||An["Enclosed Alphanumerics"](t)||An["Geometric Shapes"](t)||An["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||An["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||An["CJK Symbols and Punctuation"](t)||An.Katakana(t)||An["Private Use Area"](t)||An["CJK Compatibility Forms"](t)||An["Small Form Variants"](t)||An["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function Nn(t,e){return!(!e&&(t>=1424&&t<=2303||An["Arabic Presentation Forms-A"](t)||An["Arabic Presentation Forms-B"](t)))&&!(t>=2304&&t<=3583||t>=3840&&t<=4255||An.Khmer(t))}var kn,Gn=!1,Vn=null,Bn=!1,zn=new It,Hn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Bn||null!=Hn.applyArabicShaping}},jn=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Pn,this.transition={})};jn.prototype.isSupportedScript=function(t){return function(t,e){for(var o=0,n=t;o<n.length;o+=1)if(!Nn(n[o].charCodeAt(0),e))return!1;return!0}(t,Hn.isLoaded())},jn.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},jn.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),o=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*o}:{fromScale:.5,toScale:1,t:1-(1-o)*e}};var Un=function(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(xo(t))return new Go(t,e);if(Io(t)){var o=ko(t,e);if("error"===o.result)throw new Error(o.value.map(function(t){return t.key+": "+t.message}).join(", "));return o.value}var n=t;return"string"==typeof t&&"color"===e.type&&(n=ne.parse(t)),{kind:"constant",evaluate:function(){return n}}}(void 0===e?t.specification.default:e,t.specification)};Un.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Un.prototype.possiblyEvaluate=function(t){return this.property.possiblyEvaluate(this,t)};var Wn=function(t){this.property=t,this.value=new Un(t,void 0)};Wn.prototype.transitioned=function(t,e){return new qn(this.property,this.value,e,p({},t.transition,this.transition),t.now)},Wn.prototype.untransitioned=function(){return new qn(this.property,this.value,null,{},0)};var Kn=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};Kn.prototype.getValue=function(t){return _(this._values[t].value.value)},Kn.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Wn(this._values[t].property)),this._values[t].value=new Un(this._values[t].property,null===e?void 0:_(e))},Kn.prototype.getTransition=function(t){return _(this._values[t].transition)},Kn.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new Wn(this._values[t].property)),this._values[t].transition=_(e)||void 0},Kn.prototype.serialize=function(){for(var t={},e=0,o=Object.keys(this._values);e<o.length;e+=1){var n=o[e],r=this.getValue(n);void 0!==r&&(t[n]=r);var i=this.getTransition(n);void 0!==i&&(t[n+"-transition"]=i)}return t},Kn.prototype.transitioned=function(t,e){for(var o=new Yn(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var i=r[n];o._values[i]=this._values[i].transitioned(t,e._values[i])}return o},Kn.prototype.untransitioned=function(){for(var t=new Yn(this._properties),e=0,o=Object.keys(this._values);e<o.length;e+=1){var n=o[e];t._values[n]=this._values[n].untransitioned()}return t};var qn=function(t,e,o,n,r){this.property=t,this.value=e,this.begin=r+n.delay||0,this.end=this.begin+n.duration||0,t.specification.transition&&(n.delay||n.duration)&&(this.prior=o)};qn.prototype.possiblyEvaluate=function(t){var e=t.now||0,o=this.value.possiblyEvaluate(t),n=this.prior;if(n){if(e>this.end)return this.prior=null,o;if(this.value.isDataDriven())return this.prior=null,o;if(e<this.begin)return n.possiblyEvaluate(t);var r=(e-this.begin)/(this.end-this.begin);return this.property.interpolate(n.possiblyEvaluate(t),o,function(t){if(r<=0)return 0;if(r>=1)return 1;var e=r*r,o=e*r;return 4*(r<.5?o:3*(r-e)+o-.75)}())}return o};var Yn=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};Yn.prototype.possiblyEvaluate=function(t){for(var e=new Jn(this._properties),o=0,n=Object.keys(this._values);o<n.length;o+=1){var r=n[o];e._values[r]=this._values[r].possiblyEvaluate(t)}return e},Yn.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1){var o=e[t];if(this._values[o].prior)return!0}return!1};var Zn=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};Zn.prototype.getValue=function(t){return _(this._values[t].value)},Zn.prototype.setValue=function(t,e){this._values[t]=new Un(this._values[t].property,null===e?void 0:_(e))},Zn.prototype.serialize=function(){for(var t={},e=0,o=Object.keys(this._values);e<o.length;e+=1){var n=o[e],r=this.getValue(n);void 0!==r&&(t[n]=r)}return t},Zn.prototype.possiblyEvaluate=function(t){for(var e=new Jn(this._properties),o=0,n=Object.keys(this._values);o<n.length;o+=1){var r=n[o];e._values[r]=this._values[r].possiblyEvaluate(t)}return e};var Xn=function(t,e,o){this.property=t,this.value=e,this.parameters=o};Xn.prototype.isConstant=function(){return"constant"===this.value.kind},Xn.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},Xn.prototype.evaluate=function(t,e){return this.property.evaluate(this.value,this.parameters,t,e)};var Jn=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};Jn.prototype.get=function(t){return this._values[t]};var Qn=function(t){this.specification=t};Qn.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},Qn.prototype.interpolate=function(t,e,o){var n=Pe[this.specification.type];return n?n(t,e,o):t};var $n=function(t){this.specification=t};$n.prototype.possiblyEvaluate=function(t,e){return"constant"===t.expression.kind||"camera"===t.expression.kind?new Xn(this,{kind:"constant",value:t.expression.evaluate(e)},e):new Xn(this,t.expression,e)},$n.prototype.interpolate=function(t,e,o){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new Xn(this,{kind:"constant",value:void 0},t.parameters);var n=Pe[this.specification.type];return n?new Xn(this,{kind:"constant",value:n(t.value.value,e.value.value,o)},t.parameters):t},$n.prototype.evaluate=function(t,e,o,n){return"constant"===t.kind?t.value:t.evaluate(e,o,n)};var tr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(t,e){if(void 0===t.value)return new Xn(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var o=t.expression.evaluate(e),n=this._calculate(o,o,o,e);return new Xn(this,{kind:"constant",value:n},e)}if("camera"===t.expression.kind){var r=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new Xn(this,{kind:"constant",value:r},e)}return new Xn(this,t.expression,e)},e.prototype.evaluate=function(t,e,o,n){if("source"===t.kind){var r=t.evaluate(e,o,n);return this._calculate(r,r,r,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},o,n),t.evaluate({zoom:Math.floor(e.zoom)},o,n),t.evaluate({zoom:Math.floor(e.zoom)+1},o,n),e):t.value},e.prototype._calculate=function(t,e,o,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:o,to:e}},e.prototype.interpolate=function(t){return t},e}($n),er=function(t){this.specification=t};er.prototype.possiblyEvaluate=function(t,e){if(void 0!==t.value){if("constant"===t.expression.kind){var o=t.expression.evaluate(e);return this._calculate(o,o,o,e)}return this._calculate(t.expression.evaluate(new jn(Math.floor(e.zoom-1),e)),t.expression.evaluate(new jn(Math.floor(e.zoom),e)),t.expression.evaluate(new jn(Math.floor(e.zoom+1),e)),e)}},er.prototype._calculate=function(t,e,o,n){return n.zoom>n.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:o,to:e}},er.prototype.interpolate=function(t){return t};var or=function(t){this.specification=t};or.prototype.possiblyEvaluate=function(t,e){return!!t.expression.evaluate(e)},or.prototype.interpolate=function(){return!1};var nr=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},t){var o=t[e],n=this.defaultPropertyValues[e]=new Un(o,void 0),r=this.defaultTransitionablePropertyValues[e]=new Wn(o);this.defaultTransitioningPropertyValues[e]=r.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=n.possiblyEvaluate({})}};xn("DataDrivenProperty",$n),xn("DataConstantProperty",Qn),xn("CrossFadedDataDrivenProperty",tr),xn("CrossFadedProperty",er),xn("ColorRampProperty",or);var rr=function(t){function e(e,o){if(t.call(this),this.id=e.id,this.type=e.type,this._featureFilter=function(){return!0},"custom"!==e.type&&(e=e,this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),o.layout&&(this._unevaluatedLayout=new Zn(o.layout)),o.paint)){for(var n in this._transitionablePaint=new Kn(o.paint),e.paint)this.setPaintProperty(n,e.paint[n],{validate:!1});for(var r in e.layout)this.setLayoutProperty(r,e.layout[r],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,o){if(void 0===o&&(o={}),null!=e){var n="layers."+this.id+".layout."+t;if(this._validate(mn,n,t,e,o))return}"visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e},e.prototype.getPaintProperty=function(t){return v(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,o){if(void 0===o&&(o={}),null!=e){var n="layers."+this.id+".paint."+t;if(this._validate(vn,n,t,e,o))return!1}if(v(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var r=this._transitionablePaint._values[t],i="cross-faded-data-driven"===r.property.specification["property-type"],a=r.value.isDataDriven();return this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t),this._transitionablePaint._values[t].value.isDataDriven()||a||i},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t)),this.paint=this._transitioningPaint.possiblyEvaluate(t)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),C(t,function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)})},e.prototype._validate=function(t,e,o,n,r){return void 0===r&&(r={}),(!r||!1!==r.validate)&&Cn(this,t.call(gn,{key:e,layerType:this.type,objectKey:o,value:n,styleSpec:Lt,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof Xn&&wo(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(It),ir={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},ar=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},sr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function lr(t,e){void 0===e&&(e=1);var o=0,n=0;return{members:t.map(function(t){var r,i=(r=t.type,ir[r].BYTES_PER_ELEMENT),a=o=ur(o,Math.max(e,i)),s=t.components||1;return n=Math.max(n,i),o+=i*s,{name:t.name,type:t.type,components:s,offset:a}}),size:ur(o,Math.max(n,e)),alignment:e}}function ur(t,e){return Math.ceil(t/e)*e}sr.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},sr.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},sr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},sr.prototype.clear=function(){this.length=0},sr.prototype.resize=function(t){this.reserve(t),this.length=t},sr.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},sr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var cr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var o=this.length;return this.resize(o+1),this.emplace(o,t,e)},e.prototype.emplace=function(t,e,o){var n=2*t;return this.int16[n+0]=e,this.int16[n+1]=o,t},e}(sr);cr.prototype.bytesPerElement=4,xn("StructArrayLayout2i4",cr);var pr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,o,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,o,n)},e.prototype.emplace=function(t,e,o,n,r){var i=4*t;return this.int16[i+0]=e,this.int16[i+1]=o,this.int16[i+2]=n,this.int16[i+3]=r,t},e}(sr);pr.prototype.bytesPerElement=8,xn("StructArrayLayout4i8",pr);var dr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,o,n,r,i){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,o,n,r,i)},e.prototype.emplace=function(t,e,o,n,r,i,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=o,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=i,this.int16[s+5]=a,t},e}(sr);dr.prototype.bytesPerElement=12,xn("StructArrayLayout2i4i12",dr);var hr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,o,n,r,i){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,o,n,r,i)},e.prototype.emplace=function(t,e,o,n,r,i,a){var s=4*t,l=8*t;return this.int16[s+0]=e,this.int16[s+1]=o,this.uint8[l+4]=n,this.uint8[l+5]=r,this.uint8[l+6]=i,this.uint8[l+7]=a,t},e}(sr);hr.prototype.bytesPerElement=8,xn("StructArrayLayout2i4ub8",hr);var fr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,o,n,r,i,a,s){var l=this.length;return this.resize(l+1),this.emplace(l,t,e,o,n,r,i,a,s)},e.prototype.emplace=function(t,e,o,n,r,i,a,s,l){var u=8*t;return this.uint16[u+0]=e,this.uint16[u+1]=o,this.uint16[u+2]=n,this.uint16[u+3]=r,this.uint16[u+4]=i,this.uint16[u+5]=a,this.uint16[u+6]=s,this.uint16[u+7]=l,t},e}(sr);fr.prototype.bytesPerElement=16,xn("StructArrayLayout8ui16",fr);var gr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,o,n,r,i,a,s){var l=this.length;return this.resize(l+1),this.emplace(l,t,e,o,n,r,i,a,s)},e.prototype.emplace=function(t,e,o,n,r,i,a,s,l){var u=8*t;return this.int16[u+0]=e,this.int16[u+1]=o,this.int16[u+2]=n,this.int16[u+3]=r,this.uint16[u+4]=i,this.uint16[u+5]=a,this.uint16[u+6]=s,this.uint16[u+7]=l,t},e}(sr);gr.prototype.bytesPerElement=16,xn("StructArrayLayout4i4ui16",gr);var yr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,o){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,o)},e.prototype.emplace=function(t,e,o,n){var r=3*t;return this.float32[r+0]=e,this.float32[r+1]=o,this.float32[r+2]=n,t},e}(sr);yr.prototype.bytesPerElement=12,xn("StructArrayLayout3f12",yr);var vr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){var o=1*t;return this.uint32[o+0]=e,t},e}(sr);vr.prototype.bytesPerElement=4,xn("StructArrayLayout1ul4",vr);var mr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,o,n,r,i,a,s,l,u,c){var p=this.length;return this.resize(p+1),this.emplace(p,t,e,o,n,r,i,a,s,l,u,c)},e.prototype.emplace=function(t,e,o,n,r,i,a,s,l,u,c,p){var d=12*t,h=6*t;return this.int16[d+0]=e,this.int16[d+1]=o,this.int16[d+2]=n,this.int16[d+3]=r,this.int16[d+4]=i,this.int16[d+5]=a,this.uint32[h+3]=s,this.uint16[d+8]=l,this.uint16[d+9]=u,this.int16[d+10]=c,this.int16[d+11]=p,t},e}(sr);mr.prototype.bytesPerElement=24,xn("StructArrayLayout6i1ul2ui2i24",mr);var Cr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,o,n,r,i){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,o,n,r,i)},e.prototype.emplace=function(t,e,o,n,r,i,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=o,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=i,this.int16[s+5]=a,t},e}(sr);Cr.prototype.bytesPerElement=12,xn("StructArrayLayout2i2i2i12",Cr);var _r=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,o,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,o,n)},e.prototype.emplace=function(t,e,o,n,r){var i=12*t,a=3*t;return this.uint8[i+0]=e,this.uint8[i+1]=o,this.float32[a+1]=n,this.float32[a+2]=r,t},e}(sr);_r.prototype.bytesPerElement=12,xn("StructArrayLayout2ub2f12",_r);var wr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,o,n,r,i,a,s,l,u,c,p,d,h,f){var g=this.length;return this.resize(g+1),this.emplace(g,t,e,o,n,r,i,a,s,l,u,c,p,d,h,f)},e.prototype.emplace=function(t,e,o,n,r,i,a,s,l,u,c,p,d,h,f,g){var y=22*t,v=11*t,m=44*t;return this.int16[y+0]=e,this.int16[y+1]=o,this.uint16[y+2]=n,this.uint16[y+3]=r,this.uint32[v+2]=i,this.uint32[v+3]=a,this.uint32[v+4]=s,this.uint16[y+10]=l,this.uint16[y+11]=u,this.uint16[y+12]=c,this.float32[v+7]=p,this.float32[v+8]=d,this.uint8[m+36]=h,this.uint8[m+37]=f,this.uint32[v+10]=g,t},e}(sr);wr.prototype.bytesPerElement=44,xn("StructArrayLayout2i2ui3ul3ui2f2ub1ul44",wr);var br=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,o,n,r,i,a,s,l,u,c,p,d,h,f,g,y,v){var m=this.length;return this.resize(m+1),this.emplace(m,t,e,o,n,r,i,a,s,l,u,c,p,d,h,f,g,y,v)},e.prototype.emplace=function(t,e,o,n,r,i,a,s,l,u,c,p,d,h,f,g,y,v,m){var C=22*t,_=11*t;return this.int16[C+0]=e,this.int16[C+1]=o,this.int16[C+2]=n,this.int16[C+3]=r,this.int16[C+4]=i,this.int16[C+5]=a,this.uint16[C+6]=s,this.uint16[C+7]=l,this.uint16[C+8]=u,this.uint16[C+9]=c,this.uint16[C+10]=p,this.uint16[C+11]=d,this.uint16[C+12]=h,this.uint16[C+13]=f,this.uint16[C+14]=g,this.uint32[_+8]=y,this.float32[_+9]=v,this.float32[_+10]=m,t},e}(sr);br.prototype.bytesPerElement=44,xn("StructArrayLayout6i9ui1ul2f44",br);var Sr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){var o=1*t;return this.float32[o+0]=e,t},e}(sr);Sr.prototype.bytesPerElement=4,xn("StructArrayLayout1f4",Sr);var Er=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,o){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,o)},e.prototype.emplace=function(t,e,o,n){var r=3*t;return this.int16[r+0]=e,this.int16[r+1]=o,this.int16[r+2]=n,t},e}(sr);Er.prototype.bytesPerElement=6,xn("StructArrayLayout3i6",Er);var xr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,o){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,o)},e.prototype.emplace=function(t,e,o,n){var r=2*t,i=4*t;return this.uint32[r+0]=e,this.uint16[i+2]=o,this.uint16[i+3]=n,t},e}(sr);xr.prototype.bytesPerElement=8,xn("StructArrayLayout1ul2ui8",xr);var Tr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,o){var n=this.length;return this.resize(n+1),this.emplace(n,t,e,o)},e.prototype.emplace=function(t,e,o,n){var r=3*t;return this.uint16[r+0]=e,this.uint16[r+1]=o,this.uint16[r+2]=n,t},e}(sr);Tr.prototype.bytesPerElement=6,xn("StructArrayLayout3ui6",Tr);var Or=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var o=this.length;return this.resize(o+1),this.emplace(o,t,e)},e.prototype.emplace=function(t,e,o){var n=2*t;return this.uint16[n+0]=e,this.uint16[n+1]=o,t},e}(sr);Or.prototype.bytesPerElement=4,xn("StructArrayLayout2ui4",Or);var Rr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){var o=1*t;return this.uint16[o+0]=e,t},e}(sr);Rr.prototype.bytesPerElement=2,xn("StructArrayLayout1ui2",Rr);var Pr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var o=this.length;return this.resize(o+1),this.emplace(o,t,e)},e.prototype.emplace=function(t,e,o){var n=2*t;return this.float32[n+0]=e,this.float32[n+1]=o,t},e}(sr);Pr.prototype.bytesPerElement=8,xn("StructArrayLayout2f8",Pr);var Ar=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,o,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,o,n)},e.prototype.emplace=function(t,e,o,n,r){var i=4*t;return this.float32[i+0]=e,this.float32[i+1]=o,this.float32[i+2]=n,this.float32[i+3]=r,t},e}(sr);Ar.prototype.bytesPerElement=16,xn("StructArrayLayout4f16",Ar);var Dr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var o={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return o.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},o.anchorPointX.set=function(t){this._structArray.int16[this._pos2+0]=t},o.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},o.anchorPointY.set=function(t){this._structArray.int16[this._pos2+1]=t},o.x1.get=function(){return this._structArray.int16[this._pos2+2]},o.x1.set=function(t){this._structArray.int16[this._pos2+2]=t},o.y1.get=function(){return this._structArray.int16[this._pos2+3]},o.y1.set=function(t){this._structArray.int16[this._pos2+3]=t},o.x2.get=function(){return this._structArray.int16[this._pos2+4]},o.x2.set=function(t){this._structArray.int16[this._pos2+4]=t},o.y2.get=function(){return this._structArray.int16[this._pos2+5]},o.y2.set=function(t){this._structArray.int16[this._pos2+5]=t},o.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},o.featureIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},o.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},o.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},o.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},o.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},o.radius.get=function(){return this._structArray.int16[this._pos2+10]},o.radius.set=function(t){this._structArray.int16[this._pos2+10]=t},o.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},o.signedDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+11]=t},o.anchorPoint.get=function(){return new r(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,o),e}(ar);Dr.prototype.size=24;var Mr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new Dr(this,t)},e}(mr);xn("CollisionBoxArray",Mr);var Ir=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var o={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0}};return o.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},o.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},o.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},o.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},o.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},o.glyphStartIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},o.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},o.numGlyphs.set=function(t){this._structArray.uint16[this._pos2+3]=t},o.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},o.vertexStartIndex.set=function(t){this._structArray.uint32[this._pos4+2]=t},o.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},o.lineStartIndex.set=function(t){this._structArray.uint32[this._pos4+3]=t},o.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},o.lineLength.set=function(t){this._structArray.uint32[this._pos4+4]=t},o.segment.get=function(){return this._structArray.uint16[this._pos2+10]},o.segment.set=function(t){this._structArray.uint16[this._pos2+10]=t},o.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},o.lowerSize.set=function(t){this._structArray.uint16[this._pos2+11]=t},o.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},o.upperSize.set=function(t){this._structArray.uint16[this._pos2+12]=t},o.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},o.lineOffsetX.set=function(t){this._structArray.float32[this._pos4+7]=t},o.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},o.lineOffsetY.set=function(t){this._structArray.float32[this._pos4+8]=t},o.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},o.writingMode.set=function(t){this._structArray.uint8[this._pos1+36]=t},o.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},o.hidden.set=function(t){this._structArray.uint8[this._pos1+37]=t},o.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},o.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},Object.defineProperties(e.prototype,o),e}(ar);Ir.prototype.size=44;var Lr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new Ir(this,t)},e}(wr);xn("PlacedSymbolArray",Lr);var Fr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var o={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},radialTextOffset:{configurable:!0}};return o.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},o.anchorX.set=function(t){this._structArray.int16[this._pos2+0]=t},o.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},o.anchorY.set=function(t){this._structArray.int16[this._pos2+1]=t},o.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},o.rightJustifiedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+2]=t},o.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},o.centerJustifiedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+3]=t},o.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},o.leftJustifiedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+4]=t},o.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},o.verticalPlacedTextSymbolIndex.set=function(t){this._structArray.int16[this._pos2+5]=t},o.key.get=function(){return this._structArray.uint16[this._pos2+6]},o.key.set=function(t){this._structArray.uint16[this._pos2+6]=t},o.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+7]},o.textBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+7]=t},o.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+8]},o.textBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+8]=t},o.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},o.iconBoxStartIndex.set=function(t){this._structArray.uint16[this._pos2+9]=t},o.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},o.iconBoxEndIndex.set=function(t){this._structArray.uint16[this._pos2+10]=t},o.featureIndex.get=function(){return this._structArray.uint16[this._pos2+11]},o.featureIndex.set=function(t){this._structArray.uint16[this._pos2+11]=t},o.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+12]},o.numHorizontalGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+12]=t},o.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+13]},o.numVerticalGlyphVertices.set=function(t){this._structArray.uint16[this._pos2+13]=t},o.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+14]},o.numIconVertices.set=function(t){this._structArray.uint16[this._pos2+14]=t},o.crossTileID.get=function(){return this._structArray.uint32[this._pos4+8]},o.crossTileID.set=function(t){this._structArray.uint32[this._pos4+8]=t},o.textBoxScale.get=function(){return this._structArray.float32[this._pos4+9]},o.textBoxScale.set=function(t){this._structArray.float32[this._pos4+9]=t},o.radialTextOffset.get=function(){return this._structArray.float32[this._pos4+10]},o.radialTextOffset.set=function(t){this._structArray.float32[this._pos4+10]=t},Object.defineProperties(e.prototype,o),e}(ar);Fr.prototype.size=44;var Nr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new Fr(this,t)},e}(br);xn("SymbolInstanceArray",Nr);var kr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var o={offsetX:{configurable:!0}};return o.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},o.offsetX.set=function(t){this._structArray.float32[this._pos4+0]=t},Object.defineProperties(e.prototype,o),e}(ar);kr.prototype.size=4;var Gr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e.prototype.get=function(t){return new kr(this,t)},e}(Sr);xn("GlyphOffsetArray",Gr);var Vr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var o={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return o.x.get=function(){return this._structArray.int16[this._pos2+0]},o.x.set=function(t){this._structArray.int16[this._pos2+0]=t},o.y.get=function(){return this._structArray.int16[this._pos2+1]},o.y.set=function(t){this._structArray.int16[this._pos2+1]=t},o.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},o.tileUnitDistanceFromAnchor.set=function(t){this._structArray.int16[this._pos2+2]=t},Object.defineProperties(e.prototype,o),e}(ar);Vr.prototype.size=6;var Br=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e.prototype.get=function(t){return new Vr(this,t)},e}(Er);xn("SymbolLineVertexArray",Br);var zr=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var o={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return o.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},o.featureIndex.set=function(t){this._structArray.uint32[this._pos4+0]=t},o.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},o.sourceLayerIndex.set=function(t){this._structArray.uint16[this._pos2+2]=t},o.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},o.bucketIndex.set=function(t){this._structArray.uint16[this._pos2+3]=t},Object.defineProperties(e.prototype,o),e}(ar);zr.prototype.size=8;var Hr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return new zr(this,t)},e}(xr);xn("FeatureIndexArray",Hr);var jr=lr([{name:"a_pos",components:2,type:"Int16"}],4).members,Ur=function(t){void 0===t&&(t=[]),this.segments=t};function Wr(t,e){return 256*(t=u(Math.floor(t),0,255))+u(Math.floor(e),0,255)}Ur.prototype.prepareSegment=function(t,e,o,n){var r=this.segments[this.segments.length-1];return t>Ur.MAX_VERTEX_ARRAY_LENGTH&&b("Max vertices per segment is "+Ur.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!r||r.vertexLength+t>Ur.MAX_VERTEX_ARRAY_LENGTH||r.sortKey!==n)&&(r={vertexOffset:e.length,primitiveOffset:o.length,vertexLength:0,primitiveLength:0},void 0!==n&&(r.sortKey=n),this.segments.push(r)),r},Ur.prototype.get=function(){return this.segments},Ur.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var o=e[t];for(var n in o.vaos)o.vaos[n].destroy()}},Ur.simpleSegment=function(t,e,o,n){return new Ur([{vertexOffset:t,primitiveOffset:e,vertexLength:o,primitiveLength:n,vaos:{},sortKey:0}])},Ur.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,xn("SegmentVector",Ur);var Kr=function(){this.ids=[],this.positions=[],this.indexed=!1};function qr(t,e,o){var n=t[e];t[e]=t[o],t[o]=n}Kr.prototype.add=function(t,e,o,n){this.ids.push(t),this.positions.push(e,o,n)},Kr.prototype.getPositions=function(t){for(var e=0,o=this.ids.length-1;e<o;){var n=e+o>>1;this.ids[n]>=t?o=n:e=n+1}for(var r=[];this.ids[e]===t;){var i=this.positions[3*e],a=this.positions[3*e+1],s=this.positions[3*e+2];r.push({index:i,start:a,end:s}),e++}return r},Kr.serialize=function(t,e){var o=new Float64Array(t.ids),n=new Uint32Array(t.positions);return function t(e,o,n,r){if(!(n>=r)){for(var i=e[n+r>>1],a=n-1,s=r+1;;){do{a++}while(e[a]<i);do{s--}while(e[s]>i);if(a>=s)break;qr(e,a,s),qr(o,3*a,3*s),qr(o,3*a+1,3*s+1),qr(o,3*a+2,3*s+2)}t(e,o,n,s),t(e,o,s+1,r)}}(o,n,0,o.length-1),e.push(o.buffer,n.buffer),{ids:o,positions:n}},Kr.deserialize=function(t){var e=new Kr;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e},xn("FeaturePositionMap",Kr);var Yr=function(t,e){this.gl=t.gl,this.location=e},Zr=function(t){function e(e,o){t.call(this,e,o),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(Yr),Xr=function(t){function e(e,o){t.call(this,e,o),this.current=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(Yr),Jr=function(t){function e(e,o){t.call(this,e,o),this.current=[0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(Yr),Qr=function(t){function e(e,o){t.call(this,e,o),this.current=[0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(Yr),$r=function(t){function e(e,o){t.call(this,e,o),this.current=[0,0,0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(Yr),ti=function(t){function e(e,o){t.call(this,e,o),this.current=ne.transparent}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(Yr),ei=new Float32Array(16),oi=function(t){function e(e,o){t.call(this,e,o),this.current=ei}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(Yr);function ni(t){return[Wr(255*t.r,255*t.g),Wr(255*t.b,255*t.a)]}var ri=function(t,e,o){this.value=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t}),this.type=o,this.maxValue=-1/0};ri.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},ri.prototype.setConstantPatternPositions=function(){},ri.prototype.populatePaintArray=function(){},ri.prototype.updatePaintArray=function(){},ri.prototype.upload=function(){},ri.prototype.destroy=function(){},ri.prototype.setUniforms=function(t,e,o,n){e.set(n.constantOr(this.value))},ri.prototype.getBinding=function(t,e){return"color"===this.type?new ti(t,e):new Xr(t,e)},ri.serialize=function(t){var e=t.value,o=t.names,n=t.type;return{value:On(e),names:o,type:n}},ri.deserialize=function(t){var e=t.value,o=t.names,n=t.type;return new ri(Rn(e),o,n)};var ii=function(t,e,o){this.value=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t}),this.type=o,this.maxValue=-1/0,this.patternPositions={patternTo:null,patternFrom:null}};ii.prototype.defines=function(){return this.names.map(function(t){return"#define HAS_UNIFORM_u_"+t})},ii.prototype.populatePaintArray=function(){},ii.prototype.updatePaintArray=function(){},ii.prototype.upload=function(){},ii.prototype.destroy=function(){},ii.prototype.setConstantPatternPositions=function(t,e){this.patternPositions.patternTo=t.tlbr,this.patternPositions.patternFrom=e.tlbr},ii.prototype.setUniforms=function(t,e,o,n,r){var i=this.patternPositions;"u_pattern_to"===r&&i.patternTo&&e.set(i.patternTo),"u_pattern_from"===r&&i.patternFrom&&e.set(i.patternFrom)},ii.prototype.getBinding=function(t,e){return new $r(t,e)};var ai=function(t,e,o,n){this.expression=t,this.names=e,this.type=o,this.uniformNames=this.names.map(function(t){return"a_"+t}),this.maxValue=-1/0,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===o?2:1,offset:0}}),this.paintVertexArray=new n};ai.prototype.defines=function(){return[]},ai.prototype.setConstantPatternPositions=function(){},ai.prototype.populatePaintArray=function(t,e){var o=this.paintVertexArray,n=o.length;o.reserve(t);var r=this.expression.evaluate(new jn(0),e,{});if("color"===this.type)for(var i=ni(r),a=n;a<t;a++)o.emplaceBack(i[0],i[1]);else{for(var s=n;s<t;s++)o.emplaceBack(r);this.maxValue=Math.max(this.maxValue,r)}},ai.prototype.updatePaintArray=function(t,e,o,n){var r=this.paintVertexArray,i=this.expression.evaluate({zoom:0},o,n);if("color"===this.type)for(var a=ni(i),s=t;s<e;s++)r.emplace(s,a[0],a[1]);else{for(var l=t;l<e;l++)r.emplace(l,i);this.maxValue=Math.max(this.maxValue,i)}},ai.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ai.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ai.prototype.setUniforms=function(t,e){e.set(0)},ai.prototype.getBinding=function(t,e){return new Xr(t,e)};var si=function(t,e,o,n,r,i){this.expression=t,this.names=e,this.uniformNames=this.names.map(function(t){return"u_"+t+"_t"}),this.type=o,this.useIntegerZoom=n,this.zoom=r,this.maxValue=-1/0;var a=i;this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Float32",components:"color"===o?4:2,offset:0}}),this.paintVertexArray=new a};si.prototype.defines=function(){return[]},si.prototype.setConstantPatternPositions=function(){},si.prototype.populatePaintArray=function(t,e){var o=this.paintVertexArray,n=o.length;o.reserve(t);var r=this.expression.evaluate(new jn(this.zoom),e,{}),i=this.expression.evaluate(new jn(this.zoom+1),e,{});if("color"===this.type)for(var a=ni(r),s=ni(i),l=n;l<t;l++)o.emplaceBack(a[0],a[1],s[0],s[1]);else{for(var u=n;u<t;u++)o.emplaceBack(r,i);this.maxValue=Math.max(this.maxValue,r,i)}},si.prototype.updatePaintArray=function(t,e,o,n){var r=this.paintVertexArray,i=this.expression.evaluate({zoom:this.zoom},o,n),a=this.expression.evaluate({zoom:this.zoom+1},o,n);if("color"===this.type)for(var s=ni(i),l=ni(a),u=t;u<e;u++)r.emplace(u,s[0],s[1],l[0],l[1]);else{for(var c=t;c<e;c++)r.emplace(c,i,a);this.maxValue=Math.max(this.maxValue,i,a)}},si.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},si.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},si.prototype.interpolationFactor=function(t){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(t),this.zoom,this.zoom+1):this.expression.interpolationFactor(t,this.zoom,this.zoom+1)},si.prototype.setUniforms=function(t,e,o){e.set(this.interpolationFactor(o.zoom))},si.prototype.getBinding=function(t,e){return new Xr(t,e)};var li=function(t,e,o,n,r,i,a){this.expression=t,this.names=e,this.type=o,this.uniformNames=this.names.map(function(t){return"u_"+t+"_t"}),this.useIntegerZoom=n,this.zoom=r,this.maxValue=-1/0,this.layerId=a,this.paintVertexAttributes=e.map(function(t){return{name:"a_"+t,type:"Uint16",components:4,offset:0}}),this.zoomInPaintVertexArray=new i,this.zoomOutPaintVertexArray=new i};li.prototype.defines=function(){return[]},li.prototype.setConstantPatternPositions=function(){},li.prototype.populatePaintArray=function(t,e,o){var n=this.zoomInPaintVertexArray,r=this.zoomOutPaintVertexArray,i=this.layerId,a=n.length;if(n.reserve(t),r.reserve(t),o&&e.patterns&&e.patterns[i]){var s=e.patterns[i],l=s.min,u=s.mid,c=s.max,p=o[l],d=o[u],h=o[c];if(!p||!d||!h)return;for(var f=a;f<t;f++)n.emplaceBack(d.tl[0],d.tl[1],d.br[0],d.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1]),r.emplaceBack(d.tl[0],d.tl[1],d.br[0],d.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1])}},li.prototype.updatePaintArray=function(t,e,o,n,r){var i=this.zoomInPaintVertexArray,a=this.zoomOutPaintVertexArray,s=this.layerId;if(r&&o.patterns&&o.patterns[s]){var l=o.patterns[s],u=l.min,c=l.mid,p=l.max,d=r[u],h=r[c],f=r[p];if(!d||!h||!f)return;for(var g=t;g<e;g++)i.emplace(g,h.tl[0],h.tl[1],h.br[0],h.br[1],d.tl[0],d.tl[1],d.br[0],d.br[1]),a.emplace(g,h.tl[0],h.tl[1],h.br[0],h.br[1],f.tl[0],f.tl[1],f.br[0],f.br[1])}},li.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},li.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},li.prototype.setUniforms=function(t,e){e.set(0)},li.prototype.getBinding=function(t,e){return new Xr(t,e)};var ui=function(){this.binders={},this.cacheKey="",this._buffers=[],this._featureMap=new Kr,this._bufferOffset=0};ui.createDynamic=function(t,e,o){var n=new ui,r=[];for(var i in t.paint._values)if(o(i)){var a=t.paint.get(i);if(a instanceof Xn&&wo(a.property.specification)){var s=pi(i,t.type),l=a.property.specification.type,u=a.property.useIntegerZoom;if("cross-faded"===a.property.specification["property-type"]||"cross-faded-data-driven"===a.property.specification["property-type"])if("constant"===a.value.kind)n.binders[i]=new ii(a.value.value,s,l),r.push("/u_"+i);else{var c=di(i,l,"source");n.binders[i]=new li(a.value,s,l,u,e,c,t.id),r.push("/a_"+i)}else if("constant"===a.value.kind)n.binders[i]=new ri(a.value.value,s,l),r.push("/u_"+i);else if("source"===a.value.kind){var p=di(i,l,"source");n.binders[i]=new ai(a.value,s,l,p),r.push("/a_"+i)}else{var d=di(i,l,"composite");n.binders[i]=new si(a.value,s,l,u,e,d),r.push("/z_"+i)}}}return n.cacheKey=r.sort().join(""),n},ui.prototype.populatePaintArrays=function(t,e,o,n){for(var r in this.binders)this.binders[r].populatePaintArray(t,e,n);void 0!==e.id&&this._featureMap.add(+e.id,o,this._bufferOffset,t),this._bufferOffset=t},ui.prototype.setConstantPatternPositions=function(t,e){for(var o in this.binders)this.binders[o].setConstantPatternPositions(t,e)},ui.prototype.updatePaintArrays=function(t,e,o,n){var r=!1;for(var i in t)for(var a=0,s=this._featureMap.getPositions(+i);a<s.length;a+=1){var l=s[a],u=e.feature(l.index);for(var c in this.binders){var p=this.binders[c];if(!(p instanceof ri||p instanceof ii)&&!0===p.expression.isStateDependent){var d=o.paint.get(c);p.expression=d.value,p.updatePaintArray(l.start,l.end,u,t[i],n),r=!0}}}return r},ui.prototype.defines=function(){var t=[];for(var e in this.binders)t.push.apply(t,this.binders[e].defines());return t},ui.prototype.getPaintVertexBuffers=function(){return this._buffers},ui.prototype.getUniforms=function(t,e){var o=[];for(var n in this.binders)for(var r=this.binders[n],i=0,a=r.uniformNames;i<a.length;i+=1){var s=a[i];if(e[s]){var l=r.getBinding(t,e[s]);o.push({name:s,property:n,binding:l})}}return o},ui.prototype.setUniforms=function(t,e,o,n){for(var r=0,i=e;r<i.length;r+=1){var a=i[r],s=a.name,l=a.property,u=a.binding;this.binders[l].setUniforms(t,u,n,o.get(l),s)}},ui.prototype.updatePatternPaintBuffers=function(t){var e=[];for(var o in this.binders){var n=this.binders[o];if(n instanceof li){var r=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;r&&e.push(r)}else(n instanceof ai||n instanceof si)&&n.paintVertexBuffer&&e.push(n.paintVertexBuffer)}this._buffers=e},ui.prototype.upload=function(t){for(var e in this.binders)this.binders[e].upload(t);var o=[];for(var n in this.binders){var r=this.binders[n];(r instanceof ai||r instanceof si)&&r.paintVertexBuffer&&o.push(r.paintVertexBuffer)}this._buffers=o},ui.prototype.destroy=function(){for(var t in this.binders)this.binders[t].destroy()};var ci=function(t,e,o,n){void 0===n&&(n=function(){return!0}),this.programConfigurations={};for(var r=0,i=e;r<i.length;r+=1){var a=i[r];this.programConfigurations[a.id]=ui.createDynamic(a,o,n),this.programConfigurations[a.id].layoutAttributes=t}this.needsUpload=!1};function pi(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function di(t,e,o){var n={color:{source:Pr,composite:Ar},number:{source:Sr,composite:Pr}},r=function(t){return{"line-pattern":{source:fr,composite:fr},"fill-pattern":{source:fr,composite:fr},"fill-extrusion-pattern":{source:fr,composite:fr}}[t]}(t);return r&&r[o]||n[e][o]}ci.prototype.populatePaintArrays=function(t,e,o,n){for(var r in this.programConfigurations)this.programConfigurations[r].populatePaintArrays(t,e,o,n);this.needsUpload=!0},ci.prototype.updatePaintArrays=function(t,e,o,n){for(var r=0,i=o;r<i.length;r+=1){var a=i[r];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,e,a,n)||this.needsUpload}},ci.prototype.get=function(t){return this.programConfigurations[t]},ci.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},ci.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},xn("ConstantBinder",ri),xn("CrossFadedConstantBinder",ii),xn("SourceExpressionBinder",ai),xn("CrossFadedCompositeBinder",li),xn("CompositeExpressionBinder",si),xn("ProgramConfiguration",ui,{omit:["_buffers"]}),xn("ProgramConfigurationSet",ci);var hi=8192,fi={min:-1*Math.pow(2,15),max:Math.pow(2,15)-1};function gi(t){for(var e=hi/t.extent,o=t.loadGeometry(),n=0;n<o.length;n++)for(var r=o[n],i=0;i<r.length;i++){var a=r[i];a.x=Math.round(a.x*e),a.y=Math.round(a.y*e),(a.x<fi.min||a.x>fi.max||a.y<fi.min||a.y>fi.max)&&b("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return o}function yi(t,e,o,n,r){t.emplaceBack(2*e+(n+1)/2,2*o+(r+1)/2)}var vi=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new cr,this.indexArray=new Tr,this.segments=new Ur,this.programConfigurations=new ci(jr,t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function mi(t,e){for(var o=0;o<t.length;o++)if(Oi(e,t[o]))return!0;for(var n=0;n<e.length;n++)if(Oi(t,e[n]))return!0;return!!bi(t,e)}function Ci(t,e,o){return!!Oi(t,e)||!!Ei(e,t,o)}function _i(t,e){if(1===t.length)return Ti(e,t[0]);for(var o=0;o<e.length;o++)for(var n=e[o],r=0;r<n.length;r++)if(Oi(t,n[r]))return!0;for(var i=0;i<t.length;i++)if(Ti(e,t[i]))return!0;for(var a=0;a<e.length;a++)if(bi(t,e[a]))return!0;return!1}function wi(t,e,o){if(t.length>1){if(bi(t,e))return!0;for(var n=0;n<e.length;n++)if(Ei(e[n],t,o))return!0}for(var r=0;r<t.length;r++)if(Ei(t[r],e,o))return!0;return!1}function bi(t,e){if(0===t.length||0===e.length)return!1;for(var o=0;o<t.length-1;o++)for(var n=t[o],r=t[o+1],i=0;i<e.length-1;i++)if(Si(n,r,e[i],e[i+1]))return!0;return!1}function Si(t,e,o,n){return S(t,o,n)!==S(e,o,n)&&S(t,e,o)!==S(t,e,n)}function Ei(t,e,o){var n=o*o;if(1===e.length)return t.distSqr(e[0])<n;for(var r=1;r<e.length;r++)if(xi(t,e[r-1],e[r])<n)return!0;return!1}function xi(t,e,o){var n=e.distSqr(o);if(0===n)return t.distSqr(e);var r=((t.x-e.x)*(o.x-e.x)+(t.y-e.y)*(o.y-e.y))/n;return r<0?t.distSqr(e):r>1?t.distSqr(o):t.distSqr(o.sub(e)._mult(r)._add(e))}function Ti(t,e){for(var o,n,r,i=!1,a=0;a<t.length;a++)for(var s=0,l=(o=t[a]).length-1;s<o.length;l=s++)n=o[s],r=o[l],n.y>e.y!=r.y>e.y&&e.x<(r.x-n.x)*(e.y-n.y)/(r.y-n.y)+n.x&&(i=!i);return i}function Oi(t,e){for(var o=!1,n=0,r=t.length-1;n<t.length;r=n++){var i=t[n],a=t[r];i.y>e.y!=a.y>e.y&&e.x<(a.x-i.x)*(e.y-i.y)/(a.y-i.y)+i.x&&(o=!o)}return o}function Ri(t,e,o){var n=o[0],r=o[2];if(t.x<n.x&&e.x<n.x||t.x>r.x&&e.x>r.x||t.y<n.y&&e.y<n.y||t.y>r.y&&e.y>r.y)return!1;var i=S(t,e,o[0]);return i!==S(t,e,o[1])||i!==S(t,e,o[2])||i!==S(t,e,o[3])}function Pi(t,e,o){var n=e.paint.get(t).value;return"constant"===n.kind?n.value:o.programConfigurations.get(e.id).binders[t].maxValue}function Ai(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Di(t,e,o,n,i){if(!e[0]&&!e[1])return t;var a=r.convert(e)._mult(i);"viewport"===o&&a._rotate(-n);for(var s=[],l=0;l<t.length;l++){var u=t[l];s.push(u.sub(a))}return s}vi.prototype.populate=function(t,e){for(var o=0,n=t;o<n.length;o+=1){var r=n[o],i=r.feature,a=r.index,s=r.sourceLayerIndex;if(this.layers[0]._featureFilter(new jn(this.zoom),i)){var l=gi(i);this.addFeature(i,l,a),e.featureIndex.insert(i,l,a,s,this.index)}}},vi.prototype.update=function(t,e,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,o)},vi.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},vi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},vi.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,jr),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},vi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},vi.prototype.addFeature=function(t,e,o){for(var n=0,r=e;n<r.length;n+=1)for(var i=0,a=r[n];i<a.length;i+=1){var s=a[i],l=s.x,u=s.y;if(!(l<0||l>=hi||u<0||u>=hi)){var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=c.vertexLength;yi(this.layoutVertexArray,l,u,-1,-1),yi(this.layoutVertexArray,l,u,1,-1),yi(this.layoutVertexArray,l,u,1,1),yi(this.layoutVertexArray,l,u,-1,1),this.indexArray.emplaceBack(p,p+1,p+2),this.indexArray.emplaceBack(p,p+3,p+2),c.vertexLength+=4,c.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,o,{})},xn("CircleBucket",vi,{omit:["layers"]});var Mi={paint:new nr({"circle-radius":new $n(Lt.paint_circle["circle-radius"]),"circle-color":new $n(Lt.paint_circle["circle-color"]),"circle-blur":new $n(Lt.paint_circle["circle-blur"]),"circle-opacity":new $n(Lt.paint_circle["circle-opacity"]),"circle-translate":new Qn(Lt.paint_circle["circle-translate"]),"circle-translate-anchor":new Qn(Lt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Qn(Lt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Qn(Lt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new $n(Lt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new $n(Lt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new $n(Lt.paint_circle["circle-stroke-opacity"])})},Ii="undefined"!=typeof Float32Array?Float32Array:Array;function Li(){var t=new Ii(9);return Ii!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function Fi(){var t=new Ii(3);return Ii!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Ni(t,e,o){var n=new Ii(3);return n[0]=t,n[1]=e,n[2]=o,n}function ki(t,e,o){var n=e[0],r=e[1],i=e[2],a=e[3];return t[0]=o[0]*n+o[4]*r+o[8]*i+o[12]*a,t[1]=o[1]*n+o[5]*r+o[9]*i+o[13]*a,t[2]=o[2]*n+o[6]*r+o[10]*i+o[14]*a,t[3]=o[3]*n+o[7]*r+o[11]*i+o[15]*a,t}function Gi(){var t=new Ii(4);return Ii!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}Math.PI,Fi(),function(){var t;t=new Ii(4),Ii!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}(),Fi(),Ni(1,0,0),Ni(0,1,0),Gi(),Gi(),Li(),function(){var t;t=new Ii(2),Ii!=Float32Array&&(t[0]=0,t[1]=0)}();var Vi=function(t){function e(e){t.call(this,e,Mi)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new vi(t)},e.prototype.queryRadius=function(t){var e=t;return Pi("circle-radius",this,e)+Pi("circle-stroke-width",this,e)+Ai(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,o,n,r,i,a,s){for(var l=Di(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),i.angle,a),u=this.paint.get("circle-radius").evaluate(e,o)+this.paint.get("circle-stroke-width").evaluate(e,o),c="map"===this.paint.get("circle-pitch-alignment"),p=c?l:function(t,e){return l.map(function(t){return Bi(t,e)})}(0,s),d=c?u*a:u,h=0,f=n;h<f.length;h+=1)for(var g=0,y=f[h];g<y.length;g+=1){var v=y[g],m=c?v:Bi(v,s),C=d,_=ki([],[v.x,v.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?C*=_[3]/i.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(C*=i.cameraToCenterDistance/_[3]),Ci(p,m,C))return!0}return!1},e}(rr);function Bi(t,e){var o=ki([],[t.x,t.y,0,1],e);return new r(o[0]/o[3],o[1]/o[3])}var zi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(vi);function Hi(t,e,o,n){var r=e.width,i=e.height;if(n){if(n instanceof Uint8ClampedArray)n=new Uint8Array(n.buffer);else if(n.length!==r*i*o)throw new RangeError("mismatched image size")}else n=new Uint8Array(r*i*o);return t.width=r,t.height=i,t.data=n,t}function ji(t,e,o){var n=e.width,r=e.height;if(n!==t.width||r!==t.height){var i=Hi({},{width:n,height:r},o);Ui(t,i,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,n),height:Math.min(t.height,r)},o),t.width=n,t.height=r,t.data=i.data}}function Ui(t,e,o,n,r,i){if(0===r.width||0===r.height)return e;if(r.width>t.width||r.height>t.height||o.x>t.width-r.width||o.y>t.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>e.width||r.height>e.height||n.x>e.width-r.width||n.y>e.height-r.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,l=0;l<r.height;l++)for(var u=((o.y+l)*t.width+o.x)*i,c=((n.y+l)*e.width+n.x)*i,p=0;p<r.width*i;p++)s[c+p]=a[u+p];return e}xn("HeatmapBucket",zi,{omit:["layers"]});var Wi=function(t,e){Hi(this,t,1,e)};Wi.prototype.resize=function(t){ji(this,t,1)},Wi.prototype.clone=function(){return new Wi({width:this.width,height:this.height},new Uint8Array(this.data))},Wi.copy=function(t,e,o,n,r){Ui(t,e,o,n,r,1)};var Ki=function(t,e){Hi(this,t,4,e)};Ki.prototype.resize=function(t){ji(this,t,4)},Ki.prototype.replace=function(t,e){e?this.data.set(t):t instanceof Uint8ClampedArray?this.data=new Uint8Array(t.buffer):this.data=t},Ki.prototype.clone=function(){return new Ki({width:this.width,height:this.height},new Uint8Array(this.data))},Ki.copy=function(t,e,o,n,r){Ui(t,e,o,n,r,4)},xn("AlphaImage",Wi),xn("RGBAImage",Ki);var qi={paint:new nr({"heatmap-radius":new $n(Lt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new $n(Lt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Qn(Lt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new or(Lt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Qn(Lt.paint_heatmap["heatmap-opacity"])})};function Yi(t,e){for(var o=new Uint8Array(1024),n={},r=0,i=0;r<256;r++,i+=4){n[e]=r/255;var a=t.evaluate(n);o[i+0]=Math.floor(255*a.r/a.a),o[i+1]=Math.floor(255*a.g/a.a),o[i+2]=Math.floor(255*a.b/a.a),o[i+3]=Math.floor(255*a.a)}return new Ki({width:256,height:1},o)}var Zi=function(t){function e(e){t.call(this,e,qi),this._updateColorRamp()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new zi(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){var t=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Yi(t,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(rr),Xi={paint:new nr({"hillshade-illumination-direction":new Qn(Lt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Qn(Lt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Qn(Lt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Qn(Lt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Qn(Lt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Qn(Lt.paint_hillshade["hillshade-accent-color"])})},Ji=function(t){function e(e){t.call(this,e,Xi)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(rr),Qi=lr([{name:"a_pos",components:2,type:"Int16"}],4).members,$i=ea,ta=ea;function ea(t,e,o){o=o||2;var n,r,i,a,s,l,u,c=e&&e.length,p=c?e[0]*o:t.length,d=oa(t,0,p,o,!0),h=[];if(!d||d.next===d.prev)return h;if(c&&(d=function(t,e,o,n){var r,i,a,s=[];for(r=0,i=e.length;r<i;r++)(a=oa(t,e[r]*n,r<i-1?e[r+1]*n:t.length,n,!1))===a.next&&(a.steiner=!0),s.push(da(a));for(s.sort(ua),r=0;r<s.length;r++)ca(s[r],o),o=na(o,o.next);return o}(t,e,d,o)),t.length>80*o){n=i=t[0],r=a=t[1];for(var f=o;f<p;f+=o)(s=t[f])<n&&(n=s),(l=t[f+1])<r&&(r=l),s>i&&(i=s),l>a&&(a=l);u=0!==(u=Math.max(i-n,a-r))?1/u:0}return ra(d,h,o,n,r,u),h}function oa(t,e,o,n,r){var i,a;if(r===Sa(t,e,o,n)>0)for(i=e;i<o;i+=n)a=_a(i,t[i],t[i+1],a);else for(i=o-n;i>=e;i-=n)a=_a(i,t[i],t[i+1],a);return a&&ya(a,a.next)&&(wa(a),a=a.next),a}function na(t,e){if(!t)return t;e||(e=t);var o,n=t;do{if(o=!1,n.steiner||!ya(n,n.next)&&0!==ga(n.prev,n,n.next))n=n.next;else{if(wa(n),(n=e=n.prev)===n.next)break;o=!0}}while(o||n!==e);return e}function ra(t,e,o,n,r,i,a){if(t){!a&&i&&function(t,e,o,n){var r=t;do{null===r.z&&(r.z=pa(r.x,r.y,e,o,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,o,n,r,i,a,s,l,u=1;do{for(o=t,t=null,i=null,a=0;o;){for(a++,n=o,s=0,e=0;e<u&&(s++,n=n.nextZ);e++);for(l=u;s>0||l>0&&n;)0!==s&&(0===l||!n||o.z<=n.z)?(r=o,o=o.nextZ,s--):(r=n,n=n.nextZ,l--),i?i.nextZ=r:t=r,r.prevZ=i,i=r;o=n}i.nextZ=null,u*=2}while(a>1)}(r)}(t,n,r,i);for(var s,l,u=t;t.prev!==t.next;)if(s=t.prev,l=t.next,i?aa(t,n,r,i):ia(t))e.push(s.i/o),e.push(t.i/o),e.push(l.i/o),wa(t),t=l.next,u=l.next;else if((t=l)===u){a?1===a?ra(t=sa(t,e,o),e,o,n,r,i,2):2===a&&la(t,e,o,n,r,i):ra(na(t),e,o,n,r,i,1);break}}}function ia(t){var e=t.prev,o=t,n=t.next;if(ga(e,o,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(ha(e.x,e.y,o.x,o.y,n.x,n.y,r.x,r.y)&&ga(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function aa(t,e,o,n){var r=t.prev,i=t,a=t.next;if(ga(r,i,a)>=0)return!1;for(var s=r.x<i.x?r.x<a.x?r.x:a.x:i.x<a.x?i.x:a.x,l=r.y<i.y?r.y<a.y?r.y:a.y:i.y<a.y?i.y:a.y,u=r.x>i.x?r.x>a.x?r.x:a.x:i.x>a.x?i.x:a.x,c=r.y>i.y?r.y>a.y?r.y:a.y:i.y>a.y?i.y:a.y,p=pa(s,l,e,o,n),d=pa(u,c,e,o,n),h=t.prevZ,f=t.nextZ;h&&h.z>=p&&f&&f.z<=d;){if(h!==t.prev&&h!==t.next&&ha(r.x,r.y,i.x,i.y,a.x,a.y,h.x,h.y)&&ga(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,f!==t.prev&&f!==t.next&&ha(r.x,r.y,i.x,i.y,a.x,a.y,f.x,f.y)&&ga(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;h&&h.z>=p;){if(h!==t.prev&&h!==t.next&&ha(r.x,r.y,i.x,i.y,a.x,a.y,h.x,h.y)&&ga(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;f&&f.z<=d;){if(f!==t.prev&&f!==t.next&&ha(r.x,r.y,i.x,i.y,a.x,a.y,f.x,f.y)&&ga(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function sa(t,e,o){var n=t;do{var r=n.prev,i=n.next.next;!ya(r,i)&&va(r,n,n.next,i)&&ma(r,i)&&ma(i,r)&&(e.push(r.i/o),e.push(n.i/o),e.push(i.i/o),wa(n),wa(n.next),n=t=i),n=n.next}while(n!==t);return n}function la(t,e,o,n,r,i){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&fa(a,s)){var l=Ca(a,s);return a=na(a,a.next),l=na(l,l.next),ra(a,e,o,n,r,i),void ra(l,e,o,n,r,i)}s=s.next}a=a.next}while(a!==t)}function ua(t,e){return t.x-e.x}function ca(t,e){if(e=function(t,e){var o,n=e,r=t.x,i=t.y,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var s=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=r&&s>a){if(a=s,s===r){if(i===n.y)return n;if(i===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!o)return null;if(r===a)return o.prev;var l,u=o,c=o.x,p=o.y,d=1/0;for(n=o.next;n!==u;)r>=n.x&&n.x>=c&&r!==n.x&&ha(i<p?r:a,i,c,p,i<p?a:r,i,n.x,n.y)&&((l=Math.abs(i-n.y)/(r-n.x))<d||l===d&&n.x>o.x)&&ma(n,t)&&(o=n,d=l),n=n.next;return o}(t,e)){var o=Ca(e,t);na(o,o.next)}}function pa(t,e,o,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-o)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function da(t){var e=t,o=t;do{(e.x<o.x||e.x===o.x&&e.y<o.y)&&(o=e),e=e.next}while(e!==t);return o}function ha(t,e,o,n,r,i,a,s){return(r-a)*(e-s)-(t-a)*(i-s)>=0&&(t-a)*(n-s)-(o-a)*(e-s)>=0&&(o-a)*(i-s)-(r-a)*(n-s)>=0}function fa(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var o=t;do{if(o.i!==t.i&&o.next.i!==t.i&&o.i!==e.i&&o.next.i!==e.i&&va(o,o.next,t,e))return!0;o=o.next}while(o!==t);return!1}(t,e)&&ma(t,e)&&ma(e,t)&&function(t,e){var o=t,n=!1,r=(t.x+e.x)/2,i=(t.y+e.y)/2;do{o.y>i!=o.next.y>i&&o.next.y!==o.y&&r<(o.next.x-o.x)*(i-o.y)/(o.next.y-o.y)+o.x&&(n=!n),o=o.next}while(o!==t);return n}(t,e)}function ga(t,e,o){return(e.y-t.y)*(o.x-e.x)-(e.x-t.x)*(o.y-e.y)}function ya(t,e){return t.x===e.x&&t.y===e.y}function va(t,e,o,n){return!!(ya(t,e)&&ya(o,n)||ya(t,n)&&ya(o,e))||ga(t,e,o)>0!=ga(t,e,n)>0&&ga(o,n,t)>0!=ga(o,n,e)>0}function ma(t,e){return ga(t.prev,t,t.next)<0?ga(t,e,t.next)>=0&&ga(t,t.prev,e)>=0:ga(t,e,t.prev)<0||ga(t,t.next,e)<0}function Ca(t,e){var o=new ba(t.i,t.x,t.y),n=new ba(e.i,e.x,e.y),r=t.next,i=e.prev;return t.next=e,e.prev=t,o.next=r,r.prev=o,n.next=o,o.prev=n,i.next=n,n.prev=i,n}function _a(t,e,o,n){var r=new ba(t,e,o);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function wa(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function ba(t,e,o){this.i=t,this.x=e,this.y=o,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Sa(t,e,o,n){for(var r=0,i=e,a=o-n;i<o;i+=n)r+=(t[a]-t[i])*(t[i+1]+t[a+1]),a=i;return r}function Ea(t,e,o,n,r){!function t(e,o,n,r,i){for(;r>n;){if(r-n>600){var a=r-n+1,s=o-n+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1);t(e,o,Math.max(n,Math.floor(o-s*u/a+c)),Math.min(r,Math.floor(o+(a-s)*u/a+c)),i)}var p=e[o],d=n,h=r;for(xa(e,n,o),i(e[r],p)>0&&xa(e,n,r);d<h;){for(xa(e,d,h),d++,h--;i(e[d],p)<0;)d++;for(;i(e[h],p)>0;)h--}0===i(e[n],p)?xa(e,n,h):xa(e,++h,r),h<=o&&(n=h+1),o<=h&&(r=h-1)}}(t,e,o||0,n||t.length-1,r||Ta)}function xa(t,e,o){var n=t[e];t[e]=t[o],t[o]=n}function Ta(t,e){return t<e?-1:t>e?1:0}function Oa(t,e){var o=t.length;if(o<=1)return[t];for(var n,r,i=[],a=0;a<o;a++){var s=E(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===r&&(r=s<0),r===s<0?(n&&i.push(n),n=[t[a]]):n.push(t[a]))}if(n&&i.push(n),e>1)for(var l=0;l<i.length;l++)i[l].length<=e||(Ea(i[l],e,1,i[l].length-1,Ra),i[l]=i[l].slice(0,e));return i}function Ra(t,e){return e.area-t.area}function Pa(t,e,o){for(var n=o.patternDependencies,r=!1,i=0,a=e;i<a.length;i+=1){var s=a[i].paint.get(t+"-pattern");s.isConstant()||(r=!0);var l=s.constantOr(null);l&&(r=!0,n[l.to]=!0,n[l.from]=!0)}return r}function Aa(t,e,o,n,r){for(var i=r.patternDependencies,a=0,s=e;a<s.length;a+=1){var l=s[a],u=l.paint.get(t+"-pattern").value;if("constant"!==u.kind){var c=u.evaluate({zoom:n-1},o,{}),p=u.evaluate({zoom:n},o,{}),d=u.evaluate({zoom:n+1},o,{});i[c]=!0,i[p]=!0,i[d]=!0,o.patterns[l.id]={min:c,mid:p,max:d}}}return o}ea.deviation=function(t,e,o,n){var r=e&&e.length,i=r?e[0]*o:t.length,a=Math.abs(Sa(t,0,i,o));if(r)for(var s=0,l=e.length;s<l;s++){var u=e[s]*o,c=s<l-1?e[s+1]*o:t.length;a-=Math.abs(Sa(t,u,c,o))}var p=0;for(s=0;s<n.length;s+=3){var d=n[s]*o,h=n[s+1]*o,f=n[s+2]*o;p+=Math.abs((t[d]-t[f])*(t[h+1]-t[d+1])-(t[d]-t[h])*(t[f+1]-t[d+1]))}return 0===a&&0===p?0:Math.abs((p-a)/a)},ea.flatten=function(t){for(var e=t[0][0].length,o={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var i=0;i<t[r].length;i++)for(var a=0;a<e;a++)o.vertices.push(t[r][i][a]);r>0&&(n+=t[r-1].length,o.holes.push(n))}return o},$i.default=ta;var Da=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new cr,this.indexArray=new Tr,this.indexArray2=new Or,this.programConfigurations=new ci(Qi,t.layers,t.zoom),this.segments=new Ur,this.segments2=new Ur,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};Da.prototype.populate=function(t,e){this.features=[],this.hasPattern=Pa("fill",this.layers,e);for(var o=0,n=t;o<n.length;o+=1){var r=n[o],i=r.feature,a=r.index,s=r.sourceLayerIndex;if(this.layers[0]._featureFilter(new jn(this.zoom),i)){var l=gi(i),u={sourceLayerIndex:s,index:a,geometry:l,properties:i.properties,type:i.type,patterns:{}};void 0!==i.id&&(u.id=i.id),this.hasPattern?this.features.push(Aa("fill",this.layers,u,this.zoom,e)):this.addFeature(u,l,a,{}),e.featureIndex.insert(i,l,a,s,this.index)}}},Da.prototype.update=function(t,e,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,o)},Da.prototype.addFeatures=function(t,e){for(var o=0,n=this.features;o<n.length;o+=1){var r=n[o],i=r.geometry;this.addFeature(r,i,r.index,e)}},Da.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Da.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Da.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Qi),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},Da.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Da.prototype.addFeature=function(t,e,o,n){for(var r=0,i=Oa(e,500);r<i.length;r+=1){for(var a=i[r],s=0,l=0,u=a;l<u.length;l+=1)s+=u[l].length;for(var c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray),p=c.vertexLength,d=[],h=[],f=0,g=a;f<g.length;f+=1){var y=g[f];if(0!==y.length){y!==a[0]&&h.push(d.length/2);var v=this.segments2.prepareSegment(y.length,this.layoutVertexArray,this.indexArray2),m=v.vertexLength;this.layoutVertexArray.emplaceBack(y[0].x,y[0].y),this.indexArray2.emplaceBack(m+y.length-1,m),d.push(y[0].x),d.push(y[0].y);for(var C=1;C<y.length;C++)this.layoutVertexArray.emplaceBack(y[C].x,y[C].y),this.indexArray2.emplaceBack(m+C-1,m+C),d.push(y[C].x),d.push(y[C].y);v.vertexLength+=y.length,v.primitiveLength+=y.length}}for(var _=$i(d,h),w=0;w<_.length;w+=3)this.indexArray.emplaceBack(p+_[w],p+_[w+1],p+_[w+2]);c.vertexLength+=s,c.primitiveLength+=_.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,o,n)},xn("FillBucket",Da,{omit:["layers","features"]});var Ma={paint:new nr({"fill-antialias":new Qn(Lt.paint_fill["fill-antialias"]),"fill-opacity":new $n(Lt.paint_fill["fill-opacity"]),"fill-color":new $n(Lt.paint_fill["fill-color"]),"fill-outline-color":new $n(Lt.paint_fill["fill-outline-color"]),"fill-translate":new Qn(Lt.paint_fill["fill-translate"]),"fill-translate-anchor":new Qn(Lt.paint_fill["fill-translate-anchor"]),"fill-pattern":new tr(Lt.paint_fill["fill-pattern"])})},Ia=function(t){function e(e){t.call(this,e,Ma)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e);var o=this.paint._values["fill-outline-color"];"constant"===o.value.kind&&void 0===o.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new Da(t)},e.prototype.queryRadius=function(){return Ai(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,o,n,r,i,a){return _i(Di(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),i.angle,a),n)},e.prototype.isTileClipped=function(){return!0},e}(rr),La=lr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Fa=Na;function Na(t,e,o,n,r){this.properties={},this.extent=o,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=r,t.readFields(ka,this,e)}function ka(t,e,o){1==t?e.id=o.readVarint():2==t?function(t,e){for(var o=t.readVarint()+t.pos;t.pos<o;){var n=e._keys[t.readVarint()],r=e._values[t.readVarint()];e.properties[n]=r}}(o,e):3==t?e.type=o.readVarint():4==t&&(e._geometry=o.pos)}function Ga(t){for(var e,o,n=0,r=0,i=t.length,a=i-1;r<i;a=r++)e=t[r],n+=((o=t[a]).x-e.x)*(e.y+o.y);return n}Na.types=["Unknown","Point","LineString","Polygon"],Na.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,o=t.readVarint()+t.pos,n=1,i=0,a=0,s=0,l=[];t.pos<o;){if(i<=0){var u=t.readVarint();n=7&u,i=u>>3}if(i--,1===n||2===n)a+=t.readSVarint(),s+=t.readSVarint(),1===n&&(e&&l.push(e),e=[]),e.push(new r(a,s));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&l.push(e),l},Na.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,o=1,n=0,r=0,i=0,a=1/0,s=-1/0,l=1/0,u=-1/0;t.pos<e;){if(n<=0){var c=t.readVarint();o=7&c,n=c>>3}if(n--,1===o||2===o)(r+=t.readSVarint())<a&&(a=r),r>s&&(s=r),(i+=t.readSVarint())<l&&(l=i),i>u&&(u=i);else if(7!==o)throw new Error("unknown command "+o)}return[a,l,s,u]},Na.prototype.toGeoJSON=function(t,e,o){var n,r,i=this.extent*Math.pow(2,o),a=this.extent*t,s=this.extent*e,l=this.loadGeometry(),u=Na.types[this.type];function c(t){for(var e=0;e<t.length;e++){var o=t[e],n=180-360*(o.y+s)/i;t[e]=[360*(o.x+a)/i-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(n=0;n<l.length;n++)p[n]=l[n][0];c(l=p);break;case 2:for(n=0;n<l.length;n++)c(l[n]);break;case 3:for(l=function(t){var e=t.length;if(e<=1)return[t];for(var o,n,r=[],i=0;i<e;i++){var a=Ga(t[i]);0!==a&&(void 0===n&&(n=a<0),n===a<0?(o&&r.push(o),o=[t[i]]):o.push(t[i]))}return o&&r.push(o),r}(l),n=0;n<l.length;n++)for(r=0;r<l[n].length;r++)c(l[n][r])}1===l.length?l=l[0]:u="Multi"+u;var d={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var Va=Ba;function Ba(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(za,this,e),this.length=this._features.length}function za(t,e,o){15===t?e.version=o.readVarint():1===t?e.name=o.readString():5===t?e.extent=o.readVarint():2===t?e._features.push(o.pos):3===t?e._keys.push(o.readString()):4===t&&e._values.push(function(t){for(var e=null,o=t.readVarint()+t.pos;t.pos<o;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}(o))}function Ha(t,e,o){if(3===t){var n=new Va(o,o.readVarint()+o.pos);n.length&&(e[n.name]=n)}}Ba.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new Fa(this._pbf,e,this.extent,this._keys,this._values)};var ja={VectorTile:function(t,e){this.layers=t.readFields(Ha,{},e)},VectorTileFeature:Fa,VectorTileLayer:Va},Ua=ja.VectorTileFeature.types,Wa=Math.pow(2,13);function Ka(t,e,o,n,r,i,a,s){t.emplaceBack(e,o,2*Math.floor(n*Wa)+a,r*Wa*2,i*Wa*2,Math.round(s))}var qa=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new dr,this.indexArray=new Tr,this.programConfigurations=new ci(La,t.layers,t.zoom),this.segments=new Ur,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function Ya(t,e){return t.x===e.x&&(t.x<0||t.x>hi)||t.y===e.y&&(t.y<0||t.y>hi)}function Za(t){return t.every(function(t){return t.x<0})||t.every(function(t){return t.x>hi})||t.every(function(t){return t.y<0})||t.every(function(t){return t.y>hi})}qa.prototype.populate=function(t,e){this.features=[],this.hasPattern=Pa("fill-extrusion",this.layers,e);for(var o=0,n=t;o<n.length;o+=1){var r=n[o],i=r.feature,a=r.index,s=r.sourceLayerIndex;if(this.layers[0]._featureFilter(new jn(this.zoom),i)){var l=gi(i),u={sourceLayerIndex:s,index:a,geometry:l,properties:i.properties,type:i.type,patterns:{}};void 0!==i.id&&(u.id=i.id),this.hasPattern?this.features.push(Aa("fill-extrusion",this.layers,u,this.zoom,e)):this.addFeature(u,l,a,{}),e.featureIndex.insert(i,l,a,s,this.index,!0)}}},qa.prototype.addFeatures=function(t,e){for(var o=0,n=this.features;o<n.length;o+=1){var r=n[o],i=r.geometry;this.addFeature(r,i,r.index,e)}},qa.prototype.update=function(t,e,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,o)},qa.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},qa.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},qa.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,La),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},qa.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},qa.prototype.addFeature=function(t,e,o,n){for(var r=0,i=Oa(e,500);r<i.length;r+=1){for(var a=i[r],s=0,l=0,u=a;l<u.length;l+=1)s+=u[l].length;for(var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),p=0,d=a;p<d.length;p+=1){var h=d[p];if(0!==h.length&&!Za(h))for(var f=0,g=0;g<h.length;g++){var y=h[g];if(g>=1){var v=h[g-1];if(!Ya(y,v)){c.vertexLength+4>Ur.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var m=y.sub(v)._perp()._unit(),C=v.dist(y);f+C>32768&&(f=0),Ka(this.layoutVertexArray,y.x,y.y,m.x,m.y,0,0,f),Ka(this.layoutVertexArray,y.x,y.y,m.x,m.y,0,1,f),f+=C,Ka(this.layoutVertexArray,v.x,v.y,m.x,m.y,0,0,f),Ka(this.layoutVertexArray,v.x,v.y,m.x,m.y,0,1,f);var _=c.vertexLength;this.indexArray.emplaceBack(_,_+2,_+1),this.indexArray.emplaceBack(_+1,_+2,_+3),c.vertexLength+=4,c.primitiveLength+=2}}}}if(c.vertexLength+s>Ur.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray)),"Polygon"===Ua[t.type]){for(var w=[],b=[],S=c.vertexLength,E=0,x=a;E<x.length;E+=1){var T=x[E];if(0!==T.length){T!==a[0]&&b.push(w.length/2);for(var O=0;O<T.length;O++){var R=T[O];Ka(this.layoutVertexArray,R.x,R.y,0,0,1,1,0),w.push(R.x),w.push(R.y)}}}for(var P=$i(w,b),A=0;A<P.length;A+=3)this.indexArray.emplaceBack(S+P[A],S+P[A+2],S+P[A+1]);c.primitiveLength+=P.length/3,c.vertexLength+=s}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,o,n)},xn("FillExtrusionBucket",qa,{omit:["layers","features"]});var Xa={paint:new nr({"fill-extrusion-opacity":new Qn(Lt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new $n(Lt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Qn(Lt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Qn(Lt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new tr(Lt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new $n(Lt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new $n(Lt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Qn(Lt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Ja=function(t){function e(e){t.call(this,e,Xa)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new qa(t)},e.prototype.queryRadius=function(){return Ai(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(t,e,o,n,i,a,s,l){var u=Di(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,s),c=this.paint.get("fill-extrusion-height").evaluate(e,o),p=this.paint.get("fill-extrusion-base").evaluate(e,o),d=function(t,e,o,n){for(var i=[],a=0,s=t;a<s.length;a+=1){var l=s[a],u=[l.x,l.y,0,1];ki(u,u,e),i.push(new r(u[0]/u[3],u[1]/u[3]))}return i}(u,l),h=function(t,e,o,n){for(var i=[],a=[],s=n[8]*e,l=n[9]*e,u=n[10]*e,c=n[11]*e,p=n[8]*o,d=n[9]*o,h=n[10]*o,f=n[11]*o,g=0,y=t;g<y.length;g+=1){for(var v=[],m=[],C=0,_=y[g];C<_.length;C+=1){var w=_[C],b=w.x,S=w.y,E=n[0]*b+n[4]*S+n[12],x=n[1]*b+n[5]*S+n[13],T=n[2]*b+n[6]*S+n[14],O=n[3]*b+n[7]*S+n[15],R=T+u,P=O+c,A=E+p,D=x+d,M=T+h,I=O+f,L=new r((E+s)/P,(x+l)/P);L.z=R/P,v.push(L);var F=new r(A/I,D/I);F.z=M/I,m.push(F)}i.push(v),a.push(m)}return[i,a]}(n,p,c,l);return function(t,e,o){var n=1/0;_i(o,e)&&(n=$a(o,e[0]));for(var r=0;r<e.length;r++)for(var i=e[r],a=t[r],s=0;s<i.length-1;s++){var l=i[s],u=i[s+1],c=a[s],p=[l,u,a[s+1],c,l];mi(o,p)&&(n=Math.min(n,$a(o,p)))}return n!==1/0&&n}(h[0],h[1],d)},e}(rr);function Qa(t,e){return t.x*e.x+t.y*e.y}function $a(t,e){if(1===t.length){var o=e[0],n=e[1],r=e[3],i=t[0],a=n.sub(o),s=r.sub(o),l=i.sub(o),u=Qa(a,a),c=Qa(a,s),p=Qa(s,s),d=Qa(l,a),h=Qa(l,s),f=u*p-c*c,g=(p*d-c*h)/f,y=(u*h-c*d)/f,v=1-g-y;return o.z*v+n.z*g+r.z*y}for(var m=1/0,C=0,_=e;C<_.length;C+=1){var w=_[C];m=Math.min(m,w.z)}return m}var ts=lr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,es=ja.VectorTileFeature.types,os=63,ns=Math.cos(Math.PI/180*37.5),rs=.5,is=Math.pow(2,14)/rs;function as(t,e,o,n,r,i,a){t.emplaceBack((e.x<<1)+(n?1:0),(e.y<<1)+(r?1:0),Math.round(os*o.x)+128,Math.round(os*o.y)+128,1+(0===i?0:i<0?-1:1)|(a*rs&63)<<2,a*rs>>6)}var ss=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.features=[],this.hasPattern=!1,this.layoutVertexArray=new hr,this.indexArray=new Tr,this.programConfigurations=new ci(ts,t.layers,t.zoom),this.segments=new Ur,this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id})};function ls(t,e){return(t/e.tileTotal*(e.end-e.start)+e.start)*(is-1)}ss.prototype.populate=function(t,e){this.features=[],this.hasPattern=Pa("line",this.layers,e);for(var o=0,n=t;o<n.length;o+=1){var r=n[o],i=r.feature,a=r.index,s=r.sourceLayerIndex;if(this.layers[0]._featureFilter(new jn(this.zoom),i)){var l=gi(i),u={sourceLayerIndex:s,index:a,geometry:l,properties:i.properties,type:i.type,patterns:{}};void 0!==i.id&&(u.id=i.id),this.hasPattern?this.features.push(Aa("line",this.layers,u,this.zoom,e)):this.addFeature(u,l,a,{}),e.featureIndex.insert(i,l,a,s,this.index)}}},ss.prototype.update=function(t,e,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,o)},ss.prototype.addFeatures=function(t,e){for(var o=0,n=this.features;o<n.length;o+=1){var r=n[o],i=r.geometry;this.addFeature(r,i,r.index,e)}},ss.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ss.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ss.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ts),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},ss.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ss.prototype.addFeature=function(t,e,o,n){for(var r=this.layers[0].layout,i=r.get("line-join").evaluate(t,{}),a=r.get("line-cap"),s=r.get("line-miter-limit"),l=r.get("line-round-limit"),u=0,c=e;u<c.length;u+=1){var p=c[u];this.addLine(p,t,i,a,s,l,o,n)}},ss.prototype.addLine=function(t,e,o,n,r,i,a,s){var l=null;e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")&&(l={start:e.properties.mapbox_clip_start,end:e.properties.mapbox_clip_end,tileTotal:void 0});for(var u="Polygon"===es[e.type],c=t.length;c>=2&&t[c-1].equals(t[c-2]);)c--;for(var p=0;p<c-1&&t[p].equals(t[p+1]);)p++;if(!(c<(u?3:2))){l&&(l.tileTotal=function(t,e,o){for(var n,r,i=0,a=p;a<o-1;a++)n=t[a],r=t[a+1],i+=n.dist(r);return i}(t,0,c)),"bevel"===o&&(r=1.05);var d=hi/(512*this.overscaling)*15,h=t[p],f=this.segments.prepareSegment(10*c,this.layoutVertexArray,this.indexArray);this.distance=0;var g,y,v,m=n,C=u?"butt":n,_=!0,w=void 0,b=void 0,S=void 0,E=void 0;this.e1=this.e2=this.e3=-1,u&&(g=t[c-2],E=h.sub(g)._unit()._perp());for(var x=p;x<c;x++)if(!(b=u&&x===c-1?t[p+1]:t[x+1])||!t[x].equals(b)){E&&(S=E),g&&(w=g),g=t[x],E=b?b.sub(g)._unit()._perp():S;var T=(S=S||E).add(E);0===T.x&&0===T.y||T._unit();var O=T.x*E.x+T.y*E.y,R=0!==O?1/O:1/0,P=O<ns&&w&&b;if(P&&x>p){var A=g.dist(w);if(A>2*d){var D=g.sub(g.sub(w)._mult(d/A)._round());this.distance+=D.dist(w),this.addCurrentVertex(D,this.distance,S.mult(1),0,0,!1,f,l),w=D}}var M=w&&b,I=M?o:b?m:C;if(M&&"round"===I&&(R<i?I="miter":R<=2&&(I="fakeround")),"miter"===I&&R>r&&(I="bevel"),"bevel"===I&&(R>2&&(I="flipbevel"),R<r&&(I="miter")),w&&(this.distance+=g.dist(w)),"miter"===I)T._mult(R),this.addCurrentVertex(g,this.distance,T,0,0,!1,f,l);else if("flipbevel"===I){if(R>100)T=E.clone().mult(-1);else{var L=S.x*E.y-S.y*E.x>0?-1:1,F=R*S.add(E).mag()/S.sub(E).mag();T._perp()._mult(F*L)}this.addCurrentVertex(g,this.distance,T,0,0,!1,f,l),this.addCurrentVertex(g,this.distance,T.mult(-1),0,0,!1,f,l)}else if("bevel"===I||"fakeround"===I){var N=S.x*E.y-S.y*E.x>0,k=-Math.sqrt(R*R-1);if(N?(v=0,y=k):(y=0,v=k),_||this.addCurrentVertex(g,this.distance,S,y,v,!1,f,l),"fakeround"===I){for(var G=Math.floor(8*(.5-(O-.5))),V=void 0,B=0;B<G;B++)V=E.mult((B+1)/(G+1))._add(S)._unit(),this.addPieSliceVertex(g,this.distance,V,N,f,l);this.addPieSliceVertex(g,this.distance,T,N,f,l);for(var z=G-1;z>=0;z--)V=S.mult((z+1)/(G+1))._add(E)._unit(),this.addPieSliceVertex(g,this.distance,V,N,f,l)}b&&this.addCurrentVertex(g,this.distance,E,-y,-v,!1,f,l)}else"butt"===I?(_||this.addCurrentVertex(g,this.distance,S,0,0,!1,f,l),b&&this.addCurrentVertex(g,this.distance,E,0,0,!1,f,l)):"square"===I?(_||(this.addCurrentVertex(g,this.distance,S,1,1,!1,f,l),this.e1=this.e2=-1),b&&this.addCurrentVertex(g,this.distance,E,-1,-1,!1,f,l)):"round"===I&&(_||(this.addCurrentVertex(g,this.distance,S,0,0,!1,f,l),this.addCurrentVertex(g,this.distance,S,1,1,!0,f,l),this.e1=this.e2=-1),b&&(this.addCurrentVertex(g,this.distance,E,-1,-1,!0,f,l),this.addCurrentVertex(g,this.distance,E,0,0,!1,f,l)));if(P&&x<c-1){var H=g.dist(b);if(H>2*d){var j=g.add(b.sub(g)._mult(d/H)._round());this.distance+=j.dist(g),this.addCurrentVertex(j,this.distance,E.mult(1),0,0,!1,f,l),g=j}}_=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,s)}},ss.prototype.addCurrentVertex=function(t,e,o,n,r,i,a,s){var l,u=this.layoutVertexArray,c=this.indexArray;s&&(e=ls(e,s)),l=o.clone(),n&&l._sub(o.perp()._mult(n)),as(u,t,l,i,!1,n,e),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,l=o.mult(-1),r&&l._sub(o.perp()._mult(r)),as(u,t,l,i,!0,-r,e),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),this.e1=this.e2,this.e2=this.e3,e>is/2&&!s&&(this.distance=0,this.addCurrentVertex(t,this.distance,o,n,r,i,a))},ss.prototype.addPieSliceVertex=function(t,e,o,n,r,i){o=o.mult(n?-1:1);var a=this.layoutVertexArray,s=this.indexArray;i&&(e=ls(e,i)),as(a,t,o,!1,n,0,e),this.e3=r.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),r.primitiveLength++),n?this.e2=this.e3:this.e1=this.e3},xn("LineBucket",ss,{omit:["layers","features"]});var us=new nr({"line-cap":new Qn(Lt.layout_line["line-cap"]),"line-join":new $n(Lt.layout_line["line-join"]),"line-miter-limit":new Qn(Lt.layout_line["line-miter-limit"]),"line-round-limit":new Qn(Lt.layout_line["line-round-limit"])}),cs={paint:new nr({"line-opacity":new $n(Lt.paint_line["line-opacity"]),"line-color":new $n(Lt.paint_line["line-color"]),"line-translate":new Qn(Lt.paint_line["line-translate"]),"line-translate-anchor":new Qn(Lt.paint_line["line-translate-anchor"]),"line-width":new $n(Lt.paint_line["line-width"]),"line-gap-width":new $n(Lt.paint_line["line-gap-width"]),"line-offset":new $n(Lt.paint_line["line-offset"]),"line-blur":new $n(Lt.paint_line["line-blur"]),"line-dasharray":new er(Lt.paint_line["line-dasharray"]),"line-pattern":new tr(Lt.paint_line["line-pattern"]),"line-gradient":new or(Lt.paint_line["line-gradient"])}),layout:us},ps=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.possiblyEvaluate=function(e,o){return o=new jn(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,zoomHistory:o.zoomHistory,transition:o.transition}),t.prototype.possiblyEvaluate.call(this,e,o)},e.prototype.evaluate=function(e,o,n,r){return o=p({},o,{zoom:Math.floor(o.zoom)}),t.prototype.evaluate.call(this,e,o,n,r)},e}($n))(cs.paint.properties["line-width"].specification);ps.useIntegerZoom=!0;var ds=function(t){function e(e){t.call(this,e,cs)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},e.prototype._updateGradient=function(){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=Yi(t,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),this.paint._values["line-floorwidth"]=ps.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new ss(t)},e.prototype.queryRadius=function(t){var e=t,o=hs(Pi("line-width",this,e),Pi("line-gap-width",this,e)),n=Pi("line-offset",this,e);return o/2+Math.abs(n)+Ai(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,o,n,i,a,s){var l=Di(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,s),u=s/2*hs(this.paint.get("line-width").evaluate(e,o),this.paint.get("line-gap-width").evaluate(e,o)),c=this.paint.get("line-offset").evaluate(e,o);return c&&(n=function(t,e){for(var o=[],n=new r(0,0),i=0;i<t.length;i++){for(var a=t[i],s=[],l=0;l<a.length;l++){var u=a[l-1],c=a[l],p=a[l+1],d=0===l?n:c.sub(u)._unit()._perp(),h=l===a.length-1?n:p.sub(c)._unit()._perp(),f=d._add(h)._unit(),g=f.x*h.x+f.y*h.y;f._mult(1/g),s.push(f._mult(e)._add(c))}o.push(s)}return o}(n,c*s)),function(t,e,o){for(var n=0;n<e.length;n++){var r=e[n];if(t.length>=3)for(var i=0;i<r.length;i++)if(Oi(t,r[i]))return!0;if(wi(t,r,o))return!0}return!1}(l,n,u)},e.prototype.isTileClipped=function(){return!0},e}(rr);function hs(t,e){return e>0?e+2*t:t}var fs=lr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),gs=lr([{name:"a_projected_pos",components:3,type:"Float32"}],4),ys=(lr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),lr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),vs=(lr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),lr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),ms=lr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);function Cs(t,e,o){return t.sections.forEach(function(t){t.text=function(t,e,o){var n=e.layout.get("text-transform").evaluate(o,{});return"uppercase"===n?t=t.toLocaleUpperCase():"lowercase"===n&&(t=t.toLocaleLowerCase()),Hn.applyArabicShaping&&(t=Hn.applyArabicShaping(t)),t}(t.text,e,o)}),t}lr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"}]),lr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"radialTextOffset"}]),lr([{type:"Float32",name:"offsetX"}]),lr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var _s={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},ws=function(t){function e(e,o,n,r){t.call(this,e,o),this.angle=n,void 0!==r&&(this.segment=r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(r);xn("Anchor",ws);var bs=256;function Ss(t,e){var o=e.expression;if("constant"===o.kind)return{kind:"constant",layoutSize:o.evaluate(new jn(t+1))};if("source"===o.kind)return{kind:"source"};for(var n=o.zoomStops,r=o.interpolationType,i=0;i<n.length&&n[i]<=t;)i++;for(var a=i=Math.max(0,i-1);a<n.length&&n[a]<t+1;)a++;a=Math.min(n.length-1,a);var s=n[i],l=n[a];return"composite"===o.kind?{kind:"composite",minZoom:s,maxZoom:l,interpolationType:r}:{kind:"camera",minZoom:s,maxZoom:l,minSize:o.evaluate(new jn(s)),maxSize:o.evaluate(new jn(l)),interpolationType:r}}function Es(t,e,o){var n=e.uSize,r=e.uSizeT,i=o.lowerSize,a=o.upperSize;return"source"===t.kind?i/bs:"composite"===t.kind?Re(i/bs,a/bs,r):n}function xs(t,e){var o=0,n=0;if("constant"===t.kind)n=t.layoutSize;else if("source"!==t.kind){var r=t.interpolationType,i=t.minZoom,a=t.maxZoom,s=r?u(Ze.interpolationFactor(r,e,i,a),0,1):0;"camera"===t.kind?n=Re(t.minSize,t.maxSize,s):o=s}return{uSizeT:o,uSize:n}}var Ts=Object.freeze({getSizeData:Ss,evaluateSizeForFeature:Es,evaluateSizeForZoom:xs,SIZE_PACK_FACTOR:bs}),Os=ja.VectorTileFeature.types,Rs=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ps(t,e,o,n,r,i,a,s){t.emplaceBack(e,o,Math.round(32*n),Math.round(32*r),i,a,s?s[0]:0,s?s[1]:0)}function As(t,e,o){t.emplaceBack(e.x,e.y,o),t.emplaceBack(e.x,e.y,o),t.emplaceBack(e.x,e.y,o),t.emplaceBack(e.x,e.y,o)}var Ds=function(t){this.layoutVertexArray=new gr,this.indexArray=new Tr,this.programConfigurations=t,this.segments=new Ur,this.dynamicLayoutVertexArray=new yr,this.opacityVertexArray=new vr,this.placedSymbolArray=new Lr};Ds.prototype.upload=function(t,e,o,n){o&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,fs.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,gs.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,Rs,!0),this.opacityVertexBuffer.itemSize=1),(o||n)&&this.programConfigurations.upload(t)},Ds.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},xn("SymbolBuffers",Ds);var Ms=function(t,e,o){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new o,this.segments=new Ur,this.collisionVertexArray=new _r};Ms.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,ys.members,!0)},Ms.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},xn("CollisionBuffers",Ms);var Is=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(function(t){return t.id}),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1;var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ss(this.zoom,e["text-size"]),this.iconSizeData=Ss(this.zoom,e["icon-size"]);var o=this.layers[0].layout,n=o.get("symbol-sort-key"),r=o.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==r&&void 0!==n.constantOr(1);var i="viewport-y"===r||"auto"===r&&!this.sortFeaturesByKey;this.sortFeaturesByY=i&&(o.get("text-allow-overlap")||o.get("icon-allow-overlap")||o.get("text-ignore-placement")||o.get("icon-ignore-placement")),this.stateDependentLayerIds=this.layers.filter(function(t){return t.isStateDependent()}).map(function(t){return t.id}),this.sourceID=t.sourceID};Is.prototype.createArrays=function(){this.text=new Ds(new ci(fs.members,this.layers,this.zoom,function(t){return/^text/.test(t)})),this.icon=new Ds(new ci(fs.members,this.layers,this.zoom,function(t){return/^icon/.test(t)})),this.collisionBox=new Ms(Cr,vs.members,Or),this.collisionCircle=new Ms(Cr,ms.members,Tr),this.glyphOffsetArray=new Gr,this.lineVertexArray=new Br,this.symbolInstances=new Nr},Is.prototype.calculateGlyphDependencies=function(t,e,o,n){for(var r=0;r<t.length;r++)if(e[t.charCodeAt(r)]=!0,o&&n){var i=_s[t.charAt(r)];i&&(e[i.charCodeAt(0)]=!0)}},Is.prototype.populate=function(t,e){var o=this.layers[0],n=o.layout,r=n.get("text-font"),i=n.get("text-field"),a=n.get("icon-image"),s=("constant"!==i.value.kind||i.value.value.toString().length>0)&&("constant"!==r.value.kind||r.value.value.length>0),l="constant"!==a.value.kind||a.value.value&&a.value.value.length>0,u=n.get("symbol-sort-key");if(this.features=[],s||l){for(var c=e.iconDependencies,p=e.glyphDependencies,d=new jn(this.zoom),h=0,f=t;h<f.length;h+=1){var g=f[h],y=g.feature,v=g.index,m=g.sourceLayerIndex;if(o._featureFilter(d,y)){var C=void 0;if(s){var _=o.getValueAndResolveTokens("text-field",y);C=Cs(_ instanceof ae?_:ae.fromString(_),o,y)}var w=void 0;if(l&&(w=o.getValueAndResolveTokens("icon-image",y)),C||w){var b=this.sortFeaturesByKey?u.evaluate(y,{}):void 0,S={text:C,icon:w,index:v,sourceLayerIndex:m,geometry:gi(y),properties:y.properties,type:Os[y.type],sortKey:b};if(void 0!==y.id&&(S.id=y.id),this.features.push(S),w&&(c[w]=!0),C)for(var E=r.evaluate(y,{}).join(","),x="map"===n.get("text-rotation-alignment")&&"point"!==n.get("symbol-placement"),T=0,O=C.sections;T<O.length;T+=1){var R=O[T],P=Dn(C.toString()),A=R.fontStack||E,D=p[A]=p[A]||{};this.calculateGlyphDependencies(R.text,D,x,P)}}}}"line"===n.get("symbol-placement")&&(this.features=function(t){var e={},o={},n=[],r=0;function i(e){n.push(t[e]),r++}function a(t,e,r){var i=o[t];return delete o[t],o[e]=i,n[i].geometry[0].pop(),n[i].geometry[0]=n[i].geometry[0].concat(r[0]),i}function s(t,o,r){var i=e[o];return delete e[o],e[t]=i,n[i].geometry[0].shift(),n[i].geometry[0]=r[0].concat(n[i].geometry[0]),i}function l(t,e,o){var n=o?e[0][e[0].length-1]:e[0][0];return t+":"+n.x+":"+n.y}for(var u=0;u<t.length;u++){var c=t[u],p=c.geometry,d=c.text?c.text.toString():null;if(d){var h=l(d,p),f=l(d,p,!0);if(h in o&&f in e&&o[h]!==e[f]){var g=s(h,f,p),y=a(h,f,n[g].geometry);delete e[h],delete o[f],o[l(d,n[y].geometry,!0)]=y,n[g].geometry=null}else h in o?a(h,f,p):f in e?s(h,f,p):(i(u),e[h]=r-1,o[f]=r-1)}else i(u)}return n.filter(function(t){return t.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(t,e){return t.sortKey-e.sortKey})}},Is.prototype.update=function(t,e,o){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,o),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,o))},Is.prototype.isEmpty=function(){return 0===this.symbolInstances.length},Is.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Is.prototype.upload=function(t){this.uploaded||(this.collisionBox.upload(t),this.collisionCircle.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Is.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},Is.prototype.addToLineVertexArray=function(t,e){var o=this.lineVertexArray.length;if(void 0!==t.segment){for(var n=t.dist(e[t.segment+1]),r=t.dist(e[t.segment]),i={},a=t.segment+1;a<e.length;a++)i[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:n},a<e.length-1&&(n+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)i[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:r},s>0&&(r+=e[s-1].dist(e[s]));for(var l=0;l<e.length;l++){var u=i[l];this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}}return{lineStartIndex:o,lineLength:this.lineVertexArray.length-o}},Is.prototype.addSymbols=function(t,e,o,n,r,i,a,s,l,u){for(var c=t.indexArray,p=t.layoutVertexArray,d=t.dynamicLayoutVertexArray,h=t.segments.prepareSegment(4*e.length,t.layoutVertexArray,t.indexArray,i.sortKey),f=this.glyphOffsetArray.length,g=h.vertexLength,y=0,v=e;y<v.length;y+=1){var m=v[y],C=m.tl,_=m.tr,w=m.bl,b=m.br,S=m.tex,E=h.vertexLength,x=m.glyphOffset[1];Ps(p,s.x,s.y,C.x,x+C.y,S.x,S.y,o),Ps(p,s.x,s.y,_.x,x+_.y,S.x+S.w,S.y,o),Ps(p,s.x,s.y,w.x,x+w.y,S.x,S.y+S.h,o),Ps(p,s.x,s.y,b.x,x+b.y,S.x+S.w,S.y+S.h,o),As(d,s,0),c.emplaceBack(E,E+1,E+2),c.emplaceBack(E+1,E+2,E+3),h.vertexLength+=4,h.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(m.glyphOffset[0])}t.placedSymbolArray.emplaceBack(s.x,s.y,f,this.glyphOffsetArray.length-f,g,l,u,s.segment,o?o[0]:0,o?o[1]:0,n[0],n[1],a,!1,0),t.programConfigurations.populatePaintArrays(t.layoutVertexArray.length,i,i.index,{})},Is.prototype._addCollisionDebugVertex=function(t,e,o,n,r,i){return e.emplaceBack(0,0),t.emplaceBack(o.x,o.y,n,r,Math.round(i.x),Math.round(i.y))},Is.prototype.addCollisionDebugVertices=function(t,e,o,n,i,a,s,l){var u=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),c=u.vertexLength,p=i.layoutVertexArray,d=i.collisionVertexArray,h=s.anchorX,f=s.anchorY;if(this._addCollisionDebugVertex(p,d,a,h,f,new r(t,e)),this._addCollisionDebugVertex(p,d,a,h,f,new r(o,e)),this._addCollisionDebugVertex(p,d,a,h,f,new r(o,n)),this._addCollisionDebugVertex(p,d,a,h,f,new r(t,n)),u.vertexLength+=4,l){var g=i.indexArray;g.emplaceBack(c,c+1,c+2),g.emplaceBack(c,c+2,c+3),u.primitiveLength+=2}else{var y=i.indexArray;y.emplaceBack(c,c+1),y.emplaceBack(c+1,c+2),y.emplaceBack(c+2,c+3),y.emplaceBack(c+3,c),u.primitiveLength+=4}},Is.prototype.addDebugCollisionBoxes=function(t,e,o){for(var n=t;n<e;n++){var r=this.collisionBoxArray.get(n),i=r.x1,a=r.y1,s=r.x2,l=r.y2,u=r.radius>0;this.addCollisionDebugVertices(i,a,s,l,u?this.collisionCircle:this.collisionBox,r.anchorPoint,o,u)}},Is.prototype.generateCollisionDebugBuffers=function(){for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e)}},Is.prototype._deserializeCollisionBoxesForSymbol=function(t,e,o,n,r){for(var i={},a=e;a<o;a++){var s=t.get(a);if(0===s.radius){i.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY},i.textFeatureIndex=s.featureIndex;break}i.textCircles||(i.textCircles=[],i.textFeatureIndex=s.featureIndex),i.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var l=n;l<r;l++){var u=t.get(l);if(0===u.radius){i.iconBox={x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2,anchorPointX:u.anchorPointX,anchorPointY:u.anchorPointY},i.iconFeatureIndex=u.featureIndex;break}}return i},Is.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var o=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,o.textBoxStartIndex,o.textBoxEndIndex,o.iconBoxStartIndex,o.iconBoxEndIndex))}},Is.prototype.hasTextData=function(){return this.text.segments.get().length>0},Is.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Is.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},Is.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},Is.prototype.addIndicesForPlacedTextSymbol=function(t){for(var e=this.text.placedSymbolArray.get(t),o=e.vertexStartIndex+4*e.numGlyphs,n=e.vertexStartIndex;n<o;n+=4)this.text.indexArray.emplaceBack(n,n+1,n+2),this.text.indexArray.emplaceBack(n+1,n+2,n+3)},Is.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),o=Math.cos(t),n=[],r=[],i=[],a=0;a<this.symbolInstances.length;++a){i.push(a);var s=this.symbolInstances.get(a);n.push(0|Math.round(e*s.anchorX+o*s.anchorY)),r.push(s.featureIndex)}return i.sort(function(t,e){return n[t]-n[e]||r[e]-r[t]}),i},Is.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var o=0,n=this.symbolInstanceIndexes;o<n.length;o+=1){var r=n[o],i=this.symbolInstances.get(r);this.featureSortOrder.push(i.featureIndex),[i.rightJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.leftJustifiedTextSymbolIndex].forEach(function(t,o,n){t>=0&&n.indexOf(t)===o&&e.addIndicesForPlacedTextSymbol(t)}),i.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(i.verticalPlacedTextSymbolIndex);var a=this.icon.placedSymbolArray.get(r);if(a.numGlyphs){var s=a.vertexStartIndex;this.icon.indexArray.emplaceBack(s,s+1,s+2),this.icon.indexArray.emplaceBack(s+1,s+2,s+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},xn("SymbolBucket",Is,{omit:["layers","collisionBoxArray","features","compareText"]}),Is.MAX_GLYPHS=65535,Is.addDynamicAttributes=As;var Ls=new nr({"symbol-placement":new Qn(Lt.layout_symbol["symbol-placement"]),"symbol-spacing":new Qn(Lt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Qn(Lt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new $n(Lt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Qn(Lt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Qn(Lt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Qn(Lt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Qn(Lt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Qn(Lt.layout_symbol["icon-rotation-alignment"]),"icon-size":new $n(Lt.layout_symbol["icon-size"]),"icon-text-fit":new Qn(Lt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Qn(Lt.layout_symbol["icon-text-fit-padding"]),"icon-image":new $n(Lt.layout_symbol["icon-image"]),"icon-rotate":new $n(Lt.layout_symbol["icon-rotate"]),"icon-padding":new Qn(Lt.layout_symbol["icon-padding"]),"icon-keep-upright":new Qn(Lt.layout_symbol["icon-keep-upright"]),"icon-offset":new $n(Lt.layout_symbol["icon-offset"]),"icon-anchor":new $n(Lt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Qn(Lt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Qn(Lt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Qn(Lt.layout_symbol["text-rotation-alignment"]),"text-field":new $n(Lt.layout_symbol["text-field"]),"text-font":new $n(Lt.layout_symbol["text-font"]),"text-size":new $n(Lt.layout_symbol["text-size"]),"text-max-width":new $n(Lt.layout_symbol["text-max-width"]),"text-line-height":new Qn(Lt.layout_symbol["text-line-height"]),"text-letter-spacing":new $n(Lt.layout_symbol["text-letter-spacing"]),"text-justify":new $n(Lt.layout_symbol["text-justify"]),"text-radial-offset":new $n(Lt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Qn(Lt.layout_symbol["text-variable-anchor"]),"text-anchor":new $n(Lt.layout_symbol["text-anchor"]),"text-max-angle":new Qn(Lt.layout_symbol["text-max-angle"]),"text-rotate":new $n(Lt.layout_symbol["text-rotate"]),"text-padding":new Qn(Lt.layout_symbol["text-padding"]),"text-keep-upright":new Qn(Lt.layout_symbol["text-keep-upright"]),"text-transform":new $n(Lt.layout_symbol["text-transform"]),"text-offset":new $n(Lt.layout_symbol["text-offset"]),"text-allow-overlap":new Qn(Lt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Qn(Lt.layout_symbol["text-ignore-placement"]),"text-optional":new Qn(Lt.layout_symbol["text-optional"])}),Fs={paint:new nr({"icon-opacity":new $n(Lt.paint_symbol["icon-opacity"]),"icon-color":new $n(Lt.paint_symbol["icon-color"]),"icon-halo-color":new $n(Lt.paint_symbol["icon-halo-color"]),"icon-halo-width":new $n(Lt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new $n(Lt.paint_symbol["icon-halo-blur"]),"icon-translate":new Qn(Lt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Qn(Lt.paint_symbol["icon-translate-anchor"]),"text-opacity":new $n(Lt.paint_symbol["text-opacity"]),"text-color":new $n(Lt.paint_symbol["text-color"]),"text-halo-color":new $n(Lt.paint_symbol["text-halo-color"]),"text-halo-width":new $n(Lt.paint_symbol["text-halo-width"]),"text-halo-blur":new $n(Lt.paint_symbol["text-halo-blur"]),"text-translate":new Qn(Lt.paint_symbol["text-translate"]),"text-translate-anchor":new Qn(Lt.paint_symbol["text-translate-anchor"])}),layout:Ls},Ns=function(t){function e(e){t.call(this,e,Fs)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.recalculate=function(e){t.prototype.recalculate.call(this,e),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},e.prototype.getValueAndResolveTokens=function(t,e){var o,n=this.layout.get(t).evaluate(e,{}),r=this._unevaluatedLayout._values[t];return r.isDataDriven()||Io(r.value)?n:(o=e.properties,n.replace(/{([^{}]+)}/g,function(t,e){return e in o?String(o[e]):""}))},e.prototype.createBucket=function(t){return new Is(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e}(rr),ks={paint:new nr({"background-color":new Qn(Lt.paint_background["background-color"]),"background-pattern":new er(Lt.paint_background["background-pattern"]),"background-opacity":new Qn(Lt.paint_background["background-opacity"])})},Gs=function(t){function e(e){t.call(this,e,ks)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(rr),Vs={paint:new nr({"raster-opacity":new Qn(Lt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Qn(Lt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Qn(Lt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Qn(Lt.paint_raster["raster-brightness-max"]),"raster-saturation":new Qn(Lt.paint_raster["raster-saturation"]),"raster-contrast":new Qn(Lt.paint_raster["raster-contrast"]),"raster-resampling":new Qn(Lt.paint_raster["raster-resampling"]),"raster-fade-duration":new Qn(Lt.paint_raster["raster-fade-duration"])})},Bs=function(t){function e(e){t.call(this,e,Vs)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(rr),zs=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},e}(rr),Hs={circle:Vi,heatmap:Zi,hillshade:Ji,fill:Ia,"fill-extrusion":Ja,line:ds,symbol:Ns,background:Gs,raster:Bs};function js(t){for(var e=0,o=0,n=0,r=t;n<r.length;n+=1){var i=r[n];e+=i.w*i.h,o=Math.max(o,i.w)}t.sort(function(t,e){return e.h-t.h});for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),o),h:1/0}],s=0,l=0,u=0,c=t;u<c.length;u+=1)for(var p=c[u],d=a.length-1;d>=0;d--){var h=a[d];if(!(p.w>h.w||p.h>h.h)){if(p.x=h.x,p.y=h.y,l=Math.max(l,p.y+p.h),s=Math.max(s,p.x+p.w),p.w===h.w&&p.h===h.h){var f=a.pop();d<a.length&&(a[d]=f)}else p.h===h.h?(h.x+=p.w,h.w-=p.w):p.w===h.w?(h.y+=p.h,h.h-=p.h):(a.push({x:h.x+p.w,y:h.y,w:h.w-p.w,h:p.h}),h.y+=p.h,h.h-=p.h);break}}return{w:s,h:l,fill:e/(s*l)||0}}var Us=function(t,e){var o=e.pixelRatio,n=e.version;this.paddedRect=t,this.pixelRatio=o,this.version=n},Ws={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Ws.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Ws.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Ws.tlbr.get=function(){return this.tl.concat(this.br)},Ws.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Us.prototype,Ws);var Ks=function(t,e){var o={},n={};this.haveRenderCallbacks=[];var r=[];this.addImages(t,o,r),this.addImages(e,n,r);var i=js(r),a=i.w,s=i.h,l=new Ki({width:a||1,height:s||1});for(var u in t){var c=t[u],p=o[u].paddedRect;Ki.copy(c.data,l,{x:0,y:0},{x:p.x+1,y:p.y+1},c.data)}for(var d in e){var h=e[d],f=n[d].paddedRect,g=f.x+1,y=f.y+1,v=h.data.width,m=h.data.height;Ki.copy(h.data,l,{x:0,y:0},{x:g,y:y},h.data),Ki.copy(h.data,l,{x:0,y:m-1},{x:g,y:y-1},{width:v,height:1}),Ki.copy(h.data,l,{x:0,y:0},{x:g,y:y+m},{width:v,height:1}),Ki.copy(h.data,l,{x:v-1,y:0},{x:g-1,y:y},{width:1,height:m}),Ki.copy(h.data,l,{x:0,y:0},{x:g+v,y:y},{width:1,height:m})}this.image=l,this.iconPositions=o,this.patternPositions=n};Ks.prototype.addImages=function(t,e,o){for(var n in t){var r=t[n],i={x:0,y:0,w:r.data.width+2,h:r.data.height+2};o.push(i),e[n]=new Us(i,r),r.hasRenderCallback&&this.haveRenderCallbacks.push(n)}},Ks.prototype.patchUpdatedImages=function(t,e){for(var o in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[o],t.getImage(o),e),this.patchUpdatedImage(this.patternPositions[o],t.getImage(o),e)},Ks.prototype.patchUpdatedImage=function(t,e,o){if(t&&e&&t.version!==e.version){t.version=e.version;var n=t.tl,r=n[0],i=n[1];o.update(e.data,void 0,{x:r,y:i})}},xn("ImagePosition",Us),xn("ImageAtlas",Ks);var qs=self.HTMLImageElement,Ys=self.HTMLCanvasElement,Zs=self.HTMLVideoElement,Xs=self.ImageData,Js=function(t,e,o,n){this.context=t,this.format=o,this.texture=t.gl.createTexture(),this.update(e,n)};Js.prototype.update=function(t,e,o){var n=t.width,r=t.height,i=!(this.size&&this.size[0]===n&&this.size[1]===r||o),a=this.context,s=a.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),i)this.size=[n,r],t instanceof qs||t instanceof Ys||t instanceof Zs||t instanceof Xs?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,n,r,0,this.format,s.UNSIGNED_BYTE,t.data);else{var l=o||{x:0,y:0},u=l.x,c=l.y;t instanceof qs||t instanceof Ys||t instanceof Zs||t instanceof Xs?s.texSubImage2D(s.TEXTURE_2D,0,u,c,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,u,c,n,r,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},Js.prototype.bind=function(t,e,o){var n=this.context.gl;n.bindTexture(n.TEXTURE_2D,this.texture),o!==n.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(o=n.LINEAR),t!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,o||t),this.filter=t),e!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,e),this.wrap=e)},Js.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Js.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Qs=function(t,e,o,n,r){var i,a,s=8*r-n-1,l=(1<<s)-1,u=l>>1,c=-7,p=o?r-1:0,d=o?-1:1,h=t[e+p];for(p+=d,i=h&(1<<-c)-1,h>>=-c,c+=s;c>0;i=256*i+t[e+p],p+=d,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=n;c>0;a=256*a+t[e+p],p+=d,c-=8);if(0===i)i=1-u;else{if(i===l)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),i-=u}return(h?-1:1)*a*Math.pow(2,i-n)},$s=function(t,e,o,n,r,i){var a,s,l,u=8*i-r-1,c=(1<<u)-1,p=c>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,f=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+p>=1?d/l:d*Math.pow(2,1-p))*l>=2&&(a++,l/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(e*l-1)*Math.pow(2,r),a+=p):(s=e*Math.pow(2,p-1)*Math.pow(2,r),a=0));r>=8;t[o+h]=255&s,h+=f,s/=256,r-=8);for(a=a<<r|s,u+=r;u>0;t[o+h]=255&a,h+=f,a/=256,u-=8);t[o+h-f]|=128*g},tl=el;function el(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function ol(t){return t.type===el.Bytes?t.readVarint()+t.pos:t.pos+1}function nl(t,e,o){return o?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function rl(t,e,o){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));o.realloc(n);for(var r=o.pos-1;r>=t;r--)o.buf[r+n]=o.buf[r]}function il(t,e){for(var o=0;o<t.length;o++)e.writeVarint(t[o])}function al(t,e){for(var o=0;o<t.length;o++)e.writeSVarint(t[o])}function sl(t,e){for(var o=0;o<t.length;o++)e.writeFloat(t[o])}function ll(t,e){for(var o=0;o<t.length;o++)e.writeDouble(t[o])}function ul(t,e){for(var o=0;o<t.length;o++)e.writeBoolean(t[o])}function cl(t,e){for(var o=0;o<t.length;o++)e.writeFixed32(t[o])}function pl(t,e){for(var o=0;o<t.length;o++)e.writeSFixed32(t[o])}function dl(t,e){for(var o=0;o<t.length;o++)e.writeFixed64(t[o])}function hl(t,e){for(var o=0;o<t.length;o++)e.writeSFixed64(t[o])}function fl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function gl(t,e,o){t[o]=e,t[o+1]=e>>>8,t[o+2]=e>>>16,t[o+3]=e>>>24}function yl(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}el.Varint=0,el.Fixed64=1,el.Bytes=2,el.Fixed32=5,el.prototype={destroy:function(){this.buf=null},readFields:function(t,e,o){for(o=o||this.length;this.pos<o;){var n=this.readVarint(),r=n>>3,i=this.pos;this.type=7&n,t(r,e,this),this.pos===i&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=fl(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=yl(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=fl(this.buf,this.pos)+4294967296*fl(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=fl(this.buf,this.pos)+4294967296*yl(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Qs(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Qs(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,o,n=this.buf;return e=127&(o=n[this.pos++]),o<128?e:(e|=(127&(o=n[this.pos++]))<<7,o<128?e:(e|=(127&(o=n[this.pos++]))<<14,o<128?e:(e|=(127&(o=n[this.pos++]))<<21,o<128?e:function(t,e,o){var n,r,i=o.buf;if(n=(112&(r=i[o.pos++]))>>4,r<128)return nl(t,n,e);if(n|=(127&(r=i[o.pos++]))<<3,r<128)return nl(t,n,e);if(n|=(127&(r=i[o.pos++]))<<10,r<128)return nl(t,n,e);if(n|=(127&(r=i[o.pos++]))<<17,r<128)return nl(t,n,e);if(n|=(127&(r=i[o.pos++]))<<24,r<128)return nl(t,n,e);if(n|=(1&(r=i[o.pos++]))<<31,r<128)return nl(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(o=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,o){for(var n="",r=e;r<o;){var i,a,s,l=t[r],u=null,c=l>239?4:l>223?3:l>191?2:1;if(r+c>o)break;1===c?l<128&&(u=l):2===c?128==(192&(i=t[r+1]))&&(u=(31&l)<<6|63&i)<=127&&(u=null):3===c?(i=t[r+1],a=t[r+2],128==(192&i)&&128==(192&a)&&((u=(15&l)<<12|(63&i)<<6|63&a)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(i=t[r+1],a=t[r+2],s=t[r+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&i)<<12|(63&a)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,n+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),n+=String.fromCharCode(u),r+=c}return n}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==el.Bytes)return t.push(this.readVarint(e));var o=ol(this);for(t=t||[];this.pos<o;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==el.Bytes)return t.push(this.readSVarint());var e=ol(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==el.Bytes)return t.push(this.readBoolean());var e=ol(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==el.Bytes)return t.push(this.readFloat());var e=ol(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==el.Bytes)return t.push(this.readDouble());var e=ol(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==el.Bytes)return t.push(this.readFixed32());var e=ol(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==el.Bytes)return t.push(this.readSFixed32());var e=ol(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==el.Bytes)return t.push(this.readFixed64());var e=ol(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==el.Bytes)return t.push(this.readSFixed64());var e=ol(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===el.Varint)for(;this.buf[this.pos++]>127;);else if(e===el.Bytes)this.pos=this.readVarint()+this.pos;else if(e===el.Fixed32)this.pos+=4;else{if(e!==el.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var o=new Uint8Array(e);o.set(this.buf),this.buf=o,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),gl(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),gl(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),gl(this.buf,-1&t,this.pos),gl(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),gl(this.buf,-1&t,this.pos),gl(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var o,n;if(t>=0?(o=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(o=~(-t%4294967296))?o=o+1|0:(o=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,o){o.buf[o.pos++]=127&t|128,t>>>=7,o.buf[o.pos++]=127&t|128,t>>>=7,o.buf[o.pos++]=127&t|128,t>>>=7,o.buf[o.pos++]=127&t|128,t>>>=7,o.buf[o.pos]=127&t}(o,0,e),function(t,e){var o=(7&t)<<4;e.buf[e.pos++]|=o|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,o){for(var n,r,i=0;i<e.length;i++){if((n=e.charCodeAt(i))>55295&&n<57344){if(!r){n>56319||i+1===e.length?(t[o++]=239,t[o++]=191,t[o++]=189):r=n;continue}if(n<56320){t[o++]=239,t[o++]=191,t[o++]=189,r=n;continue}n=r-55296<<10|n-56320|65536,r=null}else r&&(t[o++]=239,t[o++]=191,t[o++]=189,r=null);n<128?t[o++]=n:(n<2048?t[o++]=n>>6|192:(n<65536?t[o++]=n>>12|224:(t[o++]=n>>18|240,t[o++]=n>>12&63|128),t[o++]=n>>6&63|128),t[o++]=63&n|128)}return o}(this.buf,t,this.pos);var o=this.pos-e;o>=128&&rl(e,o,this),this.pos=e-1,this.writeVarint(o),this.pos+=o},writeFloat:function(t){this.realloc(4),$s(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),$s(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var o=0;o<e;o++)this.buf[this.pos++]=t[o]},writeRawMessage:function(t,e){this.pos++;var o=this.pos;t(e,this);var n=this.pos-o;n>=128&&rl(o,n,this),this.pos=o-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,o){this.writeTag(t,el.Bytes),this.writeRawMessage(e,o)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,il,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,al,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,ul,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,sl,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,ll,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,cl,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,pl,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,dl,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,hl,e)},writeBytesField:function(t,e){this.writeTag(t,el.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,el.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,el.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,el.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,el.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,el.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,el.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,el.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,el.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,el.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};var vl=3;function ml(t,e,o){1===t&&o.readMessage(Cl,e)}function Cl(t,e,o){if(3===t){var n=o.readMessage(_l,{}),r=n.id,i=n.bitmap,a=n.width,s=n.height,l=n.left,u=n.top,c=n.advance;e.push({id:r,bitmap:new Wi({width:a+2*vl,height:s+2*vl},i),metrics:{width:a,height:s,left:l,top:u,advance:c}})}}function _l(t,e,o){1===t?e.id=o.readVarint():2===t?e.bitmap=o.readBytes():3===t?e.width=o.readVarint():4===t?e.height=o.readVarint():5===t?e.left=o.readSVarint():6===t?e.top=o.readSVarint():7===t&&(e.advance=o.readVarint())}var wl=vl,bl=function(t,e,o){this.target=t,this.parent=e,this.mapId=o,this.callbacks={},this.callbackID=0,y(["receive"],this),this.target.addEventListener("message",this.receive,!1)};function Sl(t,e,o){var n=2*Math.PI*6378137/256/Math.pow(2,o);return[t*n-2*Math.PI*6378137/2,e*n-2*Math.PI*6378137/2]}bl.prototype.send=function(t,e,o,n){var r=this,i=o?this.mapId+":"+this.callbackID++:null;o&&(this.callbacks[i]=o);var a=[];if(this.target.postMessage({targetMapId:n,sourceMapId:this.mapId,type:t,id:String(i),data:On(e,a)},a),o)return{cancel:function(){r.callbacks[i]=null,r.target.postMessage({targetMapId:n,sourceMapId:r.mapId,type:"<cancel>",id:String(i)})}}},bl.prototype.receive=function(t){var e,o=this,n=t.data,r=n.id;if(!n.targetMapId||this.mapId===n.targetMapId){var i=function(t,e){delete o.callbacks[r];var n=[];o.target.postMessage({sourceMapId:o.mapId,type:"<response>",id:String(r),error:t?On(t):null,data:On(e,n)},n)};if("<response>"===n.type||"<cancel>"===n.type)e=this.callbacks[n.id],delete this.callbacks[n.id],e&&n.error?e(Rn(n.error)):e&&e(null,Rn(n.data));else if(void 0!==n.id&&this.parent[n.type]){this.callbacks[n.id]=null;var a=this.parent[n.type](n.sourceMapId,Rn(n.data),i);a&&null===this.callbacks[n.id]&&(this.callbacks[n.id]=a.cancel)}else if(void 0!==n.id&&this.parent.getWorkerSource){var s=n.type.split("."),l=Rn(n.data);this.parent.getWorkerSource(n.sourceMapId,s[0],l.source)[s[1]](l,i)}else this.parent[n.type](Rn(n.data))}},bl.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};var El=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};El.prototype.setNorthEast=function(t){return this._ne=t instanceof xl?new xl(t.lng,t.lat):xl.convert(t),this},El.prototype.setSouthWest=function(t){return this._sw=t instanceof xl?new xl(t.lng,t.lat):xl.convert(t),this},El.prototype.extend=function(t){var e,o,n=this._sw,r=this._ne;if(t instanceof xl)e=t,o=t;else{if(!(t instanceof El))return Array.isArray(t)?t.every(Array.isArray)?this.extend(El.convert(t)):this.extend(xl.convert(t)):this;if(e=t._sw,o=t._ne,!e||!o)return this}return n||r?(n.lng=Math.min(e.lng,n.lng),n.lat=Math.min(e.lat,n.lat),r.lng=Math.max(o.lng,r.lng),r.lat=Math.max(o.lat,r.lat)):(this._sw=new xl(e.lng,e.lat),this._ne=new xl(o.lng,o.lat)),this},El.prototype.getCenter=function(){return new xl((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},El.prototype.getSouthWest=function(){return this._sw},El.prototype.getNorthEast=function(){return this._ne},El.prototype.getNorthWest=function(){return new xl(this.getWest(),this.getNorth())},El.prototype.getSouthEast=function(){return new xl(this.getEast(),this.getSouth())},El.prototype.getWest=function(){return this._sw.lng},El.prototype.getSouth=function(){return this._sw.lat},El.prototype.getEast=function(){return this._ne.lng},El.prototype.getNorth=function(){return this._ne.lat},El.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},El.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},El.prototype.isEmpty=function(){return!(this._sw&&this._ne)},El.convert=function(t){return!t||t instanceof El?t:new El(t)};var xl=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};function Tl(t){return 2*Math.PI*6378137*Math.cos(t*Math.PI/180)}function Ol(t){return(180+t)/360}function Rl(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Pl(t,e){return t/Tl(e)}function Al(t){var e=180-360*t;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}xl.prototype.wrap=function(){return new xl(c(this.lng,-180,180),this.lat)},xl.prototype.toArray=function(){return[this.lng,this.lat]},xl.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},xl.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,o=e/Math.cos(Math.PI/180*this.lat);return new El(new xl(this.lng-o,this.lat-e),new xl(this.lng+o,this.lat+e))},xl.convert=function(t){if(t instanceof xl)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new xl(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new xl(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Dl=function(t,e,o){void 0===o&&(o=0),this.x=+t,this.y=+e,this.z=+o};Dl.fromLngLat=function(t,e){void 0===e&&(e=0);var o=xl.convert(t);return new Dl(Ol(o.lng),Rl(o.lat),Pl(e,o.lat))},Dl.prototype.toLngLat=function(){return new xl(360*this.x-180,Al(this.y))},Dl.prototype.toAltitude=function(){return this.z*Tl(Al(this.y))};var Ml=function(t,e,o){this.z=t,this.x=e,this.y=o,this.key=Fl(0,t,e,o)};Ml.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},Ml.prototype.url=function(t,e){var o,n,r,i,a,s=(o=this.x,n=this.y,r=this.z,i=Sl(256*o,256*(n=Math.pow(2,r)-n-1),r),a=Sl(256*(o+1),256*(n+1),r),i[0]+","+i[1]+","+a[0]+","+a[1]),l=function(t,e,o){for(var n,r="",i=t;i>0;i--)r+=(e&(n=1<<i-1)?1:0)+(o&n?2:0);return r}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",s)},Ml.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new r((t.x*e-this.x)*hi,(t.y*e-this.y)*hi)};var Il=function(t,e){this.wrap=t,this.canonical=e,this.key=Fl(t,e.z,e.x,e.y)},Ll=function(t,e,o,n,r){this.overscaledZ=t,this.wrap=e,this.canonical=new Ml(o,+n,+r),this.key=Fl(e,t,n,r)};function Fl(t,e,o,n){(t*=2)<0&&(t=-1*t-1);var r=1<<e;return 32*(r*r*t+r*n+o)+e}Ll.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Ll.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new Ll(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ll(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},Ll.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},Ll.prototype.children=function(t){if(this.overscaledZ>=t)return[new Ll(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,o=2*this.canonical.x,n=2*this.canonical.y;return[new Ll(e,this.wrap,e,o,n),new Ll(e,this.wrap,e,o+1,n),new Ll(e,this.wrap,e,o,n+1),new Ll(e,this.wrap,e,o+1,n+1)]},Ll.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Ll.prototype.wrapped=function(){return new Ll(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Ll.prototype.unwrapTo=function(t){return new Ll(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Ll.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Ll.prototype.toUnwrapped=function(){return new Il(this.wrap,this.canonical)},Ll.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Ll.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new Dl(t.x-this.wrap,t.y))},xn("CanonicalTileID",Ml),xn("OverscaledTileID",Ll,{omit:["posMatrix"]});var Nl=function(t,e,o){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(o&&"mapbox"!==o&&"terrarium"!==o)return b('"'+o+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var n=this.dim=e.height;this.stride=this.dim+2,this.data=new Int32Array(this.stride*this.stride);for(var r=e.data,i="terrarium"===o?this._unpackTerrarium:this._unpackMapbox,a=0;a<n;a++)for(var s=0;s<n;s++){var l=4*(a*n+s);this.set(s,a,i(r[l],r[l+1],r[l+2]))}for(var u=0;u<n;u++)this.set(-1,u,this.get(0,u)),this.set(n,u,this.get(n-1,u)),this.set(u,-1,this.get(u,0)),this.set(u,n,this.get(u,n-1));this.set(-1,-1,this.get(0,0)),this.set(n,-1,this.get(n-1,0)),this.set(-1,n,this.get(0,n-1)),this.set(n,n,this.get(n-1,n-1))};Nl.prototype.set=function(t,e,o){this.data[this._idx(t,e)]=o+65536},Nl.prototype.get=function(t,e){return this.data[this._idx(t,e)]-65536},Nl.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},Nl.prototype._unpackMapbox=function(t,e,o){return(256*t*256+256*e+o)/10-1e4},Nl.prototype._unpackTerrarium=function(t,e,o){return 256*t+e+o/256-32768},Nl.prototype.getPixels=function(){return new Ki({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Nl.prototype.backfillBorder=function(t,e,o){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var n=e*this.dim,r=e*this.dim+this.dim,i=o*this.dim,a=o*this.dim+this.dim;switch(e){case-1:n=r-1;break;case 1:r=n+1}switch(o){case-1:i=a-1;break;case 1:a=i+1}for(var s=-e*this.dim,l=-o*this.dim,u=i;u<a;u++)for(var c=n;c<r;c++)this.set(c,u,t.get(c+s,u+l))},xn("DEMData",Nl);var kl=lr([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Gl=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var o=t[e];this._stringToNumber[o]=e,this._numberToString[e]=o}};Gl.prototype.encode=function(t){return this._stringToNumber[t]},Gl.prototype.decode=function(t){return this._numberToString[t]};var Vl=function(t,e,o,n){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=o,t._y=n,this.properties=t.properties,null!=t.id&&(this.id=t.id)},Bl={geometry:{configurable:!0}};Bl.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Bl.geometry.set=function(t){this._geometry=t},Vl.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(Vl.prototype,Bl);var zl=function(){this.state={},this.stateChanges={},this.deletedStates={}};zl.prototype.updateState=function(t,e,o){var n=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][n]=this.stateChanges[t][n]||{},p(this.stateChanges[t][n],o),null===this.deletedStates[t])for(var r in this.deletedStates[t]={},this.state[t])r!==n&&(this.deletedStates[t][r]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][n])for(var i in this.deletedStates[t][n]={},this.state[t][n])o[i]||(this.deletedStates[t][n][i]=null);else for(var a in o)this.deletedStates[t]&&this.deletedStates[t][n]&&null===this.deletedStates[t][n][a]&&delete this.deletedStates[t][n][a]},zl.prototype.removeFeatureState=function(t,e,o){if(null!==this.deletedStates[t]){var n=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},o&&void 0!==e&&e>=0)null!==this.deletedStates[t][n]&&(this.deletedStates[t][n]=this.deletedStates[t][n]||{},this.deletedStates[t][n][o]=null);else if(void 0!==e&&e>=0)if(this.stateChanges[t]&&this.stateChanges[t][n])for(o in this.deletedStates[t][n]={},this.stateChanges[t][n])this.deletedStates[t][n][o]=null;else this.deletedStates[t][n]=null;else this.deletedStates[t]=null}},zl.prototype.getState=function(t,e){var o=String(e),n=this.state[t]||{},r=this.stateChanges[t]||{},i=p({},n[o],r[o]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var a=this.deletedStates[t][e];if(null===a)return{};for(var s in a)delete i[s]}return i},zl.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},zl.prototype.coalesceChanges=function(t,e){var o={};for(var n in this.stateChanges){this.state[n]=this.state[n]||{};var r={};for(var i in this.stateChanges[n])this.state[n][i]||(this.state[n][i]={}),p(this.state[n][i],this.stateChanges[n][i]),r[i]=this.state[n][i];o[n]=r}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a])for(var l in this.state[a])s[l]={},this.state[a][l]={};else for(var u in this.deletedStates[a]){if(null===this.deletedStates[a][u])this.state[a][u]={};else for(var c=0,d=Object.keys(this.deletedStates[a][u]);c<d.length;c+=1){var h=d[c];delete this.state[a][u][h]}s[u]=this.state[a][u]}o[a]=o[a]||{},p(o[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(o).length)for(var f in t)t[f].setFeatureState(o,e)};var Hl=function(t,e,o){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=e||new _n(hi,16,0),this.grid3D=new _n(hi,16,0),this.featureIndexArray=o||new Hr};function jl(t){for(var e=1/0,o=1/0,n=-1/0,r=-1/0,i=0,a=t;i<a.length;i+=1){var s=a[i];e=Math.min(e,s.x),o=Math.min(o,s.y),n=Math.max(n,s.x),r=Math.max(r,s.y)}return{minX:e,minY:o,maxX:n,maxY:r}}function Ul(t,e){return e-t}Hl.prototype.insert=function(t,e,o,n,r,i){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(o,n,r);for(var s=i?this.grid3D:this.grid,l=0;l<e.length;l++){for(var u=e[l],c=[1/0,1/0,-1/0,-1/0],p=0;p<u.length;p++){var d=u[p];c[0]=Math.min(c[0],d.x),c[1]=Math.min(c[1],d.y),c[2]=Math.max(c[2],d.x),c[3]=Math.max(c[3],d.y)}c[0]<hi&&c[1]<hi&&c[2]>=0&&c[3]>=0&&s.insert(a,c[0],c[1],c[2],c[3])}},Hl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new ja.VectorTile(new tl(this.rawTileData)).layers,this.sourceLayerCoder=new Gl(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Hl.prototype.query=function(t,e,o){var n=this;this.loadVTLayers();for(var i=t.params||{},a=hi/t.tileSize/t.scale,s=qo(i.filter),l=t.queryGeometry,u=t.queryPadding*a,c=jl(l),p=this.grid.query(c.minX-u,c.minY-u,c.maxX+u,c.maxY+u),d=jl(t.cameraQueryGeometry),h=0,f=this.grid3D.query(d.minX-u,d.minY-u,d.maxX+u,d.maxY+u,function(e,o,n,i){return function(t,e,o,n,i){for(var a=0,s=t;a<s.length;a+=1){var l=s[a];if(e<=l.x&&o<=l.y&&n>=l.x&&i>=l.y)return!0}var u=[new r(e,o),new r(e,i),new r(n,i),new r(n,o)];if(t.length>2)for(var c=0,p=u;c<p.length;c+=1)if(Oi(t,p[c]))return!0;for(var d=0;d<t.length-1;d++)if(Ri(t[d],t[d+1],u))return!0;return!1}(t.cameraQueryGeometry,e-u,o-u,n+u,i+u)});h<f.length;h+=1){var g=f[h];p.push(g)}p.sort(Ul);for(var y,v={},m=function(r){var u=p[r];if(u!==y){y=u;var c=n.featureIndexArray.get(u),d=null;n.loadMatchingFeature(v,c.bucketIndex,c.sourceLayerIndex,c.featureIndex,s,i.layers,e,function(e,r){d||(d=gi(e));var i={};return e.id&&(i=o.getState(r.sourceLayer||"_geojsonTileLayer",e.id)),r.queryIntersectsFeature(l,e,i,d,n.z,t.transform,a,t.pixelPosMatrix)})}},C=0;C<p.length;C++)m(C);return v},Hl.prototype.loadMatchingFeature=function(t,e,o,n,r,i,a,s){var l=this.bucketLayerIDs[e];if(!i||function(t,e){for(var o=0;o<t.length;o++)if(e.indexOf(t[o])>=0)return!0;return!1}(i,l)){var u=this.sourceLayerCoder.decode(o),c=this.vtLayers[u].feature(n);if(r(new jn(this.tileID.overscaledZ),c))for(var p=0;p<l.length;p++){var d=l[p];if(!(i&&i.indexOf(d)<0)){var h=a[d];if(h){var f=!s||s(c,h);if(f){var g=new Vl(c,this.z,this.x,this.y);g.layer=h.serialize();var y=t[d];void 0===y&&(y=t[d]=[]),y.push({featureIndex:n,feature:g,intersectionZ:f})}}}}}},Hl.prototype.lookupSymbolFeatures=function(t,e,o,n,r,i){var a={};this.loadVTLayers();for(var s=qo(n),l=0,u=t;l<u.length;l+=1){var c=u[l];this.loadMatchingFeature(a,e,o,c,s,r,i)}return a},Hl.prototype.hasLayer=function(t){for(var e=0,o=this.bucketLayerIDs;e<o.length;e+=1)for(var n=0,r=o[e];n<r.length;n+=1)if(t===r[n])return!0;return!1},xn("FeatureIndex",Hl,{omit:["rawTileData","sourceLayerCoder"]});var Wl=function(t,e){this.tileID=t,this.uid=h(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.expiredRequestCount=0,this.state="loading"};Wl.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<I.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},Wl.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Wl.prototype.loadVectorData=function(t,e,o){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var n in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var o={};if(!e)return o;for(var n=function(){var t=i[r],n=t.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==n.length){t.layers=n,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map(function(t){return n.filter(function(e){return e.id===t})[0]}));for(var a=0,s=n;a<s.length;a+=1){var l=s[a];o[l.id]=t}}},r=0,i=t;r<i.length;r+=1)n();return o}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var r=this.buckets[n];if(r instanceof Is){if(this.hasSymbolBuckets=!0,!o)break;r.justReloaded=!0}}for(var i in this.queryPadding=0,this.buckets){var a=this.buckets[i];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(i).queryRadius(a))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new Mr},Wl.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Wl.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},Wl.prototype.getBucket=function(t){return this.buckets[t.id]},Wl.prototype.upload=function(t){for(var e in this.buckets){var o=this.buckets[e];o.uploadPending()&&o.upload(t)}var n=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Js(t,this.imageAtlas.image,n.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Js(t,this.glyphAtlasImage,n.ALPHA),this.glyphAtlasImage=null)},Wl.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},Wl.prototype.queryRenderedFeatures=function(t,e,o,n,r,i,a,s,l){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:o,cameraQueryGeometry:n,scale:r,tileSize:this.tileSize,pixelPosMatrix:l,transform:a,params:i,queryPadding:this.queryPadding*s},t,e):{}},Wl.prototype.querySourceFeatures=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var o=this.latestFeatureIndex.loadVTLayers(),n=e?e.sourceLayer:"",r=o._geojsonTileLayer||o[n];if(r)for(var i=qo(e&&e.filter),a=this.tileID.canonical,s=a.z,l=a.x,u=a.y,c={z:s,x:l,y:u},p=0;p<r.length;p++){var d=r.feature(p);if(i(new jn(this.tileID.overscaledZ),d)){var h=new Vl(d,s,l,u);h.tile=c,t.push(h)}}}},Wl.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},Wl.prototype.setMask=function(t,e){if(!a(this.mask,t)&&(this.mask=t,this.clearMask(),!a(t,{0:!0}))){var o=new pr,n=new Tr;this.segments=new Ur,this.segments.prepareSegment(0,o,n);for(var i=Object.keys(t),s=0;s<i.length;s++){var l=t[+i[s]],u=hi>>l.z,c=new r(l.x*u,l.y*u),p=new r(c.x+u,c.y+u),d=this.segments.prepareSegment(4,o,n);o.emplaceBack(c.x,c.y,c.x,c.y),o.emplaceBack(p.x,c.y,p.x,c.y),o.emplaceBack(c.x,p.y,c.x,p.y),o.emplaceBack(p.x,p.y,p.x,p.y);var h=d.vertexLength;n.emplaceBack(h,h+1,h+2),n.emplaceBack(h+1,h+2,h+3),d.vertexLength+=4,d.primitiveLength+=2}this.maskedBoundsBuffer=e.createVertexBuffer(o,kl.members),this.maskedIndexBuffer=e.createIndexBuffer(n)}},Wl.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Wl.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Wl.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var o=x(t.cacheControl);o["max-age"]&&(this.expirationTime=Date.now()+1e3*o["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var n=Date.now(),r=!1;if(this.expirationTime>n)r=!1;else if(e)if(this.expirationTime<e)r=!0;else{var i=this.expirationTime-e;i?this.expirationTime=n+Math.max(i,3e4):r=!0}else r=!0;r?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Wl.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Wl.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var o=this.latestFeatureIndex.loadVTLayers();for(var n in this.buckets){var r=this.buckets[n],i=r.layers[0].sourceLayer||"_geojsonTileLayer",a=o[i],s=t[i];a&&s&&0!==Object.keys(s).length&&(r.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{}),e&&e.style&&(this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(n).queryRadius(r))))}}},Wl.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Wl.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<I.now()},Wl.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Wl.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=I.now()+t};var Kl=24,ql={horizontal:1,vertical:2,horizontalOnly:3},Yl=function(){this.text="",this.sectionIndex=[],this.sections=[]};function Zl(t,e,o,n,r,i,a,s,l,u){var c,p=Yl.fromFeature(t,o);u===ql.vertical&&p.verticalizePunctuation();var d=Hn.processBidirectionalText,h=Hn.processStyledBidirectionalText;if(d&&1===p.sections.length){c=[];for(var f=0,g=d(p.toString(),eu(p,s,n,e));f<g.length;f+=1){var y=g[f],v=new Yl;v.text=y,v.sections=p.sections;for(var m=0;m<y.length;m++)v.sectionIndex.push(0);c.push(v)}}else if(h){c=[];for(var C=0,_=h(p.text,p.sectionIndex,eu(p,s,n,e));C<_.length;C+=1){var w=_[C],b=new Yl;b.text=w[0],b.sectionIndex=w[1],b.sections=p.sections,c.push(b)}}else c=function(t,e){for(var o=[],n=t.text,r=0,i=0,a=e;i<a.length;i+=1){var s=a[i];o.push(t.substring(r,s)),r=s}return r<n.length&&o.push(t.substring(r,n.length)),o}(p,eu(p,s,n,e));var S=[],E={positionedGlyphs:S,text:p.toString(),top:l[1],bottom:l[1],left:l[0],right:l[0],writingMode:u,lineCount:c.length};return function(t,e,o,n,r,i,a,s){for(var l=0,u=-17,c=0,p=t.positionedGlyphs,d="right"===i?1:"left"===i?0:.5,h=0,f=o;h<f.length;h+=1){var g=f[h];g.trim();var y=g.getMaxScale();if(g.length()){for(var v=p.length,m=0;m<g.length();m++){var C=g.getSection(m),_=g.getCharCode(m),w=24*(y-C.scale),b=e[C.fontStack],S=b&&b[_];S&&(Ln(_)&&a!==ql.horizontal?(p.push({glyph:_,x:l,y:w,vertical:!0,scale:C.scale,fontStack:C.fontStack}),l+=Kl*C.scale+s):(p.push({glyph:_,x:l,y:u+w,vertical:!1,scale:C.scale,fontStack:C.fontStack}),l+=S.metrics.advance*C.scale+s))}if(p.length!==v){var E=l-s;c=Math.max(E,c),nu(p,e,v,p.length-1,d)}l=0,u+=n*y}else u+=n}var x=ou(r),T=x.horizontalAlign,O=x.verticalAlign;!function(t,e,o,n,r,i,a){for(var s=(e-o)*r,l=(-n*a+.5)*i,u=0;u<t.length;u++)t[u].x+=s,t[u].y+=l}(p,d,T,O,c,n,o.length);var R=u- -17;t.top+=-O*R,t.bottom=t.top+R,t.left+=-T*c,t.right=t.left+c}(E,e,c,r,i,a,u,s),!!S.length&&E}Yl.fromFeature=function(t,e){for(var o=new Yl,n=0;n<t.sections.length;n++){var r=t.sections[n];o.sections.push({scale:r.scale||1,fontStack:r.fontStack||e}),o.text+=r.text;for(var i=0;i<r.text.length;i++)o.sectionIndex.push(n)}return o},Yl.prototype.length=function(){return this.text.length},Yl.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},Yl.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},Yl.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",o=0;o<t.length;o++){var n=t.charCodeAt(o+1)||null,r=t.charCodeAt(o-1)||null;n&&Fn(n)&&!_s[t[o+1]]||r&&Fn(r)&&!_s[t[o-1]]||!_s[t[o]]?e+=t[o]:e+=_s[t[o]]}return e}(this.text)},Yl.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&Xl[this.text.charCodeAt(e)];e++)t++;for(var o=this.text.length,n=this.text.length-1;n>=0&&n>=t&&Xl[this.text.charCodeAt(n)];n--)o--;this.text=this.text.substring(t,o),this.sectionIndex=this.sectionIndex.slice(t,o)},Yl.prototype.substring=function(t,e){var o=new Yl;return o.text=this.text.substring(t,e),o.sectionIndex=this.sectionIndex.slice(t,e),o.sections=this.sections,o},Yl.prototype.toString=function(){return this.text},Yl.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce(function(e,o){return Math.max(e,t.sections[o].scale)},0)};var Xl={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Jl={};function Ql(t,e,o,n){var r=Math.pow(t-e,2);return n?t<e?r/2:2*r:r+Math.abs(o)*o}function $l(t,e,o){var n=0;return 10===t&&(n-=1e4),o&&(n+=150),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function tu(t,e,o,n,r,i){for(var a=null,s=Ql(e,o,r,i),l=0,u=n;l<u.length;l+=1){var c=u[l],p=Ql(e-c.x,o,r,i)+c.badness;p<=s&&(a=c,s=p)}return{index:t,x:e,priorBreak:a,badness:s}}function eu(t,e,o,n){if(!o)return[];if(!t)return[];for(var r,i=[],a=function(t,e,o,n){for(var r=0,i=0;i<t.length();i++){var a=t.getSection(i),s=n[a.fontStack],l=s&&s[t.getCharCode(i)];l&&(r+=l.metrics.advance*a.scale+e)}return r/Math.max(1,Math.ceil(r/o))}(t,e,o,n),s=t.text.indexOf("\u200b")>=0,l=0,u=0;u<t.length();u++){var c=t.getSection(u),p=t.getCharCode(u),d=n[c.fontStack],h=d&&d[p];if(h&&!Xl[p]&&(l+=h.metrics.advance*c.scale+e),u<t.length()-1){var f=!((r=p)<11904||!(An["Bopomofo Extended"](r)||An.Bopomofo(r)||An["CJK Compatibility Forms"](r)||An["CJK Compatibility Ideographs"](r)||An["CJK Compatibility"](r)||An["CJK Radicals Supplement"](r)||An["CJK Strokes"](r)||An["CJK Symbols and Punctuation"](r)||An["CJK Unified Ideographs Extension A"](r)||An["CJK Unified Ideographs"](r)||An["Enclosed CJK Letters and Months"](r)||An["Halfwidth and Fullwidth Forms"](r)||An.Hiragana(r)||An["Ideographic Description Characters"](r)||An["Kangxi Radicals"](r)||An["Katakana Phonetic Extensions"](r)||An.Katakana(r)||An["Vertical Forms"](r)||An["Yi Radicals"](r)||An["Yi Syllables"](r)));(Jl[p]||f)&&i.push(tu(u+1,l,a,i,$l(p,t.getCharCode(u+1),f&&s),!1))}}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(tu(t.length(),l,a,i,0,!0))}function ou(t){var e=.5,o=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:e,verticalAlign:o}}function nu(t,e,o,n,r){if(r){var i=t[n],a=e[i.fontStack],s=a&&a[i.glyph];if(s)for(var l=s.metrics.advance*i.scale,u=(t[n].x+l)*r,c=o;c<=n;c++)t[c].x-=u}}function ru(t,e,o){var n=ou(o),r=n.horizontalAlign,i=n.verticalAlign,a=e[0],s=e[1],l=a-t.displaySize[0]*r,u=l+t.displaySize[0],c=s-t.displaySize[1]*i;return{image:t,top:c,bottom:c+t.displaySize[1],left:l,right:u}}function iu(t,e,o,n,r){if(void 0===e.segment)return!0;for(var i=e,a=e.segment+1,s=0;s>-o/2;){if(--a<0)return!1;s-=t[a].dist(i),i=t[a]}s+=t[a].dist(t[a+1]),a++;for(var l=[],u=0;s<o/2;){var c=t[a-1],p=t[a],d=t[a+1];if(!d)return!1;var h=c.angleTo(p)-p.angleTo(d);for(h=Math.abs((h+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:h}),u+=h;s-l[0].distance>n;)u-=l.shift().angleDelta;if(u>r)return!1;a++,s+=p.dist(d)}return!0}function au(t){for(var e=0,o=0;o<t.length-1;o++)e+=t[o].dist(t[o+1]);return e}function su(t,e,o){return t?.6*e*o:0}function lu(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function uu(t,e,o,n,r,i){for(var a=su(o,r,i),s=lu(o,n)*i,l=0,u=au(t)/2,c=0;c<t.length-1;c++){var p=t[c],d=t[c+1],h=p.dist(d);if(l+h>u){var f=(u-l)/h,g=Re(p.x,d.x,f),y=Re(p.y,d.y,f),v=new ws(g,y,d.angleTo(p),c);return v._round(),!a||iu(t,v,s,a,e)?v:void 0}l+=h}}function cu(t,e,o,n,r,i,a,s,l){var u=su(n,i,a),c=lu(n,r),p=c*a,d=0===t[0].x||t[0].x===l||0===t[0].y||t[0].y===l;return e-p<e/4&&(e=p+e/4),function t(e,o,n,r,i,a,s,l,u){for(var c=a/2,p=au(e),d=0,h=o-n,f=[],g=0;g<e.length-1;g++){for(var y=e[g],v=e[g+1],m=y.dist(v),C=v.angleTo(y);h+n<d+m;){var _=((h+=n)-d)/m,w=Re(y.x,v.x,_),b=Re(y.y,v.y,_);if(w>=0&&w<u&&b>=0&&b<u&&h-c>=0&&h+c<=p){var S=new ws(w,b,C,g);S._round(),r&&!iu(e,S,a,r,i)||f.push(S)}}d+=m}return l||f.length||s||(f=t(e,d/2,n,r,i,a,s,!0,u)),f}(t,d?e/2*s%e:(c/2+2*i)*a*s%e,e,u,o,p,d,!1,l)}Jl[10]=!0,Jl[32]=!0,Jl[38]=!0,Jl[40]=!0,Jl[41]=!0,Jl[43]=!0,Jl[45]=!0,Jl[47]=!0,Jl[173]=!0,Jl[183]=!0,Jl[8203]=!0,Jl[8208]=!0,Jl[8211]=!0,Jl[8231]=!0;var pu=function(t,e,o,n,i,a,s,l,u,c,p,d){var h=s.top*l-u,f=s.bottom*l+u,g=s.left*l-u,y=s.right*l+u;if(this.boxStartIndex=t.length,c){var v=f-h,m=y-g;v>0&&(v=Math.max(10*l,v),this._addLineCollisionCircles(t,e,o,o.segment,m,v,n,i,a,p))}else{if(d){var C=new r(g,h),_=new r(y,h),w=new r(g,f),b=new r(y,f),S=d*Math.PI/180;C._rotate(S),_._rotate(S),w._rotate(S),b._rotate(S),g=Math.min(C.x,_.x,w.x,b.x),y=Math.max(C.x,_.x,w.x,b.x),h=Math.min(C.y,_.y,w.y,b.y),f=Math.max(C.y,_.y,w.y,b.y)}t.emplaceBack(o.x,o.y,g,h,y,f,n,i,a,0,0)}this.boxEndIndex=t.length};pu.prototype._addLineCollisionCircles=function(t,e,o,n,r,i,a,s,l,u){var c=i/2,p=Math.floor(r/c)||1,d=1+.4*Math.log(u)/Math.LN2,h=Math.floor(p*d/2),f=-i/2,g=o,y=n+1,v=f,m=-r/2,C=m-r/4;do{if(--y<0){if(v>m)return;y=0;break}v-=e[y].dist(g),g=e[y]}while(v>C);for(var _=e[y].dist(e[y+1]),w=-h;w<p+h;w++){var b=w*c,S=m+b;if(b<0&&(S+=b),b>r&&(S+=b-r),!(S<v)){for(;v+_<S;){if(v+=_,++y+1>=e.length)return;_=e[y].dist(e[y+1])}var E=S-v,x=e[y],T=e[y+1].sub(x)._unit()._mult(E)._add(x)._round(),O=Math.abs(S-f)<c?0:.8*(S-f);t.emplaceBack(T.x,T.y,-i/2,-i/2,i/2,i/2,a,s,l,i/2,O)}}};var du=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=hu),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var o=(this.length>>1)-1;o>=0;o--)this._down(o)};function hu(t,e){return t<e?-1:t>e?1:0}function fu(t,e,o){void 0===e&&(e=1),void 0===o&&(o=!1);for(var n=1/0,i=1/0,a=-1/0,s=-1/0,l=t[0],u=0;u<l.length;u++){var c=l[u];(!u||c.x<n)&&(n=c.x),(!u||c.y<i)&&(i=c.y),(!u||c.x>a)&&(a=c.x),(!u||c.y>s)&&(s=c.y)}var p=a-n,d=s-i,h=Math.min(p,d),f=h/2,g=new du([],gu);if(0===h)return new r(n,i);for(var y=n;y<a;y+=h)for(var v=i;v<s;v+=h)g.push(new yu(y+f,v+f,f,t));for(var m=function(t){for(var e=0,o=0,n=0,r=t[0],i=0,a=r.length,s=a-1;i<a;s=i++){var l=r[i],u=r[s],c=l.x*u.y-u.x*l.y;o+=(l.x+u.x)*c,n+=(l.y+u.y)*c,e+=3*c}return new yu(o/e,n/e,0,t)}(t),C=g.length;g.length;){var _=g.pop();(_.d>m.d||!m.d)&&(m=_,o&&console.log("found best %d after %d probes",Math.round(1e4*_.d)/1e4,C)),_.max-m.d<=e||(f=_.h/2,g.push(new yu(_.p.x-f,_.p.y-f,f,t)),g.push(new yu(_.p.x+f,_.p.y-f,f,t)),g.push(new yu(_.p.x-f,_.p.y+f,f,t)),g.push(new yu(_.p.x+f,_.p.y+f,f,t)),C+=4)}return o&&(console.log("num probes: "+C),console.log("best distance: "+m.d)),m.p}function gu(t,e){return e.max-t.max}function yu(t,e,o,n){this.p=new r(t,e),this.h=o,this.d=function(t,e){for(var o=!1,n=1/0,r=0;r<e.length;r++)for(var i=e[r],a=0,s=i.length,l=s-1;a<s;l=a++){var u=i[a],c=i[l];u.y>t.y!=c.y>t.y&&t.x<(c.x-u.x)*(t.y-u.y)/(c.y-u.y)+u.x&&(o=!o),n=Math.min(n,xi(t,u,c))}return(o?1:-1)*Math.sqrt(n)}(this.p,n),this.max=this.d+this.h*Math.SQRT2}du.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},du.prototype.pop=function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},du.prototype.peek=function(){return this.data[0]},du.prototype._up=function(t){for(var e=this.data,o=this.compare,n=e[t];t>0;){var r=t-1>>1,i=e[r];if(o(n,i)>=0)break;e[t]=i,t=r}e[t]=n},du.prototype._down=function(t){for(var e=this.data,o=this.compare,n=this.length>>1,r=e[t];t<n;){var i=1+(t<<1),a=e[i],s=i+1;if(s<this.length&&o(e[s],a)<0&&(i=s,a=e[s]),o(a,r)>=0)break;e[t]=a,t=i}e[t]=r};var vu=e(function(t){t.exports=function(t,e){var o,n,r,i,a,s,l,u;for(o=3&t.length,n=t.length-o,r=e,a=3432918353,s=461845907,u=0;u<n;)l=255&t.charCodeAt(u)|(255&t.charCodeAt(++u))<<8|(255&t.charCodeAt(++u))<<16|(255&t.charCodeAt(++u))<<24,++u,r=27492+(65535&(i=5*(65535&(r=(r^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(i>>>16)&65535)<<16);switch(l=0,o){case 3:l^=(255&t.charCodeAt(u+2))<<16;case 2:l^=(255&t.charCodeAt(u+1))<<8;case 1:r^=l=(65535&(l=(l=(65535&(l^=255&t.charCodeAt(u)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return r^=t.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0}}),mu=e(function(t){t.exports=function(t,e){for(var o,n=t.length,r=e^n,i=0;n>=4;)o=1540483477*(65535&(o=255&t.charCodeAt(i)|(255&t.charCodeAt(++i))<<8|(255&t.charCodeAt(++i))<<16|(255&t.charCodeAt(++i))<<24))+((1540483477*(o>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),n-=4,++i;switch(n){case 3:r^=(255&t.charCodeAt(i+2))<<16;case 2:r^=(255&t.charCodeAt(i+1))<<8;case 1:r=1540483477*(65535&(r^=255&t.charCodeAt(i)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}}),Cu=vu,_u=vu,wu=mu;Cu.murmur3=_u,Cu.murmur2=wu;var bu=7;function Su(t,e){var o=0,n=0,r=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":n=r-bu;break;case"bottom-right":case"bottom-left":n=-r+bu;break;case"bottom":n=-e+bu;break;case"top":n=e-bu}switch(t){case"top-right":case"bottom-right":o=-r;break;case"top-left":case"bottom-left":o=r;break;case"left":o=e;break;case"right":o=-e}return[o,n]}function Eu(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function xu(t,e,o,n,i,a,s){var l=a.layoutTextSize.evaluate(e,{}),u=a.layoutIconSize.evaluate(e,{}),c=a.textMaxSize.evaluate(e,{});void 0===c&&(c=l);var p=t.layers[0].layout,d=p.get("icon-offset").evaluate(e,{}),h=Ru(o.horizontal),f=l/24,g=t.tilePixelRatio*f,y=t.tilePixelRatio*c/24,v=t.tilePixelRatio*u,m=t.tilePixelRatio*p.get("symbol-spacing"),C=p.get("text-padding")*t.tilePixelRatio,_=p.get("icon-padding")*t.tilePixelRatio,w=p.get("text-max-angle")/180*Math.PI,S="map"===p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),E="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),x=p.get("symbol-placement"),T=m/2,O=function(l,u){u.x<0||u.x>=hi||u.y<0||u.y>=hi||function(t,e,o,n,i,a,s,l,u,c,p,d,h,f,g,y,v,m,C,_,w){var S,E,x=t.addToLineVertexArray(e,o),T=0,O=0,R=0,P={},A=Cu(""),D=(a.layout.get("text-radial-offset").evaluate(C,{})||0)*Kl;for(var M in n.horizontal){var I=n.horizontal[M];if(!S){A=Cu(I.text);var L=a.layout.get("text-rotate").evaluate(C,{});S=new pu(s,o,e,l,u,c,I,p,d,h,t.overscaling,L)}var F=1===I.lineCount;if(O+=Ou(t,e,I,a,h,C,f,x,n.vertical?ql.horizontal:ql.horizontalOnly,F?Object.keys(n.horizontal):[M],P,_,w),F)break}n.vertical&&(R+=Ou(t,e,n.vertical,a,h,C,f,x,ql.vertical,["vertical"],P,_,w));var N=S?S.boxStartIndex:t.collisionBoxArray.length,k=S?S.boxEndIndex:t.collisionBoxArray.length;if(i){var G=function(t,e,o,n,i,a){var s,l,u,c,p=e.image,d=o.layout,h=e.top-1/p.pixelRatio,f=e.left-1/p.pixelRatio,g=e.bottom+1/p.pixelRatio,y=e.right+1/p.pixelRatio;if("none"!==d.get("icon-text-fit")&&i){var v=y-f,m=g-h,C=d.get("text-size").evaluate(a,{})/24,_=i.left*C,w=i.right*C,b=i.top*C,S=w-_,E=i.bottom*C-b,x=d.get("icon-text-fit-padding")[0],T=d.get("icon-text-fit-padding")[1],O=d.get("icon-text-fit-padding")[2],R=d.get("icon-text-fit-padding")[3],P="width"===d.get("icon-text-fit")?.5*(E-m):0,A="height"===d.get("icon-text-fit")?.5*(S-v):0,D="width"===d.get("icon-text-fit")||"both"===d.get("icon-text-fit")?S:v,M="height"===d.get("icon-text-fit")||"both"===d.get("icon-text-fit")?E:m;s=new r(_+A-R,b+P-x),l=new r(_+A+T+D,b+P-x),u=new r(_+A+T+D,b+P+O+M),c=new r(_+A-R,b+P+O+M)}else s=new r(f,h),l=new r(y,h),u=new r(y,g),c=new r(f,g);var I=o.layout.get("icon-rotate").evaluate(a,{})*Math.PI/180;if(I){var L=Math.sin(I),F=Math.cos(I),N=[F,-L,L,F];s._matMult(N),l._matMult(N),c._matMult(N),u._matMult(N)}return[{tl:s,tr:l,bl:c,br:u,tex:p.paddedRect,writingMode:void 0,glyphOffset:[0,0]}]}(0,i,a,0,Ru(n.horizontal),C),V=a.layout.get("icon-rotate").evaluate(C,{});E=new pu(s,o,e,l,u,c,i,g,y,!1,t.overscaling,V),T=4*G.length;var B=t.iconSizeData,z=null;"source"===B.kind?(z=[bs*a.layout.get("icon-size").evaluate(C,{})])[0]>Tu&&b(t.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'):"composite"===B.kind&&((z=[bs*w.compositeIconSizes[0].evaluate(C,{}),bs*w.compositeIconSizes[1].evaluate(C,{})])[0]>Tu||z[1]>Tu)&&b(t.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'),t.addSymbols(t.icon,G,z,m,v,C,!1,e,x.lineStartIndex,x.lineLength)}var H=E?E.boxStartIndex:t.collisionBoxArray.length,j=E?E.boxEndIndex:t.collisionBoxArray.length;t.glyphOffsetArray.length>=Is.MAX_GLYPHS&&b("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),t.symbolInstances.emplaceBack(e.x,e.y,P.right>=0?P.right:-1,P.center>=0?P.center:-1,P.left>=0?P.left:-1,P.vertical||-1,A,N,k,H,j,l,O,R,T,0,p,D)}(t,u,l,o,n,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,g,C,S,s,v,_,E,d,e,i,a)};if("line"===x)for(var R=0,P=function(t,e,o,n,i){for(var a=[],s=0;s<t.length;s++)for(var l=t[s],u=void 0,c=0;c<l.length-1;c++){var p=l[c],d=l[c+1];p.x<0&&d.x<0||(p.x<0?p=new r(0,p.y+(d.y-p.y)*((0-p.x)/(d.x-p.x)))._round():d.x<0&&(d=new r(0,p.y+(d.y-p.y)*((0-p.x)/(d.x-p.x)))._round()),p.y<0&&d.y<0||(p.y<0?p=new r(p.x+(d.x-p.x)*((0-p.y)/(d.y-p.y)),0)._round():d.y<0&&(d=new r(p.x+(d.x-p.x)*((0-p.y)/(d.y-p.y)),0)._round()),p.x>=n&&d.x>=n||(p.x>=n?p=new r(n,p.y+(d.y-p.y)*((n-p.x)/(d.x-p.x)))._round():d.x>=n&&(d=new r(n,p.y+(d.y-p.y)*((n-p.x)/(d.x-p.x)))._round()),p.y>=i&&d.y>=i||(p.y>=i?p=new r(p.x+(d.x-p.x)*((i-p.y)/(d.y-p.y)),i)._round():d.y>=i&&(d=new r(p.x+(d.x-p.x)*((i-p.y)/(d.y-p.y)),i)._round()),u&&p.equals(u[u.length-1])||(u=[p],a.push(u)),u.push(d)))))}return a}(e.geometry,0,0,hi,hi);R<P.length;R+=1)for(var A=P[R],D=0,M=cu(A,m,w,o.vertical||h,n,24,y,t.overscaling,hi);D<M.length;D+=1){var I=M[D];h&&Pu(t,h.text,T,I)||O(A,I)}else if("line-center"===x)for(var L=0,F=e.geometry;L<F.length;L+=1){var N=F[L];if(N.length>1){var k=uu(N,w,o.vertical||h,n,24,y);k&&O(N,k)}}else if("Polygon"===e.type)for(var G=0,V=Oa(e.geometry,0);G<V.length;G+=1){var B=V[G],z=fu(B,16);O(B[0],new ws(z.x,z.y,0))}else if("LineString"===e.type)for(var H=0,j=e.geometry;H<j.length;H+=1){var U=j[H];O(U,new ws(U[0].x,U[0].y,0))}else if("Point"===e.type)for(var W=0,K=e.geometry;W<K.length;W+=1)for(var q=0,Y=K[W];q<Y.length;q+=1){var Z=Y[q];O([Z],new ws(Z.x,Z.y,0))}}var Tu=65535;function Ou(t,e,o,n,i,a,s,l,u,c,p,d,h){var f=function(t,e,o,n,i,a,s){for(var l=n.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,u=e.positionedGlyphs,c=[],p=0;p<u.length;p++){var d=u[p],h=s[d.fontStack],f=h&&h[d.glyph];if(f){var g=f.rect;if(g){var y=wl+1,v=f.metrics.advance*d.scale/2,m=i?[d.x+v,d.y]:[0,0],C=i?[0,0]:[d.x+v+o[0],d.y+o[1]],_=(f.metrics.left-y)*d.scale-v+C[0],w=(-f.metrics.top-y)*d.scale+C[1],b=_+g.w*d.scale,S=w+g.h*d.scale,E=new r(_,w),x=new r(b,w),T=new r(_,S),O=new r(b,S);if(i&&d.vertical){var R=new r(-v,v),P=-Math.PI/2,A=new r(5,0);E._rotateAround(P,R)._add(A),x._rotateAround(P,R)._add(A),T._rotateAround(P,R)._add(A),O._rotateAround(P,R)._add(A)}if(l){var D=Math.sin(l),M=Math.cos(l),I=[M,-D,D,M];E._matMult(I),x._matMult(I),T._matMult(I),O._matMult(I)}c.push({tl:E,tr:x,bl:T,br:O,tex:g,writingMode:e.writingMode,glyphOffset:m})}}}return c}(0,o,s,n,i,a,d),g=t.textSizeData,y=null;"source"===g.kind?(y=[bs*n.layout.get("text-size").evaluate(a,{})])[0]>Tu&&b(t.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'):"composite"===g.kind&&((y=[bs*h.compositeTextSizes[0].evaluate(a,{}),bs*h.compositeTextSizes[1].evaluate(a,{})])[0]>Tu||y[1]>Tu)&&b(t.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'),t.addSymbols(t.text,f,y,s,i,a,u,e,l.lineStartIndex,l.lineLength);for(var v=0,m=c;v<m.length;v+=1)p[m[v]]=t.text.placedSymbolArray.length-1;return 4*f.length}function Ru(t){for(var e in t)return t[e];return null}function Pu(t,e,o,n){var r=t.compareText;if(e in r){for(var i=r[e],a=i.length-1;a>=0;a--)if(n.dist(i[a])<o)return!0}else r[e]=[];return r[e].push(n),!1}t.Actor=bl,t.AlphaImage=Wi,t.CanonicalTileID=Ml,t.CollisionBoxArray=Mr,t.Color=ne,t.DEMData=Nl,t.DataConstantProperty=Qn,t.DictionaryCoder=Gl,t.EXTENT=hi,t.ErrorEvent=Mt,t.EvaluationParameters=jn,t.Event=Dt,t.Evented=It,t.FeatureIndex=Hl,t.FillBucket=Da,t.FillExtrusionBucket=qa,t.ImageAtlas=Ks,t.ImagePosition=Us,t.LineBucket=ss,t.LngLat=xl,t.LngLatBounds=El,t.MercatorCoordinate=Dl,t.ONE_EM=Kl,t.OverscaledTileID=Ll,t.Point=r,t.Point$1=r,t.ProgramConfiguration=ui,t.Properties=nr,t.Protobuf=tl,t.RGBAImage=Ki,t.RequestManager=B,t.ResourceType=mt,t.SegmentVector=Ur,t.SourceFeatureState=zl,t.StructArrayLayout1ui2=Rr,t.StructArrayLayout2i4=cr,t.StructArrayLayout2ui4=Or,t.StructArrayLayout3ui6=Tr,t.StructArrayLayout4i8=pr,t.SymbolBucket=Is,t.Texture=Js,t.Tile=Wl,t.Transitionable=Kn,t.Uniform1f=Xr,t.Uniform1i=Zr,t.Uniform2f=Jr,t.Uniform3f=Qr,t.Uniform4f=$r,t.UniformColor=ti,t.UniformMatrix4f=oi,t.UnwrappedTileID=Il,t.ValidationError=Ft,t.WritingMode=ql,t.ZoomHistory=Pn,t.addDynamicAttributes=As,t.asyncAll=function(t,e,o){if(!t.length)return o(null,[]);var n=t.length,r=new Array(t.length),i=null;t.forEach(function(t,a){e(t,function(t,e){t&&(i=t),r[a]=e,0==--n&&o(i,r)})})},t.bezier=s,t.bindAll=y,t.browser=I,t.cacheEntryPossiblyAdded=function(t){++vt>ft&&(t.send("enforceCacheSizeLimit",ht),vt=0)},t.clamp=u,t.clearTileCache=function(t){var e=self.caches.delete(dt);t&&e.catch(t).then(function(){return t()})},t.clone=function(t){var e=new Ii(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=_,t.config=L,t.create=function(){var t=new Ii(16);return Ii!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=Li,t.create$2=function(){var t=new Ii(4);return Ii!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createCommonjsModule=e,t.createExpression=Lo,t.createLayout=lr,t.createStyleLayer=function(t){return"custom"===t.type?new zs(t):new Hs[t.type](t)},t.deepEqual=a,t.ease=l,t.emitValidationErrors=Cn,t.endsWith=v,t.enforceCacheSizeLimit=function(t){self.caches&&self.caches.open(dt).then(function(e){e.keys().then(function(o){for(var n=0;n<o.length-t;n++)e.delete(o[n])})})},t.evaluateRadialOffset=Su,t.evaluateSizeForFeature=Es,t.evaluateSizeForZoom=xs,t.evented=zn,t.extend=p,t.featureFilter=qo,t.filterObject=C,t.fromRotation=function(t,e){var o=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=o,t[2]=0,t[3]=-o,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.getAnchorAlignment=ou,t.getAnchorJustification=Eu,t.getArrayBuffer=Tt,t.getImage=Rt,t.getJSON=function(t,e){return xt(p(t,{type:"json"}),e)},t.getReferrer=wt,t.getVideo=function(t,e){var o,n,r=self.document.createElement("video");r.muted=!0,r.onloadstart=function(){e(null,r)};for(var i=0;i<t.length;i++){var a=self.document.createElement("source");o=t[i],n=void 0,(n=self.document.createElement("a")).href=o,(n.protocol!==self.document.location.protocol||n.host!==self.document.location.host)&&(r.crossOrigin="Anonymous"),a.src=t[i],r.appendChild(a)}return{cancel:function(){}}},t.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.invert=function(t,e){var o=e[0],n=e[1],r=e[2],i=e[3],a=e[4],s=e[5],l=e[6],u=e[7],c=e[8],p=e[9],d=e[10],h=e[11],f=e[12],g=e[13],y=e[14],v=e[15],m=o*s-n*a,C=o*l-r*a,_=o*u-i*a,w=n*l-r*s,b=n*u-i*s,S=r*u-i*l,E=c*g-p*f,x=c*y-d*f,T=c*v-h*f,O=p*y-d*g,R=p*v-h*g,P=d*v-h*y,A=m*P-C*R+_*O+w*T-b*x+S*E;return A?(A=1/A,t[0]=(s*P-l*R+u*O)*A,t[1]=(r*R-n*P-i*O)*A,t[2]=(g*S-y*b+v*w)*A,t[3]=(d*b-p*S-h*w)*A,t[4]=(l*T-a*P-u*x)*A,t[5]=(o*P-r*T+i*x)*A,t[6]=(y*_-f*S-v*C)*A,t[7]=(c*S-d*_+h*C)*A,t[8]=(a*R-s*T+u*E)*A,t[9]=(n*T-o*R-i*E)*A,t[10]=(f*b-g*_+v*m)*A,t[11]=(p*_-c*b-h*m)*A,t[12]=(s*x-a*O-l*E)*A,t[13]=(o*O-n*x+r*E)*A,t[14]=(g*C-f*w-y*m)*A,t[15]=(c*w-p*C+d*m)*A,t):null},t.isChar=An,t.isMapboxURL=j,t.keysDifference=function(t,e){var o=[];for(var n in t)n in e||o.push(n);return o},t.makeRequest=xt,t.mapObject=m,t.mercatorXfromLng=Ol,t.mercatorYfromLat=Rl,t.mercatorZfromAltitude=Pl,t.multiply=function(t,e,o){var n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],p=e[8],d=e[9],h=e[10],f=e[11],g=e[12],y=e[13],v=e[14],m=e[15],C=o[0],_=o[1],w=o[2],b=o[3];return t[0]=C*n+_*s+w*p+b*g,t[1]=C*r+_*l+w*d+b*y,t[2]=C*i+_*u+w*h+b*v,t[3]=C*a+_*c+w*f+b*m,C=o[4],_=o[5],w=o[6],b=o[7],t[4]=C*n+_*s+w*p+b*g,t[5]=C*r+_*l+w*d+b*y,t[6]=C*i+_*u+w*h+b*v,t[7]=C*a+_*c+w*f+b*m,C=o[8],_=o[9],w=o[10],b=o[11],t[8]=C*n+_*s+w*p+b*g,t[9]=C*r+_*l+w*d+b*y,t[10]=C*i+_*u+w*h+b*v,t[11]=C*a+_*c+w*f+b*m,C=o[12],_=o[13],w=o[14],b=o[15],t[12]=C*n+_*s+w*p+b*g,t[13]=C*r+_*l+w*d+b*y,t[14]=C*i+_*u+w*h+b*v,t[15]=C*a+_*c+w*f+b*m,t},t.mvt=ja,t.number=Re,t.ortho=function(t,e,o,n,r,i,a){var s=1/(e-o),l=1/(n-r),u=1/(i-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+o)*s,t[13]=(r+n)*l,t[14]=(a+i)*u,t[15]=1,t},t.parseGlyphPBF=function(t){return new tl(t).readFields(ml,[])},t.pbf=tl,t.performSymbolLayout=function(t,e,o,n,r,i){t.createArrays();var a=512*t.overscaling;t.tilePixelRatio=hi/a,t.compareText={},t.iconsNeedLinear=!1;var s=t.layers[0].layout,l=t.layers[0]._unevaluatedLayout._values,u={};if("composite"===t.textSizeData.kind){var c=t.textSizeData,p=c.minZoom,d=c.maxZoom;u.compositeTextSizes=[l["text-size"].possiblyEvaluate(new jn(p)),l["text-size"].possiblyEvaluate(new jn(d))]}if("composite"===t.iconSizeData.kind){var h=t.iconSizeData,f=h.minZoom,g=h.maxZoom;u.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new jn(f)),l["icon-size"].possiblyEvaluate(new jn(g))]}u.layoutTextSize=l["text-size"].possiblyEvaluate(new jn(t.zoom+1)),u.layoutIconSize=l["icon-size"].possiblyEvaluate(new jn(t.zoom+1)),u.textMaxSize=l["text-size"].possiblyEvaluate(new jn(18));for(var y=s.get("text-line-height")*Kl,v="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),m=s.get("text-keep-upright"),C=0,_=t.features;C<_.length;C+=1){var w=_[C],S=s.get("text-font").evaluate(w,{}).join(","),E=o,x={horizontal:{},vertical:void 0},T=w.text,O=[0,0];if(T){var R=T.toString(),P=s.get("text-letter-spacing").evaluate(w,{})*Kl,A=Mn(R)?P:0,D=s.get("text-anchor").evaluate(w,{}),M=s.get("text-variable-anchor"),I=s.get("text-radial-offset").evaluate(w,{});M||(O=I?Su(D,I*Kl):s.get("text-offset").evaluate(w,{}).map(function(t){return t*Kl}));var L=v?"center":s.get("text-justify").evaluate(w,{}),F="point"===s.get("symbol-placement")?s.get("text-max-width").evaluate(w,{})*Kl:0;if(!v&&M)for(var N="auto"===L?M.map(function(t){return Eu(t)}):[L],k=!1,G=0;G<N.length;G++){var V=N[G];if(!x.horizontal[V])if(k)x.horizontal[V]=x.horizontal[0];else{var B=Zl(T,e,S,F,y,"center",V,A,O,ql.horizontal);B&&(x.horizontal[V]=B,k=1===B.lineCount)}}else{"auto"===L&&(L=Eu(D));var z=Zl(T,e,S,F,y,D,L,A,O,ql.horizontal);z&&(x.horizontal[L]=z),Dn(R)&&v&&m&&(x.vertical=Zl(T,e,S,F,y,D,L,A,O,ql.vertical))}}var H=void 0;if(w.icon){var j=n[w.icon];j&&(H=ru(r[w.icon],s.get("icon-offset").evaluate(w,{}),s.get("icon-anchor").evaluate(w,{})),void 0===t.sdfIcons?t.sdfIcons=j.sdf:t.sdfIcons!==j.sdf&&b("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),j.pixelRatio!==t.pixelRatio?t.iconsNeedLinear=!0:0!==s.get("icon-rotate").constantOr(1)&&(t.iconsNeedLinear=!0))}(Object.keys(x.horizontal).length||H)&&xu(t,w,x,H,E,u,O)}i&&t.generateCollisionDebugBuffers()},t.perspective=function(t,e,o,n,r){var i,a=1/Math.tan(e/2);return t[0]=a/o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(i=1/(n-r),t[10]=(r+n)*i,t[14]=2*r*n*i):(t[10]=-1,t[14]=-2*n),t},t.pick=function(t,e){for(var o={},n=0;n<e.length;n++){var r=e[n];r in t&&(o[r]=t[r])}return o},t.plugin=Hn,t.polygonIntersectsPolygon=mi,t.postMapLoadEvent=pt,t.postTurnstileEvent=ut,t.potpack=js,t.rasterBoundsAttributes=kl,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=xn,t.registerForPluginAvailability=function(t){return Vn?t({pluginURL:Vn,completionCallback:kn}):zn.once("pluginAvailable",t),t},t.rotate=function(t,e,o){var n=e[0],r=e[1],i=e[2],a=e[3],s=Math.sin(o),l=Math.cos(o);return t[0]=n*l+i*s,t[1]=r*l+a*s,t[2]=n*-s+i*l,t[3]=r*-s+a*l,t},t.rotateX=function(t,e,o){var n=Math.sin(o),r=Math.cos(o),i=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],p=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*r+u*n,t[5]=a*r+c*n,t[6]=s*r+p*n,t[7]=l*r+d*n,t[8]=u*r-i*n,t[9]=c*r-a*n,t[10]=p*r-s*n,t[11]=d*r-l*n,t},t.rotateZ=function(t,e,o){var n=Math.sin(o),r=Math.cos(o),i=e[0],a=e[1],s=e[2],l=e[3],u=e[4],c=e[5],p=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*r+u*n,t[1]=a*r+c*n,t[2]=s*r+p*n,t[3]=l*r+d*n,t[4]=u*r-i*n,t[5]=c*r-a*n,t[6]=p*r-s*n,t[7]=d*r-l*n,t},t.scale=function(t,e,o){var n=o[0],r=o[1],i=o[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.setCacheLimits=function(t,e){ht=t,ft=e},t.setRTLTextPlugin=function(t,e){if(Gn)throw new Error("setRTLTextPlugin cannot be called multiple times.");Gn=!0,Vn=I.resolveURL(t),kn=function(t){t?(Gn=!1,Vn=null,e&&e(t)):Bn=!0},zn.fire(new Dt("pluginAvailable",{pluginURL:Vn,completionCallback:kn}))},t.sphericalToCartesian=function(t){var e=t[0],o=t[1],n=t[2];return o+=90,o*=Math.PI/180,n*=Math.PI/180,{x:e*Math.cos(o)*Math.sin(n),y:e*Math.sin(o)*Math.sin(n),z:e*Math.cos(n)}},t.styleSpec=Lt,t.symbolSize=Ts,t.transformMat3=function(t,e,o){var n=e[0],r=e[1],i=e[2];return t[0]=n*o[0]+r*o[3]+i*o[6],t[1]=n*o[1]+r*o[4]+i*o[7],t[2]=n*o[2]+r*o[5]+i*o[8],t},t.transformMat4=ki,t.translate=function(t,e,o){var n,r,i,a,s,l,u,c,p,d,h,f,g=o[0],y=o[1],v=o[2];return e===t?(t[12]=e[0]*g+e[4]*y+e[8]*v+e[12],t[13]=e[1]*g+e[5]*y+e[9]*v+e[13],t[14]=e[2]*g+e[6]*y+e[10]*v+e[14],t[15]=e[3]*g+e[7]*y+e[11]*v+e[15]):(n=e[0],r=e[1],i=e[2],a=e[3],s=e[4],l=e[5],u=e[6],c=e[7],p=e[8],d=e[9],h=e[10],f=e[11],t[0]=n,t[1]=r,t[2]=i,t[3]=a,t[4]=s,t[5]=l,t[6]=u,t[7]=c,t[8]=p,t[9]=d,t[10]=h,t[11]=f,t[12]=n*g+s*y+p*v+e[12],t[13]=r*g+l*y+d*v+e[13],t[14]=i*g+u*y+h*v+e[14],t[15]=a*g+c*y+f*v+e[15]),t},t.uniqueId=h,t.validateCustomStyleLayer=function(t){var e=[],o=t.id;return void 0===o&&e.push({message:"layers."+o+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+o+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+o+': property "renderingMode" must be either "2d" or "3d"'}),e},t.validateLight=yn,t.validateStyle=gn,t.values=function(t){var e=[];for(var o in t)e.push(t[o]);return e},t.vectorTile=ja,t.version="1.1.1",t.warnOnce=b,t.webpSupported=F,t.window=self,t.wrap=c}),n(0,function(t){function e(t){var o=typeof t;if("number"===o||"boolean"===o||"string"===o||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var n="[",r=0,i=t;r<i.length;r+=1)n+=e(i[r])+",";return n+"]"}for(var a=Object.keys(t).sort(),s="{",l=0;l<a.length;l++)s+=JSON.stringify(a[l])+":"+e(t[a[l]])+",";return s+"}"}function o(o){for(var n="",r=0,i=t.refProperties;r<i.length;r+=1)n+="/"+e(o[i[r]]);return n}var n=function(t){this.keyCache={},t&&this.replace(t)};n.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},n.prototype.update=function(e,n){for(var r=this,i=0,a=e;i<a.length;i+=1){var s=a[i];this._layerConfigs[s.id]=s;var l=this._layers[s.id]=t.createStyleLayer(s);l._featureFilter=t.featureFilter(l.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}for(var u=0,c=n;u<c.length;u+=1){var p=c[u];delete this.keyCache[p],delete this._layerConfigs[p],delete this._layers[p]}this.familiesBySource={};for(var d=0,h=function(t,e){for(var n={},r=0;r<t.length;r++){var i=e&&e[t[r].id]||o(t[r]);e&&(e[t[r].id]=i);var a=n[i];a||(a=n[i]=[]),a.push(t[r])}var s=[];for(var l in n)s.push(n[l]);return s}(t.values(this._layerConfigs),this.keyCache);d<h.length;d+=1){var f=h[d].map(function(t){return r._layers[t.id]}),g=f[0];if("none"!==g.visibility){var y=g.source||"",v=this.familiesBySource[y];v||(v=this.familiesBySource[y]={});var m=g.sourceLayer||"_geojsonTileLayer",C=v[m];C||(C=v[m]=[]),C.push(f)}}};var r=function(e){var o={},n=[];for(var r in e){var i=e[r],a=o[r]={};for(var s in i){var l=i[+s];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var u={x:0,y:0,w:l.bitmap.width+2,h:l.bitmap.height+2};n.push(u),a[s]={rect:u,metrics:l.metrics}}}}var c=t.potpack(n),p=c.w,d=c.h,h=new t.AlphaImage({width:p||1,height:d||1});for(var f in e){var g=e[f];for(var y in g){var v=g[+y];if(v&&0!==v.bitmap.width&&0!==v.bitmap.height){var m=o[f][y].rect;t.AlphaImage.copy(v.bitmap,h,{x:0,y:0},{x:m.x+1,y:m.y+1},v.bitmap)}}}this.image=h,this.positions=o};t.register("GlyphAtlas",r);var i=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies};function a(e,o){for(var n=new t.EvaluationParameters(o),r=0,i=e;r<i.length;r+=1)i[r].recalculate(n)}i.prototype.parse=function(e,o,n,i){var s=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var l=new t.DictionaryCoder(Object.keys(e.layers).sort()),u=new t.FeatureIndex(this.tileID);u.bucketLayerIDs=[];var c,p,d,h,f={},g={featureIndex:u,iconDependencies:{},patternDependencies:{},glyphDependencies:{}},y=o.familiesBySource[this.source];for(var v in y){var m=e.layers[v];if(m){1===m.version&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+v+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var C=l.encode(v),_=[],w=0;w<m.length;w++){var b=m.feature(w);_.push({feature:b,index:w,sourceLayerIndex:C})}for(var S=0,E=y[v];S<E.length;S+=1){var x=E[S],T=x[0];T.minzoom&&this.zoom<Math.floor(T.minzoom)||T.maxzoom&&this.zoom>=T.maxzoom||"none"!==T.visibility&&(a(x,this.zoom),(f[T.id]=T.createBucket({index:u.bucketLayerIDs.length,layers:x,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:C,sourceID:this.source})).populate(_,g),u.bucketLayerIDs.push(x.map(function(t){return t.id})))}}}var O=t.mapObject(g.glyphDependencies,function(t){return Object.keys(t).map(Number)});Object.keys(O).length?n.send("getGlyphs",{uid:this.uid,stacks:O},function(t,e){c||(c=t,p=e,A.call(s))}):p={};var R=Object.keys(g.iconDependencies);R.length?n.send("getImages",{icons:R},function(t,e){c||(c=t,d=e,A.call(s))}):d={};var P=Object.keys(g.patternDependencies);function A(){if(c)return i(c);if(p&&d&&h){var e=new r(p),o=new t.ImageAtlas(d,h);for(var n in f){var s=f[n];s instanceof t.SymbolBucket?(a(s.layers,this.zoom),t.performSymbolLayout(s,p,e.positions,d,o.iconPositions,this.showCollisionBoxes)):s.hasPattern&&(s instanceof t.LineBucket||s instanceof t.FillBucket||s instanceof t.FillExtrusionBucket)&&(a(s.layers,this.zoom),s.addFeatures(g,o.patternPositions))}this.status="done",i(null,{buckets:t.values(f).filter(function(t){return!t.isEmpty()}),featureIndex:u,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:o,glyphMap:this.returnDependencies?p:null,iconMap:this.returnDependencies?d:null,glyphPositions:this.returnDependencies?e.positions:null})}}P.length?n.send("getImages",{icons:P},function(t,e){c||(c=t,h=e,A.call(s))}):h={},A.call(this)};var s="undefined"!=typeof performance,l={getEntriesByName:function(t){return!!(s&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(t)},mark:function(t){return!!(s&&performance&&performance.mark)&&performance.mark(t)},measure:function(t,e,o){return!!(s&&performance&&performance.measure)&&performance.measure(t,e,o)},clearMarks:function(t){return!!(s&&performance&&performance.clearMarks)&&performance.clearMarks(t)},clearMeasures:function(t){return!!(s&&performance&&performance.clearMeasures)&&performance.clearMeasures(t)}},u=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},l.mark(this._marks.start)};function c(e,o){var n=t.getArrayBuffer(e.request,function(e,n,r,i){e?o(e):n&&o(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(n)),rawData:n,cacheControl:r,expires:i})});return function(){n.cancel(),o()}}u.prototype.finish=function(){l.mark(this._marks.end);var t=l.getEntriesByName(this._marks.measure);return 0===t.length&&(l.measure(this._marks.measure,this._marks.start,this._marks.end),t=l.getEntriesByName(this._marks.measure),l.clearMarks(this._marks.start),l.clearMarks(this._marks.end),l.clearMeasures(this._marks.measure)),t},l.Performance=u;var p=function(t,e,o){this.actor=t,this.layerIndex=e,this.loadVectorData=o||c,this.loading={},this.loaded={}};p.prototype.loadTile=function(e,o){var n=this,r=e.uid;this.loading||(this.loading={});var a=!!(e&&e.request&&e.request.collectResourceTiming)&&new l.Performance(e.request),s=this.loading[r]=new i(e);s.abort=this.loadVectorData(e,function(e,i){if(delete n.loading[r],e||!i)return s.status="done",n.loaded[r]=s,o(e);var l=i.rawData,u={};i.expires&&(u.expires=i.expires),i.cacheControl&&(u.cacheControl=i.cacheControl);var c={};if(a){var p=a.finish();p&&(c.resourceTiming=JSON.parse(JSON.stringify(p)))}s.vectorTile=i.vectorTile,s.parse(i.vectorTile,n.layerIndex,n.actor,function(e,n){if(e||!n)return o(e);o(null,t.extend({rawTileData:l.slice(0)},n,u,c))}),n.loaded=n.loaded||{},n.loaded[r]=s})},p.prototype.reloadTile=function(t,e){var o=this.loaded,n=t.uid,r=this;if(o&&o[n]){var i=o[n];i.showCollisionBoxes=t.showCollisionBoxes;var a=function(t,o){var n=i.reloadCallback;n&&(delete i.reloadCallback,i.parse(i.vectorTile,r.layerIndex,r.actor,n)),e(t,o)};"parsing"===i.status?i.reloadCallback=a:"done"===i.status&&(i.vectorTile?i.parse(i.vectorTile,this.layerIndex,this.actor,a):a())}},p.prototype.abortTile=function(t,e){var o=this.loading,n=t.uid;o&&o[n]&&o[n].abort&&(o[n].abort(),delete o[n]),e()},p.prototype.removeTile=function(t,e){var o=this.loaded,n=t.uid;o&&o[n]&&delete o[n],e()};var d=function(){this.loaded={}};d.prototype.loadTile=function(e,o){var n=e.uid,r=e.encoding,i=e.rawImageData,a=new t.DEMData(n,i,r);this.loaded=this.loaded||{},this.loaded[n]=a,o(null,a)},d.prototype.removeTile=function(t){var e=this.loaded,o=t.uid;e&&e[o]&&delete e[o]};var h={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:6356752.3142};function f(t){var e=0;if(t&&t.length>0){e+=Math.abs(g(t[0]));for(var o=1;o<t.length;o++)e-=Math.abs(g(t[o]))}return e}function g(t){var e,o,n,r,i,a,s=0,l=t.length;if(l>2){for(a=0;a<l;a++)a===l-2?(n=l-2,r=l-1,i=0):a===l-1?(n=l-1,r=0,i=1):(n=a,r=a+1,i=a+2),e=t[n],o=t[r],s+=(y(t[i][0])-y(e[0]))*Math.sin(y(o[1]));s=s*h.RADIUS*h.RADIUS/2}return s}function y(t){return t*Math.PI/180}var v={geometry:function t(e){var o,n=0;switch(e.type){case"Polygon":return f(e.coordinates);case"MultiPolygon":for(o=0;o<e.coordinates.length;o++)n+=f(e.coordinates[o]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(o=0;o<e.geometries.length;o++)n+=t(e.geometries[o]);return n}},ring:g};function m(t,e){return function(o){return t(o,e)}}function C(t,e){e=!!e,t[0]=_(t[0],e);for(var o=1;o<t.length;o++)t[o]=_(t[o],!e);return t}function _(t,e){return function(t){return v.ring(t)>=0}(t)===e?t:t.reverse()}var w=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,b=function(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};b.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],o=0,n=this._feature.geometry;o<n.length;o+=1){var r=n[o];e.push([new t.Point$1(r[0],r[1])])}return e}for(var i=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var l=[],u=0,c=s[a];u<c.length;u+=1){var p=c[u];l.push(new t.Point$1(p[0],p[1]))}i.push(l)}return i},b.prototype.toGeoJSON=function(t,e,o){return w.call(this,t,e,o)};var S=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e};S.prototype.feature=function(t){return new b(this._features[t])};var E=t.vectorTile.VectorTileFeature,x=T;function T(t,e){this.options=e||{},this.features=t,this.length=t.length}function O(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}T.prototype.feature=function(t){return new O(this.features[t],this.options.extent)},O.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var o=0;o<e.length;o++){for(var n=e[o],r=[],i=0;i<n.length;i++)r.push(new t.Point$1(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},O.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,o=-1/0,n=1/0,r=-1/0,i=0;i<t.length;i++)for(var a=t[i],s=0;s<a.length;s++){var l=a[s];e=Math.min(e,l.x),o=Math.max(o,l.x),n=Math.min(n,l.y),r=Math.max(r,l.y)}return[e,n,o,r]},O.prototype.toGeoJSON=E.prototype.toGeoJSON;var R=D,P=D,A=x;function D(e){var o=new t.pbf;return function(t,e){for(var o in t.layers)e.writeMessage(3,M,t.layers[o])}(e,o),o.finish()}function M(t,e){var o;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var n={keys:[],values:[],keycache:{},valuecache:{}};for(o=0;o<t.length;o++)n.feature=t.feature(o),e.writeMessage(2,I,n);var r=n.keys;for(o=0;o<r.length;o++)e.writeStringField(3,r[o]);var i=n.values;for(o=0;o<i.length;o++)e.writeMessage(4,G,i[o])}function I(t,e){var o=t.feature;void 0!==o.id&&e.writeVarintField(1,o.id),e.writeMessage(2,L,t),e.writeVarintField(3,o.type),e.writeMessage(4,k,o)}function L(t,e){var o=t.feature,n=t.keys,r=t.values,i=t.keycache,a=t.valuecache;for(var s in o.properties){var l=i[s];void 0===l&&(n.push(s),l=n.length-1,i[s]=l),e.writeVarint(l);var u=o.properties[s],c=typeof u;"string"!==c&&"boolean"!==c&&"number"!==c&&(u=JSON.stringify(u));var p=c+":"+u,d=a[p];void 0===d&&(r.push(u),d=r.length-1,a[p]=d),e.writeVarint(d)}}function F(t,e){return(e<<3)+(7&t)}function N(t){return t<<1^t>>31}function k(t,e){for(var o=t.loadGeometry(),n=t.type,r=0,i=0,a=o.length,s=0;s<a;s++){var l=o[s],u=1;1===n&&(u=l.length),e.writeVarint(F(1,u));for(var c=3===n?l.length-1:l.length,p=0;p<c;p++){1===p&&1!==n&&e.writeVarint(F(2,c-1));var d=l[p].x-r,h=l[p].y-i;e.writeVarint(N(d)),e.writeVarint(N(h)),r+=d,i+=h}3===n&&e.writeVarint(F(7,1))}}function G(t,e){var o=typeof t;"string"===o?e.writeStringField(1,t):"boolean"===o?e.writeBooleanField(7,t):"number"===o&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function V(t,e,o,n){B(t,o,n),B(e,2*o,2*n),B(e,2*o+1,2*n+1)}function B(t,e,o){var n=t[e];t[e]=t[o],t[o]=n}function z(t,e,o,n){var r=t-o,i=e-n;return r*r+i*i}R.fromVectorTileJs=P,R.fromGeojsonVt=function(t,e){e=e||{};var o={};for(var n in t)o[n]=new x(t[n].features,e),o[n].name=n,o[n].version=e.version,o[n].extent=e.extent;return D({layers:o})},R.GeoJSONWrapper=A;var H=function(t){return t[0]},j=function(t){return t[1]},U=function(t,e,o,n,r){void 0===e&&(e=H),void 0===o&&(o=j),void 0===n&&(n=64),void 0===r&&(r=Float64Array),this.nodeSize=n,this.points=t;for(var i=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new i(t.length),s=this.coords=new r(2*t.length),l=0;l<t.length;l++)a[l]=l,s[2*l]=e(t[l]),s[2*l+1]=o(t[l]);!function t(e,o,n,r,i,a){if(!(i-r<=n)){var s=r+i>>1;!function t(e,o,n,r,i,a){for(;i>r;){if(i-r>600){var s=i-r+1,l=n-r+1,u=Math.log(s),c=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);t(e,o,n,Math.max(r,Math.floor(n-l*c/s+p)),Math.min(i,Math.floor(n+(s-l)*c/s+p)),a)}var d=o[2*n+a],h=r,f=i;for(V(e,o,r,n),o[2*i+a]>d&&V(e,o,r,i);h<f;){for(V(e,o,h,f),h++,f--;o[2*h+a]<d;)h++;for(;o[2*f+a]>d;)f--}o[2*r+a]===d?V(e,o,r,f):V(e,o,++f,i),f<=n&&(r=f+1),n<=f&&(i=f-1)}}(e,o,s,r,i,a%2),t(e,o,n,r,s-1,a+1),t(e,o,n,s+1,i,a+1)}}(a,s,n,0,a.length-1,0)};U.prototype.range=function(t,e,o,n){return function(t,e,o,n,r,i,a){for(var s,l,u=[0,t.length-1,0],c=[];u.length;){var p=u.pop(),d=u.pop(),h=u.pop();if(d-h<=a)for(var f=h;f<=d;f++)s=e[2*f],l=e[2*f+1],s>=o&&s<=r&&l>=n&&l<=i&&c.push(t[f]);else{var g=Math.floor((h+d)/2);s=e[2*g],l=e[2*g+1],s>=o&&s<=r&&l>=n&&l<=i&&c.push(t[g]);var y=(p+1)%2;(0===p?o<=s:n<=l)&&(u.push(h),u.push(g-1),u.push(y)),(0===p?r>=s:i>=l)&&(u.push(g+1),u.push(d),u.push(y))}}return c}(this.ids,this.coords,t,e,o,n,this.nodeSize)},U.prototype.within=function(t,e,o){return function(t,e,o,n,r,i){for(var a=[0,t.length-1,0],s=[],l=r*r;a.length;){var u=a.pop(),c=a.pop(),p=a.pop();if(c-p<=i)for(var d=p;d<=c;d++)z(e[2*d],e[2*d+1],o,n)<=l&&s.push(t[d]);else{var h=Math.floor((p+c)/2),f=e[2*h],g=e[2*h+1];z(f,g,o,n)<=l&&s.push(t[h]);var y=(u+1)%2;(0===u?o-r<=f:n-r<=g)&&(a.push(p),a.push(h-1),a.push(y)),(0===u?o+r>=f:n+r>=g)&&(a.push(h+1),a.push(c),a.push(y))}}return s}(this.ids,this.coords,t,e,o,this.nodeSize)};var W={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,map:function(t){return t}},K=function(t){this.options=$(Object.create(W),t),this.trees=new Array(this.options.maxZoom+1)};function q(t,e,o,n,r){return{x:t,y:e,zoom:1/0,id:o,parentId:-1,numPoints:n,properties:r}}function Y(t,e){var o=t.geometry.coordinates,n=o[0],r=o[1];return{x:J(n),y:Q(r),zoom:1/0,index:e,parentId:-1}}function Z(t){return{type:"Feature",id:t.id,properties:X(t),geometry:{type:"Point",coordinates:[(n=t.x,360*(n-.5)),(e=t.y,o=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(o))/Math.PI-90)]}};var e,o,n}function X(t){var e=t.numPoints,o=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return $($({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:o})}function J(t){return t/360+.5}function Q(t){var e=Math.sin(t*Math.PI/180),o=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return o<0?0:o>1?1:o}function $(t,e){for(var o in e)t[o]=e[o];return t}function tt(t){return t.x}function et(t){return t.y}function ot(t,e,o,n,r,i){var a=r-o,s=i-n;if(0!==a||0!==s){var l=((t-o)*a+(e-n)*s)/(a*a+s*s);l>1?(o=r,n=i):l>0&&(o+=a*l,n+=s*l)}return(a=t-o)*a+(s=e-n)*s}function nt(t,e,o,n){var r={id:void 0===t?null:t,type:e,geometry:o,tags:n,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,o=t.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)rt(t,e);else if("Polygon"===o||"MultiLineString"===o)for(var n=0;n<e.length;n++)rt(t,e[n]);else if("MultiPolygon"===o)for(n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++)rt(t,e[n][r])}(r),r}function rt(t,e){for(var o=0;o<e.length;o+=3)t.minX=Math.min(t.minX,e[o]),t.minY=Math.min(t.minY,e[o+1]),t.maxX=Math.max(t.maxX,e[o]),t.maxY=Math.max(t.maxY,e[o+1])}function it(t,e,o,n){if(e.geometry){var r=e.geometry.coordinates,i=e.geometry.type,a=Math.pow(o.tolerance/((1<<o.maxZoom)*o.extent),2),s=[],l=e.id;if(o.promoteId?l=e.properties[o.promoteId]:o.generateId&&(l=n||0),"Point"===i)at(r,s);else if("MultiPoint"===i)for(var u=0;u<r.length;u++)at(r[u],s);else if("LineString"===i)st(r,s,a,!1);else if("MultiLineString"===i){if(o.lineMetrics){for(u=0;u<r.length;u++)s=[],st(r[u],s,a,!1),t.push(nt(l,"LineString",s,e.properties));return}lt(r,s,a,!1)}else if("Polygon"===i)lt(r,s,a,!0);else{if("MultiPolygon"!==i){if("GeometryCollection"===i){for(u=0;u<e.geometry.geometries.length;u++)it(t,{id:l,geometry:e.geometry.geometries[u],properties:e.properties},o,n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<r.length;u++){var c=[];lt(r[u],c,a,!0),s.push(c)}}t.push(nt(l,i,s,e.properties))}}function at(t,e){e.push(ut(t[0])),e.push(ct(t[1])),e.push(0)}function st(t,e,o,n){for(var r,i,a=0,s=0;s<t.length;s++){var l=ut(t[s][0]),u=ct(t[s][1]);e.push(l),e.push(u),e.push(0),s>0&&(a+=n?(r*u-l*i)/2:Math.sqrt(Math.pow(l-r,2)+Math.pow(u-i,2))),r=l,i=u}var c=e.length-3;e[2]=1,function t(e,o,n,r){for(var i,a=r,s=n-o>>1,l=n-o,u=e[o],c=e[o+1],p=e[n],d=e[n+1],h=o+3;h<n;h+=3){var f=ot(e[h],e[h+1],u,c,p,d);if(f>a)i=h,a=f;else if(f===a){var g=Math.abs(h-s);g<l&&(i=h,l=g)}}a>r&&(i-o>3&&t(e,o,i,r),e[i+2]=a,n-i>3&&t(e,i,n,r))}(e,0,c,o),e[c+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function lt(t,e,o,n){for(var r=0;r<t.length;r++){var i=[];st(t[r],i,o,n),e.push(i)}}function ut(t){return t/360+.5}function ct(t){var e=Math.sin(t*Math.PI/180),o=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return o<0?0:o>1?1:o}function pt(t,e,o,n,r,i,a,s){if(n/=e,i>=(o/=e)&&a<n)return t;if(a<o||i>=n)return null;for(var l=[],u=0;u<t.length;u++){var c=t[u],p=c.geometry,d=c.type,h=0===r?c.minX:c.minY,f=0===r?c.maxX:c.maxY;if(h>=o&&f<n)l.push(c);else if(!(f<o||h>=n)){var g=[];if("Point"===d||"MultiPoint"===d)dt(p,g,o,n,r);else if("LineString"===d)ht(p,g,o,n,r,!1,s.lineMetrics);else if("MultiLineString"===d)gt(p,g,o,n,r,!1);else if("Polygon"===d)gt(p,g,o,n,r,!0);else if("MultiPolygon"===d)for(var y=0;y<p.length;y++){var v=[];gt(p[y],v,o,n,r,!0),v.length&&g.push(v)}if(g.length){if(s.lineMetrics&&"LineString"===d){for(y=0;y<g.length;y++)l.push(nt(c.id,d,g[y],c.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===g.length?(d="LineString",g=g[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===g.length?"Point":"MultiPoint"),l.push(nt(c.id,d,g,c.tags))}}}return l.length?l:null}function dt(t,e,o,n,r){for(var i=0;i<t.length;i+=3){var a=t[i+r];a>=o&&a<=n&&(e.push(t[i]),e.push(t[i+1]),e.push(t[i+2]))}}function ht(t,e,o,n,r,i,a){for(var s,l,u=ft(t),c=0===r?vt:mt,p=t.start,d=0;d<t.length-3;d+=3){var h=t[d],f=t[d+1],g=t[d+2],y=t[d+3],v=t[d+4],m=0===r?h:f,C=0===r?y:v,_=!1;a&&(s=Math.sqrt(Math.pow(h-y,2)+Math.pow(f-v,2))),m<o?C>o&&(l=c(u,h,f,y,v,o),a&&(u.start=p+s*l)):m>n?C<n&&(l=c(u,h,f,y,v,n),a&&(u.start=p+s*l)):yt(u,h,f,g),C<o&&m>=o&&(l=c(u,h,f,y,v,o),_=!0),C>n&&m<=n&&(l=c(u,h,f,y,v,n),_=!0),!i&&_&&(a&&(u.end=p+s*l),e.push(u),u=ft(t)),a&&(p+=s)}var w=t.length-3;h=t[w],f=t[w+1],g=t[w+2],(m=0===r?h:f)>=o&&m<=n&&yt(u,h,f,g),w=u.length-3,i&&w>=3&&(u[w]!==u[0]||u[w+1]!==u[1])&&yt(u,u[0],u[1],u[2]),u.length&&e.push(u)}function ft(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function gt(t,e,o,n,r,i){for(var a=0;a<t.length;a++)ht(t[a],e,o,n,r,i,!1)}function yt(t,e,o,n){t.push(e),t.push(o),t.push(n)}function vt(t,e,o,n,r,i){var a=(i-e)/(n-e);return t.push(i),t.push(o+(r-o)*a),t.push(1),a}function mt(t,e,o,n,r,i){var a=(i-o)/(r-o);return t.push(e+(n-e)*a),t.push(i),t.push(1),a}function Ct(t,e){for(var o=[],n=0;n<t.length;n++){var r,i=t[n],a=i.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)r=_t(i.geometry,e);else if("MultiLineString"===a||"Polygon"===a){r=[];for(var s=0;s<i.geometry.length;s++)r.push(_t(i.geometry[s],e))}else if("MultiPolygon"===a)for(r=[],s=0;s<i.geometry.length;s++){for(var l=[],u=0;u<i.geometry[s].length;u++)l.push(_t(i.geometry[s][u],e));r.push(l)}o.push(nt(i.id,a,r,i.tags))}return o}function _t(t,e){var o=[];o.size=t.size,void 0!==t.start&&(o.start=t.start,o.end=t.end);for(var n=0;n<t.length;n+=3)o.push(t[n]+e,t[n+1],t[n+2]);return o}function wt(t,e){if(t.transformed)return t;var o,n,r,i=1<<t.z,a=t.x,s=t.y;for(o=0;o<t.features.length;o++){var l=t.features[o],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(n=0;n<u.length;n+=2)l.geometry.push(bt(u[n],u[n+1],e,i,a,s));else for(n=0;n<u.length;n++){var p=[];for(r=0;r<u[n].length;r+=2)p.push(bt(u[n][r],u[n][r+1],e,i,a,s));l.geometry.push(p)}}return t.transformed=!0,t}function bt(t,e,o,n,r,i){return[Math.round(o*(t*n-r)),Math.round(o*(e*n-i))]}function St(t,e,o,n,r){for(var i=e===r.maxZoom?0:r.tolerance/((1<<e)*r.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:o,y:n,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,Et(a,t[s],i,r);var l=t[s].minX,u=t[s].minY,c=t[s].maxX,p=t[s].maxY;l<a.minX&&(a.minX=l),u<a.minY&&(a.minY=u),c>a.maxX&&(a.maxX=c),p>a.maxY&&(a.maxY=p)}return a}function Et(t,e,o,n){var r=e.geometry,i=e.type,a=[];if("Point"===i||"MultiPoint"===i)for(var s=0;s<r.length;s+=3)a.push(r[s]),a.push(r[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===i)xt(a,r,t,o,!1,!1);else if("MultiLineString"===i||"Polygon"===i)for(s=0;s<r.length;s++)xt(a,r[s],t,o,"Polygon"===i,0===s);else if("MultiPolygon"===i)for(var l=0;l<r.length;l++){var u=r[l];for(s=0;s<u.length;s++)xt(a,u[s],t,o,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===i&&n.lineMetrics){for(var p in c={},e.tags)c[p]=e.tags[p];c.mapbox_clip_start=r.start/r.size,c.mapbox_clip_end=r.end/r.size}var d={geometry:a,type:"Polygon"===i||"MultiPolygon"===i?3:"LineString"===i||"MultiLineString"===i?2:1,tags:c};null!==e.id&&(d.id=e.id),t.features.push(d)}}function xt(t,e,o,n,r,i){var a=n*n;if(n>0&&e.size<(r?a:n))o.numPoints+=e.length/3;else{for(var s=[],l=0;l<e.length;l+=3)(0===n||e[l+2]>a)&&(o.numSimplified++,s.push(e[l]),s.push(e[l+1])),o.numPoints++;r&&function(t,e){for(var o=0,n=0,r=t.length,i=r-2;n<r;i=n,n+=2)o+=(t[n]-t[i])*(t[n+1]+t[i+1]);if(o>0===e)for(n=0,r=t.length;n<r/2;n+=2){var a=t[n],s=t[n+1];t[n]=t[r-2-n],t[n+1]=t[r-1-n],t[r-2-n]=a,t[r-1-n]=s}}(s,i),t.push(s)}}function Tt(t,e){var o=(e=this.options=function(t,e){for(var o in e)t[o]=e[o];return t}(Object.create(this.options),e)).debug;if(o&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var n=function(t,e){var o=[];if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)it(o,t.features[n],e,n);else"Feature"===t.type?it(o,t,e):it(o,{geometry:t},e);return o}(t,e);this.tiles={},this.tileCoords=[],o&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(n=function(t,e){var o=e.buffer/e.extent,n=t,r=pt(t,1,-1-o,o,0,-1,2,e),i=pt(t,1,1-o,2+o,0,-1,2,e);return(r||i)&&(n=pt(t,1,-o,1+o,0,-1,2,e)||[],r&&(n=Ct(r,1).concat(n)),i&&(n=n.concat(Ct(i,-1)))),n}(n,e)).length&&this.splitTile(n,0,0,0),o&&(n.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ot(t,e,o){return 32*((1<<t)*o+e)+t}function Rt(t,e){var o=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var n=this._geoJSONIndex.getTile(o.z,o.x,o.y);if(!n)return e(null,null);var r=new S(n.features),i=R(r);0===i.byteOffset&&i.byteLength===i.buffer.byteLength||(i=new Uint8Array(i)),e(null,{vectorTile:r,rawData:i.buffer})}K.prototype.load=function(t){var e=this.options,o=e.log,n=e.minZoom,r=e.maxZoom,i=e.nodeSize;o&&console.time("total time");var a="prepare "+t.length+" points";o&&console.time(a),this.points=t;for(var s=[],l=0;l<t.length;l++)t[l].geometry&&s.push(Y(t[l],l));this.trees[r+1]=new U(s,tt,et,i,Float32Array),o&&console.timeEnd(a);for(var u=r;u>=n;u--){var c=+Date.now();s=this._cluster(s,u),this.trees[u]=new U(s,tt,et,i,Float32Array),o&&console.log("z%d: %d clusters in %dms",u,s.length,+Date.now()-c)}return o&&console.timeEnd("total time"),this},K.prototype.getClusters=function(t,e){var o=((t[0]+180)%360+360)%360-180,n=Math.max(-90,Math.min(90,t[1])),r=180===t[2]?180:((t[2]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)o=-180,r=180;else if(o>r){var a=this.getClusters([o,n,180,i],e),s=this.getClusters([-180,n,r,i],e);return a.concat(s)}for(var l=this.trees[this._limitZoom(e)],u=[],c=0,p=l.range(J(o),Q(i),J(r),Q(n));c<p.length;c+=1){var d=p[c],h=l.points[d];u.push(h.numPoints?Z(h):this.points[h.index])}return u},K.prototype.getChildren=function(t){var e=t>>5,o=t%32,n="No cluster with the specified id.",r=this.trees[o];if(!r)throw new Error(n);var i=r.points[e];if(!i)throw new Error(n);for(var a=this.options.radius/(this.options.extent*Math.pow(2,o-1)),s=[],l=0,u=r.within(i.x,i.y,a);l<u.length;l+=1){var c=u[l],p=r.points[c];p.parentId===t&&s.push(p.numPoints?Z(p):this.points[p.index])}if(0===s.length)throw new Error(n);return s},K.prototype.getLeaves=function(t,e,o){e=e||10,o=o||0;var n=[];return this._appendLeaves(n,t,e,o,0),n},K.prototype.getTile=function(t,e,o){var n=this.trees[this._limitZoom(t)],r=Math.pow(2,t),i=this.options,a=i.extent,s=i.radius/a,l=(o-s)/r,u=(o+1+s)/r,c={features:[]};return this._addTileFeatures(n.range((e-s)/r,l,(e+1+s)/r,u),n.points,e,o,r,c),0===e&&this._addTileFeatures(n.range(1-s/r,l,1,u),n.points,r,o,r,c),e===r-1&&this._addTileFeatures(n.range(0,l,s/r,u),n.points,-1,o,r,c),c.features.length?c:null},K.prototype.getClusterExpansionZoom=function(t){for(var e=t%32-1;e<=this.options.maxZoom;){var o=this.getChildren(t);if(e++,1!==o.length)break;t=o[0].properties.cluster_id}return e},K.prototype._appendLeaves=function(t,e,o,n,r){for(var i=0,a=this.getChildren(e);i<a.length;i+=1){var s=a[i],l=s.properties;if(l&&l.cluster?r+l.point_count<=n?r+=l.point_count:r=this._appendLeaves(t,l.cluster_id,o,n,r):r<n?r++:t.push(s),t.length===o)break}return r},K.prototype._addTileFeatures=function(t,e,o,n,r,i){for(var a=0,s=t;a<s.length;a+=1){var l=e[s[a]],u={type:1,geometry:[[Math.round(this.options.extent*(l.x*r-o)),Math.round(this.options.extent*(l.y*r-n))]],tags:l.numPoints?X(l):this.points[l.index].properties},c=l.numPoints?l.id:this.points[l.index].id;void 0!==c&&(u.id=c),i.features.push(u)}},K.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},K.prototype._cluster=function(t,e){for(var o=[],n=this.options,r=n.radius,i=n.extent,a=n.reduce,s=r/(i*Math.pow(2,e)),l=0;l<t.length;l++){var u=t[l];if(!(u.zoom<=e)){u.zoom=e;for(var c=this.trees[e+1],p=c.within(u.x,u.y,s),d=u.numPoints||1,h=u.x*d,f=u.y*d,g=a?this._map(u,!0):null,y=(l<<5)+(e+1),v=0,m=p;v<m.length;v+=1){var C=m[v],_=c.points[C];if(!(_.zoom<=e)){_.zoom=e;var w=_.numPoints||1;h+=_.x*w,f+=_.y*w,d+=w,_.parentId=y,a&&a(g,this._map(_))}}1===d?o.push(u):(u.parentId=y,o.push(q(h/d,f/d,y,d,g)))}}return o},K.prototype._map=function(t,e){if(t.numPoints)return e?$({},t.properties):t.properties;var o=this.points[t.index].properties,n=this.options.map(o);return e&&n===o?$({},n):n},Tt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Tt.prototype.splitTile=function(t,e,o,n,r,i,a){for(var s=[t,e,o,n],l=this.options,u=l.debug;s.length;){n=s.pop(),o=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,p=Ot(e,o,n),d=this.tiles[p];if(!d&&(u>1&&console.time("creation"),d=this.tiles[p]=St(t,e,o,n,l),this.tileCoords.push({z:e,x:o,y:n}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,o,n,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var h="z"+e;this.stats[h]=(this.stats[h]||0)+1,this.total++}if(d.source=t,r){if(e===l.maxZoom||e===r)continue;var f=1<<r-e;if(o!==Math.floor(i/f)||n!==Math.floor(a/f))continue}else if(e===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==t.length){u>1&&console.time("clipping");var g,y,v,m,C,_,w=.5*l.buffer/l.extent,b=.5-w,S=.5+w,E=1+w;g=y=v=m=null,C=pt(t,c,o-w,o+S,0,d.minX,d.maxX,l),_=pt(t,c,o+b,o+E,0,d.minX,d.maxX,l),t=null,C&&(g=pt(C,c,n-w,n+S,1,d.minY,d.maxY,l),y=pt(C,c,n+b,n+E,1,d.minY,d.maxY,l),C=null),_&&(v=pt(_,c,n-w,n+S,1,d.minY,d.maxY,l),m=pt(_,c,n+b,n+E,1,d.minY,d.maxY,l),_=null),u>1&&console.timeEnd("clipping"),s.push(g||[],e+1,2*o,2*n),s.push(y||[],e+1,2*o,2*n+1),s.push(v||[],e+1,2*o+1,2*n),s.push(m||[],e+1,2*o+1,2*n+1)}}},Tt.prototype.getTile=function(t,e,o){var n=this.options,r=n.extent,i=n.debug;if(t<0||t>24)return null;var a=1<<t,s=Ot(t,e=(e%a+a)%a,o);if(this.tiles[s])return wt(this.tiles[s],r);i>1&&console.log("drilling down to z%d-%d-%d",t,e,o);for(var l,u=t,c=e,p=o;!l&&u>0;)u--,c=Math.floor(c/2),p=Math.floor(p/2),l=this.tiles[Ot(u,c,p)];return l&&l.source?(i>1&&console.log("found parent tile z%d-%d-%d",u,c,p),i>1&&console.time("drilling down"),this.splitTile(l.source,u,c,p,t,e,o),i>1&&console.timeEnd("drilling down"),this.tiles[s]?wt(this.tiles[s],r):null):null};var Pt=function(e){function o(t,o,n){e.call(this,t,o,Rt),n&&(this.loadGeoJSON=n)}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},o.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var o=this._pendingCallback,n=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var r=!!(n&&n.request&&n.request.collectResourceTiming)&&new l.Performance(n.request);this.loadGeoJSON(n,function(i,a){if(i||!a)return o(i);if("object"!=typeof a)return o(new Error("Input data given to '"+n.source+"' is not a valid GeoJSON object."));!function t(e,o){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(m(t,o)),e;case"GeometryCollection":return e.geometries=e.geometries.map(m(t,o)),e;case"Feature":return e.geometry=t(e.geometry,o),e;case"Polygon":case"MultiPolygon":return function(t,e){return"Polygon"===t.type?t.coordinates=C(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(m(C,e))),t}(e,o);default:return e}}(a,!0);try{e._geoJSONIndex=n.cluster?new K(function(e){var o=e.superclusterOptions,n=e.clusterProperties;if(!n||!o)return o;for(var r={},i={},a={accumulated:null,zoom:0},s={properties:null},l=Object.keys(n),u=0,c=l;u<c.length;u+=1){var p=c[u],d=n[p],h=d[0],f=d[1],g=t.createExpression(f),y=t.createExpression("string"==typeof h?[h,["accumulated"],["get",p]]:h);r[p]=g.value,i[p]=y.value}return o.map=function(t){s.properties=t;for(var e={},o=0,n=l;o<n.length;o+=1){var i=n[o];e[i]=r[i].evaluate(a,s)}return e},o.reduce=function(t,e){s.properties=e;for(var o=0,n=l;o<n.length;o+=1){var r=n[o];a.accumulated=t[r],t[r]=i[r].evaluate(a,s)}},o}(n)).load(a.features):new Tt(a,n.geojsonVtOptions)}catch(i){return o(i)}e.loaded={};var s={};if(r){var l=r.finish();l&&(s.resourceTiming={},s.resourceTiming[n.source]=JSON.parse(JSON.stringify(l)))}o(null,s)})}},o.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},o.prototype.reloadTile=function(t,o){var n=this.loaded,r=t.uid;return n&&n[r]?e.prototype.reloadTile.call(this,t,o):this.loadTile(t,o)},o.prototype.loadGeoJSON=function(e,o){if(e.request)t.getJSON(e.request,o);else{if("string"!=typeof e.data)return o(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."));try{return o(null,JSON.parse(e.data))}catch(t){return o(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."))}}},o.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},o.prototype.getClusterExpansionZoom=function(t,e){e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))},o.prototype.getClusterChildren=function(t,e){e(null,this._geoJSONIndex.getChildren(t.clusterId))},o.prototype.getClusterLeaves=function(t,e){e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))},o}(p),At=function(e){var o=this;this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.workerSourceTypes={vector:p,geojson:Pt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(o.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');o.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isLoaded())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return At.prototype.setReferrer=function(t,e){this.referrer=e},At.prototype.setLayers=function(t,e,o){this.getLayerIndex(t).replace(e),o()},At.prototype.updateLayers=function(t,e,o){this.getLayerIndex(t).update(e.layers,e.removedIds),o()},At.prototype.loadTile=function(t,e,o){this.getWorkerSource(t,e.type,e.source).loadTile(e,o)},At.prototype.loadDEMTile=function(t,e,o){this.getDEMWorkerSource(t,e.source).loadTile(e,o)},At.prototype.reloadTile=function(t,e,o){this.getWorkerSource(t,e.type,e.source).reloadTile(e,o)},At.prototype.abortTile=function(t,e,o){this.getWorkerSource(t,e.type,e.source).abortTile(e,o)},At.prototype.removeTile=function(t,e,o){this.getWorkerSource(t,e.type,e.source).removeTile(e,o)},At.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},At.prototype.removeSource=function(t,e,o){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var n=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==n.removeSource?n.removeSource(e,o):o()}},At.prototype.loadWorkerSource=function(t,e,o){try{this.self.importScripts(e.url),o()}catch(t){o(t.toString())}},At.prototype.loadRTLTextPlugin=function(e,o,n){try{t.plugin.isLoaded()||(this.self.importScripts(o),n(t.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+o)))}catch(t){n(t.toString())}},At.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new n),e},At.prototype.getWorkerSource=function(t,e,o){var n=this;if(this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),!this.workerSources[t][e][o]){var r={send:function(e,o,r){n.actor.send(e,o,r,t)}};this.workerSources[t][e][o]=new this.workerSourceTypes[e](r,this.getLayerIndex(t))}return this.workerSources[t][e][o]},At.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new d),this.demWorkerSources[t][e]},At.prototype.enforceCacheSizeLimit=function(e,o){t.enforceCacheSizeLimit(o)},"undefined"!=typeof WorkerGlobalScope&&void 0!==t.window&&t.window instanceof WorkerGlobalScope&&(t.window.worker=new At(t.window)),At}),n(0,function(t){var e=t.createCommonjsModule(function(t){function e(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,o=new Blob([""],{type:"text/javascript"}),n=URL.createObjectURL(o);try{e=new Worker(n),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(n),t}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&function(t){return void 0===o[t]&&(o[t]=function(t){var o=document.createElement("canvas"),n=Object.create(e.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,o.probablySupportsContext?o.probablySupportsContext("webgl",n)||o.probablySupportsContext("experimental-webgl",n):o.supportsContext?o.supportsContext("webgl",n)||o.supportsContext("experimental-webgl",n):o.getContext("webgl",n)||o.getContext("experimental-webgl",n)}(t)),o[t]}(t&&t.failIfMajorPerformanceCaveat))}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e);var o={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),o={create:function(e,o,n){var r=t.window.document.createElement(e);return void 0!==o&&(r.className=o),n&&n.appendChild(r),r},createNS:function(e,o){return t.window.document.createElementNS(e,o)}},n=t.window.document.documentElement.style;function r(t){if(!n)return t[0];for(var e=0;e<t.length;e++)if(t[e]in n)return t[e];return t[0]}var i,a=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);o.disableDrag=function(){n&&a&&(i=n[a],n[a]="none")},o.enableDrag=function(){n&&a&&(n[a]=i)};var s=r(["transform","WebkitTransform"]);o.setTransform=function(t,e){t.style[s]=e};var l=!1;try{var u=Object.defineProperty({},"passive",{get:function(){l=!0}});t.window.addEventListener("test",u,u),t.window.removeEventListener("test",u,u)}catch(t){l=!1}o.addEventListener=function(t,e,o,n){void 0===n&&(n={}),"passive"in n&&l?t.addEventListener(e,o,n):t.addEventListener(e,o,n.capture)},o.removeEventListener=function(t,e,o,n){void 0===n&&(n={}),"passive"in n&&l?t.removeEventListener(e,o,n):t.removeEventListener(e,o,n.capture)};var c=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",c,!0)};function p(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}o.suppressClick=function(){t.window.addEventListener("click",c,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",c,!0)},0)},o.mousePos=function(e,o){var n=e.getBoundingClientRect(),r=t.window.TouchEvent&&o instanceof t.window.TouchEvent?o.touches[0]:o;return new t.Point(r.clientX-n.left-e.clientLeft,r.clientY-n.top-e.clientTop)},o.touchPos=function(e,o){for(var n=e.getBoundingClientRect(),r=[],i="touchend"===o.type?o.changedTouches:o.touches,a=0;a<i.length;a++)r.push(new t.Point(i[a].clientX-n.left-e.clientLeft,i[a].clientY-n.top-e.clientTop));return r},o.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},o.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var d=function(e){function o(){e.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.isLoaded=function(){return this.loaded},o.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,o=this.requestors;e<o.length;e+=1){var n=o[e],r=n.ids,i=n.callback;this._notify(r,i)}this.requestors=[]}},o.prototype.getImage=function(t){return this.images[t]},o.prototype.addImage=function(t,e){this.images[t]=e},o.prototype.updateImage=function(t,e){var o=this.images[t];e.version=o.version+1,this.images[t]=e,this.updatedImages[t]=!0},o.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},o.prototype.listImages=function(){return Object.keys(this.images)},o.prototype.getImages=function(t,e){var o=!0;if(!this.isLoaded())for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.images[i]||(o=!1)}this.isLoaded()||o?this._notify(t,e):this.requestors.push({ids:t,callback:e})},o.prototype._notify=function(e,o){for(var n={},r=0,i=e;r<i.length;r+=1){var a=i[r];this.images[a]||this.fire(new t.Event("styleimagemissing",{id:a}));var s=this.images[a];s?n[a]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:t.warnOnce('Image "'+a+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}o(null,n)},o.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},o.prototype.getPattern=function(e){var o=this.patterns[e],n=this.getImage(e);if(!n)return null;if(o&&o.position.version===n.version)return o.position;if(o)o.position.version=n.version;else{var r={w:n.data.width+2,h:n.data.height+2,x:0,y:0},i=new t.ImagePosition(r,n);this.patterns[e]={bin:r,position:i}}return this._updatePatternAtlas(),this.patterns[e].position},o.prototype.bind=function(e){var o=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,o.RGBA),this.atlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)},o.prototype._updatePatternAtlas=function(){var e=[];for(var o in this.patterns)e.push(this.patterns[o].bin);var n=t.potpack(e),r=n.w,i=n.h,a=this.atlasImage;for(var s in a.resize({width:r||1,height:i||1}),this.patterns){var l=this.patterns[s].bin,u=l.x+1,c=l.y+1,p=this.images[s].data,d=p.width,h=p.height;t.RGBAImage.copy(p,a,{x:0,y:0},{x:u,y:c},{width:d,height:h}),t.RGBAImage.copy(p,a,{x:0,y:h-1},{x:u,y:c-1},{width:d,height:1}),t.RGBAImage.copy(p,a,{x:0,y:0},{x:u,y:c+h},{width:d,height:1}),t.RGBAImage.copy(p,a,{x:d-1,y:0},{x:u-1,y:c},{width:1,height:h}),t.RGBAImage.copy(p,a,{x:0,y:0},{x:u+d,y:c},{width:1,height:h})}this.dirty=!0},o.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},o.prototype.dispatchRenderCallbacks=function(t){for(var e=0,o=t;e<o.length;e+=1){var n=o[e];if(!this.callbackDispatchedThisFrame[n]){this.callbackDispatchedThisFrame[n]=!0;var r=this.images[n];p(r)&&this.updateImage(n,r)}}},o}(t.Evented),h=g,f=1e20;function g(t,e,o,n,r,i){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=n||.25,this.fontFamily=r||"sans-serif",this.fontWeight=i||"normal",this.radius=o||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function y(t,e,o,n,r,i,a){for(var s=0;s<e;s++){for(var l=0;l<o;l++)n[l]=t[l*e+s];for(v(n,r,i,a,o),l=0;l<o;l++)t[l*e+s]=r[l]}for(l=0;l<o;l++){for(s=0;s<e;s++)n[s]=t[l*e+s];for(v(n,r,i,a,e),s=0;s<e;s++)t[l*e+s]=Math.sqrt(r[s])}}function v(t,e,o,n,r){o[0]=0,n[0]=-f,n[1]=+f;for(var i=1,a=0;i<r;i++){for(var s=(t[i]+i*i-(t[o[a]]+o[a]*o[a]))/(2*i-2*o[a]);s<=n[a];)a--,s=(t[i]+i*i-(t[o[a]]+o[a]*o[a]))/(2*i-2*o[a]);o[++a]=i,n[a]=s,n[a+1]=+f}for(i=0,a=0;i<r;i++){for(;n[a+1]<i;)a++;e[i]=(i-o[a])*(i-o[a])+t[o[a]]}}g.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),o=new Uint8ClampedArray(this.size*this.size),n=0;n<this.size*this.size;n++){var r=e.data[4*n+3]/255;this.gridOuter[n]=1===r?0:0===r?f:Math.pow(Math.max(0,.5-r),2),this.gridInner[n]=1===r?f:0===r?0:Math.pow(Math.max(0,r-.5),2)}for(y(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),y(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),n=0;n<this.size*this.size;n++){var i=this.gridOuter[n]-this.gridInner[n];o[n]=Math.max(0,Math.min(255,Math.round(255-255*(i/this.radius+this.cutoff))))}return o};var m=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};m.prototype.setURL=function(t){this.url=t},m.prototype.getGlyphs=function(e,o){var n=this,r=[];for(var i in e)for(var a=0,s=e[i];a<s.length;a+=1){var l=s[a];r.push({stack:i,id:l})}t.asyncAll(r,function(t,e){var o=t.stack,r=t.id,i=n.entries[o];i||(i=n.entries[o]={glyphs:{},requests:{}});var a=i.glyphs[r];if(void 0===a)if(a=n._tinySDF(i,o,r))e(null,{stack:o,id:r,glyph:a});else{var s=Math.floor(r/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else{var l=i.requests[s];l||(l=i.requests[s]=[],m.loadGlyphRange(o,s,n.url,n.requestManager,function(t,e){if(e)for(var o in e)i.glyphs[+o]=e[+o];for(var n=0,r=l;n<r.length;n+=1)(0,r[n])(t,e);delete i.requests[s]})),l.push(function(t,n){t?e(t):n&&e(null,{stack:o,id:r,glyph:n[r]||null})})}}else e(null,{stack:o,id:r,glyph:a})},function(t,e){if(t)o(t);else if(e){for(var n={},r=0,i=e;r<i.length;r+=1){var a=i[r],s=a.stack,l=a.id,u=a.glyph;(n[s]||(n[s]={}))[l]=u&&{id:u.id,bitmap:u.bitmap.clone(),metrics:u.metrics}}o(null,n)}})},m.prototype._tinySDF=function(e,o,n){var r=this.localIdeographFontFamily;if(r&&(t.isChar["CJK Unified Ideographs"](n)||t.isChar["Hangul Syllables"](n)||t.isChar.Hiragana(n)||t.isChar.Katakana(n))){var i=e.tinySDF;if(!i){var a="400";/bold/i.test(o)?a="900":/medium/i.test(o)?a="500":/light/i.test(o)&&(a="200"),i=e.tinySDF=new m.TinySDF(24,3,8,.25,r,a)}return{id:n,bitmap:new t.AlphaImage({width:30,height:30},i.draw(String.fromCharCode(n))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},m.loadGlyphRange=function(e,o,n,r,i){var a=256*o,s=a+255,l=r.transformRequest(r.normalizeGlyphsURL(n).replace("{fontstack}",e).replace("{range}",a+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(l,function(e,o){if(e)i(e);else if(o){for(var n={},r=0,a=t.parseGlyphPBF(o);r<a.length;r+=1){var s=a[r];n[s.id]=s}i(null,n)}})},m.TinySDF=h;var C=function(){this.specification=t.styleSpec.light.position};C.prototype.possiblyEvaluate=function(e,o){return t.sphericalToCartesian(e.expression.evaluate(o))},C.prototype.interpolate=function(e,o,n){return{x:t.number(e.x,o.x,n),y:t.number(e.y,o.y,n),z:t.number(e.z,o.z,n)}};var _=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new C,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),w=function(e){function o(o){e.call(this),this._transitionable=new t.Transitionable(_),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.getLight=function(){return this._transitionable.serialize()},o.prototype.setLight=function(e,o){if(void 0===o&&(o={}),!this._validate(t.validateLight,e,o))for(var n in e){var r=e[n];t.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-"-transition".length),r):this._transitionable.setValue(n,r)}},o.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},o.prototype.hasTransition=function(){return this._transitioning.hasTransition()},o.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},o.prototype._validate=function(e,o,n){return(!n||!1!==n.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:o,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},o}(t.Evented),b=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};b.prototype.getDash=function(t,e){var o=t.join(",")+String(e);return this.positions[o]||(this.positions[o]=this.addDash(t,e)),this.positions[o]},b.prototype.addDash=function(e,o){var n=o?7:0,r=2*n+1;if(this.nextRow+r>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var i=0,a=0;a<e.length;a++)i+=e[a];for(var s=this.width/i,l=s/2,u=e.length%2==1,c=-n;c<=n;c++)for(var p=this.nextRow+n+c,d=this.width*p,h=u?-e[e.length-1]:0,f=e[0],g=1,y=0;y<this.width;y++){for(;f<y/s;)h=f,f+=e[g],u&&g===e.length-1&&(f+=e[0]),g++;var v=Math.abs(y-h*s),m=Math.abs(y-f*s),C=Math.min(v,m),_=g%2==1,w=void 0;if(o){var b=n?c/n*(l+1):0;if(_){var S=l-Math.abs(b);w=Math.sqrt(C*C+S*S)}else w=l-Math.sqrt(C*C+b*b)}else w=(_?1:-1)*C;this.data[3+4*(d+y)]=Math.max(0,Math.min(255,w+128))}var E={y:(this.nextRow+n+.5)/this.height,height:2*n/this.height,width:i};return this.nextRow+=r,this.dirty=!0,E},b.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))};var S=function e(o,n){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var r=this.workerPool.acquire(this.id),i=0;i<r.length;i++){var a=r[i],s=new e.Actor(a,n,this.id);s.name="Worker "+i,this.actors.push(s)}};function E(e,o,n){var r=function(r,i){if(r)return n(r);if(i){var a=t.pick(i,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);i.vector_layers&&(a.vectorLayers=i.vector_layers,a.vectorLayerIds=a.vectorLayers.map(function(t){return t.id})),e.url&&(a.tiles=o.canonicalizeTileset(a,e.url)),n(null,a)}};return e.url?t.getJSON(o.transformRequest(o.normalizeSourceURL(e.url),t.ResourceType.Source),r):t.browser.frame(function(){return r(null,e)})}S.prototype.broadcast=function(e,o,n){n=n||function(){},t.asyncAll(this.actors,function(t,n){t.send(e,o,n)},n)},S.prototype.send=function(t,e,o,n){return("number"!=typeof n||isNaN(n))&&(n=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[n].send(t,e,o),n},S.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},S.Actor=t.Actor;var x=function(e,o,n){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=o||0,this.maxzoom=n||24};x.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},x.prototype.contains=function(e){var o=Math.pow(2,e.z),n=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*o),r=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*o),i=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*o),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*o);return e.x>=n&&e.x<i&&e.y>=r&&e.y<a};var T=function(e){function o(o,n,r,i){if(e.call(this),this.id=o,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,t.extend(this,t.pick(n,["url","scheme","tileSize"])),this._options=t.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i)}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._requestManager,function(o,n){e._tileJSONRequest=null,o?e.fire(new t.ErrorEvent(o)):n&&(t.extend(e,n),n.bounds&&(e.tileBounds=new x(n.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(n.tiles),t.postMapLoadEvent(n.tiles,e.map._getMapId(),e.map._requestManager._skuToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},o.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},o.prototype.onAdd=function(t){this.map=t,this.load()},o.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},o.prototype.serialize=function(){return t.extend({},this._options)},o.prototype.loadTile=function(e,o){var n=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,null),r={request:this.map._requestManager.transformRequest(n,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};function i(n,r){return e.aborted?o(null):n&&404!==n.status?o(n):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),o(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}r.request.collectResourceTiming=this._collectResourceTiming,void 0===e.workerID||"expired"===e.state?e.workerID=this.dispatcher.send("loadTile",r,i.bind(this)):"loading"===e.state?e.reloadCallback=o:this.dispatcher.send("reloadTile",r,i.bind(this),e.workerID)},o.prototype.abortTile=function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},o.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0,t.workerID)},o.prototype.hasTransition=function(){return!1},o}(t.Evented),O=function(e){function o(o,n,r,i){e.call(this),this.id=o,this.dispatcher=r,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({},n),t.extend(this,t.pick(n,["url","scheme","tileSize"]))}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=E(this._options,this.map._requestManager,function(o,n){e._tileJSONRequest=null,o?e.fire(new t.ErrorEvent(o)):n&&(t.extend(e,n),n.bounds&&(e.tileBounds=new x(n.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(n.tiles),t.postMapLoadEvent(n.tiles,e.map._getMapId(),e.map._requestManager._skuToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},o.prototype.onAdd=function(t){this.map=t,this.load()},o.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},o.prototype.serialize=function(){return t.extend({},this._options)},o.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},o.prototype.loadTile=function(e,o){var n=this,r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),function(r,i){if(delete e.request,e.aborted)e.state="unloaded",o(null);else if(r)e.state="errored",o(r);else if(i){n.map._refreshExpiredTiles&&e.setExpiryData(i),delete i.cacheControl,delete i.expires;var a=n.map.painter.context,s=a.gl;e.texture=n.map.painter.getTileTexture(i.width),e.texture?e.texture.update(i,{useMipmap:!0}):(e.texture=new t.Texture(a,i,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(n.dispatcher),o(null)}})},o.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},o.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},o.prototype.hasTransition=function(){return!1},o}(t.Evented),R=function(e){function o(o,n,r,i){e.call(this,o,n,r,i),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({},n),this.encoding=n.encoding||"mapbox"}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},o.prototype.loadTile=function(e,o){var n=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(n,t.ResourceType.Tile),function(n,r){if(delete e.request,e.aborted)e.state="unloaded",o(null);else if(n)e.state="errored",o(n);else if(r){this.map._refreshExpiredTiles&&e.setExpiryData(r),delete r.cacheControl,delete r.expires;var i=t.browser.getImageData(r),a={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:i,encoding:this.encoding};e.workerID&&"expired"!==e.state||(e.workerID=this.dispatcher.send("loadDEMTile",a,function(t,n){t&&(e.state="errored",o(t)),n&&(e.dem=n,e.needsHillshadePrepare=!0,e.state="loaded",o(null))}.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},o.prototype._getNeighboringTiles=function(e){var o=e.canonical,n=Math.pow(2,o.z),r=(o.x-1+n)%n,i=0===o.x?e.wrap-1:e.wrap,a=(o.x+1+n)%n,s=o.x+1===n?e.wrap+1:e.wrap,l={};return l[new t.OverscaledTileID(e.overscaledZ,i,o.z,r,o.y).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,o.z,a,o.y).key]={backfilled:!1},o.y>0&&(l[new t.OverscaledTileID(e.overscaledZ,i,o.z,r,o.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,o.z,a,o.y-1).key]={backfilled:!1}),o.y+1<n&&(l[new t.OverscaledTileID(e.overscaledZ,i,o.z,r,o.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,e.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},l[new t.OverscaledTileID(e.overscaledZ,s,o.z,a,o.y+1).key]={backfilled:!1}),l},o.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:t.uid,source:this.id},void 0,t.workerID)},o}(O),P=function(e){function o(o,n,r,i){e.call(this),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this.dispatcher=r,this.setEventedParent(i),this._data=n.data,this._options=t.extend({},n),this._collectResourceTiming=n.collectResourceTiming,this._resourceTiming=[],void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution);var a=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*a,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*a,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?Math.min(n.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(n.clusterRadius||50)*a,log:!1},clusterProperties:n.clusterProperties},n.workerOptions)}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(o){if(o)e.fire(new t.ErrorEvent(o));else{var n={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(n.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",n))}})},o.prototype.onAdd=function(t){this.map=t,this.load()},o.prototype.setData=function(e){var o=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(e){if(e)o.fire(new t.ErrorEvent(e));else{var n={dataType:"source",sourceDataType:"content"};o._collectResourceTiming&&o._resourceTiming&&o._resourceTiming.length>0&&(n.resourceTiming=o._resourceTiming,o._resourceTiming=[]),o.fire(new t.Event("data",n))}}),this},o.prototype.getClusterExpansionZoom=function(t,e){return this.dispatcher.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e,this.workerID),this},o.prototype.getClusterChildren=function(t,e){return this.dispatcher.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e,this.workerID),this},o.prototype.getClusterLeaves=function(t,e,o,n){return this.dispatcher.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:o},n,this.workerID),this},o.prototype._updateWorkerData=function(e){var o=this,n=t.extend({},this.workerOptions),r=this._data;"string"==typeof r?(n.request=this.map._requestManager.transformRequest(t.browser.resolveURL(r),t.ResourceType.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(r),this.workerID=this.dispatcher.send(this.type+".loadData",n,function(t,r){o._removed||r&&r.abandoned||(o._loaded=!0,r&&r.resourceTiming&&r.resourceTiming[o.id]&&(o._resourceTiming=r.resourceTiming[o.id].slice(0)),o.dispatcher.send(o.type+".coalesce",{source:n.source},null,o.workerID),e(t))},this.workerID)},o.prototype.loadTile=function(e,o){var n=this,r=void 0===e.workerID?"loadTile":"reloadTile",i={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};e.workerID=this.dispatcher.send(r,i,function(t,i){return e.unloadVectorData(),e.aborted?o(null):t?o(t):(e.loadVectorData(i,n.map.painter,"reloadTile"===r),o(null))},this.workerID)},o.prototype.abortTile=function(t){t.aborted=!0},o.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},o.prototype.onRemove=function(){this._removed=!0,this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},o.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},o.prototype.hasTransition=function(){return!1},o}(t.Evented),A=function(e){function o(t,o,n,r){e.call(this),this.id=t,this.dispatcher=n,this.coordinates=o.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(r),this.options=o}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.load=function(e,o){var n=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),function(r,i){r?n.fire(new t.ErrorEvent(r)):i&&(n.image=i,e&&(n.coordinates=e),o&&o(),n._finishLoading())})},o.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,function(){e.texture=null}),this):this},o.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},o.prototype.onAdd=function(t){this.map=t,this.load()},o.prototype.setCoordinates=function(e){var o=this;this.coordinates=e;var n=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var o=1/0,n=1/0,r=-1/0,i=-1/0,a=0,s=e;a<s.length;a+=1){var l=s[a];o=Math.min(o,l.x),n=Math.min(n,l.y),r=Math.max(r,l.x),i=Math.max(i,l.y)}var u=r-o,c=i-n,p=Math.max(u,c),d=Math.max(0,Math.floor(-Math.log(p)/Math.LN2)),h=Math.pow(2,d);return new t.CanonicalTileID(d,Math.floor((o+r)/2*h),Math.floor((n+i)/2*h))}(n),this.minzoom=this.maxzoom=this.tileID.z;var r=n.map(function(t){return o.tileID.getTilePoint(t)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(r[0].x,r[0].y,0,0),this._boundsArray.emplaceBack(r[1].x,r[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(r[3].x,r[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(r[2].x,r[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},o.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,o=e.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[n];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},o.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},o.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},o.prototype.hasTransition=function(){return!1},o}(t.Evented),D=function(e){function o(t,o,n,r){e.call(this,t,o,n,r),this.roundZoom=!0,this.type="video",this.options=o}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.load=function(){var e=this,o=this.options;this.urls=[];for(var n=0,r=o.urls;n<r.length;n+=1){var i=r[n];this.urls.push(this.map._requestManager.transformRequest(i,t.ResourceType.Source).url)}t.getVideo(this.urls,function(o,n){o?e.fire(new t.ErrorEvent(o)):n&&(e.video=n,e.video.loop=!0,e.video.addEventListener("playing",function(){e.map.triggerRepaint()}),e.map&&e.video.play(),e._finishLoading())})},o.prototype.getVideo=function(){return this.video},o.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},o.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,o=e.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE)),this.tiles){var r=this.tiles[n];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}}},o.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},o.prototype.hasTransition=function(){return this.video&&!this.video.paused},o}(A),M=function(e){function o(o,n,r,i){e.call(this,o,n,r,i),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some(function(t){return!Array.isArray(t)||2!==t.length||t.some(function(t){return"number"!=typeof t})})||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+o,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+o,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+o,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+o,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+o,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},o.prototype.getCanvas=function(){return this.canvas},o.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},o.prototype.onRemove=function(){this.pause()},o.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var o=this.map.painter.context,n=o.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,t.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(o,this.canvas,n.RGBA,{premultiply:!0}),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},o.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},o.prototype.hasTransition=function(){return this._playing},o.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var o=e[t];if(isNaN(o)||o<=0)return!0}return!1},o}(A),I={vector:T,raster:O,"raster-dem":R,geojson:P,video:D,image:A,canvas:M},L=function(e,o,n,r){var i=new I[o.type](e,o,n,r);if(i.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+i.id);return t.bindAll(["load","abort","unload","serialize","prepare"],i),i};function F(e,o){var n=t.identity([]);return t.translate(n,n,[1,1,0]),t.scale(n,n,[.5*e.width,.5*e.height,1]),t.multiply(n,n,e.calculatePosMatrix(o.toUnwrapped()))}function N(t,e,o,n,r){var i=function(t,e,o){if(t)for(var n=0,r=t;n<r.length;n+=1){var i=e[r[n]];if(i&&i.source===o&&"fill-extrusion"===i.type)return!0}else for(var a in e){var s=e[a];if(s.source===o&&"fill-extrusion"===s.type)return!0}return!1}(n&&n.layers,e,t.id),a=r.maxPitchScaleFactor(),s=t.tilesIn(o,a,i);s.sort(k);for(var l=[],u=0,c=s;u<c.length;u+=1){var p=c[u];l.push({wrappedTileID:p.tileID.wrapped().key,queryResults:p.tile.queryRenderedFeatures(e,t._state,p.queryGeometry,p.cameraQueryGeometry,p.scale,n,r,a,F(t.transform,p.tileID))})}var d=function(t){for(var e={},o={},n=0,r=t;n<r.length;n+=1){var i=r[n],a=i.queryResults,s=i.wrappedTileID,l=o[s]=o[s]||{};for(var u in a)for(var c=a[u],p=l[u]=l[u]||{},d=e[u]=e[u]||[],h=0,f=c;h<f.length;h+=1){var g=f[h];p[g.featureIndex]||(p[g.featureIndex]=!0,d.push(g))}}return e}(l);for(var h in d)d[h].forEach(function(e){var o=e.feature,n=t.getFeatureState(o.layer["source-layer"],o.id);o.source=o.layer.source,o.layer["source-layer"]&&(o.sourceLayer=o.layer["source-layer"]),o.state=n});return d}function k(t,e){var o=t.tileID,n=e.tileID;return o.overscaledZ-n.overscaledZ||o.canonical.y-n.canonical.y||o.wrap-n.wrap||o.canonical.x-n.canonical.x}var G=function(t,e){this.max=t,this.onRemove=e,this.reset()};G.prototype.reset=function(){for(var t in this.data)for(var e=0,o=this.data[t];e<o.length;e+=1){var n=o[e];n.timeout&&clearTimeout(n.timeout),this.onRemove(n.value)}return this.data={},this.order=[],this},G.prototype.add=function(t,e,o){var n=this,r=t.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);var i={value:e,timeout:void 0};if(void 0!==o&&(i.timeout=setTimeout(function(){n.remove(t,i)},o)),this.data[r].push(i),this.order.push(r),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},G.prototype.has=function(t){return t.wrapped().key in this.data},G.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},G.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},G.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},G.prototype.remove=function(t,e){if(!this.has(t))return this;var o=t.wrapped().key,n=void 0===e?0:this.data[o].indexOf(e),r=this.data[o][n];return this.data[o].splice(n,1),r.timeout&&clearTimeout(r.timeout),0===this.data[o].length&&delete this.data[o],this.onRemove(r.value),this.order.splice(this.order.indexOf(o),1),this},G.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this};var V=function(t,e,o){this.context=t;var n=t.gl;this.buffer=n.createBuffer(),this.dynamicDraw=Boolean(o),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};V.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},V.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},V.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var B={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},z=function(t,e,o,n){this.length=e.length,this.attributes=o,this.itemSize=e.bytesPerElement,this.dynamicDraw=n,this.context=t;var r=t.gl;this.buffer=r.createBuffer(),t.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};z.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},z.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},z.prototype.enableAttributes=function(t,e){for(var o=0;o<this.attributes.length;o++){var n=this.attributes[o],r=e.attributes[n.name];void 0!==r&&t.enableVertexAttribArray(r)}},z.prototype.setVertexAttribPointers=function(t,e,o){for(var n=0;n<this.attributes.length;n++){var r=this.attributes[n],i=e.attributes[r.name];void 0!==i&&t.vertexAttribPointer(i,r.components,t[B[r.type]],!1,this.itemSize,r.offset+this.itemSize*(o||0))}},z.prototype.destroy=function(){var t=this.context.gl;this.buffer&&(t.deleteBuffer(this.buffer),delete this.buffer)};var H=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};H.prototype.get=function(){return this.current},H.prototype.set=function(t){},H.prototype.getDefault=function(){return this.default},H.prototype.setDefault=function(){this.set(this.default)};var j=function(e){function o(){e.apply(this,arguments)}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.getDefault=function(){return t.Color.transparent},o.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},o}(H),U=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(H),W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(H),K=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(H),q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(H),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(H),Z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(H),X=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(H),J=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(H),Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(H),$=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(H),tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(H),et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(H),ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(H),nt=function(e){function o(){e.apply(this,arguments)}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.getDefault=function(){return t.Color.transparent},o.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},o}(H),rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(H),it=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(H),at=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(H),st=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(H),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(H),ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(H),ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(H),pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(H),dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(H),ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(H),ft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(H),gt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(H),yt=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(H),vt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(H),mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(H),Ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(H),_t=function(t){function e(e,o){t.call(this,e),this.context=e,this.parent=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDefault=function(){return null},e}(H),wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(_t),bt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(_t),St=function(t,e,o){this.context=t,this.width=e,this.height=o;var n=t.gl,r=this.framebuffer=n.createFramebuffer();this.colorAttachment=new wt(t,r),this.depthAttachment=new bt(t,r)};St.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();e&&t.deleteTexture(e);var o=this.depthAttachment.get();o&&t.deleteRenderbuffer(o),t.deleteFramebuffer(this.framebuffer)};var Et=function(t,e,o){this.func=t,this.mask=e,this.range=o};Et.ReadOnly=!1,Et.ReadWrite=!0,Et.disabled=new Et(519,Et.ReadOnly,[0,1]);var xt=function(t,e,o,n,r,i){this.test=t,this.ref=e,this.mask=o,this.fail=n,this.depthFail=r,this.pass=i};xt.disabled=new xt({func:519,mask:0},0,0,7680,7680,7680);var Tt=function(t,e,o){this.blendFunction=t,this.blendColor=e,this.mask=o};Tt.disabled=new Tt(Tt.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),Tt.unblended=new Tt(Tt.Replace,t.Color.transparent,[!0,!0,!0,!0]),Tt.alphaBlended=new Tt([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Ot=function(t,e,o){this.enable=t,this.mode=e,this.frontFace=o};Ot.disabled=new Ot(!1,1029,2305),Ot.backCCW=new Ot(!0,1029,2305);var Rt=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new j(this),this.clearDepth=new U(this),this.clearStencil=new W(this),this.colorMask=new K(this),this.depthMask=new q(this),this.stencilMask=new Y(this),this.stencilFunc=new Z(this),this.stencilOp=new X(this),this.stencilTest=new J(this),this.depthRange=new Q(this),this.depthTest=new $(this),this.depthFunc=new tt(this),this.blend=new et(this),this.blendFunc=new ot(this),this.blendColor=new nt(this),this.blendEquation=new rt(this),this.cullFace=new it(this),this.cullFaceSide=new at(this),this.frontFace=new st(this),this.program=new lt(this),this.activeTexture=new ut(this),this.viewport=new ct(this),this.bindFramebuffer=new pt(this),this.bindRenderbuffer=new dt(this),this.bindTexture=new ht(this),this.bindVertexBuffer=new ft(this),this.bindElementBuffer=new gt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new yt(this),this.pixelStoreUnpack=new vt(this),this.pixelStoreUnpackPremultiplyAlpha=new mt(this),this.pixelStoreUnpackFlipY=new Ct(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear")};Rt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Rt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Rt.prototype.createIndexBuffer=function(t,e){return new V(this,t,e)},Rt.prototype.createVertexBuffer=function(t,e,o){return new z(this,t,e,o)},Rt.prototype.createRenderbuffer=function(t,e,o){var n=this.gl,r=n.createRenderbuffer();return this.bindRenderbuffer.set(r),n.renderbufferStorage(n.RENDERBUFFER,t,e,o),this.bindRenderbuffer.set(null),r},Rt.prototype.createFramebuffer=function(t,e){return new St(this,t,e)},Rt.prototype.clear=function(t){var e=t.color,o=t.depth,n=this.gl,r=0;e&&(r|=n.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==o&&(r|=n.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),n.clear(r)},Rt.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},Rt.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},Rt.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},Rt.prototype.setColorMode=function(e){t.deepEqual(e.blendFunction,Tt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},Rt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Pt=function(e){function o(o,n,r){var i=this;e.call(this),this.id=o,this.dispatcher=r,this.on("data",function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(i._sourceLoaded=!0),i._sourceLoaded&&!i._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(i.reload(),i.transform&&i.update(i.transform))}),this.on("error",function(){i._sourceErrored=!0}),this._source=L(o,n,r,this),this._tiles={},this._cache=new G(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},o.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},o.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},o.prototype.getSource=function(){return this._source},o.prototype.pause=function(){this._paused=!0},o.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},o.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},o.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,function(){})},o.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,function(){})},o.prototype.serialize=function(){return this._source.serialize()},o.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var o=this._tiles[e];o.upload(t),o.prepare(this.map.style.imageManager)}},o.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(At)},o.prototype.getRenderableIds=function(e){var o=this,n=[];for(var r in this._tiles)this._isIdRenderable(+r,e)&&n.push(+r);return e?n.sort(function(e,n){var r=o._tiles[e].tileID,i=o._tiles[n].tileID,a=new t.Point(r.canonical.x,r.canonical.y)._rotate(o.transform.angle),s=new t.Point(i.canonical.x,i.canonical.y)._rotate(o.transform.angle);return r.overscaledZ-i.overscaledZ||s.y-a.y||s.x-a.x}):n.sort(At)},o.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},o.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},o.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},o.prototype._reloadTile=function(t,e){var o=this._tiles[t];o&&("loading"!==o.state&&(o.state=e),this._loadTile(o,this._tileLoaded.bind(this,o,t,e)))},o.prototype._tileLoaded=function(e,o,n,r){if(r)return e.state="errored",void(404!==r.status?this._source.fire(new t.ErrorEvent(r,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(o,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},o.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),o=0;o<e.length;o++){var n=e[o];if(t.neighboringTiles&&t.neighboringTiles[n]){var r=this.getTileByID(n);i(t,r),i(r,t)}}function i(t,e){t.needsHillshadePrepare=!0;var o=e.tileID.canonical.x-t.tileID.canonical.x,n=e.tileID.canonical.y-t.tileID.canonical.y,r=Math.pow(2,t.tileID.canonical.z),i=e.tileID.key;0===o&&0===n||Math.abs(n)>1||(Math.abs(o)>1&&(1===Math.abs(o+r)?o+=r:1===Math.abs(o-r)&&(o-=r)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,o,n),t.neighboringTiles&&t.neighboringTiles[i]&&(t.neighboringTiles[i].backfilled=!0)))}},o.prototype.getTile=function(t){return this.getTileByID(t.key)},o.prototype.getTileByID=function(t){return this._tiles[t]},o.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},o.prototype._retainLoadedChildren=function(t,e,o,n){for(var r in this._tiles){var i=this._tiles[r];if(!(n[r]||!i.hasData()||i.tileID.overscaledZ<=e||i.tileID.overscaledZ>o)){for(var a=i.tileID;i&&i.tileID.overscaledZ>e+1;){var s=i.tileID.scaledTo(i.tileID.overscaledZ-1);(i=this._tiles[s.key])&&i.hasData()&&(a=s)}for(var l=a;l.overscaledZ>e;)if(t[(l=l.scaledTo(l.overscaledZ-1)).key]){n[a.key]=a;break}}}},o.prototype.findLoadedParent=function(t,e){for(var o=t.overscaledZ-1;o>=e;o--){var n=t.scaledTo(o);if(!n)return;var r=String(n.key),i=this._tiles[r];if(i&&i.hasData())return i;if(this._cache.has(n))return this._cache.get(n)}},o.prototype.updateCacheSize=function(t){var e=(Math.ceil(t.width/this._source.tileSize)+1)*(Math.ceil(t.height/this._source.tileSize)+1),o=Math.floor(5*e),n="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,o):o;this._cache.setMaxSize(n)},o.prototype.handleWrapJump=function(t){var e=(t-(void 0===this._prevLng?t:this._prevLng))/360,o=Math.round(e);if(this._prevLng=t,o){var n={};for(var r in this._tiles){var i=this._tiles[r];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+o),n[i.tileID.key]=i}for(var a in this._tiles=n,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var s in this._tiles){var l=this._tiles[s];this._setTileReloadTimer(s,l)}}},o.prototype.update=function(e){var n=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var r;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)}):(r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter(function(t){return n._source.hasTile(t)}))):r=[];var i=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),a=Math.max(i-o.maxOverzooming,this._source.minzoom),s=Math.max(i+o.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(r,i);if(Dt(this._source.type)){for(var u={},c={},p=0,d=Object.keys(l);p<d.length;p+=1){var h=d[p],f=l[h],g=this._tiles[h];if(g&&!(g.fadeEndTime&&g.fadeEndTime<=t.browser.now())){var y=this.findLoadedParent(f,a);y&&(this._addTile(y.tileID),u[y.tileID.key]=y.tileID),c[h]=f}}for(var v in this._retainLoadedChildren(c,i,s,l),u)l[v]||(this._coveredTiles[v]=!0,l[v]=u[v])}for(var m in l)this._tiles[m].clearFadeHold();for(var C=0,_=t.keysDifference(this._tiles,l);C<_.length;C+=1){var w=_[C],b=this._tiles[w];b.hasSymbolBuckets&&!b.holdingForFade()?b.setHoldDuration(this.map._fadeDuration):b.hasSymbolBuckets&&!b.symbolFadeFinished()||this._removeTile(w)}}},o.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},o.prototype._updateRetainedTiles=function(t,e){for(var n={},r={},i=Math.max(e-o.maxOverzooming,this._source.minzoom),a=Math.max(e+o.maxUnderzooming,this._source.minzoom),s={},l=0,u=t;l<u.length;l+=1){var c=u[l],p=this._addTile(c);n[c.key]=c,p.hasData()||e<this._source.maxzoom&&(s[c.key]=c)}this._retainLoadedChildren(s,e,a,n);for(var d=0,h=t;d<h.length;d+=1){var f=h[d],g=this._tiles[f.key];if(!g.hasData()){if(e+1>this._source.maxzoom){var y=f.children(this._source.maxzoom)[0],v=this.getTile(y);if(v&&v.hasData()){n[y.key]=y;continue}}else{var m=f.children(this._source.maxzoom);if(n[m[0].key]&&n[m[1].key]&&n[m[2].key]&&n[m[3].key])continue}for(var C=g.wasRequested(),_=f.overscaledZ-1;_>=i;--_){var w=f.scaledTo(_);if(r[w.key])break;if(r[w.key]=!0,!(g=this.getTile(w))&&C&&(g=this._addTile(w)),g&&(n[w.key]=w,C=g.wasRequested(),g.hasData()))break}}}return n},o.prototype._addTile=function(e){var o=this._tiles[e.key];if(o)return o;(o=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,o),o.tileID=e,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,o)));var n=Boolean(o);return n||(o=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(o,this._tileLoaded.bind(this,o,e.key,o.state))),o?(o.uses++,this._tiles[e.key]=o,n||this._source.fire(new t.Event("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o):null},o.prototype._setTileReloadTimer=function(t,e){var o=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var n=e.getExpiryTimeout();n&&(this._timers[t]=setTimeout(function(){o._reloadTile(t,"expired"),delete o._timers[t]},n))},o.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},o.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},o.prototype.tilesIn=function(e,o,n){var r=this,i=[],a=this.transform;if(!a)return i;for(var s=n?a.getCameraQueryGeometry(e):e,l=e.map(function(t){return a.pointCoordinate(t)}),u=s.map(function(t){return a.pointCoordinate(t)}),c=this.getIds(),p=1/0,d=1/0,h=-1/0,f=-1/0,g=0,y=u;g<y.length;g+=1){var v=y[g];p=Math.min(p,v.x),d=Math.min(d,v.y),h=Math.max(h,v.x),f=Math.max(f,v.y)}for(var m=function(e){var n=r._tiles[c[e]];if(!n.holdingForFade()){var s=n.tileID,g=Math.pow(2,a.zoom-n.tileID.overscaledZ),y=o*n.queryPadding*t.EXTENT/n.tileSize/g,v=[s.getTilePoint(new t.MercatorCoordinate(p,d)),s.getTilePoint(new t.MercatorCoordinate(h,f))];if(v[0].x-y<t.EXTENT&&v[0].y-y<t.EXTENT&&v[1].x+y>=0&&v[1].y+y>=0){var m=l.map(function(t){return s.getTilePoint(t)}),C=u.map(function(t){return s.getTilePoint(t)});i.push({tile:n,tileID:s,queryGeometry:m,cameraQueryGeometry:C,scale:g})}}},C=0;C<c.length;C++)m(C);return i},o.prototype.getVisibleCoordinates=function(t){for(var e=this,o=this.getRenderableIds(t).map(function(t){return e._tiles[t].tileID}),n=0,r=o;n<r.length;n+=1){var i=r[n];i.posMatrix=this.transform.calculatePosMatrix(i.toUnwrapped())}return o},o.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Dt(this._source.type))for(var e in this._tiles){var o=this._tiles[e];if(void 0!==o.fadeEndTime&&o.fadeEndTime>=t.browser.now())return!0}return!1},o.prototype.setFeatureState=function(t,e,o){t=t||"_geojsonTileLayer",this._state.updateState(t,e,o)},o.prototype.removeFeatureState=function(t,e,o){t=t||"_geojsonTileLayer",this._state.removeFeatureState(t,e,o)},o.prototype.getFeatureState=function(t,e){return t=t||"_geojsonTileLayer",this._state.getState(t,e)},o}(t.Evented);function At(t,e){return t%32-e%32||e-t}function Dt(t){return"raster"===t||"image"===t||"video"===t}function Mt(){return new t.window.Worker(Qn.workerUrl)}Pt.maxOverzooming=10,Pt.maxUnderzooming=3;var It=function(){this.active={}};It.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<It.workerCount;)this.workers.push(new Mt);return this.active[t]=!0,this.workers.slice()},It.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)};var Lt,Ft=Math.floor(t.browser.hardwareConcurrency/2);function Nt(e,o){var n={};for(var r in e)"ref"!==r&&(n[r]=e[r]);return t.refProperties.forEach(function(t){t in o&&(n[t]=o[t])}),n}function kt(t){t=t.slice();for(var e=Object.create(null),o=0;o<t.length;o++)e[t[o].id]=t[o];for(var n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=Nt(t[n],e[t[n].ref]));return t}It.workerCount=Math.max(Math.min(Ft,6),1);var Gt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Vt(t,e,o){o.push({command:Gt.addSource,args:[t,e[t]]})}function Bt(t,e,o){e.push({command:Gt.removeSource,args:[t]}),o[t]=!0}function zt(t,e,o,n){Bt(t,o,n),Vt(t,e,o)}function Ht(e,o,n){var r;for(r in e[n])if(e[n].hasOwnProperty(r)&&"data"!==r&&!t.deepEqual(e[n][r],o[n][r]))return!1;for(r in o[n])if(o[n].hasOwnProperty(r)&&"data"!==r&&!t.deepEqual(e[n][r],o[n][r]))return!1;return!0}function jt(e,o,n,r,i,a){var s;for(s in o=o||{},e=e||{})e.hasOwnProperty(s)&&(t.deepEqual(e[s],o[s])||n.push({command:a,args:[r,s,o[s],i]}));for(s in o)o.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.deepEqual(e[s],o[s])||n.push({command:a,args:[r,s,o[s],i]}))}function Ut(t){return t.id}function Wt(t,e){return t[e.id]=e,t}var Kt=function(t,e,o){var n=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(t/o),this.yCellCount=Math.ceil(e/o);for(var i=0;i<this.xCellCount*this.yCellCount;i++)n.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};function qt(e,o,n,r,i){var a=t.create();return o?(t.scale(a,a,[1/i,1/i,1]),n||t.rotateZ(a,a,r.angle)):t.multiply(a,r.labelPlaneMatrix,e),a}function Yt(e,o,n,r,i){if(o){var a=t.clone(e);return t.scale(a,a,[i,i,1]),n||t.rotateZ(a,a,-r.angle),a}return r.glCoordMatrix}function Zt(e,o){var n=[e.x,e.y,0,1];ie(n,n,o);var r=n[3];return{point:new t.Point(n[0]/r,n[1]/r),signedDistanceFromCamera:r}}function Xt(t,e){var o=t[0]/t[3],n=t[1]/t[3];return o>=-e[0]&&o<=e[0]&&n>=-e[1]&&n<=e[1]}function Jt(e,o,n,r,i,a,s,l){var u=r?e.textSizeData:e.iconSizeData,c=t.evaluateSizeForZoom(u,n.transform.zoom),p=[256/n.width*2+1,256/n.height*2+1],d=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;d.clear();for(var h=e.lineVertexArray,f=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,g=n.transform.width/n.transform.height,y=!1,v=0;v<f.length;v++){var m=f.get(v);if(m.hidden||m.writingMode===t.WritingMode.vertical&&!y)re(m.numGlyphs,d);else{y=!1;var C=[m.anchorX,m.anchorY,0,1];if(t.transformMat4(C,C,o),Xt(C,p)){var _=.5+C[3]/n.transform.cameraToCenterDistance*.5,w=t.evaluateSizeForFeature(u,c,m),b=s?w*_:w/_,S=new t.Point(m.anchorX,m.anchorY),E=Zt(S,i).point,x={},T=te(m,b,!1,l,o,i,a,e.glyphOffsetArray,h,d,E,S,x,g);y=T.useVertical,(T.notEnoughRoom||y||T.needsFlipping&&te(m,b,!0,l,o,i,a,e.glyphOffsetArray,h,d,E,S,x,g).notEnoughRoom)&&re(m.numGlyphs,d)}else re(m.numGlyphs,d)}}r?e.text.dynamicLayoutVertexBuffer.updateData(d):e.icon.dynamicLayoutVertexBuffer.updateData(d)}function Qt(t,e,o,n,r,i,a,s,l,u,c,p){var d=s.glyphStartIndex+s.numGlyphs,h=s.lineStartIndex,f=s.lineStartIndex+s.lineLength,g=e.getoffsetX(s.glyphStartIndex),y=e.getoffsetX(d-1),v=oe(t*g,o,n,r,i,a,s.segment,h,f,l,u,c,p);if(!v)return null;var m=oe(t*y,o,n,r,i,a,s.segment,h,f,l,u,c,p);return m?{first:v,last:m}:null}function $t(e,o,n,r){return e===t.WritingMode.horizontal&&Math.abs(n.y-o.y)>Math.abs(n.x-o.x)*r?{useVertical:!0}:(e===t.WritingMode.vertical?o.y<n.y:o.x>n.x)?{needsFlipping:!0}:null}function te(e,o,n,r,i,a,s,l,u,c,p,d,h,f){var g,y=o/24,v=e.lineOffsetX*y,m=e.lineOffsetY*y;if(e.numGlyphs>1){var C=e.glyphStartIndex+e.numGlyphs,_=e.lineStartIndex,w=e.lineStartIndex+e.lineLength,b=Qt(y,l,v,m,n,p,d,e,u,a,h,!1);if(!b)return{notEnoughRoom:!0};var S=Zt(b.first.point,s).point,E=Zt(b.last.point,s).point;if(r&&!n){var x=$t(e.writingMode,S,E,f);if(x)return x}g=[b.first];for(var T=e.glyphStartIndex+1;T<C-1;T++)g.push(oe(y*l.getoffsetX(T),v,m,n,p,d,e.segment,_,w,u,a,h,!1));g.push(b.last)}else{if(r&&!n){var O=Zt(d,i).point,R=e.lineStartIndex+e.segment+1,P=new t.Point(u.getx(R),u.gety(R)),A=Zt(P,i),D=A.signedDistanceFromCamera>0?A.point:ee(d,P,O,1,i),M=$t(e.writingMode,O,D,f);if(M)return M}var I=oe(y*l.getoffsetX(e.glyphStartIndex),v,m,n,p,d,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,u,a,h,!1);if(!I)return{notEnoughRoom:!0};g=[I]}for(var L=0,F=g;L<F.length;L+=1){var N=F[L];t.addDynamicAttributes(c,N.point,N.angle)}return{}}function ee(t,e,o,n,r){var i=Zt(t.add(t.sub(e)._unit()),r).point,a=o.sub(i);return o.add(a._mult(n/a.mag()))}function oe(e,o,n,r,i,a,s,l,u,c,p,d,h){var f=r?e-o:e+o,g=f>0?1:-1,y=0;r&&(g*=-1,y=Math.PI),g<0&&(y+=Math.PI);for(var v=g>0?l+s:l+s+1,m=v,C=i,_=i,w=0,b=0,S=Math.abs(f);w+b<=S;){if((v+=g)<l||v>=u)return null;if(_=C,void 0===(C=d[v])){var E=new t.Point(c.getx(v),c.gety(v)),x=Zt(E,p);if(x.signedDistanceFromCamera>0)C=d[v]=x.point;else{var T=v-g;C=ee(0===w?a:new t.Point(c.getx(T),c.gety(T)),E,_,S-w+1,p)}}w+=b,b=_.dist(C)}var O=(S-w)/b,R=C.sub(_),P=R.mult(O)._add(_);return P._add(R._unit()._perp()._mult(n*g)),{point:P,angle:y+Math.atan2(C.y-_.y,C.x-_.x),tileDistance:h?{prevTileDistance:v-g===m?0:c.gettileUnitDistanceFromAnchor(v-g),lastSegmentViewportDistance:S-w}:null}}Kt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Kt.prototype.insert=function(t,e,o,n,r){this._forEachCell(e,o,n,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(o),this.bboxes.push(n),this.bboxes.push(r)},Kt.prototype.insertCircle=function(t,e,o,n){this._forEachCell(e-n,o-n,e+n,o+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(o),this.circles.push(n)},Kt.prototype._insertBoxCell=function(t,e,o,n,r,i){this.boxCells[r].push(i)},Kt.prototype._insertCircleCell=function(t,e,o,n,r,i){this.circleCells[r].push(i)},Kt.prototype._query=function(t,e,o,n,r,i){if(o<0||t>this.width||n<0||e>this.height)return!r&&[];var a=[];if(t<=0&&e<=0&&this.width<=o&&this.height<=n){if(r)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var u=this.circles[3*l],c=this.circles[3*l+1],p=this.circles[3*l+2];a.push({key:this.circleKeys[l],x1:u-p,y1:c-p,x2:u+p,y2:c+p})}return i?a.filter(i):a}var d={hitTest:r,seenUids:{box:{},circle:{}}};return this._forEachCell(t,e,o,n,this._queryCell,a,d,i),r?a.length>0:a},Kt.prototype._queryCircle=function(t,e,o,n,r){var i=t-o,a=t+o,s=e-o,l=e+o;if(a<0||i>this.width||l<0||s>this.height)return!n&&[];var u=[],c={hitTest:n,circle:{x:t,y:e,radius:o},seenUids:{box:{},circle:{}}};return this._forEachCell(i,s,a,l,this._queryCellCircle,u,c,r),n?u.length>0:u},Kt.prototype.query=function(t,e,o,n,r){return this._query(t,e,o,n,!1,r)},Kt.prototype.hitTest=function(t,e,o,n,r){return this._query(t,e,o,n,!0,r)},Kt.prototype.hitTestCircle=function(t,e,o,n){return this._queryCircle(t,e,o,!0,n)},Kt.prototype._queryCell=function(t,e,o,n,r,i,a,s){var l=a.seenUids,u=this.boxCells[r];if(null!==u)for(var c=this.bboxes,p=0,d=u;p<d.length;p+=1){var h=d[p];if(!l.box[h]){l.box[h]=!0;var f=4*h;if(t<=c[f+2]&&e<=c[f+3]&&o>=c[f+0]&&n>=c[f+1]&&(!s||s(this.boxKeys[h]))){if(a.hitTest)return i.push(!0),!0;i.push({key:this.boxKeys[h],x1:c[f],y1:c[f+1],x2:c[f+2],y2:c[f+3]})}}}var g=this.circleCells[r];if(null!==g)for(var y=this.circles,v=0,m=g;v<m.length;v+=1){var C=m[v];if(!l.circle[C]){l.circle[C]=!0;var _=3*C;if(this._circleAndRectCollide(y[_],y[_+1],y[_+2],t,e,o,n)&&(!s||s(this.circleKeys[C]))){if(a.hitTest)return i.push(!0),!0;var w=y[_],b=y[_+1],S=y[_+2];i.push({key:this.circleKeys[C],x1:w-S,y1:b-S,x2:w+S,y2:b+S})}}}},Kt.prototype._queryCellCircle=function(t,e,o,n,r,i,a,s){var l=a.circle,u=a.seenUids,c=this.boxCells[r];if(null!==c)for(var p=this.bboxes,d=0,h=c;d<h.length;d+=1){var f=h[d];if(!u.box[f]){u.box[f]=!0;var g=4*f;if(this._circleAndRectCollide(l.x,l.y,l.radius,p[g+0],p[g+1],p[g+2],p[g+3])&&(!s||s(this.boxKeys[f])))return i.push(!0),!0}}var y=this.circleCells[r];if(null!==y)for(var v=this.circles,m=0,C=y;m<C.length;m+=1){var _=C[m];if(!u.circle[_]){u.circle[_]=!0;var w=3*_;if(this._circlesCollide(v[w],v[w+1],v[w+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[_])))return i.push(!0),!0}}},Kt.prototype._forEachCell=function(t,e,o,n,r,i,a,s){for(var l=this._convertToXCellCoord(t),u=this._convertToYCellCoord(e),c=this._convertToXCellCoord(o),p=this._convertToYCellCoord(n),d=l;d<=c;d++)for(var h=u;h<=p;h++){var f=this.xCellCount*h+d;if(r.call(this,t,e,o,n,f,i,a,s))return}},Kt.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},Kt.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},Kt.prototype._circlesCollide=function(t,e,o,n,r,i){var a=n-t,s=r-e,l=o+i;return l*l>a*a+s*s},Kt.prototype._circleAndRectCollide=function(t,e,o,n,r,i,a){var s=(i-n)/2,l=Math.abs(t-(n+s));if(l>s+o)return!1;var u=(a-r)/2,c=Math.abs(e-(r+u));if(c>u+o)return!1;if(l<=s||c<=u)return!0;var p=l-s,d=c-u;return p*p+d*d<=o*o};var ne=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function re(t,e){for(var o=0;o<t;o++){var n=e.length;e.resize(n+4),e.float32.set(ne,3*n)}}function ie(t,e,o){var n=e[0],r=e[1];return t[0]=o[0]*n+o[4]*r+o[12],t[1]=o[1]*n+o[5]*r+o[13],t[3]=o[3]*n+o[7]*r+o[15],t}var ae=function(t,e,o){void 0===e&&(e=new Kt(t.width+200,t.height+200,25)),void 0===o&&(o=new Kt(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=o,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function se(t,e,o){t[e+4]=o?1:0}function le(e,o,n){return o*(t.EXTENT/(e.tileSize*Math.pow(2,n-e.tileID.overscaledZ)))}ae.prototype.placeCollisionBox=function(t,e,o,n,r){var i=this.projectAndGetPerspectiveRatio(n,t.anchorPointX,t.anchorPointY),a=o*i.perspectiveRatio,s=t.x1*a+i.point.x,l=t.y1*a+i.point.y,u=t.x2*a+i.point.x,c=t.y2*a+i.point.y;return!this.isInsideGrid(s,l,u,c)||!e&&this.grid.hitTest(s,l,u,c,r)?{box:[],offscreen:!1}:{box:[s,l,u,c],offscreen:this.isOffscreen(s,l,u,c)}},ae.prototype.approximateTileDistance=function(t,e,o,n,r){var i=r?1:n/this.pitchfactor,a=t.lastSegmentViewportDistance*o;return t.prevTileDistance+a+(i-1)*a*Math.abs(Math.sin(e))},ae.prototype.placeCollisionCircles=function(e,o,n,r,i,a,s,l,u,c,p,d,h){var f=[],g=this.projectAnchor(u,i.anchorX,i.anchorY),y=l/24,v=i.lineOffsetX*l,m=i.lineOffsetY*l,C=new t.Point(i.anchorX,i.anchorY),_=Qt(y,s,v,m,!1,Zt(C,c).point,C,i,a,c,{},!0),w=!1,b=!1,S=!0,E=g.perspectiveRatio*r,x=1/(r*n),T=0,O=0;_&&(T=this.approximateTileDistance(_.first.tileDistance,_.first.angle,x,g.cameraDistance,d),O=this.approximateTileDistance(_.last.tileDistance,_.last.angle,x,g.cameraDistance,d));for(var R=0;R<e.length;R+=5){var P=e[R],A=e[R+1],D=e[R+2],M=e[R+3];if(!_||M<-T||M>O)se(e,R,!1);else{var I=this.projectPoint(u,P,A),L=D*E;if(f.length>0){var F=I.x-f[f.length-4],N=I.y-f[f.length-3];if(L*L*2>F*F+N*N&&R+8<e.length){var k=e[R+8];if(k>-T&&k<O){se(e,R,!1);continue}}}var G=R/5;f.push(I.x,I.y,L,G),se(e,R,!0);var V=I.x-L,B=I.y-L,z=I.x+L,H=I.y+L;if(S=S&&this.isOffscreen(V,B,z,H),b=b||this.isInsideGrid(V,B,z,H),!o&&this.grid.hitTestCircle(I.x,I.y,L,h)){if(!p)return{circles:[],offscreen:!1};w=!0}}}return{circles:w||!b?[]:f,offscreen:S}},ae.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var o=[],n=1/0,r=1/0,i=-1/0,a=-1/0,s=0,l=e;s<l.length;s+=1){var u=l[s],c=new t.Point(u.x+100,u.y+100);n=Math.min(n,c.x),r=Math.min(r,c.y),i=Math.max(i,c.x),a=Math.max(a,c.y),o.push(c)}for(var p={},d={},h=0,f=this.grid.query(n,r,i,a).concat(this.ignoredGrid.query(n,r,i,a));h<f.length;h+=1){var g=f[h],y=g.key;if(void 0===p[y.bucketInstanceId]&&(p[y.bucketInstanceId]={}),!p[y.bucketInstanceId][y.featureIndex]){var v=[new t.Point(g.x1,g.y1),new t.Point(g.x2,g.y1),new t.Point(g.x2,g.y2),new t.Point(g.x1,g.y2)];t.polygonIntersectsPolygon(o,v)&&(p[y.bucketInstanceId][y.featureIndex]=!0,void 0===d[y.bucketInstanceId]&&(d[y.bucketInstanceId]=[]),d[y.bucketInstanceId].push(y.featureIndex))}}return d},ae.prototype.insertCollisionBox=function(t,e,o,n,r){var i={bucketInstanceId:o,featureIndex:n,collisionGroupID:r};(e?this.ignoredGrid:this.grid).insert(i,t[0],t[1],t[2],t[3])},ae.prototype.insertCollisionCircles=function(t,e,o,n,r){for(var i=e?this.ignoredGrid:this.grid,a={bucketInstanceId:o,featureIndex:n,collisionGroupID:r},s=0;s<t.length;s+=4)i.insertCircle(a,t[s],t[s+1],t[s+2])},ae.prototype.projectAnchor=function(t,e,o){var n=[e,o,0,1];return ie(n,n,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/n[3]*.5,cameraDistance:n[3]}},ae.prototype.projectPoint=function(e,o,n){var r=[o,n,0,1];return ie(r,r,e),new t.Point((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100)},ae.prototype.projectAndGetPerspectiveRatio=function(e,o,n){var r=[o,n,0,1];return ie(r,r,e),{point:new t.Point((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5}},ae.prototype.isOffscreen=function(t,e,o,n){return o<100||t>=this.screenRightBoundary||n<100||e>this.screenBottomBoundary},ae.prototype.isInsideGrid=function(t,e,o,n){return o>=0&&t<this.gridRightBoundary&&n>=0&&e<this.gridBottomBoundary};var ue=function(t,e,o,n){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):n&&o?1:0,this.placed=o};ue.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var ce=function(t,e,o,n,r){this.text=new ue(t?t.text:null,e,o,r),this.icon=new ue(t?t.icon:null,e,n,r)};ce.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var pe=function(t,e,o){this.text=t,this.icon=e,this.skipFade=o},de=function(t,e,o,n,r){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=o,this.bucketIndex=n,this.tileID=r},he=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};function fe(e,o,n,r,i){var a=t.getAnchorAlignment(e),s=-(a.horizontalAlign-.5)*o,l=-(a.verticalAlign-.5)*n,u=t.evaluateRadialOffset(e,r);return new t.Point(s+u[0]*i,l+u[1]*i)}he.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var ge=function(t,e,o,n){this.transform=t.clone(),this.collisionIndex=new ae(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new he(o),this.prevPlacement=n,n&&(n.prevPlacement=void 0)};function ye(t,e,o,n,r){t.emplaceBack(e?1:0,o?1:0,n||0,r||0),t.emplaceBack(e?1:0,o?1:0,n||0,r||0),t.emplaceBack(e?1:0,o?1:0,n||0,r||0),t.emplaceBack(e?1:0,o?1:0,n||0,r||0)}ge.prototype.placeLayerTile=function(e,o,n,r){var i=o.getBucket(e),a=o.latestFeatureIndex;if(i&&a&&e.id===i.layerIds[0]){var s=o.collisionBoxArray,l=i.layers[0].layout,u=Math.pow(2,this.transform.zoom-o.tileID.overscaledZ),c=o.tileSize/t.EXTENT,p=this.transform.calculatePosMatrix(o.tileID.toUnwrapped()),d=qt(p,"map"===l.get("text-pitch-alignment"),"map"===l.get("text-rotation-alignment"),this.transform,le(o,1,this.transform.zoom)),h=qt(p,"map"===l.get("icon-pitch-alignment"),"map"===l.get("icon-rotation-alignment"),this.transform,le(o,1,this.transform.zoom));this.retainedQueryData[i.bucketInstanceId]=new de(i.bucketInstanceId,a,i.sourceLayerIndex,i.index,o.tileID),this.placeLayerBucket(i,p,d,h,u,c,n,o.holdingForFade(),r,s)}},ge.prototype.attemptAnchorPlacement=function(e,o,n,r,i,a,s,l,u,c,p,d,h,f){var g,y=fe(e,n,r,i,a),v=this.collisionIndex.placeCollisionBox(function(e,o,n,r,i,a){var s=e.x1,l=e.x2,u=e.y1,c=e.y2,p=e.anchorPointX,d=e.anchorPointY,h=new t.Point(o,n);return r&&h._rotate(i?a:-a),{x1:s+h.x,y1:u+h.y,x2:l+h.x,y2:c+h.y,anchorPointX:p,anchorPointY:d}}(o,y.x,y.y,s,l,this.transform.angle),d,u,c,p.predicate);if(v.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(g=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={radialOffset:i,width:n,height:r,anchor:e,textBoxScale:a,prevAnchor:g},this.markUsedJustification(f,e,h),v},ge.prototype.placeLayerBucket=function(e,o,n,r,i,a,s,l,u,c){var p=this,d=e.layers[0].layout,h=t.evaluateSizeForZoom(e.textSizeData,this.transform.zoom),f=d.get("text-optional"),g=d.get("icon-optional"),y=d.get("text-allow-overlap"),v=d.get("icon-allow-overlap"),m=y&&(v||!e.hasIconData()||g),C=v&&(y||!e.hasTextData()||f),_=this.collisionGroups.get(e.sourceID),w="map"===d.get("text-rotation-alignment"),b="map"===d.get("text-pitch-alignment"),S="viewport-y"===d.get("symbol-z-order");!e.collisionArrays&&c&&e.deserializeCollisionBoxes(c);var E=function(r,c){if(!u[r.crossTileID])if(l)p.placements[r.crossTileID]=new pe(!1,!1,!1);else{var v=!1,S=!1,E=!0,x=null,T=null,O=null,R=0,P=0;c.textFeatureIndex&&(R=c.textFeatureIndex);var A=c.textBox;if(A)if(d.get("text-variable-anchor")){var D=A.x2-A.x1,M=A.y2-A.y1,I=r.textBoxScale,L=d.get("text-variable-anchor");if(p.prevPlacement&&p.prevPlacement.variableOffsets[r.crossTileID]){var F=p.prevPlacement.variableOffsets[r.crossTileID];L[0]!==F.anchor&&(L=L.filter(function(t){return t!==F.anchor})).unshift(F.anchor)}for(var N=0,k=L;N<k.length;N+=1){var G=k[N];if(x=p.attemptAnchorPlacement(G,A,D,M,r.radialTextOffset,I,w,b,a,o,_,y,r,e)){v=!0;break}}if(!p.variableOffsets[r.crossTileID]&&p.prevPlacement){var V=p.prevPlacement.variableOffsets[r.crossTileID];V&&(p.variableOffsets[r.crossTileID]=V,p.markUsedJustification(e,V.anchor,r))}}else v=(x=p.collisionIndex.placeCollisionBox(A,d.get("text-allow-overlap"),a,o,_.predicate)).box.length>0;E=x&&x.offscreen;var B=c.textCircles;if(B){var z=e.text.placedSymbolArray.get(r.centerJustifiedTextSymbolIndex),H=t.evaluateSizeForFeature(e.textSizeData,h,z);T=p.collisionIndex.placeCollisionCircles(B,d.get("text-allow-overlap"),i,a,z,e.lineVertexArray,e.glyphOffsetArray,H,o,n,s,b,_.predicate),v=d.get("text-allow-overlap")||T.circles.length>0,E=E&&T.offscreen}c.iconFeatureIndex&&(P=c.iconFeatureIndex),c.iconBox&&(S=(O=p.collisionIndex.placeCollisionBox(c.iconBox,d.get("icon-allow-overlap"),a,o,_.predicate)).box.length>0,E=E&&O.offscreen);var j=f||0===r.numHorizontalGlyphVertices&&0===r.numVerticalGlyphVertices,U=g||0===r.numIconVertices;j||U?U?j||(S=S&&v):v=S&&v:S=v=S&&v,v&&x&&p.collisionIndex.insertCollisionBox(x.box,d.get("text-ignore-placement"),e.bucketInstanceId,R,_.ID),S&&O&&p.collisionIndex.insertCollisionBox(O.box,d.get("icon-ignore-placement"),e.bucketInstanceId,P,_.ID),v&&T&&p.collisionIndex.insertCollisionCircles(T.circles,d.get("text-ignore-placement"),e.bucketInstanceId,R,_.ID),p.placements[r.crossTileID]=new pe(v||m,S||C,E||e.justReloaded),u[r.crossTileID]=!0}};if(S)for(var x=e.getSortedSymbolIndexes(this.transform.angle),T=x.length-1;T>=0;--T){var O=x[T];E(e.symbolInstances.get(O),e.collisionArrays[O])}else for(var R=0;R<e.symbolInstances.length;++R)E(e.symbolInstances.get(R),e.collisionArrays[R]);e.justReloaded=!1},ge.prototype.markUsedJustification=function(e,o,n){var r={left:n.leftJustifiedTextSymbolIndex,center:n.centerJustifiedTextSymbolIndex,right:n.rightJustifiedTextSymbolIndex},i=r[t.getAnchorJustification(o)];for(var a in r){var s=r[a];s>=0&&(e.text.placedSymbolArray.get(s).crossTileID=i>=0&&s!==i?0:n.crossTileID)}},ge.prototype.commit=function(t){this.commitTime=t;var e=this.prevPlacement,o=!1,n=e&&0!==this.fadeDuration?(this.commitTime-e.commitTime)/this.fadeDuration:1,r=e?e.opacities:{},i=e?e.variableOffsets:{};for(var a in this.placements){var s=this.placements[a],l=r[a];l?(this.opacities[a]=new ce(l,n,s.text,s.icon),o=o||s.text!==l.text.placed||s.icon!==l.icon.placed):(this.opacities[a]=new ce(null,n,s.text,s.icon,s.skipFade),o=o||s.text||s.icon)}for(var u in r){var c=r[u];if(!this.opacities[u]){var p=new ce(c,n,!1,!1);p.isHidden()||(this.opacities[u]=p,o=o||c.text.placed||c.icon.placed)}}for(var d in i)this.variableOffsets[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.variableOffsets[d]=i[d]);o?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},ge.prototype.updateLayerOpacities=function(t,e){for(var o={},n=0,r=e;n<r.length;n+=1){var i=r[n],a=i.getBucket(t);a&&i.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,o,i.collisionBoxArray)}},ge.prototype.updateBucketOpacities=function(e,o,n){e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasCollisionBoxData()&&e.collisionBox.collisionVertexArray.clear(),e.hasCollisionCircleData()&&e.collisionCircle.collisionVertexArray.clear();var r=e.layers[0].layout,i=new ce(null,0,!1,!1,!0),a=r.get("text-allow-overlap"),s=r.get("icon-allow-overlap"),l=r.get("text-variable-anchor"),u="map"===r.get("text-rotation-alignment"),c="map"===r.get("text-pitch-alignment"),p=new ce(null,0,a&&(s||!e.hasIconData()||r.get("icon-optional")),s&&(a||!e.hasTextData()||r.get("text-optional")),!0);!e.collisionArrays&&n&&(e.hasCollisionBoxData()||e.hasCollisionCircleData())&&e.deserializeCollisionBoxes(n);for(var d=0;d<e.symbolInstances.length;d++){var h=e.symbolInstances.get(d),f=h.numHorizontalGlyphVertices,g=h.numVerticalGlyphVertices,y=h.crossTileID,v=o[y],m=this.opacities[y];v?m=i:m||(m=p,this.opacities[y]=m),o[y]=!0;var C=f>0||g>0,_=h.numIconVertices>0;if(C){for(var w=Ee(m.text),b=(f+g)/4,S=0;S<b;S++)e.text.opacityVertexArray.emplaceBack(w);var E=m.text.isHidden()?1:0;[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex,h.verticalPlacedTextSymbolIndex].forEach(function(t){t>=0&&(e.text.placedSymbolArray.get(t).hidden=E)});var x=this.variableOffsets[h.crossTileID];x&&this.markUsedJustification(e,x.anchor,h)}if(_){for(var T=Ee(m.icon),O=0;O<h.numIconVertices/4;O++)e.icon.opacityVertexArray.emplaceBack(T);e.icon.placedSymbolArray.get(d).hidden=m.icon.isHidden()}if(e.hasCollisionBoxData()||e.hasCollisionCircleData()){var R=e.collisionArrays[d];if(R){if(R.textBox){var P=new t.Point(0,0),A=!0;if(l){var D=this.variableOffsets[y];D?(P=fe(D.anchor,D.width,D.height,D.radialOffset,D.textBoxScale),u&&P._rotate(c?this.transform.angle:-this.transform.angle)):A=!1}ye(e.collisionBox.collisionVertexArray,m.text.placed,!A,P.x,P.y)}R.iconBox&&ye(e.collisionBox.collisionVertexArray,m.icon.placed,!1);var M=R.textCircles;if(M&&e.hasCollisionCircleData())for(var I=0;I<M.length;I+=5){var L=v||0===M[I+4];ye(e.collisionCircle.collisionVertexArray,m.text.placed,L)}}}}e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasCollisionBoxData()&&e.collisionBox.collisionVertexBuffer&&e.collisionBox.collisionVertexBuffer.updateData(e.collisionBox.collisionVertexArray),e.hasCollisionCircleData()&&e.collisionCircle.collisionVertexBuffer&&e.collisionCircle.collisionVertexBuffer.updateData(e.collisionCircle.collisionVertexArray)},ge.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration},ge.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},ge.prototype.stillRecent=function(t){return this.commitTime+this.fadeDuration>t},ge.prototype.setStale=function(){this.stale=!0};var ve=Math.pow(2,25),me=Math.pow(2,24),Ce=Math.pow(2,17),_e=Math.pow(2,16),we=Math.pow(2,9),be=Math.pow(2,8),Se=Math.pow(2,1);function Ee(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,o=Math.floor(127*t.opacity);return o*ve+e*me+o*Ce+e*_e+o*we+e*be+o*Se+e}var xe=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};xe.prototype.continuePlacement=function(t,e,o,n,r){for(;this._currentTileIndex<t.length;){var i=t[this._currentTileIndex];if(e.placeLayerTile(n,i,o,this._seenCrossTileIDs),this._currentTileIndex++,r())return!0}};var Te=function(t,e,o,n,r,i,a){this.placement=new ge(t,r,i,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=o,this._showCollisionBoxes=n,this._done=!1};Te.prototype.isDone=function(){return this._done},Te.prototype.continuePlacement=function(e,o,n){for(var r=this,i=t.browser.now(),a=function(){var e=t.browser.now()-i;return!r._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=o[e[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new xe),this._inProgressLayer.continuePlacement(n[s.source],this.placement,this._showCollisionBoxes,s,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Te.prototype.commit=function(t){return this.placement.commit(t),this.placement};var Oe=512/t.EXTENT/2,Re=function(t,e,o){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=o;for(var n=0;n<e.length;n++){var r=e.get(n),i=r.key;this.indexedSymbolInstances[i]||(this.indexedSymbolInstances[i]=[]),this.indexedSymbolInstances[i].push({crossTileID:r.crossTileID,coord:this.getScaledCoordinates(r,t)})}};Re.prototype.getScaledCoordinates=function(e,o){var n=o.canonical.z-this.tileID.canonical.z,r=Oe/Math.pow(2,n);return{x:Math.floor((o.canonical.x*t.EXTENT+e.anchorX)*r),y:Math.floor((o.canonical.y*t.EXTENT+e.anchorY)*r)}},Re.prototype.findMatches=function(t,e,o){for(var n=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),r=0;r<t.length;r++){var i=t.get(r);if(!i.crossTileID){var a=this.indexedSymbolInstances[i.key];if(a)for(var s=this.getScaledCoordinates(i,e),l=0,u=a;l<u.length;l+=1){var c=u[l];if(Math.abs(c.coord.x-s.x)<=n&&Math.abs(c.coord.y-s.y)<=n&&!o[c.crossTileID]){o[c.crossTileID]=!0,i.crossTileID=c.crossTileID;break}}}}};var Pe=function(){this.maxCrossTileID=0};Pe.prototype.generate=function(){return++this.maxCrossTileID};var Ae=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ae.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var o in this.indexes){var n=this.indexes[o],r={};for(var i in n){var a=n[i];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),r[a.tileID.key]=a}this.indexes[o]=r}this.lng=t},Ae.prototype.addBucket=function(t,e,o){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var n=0;n<e.symbolInstances.length;n++)e.symbolInstances.get(n).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var r=this.usedCrossTileIDs[t.overscaledZ];for(var i in this.indexes){var a=this.indexes[i];if(Number(i)>t.overscaledZ)for(var s in a){var l=a[s];l.tileID.isChildOf(t)&&l.findMatches(e.symbolInstances,t,r)}else{var u=a[t.scaledTo(Number(i)).key];u&&u.findMatches(e.symbolInstances,t,r)}}for(var c=0;c<e.symbolInstances.length;c++){var p=e.symbolInstances.get(c);p.crossTileID||(p.crossTileID=o.generate(),r[p.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Re(t,e.symbolInstances,e.bucketInstanceId),!0},Ae.prototype.removeBucketCrossTileIDs=function(t,e){for(var o in e.indexedSymbolInstances)for(var n=0,r=e.indexedSymbolInstances[o];n<r.length;n+=1){var i=r[n];delete this.usedCrossTileIDs[t][i.crossTileID]}},Ae.prototype.removeStaleBuckets=function(t){var e=!1;for(var o in this.indexes){var n=this.indexes[o];for(var r in n)t[n[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(o,n[r]),delete n[r],e=!0)}return e};var De=function(){this.layerIndexes={},this.crossTileIDs=new Pe,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};De.prototype.addLayer=function(t,e,o){var n=this.layerIndexes[t.id];void 0===n&&(n=this.layerIndexes[t.id]=new Ae);var r=!1,i={};n.handleWrapJump(o);for(var a=0,s=e;a<s.length;a+=1){var l=s[a],u=l.getBucket(t);u&&t.id===u.layerIds[0]&&(u.bucketInstanceId||(u.bucketInstanceId=++this.maxBucketInstanceId),n.addBucket(l.tileID,u,this.crossTileIDs)&&(r=!0),i[u.bucketInstanceId]=!0)}return n.removeStaleBuckets(i)&&(r=!0),r},De.prototype.pruneUnusedLayers=function(t){var e={};for(var o in t.forEach(function(t){e[t]=!0}),this.layerIndexes)e[o]||delete this.layerIndexes[o]};var Me=function(e,o){return t.emitValidationErrors(e,o&&o.filter(function(t){return"source.canvas"!==t.identifier}))},Ie=t.pick(Gt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Le=t.pick(Gt,["setCenter","setZoom","setBearing","setPitch"]),Fe=function(e){function o(n,r){var i=this;void 0===r&&(r={}),e.call(this),this.map=n,this.dispatcher=new S((Lt||(Lt=new It),Lt),this),this.imageManager=new d,this.imageManager.setEventedParent(this),this.glyphManager=new m(n._requestManager,r.localIdeographFontFamily),this.lineAtlas=new b(256,512),this.crossTileSymbolIndex=new De,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var a=this;this._rtlTextPluginCallback=o.registerForPluginAvailability(function(t){for(var e in a.dispatcher.broadcast("loadRTLTextPlugin",t.pluginURL,t.completionCallback),a.sourceCaches)a.sourceCaches[e].reload()}),this.on("data",function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=i.sourceCaches[t.sourceId];if(e){var o=e.getSource();if(o&&o.vectorLayerIds)for(var n in i._layers){var r=i._layers[n];r.source===o.id&&i._validateLayer(r)}}}})}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.loadURL=function(e,o){var n=this;void 0===o&&(o={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var r="boolean"==typeof o.validate?o.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,o.accessToken);var i=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(i,function(e,o){n._request=null,e?n.fire(new t.ErrorEvent(e)):o&&n._load(o,r)})},o.prototype.loadJSON=function(e,o){var n=this;void 0===o&&(o={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){n._request=null,n._load(e,!1!==o.validate)})},o.prototype._load=function(e,o){var n=this;if(!o||!Me(this,t.validateStyle(e))){for(var r in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(r,e.sources[r],{validate:!1});e.sprite?this._spriteRequest=function(e,o,n){var r,i,a,s=t.browser.devicePixelRatio>1?"@2x":"",l=t.getJSON(o.transformRequest(o.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),function(t,e){l=null,a||(a=t,r=e,c())}),u=t.getImage(o.transformRequest(o.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),function(t,e){u=null,a||(a=t,i=e,c())});function c(){if(a)n(a);else if(r&&i){var e=t.browser.getImageData(i),o={};for(var s in r){var l=r[s],u=l.width,c=l.height,p=l.x,d=l.y,h=l.sdf,f=l.pixelRatio,g=new t.RGBAImage({width:u,height:c});t.RGBAImage.copy(e,g,{x:p,y:d},{x:0,y:0},{width:u,height:c}),o[s]={data:g,pixelRatio:f,sdf:h}}n(null,o)}}return{cancel:function(){l&&(l.cancel(),l=null),u&&(u.cancel(),u=null)}}}(e.sprite,this.map._requestManager,function(e,o){if(n._spriteRequest=null,e)n.fire(new t.ErrorEvent(e));else if(o)for(var r in o)n.imageManager.addImage(r,o[r]);n.imageManager.setLoaded(!0),n.fire(new t.Event("data",{dataType:"style"}))}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var i=kt(this.stylesheet.layers);this._order=i.map(function(t){return t.id}),this._layers={};for(var a=0,s=i;a<s.length;a+=1){var l=s[a];(l=t.createStyleLayer(l)).setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=l}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},o.prototype._validateLayer=function(e){var o=this.sourceCaches[e.source];if(o){var n=e.sourceLayer;if(n){var r=o.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(n))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+n+'" does not exist on source "'+r.id+'" as specified by style layer "'+e.id+'"')))}}},o.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},o.prototype._serializeLayers=function(t){for(var e=[],o=0,n=t;o<n.length;o+=1){var r=n[o],i=this._layers[r];"custom"!==i.type&&e.push(i.serialize())}return e},o.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},o.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},o.prototype.update=function(e){if(this._loaded){var o=this._changed;if(this._changed){var n=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);for(var i in(n.length||r.length)&&this._updateWorkerLayers(n,r),this._updatedSources){var a=this._updatedSources[i];"reload"===a?this._reloadSource(i):"clear"===a&&this._clearSource(i)}for(var s in this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}for(var l in this.sourceCaches)this.sourceCaches[l].used=!1;for(var u=0,c=this._order;u<c.length;u+=1){var p=c[u],d=this._layers[p];d.recalculate(e),!d.isHidden(e.zoom)&&d.source&&(this.sourceCaches[d.source].used=!0)}this.light.recalculate(e),this.z=e.zoom,o&&this.fire(new t.Event("data",{dataType:"style"}))}},o.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},o.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},o.prototype.setState=function(e){var o=this;if(this._checkLoaded(),Me(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=kt(e.layers);var n=function(e,o){if(!e)return[{command:Gt.setStyle,args:[o]}];var n=[];try{if(!t.deepEqual(e.version,o.version))return[{command:Gt.setStyle,args:[o]}];t.deepEqual(e.center,o.center)||n.push({command:Gt.setCenter,args:[o.center]}),t.deepEqual(e.zoom,o.zoom)||n.push({command:Gt.setZoom,args:[o.zoom]}),t.deepEqual(e.bearing,o.bearing)||n.push({command:Gt.setBearing,args:[o.bearing]}),t.deepEqual(e.pitch,o.pitch)||n.push({command:Gt.setPitch,args:[o.pitch]}),t.deepEqual(e.sprite,o.sprite)||n.push({command:Gt.setSprite,args:[o.sprite]}),t.deepEqual(e.glyphs,o.glyphs)||n.push({command:Gt.setGlyphs,args:[o.glyphs]}),t.deepEqual(e.transition,o.transition)||n.push({command:Gt.setTransition,args:[o.transition]}),t.deepEqual(e.light,o.light)||n.push({command:Gt.setLight,args:[o.light]});var r={},i=[];!function(e,o,n,r){var i;for(i in o=o||{},e=e||{})e.hasOwnProperty(i)&&(o.hasOwnProperty(i)||Bt(i,n,r));for(i in o)o.hasOwnProperty(i)&&(e.hasOwnProperty(i)?t.deepEqual(e[i],o[i])||("geojson"===e[i].type&&"geojson"===o[i].type&&Ht(e,o,i)?n.push({command:Gt.setGeoJSONSourceData,args:[i,o[i].data]}):zt(i,o,n,r)):Vt(i,o,n))}(e.sources,o.sources,i,r);var a=[];e.layers&&e.layers.forEach(function(t){r[t.source]?n.push({command:Gt.removeLayer,args:[t.id]}):a.push(t)}),n=n.concat(i),function(e,o,n){o=o||[];var r,i,a,s,l,u,c,p=(e=e||[]).map(Ut),d=o.map(Ut),h=e.reduce(Wt,{}),f=o.reduce(Wt,{}),g=p.slice(),y=Object.create(null);for(r=0,i=0;r<p.length;r++)a=p[r],f.hasOwnProperty(a)?i++:(n.push({command:Gt.removeLayer,args:[a]}),g.splice(g.indexOf(a,i),1));for(r=0,i=0;r<d.length;r++)a=d[d.length-1-r],g[g.length-1-r]!==a&&(h.hasOwnProperty(a)?(n.push({command:Gt.removeLayer,args:[a]}),g.splice(g.lastIndexOf(a,g.length-i),1)):i++,u=g[g.length-r],n.push({command:Gt.addLayer,args:[f[a],u]}),g.splice(g.length-r,0,a),y[a]=!0);for(r=0;r<d.length;r++)if(s=h[a=d[r]],l=f[a],!y[a]&&!t.deepEqual(s,l))if(t.deepEqual(s.source,l.source)&&t.deepEqual(s["source-layer"],l["source-layer"])&&t.deepEqual(s.type,l.type)){for(c in jt(s.layout,l.layout,n,a,null,Gt.setLayoutProperty),jt(s.paint,l.paint,n,a,null,Gt.setPaintProperty),t.deepEqual(s.filter,l.filter)||n.push({command:Gt.setFilter,args:[a,l.filter]}),t.deepEqual(s.minzoom,l.minzoom)&&t.deepEqual(s.maxzoom,l.maxzoom)||n.push({command:Gt.setLayerZoomRange,args:[a,l.minzoom,l.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?jt(s[c],l[c],n,a,c.slice(6),Gt.setPaintProperty):t.deepEqual(s[c],l[c])||n.push({command:Gt.setLayerProperty,args:[a,c,l[c]]}));for(c in l)l.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?jt(s[c],l[c],n,a,c.slice(6),Gt.setPaintProperty):t.deepEqual(s[c],l[c])||n.push({command:Gt.setLayerProperty,args:[a,c,l[c]]}))}else n.push({command:Gt.removeLayer,args:[a]}),u=g[g.lastIndexOf(a)+1],n.push({command:Gt.addLayer,args:[l,u]})}(a,o.layers,n)}catch(t){console.warn("Unable to compute style diff:",t),n=[{command:Gt.setStyle,args:[o]}]}return n}(this.serialize(),e).filter(function(t){return!(t.command in Le)});if(0===n.length)return!1;var r=n.filter(function(t){return!(t.command in Ie)});if(r.length>0)throw new Error("Unimplemented: "+r.map(function(t){return t.command}).join(", ")+".");return n.forEach(function(t){"setTransition"!==t.command&&o[t.command].apply(o,t.args)}),this.stylesheet=e,!0},o.prototype.addImage=function(e,o){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,o),this.fire(new t.Event("data",{dataType:"style"}))},o.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},o.prototype.getImage=function(t){return this.imageManager.getImage(t)},o.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this.fire(new t.Event("data",{dataType:"style"}))},o.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},o.prototype.addSource=function(e,o,n){var r=this;if(void 0===n&&(n={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!o.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(o).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(o.type)>=0)||!this._validate(t.validateStyle.source,"sources."+e,o,null,n)){this.map&&this.map._collectResourceTiming&&(o.collectResourceTiming=!0);var i=this.sourceCaches[e]=new Pt(e,o,this.dispatcher);i.style=this,i.setEventedParent(this,function(){return{isSourceLoaded:r.loaded(),source:i.serialize(),sourceId:e}}),i.onAdd(this.map),this._changed=!0}},o.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var o in this._layers)if(this._layers[o].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+o+'" is using it.')));var n=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],n.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),n.setEventedParent(null),n.clearTiles(),n.onRemove&&n.onRemove(this.map),this._changed=!0},o.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},o.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},o.prototype.addLayer=function(e,o,n){void 0===n&&(n={}),this._checkLoaded();var r=e.id;if(this.getLayer(r))this.fire(new t.ErrorEvent(new Error('Layer with id "'+r+'" already exists on this map')));else{var i;if("custom"===e.type){if(Me(this,t.validateCustomStyleLayer(e)))return;i=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(r,e.source),e=t.clone$1(e),e=t.extend(e,{source:r})),this._validate(t.validateStyle.layer,"layers."+r,e,{arrayIndex:-1},n))return;i=t.createStyleLayer(e),this._validateLayer(i),i.setEventedParent(this,{layer:{id:r}})}var a=o?this._order.indexOf(o):this._order.length;if(o&&-1===a)this.fire(new t.ErrorEvent(new Error('Layer with id "'+o+'" does not exist on this map.')));else{if(this._order.splice(a,0,r),this._layerOrderChanged=!0,this._layers[r]=i,this._removedLayers[r]&&i.source&&"custom"!==i.type){var s=this._removedLayers[r];delete this._removedLayers[r],s.type!==i.type?this._updatedSources[i.source]="clear":(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause())}this._updateLayer(i),i.onAdd&&i.onAdd(this.map)}}},o.prototype.moveLayer=function(e,o){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==o){var n=this._order.indexOf(e);this._order.splice(n,1);var r=o?this._order.indexOf(o):this._order.length;o&&-1===r?this.fire(new t.ErrorEvent(new Error('Layer with id "'+o+'" does not exist on this map.'))):(this._order.splice(r,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},o.prototype.removeLayer=function(e){this._checkLoaded();var o=this._layers[e];if(o){o.setEventedParent(null);var n=this._order.indexOf(e);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=o,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],o.onRemove&&o.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},o.prototype.getLayer=function(t){return this._layers[t]},o.prototype.setLayerZoomRange=function(e,o,n){this._checkLoaded();var r=this.getLayer(e);r?r.minzoom===o&&r.maxzoom===n||(null!=o&&(r.minzoom=o),null!=n&&(r.maxzoom=n),this._updateLayer(r)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},o.prototype.setFilter=function(e,o,n){void 0===n&&(n={}),this._checkLoaded();var r=this.getLayer(e);if(r){if(!t.deepEqual(r.filter,o))return null==o?(r.filter=void 0,void this._updateLayer(r)):void(this._validate(t.validateStyle.filter,"layers."+r.id+".filter",o,null,n)||(r.filter=t.clone$1(o),this._updateLayer(r)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},o.prototype.getFilter=function(e){return t.clone$1(this.getLayer(e).filter)},o.prototype.setLayoutProperty=function(e,o,n,r){void 0===r&&(r={}),this._checkLoaded();var i=this.getLayer(e);i?t.deepEqual(i.getLayoutProperty(o),n)||(i.setLayoutProperty(o,n,r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},o.prototype.getLayoutProperty=function(e,o){var n=this.getLayer(e);if(n)return n.getLayoutProperty(o);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},o.prototype.setPaintProperty=function(e,o,n,r){void 0===r&&(r={}),this._checkLoaded();var i=this.getLayer(e);i?t.deepEqual(i.getPaintProperty(o),n)||(i.setPaintProperty(o,n,r)&&this._updateLayer(i),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},o.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},o.prototype.setFeatureState=function(e,o){this._checkLoaded();var n=e.source,r=e.sourceLayer,i=this.sourceCaches[n],a=parseInt(e.id,10);if(void 0!==i){var s=i.getSource().type;"geojson"===s&&r?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==s||r?isNaN(a)||a<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative."))):i.setFeatureState(r,a,o):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},o.prototype.removeFeatureState=function(e,o){this._checkLoaded();var n=e.source,r=this.sourceCaches[n];if(void 0!==r){var i=r.getSource().type,a="vector"===i?e.sourceLayer:void 0,s=parseInt(e.id,10);"vector"!==i||a?void 0!==e.id&&isNaN(s)||s<0?this.fire(new t.ErrorEvent(new Error("The feature id parameter must be non-negative."))):o&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):r.removeFeatureState(a,s,o):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},o.prototype.getFeatureState=function(e){this._checkLoaded();var o=e.source,n=e.sourceLayer,r=this.sourceCaches[o],i=parseInt(e.id,10);if(void 0!==r)if("vector"!==r.getSource().type||n){if(!(isNaN(i)||i<0))return r.getFeatureState(n,i);this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided and non-negative.")))}else this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));else this.fire(new t.ErrorEvent(new Error("The source '"+o+"' does not exist in the map's style.")))},o.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},o.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._serializeLayers(this._order)},function(t){return void 0!==t})},o.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},o.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,o=function(t){return"fill-extrusion"===e._layers[t].type},n={},r=[],i=this._order.length-1;i>=0;i--){var a=this._order[i];if(o(a)){n[a]=i;for(var s=0,l=t;s<l.length;s+=1){var u=l[s][a];if(u)for(var c=0,p=u;c<p.length;c+=1){var d=p[c];r.push(d)}}}}r.sort(function(t,e){return e.intersectionZ-t.intersectionZ});for(var h=[],f=this._order.length-1;f>=0;f--){var g=this._order[f];if(o(g))for(var y=r.length-1;y>=0;y--){var v=r[y].feature;if(n[v.layer.id]<f)break;h.push(v),r.pop()}else for(var m=0,C=t;m<C.length;m+=1){var _=C[m][g];if(_)for(var w=0,b=_;w<b.length;w+=1){var S=b[w];h.push(S.feature)}}}return h},o.prototype.queryRenderedFeatures=function(e,o,n){o&&o.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",o.filter,null,o);var r={};if(o&&o.layers){if(!Array.isArray(o.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var i=0,a=o.layers;i<a.length;i+=1){var s=a[i],l=this._layers[s];if(!l)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];r[l.source]=!0}}var u=[];for(var c in this.sourceCaches)o.layers&&!r[c]||u.push(N(this.sourceCaches[c],this._layers,e,o,n));return this.placement&&u.push(function(t,e,o,n,r,i){for(var a={},s=r.queryRenderedSymbols(o),l=[],u=0,c=Object.keys(s).map(Number);u<c.length;u+=1){var p=c[u];l.push(i[p])}l.sort(k);for(var d=function(){var e=f[h],o=e.featureIndex.lookupSymbolFeatures(s[e.bucketInstanceId],e.bucketIndex,e.sourceLayerIndex,n.filter,n.layers,t);for(var r in o){var i=a[r]=a[r]||[],l=o[r];l.sort(function(t,o){var n=e.featureSortOrder;if(n){var r=n.indexOf(t.featureIndex);return n.indexOf(o.featureIndex)-r}return o.featureIndex-t.featureIndex});for(var u=0,c=l;u<c.length;u+=1){var p=c[u];i.push(p)}}},h=0,f=l;h<f.length;h+=1)d();var g=function(o){a[o].forEach(function(n){var r=n.feature,i=t[o],a=e[i.source].getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=a})};for(var y in a)g(y);return a}(this._layers,this.sourceCaches,e,o,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(u)},o.prototype.querySourceFeatures=function(e,o){o&&o.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",o.filter,null,o);var n=this.sourceCaches[e];return n?function(t,e){for(var o=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),n=[],r={},i=0;i<o.length;i++){var a=o[i],s=a.tileID.canonical.key;r[s]||(r[s]=!0,a.querySourceFeatures(n,e))}return n}(n,o):[]},o.prototype.addSourceType=function(t,e,n){return o.getSourceType(t)?n(new Error('A source type called "'+t+'" already exists.')):(o.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))},o.prototype.getLight=function(){return this.light.getLight()},o.prototype.setLight=function(e,o){void 0===o&&(o={}),this._checkLoaded();var n=this.light.getLight(),r=!1;for(var i in e)if(!t.deepEqual(e[i],n[i])){r=!0;break}if(r){var a={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,o),this.light.updateTransitions(a)}},o.prototype._validate=function(e,o,n,r,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&Me(this,e.call(t.validateStyle,t.extend({key:o,style:this.serialize(),value:n,styleSpec:t.styleSpec},r)))},o.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[e].clearTiles();this.dispatcher.remove()},o.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},o.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},o.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},o.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},o.prototype._updatePlacement=function(e,o,n,r){for(var i=!1,a=!1,s={},l=0,u=this._order;l<u.length;l+=1){var c=u[l],p=this._layers[c];if("symbol"===p.type){if(!s[p.source]){var d=this.sourceCaches[p.source];s[p.source]=d.getRenderableIds(!0).map(function(t){return d.getTileByID(t)}).sort(function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)})}var h=this.crossTileSymbolIndex.addLayer(p,s[p.source],e.center.lng);i=i||h}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var f=this._layerOrderChanged||0===n;if((f||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now()))&&(this.pauseablePlacement=new Te(e,this._order,f,o,n,r,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),a=!0),i&&this.pauseablePlacement.placement.setStale()),a||i)for(var g=0,y=this._order;g<y.length;g+=1){var v=y[g],m=this._layers[v];"symbol"===m.type&&this.placement.updateLayerOpacities(m,s[m.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},o.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},o.prototype.getImages=function(t,e,o){this.imageManager.getImages(e.icons,o)},o.prototype.getGlyphs=function(t,e,o){this.glyphManager.getGlyphs(e.stacks,o)},o.prototype.getResource=function(e,o,n){return t.makeRequest(o,n)},o}(t.Evented);Fe.getSourceType=function(t){return I[t]},Fe.setSourceType=function(t,e){I[t]=e},Fe.registerForPluginAvailability=t.registerForPluginAvailability;var Ne=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),ke=lo("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Ge=lo("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ve=lo("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Be=lo("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),ze=lo("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),He=lo("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),je=lo("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Ue=lo("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),We=lo("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {color=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {color*=.2;}float extrude_scale_length=length(v_extrude_scale);float extrude_length=length(v_extrude)*extrude_scale_length;float stroke_width=15.0*extrude_scale_length/u_overscale_factor;float radius=v_radius*extrude_scale_length;float distance_to_edge=abs(extrude_length-radius);float opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor=opacity_t*color;}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;v_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;v_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}"),Ke=lo("uniform highp vec4 u_color;void main() {gl_FragColor=u_color;}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),qe=lo("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Ye=lo("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Ze=lo("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Xe=lo("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Je=lo("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),Qe=lo("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec4 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),$e=lo("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;return (data.r+data.g*256.0+data.b*256.0*256.0)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),to=lo("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),eo=lo("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),oo=lo("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),no=lo("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec4 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x,1.0);float x_b=mod(v_linesofar/pattern_size_b.x,1.0);float y_a=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_a.y+2.0)/2.0)/pattern_size_a.y);float y_b=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_b.y+2.0)/2.0)/pattern_size_b.y);vec2 pos_a=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,vec2(x_a,y_a));vec2 pos_b=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,vec2(x_b,y_b));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);}"),ro=lo("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),io=lo("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ao=lo("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),so=lo("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=vec2(tex.x,tex.y);v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}");function lo(t,e){var o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,n={};return{fragmentSource:t=t.replace(o,function(t,e,o,r,i){return n[i]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+i+"\nvarying "+o+" "+r+" "+i+";\n#else\nuniform "+o+" "+r+" u_"+i+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+i+"\n    "+o+" "+r+" "+i+" = u_"+i+";\n#endif\n"}),vertexSource:e=e.replace(o,function(t,e,o,r,i){var a="float"===r?"vec2":"vec4",s=i.match(/color/)?"color":a;return n[i]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float u_"+i+"_t;\nattribute "+o+" "+a+" a_"+i+";\nvarying "+o+" "+r+" "+i+";\n#else\nuniform "+o+" "+r+" u_"+i+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = a_"+i+";\n#else\n    "+o+" "+r+" "+i+" = u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+i+" = unpack_mix_"+s+"(a_"+i+", u_"+i+"_t);\n#else\n    "+o+" "+r+" "+i+" = u_"+i+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+i+"\nuniform lowp float u_"+i+"_t;\nattribute "+o+" "+a+" a_"+i+";\n#else\nuniform "+o+" "+r+" u_"+i+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+o+" "+r+" "+i+" = a_"+i+";\n#else\n    "+o+" "+r+" "+i+" = u_"+i+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+i+"\n    "+o+" "+r+" "+i+" = unpack_mix_"+s+"(a_"+i+", u_"+i+"_t);\n#else\n    "+o+" "+r+" "+i+" = u_"+i+";\n#endif\n"})}}var uo=Object.freeze({prelude:ke,background:Ge,backgroundPattern:Ve,circle:Be,clippingMask:ze,heatmap:He,heatmapTexture:je,collisionBox:Ue,collisionCircle:We,debug:Ke,fill:qe,fillOutline:Ye,fillOutlinePattern:Ze,fillPattern:Xe,fillExtrusion:Je,fillExtrusionPattern:Qe,hillshadePrepare:$e,hillshade:to,line:eo,lineGradient:oo,linePattern:no,lineSDF:ro,raster:io,symbolIcon:ao,symbolSDF:so}),co=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};co.prototype.bind=function(t,e,o,n,r,i,a,s){this.context=t;for(var l=this.boundPaintVertexBuffers.length!==n.length,u=0;!l&&u<n.length;u++)this.boundPaintVertexBuffers[u]!==n[u]&&(l=!0);var c=!this.vao||this.boundProgram!==e||this.boundLayoutVertexBuffer!==o||l||this.boundIndexBuffer!==r||this.boundVertexOffset!==i||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s;!t.extVertexArrayObject||c?this.freshBind(e,o,n,r,i,a,s):(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),r&&r.dynamicDraw&&r.bind(),s&&s.bind())},co.prototype.freshBind=function(t,e,o,n,r,i,a){var s,l=t.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=o,this.boundIndexBuffer=n,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=i,this.boundDynamicVertexBuffer2=a;else{s=u.currentNumAttributes||0;for(var p=l;p<s;p++)c.disableVertexAttribArray(p)}e.enableAttributes(c,t);for(var d=0,h=o;d<h.length;d+=1)h[d].enableAttributes(c,t);i&&i.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,r);for(var f=0,g=o;f<g.length;f+=1){var y=g[f];y.bind(),y.setVertexAttribPointers(c,t,r)}i&&(i.bind(),i.setVertexAttribPointers(c,t,r)),n&&n.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,r)),u.currentNumAttributes=l},co.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var po=function(t,e,o,n,r){var i=t.gl;this.program=i.createProgram();var a=o.defines();r&&a.push("#define OVERDRAW_INSPECTOR;");var s=a.concat(ke.fragmentSource,e.fragmentSource).join("\n"),l=a.concat(ke.vertexSource,e.vertexSource).join("\n"),u=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(u,s),i.compileShader(u),i.attachShader(this.program,u);var c=i.createShader(i.VERTEX_SHADER);i.shaderSource(c,l),i.compileShader(c),i.attachShader(this.program,c);for(var p=o.layoutAttributes||[],d=0;d<p.length;d++)i.bindAttribLocation(this.program,d,p[d].name);i.linkProgram(this.program),this.numAttributes=i.getProgramParameter(this.program,i.ACTIVE_ATTRIBUTES),this.attributes={};for(var h={},f=0;f<this.numAttributes;f++){var g=i.getActiveAttrib(this.program,f);g&&(this.attributes[g.name]=i.getAttribLocation(this.program,g.name))}for(var y=i.getProgramParameter(this.program,i.ACTIVE_UNIFORMS),v=0;v<y;v++){var m=i.getActiveUniform(this.program,v);m&&(h[m.name]=i.getUniformLocation(this.program,m.name))}this.fixedUniforms=n(t,h),this.binderUniforms=o.getUniforms(t,h)};function ho(e,o,n){var r=1/le(n,1,o.transform.tileZoom),i=Math.pow(2,n.tileID.overscaledZ),a=n.tileSize*Math.pow(2,o.transform.tileZoom)/i,s=a*(n.tileID.canonical.x+n.tileID.wrap*i),l=a*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[t.browser.devicePixelRatio,r,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[s>>16,l>>16],u_pixel_coord_lower:[65535&s,65535&l]}}po.prototype.draw=function(t,e,o,n,r,i,a,s,l,u,c,p,d,h,f,g){var y,v=t.gl;for(var m in t.program.set(this.program),t.setDepthMode(o),t.setStencilMode(n),t.setColorMode(r),t.setCullFace(i),this.fixedUniforms)this.fixedUniforms[m].set(a[m]);h&&h.setUniforms(t,this.binderUniforms,p,{zoom:d});for(var C=(y={},y[v.LINES]=2,y[v.TRIANGLES]=3,y[v.LINE_STRIP]=1,y)[e],_=0,w=c.get();_<w.length;_+=1){var b=w[_],S=b.vaos||(b.vaos={});(S[s]||(S[s]=new co)).bind(t,this,l,h?h.getPaintVertexBuffers():[],u,b.vertexOffset,f,g),v.drawElements(e,b.primitiveLength*C,v.UNSIGNED_SHORT,b.primitiveOffset*C*2)}};var fo=function(e,o,n,r){var i=o.style.light,a=i.properties.get("position"),s=[a.x,a.y,a.z],l=t.create$1();"viewport"===i.properties.get("anchor")&&t.fromRotation(l,-o.transform.angle),t.transformMat3(s,s,l);var u=i.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:i.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+n,u_opacity:r}},go=function(e,o,n,r,i,a,s){return t.extend(fo(e,o,n,r),ho(a,o,s),{u_height_factor:-Math.pow(2,i.overscaledZ)/s.tileSize/8})},yo=function(t){return{u_matrix:t}},vo=function(e,o,n,r){return t.extend(yo(e),ho(n,o,r))},mo=function(t,e){return{u_matrix:t,u_world:e}},Co=function(e,o,n,r,i){return t.extend(vo(e,o,n,r),{u_world:i})},_o=function(e,o,n,r){var i,a,s=e.transform;if("map"===r.paint.get("circle-pitch-alignment")){var l=le(n,1,s.zoom);i=!0,a=[l,l]}else i=!1,a=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(o.posMatrix,n,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+i,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:a}},wo=function(e,o){return{u_matrix:new t.UniformMatrix4f(e,o.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,o.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,o.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,o.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,o.u_overscale_factor)}},bo=function(t,e,o){var n=le(o,1,e.zoom),r=Math.pow(2,e.zoom-o.tileID.overscaledZ),i=o.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:n,u_extrude_scale:[e.pixelsToGLUnits[0]/(n*r),e.pixelsToGLUnits[1]/(n*r)],u_overscale_factor:i}},So=function(t,e){return{u_matrix:t,u_color:e}},Eo=function(t){return{u_matrix:t}},xo=function(t,e,o,n){return{u_matrix:t,u_extrude_scale:le(e,1,o),u_intensity:n}},To=function(t,e,o){var n=o.paint.get("hillshade-shadow-color"),r=o.paint.get("hillshade-highlight-color"),i=o.paint.get("hillshade-accent-color"),a=o.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===o.paint.get("hillshade-illumination-anchor")&&(a-=t.transform.angle);var s=!t.options.moving;return{u_matrix:t.transform.calculatePosMatrix(e.tileID.toUnwrapped(),s),u_image:0,u_latrange:Ro(0,e.tileID),u_light:[o.paint.get("hillshade-exaggeration"),a],u_shadow:n,u_highlight:r,u_accent:i}},Oo=function(e,o){var n=e.dem.stride,r=t.create();return t.ortho(r,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(r,r,[0,-t.EXTENT,0]),{u_matrix:r,u_image:1,u_dimension:[n,n],u_zoom:e.tileID.overscaledZ,u_maxzoom:o}};function Ro(e,o){var n=Math.pow(2,o.canonical.z),r=o.canonical.y;return[new t.MercatorCoordinate(0,r/n).toLngLat().lat,new t.MercatorCoordinate(0,(r+1)/n).toLngLat().lat]}var Po=function(e,o,n){var r=e.transform;return{u_matrix:Lo(e,o,n),u_ratio:1/le(o,1,r.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},Ao=function(e,o,n){return t.extend(Po(e,o,n),{u_image:0})},Do=function(e,o,n,r){var i=e.transform,a=Io(o,i);return{u_matrix:Lo(e,o,n),u_texsize:o.imageAtlasTexture.size,u_ratio:1/le(o,1,i.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[t.browser.devicePixelRatio,a,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}},Mo=function(e,o,n,r,i){var a=e.transform,s=e.lineAtlas,l=Io(o,a),u="round"===n.layout.get("line-cap"),c=s.getDash(r.from,u),p=s.getDash(r.to,u),d=c.width*i.fromScale,h=p.width*i.toScale;return t.extend(Po(e,o,n),{u_patternscale_a:[l/d,-c.height/2],u_patternscale_b:[l/h,-p.height/2],u_sdfgamma:s.width/(256*Math.min(d,h)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:p.y,u_mix:i.t})};function Io(t,e){return 1/le(t,1,e.tileZoom)}function Lo(t,e,o){return t.translatePosMatrix(e.tileID.posMatrix,e,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}var Fo=function(t,e,o,n,r){return{u_matrix:t,u_tl_parent:e,u_scale_parent:o,u_buffer_scale:1,u_fade_t:n.mix,u_opacity:n.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(a=r.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(i=r.paint.get("raster-contrast"),i>0?1/(1-i):1+i),u_spin_weights:No(r.paint.get("raster-hue-rotate"))};var i,a};function No(t){t*=Math.PI/180;var e=Math.sin(t),o=Math.cos(t);return[(2*o+1)/3,(-Math.sqrt(3)*e-o+1)/3,(Math.sqrt(3)*e-o+1)/3]}var ko=function(t,e,o,n,r,i,a,s,l,u){var c=r.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:c.width/c.height,u_fade_change:r.options.fadeDuration?r.symbolFadeChange:1,u_matrix:i,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+n,u_texsize:u,u_texture:0}},Go=function(e,o,n,r,i,a,s,l,u,c,p){var d=i.transform;return t.extend(ko(e,o,n,r,i,a,s,l,u,c),{u_gamma_scale:r?Math.cos(d._pitch)*d.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+p})},Vo=function(t,e,o){return{u_matrix:t,u_opacity:e,u_color:o}},Bo=function(e,o,n,r,i,a){return t.extend(function(t,e,o,n){var r=o.imageManager.getPattern(t.from),i=o.imageManager.getPattern(t.to),a=o.imageManager.getPixelSize(),s=a.width,l=a.height,u=Math.pow(2,n.tileID.overscaledZ),c=n.tileSize*Math.pow(2,o.transform.tileZoom)/u,p=c*(n.tileID.canonical.x+n.tileID.wrap*u),d=c*n.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:r.tl,u_pattern_br_a:r.br,u_pattern_tl_b:i.tl,u_pattern_br_b:i.br,u_texsize:[s,l],u_mix:e.t,u_pattern_size_a:r.displaySize,u_pattern_size_b:i.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/le(n,1,o.transform.tileZoom),u_pixel_coord_upper:[p>>16,d>>16],u_pixel_coord_lower:[65535&p,65535&d]}}(r,a,n,i),{u_matrix:e,u_opacity:o})},zo={fillExtrusion:function(e,o){return{u_matrix:new t.UniformMatrix4f(e,o.u_matrix),u_lightpos:new t.Uniform3f(e,o.u_lightpos),u_lightintensity:new t.Uniform1f(e,o.u_lightintensity),u_lightcolor:new t.Uniform3f(e,o.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,o.u_vertical_gradient),u_opacity:new t.Uniform1f(e,o.u_opacity)}},fillExtrusionPattern:function(e,o){return{u_matrix:new t.UniformMatrix4f(e,o.u_matrix),u_lightpos:new t.Uniform3f(e,o.u_lightpos),u_lightintensity:new t.Uniform1f(e,o.u_lightintensity),u_lightcolor:new t.Uniform3f(e,o.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,o.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,o.u_height_factor),u_image:new t.Uniform1i(e,o.u_image),u_texsize:new t.Uniform2f(e,o.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,o.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,o.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,o.u_scale),u_fade:new t.Uniform1f(e,o.u_fade),u_opacity:new t.Uniform1f(e,o.u_opacity)}},fill:function(e,o){return{u_matrix:new t.UniformMatrix4f(e,o.u_matrix)}},fillPattern:function(e,o){return{u_matrix:new t.UniformMatrix4f(e,o.u_matrix),u_image:new t.Uniform1i(e,o.u_image),u_texsize:new t.Uniform2f(e,o.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,o.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,o.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,o.u_scale),u_fade:new t.Uniform1f(e,o.u_fade)}},fillOutline:function(e,o){return{u_matrix:new t.UniformMatrix4f(e,o.u_matrix),u_world:new t.Uniform2f(e,o.u_world)}},fillOutlinePattern:function(e,o){return{u_matrix:new t.UniformMatrix4f(e,o.u_matrix),u_world:new t.Uniform2f(e,o.u_world),u_image:new t.Uniform1i(e,o.u_image),u_texsize:new t.Uniform2f(e,o.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,o.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,o.u_pixel_coord_lower),u_scale:new t.Uniform4f(e,o.u_scale),u_fade:new t.Uniform1f(e,o.u_fade)}},circle:function(e,o){return{u_camera_to_center_distance:new t.Uniform1f(e,o.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,o.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,o.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,o.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,o.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,o.u_matrix)}},collisionBox:wo,collisionCircle:wo,debug:function(e,o){return{u_color:new t.UniformColor(e,o.u_color),u_matrix:new t.UniformMatrix4f(e,o.u_matrix)}},clippingMask:function(e,o){return{u_matrix:new t.UniformMatrix4f(e,o.u_matrix)}},heatmap:function(e,o){return{u_extrude_scale:new t.Uniform1f(e,o.u_extrude_scale),u_intensity:new t.Uniform1f(e,o.u_intensity),u_matrix:new t.UniformMatrix4f(e,o.u_matrix)}},heatmapTexture:function(e,o){return{u_matrix:new t.UniformMatrix4f(e,o.u_matrix),u_world:new t.Uniform2f(e,o.u_world),u_image:new t.Uniform1i(e,o.u_image),u_color_ramp:new t.Uniform1i(e,o.u_color_ramp),u_opacity:new t.Uniform1f(e,o.u_opacity)}},hillshade:function(e,o){return{u_matrix:new t.UniformMatrix4f(e,o.u_matrix),u_image:new t.Uniform1i(e,o.u_image),u_latrange:new t.Uniform2f(e,o.u_latrange),u_light:new t.Uniform2f(e,o.u_light),u_shadow:new t.UniformColor(e,o.u_shadow),u_highlight:new t.UniformColor(e,o.u_highlight),u_accent:new t.UniformColor(e,o.u_accent)}},hillshadePrepare:function(e,o){return{u_matrix:new t.UniformMatrix4f(e,o.u_matrix),u_image:new t.Uniform1i(e,o.u_image),u_dimension:new t.Uniform2f(e,o.u_dimension),u_zoom:new t.Uniform1f(e,o.u_zoom),u_maxzoom:new t.Uniform1f(e,o.u_maxzoom)}},line:function(e,o){return{u_matrix:new t.UniformMatrix4f(e,o.u_matrix),u_ratio:new t.Uniform1f(e,o.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,o.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,o.u_units_to_pixels)}},lineGradient:function(e,o){return{u_matrix:new t.UniformMatrix4f(e,o.u_matrix),u_ratio:new t.Uniform1f(e,o.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,o.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,o.u_units_to_pixels),u_image:new t.Uniform1i(e,o.u_image)}},linePattern:function(e,o){return{u_matrix:new t.UniformMatrix4f(e,o.u_matrix),u_texsize:new t.Uniform2f(e,o.u_texsize),u_ratio:new t.Uniform1f(e,o.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,o.u_device_pixel_ratio),u_image:new t.Uniform1i(e,o.u_image),u_units_to_pixels:new t.Uniform2f(e,o.u_units_to_pixels),u_scale:new t.Uniform4f(e,o.u_scale),u_fade:new t.Uniform1f(e,o.u_fade)}},lineSDF:function(e,o){return{u_matrix:new t.UniformMatrix4f(e,o.u_matrix),u_ratio:new t.Uniform1f(e,o.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,o.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,o.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,o.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,o.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,o.u_sdfgamma),u_image:new t.Uniform1i(e,o.u_image),u_tex_y_a:new t.Uniform1f(e,o.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,o.u_tex_y_b),u_mix:new t.Uniform1f(e,o.u_mix)}},raster:function(e,o){return{u_matrix:new t.UniformMatrix4f(e,o.u_matrix),u_tl_parent:new t.Uniform2f(e,o.u_tl_parent),u_scale_parent:new t.Uniform1f(e,o.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,o.u_buffer_scale),u_fade_t:new t.Uniform1f(e,o.u_fade_t),u_opacity:new t.Uniform1f(e,o.u_opacity),u_image0:new t.Uniform1i(e,o.u_image0),u_image1:new t.Uniform1i(e,o.u_image1),u_brightness_low:new t.Uniform1f(e,o.u_brightness_low),u_brightness_high:new t.Uniform1f(e,o.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,o.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,o.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,o.u_spin_weights)}},symbolIcon:function(e,o){return{u_is_size_zoom_constant:new t.Uniform1i(e,o.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,o.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,o.u_size_t),u_size:new t.Uniform1f(e,o.u_size),u_camera_to_center_distance:new t.Uniform1f(e,o.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,o.u_pitch),u_rotate_symbol:new t.Uniform1i(e,o.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,o.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,o.u_fade_change),u_matrix:new t.UniformMatrix4f(e,o.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,o.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,o.u_coord_matrix),u_is_text:new t.Uniform1f(e,o.u_is_text),u_pitch_with_map:new t.Uniform1i(e,o.u_pitch_with_map),u_texsize:new t.Uniform2f(e,o.u_texsize),u_texture:new t.Uniform1i(e,o.u_texture)}},symbolSDF:function(e,o){return{u_is_size_zoom_constant:new t.Uniform1i(e,o.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,o.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,o.u_size_t),u_size:new t.Uniform1f(e,o.u_size),u_camera_to_center_distance:new t.Uniform1f(e,o.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,o.u_pitch),u_rotate_symbol:new t.Uniform1i(e,o.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,o.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,o.u_fade_change),u_matrix:new t.UniformMatrix4f(e,o.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,o.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,o.u_coord_matrix),u_is_text:new t.Uniform1f(e,o.u_is_text),u_pitch_with_map:new t.Uniform1i(e,o.u_pitch_with_map),u_texsize:new t.Uniform2f(e,o.u_texsize),u_texture:new t.Uniform1i(e,o.u_texture),u_gamma_scale:new t.Uniform1f(e,o.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,o.u_device_pixel_ratio),u_is_halo:new t.Uniform1f(e,o.u_is_halo)}},background:function(e,o){return{u_matrix:new t.UniformMatrix4f(e,o.u_matrix),u_opacity:new t.Uniform1f(e,o.u_opacity),u_color:new t.UniformColor(e,o.u_color)}},backgroundPattern:function(e,o){return{u_matrix:new t.UniformMatrix4f(e,o.u_matrix),u_opacity:new t.Uniform1f(e,o.u_opacity),u_image:new t.Uniform1i(e,o.u_image),u_pattern_tl_a:new t.Uniform2f(e,o.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,o.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,o.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,o.u_pattern_br_b),u_texsize:new t.Uniform2f(e,o.u_texsize),u_mix:new t.Uniform1f(e,o.u_mix),u_pattern_size_a:new t.Uniform2f(e,o.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,o.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,o.u_scale_a),u_scale_b:new t.Uniform1f(e,o.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,o.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,o.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,o.u_tile_units_to_pixels)}}};function Ho(e,o){for(var n=e.sort(function(t,e){return t.tileID.isLessThan(e.tileID)?-1:e.tileID.isLessThan(t.tileID)?1:0}),r=0;r<n.length;r++){var i={},a=n[r],s=n.slice(r+1);jo(a.tileID.wrapped(),a.tileID,s,new t.OverscaledTileID(0,a.tileID.wrap+1,0,0,0),i),a.setMask(i,o)}}function jo(e,o,n,r,i){for(var a=0;a<n.length;a++){var s=n[a];if(r.isLessThan(s.tileID))break;if(o.key===s.tileID.key)return;if(s.tileID.isChildOf(o)){for(var l=o.children(1/0),u=0;u<l.length;u++)jo(e,l[u],n.slice(a),r,i);return}}var c=o.overscaledZ-e.overscaledZ,p=new t.CanonicalTileID(c,o.canonical.x-(e.canonical.x<<c),o.canonical.y-(e.canonical.y<<c));i[p.key]=i[p.key]||p}function Uo(t,e,o,n,r){for(var i=t.context,a=i.gl,s=r?t.useProgram("collisionCircle"):t.useProgram("collisionBox"),l=0;l<n.length;l++){var u=n[l],c=e.getTile(u),p=c.getBucket(o);if(p){var d=r?p.collisionCircle:p.collisionBox;d&&s.draw(i,r?a.TRIANGLES:a.LINES,Et.disabled,xt.disabled,t.colorModeForRenderPass(),Ot.disabled,bo(u.posMatrix,t.transform,c),o.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,null,t.transform.zoom,null,null,d.collisionVertexBuffer)}}}var Wo=t.identity(new Float32Array(16));function Ko(e,o,n,r,i,a){var s=t.getAnchorAlignment(e),l=-(s.horizontalAlign-.5)*o,u=-(s.verticalAlign-.5)*n,c=t.evaluateRadialOffset(e,r);return new t.Point((l/i+c[0])*a,(u/i+c[1])*a)}function qo(e,o,n,r,i,a,s,l,u,c){var p=e.text.placedSymbolArray,d=e.text.dynamicLayoutVertexArray;d.clear();for(var h=0;h<p.length;h++){var f=p.get(h),g=!f.hidden&&f.crossTileID?r[f.crossTileID]:null;if(g){var y=new t.Point(f.anchorX,f.anchorY),v=Zt(y,n?l:s),m=.5+a.cameraToCenterDistance/v.signedDistanceFromCamera*.5,C=i.evaluateSizeForFeature(e.textSizeData,c,f)*m/t.ONE_EM;n&&(C*=e.tilePixelRatio/u);for(var _=g.width,w=g.height,b=g.radialOffset,S=g.textBoxScale,E=Ko(g.anchor,_,w,b,S,C),x=n?Zt(y.add(E),s).point:v.point.add(o?E.rotate(-a.angle):E),T=0;T<f.numGlyphs;T++)t.addDynamicAttributes(d,x,0)}else re(f.numGlyphs,d)}e.text.dynamicLayoutVertexBuffer.updateData(d)}function Yo(e,o,n,r,i,a,s,l,u,c,p,d,h){for(var f,g,y=e.context,v=y.gl,m=e.transform,C="map"===l,_="map"===u,w=C&&"point"!==n.layout.get("symbol-placement"),b=C&&!_&&!w,S=void 0!==n.layout.get("symbol-sort-key").constantOr(1),E=e.depthModeForSublayer(0,Et.ReadOnly),x=n.layout.get("text-variable-anchor"),T=[],O=0,R=r;O<R.length;O+=1){var P=R[O],A=o.getTile(P),D=A.getBucket(n);if(D){var M=i?D.text:D.icon;if(M&&M.segments.get().length){var I=M.programConfigurations.get(n.id),L=i||D.sdfIcons,F=i?D.textSizeData:D.iconSizeData;f||(f=e.useProgram(L?"symbolSDF":"symbolIcon",I),g=t.evaluateSizeForZoom(F,m.zoom)),y.activeTexture.set(v.TEXTURE0);var N=void 0,k=void 0,G=void 0;if(i)k=A.glyphAtlasTexture,G=v.LINEAR,N=A.glyphAtlasTexture.size;else{var V=1!==n.layout.get("icon-size").constantOr(0)||D.iconsNeedLinear,B=_||0!==m.pitch;k=A.imageAtlasTexture,G=L||e.options.rotating||e.options.zooming||V||B?v.LINEAR:v.NEAREST,N=A.imageAtlasTexture.size}var z=le(A,1,e.transform.zoom),H=qt(P.posMatrix,_,C,e.transform,z),j=Yt(P.posMatrix,_,C,e.transform,z);if(w)Jt(D,P.posMatrix,e,i,H,j,_,c);else if(i&&g&&x){var U=Math.pow(2,m.zoom-A.tileID.overscaledZ);qo(D,C,_,h,t.symbolSize,m,H,P.posMatrix,U,g)}var W=e.translatePosMatrix(P.posMatrix,A,a,s),K=w||i&&x?Wo:H,q=e.translatePosMatrix(j,A,a,s,!0),Y=L&&0!==n.paint.get(i?"text-halo-width":"icon-halo-width").constantOr(1),Z={program:f,buffers:M,uniformValues:L?Go(F.kind,g,b,_,e,W,K,q,i,N,!0):ko(F.kind,g,b,_,e,W,K,q,i,N),atlasTexture:k,atlasInterpolation:G,isSDF:L,hasHalo:Y};if(S)for(var X=0,J=M.segments.get();X<J.length;X+=1){var Q=J[X];T.push({segments:new t.SegmentVector([Q]),sortKey:Q.sortKey,state:Z})}else T.push({segments:M.segments,sortKey:0,state:Z})}}}S&&T.sort(function(t,e){return t.sortKey-e.sortKey});for(var $=0,tt=T;$<tt.length;$+=1){var et=tt[$],ot=et.state;if(ot.atlasTexture.bind(ot.atlasInterpolation,v.CLAMP_TO_EDGE),ot.isSDF){var nt=ot.uniformValues;ot.hasHalo&&(nt.u_is_halo=1,Zo(ot.buffers,et.segments,n,e,ot.program,E,p,d,nt)),nt.u_is_halo=0}Zo(ot.buffers,et.segments,n,e,ot.program,E,p,d,ot.uniformValues)}}function Zo(t,e,o,n,r,i,a,s,l){var u=n.context,c=u.gl;r.draw(u,c.TRIANGLES,i,a,s,Ot.disabled,l,o.id,t.layoutVertexBuffer,t.indexBuffer,e,o.paint,n.transform.zoom,t.programConfigurations.get(o.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function Xo(t,e,o,n,r,i,a){var s,l,u,c,p,d=t.context.gl,h=o.paint.get("fill-pattern"),f=h&&h.constantOr(1),g=o.getCrossfadeParameters();a?(l=f&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=d.LINES):(l=f?"fillPattern":"fill",s=d.TRIANGLES);for(var y=0,v=n;y<v.length;y+=1){var m=v[y],C=e.getTile(m);if(!f||C.patternsLoaded()){var _=C.getBucket(o);if(_){var w=_.programConfigurations.get(o.id),b=t.useProgram(l,w);f&&(t.context.activeTexture.set(d.TEXTURE0),C.imageAtlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE),w.updatePatternPaintBuffers(g));var S=h.constantOr(null);if(S&&C.imageAtlas){var E=C.imageAtlas.patternPositions[S.to],x=C.imageAtlas.patternPositions[S.from];E&&x&&w.setConstantPatternPositions(E,x)}var T=t.translatePosMatrix(m.posMatrix,C,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"));if(a){c=_.indexBuffer2,p=_.segments2;var O=[d.drawingBufferWidth,d.drawingBufferHeight];u="fillOutlinePattern"===l&&f?Co(T,t,g,C,O):mo(T,O)}else c=_.indexBuffer,p=_.segments,u=f?vo(T,t,g,C):yo(T);b.draw(t.context,s,r,t.stencilModeForClipping(m),i,Ot.disabled,u,o.id,_.layoutVertexBuffer,c,p,o.paint,t.transform.zoom,w)}}}}function Jo(t,e,o,n,r,i,a){for(var s=t.context,l=s.gl,u=o.paint.get("fill-extrusion-pattern"),c=u.constantOr(1),p=o.getCrossfadeParameters(),d=o.paint.get("fill-extrusion-opacity"),h=0,f=n;h<f.length;h+=1){var g=f[h],y=e.getTile(g),v=y.getBucket(o);if(v){var m=v.programConfigurations.get(o.id),C=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",m);c&&(t.context.activeTexture.set(l.TEXTURE0),y.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),m.updatePatternPaintBuffers(p));var _=u.constantOr(null);if(_&&y.imageAtlas){var w=y.imageAtlas.patternPositions[_.to],b=y.imageAtlas.patternPositions[_.from];w&&b&&m.setConstantPatternPositions(w,b)}var S=t.translatePosMatrix(g.posMatrix,y,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),E=o.paint.get("fill-extrusion-vertical-gradient"),x=c?go(S,t,E,d,g,p,y):fo(S,t,E,d);C.draw(s,s.gl.TRIANGLES,r,i,a,Ot.backCCW,x,o.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,o.paint,t.transform.zoom,m)}}}function Qo(t,e,o,n,r,i){var a=t.context,s=a.gl,l=e.fbo;if(l){var u=t.useProgram("hillshade");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,l.colorAttachment.get());var c=To(t,e,o);e.maskedBoundsBuffer&&e.maskedIndexBuffer&&e.segments?u.draw(a,s.TRIANGLES,n,r,i,Ot.disabled,c,o.id,e.maskedBoundsBuffer,e.maskedIndexBuffer,e.segments):u.draw(a,s.TRIANGLES,n,r,i,Ot.disabled,c,o.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function $o(e,o,n,r,i,a,s){var l=e.context,u=l.gl;if(o.dem&&o.dem.data){var c=o.dem.dim,p=o.dem.stride,d=o.dem.getPixels();if(l.activeTexture.set(u.TEXTURE1),l.pixelStoreUnpackPremultiplyAlpha.set(!1),o.demTexture=o.demTexture||e.getTileTexture(p),o.demTexture){var h=o.demTexture;h.update(d,{premultiply:!1}),h.bind(u.NEAREST,u.CLAMP_TO_EDGE)}else o.demTexture=new t.Texture(l,d,u.RGBA,{premultiply:!1}),o.demTexture.bind(u.NEAREST,u.CLAMP_TO_EDGE);l.activeTexture.set(u.TEXTURE0);var f=o.fbo;if(!f){var g=new t.Texture(l,{width:c,height:c,data:null},u.RGBA);g.bind(u.LINEAR,u.CLAMP_TO_EDGE),(f=o.fbo=l.createFramebuffer(c,c)).colorAttachment.set(g.texture)}l.bindFramebuffer.set(f.framebuffer),l.viewport.set([0,0,c,c]),e.useProgram("hillshadePrepare").draw(l,u.TRIANGLES,i,a,s,Ot.disabled,Oo(o,r),n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),o.needsHillshadePrepare=!1}}function tn(e,o,n,r,i){var a=r.paint.get("raster-fade-duration");if(a>0){var s=t.browser.now(),l=(s-e.timeAdded)/a,u=o?(s-o.timeAdded)/a:-1,c=n.getSource(),p=i.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),d=!o||Math.abs(o.tileID.overscaledZ-p)>Math.abs(e.tileID.overscaledZ-p),h=d&&e.refreshedUponExpiration?1:t.clamp(d?l:1-u,0,1);return e.refreshedUponExpiration&&l>=1&&(e.refreshedUponExpiration=!1),o?{opacity:1,mix:1-h}:{opacity:h,mix:0}}return{opacity:1,mix:0}}function en(e,o,n){var r=e.context,i=r.gl,a=n.posMatrix,s=e.useProgram("debug"),l=Et.disabled,u=xt.disabled,c=e.colorModeForRenderPass(),p="$debug";s.draw(r,i.LINE_STRIP,l,u,c,Ot.disabled,So(a,t.Color.red),p,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);for(var d=o.getTileByID(n.key).latestRawTileData,h=d&&d.byteLength||0,f=Math.floor(h/1024),g=function(t,e,o,n){n=n||1;var r,i,a,s,l,u,c,p,d=[];for(r=0,i=t.length;r<i;r++)if(l=on[t[r]]){for(p=null,a=0,s=l[1].length;a<s;a+=2)-1===l[1][a]&&-1===l[1][a+1]?p=null:(u=e+l[1][a]*n,c=200-l[1][a+1]*n,p&&d.push(p.x,p.y,u,c),p={x:u,y:c});e+=l[0]*n}return d}(n.toString()+" "+f+"kb",50,0,5),y=new t.StructArrayLayout2i4,v=new t.StructArrayLayout2ui4,m=0;m<g.length;m+=2)y.emplaceBack(g[m],g[m+1]),v.emplaceBack(m,m+1);for(var C=r.createVertexBuffer(y,Ne.members),_=r.createIndexBuffer(v),w=t.SegmentVector.simpleSegment(0,0,y.length/2,y.length/2),b=o.getTile(n).tileSize,S=t.EXTENT/(Math.pow(2,e.transform.zoom-n.overscaledZ)*b),E=[[-1,-1],[-1,1],[1,-1],[1,1]],x=0;x<E.length;x++){var T=E[x];s.draw(r,i.LINES,l,u,c,Ot.disabled,So(t.translate([],a,[S*T[0],S*T[1],0]),t.Color.white),p,C,_,w)}s.draw(r,i.LINES,l,u,c,Ot.disabled,So(a,t.Color.black),p,C,_,w)}var on={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},nn={symbol:function(t,e,o,n,r){if("translucent"===t.renderPass){var i=xt.disabled,a=t.colorModeForRenderPass();0!==o.paint.get("icon-opacity").constantOr(1)&&Yo(t,e,o,n,!1,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),o.layout.get("icon-rotation-alignment"),o.layout.get("icon-pitch-alignment"),o.layout.get("icon-keep-upright"),i,a,r),0!==o.paint.get("text-opacity").constantOr(1)&&Yo(t,e,o,n,!0,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),o.layout.get("text-keep-upright"),i,a,r),e.map.showCollisionBoxes&&function(t,e,o,n){Uo(t,e,o,n,!1),Uo(t,e,o,n,!0)}(t,e,o,n)}},circle:function(t,e,o,n){if("translucent"===t.renderPass){var r=o.paint.get("circle-opacity"),i=o.paint.get("circle-stroke-width"),a=o.paint.get("circle-stroke-opacity");if(0!==r.constantOr(1)||0!==i.constantOr(1)&&0!==a.constantOr(1))for(var s=t.context,l=s.gl,u=t.depthModeForSublayer(0,Et.ReadOnly),c=xt.disabled,p=t.colorModeForRenderPass(),d=0;d<n.length;d++){var h=n[d],f=e.getTile(h),g=f.getBucket(o);if(g){var y=g.programConfigurations.get(o.id);t.useProgram("circle",y).draw(s,l.TRIANGLES,u,c,p,Ot.disabled,_o(t,h,f,o),o.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,o.paint,t.transform.zoom,y)}}}},heatmap:function(e,o,n,r){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var i=e.context,a=i.gl,s=e.depthModeForSublayer(0,Et.ReadOnly),l=xt.disabled,u=new Tt([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,o){var n=t.gl;t.activeTexture.set(n.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var r=o.heatmapFbo;if(r)n.bindTexture(n.TEXTURE_2D,r.colorAttachment.get()),t.bindFramebuffer.set(r.framebuffer);else{var i=n.createTexture();n.bindTexture(n.TEXTURE_2D,i),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),r=o.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4),function t(e,o,n,r){var i=e.gl;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,o.width/4,o.height/4,0,i.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,null),r.colorAttachment.set(n),e.extTextureHalfFloat&&i.checkFramebufferStatus(i.FRAMEBUFFER)!==i.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,r.colorAttachment.setDirty(),t(e,o,n,r))}(t,e,i,r)}}(i,e,n),i.clear({color:t.Color.transparent});for(var c=0;c<r.length;c++){var p=r[c];if(!o.hasRenderableParent(p)){var d=o.getTile(p),h=d.getBucket(n);if(h){var f=h.programConfigurations.get(n.id),g=e.useProgram("heatmap",f),y=e.transform.zoom;g.draw(i,a.TRIANGLES,s,l,u,Ot.disabled,xo(p.posMatrix,d,y,n.paint.get("heatmap-intensity")),n.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,n.paint,e.transform.zoom,f)}}}i.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,o){var n=e.context,r=n.gl,i=o.heatmapFbo;if(i){n.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),n.activeTexture.set(r.TEXTURE1);var a=o.colorRampTexture;a||(a=o.colorRampTexture=new t.Texture(n,o.colorRamp,r.RGBA)),a.bind(r.LINEAR,r.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(n,r.TRIANGLES,Et.disabled,xt.disabled,e.colorModeForRenderPass(),Ot.disabled,function(e,o,n,r){var i=t.create();t.ortho(i,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:i,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:n,u_color_ramp:r,u_opacity:o.paint.get("heatmap-opacity")}}(e,o,0,1),o.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,o.paint,e.transform.zoom)}}(e,n))},line:function(e,o,n,r){if("translucent"===e.renderPass){var i=n.paint.get("line-opacity"),a=n.paint.get("line-width");if(0!==i.constantOr(1)&&0!==a.constantOr(1)){var s=e.depthModeForSublayer(0,Et.ReadOnly),l=e.colorModeForRenderPass(),u=n.paint.get("line-dasharray"),c=n.paint.get("line-pattern"),p=c.constantOr(1),d=n.paint.get("line-gradient"),h=n.getCrossfadeParameters(),f=u?"lineSDF":p?"linePattern":d?"lineGradient":"line",g=e.context,y=g.gl,v=!0;if(d){g.activeTexture.set(y.TEXTURE0);var m=n.gradientTexture;if(!n.gradient)return;m||(m=n.gradientTexture=new t.Texture(g,n.gradient,y.RGBA)),m.bind(y.LINEAR,y.CLAMP_TO_EDGE)}for(var C=0,_=r;C<_.length;C+=1){var w=_[C],b=o.getTile(w);if(!p||b.patternsLoaded()){var S=b.getBucket(n);if(S){var E=S.programConfigurations.get(n.id),x=e.context.program.get(),T=e.useProgram(f,E),O=v||T.program!==x,R=c.constantOr(null);if(R&&b.imageAtlas){var P=b.imageAtlas.patternPositions[R.to],A=b.imageAtlas.patternPositions[R.from];P&&A&&E.setConstantPatternPositions(P,A)}var D=u?Mo(e,b,n,u,h):p?Do(e,b,n,h):d?Ao(e,b,n):Po(e,b,n);u&&(O||e.lineAtlas.dirty)?(g.activeTexture.set(y.TEXTURE0),e.lineAtlas.bind(g)):p&&(g.activeTexture.set(y.TEXTURE0),b.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),E.updatePatternPaintBuffers(h)),T.draw(g,y.TRIANGLES,s,e.stencilModeForClipping(w),l,Ot.disabled,D,n.id,S.layoutVertexBuffer,S.indexBuffer,S.segments,n.paint,e.transform.zoom,E),v=!1}}}}}},fill:function(e,o,n,r){var i=n.paint.get("fill-color"),a=n.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.colorModeForRenderPass(),l=n.paint.get("fill-pattern"),u=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===i.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===u){var c=e.depthModeForSublayer(1,"opaque"===e.renderPass?Et.ReadWrite:Et.ReadOnly);Xo(e,o,n,r,c,s,!1)}if("translucent"===e.renderPass&&n.paint.get("fill-antialias")){var p=e.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,Et.ReadOnly);Xo(e,o,n,r,p,s,!0)}}},"fill-extrusion":function(t,e,o,n){var r=o.paint.get("fill-extrusion-opacity");if(0!==r&&"translucent"===t.renderPass){var i=new Et(t.context.gl.LEQUAL,Et.ReadWrite,t.depthRangeFor3D);if(1!==r||o.paint.get("fill-extrusion-pattern").constantOr(1))Jo(t,e,o,n,i,xt.disabled,Tt.disabled),Jo(t,e,o,n,i,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var a=t.colorModeForRenderPass();Jo(t,e,o,n,i,xt.disabled,a)}}},hillshade:function(t,e,o,n){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var r=t.context,i=e.getSource().maxzoom,a=t.depthModeForSublayer(0,Et.ReadOnly),s=xt.disabled,l=t.colorModeForRenderPass(),u=0,c=n;u<c.length;u+=1){var p=c[u],d=e.getTile(p);d.needsHillshadePrepare&&"offscreen"===t.renderPass?$o(t,d,o,i,a,s,l):"translucent"===t.renderPass&&Qo(t,d,o,a,s,l)}r.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,o,n){if("translucent"===t.renderPass&&0!==o.paint.get("raster-opacity"))for(var r=t.context,i=r.gl,a=e.getSource(),s=t.useProgram("raster"),l=xt.disabled,u=t.colorModeForRenderPass(),c=n.length&&n[0].overscaledZ,p=!t.options.moving,d=0,h=n;d<h.length;d+=1){var f=h[d],g=t.depthModeForSublayer(f.overscaledZ-c,1===o.paint.get("raster-opacity")?Et.ReadWrite:Et.ReadOnly,i.LESS),y=e.getTile(f),v=t.transform.calculatePosMatrix(f.toUnwrapped(),p);y.registerFadeDuration(o.paint.get("raster-fade-duration"));var m=e.findLoadedParent(f,0),C=tn(y,m,e,o,t.transform),_=void 0,w=void 0,b="nearest"===o.paint.get("raster-resampling")?i.NEAREST:i.LINEAR;r.activeTexture.set(i.TEXTURE0),y.texture.bind(b,i.CLAMP_TO_EDGE,i.LINEAR_MIPMAP_NEAREST),r.activeTexture.set(i.TEXTURE1),m?(m.texture.bind(b,i.CLAMP_TO_EDGE,i.LINEAR_MIPMAP_NEAREST),_=Math.pow(2,m.tileID.overscaledZ-y.tileID.overscaledZ),w=[y.tileID.canonical.x*_%1,y.tileID.canonical.y*_%1]):y.texture.bind(b,i.CLAMP_TO_EDGE,i.LINEAR_MIPMAP_NEAREST);var S=Fo(v,w||[0,0],_||1,C,o);a instanceof A?s.draw(r,i.TRIANGLES,g,l,u,Ot.disabled,S,o.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):y.maskedBoundsBuffer&&y.maskedIndexBuffer&&y.segments?s.draw(r,i.TRIANGLES,g,l,u,Ot.disabled,S,o.id,y.maskedBoundsBuffer,y.maskedIndexBuffer,y.segments,o.paint,t.transform.zoom):s.draw(r,i.TRIANGLES,g,l,u,Ot.disabled,S,o.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,o){var n=o.paint.get("background-color"),r=o.paint.get("background-opacity");if(0!==r){var i=t.context,a=i.gl,s=t.transform,l=s.tileSize,u=o.paint.get("background-pattern");if(!t.isPatternMissing(u)){var c=u||1!==n.a||1!==r?"translucent":"opaque";if(t.renderPass===c){var p=xt.disabled,d=t.depthModeForSublayer(0,"opaque"===c?Et.ReadWrite:Et.ReadOnly),h=t.colorModeForRenderPass(),f=t.useProgram(u?"backgroundPattern":"background"),g=s.coveringTiles({tileSize:l});u&&(i.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context));for(var y=o.getCrossfadeParameters(),v=0,m=g;v<m.length;v+=1){var C=m[v],_=t.transform.calculatePosMatrix(C.toUnwrapped()),w=u?Bo(_,r,t,u,{tileID:C,tileSize:l},y):Vo(_,r,n);f.draw(i,a.TRIANGLES,d,p,h,Ot.disabled,w,o.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,o){for(var n=0;n<o.length;n++)en(t,e,o[n])},custom:function(t,e,o){var n=t.context,r=o.implementation;if("offscreen"===t.renderPass){var i=r.prerender;i&&(t.setCustomLayerDefaults(),n.setColorMode(t.colorModeForRenderPass()),i.call(r,n.gl,t.transform.customLayerMatrix()),n.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),n.setColorMode(t.colorModeForRenderPass()),n.setStencilMode(xt.disabled);var a="3d"===r.renderingMode?new Et(t.context.gl.LEQUAL,Et.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,Et.ReadOnly);n.setDepthMode(a),r.render(n.gl,t.transform.customLayerMatrix()),n.setDirty(),t.setBaseState(),n.bindFramebuffer.set(null)}}},rn=function(e,o){this.context=new Rt(e),this.transform=o,this._tileTextures={},this.setup(),this.numSublayers=Pt.maxUnderzooming+Pt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new t.ProgramConfiguration,this.crossTileSymbolIndex=new De};function an(t,e){if(t.y>e.y){var o=t;t=e,e=o}return{x0:t.x,y0:t.y,x1:e.x,y1:e.y,dx:e.x-t.x,dy:e.y-t.y}}function sn(t,e,o,n,r){var i=Math.max(o,Math.floor(e.y0)),a=Math.min(n,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var l=t.dx/t.dy,u=e.dx/e.dy,c=t.dx>0,p=e.dx<0,d=i;d<a;d++){var h=l*Math.max(0,Math.min(t.dy,d+c-t.y0))+t.x0,f=u*Math.max(0,Math.min(e.dy,d+p-e.y0))+e.x0;r(Math.floor(f),Math.ceil(h),d)}}function ln(t,e,o,n,r,i){var a,s=an(t,e),l=an(e,o),u=an(o,t);s.dy>l.dy&&(a=s,s=l,l=a),s.dy>u.dy&&(a=s,s=u,u=a),l.dy>u.dy&&(a=l,l=u,u=a),s.dy&&sn(u,s,n,r,i),l.dy&&sn(u,l,n,r,i)}rn.prototype.resize=function(e,o){var n=this.context.gl;if(this.width=e*t.browser.devicePixelRatio,this.height=o*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,i=this.style._order;r<i.length;r+=1){var a=i[r];this.style._layers[a].resize()}this.depthRbo&&(n.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},rn.prototype.setup=function(){var e=this.context,o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(t.EXTENT,0),o.emplaceBack(0,t.EXTENT),o.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(o,Ne.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(n,Ne.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var r=new t.StructArrayLayout4i8;r.emplaceBack(0,0,0,0),r.emplaceBack(t.EXTENT,0,t.EXTENT,0),r.emplaceBack(0,t.EXTENT,0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(r,t.rasterBoundsAttributes.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var i=new t.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(1,0),i.emplaceBack(0,1),i.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(i,Ne.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s);var l=this.context.gl;this.stencilClearMode=new xt({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)},rn.prototype.clearStencil=function(){var e=this.context,o=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var n=t.create();t.ortho(n,0,this.width,this.height,0,0,1),t.scale(n,n,[o.drawingBufferWidth,o.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,o.TRIANGLES,Et.disabled,this.stencilClearMode,Tt.disabled,Ot.disabled,Eo(n),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},rn.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var o=this.context,n=o.gl;this.nextStencilID+e.length>256&&this.clearStencil(),o.setColorMode(Tt.disabled),o.setDepthMode(Et.disabled);var r=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var i=0,a=e;i<a.length;i+=1){var s=a[i],l=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;r.draw(o,n.TRIANGLES,Et.disabled,new xt({func:n.ALWAYS,mask:0},l,255,n.KEEP,n.KEEP,n.REPLACE),Tt.disabled,Ot.disabled,Eo(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},rn.prototype.stencilModeFor3D=function(){this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new xt({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},rn.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new xt({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},rn.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new Tt([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Tt.unblended:Tt.alphaBlended},rn.prototype.depthModeForSublayer=function(t,e,o){if(!this.opaquePassEnabledForLayer())return Et.disabled;var n=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Et(o||this.context.gl.LEQUAL,e,[n,n])},rn.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},rn.prototype.render=function(e,o){this.style=e,this.options=o,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var n=this.style._order,r=this.style.sourceCaches;for(var i in r){var a=r[i];a.used&&a.prepare(this.context)}var s={},l={},u={};for(var c in r){var p=r[c];s[c]=p.getVisibleCoordinates(),l[c]=s[c].slice().reverse(),u[c]=p.getVisibleCoordinates(!0).reverse()}for(var d in r){var h=r[d],f=h.getSource();if("raster"===f.type||"raster-dem"===f.type){for(var g=[],y=0,v=s[d];y<v.length;y+=1){var m=v[y];g.push(h.getTile(m))}Ho(g,this.context)}}this.opaquePassCutoff=1/0;for(var C=0;C<n.length;C++){var _=n[C];if(this.style._layers[_].is3D()){this.opaquePassCutoff=C;break}}this.renderPass="offscreen",this.depthRboNeedsClear=!0;for(var w=0,b=n;w<b.length;w+=1){var S=b[w],E=this.style._layers[S];if(E.hasOffscreenPass()&&!E.isHidden(this.transform.zoom)){var x=l[E.source];("custom"===E.type||x.length)&&this.renderLayer(this,r[E.source],E,x)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:o.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=o.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=n.length-1;this.currentLayer>=0;this.currentLayer--){var T=this.style._layers[n[this.currentLayer]],O=r[T.source],R=s[T.source];this._renderTileClippingMasks(T,R),this.renderLayer(this,O,T,R)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<n.length;this.currentLayer++){var P=this.style._layers[n[this.currentLayer]],A=r[P.source],D=("symbol"===P.type?u:l)[P.source];this._renderTileClippingMasks(P,s[P.source]),this.renderLayer(this,A,P,D)}if(this.options.showTileBoundaries)for(var M in r){nn.debug(this,r[M],s[M]);break}this.context.setDefault()},rn.prototype.setupOffscreenDepthRenderbuffer=function(){var t=this.context;this.depthRbo||(this.depthRbo=t.createRenderbuffer(t.gl.DEPTH_COMPONENT16,this.width,this.height))},rn.prototype.renderLayer=function(t,e,o,n){o.isHidden(this.transform.zoom)||("background"===o.type||"custom"===o.type||n.length)&&(this.id=o.id,nn[o.type](t,e,o,n,this.style.placement.variableOffsets))},rn.prototype.translatePosMatrix=function(e,o,n,r,i){if(!n[0]&&!n[1])return e;var a=i?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(a){var s=Math.sin(a),l=Math.cos(a);n=[n[0]*l-n[1]*s,n[0]*s+n[1]*l]}var u=[i?n[0]:le(o,n[0],this.transform.zoom),i?n[1]:le(o,n[1],this.transform.zoom),0],c=new Float32Array(16);return t.translate(c,e,u),c},rn.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},rn.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},rn.prototype.isPatternMissing=function(t){if(!t)return!1;var e=this.imageManager.getPattern(t.from),o=this.imageManager.getPattern(t.to);return!e||!o},rn.prototype.useProgram=function(t,e){void 0===e&&(e=this.emptyProgramConfiguration),this.cache=this.cache||{};var o=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[o]||(this.cache[o]=new po(this.context,uo[t],e,zo[t],this._showOverdrawInspector)),this.cache[o]},rn.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},rn.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)};var un=function(e,o,n){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===n||n,this._minZoom=e||0,this._maxZoom=o||22,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},cn={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};un.prototype.clone=function(){var t=new un(this._minZoom,this._maxZoom,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._calcMatrices(),t},cn.minZoom.get=function(){return this._minZoom},cn.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},cn.maxZoom.get=function(){return this._maxZoom},cn.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},cn.renderWorldCopies.get=function(){return this._renderWorldCopies},cn.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},cn.worldSize.get=function(){return this.tileSize*this.scale},cn.centerPoint.get=function(){return this.size._div(2)},cn.size.get=function(){return new t.Point(this.width,this.height)},cn.bearing.get=function(){return-this.angle/Math.PI*180},cn.bearing.set=function(e){var o=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==o&&(this._unmodified=!1,this.angle=o,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},cn.pitch.get=function(){return this._pitch/Math.PI*180},cn.pitch.set=function(e){var o=t.clamp(e,0,60)/180*Math.PI;this._pitch!==o&&(this._unmodified=!1,this._pitch=o,this._calcMatrices())},cn.fov.get=function(){return this._fov/Math.PI*180},cn.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},cn.zoom.get=function(){return this._zoom},cn.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},cn.center.get=function(){return this._center},cn.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},un.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},un.prototype.getVisibleUnwrappedCoordinates=function(e){var o=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var n=this.pointCoordinate(new t.Point(0,0)),r=this.pointCoordinate(new t.Point(this.width,0)),i=this.pointCoordinate(new t.Point(this.width,this.height)),a=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(n.x,r.x,i.x,a.x)),l=Math.floor(Math.max(n.x,r.x,i.x,a.x)),u=s-1;u<=l+1;u++)0!==u&&o.push(new t.UnwrappedTileID(u,e));return o},un.prototype.coveringTiles=function(e){var o=this.coveringZoomLevel(e),n=o;if(void 0!==e.minzoom&&o<e.minzoom)return[];void 0!==e.maxzoom&&o>e.maxzoom&&(o=e.maxzoom);var r=t.MercatorCoordinate.fromLngLat(this.center),i=Math.pow(2,o),a=new t.Point(i*r.x-.5,i*r.y-.5);return function(e,o,n,r){void 0===r&&(r=!0);var i=1<<e,a={};function s(o,s,l){var u,c,p,d;if(l>=0&&l<=i)for(u=o;u<s;u++)c=Math.floor(u/i),p=(u%i+i)%i,0!==c&&!0!==r||(d=new t.OverscaledTileID(n,c,e,p,l),a[d.key]=d)}var l=o.map(function(e){return new t.Point(e.x,e.y)._mult(i)});return ln(l[0],l[1],l[2],0,i,s),ln(l[2],l[3],l[0],0,i,s),Object.keys(a).map(function(t){return a[t]})}(o,[this.pointCoordinate(new t.Point(0,0)),this.pointCoordinate(new t.Point(this.width,0)),this.pointCoordinate(new t.Point(this.width,this.height)),this.pointCoordinate(new t.Point(0,this.height))],e.reparseOverscaled?n:o,this._renderWorldCopies).sort(function(t,e){return a.dist(t.canonical)-a.dist(e.canonical)})},un.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},cn.unmodified.get=function(){return this._unmodified},un.prototype.zoomScale=function(t){return Math.pow(2,t)},un.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},un.prototype.project=function(e){var o=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(o)*this.worldSize)},un.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},cn.point.get=function(){return this.project(this.center)},un.prototype.setLocationAtPoint=function(e,o){var n=this.pointCoordinate(o),r=this.pointCoordinate(this.centerPoint),i=this.locationCoordinate(e),a=new t.MercatorCoordinate(i.x-(n.x-r.x),i.y-(n.y-r.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())},un.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},un.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},un.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},un.prototype.coordinateLocation=function(t){return t.toLngLat()},un.prototype.pointCoordinate=function(e){var o=[e.x,e.y,0,1],n=[e.x,e.y,1,1];t.transformMat4(o,o,this.pixelMatrixInverse),t.transformMat4(n,n,this.pixelMatrixInverse);var r=o[3],i=n[3],a=o[0]/r,s=n[0]/i,l=o[1]/r,u=n[1]/i,c=o[2]/r,p=n[2]/i,d=c===p?0:(0-c)/(p-c);return new t.MercatorCoordinate(t.number(a,s,d)/this.worldSize,t.number(l,u,d)/this.worldSize)},un.prototype.coordinatePoint=function(e){var o=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(o,o,this.pixelMatrix),new t.Point(o[0]/o[3],o[1]/o[3])},un.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},un.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},un.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},un.prototype.calculatePosMatrix=function(e,o){void 0===o&&(o=!1);var n=e.key,r=o?this._alignedPosMatrixCache:this._posMatrixCache;if(r[n])return r[n];var i=e.canonical,a=this.worldSize/this.zoomScale(i.z),s=i.x+Math.pow(2,i.z)*e.wrap,l=t.identity(new Float64Array(16));return t.translate(l,l,[s*a,i.y*a,0]),t.scale(l,l,[a/t.EXTENT,a/t.EXTENT,1]),t.multiply(l,o?this.alignedProjMatrix:this.projMatrix,l),r[n]=new Float32Array(l),r[n]},un.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},un.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,o,n,r,i=-90,a=90,s=-180,l=180,u=this.size,c=this._unmodified;if(this.latRange){var p=this.latRange;i=t.mercatorYfromLat(p[1])*this.worldSize,e=(a=t.mercatorYfromLat(p[0])*this.worldSize)-i<u.y?u.y/(a-i):0}if(this.lngRange){var d=this.lngRange;s=t.mercatorXfromLng(d[0])*this.worldSize,o=(l=t.mercatorXfromLng(d[1])*this.worldSize)-s<u.x?u.x/(l-s):0}var h=this.point,f=Math.max(o||0,e||0);if(f)return this.center=this.unproject(new t.Point(o?(l+s)/2:h.x,e?(a+i)/2:h.y)),this.zoom+=this.scaleZoom(f),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var g=h.y,y=u.y/2;g-y<i&&(r=i+y),g+y>a&&(r=a-y)}if(this.lngRange){var v=h.x,m=u.x/2;v-m<s&&(n=s+m),v+m>l&&(n=l-m)}void 0===n&&void 0===r||(this.center=this.unproject(new t.Point(void 0!==n?n:h.x,void 0!==r?r:h.y))),this._unmodified=c,this._constraining=!1}},un.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,o=Math.PI/2+this._pitch,n=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-o-e),r=this.point,i=r.x,a=r.y,s=1.01*(Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance),l=new Float64Array(16);t.perspective(l,this._fov,this.width/this.height,1,s),t.scale(l,l,[1,-1,1]),t.translate(l,l,[0,0,-this.cameraToCenterDistance]),t.rotateX(l,l,this._pitch),t.rotateZ(l,l,this.angle),t.translate(l,l,[-i,-a,0]),this.mercatorMatrix=t.scale([],l,[this.worldSize,this.worldSize,this.worldSize]),t.scale(l,l,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=l;var u=this.width%2/2,c=this.height%2/2,p=Math.cos(this.angle),d=Math.sin(this.angle),h=i-Math.round(i)+p*u+d*c,f=a-Math.round(a)+p*c+d*u,g=new Float64Array(l);if(t.translate(g,g,[h>.5?h-1:h,f>.5?f-1:f,0]),this.alignedProjMatrix=g,l=t.create(),t.scale(l,l,[this.width/2,-this.height/2,1]),t.translate(l,l,[1,-1,0]),this.labelPlaneMatrix=l,l=t.create(),t.scale(l,l,[1,-1,1]),t.translate(l,l,[-1,-1,0]),t.scale(l,l,[2/this.width,2/this.height,1]),this.glCoordMatrix=l,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(l=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=l,this._posMatrixCache={},this._alignedPosMatrixCache={}}},un.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),o=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(o,o,this.pixelMatrix)[3]/this.cameraToCenterDistance},un.prototype.getCameraPoint=function(){var e=this._pitch,o=Math.tan(e)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,o))},un.prototype.getCameraQueryGeometry=function(e){var o=this.getCameraPoint();if(1===e.length)return[e[0],o];for(var n=o.x,r=o.y,i=o.x,a=o.y,s=0,l=e;s<l.length;s+=1){var u=l[s];n=Math.min(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.x),a=Math.max(a,u.y)}return[new t.Point(n,r),new t.Point(i,r),new t.Point(i,a),new t.Point(n,a),new t.Point(n,r)]},Object.defineProperties(un.prototype,cn);var pn=function(){var e,o,n,r;t.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=(e=this._updateHashUnthrottled.bind(this),o=!1,n=null,r=function(){n=null,o&&(e(),n=setTimeout(r,300),o=!1)},function(){return o=!0,n||r(),n})};pn.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},pn.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},pn.prototype.getHashString=function(t){var e=this._map.getCenter(),o=Math.round(100*this._map.getZoom())/100,n=Math.ceil((o*Math.LN2+Math.log(512/360/.5))/Math.LN10),r=Math.pow(10,n),i=Math.round(e.lng*r)/r,a=Math.round(e.lat*r)/r,s=this._map.getBearing(),l=this._map.getPitch(),u="";return u+=t?"#/"+i+"/"+a+"/"+o:"#"+o+"/"+a+"/"+i,(s||l)&&(u+="/"+Math.round(10*s)/10),l&&(u+="/"+Math.round(l)),u},pn.prototype._onHashChange=function(){var e=t.window.location.hash.replace("#","").split("/");return e.length>=3&&(this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:+(e[3]||0),pitch:+(e[4]||0)}),!0)},pn.prototype._updateHashUnthrottled=function(){var e=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",e)}catch(t){}};var dn=function(e){function n(n,r,i,a){void 0===a&&(a={});var s=o.mousePos(r.getCanvasContainer(),i),l=r.unproject(s);e.call(this,n,t.extend({point:s,lngLat:l,originalEvent:i},a)),this._defaultPrevented=!1,this.target=r}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var r={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,r),n}(t.Event),hn=function(e){function n(n,r,i){var a=o.touchPos(r.getCanvasContainer(),i),s=a.map(function(t){return r.unproject(t)}),l=a.reduce(function(t,e,o,n){return t.add(e.div(n.length))},new t.Point(0,0)),u=r.unproject(l);e.call(this,n,{points:a,point:l,lngLats:s,lngLat:u,originalEvent:i}),this._defaultPrevented=!1}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var r={defaultPrevented:{configurable:!0}};return n.prototype.preventDefault=function(){this._defaultPrevented=!0},r.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(n.prototype,r),n}(t.Event),fn=function(t){function e(e,o,n){t.call(this,e,{originalEvent:n}),this._defaultPrevented=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var o={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},o.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,o),e}(t.Event),gn=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};gn.prototype.setZoomRate=function(t){this._defaultZoomRate=t},gn.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},gn.prototype.isEnabled=function(){return!!this._enabled},gn.prototype.isActive=function(){return!!this._active},gn.prototype.isZooming=function(){return!!this._zooming},gn.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},gn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},gn.prototype.onWheel=function(e){if(this.isEnabled()){var o=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,n=t.browser.now(),r=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==o&&o%4.000244140625==0?this._type="wheel":0!==o&&Math.abs(o)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=o,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),e.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=e,this._delta-=o,this.isActive()||this._start(e)),e.preventDefault()}},gn.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},gn.prototype._start=function(e){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0,this._map.fire(new t.Event("movestart",{originalEvent:e})),this._map.fire(new t.Event("zoomstart",{originalEvent:e}))),this._finishTimeout&&clearTimeout(this._finishTimeout);var n=o.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(n)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},gn.prototype._onScrollFrame=function(){var e=this;if(this._frameId=null,this.isActive()){var o=this._map.transform;if(0!==this._delta){var n="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,r=2/(1+Math.exp(-Math.abs(this._delta*n)));this._delta<0&&0!==r&&(r=1/r);var i="number"==typeof this._targetZoom?o.zoomScale(this._targetZoom):o.scale;this._targetZoom=Math.min(o.maxZoom,Math.max(o.minZoom,o.scaleZoom(i*r))),"wheel"===this._type&&(this._startZoom=o.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a="number"==typeof this._targetZoom?this._targetZoom:o.zoom,s=this._startZoom,l=this._easing,u=!1;if("wheel"===this._type&&s&&l){var c=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),p=l(c);o.zoom=t.number(s,a,p),c<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):u=!0}else o.zoom=a,u=!0;o.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new t.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new t.Event("zoom",{originalEvent:this._lastWheelEvent})),u&&(this._active=!1,this._finishTimeout=setTimeout(function(){e._zooming=!1,e._map.fire(new t.Event("zoomend",{originalEvent:e._lastWheelEvent})),e._map.fire(new t.Event("moveend",{originalEvent:e._lastWheelEvent})),delete e._targetZoom},200))}},gn.prototype._smoothOutEasing=function(e){var o=t.ease;if(this._prevEase){var n=this._prevEase,r=(t.browser.now()-n.start)/n.duration,i=n.easing(r+.01)-n.easing(r),a=.27/Math.sqrt(i*i+1e-4)*.01,s=Math.sqrt(.0729-a*a);o=t.bezier(a,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:o},o};var yn=function(e,o){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=o.clickTolerance||1,t.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};yn.prototype.isEnabled=function(){return!!this._enabled},yn.prototype.isActive=function(){return!!this._active},yn.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},yn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},yn.prototype.onMouseDown=function(e){this.isEnabled()&&e.shiftKey&&0===e.button&&(t.window.document.addEventListener("mousemove",this._onMouseMove,!1),t.window.document.addEventListener("keydown",this._onKeyDown,!1),t.window.document.addEventListener("mouseup",this._onMouseUp,!1),o.disableDrag(),this._startPos=this._lastPos=o.mousePos(this._el,e),this._active=!0)},yn.prototype._onMouseMove=function(t){var e=o.mousePos(this._el,t);if(!(this._lastPos.equals(e)||!this._box&&e.dist(this._startPos)<this._clickTolerance)){var n=this._startPos;this._lastPos=e,this._box||(this._box=o.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var r=Math.min(n.x,e.x),i=Math.max(n.x,e.x),a=Math.min(n.y,e.y),s=Math.max(n.y,e.y);o.setTransform(this._box,"translate("+r+"px,"+a+"px)"),this._box.style.width=i-r+"px",this._box.style.height=s-a+"px"}},yn.prototype._onMouseUp=function(e){if(0===e.button){var n=this._startPos,r=o.mousePos(this._el,e);this._finish(),o.suppressClick(),n.x===r.x&&n.y===r.y?this._fireEvent("boxzoomcancel",e):this._map.fitScreenCoordinates(n,r,this._map.getBearing(),{linear:!0}).fire(new t.Event("boxzoomend",{originalEvent:e}))}},yn.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},yn.prototype._finish=function(){this._active=!1,t.window.document.removeEventListener("mousemove",this._onMouseMove,!1),t.window.document.removeEventListener("keydown",this._onKeyDown,!1),t.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(o.remove(this._box),this._box=null),o.enableDrag(),delete this._startPos,delete this._lastPos},yn.prototype._fireEvent=function(e,o){return this._map.fire(new t.Event(e,{originalEvent:o}))};var vn=t.bezier(0,0,.25,1),mn=function(e,o){this._map=e,this._el=o.element||e.getCanvasContainer(),this._state="disabled",this._button=o.button||"right",this._bearingSnap=o.bearingSnap||0,this._pitchWithRotate=!1!==o.pitchWithRotate,t.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};mn.prototype.isEnabled=function(){return"disabled"!==this._state},mn.prototype.isActive=function(){return"active"===this._state},mn.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},mn.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},mn.prototype.onMouseDown=function(e){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=o.mouseButton(e),this._eventButton!==(e.ctrlKey?0:2))return}else{if(e.ctrlKey||0!==o.mouseButton(e))return;this._eventButton=0}o.disableDrag(),t.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.addEventListener("mouseup",this._onMouseUp),t.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[t.browser.now(),this._map.getBearing()]],this._startPos=this._lastPos=o.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},mn.prototype._onMouseMove=function(t){var e=o.mousePos(this._el,t);this._lastPos.equals(e)||(this._lastMoveEvent=t,this._lastPos=e,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},mn.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var o=this._map.transform,n=this._startPos,r=this._lastPos,i=.8*(n.x-r.x),a=-.5*(n.y-r.y),s=o.bearing-i,l=o.pitch-a,u=this._inertia,c=u[u.length-1];this._drainInertiaBuffer(),u.push([t.browser.now(),this._map._normalizeBearing(s,c[1])]),o.bearing=s,this._pitchWithRotate&&(this._fireEvent("pitch",e),o.pitch=l),this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._startPos=this._lastPos}},mn.prototype._onMouseUp=function(t){if(o.mouseButton(t)===this._eventButton)switch(this._state){case"active":this._state="enabled",o.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(t);break;case"pending":this._state="enabled",this._unbind()}},mn.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",t),this._pitchWithRotate&&this._fireEvent("pitchend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},mn.prototype._unbind=function(){t.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.removeEventListener("mouseup",this._onMouseUp),t.window.removeEventListener("blur",this._onBlur),o.enableDrag()},mn.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._lastPos},mn.prototype._inertialRotate=function(t){var e=this;this._fireEvent("rotateend",t),this._drainInertiaBuffer();var o=this._map,n=o.getBearing(),r=this._inertia,i=function(){Math.abs(n)<e._bearingSnap?o.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(r.length<2)i();else{var a=r[0],s=r[r.length-1],l=r[r.length-2],u=o._normalizeBearing(n,l[1]),c=s[1]-a[1],p=c<0?-1:1,d=(s[0]-a[0])/1e3;if(0!==c&&0!==d){var h=Math.abs(c*(.25/d));h>180&&(h=180);var f=h/180;u+=p*h*(f/2),Math.abs(o._normalizeBearing(u,0))<this._bearingSnap&&(u=o._normalizeBearing(0,u)),o.rotateTo(u,{duration:1e3*f,easing:vn,noMoveStart:!0},{originalEvent:t})}else i()}},mn.prototype._fireEvent=function(e,o){return this._map.fire(new t.Event(e,o?{originalEvent:o}:{}))},mn.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,o=t.browser.now();e.length>0&&o-e[0][0]>160;)e.shift()};var Cn=t.bezier(0,0,.3,1),_n=function(e,o){this._map=e,this._el=e.getCanvasContainer(),this._state="disabled",this._clickTolerance=o.clickTolerance||1,t.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};_n.prototype.isEnabled=function(){return"disabled"!==this._state},_n.prototype.isActive=function(){return"active"===this._state},_n.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")},_n.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},_n.prototype.onMouseDown=function(e){"enabled"===this._state&&(e.ctrlKey||0!==o.mouseButton(e)||(o.addEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),o.addEventListener(t.window.document,"mouseup",this._onMouseUp),this._start(e)))},_n.prototype.onTouchStart=function(e){"enabled"===this._state&&(e.touches.length>1||(o.addEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),o.addEventListener(t.window.document,"touchend",this._onTouchEnd),this._start(e)))},_n.prototype._start=function(e){t.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._lastPos=o.mousePos(this._el,e),this._inertia=[[t.browser.now(),this._startPos]]},_n.prototype._onMove=function(e){e.preventDefault();var n=o.mousePos(this._el,e);this._lastPos.equals(n)||"pending"===this._state&&n.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=e,this._lastPos=n,this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._fireEvent("dragstart",e),this._fireEvent("movestart",e)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},_n.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t){var e=this._map.transform;e.setLocationAtPoint(e.pointLocation(this._startPos),this._lastPos),this._fireEvent("drag",t),this._fireEvent("move",t),this._startPos=this._lastPos,delete this._lastMoveEvent}},_n.prototype._onMouseUp=function(t){if(0===o.mouseButton(t))switch(this._state){case"active":this._state="enabled",o.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},_n.prototype._onTouchEnd=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},_n.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("dragend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},_n.prototype._unbind=function(){o.removeEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),o.removeEventListener(t.window.document,"touchend",this._onTouchEnd),o.removeEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),o.removeEventListener(t.window.document,"mouseup",this._onMouseUp),o.removeEventListener(t.window,"blur",this._onBlur)},_n.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._mouseDownPos,delete this._lastPos},_n.prototype._inertialPan=function(t){this._fireEvent("dragend",t),this._drainInertiaBuffer();var e=this._inertia;if(e.length<2)this._fireEvent("moveend",t);else{var o=e[e.length-1],n=e[0],r=o[1].sub(n[1]),i=(o[0]-n[0])/1e3;if(0===i||o[1].equals(n[1]))this._fireEvent("moveend",t);else{var a=r.mult(.3/i),s=a.mag();s>1400&&(s=1400,a._unit()._mult(s));var l=s/750,u=a.mult(-l/2);this._map.panBy(u,{duration:1e3*l,easing:Cn,noMoveStart:!0},{originalEvent:t})}}},_n.prototype._fireEvent=function(e,o){return this._map.fire(new t.Event(e,o?{originalEvent:o}:{}))},_n.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,o=t.browser.now();e.length>0&&o-e[0][0]>160;)e.shift()};var wn=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onKeyDown"],this)};function bn(t){return t*(2-t)}wn.prototype.isEnabled=function(){return!!this._enabled},wn.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},wn.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},wn.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,o=0,n=0,r=0,i=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?o=-1:(t.preventDefault(),r=-1);break;case 39:t.shiftKey?o=1:(t.preventDefault(),r=1);break;case 38:t.shiftKey?n=1:(t.preventDefault(),i=-1);break;case 40:t.shiftKey?n=-1:(i=1,t.preventDefault());break;default:return}var a=this._map,s=a.getZoom(),l={duration:300,delayEndEvents:500,easing:bn,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+15*o,pitch:a.getPitch()+10*n,offset:[100*-r,100*-i],center:a.getCenter()};a.easeTo(l,{originalEvent:t})}};var Sn=function(e){this._map=e,t.bindAll(["_onDblClick","_onZoomEnd"],this)};Sn.prototype.isEnabled=function(){return!!this._enabled},Sn.prototype.isActive=function(){return!!this._active},Sn.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Sn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Sn.prototype.onTouchStart=function(t){var e=this;if(this.isEnabled()&&!(t.points.length>1))if(this._tapped){var o=t.points[0],n=this._tappedPoint;if(n&&n.dist(o)<=30){t.originalEvent.preventDefault();var r=function(){e._tapped&&e._zoom(t),e._map.off("touchcancel",i),e._resetTapped()},i=function(){e._map.off("touchend",r),e._resetTapped()};this._map.once("touchend",r),this._map.once("touchcancel",i)}else this._resetTapped()}else this._tappedPoint=t.points[0],this._tapped=setTimeout(function(){e._tapped=null,e._tappedPoint=null},300)},Sn.prototype._resetTapped=function(){clearTimeout(this._tapped),this._tapped=null,this._tappedPoint=null},Sn.prototype.onDblClick=function(t){this.isEnabled()&&(t.originalEvent.preventDefault(),this._zoom(t))},Sn.prototype._zoom=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},Sn.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var En=t.bezier(0,0,.15,1),xn=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};xn.prototype.isEnabled=function(){return!!this._enabled},xn.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)},xn.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},xn.prototype.disableRotation=function(){this._rotationDisabled=!0},xn.prototype.enableRotation=function(){this._rotationDisabled=!1},xn.prototype.onStart=function(e){if(this.isEnabled()&&2===e.touches.length){var n=o.mousePos(this._el,e.touches[0]),r=o.mousePos(this._el,e.touches[1]),i=n.add(r).div(2);this._startVec=n.sub(r),this._startAround=this._map.transform.pointLocation(i),this._gestureIntent=void 0,this._inertia=[],o.addEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),o.addEventListener(t.window.document,"touchend",this._onEnd)}},xn.prototype._getTouchEventData=function(t){var e=o.mousePos(this._el,t.touches[0]),n=o.mousePos(this._el,t.touches[1]),r=e.sub(n);return{vec:r,center:e.add(n).div(2),scale:r.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*r.angleWith(this._startVec)/Math.PI}},xn.prototype._onMove=function(e){if(2===e.touches.length){var o=this._getTouchEventData(e),n=o.vec,r=o.scale,i=o.bearing;if(!this._gestureIntent){var a=this._rotationDisabled&&1!==r||Math.abs(1-r)>.15;Math.abs(i)>10?this._gestureIntent="rotate":a&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new t.Event(this._gestureIntent+"start",{originalEvent:e})),this._map.fire(new t.Event("movestart",{originalEvent:e})),this._startVec=n)}this._lastTouchEvent=e,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),e.preventDefault()}},xn.prototype._onTouchFrame=function(){this._frameId=null;var e=this._gestureIntent;if(e){var o=this._map.transform;this._startScale||(this._startScale=o.scale,this._startBearing=o.bearing);var n=this._getTouchEventData(this._lastTouchEvent),r=n.center,i=n.bearing,a=n.scale,s=o.pointLocation(r),l=o.locationPoint(s);"rotate"===e&&(o.bearing=this._startBearing+i),o.zoom=o.scaleZoom(this._startScale*a),o.setLocationAtPoint(this._startAround,l),this._map.fire(new t.Event(e,{originalEvent:this._lastTouchEvent})),this._map.fire(new t.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),a,r])}},xn.prototype._onEnd=function(e){o.removeEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),o.removeEventListener(t.window.document,"touchend",this._onEnd);var n=this._gestureIntent,r=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,n){this._map.fire(new t.Event(n+"end",{originalEvent:e})),this._drainInertiaBuffer();var i=this._inertia,a=this._map;if(i.length<2)a.snapToNorth({},{originalEvent:e});else{var s=i[i.length-1],l=i[0],u=a.transform.scaleZoom(r*s[1]),c=a.transform.scaleZoom(r*l[1]),p=u-c,d=(s[0]-l[0])/1e3,h=s[2];if(0!==d&&u!==c){var f=.15*p/d;Math.abs(f)>2.5&&(f=f>0?2.5:-2.5);var g=1e3*Math.abs(f/(12*.15)),y=u+f*g/2e3;y<0&&(y=0),a.easeTo({zoom:y,duration:g,easing:En,around:this._aroundCenter?a.getCenter():a.unproject(h),noMoveStart:!0},{originalEvent:e})}else a.snapToNorth({},{originalEvent:e})}}},xn.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,o=t.browser.now();e.length>2&&o-e[0][0]>160;)e.shift()};var Tn={scrollZoom:gn,boxZoom:yn,dragRotate:mn,dragPan:_n,keyboard:wn,doubleClickZoom:Sn,touchZoomRotate:xn},On=function(e){function o(o,n){e.call(this),this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=n.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},o.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},o.prototype.panBy=function(e,o,n){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},o),n)},o.prototype.panTo=function(e,o,n){return this.easeTo(t.extend({center:e},o),n)},o.prototype.getZoom=function(){return this.transform.zoom},o.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},o.prototype.zoomTo=function(e,o,n){return this.easeTo(t.extend({zoom:e},o),n)},o.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},o.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},o.prototype.getBearing=function(){return this.transform.bearing},o.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},o.prototype.rotateTo=function(e,o,n){return this.easeTo(t.extend({bearing:e},o),n)},o.prototype.resetNorth=function(e,o){return this.rotateTo(0,t.extend({duration:1e3},e),o),this},o.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},o.prototype.getPitch=function(){return this.transform.pitch},o.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},o.prototype.cameraForBounds=function(e,o){return e=t.LngLatBounds.convert(e),this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,o)},o.prototype._cameraForBoxAndBearing=function(e,o,n,r){if("number"==typeof(r=t.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},r)).padding){var i=r.padding;r.padding={top:i,bottom:i,right:i,left:i}}if(t.deepEqual(Object.keys(r.padding).sort(function(t,e){return t<e?-1:t>e?1:0}),["bottom","left","right","top"])){var a=this.transform,s=a.project(t.LngLat.convert(e)),l=a.project(t.LngLat.convert(o)),u=s.rotate(-n*Math.PI/180),c=l.rotate(-n*Math.PI/180),p=new t.Point(Math.max(u.x,c.x),Math.max(u.y,c.y)),d=new t.Point(Math.min(u.x,c.x),Math.min(u.y,c.y)),h=p.sub(d),f=(a.width-r.padding.left-r.padding.right)/h.x,g=(a.height-r.padding.top-r.padding.bottom)/h.y;if(!(g<0||f<0)){var y=Math.min(a.scaleZoom(a.scale*Math.min(f,g)),r.maxZoom),v=t.Point.convert(r.offset),m=(r.padding.left-r.padding.right)/2,C=(r.padding.top-r.padding.bottom)/2,_=new t.Point(v.x+m,v.y+C).mult(a.scale/a.zoomScale(y));return{center:a.unproject(s.add(l).div(2).sub(_)),zoom:y,bearing:n}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else t.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},o.prototype.fitBounds=function(t,e,o){return this._fitInternal(this.cameraForBounds(t,e),e,o)},o.prototype.fitScreenCoordinates=function(e,o,n,r,i){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(o)),n,r),r,i)},o.prototype._fitInternal=function(e,o,n){return e?(o=t.extend(e,o)).linear?this.easeTo(o,n):this.flyTo(o,n):this},o.prototype.jumpTo=function(e,o){this.stop();var n=this.transform,r=!1,i=!1,a=!1;return"zoom"in e&&n.zoom!==+e.zoom&&(r=!0,n.zoom=+e.zoom),void 0!==e.center&&(n.center=t.LngLat.convert(e.center)),"bearing"in e&&n.bearing!==+e.bearing&&(i=!0,n.bearing=+e.bearing),"pitch"in e&&n.pitch!==+e.pitch&&(a=!0,n.pitch=+e.pitch),this.fire(new t.Event("movestart",o)).fire(new t.Event("move",o)),r&&this.fire(new t.Event("zoomstart",o)).fire(new t.Event("zoom",o)).fire(new t.Event("zoomend",o)),i&&this.fire(new t.Event("rotatestart",o)).fire(new t.Event("rotate",o)).fire(new t.Event("rotateend",o)),a&&this.fire(new t.Event("pitchstart",o)).fire(new t.Event("pitch",o)).fire(new t.Event("pitchend",o)),this.fire(new t.Event("moveend",o))},o.prototype.easeTo=function(e,o){var n=this;this.stop(),!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate&&(e.duration=0);var r=this.transform,i=this.getZoom(),a=this.getBearing(),s=this.getPitch(),l="zoom"in e?+e.zoom:i,u="bearing"in e?this._normalizeBearing(e.bearing,a):a,c="pitch"in e?+e.pitch:s,p=r.centerPoint.add(t.Point.convert(e.offset)),d=r.pointLocation(p),h=t.LngLat.convert(e.center||d);this._normalizeCenter(h);var f,g,y=r.project(d),v=r.project(h).sub(y),m=r.zoomScale(l-i);return e.around&&(f=t.LngLat.convert(e.around),g=r.locationPoint(f)),this._zooming=l!==i,this._rotating=a!==u,this._pitching=c!==s,this._prepareEase(o,e.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease(function(e){if(n._zooming&&(r.zoom=t.number(i,l,e)),n._rotating&&(r.bearing=t.number(a,u,e)),n._pitching&&(r.pitch=t.number(s,c,e)),f)r.setLocationAtPoint(f,g);else{var d=r.zoomScale(r.zoom-i),h=l>i?Math.min(2,m):Math.max(.5,m),C=Math.pow(h,1-e),_=r.unproject(y.add(v.mult(e*C)).mult(d));r.setLocationAtPoint(r.renderWorldCopies?_.wrap():_,p)}n._fireMoveEvents(o)},function(){e.delayEndEvents?n._easeEndTimeoutID=setTimeout(function(){return n._afterEase(o)},e.delayEndEvents):n._afterEase(o)},e),this},o.prototype._prepareEase=function(e,o){this._moving=!0,o||this.fire(new t.Event("movestart",e)),this._zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&this.fire(new t.Event("pitchstart",e))},o.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},o.prototype._afterEase=function(e){var o=this._zooming,n=this._rotating,r=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,o&&this.fire(new t.Event("zoomend",e)),n&&this.fire(new t.Event("rotateend",e)),r&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))},o.prototype.flyTo=function(e,o){var n=this;this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var r=this.transform,i=this.getZoom(),a=this.getBearing(),s=this.getPitch(),l="zoom"in e?t.clamp(+e.zoom,r.minZoom,r.maxZoom):i,u="bearing"in e?this._normalizeBearing(e.bearing,a):a,c="pitch"in e?+e.pitch:s,p=r.zoomScale(l-i),d=r.centerPoint.add(t.Point.convert(e.offset)),h=r.pointLocation(d),f=t.LngLat.convert(e.center||h);this._normalizeCenter(f);var g=r.project(h),y=r.project(f).sub(g),v=e.curve,m=Math.max(r.width,r.height),C=m/p,_=y.mag();if("minZoom"in e){var w=t.clamp(Math.min(e.minZoom,i,l),r.minZoom,r.maxZoom),b=m/r.zoomScale(w-i);v=Math.sqrt(b/_*2)}var S=v*v;function E(t){var e=(C*C-m*m+(t?-1:1)*S*S*_*_)/(2*(t?C:m)*S*_);return Math.log(Math.sqrt(e*e+1)-e)}function x(t){return(Math.exp(t)-Math.exp(-t))/2}function T(t){return(Math.exp(t)+Math.exp(-t))/2}var O=E(0),R=function(t){return T(O)/T(O+v*t)},P=function(t){return m*((T(O)*(x(e=O+v*t)/T(e))-x(O))/S)/_;var e},A=(E(1)-O)/v;if(Math.abs(_)<1e-6||!isFinite(A)){if(Math.abs(m-C)<1e-6)return this.easeTo(e,o);var D=C<m?-1:1;A=Math.abs(Math.log(C/m))/v,P=function(){return 0},R=function(t){return Math.exp(D*v*t)}}if("duration"in e)e.duration=+e.duration;else{var M="screenSpeed"in e?+e.screenSpeed/v:+e.speed;e.duration=1e3*A/M}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=a!==u,this._pitching=c!==s,this._prepareEase(o,!1),this._ease(function(e){var p=e*A,h=1/R(p);r.zoom=1===e?l:i+r.scaleZoom(h),n._rotating&&(r.bearing=t.number(a,u,e)),n._pitching&&(r.pitch=t.number(s,c,e));var v=1===e?f:r.unproject(g.add(y.mult(P(p))).mult(h));r.setLocationAtPoint(r.renderWorldCopies?v.wrap():v,d),n._fireMoveEvents(o)},function(){return n._afterEase(o)},e),this},o.prototype.isEasing=function(){return!!this._easeFrameId},o.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var t=this._onEaseEnd;delete this._onEaseEnd,t.call(this)}return this},o.prototype._ease=function(e,o,n){!1===n.animate||0===n.duration?(e(1),o()):(this._easeStart=t.browser.now(),this._easeOptions=n,this._onEaseFrame=e,this._onEaseEnd=o,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},o.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},o.prototype._normalizeBearing=function(e,o){e=t.wrap(e,-180,180);var n=Math.abs(e-o);return Math.abs(e-360-o)<n&&(e-=360),Math.abs(e+360-o)<n&&(e+=360),e},o.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var o=t.lng-e.center.lng;t.lng+=o>180?-360:o<-180?360:0}},o}(t.Evented),Rn=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Rn.prototype.getDefaultPosition=function(){return"bottom-right"},Rn.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=o.create("div","mapboxgl-ctrl-attrib-inner",this._container),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Rn.prototype.onRemove=function(){o.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},Rn.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var o=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:t.config.ACCESS_TOKEN}];if(e){var n=o.reduce(function(t,e,n){return e.value&&(t+=e.key+"="+e.value+(n<o.length-1?"&":"")),t},"?");e.href=t.config.FEEDBACK_URL+"/"+n+(this._map._hash?this._map._hash.getHashString(!0):""),e.rel="noopener nofollow"}},Rn.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},Rn.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(function(t){return"string"!=typeof t?"":t})):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var o=this._map.style.sourceCaches;for(var n in o){var r=o[n];if(r.used){var i=r.getSource();i.attribution&&t.indexOf(i.attribution)<0&&t.push(i.attribution)}}t.sort(function(t,e){return t.length-e.length});var a=(t=t.filter(function(e,o){for(var n=o+1;n<t.length;n++)if(t[n].indexOf(e)>=0)return!1;return!0})).join(" | ");a!==this._attribHTML&&(this._attribHTML=a,t.length?(this._innerContainer.innerHTML=a,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Rn.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Pn=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};Pn.prototype.onAdd=function(t){this._map=t,this._container=o.create("div","mapboxgl-ctrl");var e=o.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label","Mapbox logo"),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Pn.prototype.onRemove=function(){o.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Pn.prototype.getDefaultPosition=function(){return"bottom-left"},Pn.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Pn.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},Pn.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var An=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};An.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},An.prototype.remove=function(t){for(var e=this._currentlyRunning,o=0,n=e?this._queue.concat(e):this._queue;o<n.length;o+=1){var r=n[o];if(r.id===t)return void(r.cancelled=!0)}},An.prototype.run=function(){var t=this._currentlyRunning=this._queue;this._queue=[];for(var e=0,o=t;e<o.length;e+=1){var n=o[e];if(!n.cancelled&&(n.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},An.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Dn=t.window.HTMLImageElement,Mn=t.window.HTMLElement,In={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Ln=function(n){function r(e){var r=this;if(null!=(e=t.extend({},In,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than minZoom");var i=new un(e.minZoom,e.maxZoom,e.renderWorldCopies);if(n.call(this,i,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new An,this._controls=[],this._mapId=t.uniqueId(),this._requestManager=new t.RequestManager(e.transformRequest),"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof Mn))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return r._update(!1)}),this.on("moveend",function(){return r._update(!1)}),this.on("zoom",function(){return r._update(!0)}),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),function(t,e){var n=t.getCanvasContainer(),r=null,i=!1,a=null;for(var s in Tn)t[s]=new Tn[s](t,e),e.interactive&&e[s]&&t[s].enable(e[s]);o.addEventListener(n,"mouseout",function(e){t.fire(new dn("mouseout",t,e))}),o.addEventListener(n,"mousedown",function(r){i=!0,a=o.mousePos(n,r);var s=new dn("mousedown",t,r);t.fire(s),s.defaultPrevented||(e.interactive&&!t.doubleClickZoom.isActive()&&t.stop(),t.boxZoom.onMouseDown(r),t.boxZoom.isActive()||t.dragPan.isActive()||t.dragRotate.onMouseDown(r),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onMouseDown(r))}),o.addEventListener(n,"mouseup",function(e){var o=t.dragRotate.isActive();r&&!o&&t.fire(new dn("contextmenu",t,r)),r=null,i=!1,t.fire(new dn("mouseup",t,e))}),o.addEventListener(n,"mousemove",function(e){if(!t.dragPan.isActive()&&!t.dragRotate.isActive()){for(var o=e.target;o&&o!==n;)o=o.parentNode;o===n&&t.fire(new dn("mousemove",t,e))}}),o.addEventListener(n,"mouseover",function(e){for(var o=e.target;o&&o!==n;)o=o.parentNode;o===n&&t.fire(new dn("mouseover",t,e))}),o.addEventListener(n,"touchstart",function(o){var n=new hn("touchstart",t,o);t.fire(n),n.defaultPrevented||(e.interactive&&t.stop(),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onTouchStart(o),t.touchZoomRotate.onStart(o),t.doubleClickZoom.onTouchStart(n))},{passive:!1}),o.addEventListener(n,"touchmove",function(e){t.fire(new hn("touchmove",t,e))},{passive:!1}),o.addEventListener(n,"touchend",function(e){t.fire(new hn("touchend",t,e))}),o.addEventListener(n,"touchcancel",function(e){t.fire(new hn("touchcancel",t,e))}),o.addEventListener(n,"click",function(r){var i=o.mousePos(n,r);(i.equals(a)||i.dist(a)<e.clickTolerance)&&t.fire(new dn("click",t,r))}),o.addEventListener(n,"dblclick",function(e){var o=new dn("dblclick",t,e);t.fire(o),o.defaultPrevented||t.doubleClickZoom.onDblClick(o)}),o.addEventListener(n,"contextmenu",function(e){var o=t.dragRotate.isActive();i||o?i&&(r=e):t.fire(new dn("contextmenu",t,e)),(t.dragRotate.isEnabled()||t.listens("contextmenu"))&&e.preventDefault()}),o.addEventListener(n,"wheel",function(o){e.interactive&&t.stop();var n=new fn("wheel",t,o);t.fire(n),n.defaultPrevented||t.scrollZoom.onWheel(o)},{passive:!1})}(this,e),this._hash=e.hash&&(new pn).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new Rn({customAttribution:e.customAttribution})),this.addControl(new Pn,e.logoPosition),this.on("style.load",function(){r.transform.unmodified&&r.jumpTo(r.style.stylesheet)}),this.on("data",function(e){r._update("style"===e.dataType),r.fire(new t.Event(e.dataType+"data",e))}),this.on("dataloading",function(e){r.fire(new t.Event(e.dataType+"dataloading",e))})}n&&(r.__proto__=n),r.prototype=Object.create(n&&n.prototype),r.prototype.constructor=r;var i={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return r.prototype._getMapId=function(){return this._mapId},r.prototype.addControl=function(e,o){if(void 0===o&&e.getDefaultPosition&&(o=e.getDefaultPosition()),void 0===o&&(o="top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var n=e.onAdd(this);this._controls.push(e);var r=this._controlPositions[o];return-1!==o.indexOf("bottom")?r.insertBefore(n,r.firstChild):r.appendChild(n),this},r.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var o=this._controls.indexOf(e);return o>-1&&this._controls.splice(o,1),e.onRemove(this),this},r.prototype.resize=function(e){var o=this._containerDimensions(),n=o[0],r=o[1];return this._resizeCanvas(n,r),this.transform.resize(n,r),this.painter.resize(n,r),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)).fire(new t.Event("resize",e)).fire(new t.Event("moveend",e)),this},r.prototype.getBounds=function(){return this.transform.getBounds()},r.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},r.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},r.prototype.setMinZoom=function(t){if((t=null==t?0:t)>=0&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},r.prototype.getMinZoom=function(){return this.transform.minZoom},r.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},r.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},r.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},r.prototype.getMaxZoom=function(){return this.transform.maxZoom},r.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},r.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},r.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},r.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isZooming()},r.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},r.prototype.on=function(t,e,o){var r=this;if(void 0===o)return n.prototype.on.call(this,t,e);var i=function(){var n;if("mouseenter"===t||"mouseover"===t){var i=!1;return{layer:e,listener:o,delegates:{mousemove:function(n){var a=r.getLayer(e)?r.queryRenderedFeatures(n.point,{layers:[e]}):[];a.length?i||(i=!0,o.call(r,new dn(t,r,n.originalEvent,{features:a}))):i=!1},mouseout:function(){i=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:e,listener:o,delegates:{mousemove:function(n){(r.getLayer(e)?r.queryRenderedFeatures(n.point,{layers:[e]}):[]).length?a=!0:a&&(a=!1,o.call(r,new dn(t,r,n.originalEvent)))},mouseout:function(e){a&&(a=!1,o.call(r,new dn(t,r,e.originalEvent)))}}}}return{layer:e,listener:o,delegates:(n={},n[t]=function(t){var n=r.getLayer(e)?r.queryRenderedFeatures(t.point,{layers:[e]}):[];n.length&&(t.features=n,o.call(r,t),delete t.features)},n)}}();for(var a in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(i),i.delegates)this.on(a,i.delegates[a]);return this},r.prototype.off=function(t,e,o){if(void 0===o)return n.prototype.off.call(this,t,e);if(this._delegatedListeners&&this._delegatedListeners[t])for(var r=this._delegatedListeners[t],i=0;i<r.length;i++){var a=r[i];if(a.layer===e&&a.listener===o){for(var s in a.delegates)this.off(s,a.delegates[s]);return r.splice(i,1),this}}return this},r.prototype.queryRenderedFeatures=function(e,o){if(!this.style)return[];var n;if(void 0!==o||void 0===e||e instanceof t.Point||Array.isArray(e)||(o=e,e=void 0),o=o||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])n=[t.Point.convert(e)];else{var r=t.Point.convert(e[0]),i=t.Point.convert(e[1]);n=[r,new t.Point(i.x,r.y),i,new t.Point(r.x,i.y),r]}return this.style.queryRenderedFeatures(n,o,this.transform)},r.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},r.prototype.setStyle=function(e,o){return!1!==(o=t.extend({},{localIdeographFontFamily:In.localIdeographFontFamily},o)).diff&&o.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,o),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._updateStyle(e,o))},r.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new Fe(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},r.prototype._diffStyle=function(e,o){var n=this;if("string"==typeof e){var r=this._requestManager.normalizeStyleURL(e),i=this._requestManager.transformRequest(r,t.ResourceType.Style);t.getJSON(i,function(e,r){e?n.fire(new t.ErrorEvent(e)):r&&n._updateDiff(r,o)})}else"object"==typeof e&&this._updateDiff(e,o)},r.prototype._updateDiff=function(e,o){try{this.style.setState(e)&&this._update(!0)}catch(n){t.warnOnce("Unable to perform style diff: "+(n.message||n.error||n)+".  Rebuilding the style from scratch."),this._updateStyle(e,o)}},r.prototype.getStyle=function(){if(this.style)return this.style.serialize()},r.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},r.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0)},r.prototype.isSourceLoaded=function(e){var o=this.style&&this.style.sourceCaches[e];if(void 0!==o)return o.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},r.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var o=t[e]._tiles;for(var n in o){var r=o[n];if("loaded"!==r.state&&"errored"!==r.state)return!1}}return!0},r.prototype.addSourceType=function(t,e,o){return this.style.addSourceType(t,e,o)},r.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},r.prototype.getSource=function(t){return this.style.getSource(t)},r.prototype.addImage=function(e,o,n){void 0===n&&(n={});var r=n.pixelRatio;void 0===r&&(r=1);var i=n.sdf;if(void 0===i&&(i=!1),o instanceof Dn){var a=t.browser.getImageData(o),s=a.width,l=a.height,u=a.data;this.style.addImage(e,{data:new t.RGBAImage({width:s,height:l},u),pixelRatio:r,sdf:i,version:0})}else{if(void 0===o.width||void 0===o.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var c=o.width,p=o.height,d=o.data,h=o;this.style.addImage(e,{data:new t.RGBAImage({width:c,height:p},new Uint8Array(d)),pixelRatio:r,sdf:i,version:0,userImage:h}),h.onAdd&&h.onAdd(this,e)}},r.prototype.updateImage=function(e,o){var n=this.style.getImage(e);if(!n)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var r=o instanceof Dn?t.browser.getImageData(o):o,i=r.width,a=r.height,s=r.data;if(void 0===i||void 0===a)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(i!==n.data.width||a!==n.data.height)return this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var l=!(o instanceof Dn);n.data.replace(s,l),this.style.updateImage(e,n)},r.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},r.prototype.removeImage=function(t){this.style.removeImage(t)},r.prototype.loadImage=function(e,o){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),o)},r.prototype.listImages=function(){return this.style.listImages()},r.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0)},r.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},r.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},r.prototype.getLayer=function(t){return this.style.getLayer(t)},r.prototype.setFilter=function(t,e,o){return void 0===o&&(o={}),this.style.setFilter(t,e,o),this._update(!0)},r.prototype.setLayerZoomRange=function(t,e,o){return this.style.setLayerZoomRange(t,e,o),this._update(!0)},r.prototype.getFilter=function(t){return this.style.getFilter(t)},r.prototype.setPaintProperty=function(t,e,o,n){return void 0===n&&(n={}),this.style.setPaintProperty(t,e,o,n),this._update(!0)},r.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},r.prototype.setLayoutProperty=function(t,e,o,n){return void 0===n&&(n={}),this.style.setLayoutProperty(t,e,o,n),this._update(!0)},r.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},r.prototype.setLight=function(t,e){return void 0===e&&(e={}),this.style.setLight(t,e),this._update(!0)},r.prototype.getLight=function(){return this.style.getLight()},r.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},r.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},r.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},r.prototype.getContainer=function(){return this._container},r.prototype.getCanvasContainer=function(){return this._canvasContainer},r.prototype.getCanvas=function(){return this._canvas},r.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},r.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},r.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=o.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=o.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=o.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var r=this._controlContainer=o.create("div","mapboxgl-control-container",t),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){i[t]=o.create("div","mapboxgl-ctrl-"+t,r)})},r.prototype._resizeCanvas=function(e,o){var n=t.window.devicePixelRatio||1;this._canvas.width=n*e,this._canvas.height=n*o,this._canvas.style.width=e+"px",this._canvas.style.height=o+"px"},r.prototype._setupPainter=function(){var o=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),n=this._canvas.getContext("webgl",o)||this._canvas.getContext("experimental-webgl",o);n?(this.painter=new rn(n,this.transform),t.webpSupported.testSupport(n)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},r.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},r.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},r.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},r.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},r.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},r.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},r.prototype._render=function(){this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var e=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var o=this.transform.zoom,n=t.browser.now();this.style.zoomHistory.update(o,n);var r=new t.EvaluationParameters(o,{now:n,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),i=r.crossFadingFactor();1===i&&i===this._crossFadingFactor||(e=!0,this._crossFadingFactor=i),this.style.update(r)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||e)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.Event("idle")),this},r.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,o=this._controls;e<o.length;e+=1)o[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var n=this.painter.context.gl.getExtension("WEBGL_lose_context");n&&n.loseContext(),Fn(this._canvasContainer),Fn(this._controlContainer),Fn(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new t.Event("remove"))},r.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(){e._frame=null,e._render()}))},r.prototype._onWindowOnline=function(){this._update()},r.prototype._onWindowResize=function(){this._trackResize&&this.resize()._update()},i.showTileBoundaries.get=function(){return!!this._showTileBoundaries},i.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},i.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},i.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},i.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},i.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},i.repaint.get=function(){return!!this._repaint},i.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},i.vertices.get=function(){return!!this._vertices},i.vertices.set=function(t){this._vertices=t,this._update()},r.prototype._setCacheLimits=function(e,o){t.setCacheLimits(e,o)},Object.defineProperties(r.prototype,i),r}(On);function Fn(t){t.parentNode&&t.parentNode.removeChild(t)}var Nn={showCompass:!0,showZoom:!0},kn=function(e){var n=this;this.options=t.extend({},Nn,e),this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this.options.showZoom&&(t.bindAll(["_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom in",function(){return n._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom out",function(){return n._map.zoomOut()})),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset bearing to north",function(){return n._map.resetNorth()}),this._compassArrow=o.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};function Gn(e,o,n){if(e=new t.LngLat(e.lng,e.lat),o){var r=new t.LngLat(e.lng-360,e.lat),i=new t.LngLat(e.lng+360,e.lat),a=n.locationPoint(e).distSqr(o);n.locationPoint(r).distSqr(o)<a?e=r:n.locationPoint(i).distSqr(o)<a&&(e=i)}for(;Math.abs(e.lng-n.center.lng)>180;){var s=n.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=n.width&&s.y<=n.height)break;e.lng>n.center.lng?e.lng-=360:e.lng+=360}return e}kn.prototype._updateZoomButtons=function(){var t=this._map.getZoom();this._zoomInButton.classList.toggle("mapboxgl-ctrl-icon-disabled",t===this._map.getMaxZoom()),this._zoomOutButton.classList.toggle("mapboxgl-ctrl-icon-disabled",t===this._map.getMinZoom())},kn.prototype._rotateCompassArrow=function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},kn.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new mn(t,{button:"left",element:this._compass}),o.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.enable()),this._container},kn.prototype.onRemove=function(){o.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),o.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.disable(),delete this._handler),delete this._map},kn.prototype._createButton=function(t,e,n){var r=o.create("button",t,this._container);return r.type="button",r.title=e,r.setAttribute("aria-label",e),r.addEventListener("click",n),r};var Vn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Bn(t,e,o){var n=t.classList;for(var r in Vn)n.remove("mapboxgl-"+o+"-anchor-"+r);n.add("mapboxgl-"+o+"-anchor-"+e)}var zn,Hn=function(e){function n(n,r){if(e.call(this),(n instanceof t.window.HTMLElement||r)&&(n=t.extend({element:n},r)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._draggable=n&&n.draggable||!1,this._state="inactive",n&&n.element)this._element=n.element,this._offset=t.Point.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=o.create("div");var i=o.createNS("http://www.w3.org/2000/svg","svg");i.setAttributeNS(null,"display","block"),i.setAttributeNS(null,"height","41px"),i.setAttributeNS(null,"width","27px"),i.setAttributeNS(null,"viewBox","0 0 27 41");var a=o.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"stroke","none"),a.setAttributeNS(null,"stroke-width","1"),a.setAttributeNS(null,"fill","none"),a.setAttributeNS(null,"fill-rule","evenodd");var s=o.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");var l=o.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");for(var u=0,c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];u<c.length;u+=1){var p=c[u],d=o.createNS("http://www.w3.org/2000/svg","ellipse");d.setAttributeNS(null,"opacity","0.04"),d.setAttributeNS(null,"cx","10.5"),d.setAttributeNS(null,"cy","5.80029008"),d.setAttributeNS(null,"rx",p.rx),d.setAttributeNS(null,"ry",p.ry),l.appendChild(d)}var h=o.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"fill",this._color);var f=o.createNS("http://www.w3.org/2000/svg","path");f.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),h.appendChild(f);var g=o.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"fill","#000000");var y=o.createNS("http://www.w3.org/2000/svg","path");y.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),g.appendChild(y);var v=o.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(6.0, 7.0)"),v.setAttributeNS(null,"fill","#FFFFFF");var m=o.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");var C=o.createNS("http://www.w3.org/2000/svg","circle");C.setAttributeNS(null,"fill","#000000"),C.setAttributeNS(null,"opacity","0.25"),C.setAttributeNS(null,"cx","5.5"),C.setAttributeNS(null,"cy","5.5"),C.setAttributeNS(null,"r","5.4999962");var _=o.createNS("http://www.w3.org/2000/svg","circle");_.setAttributeNS(null,"fill","#FFFFFF"),_.setAttributeNS(null,"cx","5.5"),_.setAttributeNS(null,"cy","5.5"),_.setAttributeNS(null,"r","5.4999962"),m.appendChild(C),m.appendChild(_),s.appendChild(l),s.appendChild(h),s.appendChild(g),s.appendChild(v),s.appendChild(m),i.appendChild(s),this._element.appendChild(i),this._offset=t.Point.convert(n&&n.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(t){t.preventDefault()}),Bn(this._element,this._anchor,"marker"),this._popup=null}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},n.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),delete this._map),o.remove(this._element),this._popup&&this._popup.remove(),this},n.prototype.getLngLat=function(){return this._lngLat},n.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},n.prototype.getElement=function(){return this._element},n.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},n.prototype._onMapClick=function(t){var e=t.originalEvent.target,o=this._element;this._popup&&(e===o||o.contains(e))&&this.togglePopup()},n.prototype.getPopup=function(){return this._popup},n.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},n.prototype._update=function(t){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=Gn(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),t&&"moveend"!==t.type||(this._pos=this._pos.round()),o.setTransform(this._element,Vn[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"))},n.prototype.getOffset=function(){return this._offset},n.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},n.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},n.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},n.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},n.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},n.prototype.isDraggable=function(){return this._draggable},n}(t.Evented),jn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},Un=function(e){function n(o){e.call(this),this.options=t.extend({},jn,o),t.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.onAdd=function(e){var n;return this._map=e,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),n=this._setupUI,void 0!==zn?n(zn):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then(function(t){zn="denied"!==t.state,n(zn)}):(zn=!!t.window.navigator.geolocation,n(zn)),this._container},n.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),o.remove(this._container),this._map=void 0},n.prototype._onSuccess=function(e){if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()},n.prototype._updateCamera=function(e){var o=new t.LngLat(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy,r=this._map.getBearing(),i=t.extend({bearing:r},this.options.fitBoundsOptions);this._map.fitBounds(o.toBounds(n),i,{geolocateSource:!0})},n.prototype._updateMarker=function(t){t?this._userLocationDotMarker.setLngLat([t.coords.longitude,t.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},n.prototype._onError=function(e){if(this.options.trackUserLocation)if(1===e.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()},n.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},n.prototype._setupUI=function(e){var n=this;!1!==e?(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=o.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Hn(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==n._watchState||(n._watchState="BACKGROUND",n._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),n._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),n.fire(new t.Event("trackuserlocationend")))})):t.warnOnce("Geolocation support is not available, the GeolocateControl will not be visible.")},n.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},n.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},n}(t.Evented),Wn={maxWidth:100,unit:"metric"},Kn=function(e){this.options=t.extend({},Wn,e),t.bindAll(["_onMove","setUnit"],this)};function qn(t,e,o){var n,r,i,a,s,l,u=o&&o.maxWidth||100,c=t._container.clientHeight/2,p=(n=t.unproject([0,c]),r=t.unproject([u,c]),i=Math.PI/180,a=n.lat*i,s=r.lat*i,l=Math.sin(a)*Math.sin(s)+Math.cos(a)*Math.cos(s)*Math.cos((r.lng-n.lng)*i),6371e3*Math.acos(Math.min(l,1)));if(o&&"imperial"===o.unit){var d=3.2808*p;d>5280?Yn(e,u,d/5280,"mi"):Yn(e,u,d,"ft")}else o&&"nautical"===o.unit?Yn(e,u,p/1852,"nm"):Yn(e,u,p,"m")}function Yn(t,e,o,n){var r,i,a,s=(r=o,(i=Math.pow(10,(""+Math.floor(r)).length-1))*(a=(a=r/i)>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(a))),l=s/o;"m"===n&&s>=1e3&&(s/=1e3,n="km"),t.style.width=e*l+"px",t.innerHTML=s+n}Kn.prototype.getDefaultPosition=function(){return"bottom-left"},Kn.prototype._onMove=function(){qn(this._map,this._container,this.options)},Kn.prototype.onAdd=function(t){return this._map=t,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Kn.prototype.onRemove=function(){o.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Kn.prototype.setUnit=function(t){this.options.unit=t,qn(this._map,this._container,this.options)};var Zn=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};Zn.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=o.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Zn.prototype.onRemove=function(){o.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Zn.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Zn.prototype._setupUI=function(){(this._fullscreenButton=o.create("button",this._className+"-icon "+this._className+"-fullscreen",this._controlContainer)).type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Zn.prototype._updateTitle=function(){var t=this._isFullscreen()?"Exit fullscreen":"Enter fullscreen";this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},Zn.prototype._isFullscreen=function(){return this._fullscreen},Zn.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"),this._updateTitle())},Zn.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Xn={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Jn=function(e){function n(o){e.call(this),this.options=t.extend(Object.create(Xn),o),t.bindAll(["_update","_onClickClose","remove"],this)}return e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n,n.prototype.addTo=function(e){var o=this;return this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",function(t){o._update(t.point)}),this._map.on("mouseup",function(t){o._update(t.point)}),this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},n.prototype.isOpen=function(){return!!this._map},n.prototype.remove=function(){return this._content&&o.remove(this._content),this._container&&(o.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),this._map.off("remove",this.remove),this._map.off("mousemove"),delete this._map),this.fire(new t.Event("close")),this},n.prototype.getLngLat=function(){return this._lngLat},n.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._map&&(this._map.on("move",this._update),this._map.off("mousemove"),this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this._trackPointer=!1,this._update(),this},n.prototype.trackPointer=function(){var t=this;return this._trackPointer=!0,this._pos=null,this._map&&(this._map.off("move",this._update),this._map.on("mousemove",function(e){t._update(e.point)}),this._map.on("drag",function(e){t._update(e.point)}),this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},n.prototype.getElement=function(){return this._container},n.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},n.prototype.setHTML=function(e){var o,n=t.window.document.createDocumentFragment(),r=t.window.document.createElement("body");for(r.innerHTML=e;o=r.firstChild;)n.appendChild(o);return this.setDOMContent(n)},n.prototype.getMaxWidth=function(){return this._container.style.maxWidth},n.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},n.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},n.prototype._createContent=function(){this._content&&o.remove(this._content),this._content=o.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=o.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},n.prototype._update=function(e){var n=this,r=this._lngLat||this._trackPointer;if(this._map&&r&&this._content&&(this._container||(this._container=o.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=o.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(t){return n._container.classList.add(t)})),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Gn(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e)){var i=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),a=this.options.anchor,s=function e(o){if(o){if("number"==typeof o){var n=Math.round(Math.sqrt(.5*Math.pow(o,2)));return{center:new t.Point(0,0),top:new t.Point(0,o),"top-left":new t.Point(n,n),"top-right":new t.Point(-n,n),bottom:new t.Point(0,-o),"bottom-left":new t.Point(n,-n),"bottom-right":new t.Point(-n,-n),left:new t.Point(o,0),right:new t.Point(-o,0)}}if(o instanceof t.Point||Array.isArray(o)){var r=t.Point.convert(o);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:t.Point.convert(o.center||[0,0]),top:t.Point.convert(o.top||[0,0]),"top-left":t.Point.convert(o["top-left"]||[0,0]),"top-right":t.Point.convert(o["top-right"]||[0,0]),bottom:t.Point.convert(o.bottom||[0,0]),"bottom-left":t.Point.convert(o["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(o["bottom-right"]||[0,0]),left:t.Point.convert(o.left||[0,0]),right:t.Point.convert(o.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!a){var l,u=this._container.offsetWidth,c=this._container.offsetHeight;l=i.y+s.bottom.y<c?["top"]:i.y>this._map.transform.height-c?["bottom"]:[],i.x<u/2?l.push("left"):i.x>this._map.transform.width-u/2&&l.push("right"),a=0===l.length?"bottom":l.join("-")}var p=i.add(s[a]).round();o.setTransform(this._container,Vn[a]+" translate("+p.x+"px,"+p.y+"px)"),Bn(this._container,a,"popup")}},n.prototype._onClickClose=function(){this.remove()},n}(t.Evented),Qn={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,Map:Ln,NavigationControl:kn,GeolocateControl:Un,AttributionControl:Rn,ScaleControl:Kn,FullscreenControl:Zn,Popup:Jn,Marker:Hn,Style:Fe,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return It.workerCount},set workerCount(t){It.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){t.clearTileCache(e)},workerUrl:""};return Qn}),o}()},function(t,e,o){"use strict";o.r(e),function(t){function n(t){return null==t||""===t?null:t}function r(t,e){return void 0===e&&(e=!1),null!=t&&(""!==t||e)}function i(t){return!r(t)}function a(t){return null==t||0===t.length}function s(t){return null!=t&&"function"===typeof t.toString?t.toString():null}function l(t){if(void 0!==t){if(null===t||""===t)return null;if("number"===typeof t)return isNaN(t)?void 0:t;var e=parseInt(t,10);return isNaN(e)?void 0:e}}function u(t){if(void 0!==t)return null!==t&&""!==t&&("boolean"===typeof t?t:/true/i.test(t))}function c(t,e){return(t?JSON.stringify(t):null)===(e?JSON.stringify(e):null)}function p(t){if(t instanceof Set||t instanceof Map){var e=[];return t.forEach(function(t){return e.push(t)}),e}return Object.values(t)}o.d(e,"AbstractHeaderCellCtrl",function(){return op}),o.d(e,"AgAbstractField",function(){return Yr}),o.d(e,"AgAbstractLabel",function(){return Kr}),o.d(e,"AgAutocomplete",function(){return ff}),o.d(e,"AgCheckbox",function(){return ui}),o.d(e,"AgDialog",function(){return Jh}),o.d(e,"AgGroupComponent",function(){return Lh}),o.d(e,"AgInputDateField",function(){return gh}),o.d(e,"AgInputNumberField",function(){return Gi}),o.d(e,"AgInputRange",function(){return vh}),o.d(e,"AgInputTextArea",function(){return hh}),o.d(e,"AgInputTextField",function(){return Ni}),o.d(e,"AgMenuItemComponent",function(){return Uh}),o.d(e,"AgMenuItemRenderer",function(){return Ds}),o.d(e,"AgMenuList",function(){return kh}),o.d(e,"AgMenuPanel",function(){return Bh}),o.d(e,"AgPanel",function(){return qh}),o.d(e,"AgPickerField",function(){return Qr}),o.d(e,"AgPromise",function(){return hr}),o.d(e,"AgPromiseStatus",function(){return ar}),o.d(e,"AgRadioButton",function(){return pi}),o.d(e,"AgRichSelect",function(){return Rh}),o.d(e,"AgSelect",function(){return ri}),o.d(e,"AgSlider",function(){return Dh}),o.d(e,"AgStackComponentsRegistry",function(){return Me}),o.d(e,"AgToggleButton",function(){return ph}),o.d(e,"AlignedGridsService",function(){return xf}),o.d(e,"AllCommunityModules",function(){return xC}),o.d(e,"AnimateShowChangeCellRenderer",function(){return Aa}),o.d(e,"AnimateSlideCellRenderer",function(){return Ia}),o.d(e,"AnimationFrameService",function(){return _d}),o.d(e,"AutoScrollService",function(){return cl}),o.d(e,"AutoWidthCalculator",function(){return Ad}),o.d(e,"Autowired",function(){return J}),o.d(e,"BarColumnLabelPlacement",function(){return qv}),o.d(e,"BaseComponentWrapper",function(){return Jv}),o.d(e,"BaseCreator",function(){return Wm}),o.d(e,"BaseGridSerializingSession",function(){return Km}),o.d(e,"Bean",function(){return X}),o.d(e,"BeanStub",function(){return Bt}),o.d(e,"Beans",function(){return su}),o.d(e,"BodyDropPivotTarget",function(){return Fc}),o.d(e,"BodyDropTarget",function(){return Hc}),o.d(e,"CHART_TOOLBAR_ALLOW_LIST",function(){return tm}),o.d(e,"CHART_TOOL_PANEL_ALLOW_LIST",function(){return $v}),o.d(e,"CHART_TOOL_PANEL_MENU_OPTIONS",function(){return em}),o.d(e,"CellComp",function(){return Tc}),o.d(e,"CellCtrl",function(){return wu}),o.d(e,"CellNavigationService",function(){return wf}),o.d(e,"CellPositionUtils",function(){return ey}),o.d(e,"CellRangeType",function(){return Xl}),o.d(e,"ChangedPath",function(){return Jd}),o.d(e,"CheckboxCellEditor",function(){return Ps}),o.d(e,"CheckboxCellRenderer",function(){return Ts}),o.d(e,"CheckboxSelectionComponent",function(){return Va}),o.d(e,"ClientSideRowModelModule",function(){return Im}),o.d(e,"ClientSideRowModelSteps",function(){return ad}),o.d(e,"ColDefUtil",function(){return il}),o.d(e,"Column",function(){return ct}),o.d(e,"ColumnApi",function(){return Mf}),o.d(e,"ColumnFactory",function(){return Ut}),o.d(e,"ColumnGroup",function(){return Kt}),o.d(e,"ColumnKeyCreator",function(){return h}),o.d(e,"ColumnModel",function(){return fe}),o.d(e,"ColumnUtils",function(){return me}),o.d(e,"Component",function(){return Sr}),o.d(e,"ComponentUtil",function(){return Pe}),o.d(e,"Context",function(){return K}),o.d(e,"CssClassApplier",function(){return vu}),o.d(e,"CssClassManager",function(){return Cr}),o.d(e,"CsvCreator",function(){return Qm}),o.d(e,"CsvExportModule",function(){return oC}),o.d(e,"CtrlsService",function(){return Ey}),o.d(e,"CustomTooltipFeature",function(){return mr}),o.d(e,"DEFAULT_CHART_GROUPS",function(){return Qv}),o.d(e,"DataTypeService",function(){return pv}),o.d(e,"DateCellEditor",function(){return Cs}),o.d(e,"DateFilter",function(){return xi}),o.d(e,"DateStringCellEditor",function(){return Ss}),o.d(e,"DisplayedGroupCreator",function(){return we}),o.d(e,"Downloader",function(){return qm}),o.d(e,"DragAndDropService",function(){return Wa}),o.d(e,"DragService",function(){return ul}),o.d(e,"DragSourceType",function(){return Ba}),o.d(e,"Environment",function(){return Ng}),o.d(e,"EventService",function(){return rt}),o.d(e,"Events",function(){return qt}),o.d(e,"ExcelFactoryMode",function(){return Ua}),o.d(e,"ExpansionService",function(){return Ed}),o.d(e,"ExpressionService",function(){return Vf}),o.d(e,"FilterManager",function(){return xl}),o.d(e,"FloatingFilterMapper",function(){return el}),o.d(e,"FocusService",function(){return lg}),o.d(e,"GROUP_AUTO_COLUMN_ID",function(){return Jt}),o.d(e,"Grid",function(){return Yv}),o.d(e,"GridApi",function(){return ml}),o.d(e,"GridBodyComp",function(){return pc}),o.d(e,"GridBodyCtrl",function(){return Jl}),o.d(e,"GridComp",function(){return $f}),o.d(e,"GridCoreCreator",function(){return Xv}),o.d(e,"GridCtrl",function(){return Xf}),o.d(e,"GridHeaderComp",function(){return Jp}),o.d(e,"GridHeaderCtrl",function(){return Yp}),o.d(e,"GridOptionsService",function(){return Jy}),o.d(e,"GridSerializer",function(){return eC}),o.d(e,"GroupCellRenderer",function(){return rs}),o.d(e,"GroupCellRendererCtrl",function(){return es}),o.d(e,"GroupInstanceIdCreator",function(){return Yt}),o.d(e,"HeaderCellCtrl",function(){return mp}),o.d(e,"HeaderFilterCellComp",function(){return Al}),o.d(e,"HeaderFilterCellCtrl",function(){return cp}),o.d(e,"HeaderGroupCellCtrl",function(){return Op}),o.d(e,"HeaderNavigationDirection",function(){return Jc}),o.d(e,"HeaderNavigationService",function(){return Wp}),o.d(e,"HeaderPositionUtils",function(){return fy}),o.d(e,"HeaderRowComp",function(){return Qc}),o.d(e,"HeaderRowContainerComp",function(){return zp}),o.d(e,"HeaderRowContainerCtrl",function(){return Gp}),o.d(e,"HeaderRowCtrl",function(){return Ip}),o.d(e,"HeaderRowType",function(){return Mc}),o.d(e,"HorizontalDirection",function(){return ji}),o.d(e,"HorizontalResizeService",function(){return td}),o.d(e,"InfiniteRowModelModule",function(){return Um}),o.d(e,"KeyCode",function(){return jn}),o.d(e,"LargeTextCellEditor",function(){return ma}),o.d(e,"LayoutCssClasses",function(){return vl}),o.d(e,"LocaleService",function(){return tv}),o.d(e,"Logger",function(){return qf}),o.d(e,"LoggerFactory",function(){return Kf}),o.d(e,"ManagedFocusFeature",function(){return Nr}),o.d(e,"MenuService",function(){return Od}),o.d(e,"ModuleNames",function(){return V}),o.d(e,"ModuleRegistry",function(){return j}),o.d(e,"MouseEventService",function(){return vc}),o.d(e,"MoveColumnFeature",function(){return Vc}),o.d(e,"NavigationService",function(){return wc}),o.d(e,"NumberCellEditor",function(){return ys}),o.d(e,"NumberFilter",function(){return Ui}),o.d(e,"NumberSequence",function(){return cr}),o.d(e,"Optional",function(){return Q}),o.d(e,"PaginationProxy",function(){return ah}),o.d(e,"PinnedRowModel",function(){return Zd}),o.d(e,"PopupComponent",function(){return ga}),o.d(e,"PopupEditorWrapper",function(){return Ec}),o.d(e,"PopupService",function(){return af}),o.d(e,"PositionableFeature",function(){return Br}),o.d(e,"PostConstruct",function(){return Y}),o.d(e,"PreConstruct",function(){return q}),o.d(e,"PreDestroy",function(){return Z}),o.d(e,"PropertyKeys",function(){return xe}),o.d(e,"ProvidedColumnGroup",function(){return dt}),o.d(e,"ProvidedFilter",function(){return jr}),o.d(e,"Qualifier",function(){return tt}),o.d(e,"QuerySelector",function(){return Er}),o.d(e,"RefSelector",function(){return xr}),o.d(e,"ResizeObserverService",function(){return vd}),o.d(e,"RowAnimationCssClasses",function(){return Vl}),o.d(e,"RowContainerComp",function(){return Ic}),o.d(e,"RowContainerCtrl",function(){return sc}),o.d(e,"RowContainerName",function(){return Tu}),o.d(e,"RowContainerType",function(){return Ou}),o.d(e,"RowCtrl",function(){return Pu}),o.d(e,"RowHighlightPosition",function(){return al}),o.d(e,"RowNode",function(){return Fa}),o.d(e,"RowNodeBlock",function(){return $d}),o.d(e,"RowNodeBlockLoader",function(){return nh}),o.d(e,"RowNodeSorter",function(){return wy}),o.d(e,"RowPositionUtils",function(){return Qg}),o.d(e,"RowRenderer",function(){return Hd}),o.d(e,"RowType",function(){return dm}),o.d(e,"ScalarFilter",function(){return mi}),o.d(e,"ScrollVisibleService",function(){return fc}),o.d(e,"SelectCellEditor",function(){return wa}),o.d(e,"SelectableService",function(){return jg}),o.d(e,"SelectionHandleType",function(){return Zl}),o.d(e,"ServerSideTransactionResultStatus",function(){return wd}),o.d(e,"SetLeftFeature",function(){return ip}),o.d(e,"SimpleFilter",function(){return yi}),o.d(e,"SortController",function(){return rg}),o.d(e,"SortIndicatorComp",function(){return sa}),o.d(e,"StandardMenuFactory",function(){return nd}),o.d(e,"StylingService",function(){return uh}),o.d(e,"TabGuardClassNames",function(){return Up}),o.d(e,"TabGuardComp",function(){return pd}),o.d(e,"TabGuardCtrl",function(){return sd}),o.d(e,"TabbedLayout",function(){return fd}),o.d(e,"TemplateService",function(){return Hf}),o.d(e,"TextCellEditor",function(){return Oa}),o.d(e,"TextFilter",function(){return Yi}),o.d(e,"TextFloatingFilter",function(){return na}),o.d(e,"Timer",function(){return fr}),o.d(e,"TooltipFeature",function(){return iu}),o.d(e,"TouchListener",function(){return ra}),o.d(e,"UserComponentFactory",function(){return rl}),o.d(e,"UserComponentRegistry",function(){return Ns}),o.d(e,"ValueCache",function(){return _g}),o.d(e,"ValueFormatterService",function(){return Kd}),o.d(e,"ValueParserService",function(){return fv}),o.d(e,"ValueService",function(){return Ff}),o.d(e,"VanillaFrameworkOverrides",function(){return yf}),o.d(e,"VerticalDirection",function(){return Hi}),o.d(e,"VirtualList",function(){return Sh}),o.d(e,"VirtualListDragFeature",function(){return fl}),o.d(e,"XmlFactory",function(){return nC}),o.d(e,"ZipContainer",function(){return EC}),o.d(e,"_",function(){return ur}),o.d(e,"__FORCE_MODULE_DETECTION",function(){return om}),o.d(e,"createGrid",function(){return Kv}),o.d(e,"getRowContainerTypeForName",function(){return rc});var d=Object.freeze({__proto__:null,makeNull:n,exists:r,missing:i,missingOrEmpty:a,toStringOrNull:s,attrToNumber:l,attrToBoolean:u,attrToString:function(t){if(null!=t&&""!==t)return t},jsonEquals:c,defaultComparator:function(t,e,o){void 0===o&&(o=!1);var n=null==t,r=null==e;if(t&&t.toNumber&&(t=t.toNumber()),e&&e.toNumber&&(e=e.toNumber()),n&&r)return 0;if(n)return-1;if(r)return 1;function i(t,e){return t>e?1:t<e?-1:0}if("string"!==typeof t)return i(t,e);if(!o)return i(t,e);try{return t.localeCompare(e)}catch(a){return i(t,e)}},values:p}),h=function(){function t(){this.existingKeys={}}return t.prototype.addExistingKeys=function(t){for(var e=0;e<t.length;e++)this.existingKeys[t[e]]=!0},t.prototype.getUniqueKey=function(t,e){t=s(t);for(var o=0;;){var n=void 0;if(t?(n=t,0!==o&&(n+="_"+o)):e?(n=e,0!==o&&(n+="_"+o)):n=o,!this.existingKeys[n])return this.existingKeys[n]=!0,String(n);o++}},t}(),f=function(t){var e="function"===typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},g=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a};function y(t,e){var o,n;if(null!=t)if(Array.isArray(t))for(var r=0;r<t.length;r++)e(r.toString(),t[r]);else try{for(var i=f(Object.entries(t)),a=i.next();!a.done;a=i.next()){var s=g(a.value,2);e(s[0],s[1])}}catch(l){o={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}}function v(t){for(var e={},o=Object.keys(t),n=0;n<o.length;n++){var r=o[n],i=t[r];e[r]=i}return e}function m(t,e){if(t){var o=t,n={};return Object.keys(o).forEach(function(t){if(!(e&&e.indexOf(t)>=0)){var r=o[t],i=S(r)&&r.constructor===Object;n[t]=i?m(r):r}}),n}}function C(t){if(!t)return[];var e=Object;if("function"===typeof e.values)return e.values(t);var o=[];for(var n in t)t.hasOwnProperty(n)&&t.propertyIsEnumerable(n)&&o.push(t[n]);return o}function _(t,e,o,n){void 0===o&&(o=!0),void 0===n&&(n=!1),r(e)&&y(e,function(e,r){var i=t[e];if(i!==r){if(n)if(null==i&&null!=r)"object"===typeof r&&r.constructor===Object&&(i={},t[e]=i);S(r)&&S(i)&&!Array.isArray(i)?_(i,r,o,n):(o||void 0!==r)&&(t[e]=r)}})}function w(t,e,o){if(e&&t){if(!o)return t[e];for(var n=e.split("."),r=t,i=0;i<n.length;i++){if(null==r)return;r=r[n[i]]}return r}}function b(t,e,o){void 0===e&&(e=[]),Object.keys(t).forEach(function(o){"object"!==typeof t[o]||e.includes(o)||(t[o]=void 0)});var n=Object.getPrototypeOf(t),r={};Object.getOwnPropertyNames(n).forEach(function(t){if("function"===typeof n[t]&&!e.includes(t)){r[t]={value:function(){console.warn(function(t){return"AG Grid: Grid API function ".concat(t,"() cannot be called as the grid has been destroyed.\n    It is recommended to remove local references to the grid api. Alternatively, check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.\n    To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ").concat(o)}(t))},writable:!0}}}),Object.defineProperties(t,r)}function S(t){return"object"===typeof t&&null!==t}var E=Object.freeze({__proto__:null,iterateObject:y,cloneObject:v,deepCloneDefinition:m,getAllValuesInObject:C,mergeDeep:_,getValueUsingField:w,removeAllReferences:b,isNonNullObject:S}),x={};function T(t,e){x[e]||(t(),x[e]=!0)}function O(t){T(function(){return console.warn("AG Grid: "+t)},t)}function R(t){T(function(){return console.error("AG Grid: "+t)},t)}function P(t){if(t.name)return t.name;var e=/function\s+([^\(]+)/.exec(t.toString());return e&&2===e.length?e[1].trim():null}function A(t){return!!(t&&t.constructor&&t.call&&t.apply)}function D(t){F(t,400)}var M=[],I=!1;function L(t){M.push(t),I||(I=!0,window.setTimeout(function(){var t=M.slice();M.length=0,I=!1,t.forEach(function(t){return t()})},0))}function F(t,e){void 0===e&&(e=0),t.length>0&&window.setTimeout(function(){return t.forEach(function(t){return t()})},e)}function N(t,e){var o;return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=this;window.clearTimeout(o),o=window.setTimeout(function(){t.apply(i,n)},e)}}function k(t,e){var o=0;return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=(new Date).getTime();i-o<e||(o=i,t.apply(this,n))}}function G(t,e,o,n){void 0===o&&(o=100);var r=(new Date).getTime(),i=null,a=!1,s=function(){var s=(new Date).getTime()-r>o;(t()||s)&&(e(),a=!0,null!=i&&(window.clearInterval(i),i=null),s&&n&&console.warn(n))};s(),a||(i=window.setInterval(s,10))}var V,B=Object.freeze({__proto__:null,doOnce:T,warnOnce:O,errorOnce:R,getFunctionName:P,isFunction:A,executeInAWhile:D,executeNextVMTurn:L,executeAfter:F,debounce:N,throttle:k,waitUntil:G,compose:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return t.reduce(function(t,e){return e(t)},e)}},noop:function(){}});!function(t){t.CommunityCoreModule="@ag-grid-community/core",t.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",t.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",t.CsvExportModule="@ag-grid-community/csv-export",t.EnterpriseCoreModule="@ag-grid-enterprise/core",t.RowGroupingModule="@ag-grid-enterprise/row-grouping",t.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",t.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",t.MenuModule="@ag-grid-enterprise/menu",t.SetFilterModule="@ag-grid-enterprise/set-filter",t.MultiFilterModule="@ag-grid-enterprise/multi-filter",t.StatusBarModule="@ag-grid-enterprise/status-bar",t.SideBarModule="@ag-grid-enterprise/side-bar",t.RangeSelectionModule="@ag-grid-enterprise/range-selection",t.MasterDetailModule="@ag-grid-enterprise/master-detail",t.RichSelectModule="@ag-grid-enterprise/rich-select",t.GridChartsModule="@ag-grid-enterprise/charts",t.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",t.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",t.ExcelExportModule="@ag-grid-enterprise/excel-export",t.ClipboardModule="@ag-grid-enterprise/clipboard",t.SparklinesModule="@ag-grid-enterprise/sparklines",t.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",t.AngularModule="@ag-grid-community/angular",t.ReactModule="@ag-grid-community/react",t.VueModule="@ag-grid-community/vue"}(V||(V={}));var z=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},H=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},j=function(){function t(){}return t.register=function(e){t.__register(e,!0,void 0)},t.registerModules=function(e){t.__registerModules(e,!0,void 0)},t.__register=function(e,o,n){t.runVersionChecks(e),void 0!==n?(t.areGridScopedModules=!0,void 0===t.gridModulesMap[n]&&(t.gridModulesMap[n]={}),t.gridModulesMap[n][e.moduleName]=e):t.globalModulesMap[e.moduleName]=e,t.setModuleBased(o)},t.__unRegisterGridModules=function(e){delete t.gridModulesMap[e]},t.__registerModules=function(e,o,n){t.setModuleBased(o),e&&e.forEach(function(e){return t.__register(e,o,n)})},t.isValidModuleVersion=function(e){var o=z(e.version.split(".")||[],2),n=o[0],r=o[1],i=z(t.currentModuleVersion.split(".")||[],2),a=i[0],s=i[1];return n===a&&r===s},t.runVersionChecks=function(e){if(t.currentModuleVersion||(t.currentModuleVersion=e.version),e.version?t.isValidModuleVersion(e)||console.error("AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '".concat(e.moduleName,"' is version ").concat(e.version," but the other modules are version ").concat(this.currentModuleVersion,". Please update all modules to the same version.")):console.error("AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '".concat(e.moduleName,"' is incompatible. Please update all modules to the same version.")),e.validate){var o=e.validate();if(!o.isValid){var n=o;console.error("AG Grid: ".concat(n.message))}}},t.setModuleBased=function(e){void 0===t.moduleBased?t.moduleBased=e:t.moduleBased!==e&&T(function(){console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/packages-modules/ for more information.")},"ModulePackageCheck")},t.__setIsBundled=function(){t.isBundled=!0},t.__assertRegistered=function(e,o,n){var r;if(this.__isRegistered(e,n))return!0;var i,a=o+e;if(t.isBundled)i="AG Grid: unable to use ".concat(o," as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:\n        \n        <script src=\"https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js\"><\/script>\n        \nFor more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise");else if(t.moduleBased||void 0===t.moduleBased){var s=null===(r=Object.entries(V).find(function(t){var o=z(t,2);return o[0],o[1]===e}))||void 0===r?void 0:r[0];i="AG Grid: unable to use ".concat(o," as the ").concat(s," is not registered").concat(t.areGridScopedModules?" for gridId: ".concat(n):"",". Check if you have registered the module:\n           \n    import { ModuleRegistry } from '@ag-grid-community/core';\n    import { ").concat(s," } from '").concat(e,"';\n    \n    ModuleRegistry.registerModules([ ").concat(s," ]);\n\nFor more info see: https://www.ag-grid.com/javascript-grid/modules/")}else i="AG Grid: unable to use ".concat(o," as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:\n            \n    import 'ag-grid-enterprise';\n            \nFor more info see: https://www.ag-grid.com/javascript-grid/packages/");return T(function(){console.warn(i)},a),!1},t.__warnEnterpriseChartDisabled=function(t){var e="ag-charts-enterprise:"+t,o="AG Grid: the '".concat(t,"' chart type is not supported in AG Charts Community. See ").concat("https://ag-grid.com/javascript-data-grid/integrated-charts/"," for more details.");T(function(){console.warn(o)},e)},t.__isRegistered=function(e,o){var n;return!!t.globalModulesMap[e]||!!(null===(n=t.gridModulesMap[o])||void 0===n?void 0:n[e])},t.__getRegisteredModules=function(e){return H(H([],z(p(t.globalModulesMap)),!1),z(p(t.gridModulesMap[e]||{})),!1)},t.__getGridRegisteredModules=function(e){var o;return p(null!==(o=t.gridModulesMap[e])&&void 0!==o?o:{})||[]},t.__isPackageBased=function(){return!t.moduleBased},t.globalModulesMap={},t.gridModulesMap={},t.areGridScopedModules=!1,t}(),U=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},W=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},K=function(){function t(t,e){if(this.beanWrappers={},this.destroyed=!1,t&&t.beanClasses){this.contextParams=t,this.logger=e,this.logger.log(">> creating ag-Application Context"),this.createBeans();var o=this.getBeanInstances();this.wireBeans(o),this.logger.log(">> ag-Application Context ready - component is alive")}}return t.prototype.getBeanInstances=function(){return p(this.beanWrappers).map(function(t){return t.beanInstance})},t.prototype.createBean=function(t,e){if(!t)throw Error("Can't wire to bean since it is null");return this.wireBeans([t],e),t},t.prototype.wireBeans=function(t,e){this.autoWireBeans(t),this.methodWireBeans(t),this.callLifeCycleMethods(t,"preConstructMethods"),r(e)&&t.forEach(e),this.callLifeCycleMethods(t,"postConstructMethods")},t.prototype.createBeans=function(){var t=this;this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),y(this.beanWrappers,function(e,o){var n;o.bean.__agBeanMetaData&&o.bean.__agBeanMetaData.autowireMethods&&o.bean.__agBeanMetaData.autowireMethods.agConstructor&&(n=o.bean.__agBeanMetaData.autowireMethods.agConstructor);var r=t.getBeansForParameters(n,o.bean.name),i=new(o.bean.bind.apply(o.bean,W([null],U(r),!1)));o.beanInstance=i});var e=Object.keys(this.beanWrappers).join(", ");this.logger.log("created beans: ".concat(e))},t.prototype.createBeanWrapper=function(t){var e=t.__agBeanMetaData;if(!e){var o=void 0;return o=t.prototype.constructor?P(t.prototype.constructor):""+t,void console.error("Context item ".concat(o," is not a bean"))}var n={bean:t,beanInstance:null,beanName:e.beanName};this.beanWrappers[e.beanName]=n},t.prototype.autoWireBeans=function(t){var e=this;t.forEach(function(t){e.forEachMetaDataInHierarchy(t,function(o,n){var r=o.agClassAttributes;r&&r.forEach(function(o){var r=e.lookupBeanInstance(n,o.beanName,o.optional);t[o.attributeName]=r})})})},t.prototype.methodWireBeans=function(t){var e=this;t.forEach(function(t){e.forEachMetaDataInHierarchy(t,function(o,n){y(o.autowireMethods,function(o,r){if("agConstructor"!==o){var i=e.getBeansForParameters(r,n);t[o].apply(t,i)}})})})},t.prototype.forEachMetaDataInHierarchy=function(t,e){for(var o=Object.getPrototypeOf(t);null!=o;){var n=o.constructor;if(n.hasOwnProperty("__agBeanMetaData"))e(n.__agBeanMetaData,this.getBeanName(n));o=Object.getPrototypeOf(o)}},t.prototype.getBeanName=function(t){if(t.__agBeanMetaData&&t.__agBeanMetaData.beanName)return t.__agBeanMetaData.beanName;var e=t.toString();return e.substring(9,e.indexOf("("))},t.prototype.getBeansForParameters=function(t,e){var o=this,n=[];return t&&y(t,function(t,r){var i=o.lookupBeanInstance(e,r);n[Number(t)]=i}),n},t.prototype.lookupBeanInstance=function(t,e,o){if(void 0===o&&(o=!1),this.destroyed)return this.logger.log("AG Grid: bean reference ".concat(e," is used after the grid is destroyed!")),null;if("context"===e)return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(e))return this.contextParams.providedBeanInstances[e];var n=this.beanWrappers[e];return n?n.beanInstance:(o||console.error("AG Grid: unable to find bean reference ".concat(e," while initialising ").concat(t)),null)},t.prototype.callLifeCycleMethods=function(t,e){var o=this;t.forEach(function(t){return o.callLifeCycleMethodsOnBean(t,e)})},t.prototype.callLifeCycleMethodsOnBean=function(t,e,o){var n={};this.forEachMetaDataInHierarchy(t,function(t){var r=t[e];r&&r.forEach(function(t){t!=o&&(n[t]=!0)})}),Object.keys(n).forEach(function(e){return t[e]()})},t.prototype.getBean=function(t){return this.lookupBeanInstance("getBean",t,!0)},t.prototype.destroy=function(){if(!this.destroyed){this.destroyed=!0,this.logger.log(">> Shutting down ag-Application Context");var t=this.getBeanInstances();this.destroyBeans(t),this.contextParams.providedBeanInstances=null,j.__unRegisterGridModules(this.contextParams.gridId),this.logger.log(">> ag-Application Context shut down - component is dead")}},t.prototype.destroyBean=function(t){t&&this.destroyBeans([t])},t.prototype.destroyBeans=function(t){var e=this;return t?(t.forEach(function(t){e.callLifeCycleMethodsOnBean(t,"preDestroyMethods","destroy");var o=t;"function"===typeof o.destroy&&o.destroy()}),[]):[]},t.prototype.isDestroyed=function(){return this.destroyed},t.prototype.getGridId=function(){return this.contextParams.gridId},t}();function q(t,e,o){var n=et(t.constructor);n.preConstructMethods||(n.preConstructMethods=[]),n.preConstructMethods.push(e)}function Y(t,e,o){var n=et(t.constructor);n.postConstructMethods||(n.postConstructMethods=[]),n.postConstructMethods.push(e)}function Z(t,e,o){var n=et(t.constructor);n.preDestroyMethods||(n.preDestroyMethods=[]),n.preDestroyMethods.push(e)}function X(t){return function(e){et(e).beanName=t}}function J(t){return function(e,o,n){$(e,t,!1,e,o,null)}}function Q(t){return function(e,o,n){$(e,t,!0,e,o,null)}}function $(t,e,o,n,r,i){if(null!==e)if("number"!==typeof i){var a=et(t.constructor);a.agClassAttributes||(a.agClassAttributes=[]),a.agClassAttributes.push({attributeName:r,beanName:e,optional:o})}else console.error("AG Grid: Autowired should be on an attribute");else console.error("AG Grid: Autowired name should not be null")}function tt(t){return function(e,o,n){var r,i="function"==typeof e?e:e.constructor;if("number"===typeof n){var a=void 0;o?(r=et(i),a=o):(r=et(i),a="agConstructor"),r.autowireMethods||(r.autowireMethods={}),r.autowireMethods[a]||(r.autowireMethods[a]={}),r.autowireMethods[a][n]=t}}}function et(t){return t.hasOwnProperty("__agBeanMetaData")||(t.__agBeanMetaData={}),t.__agBeanMetaData}var ot=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},nt=function(t,e){return function(o,n){e(o,n,t)}},rt=function(){function t(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}return t.prototype.setBeans=function(t,e,o,n){if(void 0===o&&(o=null),void 0===n&&(n=null),this.frameworkOverrides=e,this.gridOptionsService=t,o){var r=t.useAsyncEvents();this.addGlobalListener(o,r)}n&&this.addGlobalListener(n,!1)},t.prototype.setFrameworkOverrides=function(t){this.frameworkOverrides=t},t.prototype.getListeners=function(t,e,o){var n=e?this.allAsyncListeners:this.allSyncListeners,r=n.get(t);return!r&&o&&(r=new Set,n.set(t,r)),r},t.prototype.noRegisteredListenersExist=function(){return 0===this.allSyncListeners.size&&0===this.allAsyncListeners.size&&0===this.globalSyncListeners.size&&0===this.globalAsyncListeners.size},t.prototype.addEventListener=function(t,e,o){void 0===o&&(o=!1),this.getListeners(t,o,!0).add(e)},t.prototype.removeEventListener=function(t,e,o){void 0===o&&(o=!1);var n=this.getListeners(t,o,!1);n&&(n.delete(e),0===n.size&&(o?this.allAsyncListeners:this.allSyncListeners).delete(t))},t.prototype.addGlobalListener=function(t,e){void 0===e&&(e=!1),(e?this.globalAsyncListeners:this.globalSyncListeners).add(t)},t.prototype.removeGlobalListener=function(t,e){void 0===e&&(e=!1),(e?this.globalAsyncListeners:this.globalSyncListeners).delete(t)},t.prototype.dispatchEvent=function(t){var e=t;this.gridOptionsService&&this.gridOptionsService.addGridCommonParams(e),this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0},t.prototype.dispatchEventOnce=function(t){this.firedEvents[t.type]||this.dispatchEvent(t)},t.prototype.dispatchToListeners=function(t,e){var o,n=this,r=t.type;if(e&&"event"in t){var i=t.event;i instanceof Event&&(t.eventPath=i.composedPath())}var a=null!==(o=this.getListeners(r,e,!1))&&void 0!==o?o:new Set,s=new Set(a);s.size>0&&function(o,r){o.forEach(function(o){if(r.has(o)){var i=n.frameworkOverrides?function(){return n.frameworkOverrides.wrapIncoming(function(){return o(t)})}:function(){return o(t)};e?n.dispatchAsync(i):i()}})}(s,a),new Set(e?this.globalAsyncListeners:this.globalSyncListeners).forEach(function(o){var i=n.frameworkOverrides?function(){return n.frameworkOverrides.wrapIncoming(function(){return o(r,t)})}:function(){return o(r,t)};e?n.dispatchAsync(i):i()})},t.prototype.dispatchAsync=function(t){var e=this;this.asyncFunctionsQueue.push(t),this.scheduled||(this.frameworkOverrides.wrapIncoming(function(){window.setTimeout(e.flushAsyncQueue.bind(e),0)}),this.scheduled=!0)},t.prototype.flushAsyncQueue=function(){this.scheduled=!1;var t=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],t.forEach(function(t){return t()})},ot([nt(0,tt("gridOptionsService")),nt(1,tt("frameworkOverrides")),nt(2,tt("globalEventListener")),nt(3,tt("globalSyncEventListener"))],t.prototype,"setBeans",null),t=ot([X("eventService")],t)}(),it=function(){function t(t){this.frameworkOverrides=t,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}return t.prototype.wrap=function(t){var e=this,o=t;return this.frameworkOverrides.shouldWrapOutgoing&&(o=function(o){e.frameworkOverrides.wrapOutgoing(function(){return t(o)})},this.wrappedListeners.set(t,o)),o},t.prototype.wrapGlobal=function(t){var e=this,o=t;return this.frameworkOverrides.shouldWrapOutgoing&&(o=function(o,n){e.frameworkOverrides.wrapOutgoing(function(){return t(o,n)})},this.wrappedGlobalListeners.set(t,o)),o},t.prototype.unwrap=function(t){var e;return null!==(e=this.wrappedListeners.get(t))&&void 0!==e?e:t},t.prototype.unwrapGlobal=function(t){var e;return null!==(e=this.wrappedGlobalListeners.get(t))&&void 0!==e?e:t},t}(),at=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},st={resizable:!0,sortable:!0},lt=0;function ut(){return lt++}var ct=function(){function t(t,e,o,n){this.instanceId=ut(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.eventService=new rt,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=t,this.userProvidedColDef=e,this.colId=o,this.primary=n,this.setState(t)}return t.prototype.getInstanceId=function(){return this.instanceId},t.prototype.setState=function(t){void 0!==t.sort?"asc"!==t.sort&&"desc"!==t.sort||(this.sort=t.sort):"asc"!==t.initialSort&&"desc"!==t.initialSort||(this.sort=t.initialSort);var e=t.sortIndex,o=t.initialSortIndex;void 0!==e?null!==e&&(this.sortIndex=e):null!==o&&(this.sortIndex=o);var n=t.hide,r=t.initialHide;this.visible=void 0!==n?!n:!r,void 0!==t.pinned?this.setPinned(t.pinned):this.setPinned(t.initialPinned);var i=t.flex,a=t.initialFlex;void 0!==i?this.flex=i:void 0!==a&&(this.flex=a)},t.prototype.setColDef=function(t,e,o){this.colDef=t,this.userProvidedColDef=e,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.eventService.dispatchEvent(this.createColumnEvent("colDefChanged",o))},t.prototype.getUserProvidedColDef=function(){return this.userProvidedColDef},t.prototype.setParent=function(t){this.parent=t},t.prototype.getParent=function(){return this.parent},t.prototype.setOriginalParent=function(t){this.originalParent=t},t.prototype.getOriginalParent=function(){return this.originalParent},t.prototype.initialise=function(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()},t.prototype.initDotNotation=function(){var t=this.gridOptionsService.get("suppressFieldDotNotation");this.fieldContainsDots=r(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!t,this.tooltipFieldContainsDots=r(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!t},t.prototype.initMinAndMaxWidths=function(){var t=this.colDef;this.minWidth=this.columnUtils.calculateColMinWidth(t),this.maxWidth=this.columnUtils.calculateColMaxWidth(t)},t.prototype.initTooltip=function(){this.tooltipEnabled=r(this.colDef.tooltipField)||r(this.colDef.tooltipValueGetter)||r(this.colDef.tooltipComponent)},t.prototype.resetActualWidth=function(t){var e=this.columnUtils.calculateColInitialWidth(this.colDef);this.setActualWidth(e,t,!0)},t.prototype.isEmptyGroup=function(){return!1},t.prototype.isRowGroupDisplayed=function(t){if(i(this.colDef)||i(this.colDef.showRowGroup))return!1;var e=!0===this.colDef.showRowGroup,o=this.colDef.showRowGroup===t;return e||o},t.prototype.isPrimary=function(){return this.primary},t.prototype.isFilterAllowed=function(){return!!this.colDef.filter},t.prototype.isFieldContainsDots=function(){return this.fieldContainsDots},t.prototype.isTooltipEnabled=function(){return this.tooltipEnabled},t.prototype.isTooltipFieldContainsDots=function(){return this.tooltipFieldContainsDots},t.prototype.addEventListener=function(t,e){var o,n;this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new it(this.frameworkOverrides));var r=null!==(n=null===(o=this.frameworkEventListenerService)||void 0===o?void 0:o.wrap(e))&&void 0!==n?n:e;this.eventService.addEventListener(t,r)},t.prototype.removeEventListener=function(t,e){var o,n,r=null!==(n=null===(o=this.frameworkEventListenerService)||void 0===o?void 0:o.unwrap(e))&&void 0!==n?n:e;this.eventService.removeEventListener(t,r)},t.prototype.createColumnFunctionCallbackParams=function(t){return this.gridOptionsService.addGridCommonParams({node:t,data:t.data,column:this,colDef:this.colDef})},t.prototype.isSuppressNavigable=function(t){if("boolean"===typeof this.colDef.suppressNavigable)return this.colDef.suppressNavigable;if("function"===typeof this.colDef.suppressNavigable){var e=this.createColumnFunctionCallbackParams(t);return(0,this.colDef.suppressNavigable)(e)}return!1},t.prototype.isCellEditable=function(t){return!(t.group&&!this.gridOptionsService.get("enableGroupEdit"))&&this.isColumnFunc(t,this.colDef.editable)},t.prototype.isSuppressFillHandle=function(){return!!this.colDef.suppressFillHandle},t.prototype.isAutoHeight=function(){return!!this.colDef.autoHeight},t.prototype.isAutoHeaderHeight=function(){return!!this.colDef.autoHeaderHeight},t.prototype.isRowDrag=function(t){return this.isColumnFunc(t,this.colDef.rowDrag)},t.prototype.isDndSource=function(t){return this.isColumnFunc(t,this.colDef.dndSource)},t.prototype.isCellCheckboxSelection=function(t){return this.isColumnFunc(t,this.colDef.checkboxSelection)},t.prototype.isSuppressPaste=function(t){return this.isColumnFunc(t,this.colDef?this.colDef.suppressPaste:null)},t.prototype.isResizable=function(){return!!this.getColDefValue("resizable")},t.prototype.getColDefValue=function(t){var e;return null!==(e=this.colDef[t])&&void 0!==e?e:st[t]},t.prototype.isColumnFunc=function(t,e){return"boolean"===typeof e?e:"function"===typeof e&&e(this.createColumnFunctionCallbackParams(t))},t.prototype.setMoving=function(t,e){this.moving=t,this.eventService.dispatchEvent(this.createColumnEvent("movingChanged",e))},t.prototype.createColumnEvent=function(t,e){return this.gridOptionsService.addGridCommonParams({type:t,column:this,columns:[this],source:e})},t.prototype.isMoving=function(){return this.moving},t.prototype.getSort=function(){return this.sort},t.prototype.setSort=function(t,e){this.sort!==t&&(this.sort=t,this.eventService.dispatchEvent(this.createColumnEvent("sortChanged",e))),this.dispatchStateUpdatedEvent("sort")},t.prototype.setMenuVisible=function(t,e){this.menuVisible!==t&&(this.menuVisible=t,this.eventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",e)))},t.prototype.isMenuVisible=function(){return this.menuVisible},t.prototype.isSortable=function(){return!!this.getColDefValue("sortable")},t.prototype.isSortAscending=function(){return"asc"===this.sort},t.prototype.isSortDescending=function(){return"desc"===this.sort},t.prototype.isSortNone=function(){return i(this.sort)},t.prototype.isSorting=function(){return r(this.sort)},t.prototype.getSortIndex=function(){return this.sortIndex},t.prototype.setSortIndex=function(t){this.sortIndex=t,this.dispatchStateUpdatedEvent("sortIndex")},t.prototype.setAggFunc=function(t){this.aggFunc=t,this.dispatchStateUpdatedEvent("aggFunc")},t.prototype.getAggFunc=function(){return this.aggFunc},t.prototype.getLeft=function(){return this.left},t.prototype.getOldLeft=function(){return this.oldLeft},t.prototype.getRight=function(){return this.left+this.actualWidth},t.prototype.setLeft=function(t,e){this.oldLeft=this.left,this.left!==t&&(this.left=t,this.eventService.dispatchEvent(this.createColumnEvent("leftChanged",e)))},t.prototype.isFilterActive=function(){return this.filterActive},t.prototype.setFilterActive=function(t,e,o){this.filterActive!==t&&(this.filterActive=t,this.eventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",e)));var n=this.createColumnEvent("filterChanged",e);o&&_(n,o),this.eventService.dispatchEvent(n)},t.prototype.isHovered=function(){return this.columnHoverService.isHovered(this)},t.prototype.setPinned=function(t){this.pinned=!0===t||"left"===t?"left":"right"===t?"right":null,this.dispatchStateUpdatedEvent("pinned")},t.prototype.setFirstRightPinned=function(t,e){this.firstRightPinned!==t&&(this.firstRightPinned=t,this.eventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",e)))},t.prototype.setLastLeftPinned=function(t,e){this.lastLeftPinned!==t&&(this.lastLeftPinned=t,this.eventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",e)))},t.prototype.isFirstRightPinned=function(){return this.firstRightPinned},t.prototype.isLastLeftPinned=function(){return this.lastLeftPinned},t.prototype.isPinned=function(){return"left"===this.pinned||"right"===this.pinned},t.prototype.isPinnedLeft=function(){return"left"===this.pinned},t.prototype.isPinnedRight=function(){return"right"===this.pinned},t.prototype.getPinned=function(){return this.pinned},t.prototype.setVisible=function(t,e){var o=!0===t;this.visible!==o&&(this.visible=o,this.eventService.dispatchEvent(this.createColumnEvent("visibleChanged",e))),this.dispatchStateUpdatedEvent("hide")},t.prototype.isVisible=function(){return this.visible},t.prototype.isSpanHeaderHeight=function(){var t=this.getColDef();return!t.suppressSpanHeaderHeight&&!t.autoHeaderHeight},t.prototype.getColumnGroupPaddingInfo=function(){var t=this.getParent();if(!t||!t.isPadding())return{numberOfParents:0,isSpanningTotal:!1};for(var e=t.getPaddingLevel()+1,o=!0;t;){if(!t.isPadding()){o=!1;break}t=t.getParent()}return{numberOfParents:e,isSpanningTotal:o}},t.prototype.getColDef=function(){return this.colDef},t.prototype.getColumnGroupShow=function(){return this.colDef.columnGroupShow},t.prototype.getColId=function(){return this.colId},t.prototype.getId=function(){return this.colId},t.prototype.getUniqueId=function(){return this.colId},t.prototype.getDefinition=function(){return this.colDef},t.prototype.getActualWidth=function(){return this.actualWidth},t.prototype.getAutoHeaderHeight=function(){return this.autoHeaderHeight},t.prototype.setAutoHeaderHeight=function(t){var e=t!==this.autoHeaderHeight;return this.autoHeaderHeight=t,e},t.prototype.createBaseColDefParams=function(t){return this.gridOptionsService.addGridCommonParams({node:t,data:t.data,colDef:this.colDef,column:this})},t.prototype.getColSpan=function(t){if(i(this.colDef.colSpan))return 1;var e=this.createBaseColDefParams(t),o=this.colDef.colSpan(e);return Math.max(o,1)},t.prototype.getRowSpan=function(t){if(i(this.colDef.rowSpan))return 1;var e=this.createBaseColDefParams(t),o=this.colDef.rowSpan(e);return Math.max(o,1)},t.prototype.setActualWidth=function(t,e,o){void 0===o&&(o=!1),null!=this.minWidth&&(t=Math.max(t,this.minWidth)),null!=this.maxWidth&&(t=Math.min(t,this.maxWidth)),this.actualWidth!==t&&(this.actualWidth=t,this.flex&&"flex"!==e&&"gridInitializing"!==e&&(this.flex=null),o||this.fireColumnWidthChangedEvent(e)),this.dispatchStateUpdatedEvent("width")},t.prototype.fireColumnWidthChangedEvent=function(t){this.eventService.dispatchEvent(this.createColumnEvent("widthChanged",t))},t.prototype.isGreaterThanMax=function(t){return null!=this.maxWidth&&t>this.maxWidth},t.prototype.getMinWidth=function(){return this.minWidth},t.prototype.getMaxWidth=function(){return this.maxWidth},t.prototype.getFlex=function(){return this.flex||0},t.prototype.setFlex=function(t){this.flex!==t&&(this.flex=t),this.dispatchStateUpdatedEvent("flex")},t.prototype.setMinimum=function(t){r(this.minWidth)&&this.setActualWidth(this.minWidth,t)},t.prototype.setRowGroupActive=function(t,e){this.rowGroupActive!==t&&(this.rowGroupActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",e))),this.dispatchStateUpdatedEvent("rowGroup")},t.prototype.isRowGroupActive=function(){return this.rowGroupActive},t.prototype.setPivotActive=function(t,e){this.pivotActive!==t&&(this.pivotActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",e))),this.dispatchStateUpdatedEvent("pivot")},t.prototype.isPivotActive=function(){return this.pivotActive},t.prototype.isAnyFunctionActive=function(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()},t.prototype.isAnyFunctionAllowed=function(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()},t.prototype.setValueActive=function(t,e){this.aggregationActive!==t&&(this.aggregationActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnValueChanged",e)))},t.prototype.isValueActive=function(){return this.aggregationActive},t.prototype.isAllowPivot=function(){return!0===this.colDef.enablePivot},t.prototype.isAllowValue=function(){return!0===this.colDef.enableValue},t.prototype.isAllowRowGroup=function(){return!0===this.colDef.enableRowGroup},t.prototype.getMenuTabs=function(t){O("As of v31.1, 'getMenuTabs' is deprecated. Use 'getColDef().menuTabs ?? defaultValues' instead.");var e=this.getColDef().menuTabs;return null==e&&(e=t),e},t.prototype.dispatchStateUpdatedEvent=function(e){this.eventService.dispatchEvent({type:t.EVENT_STATE_UPDATED,key:e})},t.EVENT_MOVING_CHANGED="movingChanged",t.EVENT_LEFT_CHANGED="leftChanged",t.EVENT_WIDTH_CHANGED="widthChanged",t.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged",t.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged",t.EVENT_VISIBLE_CHANGED="visibleChanged",t.EVENT_FILTER_CHANGED="filterChanged",t.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged",t.EVENT_SORT_CHANGED="sortChanged",t.EVENT_COL_DEF_CHANGED="colDefChanged",t.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged",t.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged",t.EVENT_PIVOT_CHANGED="columnPivotChanged",t.EVENT_VALUE_CHANGED="columnValueChanged",t.EVENT_STATE_UPDATED="columnStateUpdated",at([J("gridOptionsService")],t.prototype,"gridOptionsService",void 0),at([J("columnUtils")],t.prototype,"columnUtils",void 0),at([J("columnHoverService")],t.prototype,"columnHoverService",void 0),at([J("frameworkOverrides")],t.prototype,"frameworkOverrides",void 0),at([Y],t.prototype,"initialise",null),t}(),pt=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},dt=function(){function t(t,e,o,n){this.localEventService=new rt,this.expandable=!1,this.instanceId=ut(),this.expandableListenerRemoveCallback=null,this.colGroupDef=t,this.groupId=e,this.expanded=!!t&&!!t.openByDefault,this.padding=o,this.level=n}return t.prototype.destroy=function(){this.expandableListenerRemoveCallback&&this.reset(null,void 0)},t.prototype.reset=function(t,e){this.colGroupDef=t,this.level=e,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0},t.prototype.getInstanceId=function(){return this.instanceId},t.prototype.setOriginalParent=function(t){this.originalParent=t},t.prototype.getOriginalParent=function(){return this.originalParent},t.prototype.getLevel=function(){return this.level},t.prototype.isVisible=function(){return!!this.children&&this.children.some(function(t){return t.isVisible()})},t.prototype.isPadding=function(){return this.padding},t.prototype.setExpanded=function(e){this.expanded=void 0!==e&&e;var o={type:t.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(o)},t.prototype.isExpandable=function(){return this.expandable},t.prototype.isExpanded=function(){return this.expanded},t.prototype.getGroupId=function(){return this.groupId},t.prototype.getId=function(){return this.getGroupId()},t.prototype.setChildren=function(t){this.children=t},t.prototype.getChildren=function(){return this.children},t.prototype.getColGroupDef=function(){return this.colGroupDef},t.prototype.getLeafColumns=function(){var t=[];return this.addLeafColumns(t),t},t.prototype.addLeafColumns=function(e){this.children&&this.children.forEach(function(o){o instanceof ct?e.push(o):o instanceof t&&o.addLeafColumns(e)})},t.prototype.getColumnGroupShow=function(){var t=this.colGroupDef;if(t)return t.columnGroupShow},t.prototype.setupExpandable=function(){var t=this;this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();var e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(function(t){return t.addEventListener("visibleChanged",e)}),this.expandableListenerRemoveCallback=function(){t.getLeafColumns().forEach(function(t){return t.removeEventListener("visibleChanged",e)}),t.expandableListenerRemoveCallback=null}},t.prototype.setExpandable=function(){if(!this.isPadding()){for(var e=!1,o=!1,n=!1,r=this.findChildrenRemovingPadding(),i=0,a=r.length;i<a;i++){var s=r[i];if(s.isVisible()){var l=s.getColumnGroupShow();"open"===l?(e=!0,n=!0):"closed"===l?(o=!0,n=!0):(e=!0,o=!0)}}var u=e&&o&&n;if(this.expandable!==u){this.expandable=u;var c={type:t.EVENT_EXPANDABLE_CHANGED};this.localEventService.dispatchEvent(c)}}},t.prototype.findChildrenRemovingPadding=function(){var e=[],o=function(n){n.forEach(function(n){n instanceof t&&n.isPadding()?o(n.children):e.push(n)})};return o(this.children),e},t.prototype.onColumnVisibilityChanged=function(){this.setExpandable()},t.prototype.addEventListener=function(t,e){this.localEventService.addEventListener(t,e)},t.prototype.removeEventListener=function(t,e){this.localEventService.removeEventListener(t,e)},t.EVENT_EXPANDED_CHANGED="expandedChanged",t.EVENT_EXPANDABLE_CHANGED="expandableChanged",pt([Z],t.prototype,"destroy",null),t}(),ht={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function ft(t){if(t&&t.length)return t[t.length-1]}function gt(t,e,o){return null==t&&null==e||null!=t&&null!=e&&t.length===e.length&&t.every(function(t,n){return o?o(t,e[n]):e[n]===t})}function yt(t){return t.sort(function(t,e){return t-e})}function vt(t,e){var o=t.indexOf(e);o>=0&&(t[o]=t[t.length-1],t.pop())}function mt(t,e){var o=t.indexOf(e);o>=0&&t.splice(o,1)}function Ct(t,e){for(var o=0;o<e.length;o++)vt(t,e[o])}function _t(t,e){for(var o=0;o<e.length;o++)mt(t,e[o])}function wt(t,e,o){t.splice(o,0,e)}function bt(t,e,o){_t(t,e),e.slice().reverse().forEach(function(e){return wt(t,e,o)})}function St(t,e){return t.indexOf(e)>-1}function Et(t){return[].concat.apply([],t)}function xt(t,e){null!=e&&null!=t&&e.forEach(function(e){return t.push(e)})}var Tt=Object.freeze({__proto__:null,existsAndNotEmpty:function(t){return null!=t&&t.length>0},last:ft,areEqual:gt,shallowCompare:function(t,e){return gt(t,e)},sortNumerically:yt,removeRepeatsFromArray:function(t,e){if(t)for(var o=t.length-2;o>=0;o--){var n=t[o]===e,r=t[o+1]===e;n&&r&&t.splice(o+1,1)}},removeFromUnorderedArray:vt,removeFromArray:mt,removeAllFromUnorderedArray:Ct,removeAllFromArray:_t,insertIntoArray:wt,insertArrayIntoArray:function(t,e,o){if(null!=t&&null!=e)for(var n=e.length-1;n>=0;n--)wt(t,e[n],o)},moveInArray:bt,includes:St,flatten:Et,pushAll:xt,toStrings:function(t){return t.map(s)},forEachReverse:function(t,e){if(null!=t)for(var o=t.length-1;o>=0;o--)e(t[o],o)}}),Ot="__ag_Grid_Stop_Propagation",Rt=["touchstart","touchend","touchmove","touchcancel","scroll"],Pt={};function At(t){t[Ot]=!0}function Dt(t){return!0===t[Ot]}var Mt=function(){var t={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return function(e){if("boolean"===typeof Pt[e])return Pt[e];var o=document.createElement(t[e]||"div");return Pt[e="on"+e]=e in o}}();function It(t,e,o){for(var n=e;n;){var r=t.getDomData(n,o);if(r)return r;n=n.parentElement}return null}function Lt(t,e){return!(!e||!t)&&Nt(e).indexOf(t)>=0}function Ft(t){for(var e=[],o=t.target;o;)e.push(o),o=o.parentElement;return e}function Nt(t){var e=t;return e.path?e.path:e.composedPath?e.composedPath():Ft(e)}function kt(t,e,o,n){var r=St(Rt,o)?{passive:!0}:void 0;t&&t.addEventListener&&t.addEventListener(e,o,n,r)}var Gt=Object.freeze({__proto__:null,stopPropagationForAgGrid:At,isStopPropagationForAgGrid:Dt,isEventSupported:Mt,getCtrlForEventTarget:It,isElementInEventPath:Lt,createEventPath:Ft,getEventPath:Nt,addSafePassiveEventListener:kt}),Vt=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Bt=function(){function t(){var t=this;this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.lastChangeSetIdLookup={},this.propertyListenerId=0,this.isAlive=function(){return!t.destroyed}}return t.prototype.getFrameworkOverrides=function(){return this.frameworkOverrides},t.prototype.getContext=function(){return this.context},t.prototype.destroy=function(){this.destroyFunctions.forEach(function(t){return t()}),this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:t.EVENT_DESTROYED})},t.prototype.addEventListener=function(t,e){this.localEventService||(this.localEventService=new rt),this.localEventService.addEventListener(t,e)},t.prototype.removeEventListener=function(t,e){this.localEventService&&this.localEventService.removeEventListener(t,e)},t.prototype.dispatchEvent=function(t){this.localEventService&&this.localEventService.dispatchEvent(t)},t.prototype.addManagedListener=function(t,e,o){var n=this;if(!this.destroyed){t instanceof HTMLElement?kt(this.getFrameworkOverrides(),t,e,o):t.addEventListener(e,o);var r=function(){return t.removeEventListener(e,o),n.destroyFunctions=n.destroyFunctions.filter(function(t){return t!==r}),null};return this.destroyFunctions.push(r),r}},t.prototype.setupGridOptionListener=function(t,e){var o=this;this.gridOptionsService.addEventListener(t,e);var n=function(){return o.gridOptionsService.removeEventListener(t,e),o.destroyFunctions=o.destroyFunctions.filter(function(t){return t!==n}),null};return this.destroyFunctions.push(n),n},t.prototype.addManagedPropertyListener=function(t,e){return this.destroyed?function(){return null}:this.setupGridOptionListener(t,e)},t.prototype.addManagedPropertyListeners=function(t,e){var o=this;if(!this.destroyed){var n=t.join("-")+this.propertyListenerId++,r=function(t){if(t.changeSet){if(t.changeSet&&t.changeSet.id===o.lastChangeSetIdLookup[n])return;o.lastChangeSetIdLookup[n]=t.changeSet.id}var r={type:"gridPropertyChanged",changeSet:t.changeSet,source:t.source};e(r)};t.forEach(function(t){return o.setupGridOptionListener(t,r)})}},t.prototype.addDestroyFunc=function(t){this.isAlive()?this.destroyFunctions.push(t):t()},t.prototype.createManagedBean=function(t,e){var o=this.createBean(t,e);return this.addDestroyFunc(this.destroyBean.bind(this,t,e)),o},t.prototype.createBean=function(t,e,o){return(e||this.getContext()).createBean(t,o)},t.prototype.destroyBean=function(t,e){return(e||this.getContext()).destroyBean(t)},t.prototype.destroyBeans=function(t,e){var o=this;return t&&t.forEach(function(t){return o.destroyBean(t,e)}),[]},t.EVENT_DESTROYED="destroyed",Vt([J("frameworkOverrides")],t.prototype,"frameworkOverrides",void 0),Vt([J("context")],t.prototype,"context",void 0),Vt([J("eventService")],t.prototype,"eventService",void 0),Vt([J("gridOptionsService")],t.prototype,"gridOptionsService",void 0),Vt([J("localeService")],t.prototype,"localeService",void 0),Vt([J("environment")],t.prototype,"environment",void 0),Vt([Z],t.prototype,"destroy",null),t}(),zt=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ht=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},jt=function(t,e){return function(o,n){e(o,n,t)}},Ut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zt(e,t),e.prototype.setBeans=function(t){this.logger=t.create("ColumnFactory")},e.prototype.createColumnTree=function(t,e,o,n){var r=new h,i=this.extractExistingTreeData(o),a=i.existingCols,s=i.existingGroups,l=i.existingColKeys;r.addExistingKeys(l);var u=this.recursivelyCreateColumns(t,0,e,a,r,s,n),c=this.findMaxDept(u,0);this.logger.log("Number of levels for grouped columns is "+c);var p=this.balanceColumnTree(u,0,c,r);return this.columnUtils.depthFirstOriginalTreeSearch(null,p,function(t,e){t instanceof dt&&t.setupExpandable(),t.setOriginalParent(e)}),{columnTree:p,treeDept:c}},e.prototype.extractExistingTreeData=function(t){var e=[],o=[],n=[];return t&&this.columnUtils.depthFirstOriginalTreeSearch(null,t,function(t){if(t instanceof dt){var r=t;o.push(r)}else{var i=t;n.push(i.getId()),e.push(i)}}),{existingCols:e,existingGroups:o,existingColKeys:n}},e.prototype.createForAutoGroups=function(t,e){var o=this;return t.map(function(t){return o.createAutoGroupTreeItem(e,t)})},e.prototype.createAutoGroupTreeItem=function(t,e){for(var o=this.findDepth(t),n=e,r=o-1;r>=0;r--){var i=new dt(null,"FAKE_PATH_".concat(e.getId(),"}_").concat(r),!0,r);this.createBean(i),i.setChildren([n]),n.setOriginalParent(i),n=i}return 0===o&&e.setOriginalParent(null),n},e.prototype.findDepth=function(t){for(var e=0,o=t;o&&o[0]&&o[0]instanceof dt;)e++,o=o[0].getChildren();return e},e.prototype.balanceColumnTree=function(t,e,o,n){for(var r=[],i=0;i<t.length;i++){var a=t[i];if(a instanceof dt){var s=a,l=this.balanceColumnTree(s.getChildren(),e+1,o,n);s.setChildren(l),r.push(s)}else{for(var u=void 0,c=void 0,p=o-1;p>=e;p--){var d=n.getUniqueKey(null,null),h=this.createMergedColGroupDef(null),f=new dt(h,d,!0,e);this.createBean(f),c&&c.setChildren([f]),c=f,u||(u=c)}if(u&&c){if(r.push(u),t.some(function(t){return t instanceof dt})){c.setChildren([a]);continue}c.setChildren(t);break}r.push(a)}}return r},e.prototype.findMaxDept=function(t,e){for(var o=e,n=0;n<t.length;n++){var r=t[n];if(r instanceof dt){var i=r,a=this.findMaxDept(i.getChildren(),e+1);o<a&&(o=a)}}return o},e.prototype.recursivelyCreateColumns=function(t,e,o,n,r,i,a){if(!t)return[];for(var s=new Array(t.length),l=0;l<s.length;l++){var u=t[l];this.isColumnGroup(u)?s[l]=this.createColumnGroup(o,u,e,n,r,i,a):s[l]=this.createColumn(o,u,n,r,a)}return s},e.prototype.createColumnGroup=function(t,e,o,n,r,i,a){var s=this.createMergedColGroupDef(e),l=r.getUniqueKey(s.groupId||null,null),u=new dt(s,l,!1,o);this.createBean(u);var c=this.findExistingGroup(e,i);c&&i.splice(c.idx,1);var p=null===c||void 0===c?void 0:c.group;p&&u.setExpanded(p.isExpanded());var d=this.recursivelyCreateColumns(s.children,o+1,t,n,r,i,a);return u.setChildren(d),u},e.prototype.createMergedColGroupDef=function(t){var e={};return Object.assign(e,this.gridOptionsService.get("defaultColGroupDef")),Object.assign(e,t),e},e.prototype.createColumn=function(t,e,o,n,r){var i=this.findExistingColumn(e,o);i&&(null===o||void 0===o||o.splice(i.idx,1));var a=null===i||void 0===i?void 0:i.column;if(a){l=this.addColumnDefaultAndTypes(e,a.getColId());a.setColDef(l,e,r),this.applyColumnState(a,l,r)}else{var s=n.getUniqueKey(e.colId,e.field),l=this.addColumnDefaultAndTypes(e,s);a=new ct(l,e,s,t),this.context.createBean(a)}return this.dataTypeService.addColumnListeners(a),a},e.prototype.applyColumnState=function(t,e,o){var n=l(e.flex);if(void 0!==n&&t.setFlex(n),t.getFlex()<=0){var r=l(e.width);if(null!=r)t.setActualWidth(r,o);else{var i=t.getActualWidth();t.setActualWidth(i,o)}}void 0!==e.sort&&("asc"==e.sort||"desc"==e.sort?t.setSort(e.sort,o):t.setSort(void 0,o));var a=l(e.sortIndex);void 0!==a&&t.setSortIndex(a);var s=u(e.hide);void 0!==s&&t.setVisible(!s,o),void 0!==e.pinned&&t.setPinned(e.pinned)},e.prototype.findExistingColumn=function(t,e){if(e)for(var o=0;o<e.length;o++){var n=e[o].getUserProvidedColDef();if(n)if(null!=t.colId){if(e[o].getId()===t.colId)return{idx:o,column:e[o]}}else if(null!=t.field){if(n.field===t.field)return{idx:o,column:e[o]}}else if(n===t)return{idx:o,column:e[o]}}},e.prototype.findExistingGroup=function(t,e){if(null!=t.groupId)for(var o=0;o<e.length;o++){var n=e[o];if(n.getColGroupDef()&&n.getId()===t.groupId)return{idx:o,group:n}}},e.prototype.addColumnDefaultAndTypes=function(t,e){var o={};_(o,this.gridOptionsService.get("defaultColDef"),!1,!0);var n=this.dataTypeService.updateColDefAndGetColumnType(o,t,e);n&&this.assignColumnTypes(n,o),_(o,t,!1,!0);var r=this.gridOptionsService.get("autoGroupColumnDef"),i=this.gridOptionsService.isColumnsSortingCoupledToGroup();return t.rowGroup&&r&&i&&_(o,{sort:r.sort,initialSort:r.initialSort},!1,!0),this.dataTypeService.validateColDef(o),o},e.prototype.assignColumnTypes=function(t,e){if(t.length){var o=Object.assign({},ht);y(this.gridOptionsService.get("columnTypes")||{},function(t,e){t in o?console.warn("AG Grid: the column type '".concat(t,"' is a default column type and cannot be overridden.")):(e.type&&O("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),o[t]=e)}),t.forEach(function(t){var n=o[t.trim()];n?_(e,n,!1,!0):console.warn("AG Grid: colDef.type '"+t+"' does not correspond to defined gridOptions.columnTypes")})}},e.prototype.isColumnGroup=function(t){return void 0!==t.children},Ht([J("columnUtils")],e.prototype,"columnUtils",void 0),Ht([J("dataTypeService")],e.prototype,"dataTypeService",void 0),Ht([jt(0,tt("loggerFactory"))],e.prototype,"setBeans",null),e=Ht([X("columnFactory")],e)}(Bt),Wt=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Kt=function(){function t(t,e,o,n){this.displayedChildren=[],this.localEventService=new rt,this.groupId=e,this.partId=o,this.providedColumnGroup=t,this.pinned=n}return t.createUniqueId=function(t,e){return t+"_"+e},t.prototype.reset=function(){this.parent=null,this.children=null,this.displayedChildren=null},t.prototype.getParent=function(){return this.parent},t.prototype.setParent=function(t){this.parent=t},t.prototype.getUniqueId=function(){return t.createUniqueId(this.groupId,this.partId)},t.prototype.isEmptyGroup=function(){return 0===this.displayedChildren.length},t.prototype.isMoving=function(){var t=this.getProvidedColumnGroup().getLeafColumns();return!(!t||0===t.length)&&t.every(function(t){return t.isMoving()})},t.prototype.checkLeft=function(){if(this.displayedChildren.forEach(function(e){e instanceof t&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gridOptionsService.get("enableRtl")){var e=ft(this.displayedChildren).getLeft();this.setLeft(e)}else{var o=this.displayedChildren[0].getLeft();this.setLeft(o)}else this.setLeft(null)},t.prototype.getLeft=function(){return this.left},t.prototype.getOldLeft=function(){return this.oldLeft},t.prototype.setLeft=function(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.localEventService.dispatchEvent(this.createAgEvent(t.EVENT_LEFT_CHANGED)))},t.prototype.getPinned=function(){return this.pinned},t.prototype.createAgEvent=function(t){return{type:t}},t.prototype.addEventListener=function(t,e){this.localEventService.addEventListener(t,e)},t.prototype.removeEventListener=function(t,e){this.localEventService.removeEventListener(t,e)},t.prototype.getGroupId=function(){return this.groupId},t.prototype.getPartId=function(){return this.partId},t.prototype.isChildInThisGroupDeepSearch=function(e){var o=!1;return this.children.forEach(function(n){e===n&&(o=!0),n instanceof t&&n.isChildInThisGroupDeepSearch(e)&&(o=!0)}),o},t.prototype.getActualWidth=function(){var t=0;return this.displayedChildren&&this.displayedChildren.forEach(function(e){t+=e.getActualWidth()}),t},t.prototype.isResizable=function(){if(!this.displayedChildren)return!1;var t=!1;return this.displayedChildren.forEach(function(e){e.isResizable()&&(t=!0)}),t},t.prototype.getMinWidth=function(){var t=0;return this.displayedChildren.forEach(function(e){t+=e.getMinWidth()||0}),t},t.prototype.addChild=function(t){this.children||(this.children=[]),this.children.push(t)},t.prototype.getDisplayedChildren=function(){return this.displayedChildren},t.prototype.getLeafColumns=function(){var t=[];return this.addLeafColumns(t),t},t.prototype.getDisplayedLeafColumns=function(){var t=[];return this.addDisplayedLeafColumns(t),t},t.prototype.getDefinition=function(){return this.providedColumnGroup.getColGroupDef()},t.prototype.getColGroupDef=function(){return this.providedColumnGroup.getColGroupDef()},t.prototype.isPadding=function(){return this.providedColumnGroup.isPadding()},t.prototype.isExpandable=function(){return this.providedColumnGroup.isExpandable()},t.prototype.isExpanded=function(){return this.providedColumnGroup.isExpanded()},t.prototype.setExpanded=function(t){this.providedColumnGroup.setExpanded(t)},t.prototype.addDisplayedLeafColumns=function(e){this.displayedChildren.forEach(function(o){o instanceof ct?e.push(o):o instanceof t&&o.addDisplayedLeafColumns(e)})},t.prototype.addLeafColumns=function(e){this.children.forEach(function(o){o instanceof ct?e.push(o):o instanceof t&&o.addLeafColumns(e)})},t.prototype.getChildren=function(){return this.children},t.prototype.getColumnGroupShow=function(){return this.providedColumnGroup.getColumnGroupShow()},t.prototype.getProvidedColumnGroup=function(){return this.providedColumnGroup},t.prototype.getPaddingLevel=function(){var t=this.getParent();return this.isPadding()&&t&&t.isPadding()?1+t.getPaddingLevel():0},t.prototype.calculateDisplayedColumns=function(){var e=this;this.displayedChildren=[];for(var o=this;null!=o&&o.isPadding();)o=o.getParent();if(!(!!o&&o.providedColumnGroup.isExpandable()))return this.displayedChildren=this.children,void this.localEventService.dispatchEvent(this.createAgEvent(t.EVENT_DISPLAYED_CHILDREN_CHANGED));this.children.forEach(function(n){if(!(n instanceof t&&(!n.displayedChildren||!n.displayedChildren.length)))switch(n.getColumnGroupShow()){case"open":o.providedColumnGroup.isExpanded()&&e.displayedChildren.push(n);break;case"closed":o.providedColumnGroup.isExpanded()||e.displayedChildren.push(n);break;default:e.displayedChildren.push(n)}}),this.localEventService.dispatchEvent(this.createAgEvent(t.EVENT_DISPLAYED_CHILDREN_CHANGED))},t.EVENT_LEFT_CHANGED="leftChanged",t.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged",Wt([J("gridOptionsService")],t.prototype,"gridOptionsService",void 0),t}(),qt=function(){function t(){}return t.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged",t.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded",t.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged",t.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",t.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll",t.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged",t.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged",t.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged",t.EVENT_COLUMN_MOVED="columnMoved",t.EVENT_COLUMN_VISIBLE="columnVisible",t.EVENT_COLUMN_PINNED="columnPinned",t.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened",t.EVENT_COLUMN_RESIZED="columnResized",t.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged",t.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED="suppressMovableColumns",t.EVENT_SUPPRESS_MENU_HIDE_CHANGED="suppressMenuHide",t.EVENT_SUPPRESS_FIELD_DOT_NOTATION="suppressFieldDotNotation",t.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged",t.EVENT_COLUMN_HEADER_MOUSE_OVER="columnHeaderMouseOver",t.EVENT_COLUMN_HEADER_MOUSE_LEAVE="columnHeaderMouseLeave",t.EVENT_COLUMN_HEADER_CLICKED="columnHeaderClicked",t.EVENT_COLUMN_HEADER_CONTEXT_MENU="columnHeaderContextMenu",t.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed",t.EVENT_ROW_GROUP_OPENED="rowGroupOpened",t.EVENT_ROW_DATA_UPDATED="rowDataUpdated",t.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged",t.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged",t.EVENT_CHART_CREATED="chartCreated",t.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged",t.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged",t.EVENT_CHART_DESTROYED="chartDestroyed",t.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged",t.EVENT_TOOL_PANEL_SIZE_CHANGED="toolPanelSizeChanged",t.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart",t.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd",t.EVENT_MODEL_UPDATED="modelUpdated",t.EVENT_CUT_START="cutStart",t.EVENT_CUT_END="cutEnd",t.EVENT_PASTE_START="pasteStart",t.EVENT_PASTE_END="pasteEnd",t.EVENT_FILL_START="fillStart",t.EVENT_FILL_END="fillEnd",t.EVENT_RANGE_DELETE_START="rangeDeleteStart",t.EVENT_RANGE_DELETE_END="rangeDeleteEnd",t.EVENT_UNDO_STARTED="undoStarted",t.EVENT_UNDO_ENDED="undoEnded",t.EVENT_REDO_STARTED="redoStarted",t.EVENT_REDO_ENDED="redoEnded",t.EVENT_KEY_SHORTCUT_CHANGED_CELL_START="keyShortcutChangedCellStart",t.EVENT_KEY_SHORTCUT_CHANGED_CELL_END="keyShortcutChangedCellEnd",t.EVENT_CELL_CLICKED="cellClicked",t.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked",t.EVENT_CELL_MOUSE_DOWN="cellMouseDown",t.EVENT_CELL_CONTEXT_MENU="cellContextMenu",t.EVENT_CELL_VALUE_CHANGED="cellValueChanged",t.EVENT_CELL_EDIT_REQUEST="cellEditRequest",t.EVENT_ROW_VALUE_CHANGED="rowValueChanged",t.EVENT_CELL_FOCUSED="cellFocused",t.EVENT_CELL_FOCUS_CLEARED="cellFocusCleared",t.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused",t.EVENT_ROW_SELECTED="rowSelected",t.EVENT_SELECTION_CHANGED="selectionChanged",t.EVENT_TOOLTIP_SHOW="tooltipShow",t.EVENT_TOOLTIP_HIDE="tooltipHide",t.EVENT_CELL_KEY_DOWN="cellKeyDown",t.EVENT_CELL_MOUSE_OVER="cellMouseOver",t.EVENT_CELL_MOUSE_OUT="cellMouseOut",t.EVENT_FILTER_CHANGED="filterChanged",t.EVENT_FILTER_MODIFIED="filterModified",t.EVENT_FILTER_OPENED="filterOpened",t.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED="advancedFilterBuilderVisibleChanged",t.EVENT_SORT_CHANGED="sortChanged",t.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved",t.EVENT_ROW_CLICKED="rowClicked",t.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked",t.EVENT_GRID_READY="gridReady",t.EVENT_GRID_PRE_DESTROYED="gridPreDestroyed",t.EVENT_GRID_SIZE_CHANGED="gridSizeChanged",t.EVENT_VIEWPORT_CHANGED="viewportChanged",t.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged",t.EVENT_FIRST_DATA_RENDERED="firstDataRendered",t.EVENT_DRAG_STARTED="dragStarted",t.EVENT_DRAG_STOPPED="dragStopped",t.EVENT_CHECKBOX_CHANGED="checkboxChanged",t.EVENT_ROW_EDITING_STARTED="rowEditingStarted",t.EVENT_ROW_EDITING_STOPPED="rowEditingStopped",t.EVENT_CELL_EDITING_STARTED="cellEditingStarted",t.EVENT_CELL_EDITING_STOPPED="cellEditingStopped",t.EVENT_BODY_SCROLL="bodyScroll",t.EVENT_BODY_SCROLL_END="bodyScrollEnd",t.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged",t.EVENT_PAGINATION_CHANGED="paginationChanged",t.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged",t.EVENT_STORE_REFRESHED="storeRefreshed",t.EVENT_STATE_UPDATED="stateUpdated",t.EVENT_COLUMN_MENU_VISIBLE_CHANGED="columnMenuVisibleChanged",t.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged",t.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED="columnContainerWidthChanged",t.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged",t.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged",t.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged",t.EVENT_FLASH_CELLS="flashCells",t.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged",t.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged",t.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged",t.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged",t.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged",t.EVENT_HEADER_HEIGHT_CHANGED="headerHeightChanged",t.EVENT_COLUMN_HEADER_HEIGHT_CHANGED="columnHeaderHeightChanged",t.EVENT_ROW_DRAG_ENTER="rowDragEnter",t.EVENT_ROW_DRAG_MOVE="rowDragMove",t.EVENT_ROW_DRAG_LEAVE="rowDragLeave",t.EVENT_ROW_DRAG_END="rowDragEnd",t.EVENT_GRID_STYLES_CHANGED="gridStylesChanged",t.EVENT_POPUP_TO_FRONT="popupToFront",t.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest",t.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest",t.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest",t.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest",t.EVENT_STORE_UPDATED="storeUpdated",t.EVENT_FILTER_DESTROYED="filterDestroyed",t.EVENT_ROW_DATA_UPDATE_STARTED="rowDataUpdateStarted",t.EVENT_ROW_COUNT_READY="rowCountReady",t.EVENT_ADVANCED_FILTER_ENABLED_CHANGED="advancedFilterEnabledChanged",t.EVENT_DATA_TYPES_INFERRED="dataTypesInferred",t.EVENT_FIELD_VALUE_CHANGED="fieldValueChanged",t.EVENT_FIELD_PICKER_VALUE_SELECTED="fieldPickerValueSelected",t.EVENT_SIDE_BAR_UPDATED="sideBarUpdated",t}(),Yt=function(){function t(){this.existingIds={}}return t.prototype.getInstanceIdForKey=function(t){var e,o=this.existingIds[t];return e="number"!==typeof o?0:o+1,this.existingIds[t]=e,e},t}(),Zt=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Xt=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Jt="ag-Grid-AutoColumn",Qt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Zt(e,t),e.prototype.createAutoGroupColumns=function(t){var e=this,o=[],n=this.gridOptionsService.get("treeData"),r=this.gridOptionsService.isGroupMultiAutoColumn();return n&&r&&(console.warn('AG Grid: you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data'),r=!1),r?t.forEach(function(t,n){o.push(e.createOneAutoGroupColumn(t,n))}):o.push(this.createOneAutoGroupColumn()),o},e.prototype.updateAutoGroupColumns=function(t,e){var o=this;t.forEach(function(t,n){return o.updateOneAutoGroupColumn(t,n,e)})},e.prototype.createOneAutoGroupColumn=function(t,e){var o;o=t?"".concat(Jt,"-").concat(t.getId()):Jt;var n=this.createAutoGroupColDef(o,t,e);n.colId=o;var r=new ct(n,null,o,!0);return this.context.createBean(r),r},e.prototype.updateOneAutoGroupColumn=function(t,e,o){var n=t.getColDef(),r="string"==typeof n.showRowGroup?n.showRowGroup:void 0,i=null!=r?this.columnModel.getPrimaryColumn(r):void 0,a=this.createAutoGroupColDef(t.getId(),null!==i&&void 0!==i?i:void 0,e);t.setColDef(a,null,o),this.columnFactory.applyColumnState(t,a,o)},e.prototype.createAutoGroupColDef=function(t,e,o){var n=this.createBaseColDef(e);(_(n,this.gridOptionsService.get("autoGroupColumnDef")),n=this.columnFactory.addColumnDefaultAndTypes(n,t),this.gridOptionsService.get("treeData"))||i(n.field)&&i(n.valueGetter)&&i(n.filterValueGetter)&&"agGroupColumnFilter"!==n.filter&&(n.filter=!1);o&&o>0&&(n.headerCheckboxSelection=!1);var r=this.gridOptionsService.isColumnsSortingCoupledToGroup(),a=n.valueGetter||null!=n.field;return r&&!a&&(n.sortIndex=void 0,n.initialSort=void 0),n},e.prototype.createBaseColDef=function(t){var e=this.gridOptionsService.get("autoGroupColumnDef"),o={headerName:this.localeService.getLocaleTextFunc()("group","Group")};if(e&&(e.cellRenderer||e.cellRendererSelector)||(o.cellRenderer="agGroupCellRenderer"),t){var n=t.getColDef();Object.assign(o,{headerName:this.columnModel.getDisplayNameForColumn(t,"header"),headerValueGetter:n.headerValueGetter}),n.cellRenderer&&Object.assign(o,{cellRendererParams:{innerRenderer:n.cellRenderer,innerRendererParams:n.cellRendererParams}}),o.showRowGroup=t.getColId()}else o.showRowGroup=!0;return o},Xt([J("columnModel")],e.prototype,"columnModel",void 0),Xt([J("columnFactory")],e.prototype,"columnFactory",void 0),e=Xt([X("autoGroupColService")],e)}(Bt),$t=/[&<>"']/g,te={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ee(t,e){if(null==t)return null;var o=t.toString().toString();return e?o:o.replace($t,function(t){return te[t]})}function oe(t){if(!t||null==t)return null;return t.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z])([a-z])/g,"$1 $2$3").replace(/\./g," ").split(" ").map(function(t){return t.substring(0,1).toUpperCase()+(t.length>1?t.substring(1,t.length):"")}).join(" ")}function ne(t){return t.replace(/[A-Z]/g,function(t){return"-".concat(t.toLocaleLowerCase())})}var re=Object.freeze({__proto__:null,utf8_encode:function(t){var e=String.fromCharCode;function o(t,o){return e(t>>o&63|128)}function n(t){if(t>=0&&t<=31&&10!==t){var n=t.toString(16).toUpperCase().padStart(4,"0");return"_x".concat(n,"_")}if(0==(4294967168&t))return e(t);var r="";return 0==(4294965248&t)?r=e(t>>6&31|192):0==(4294901760&t)?(function(t){if(t>=55296&&t<=57343)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}(t),r=e(t>>12&15|224),r+=o(t,6)):0==(4292870144&t)&&(r=e(t>>18&7|240),r+=o(t,12),r+=o(t,6)),r+=e(63&t|128)}for(var r=function(t){var e=[];if(!t)return[];for(var o,n,r=t.length,i=0;i<r;)(o=t.charCodeAt(i++))>=55296&&o<=56319&&i<r?56320==(64512&(n=t.charCodeAt(i++)))?e.push(((1023&o)<<10)+(1023&n)+65536):(e.push(o),i--):e.push(o);return e}(t),i=r.length,a=-1,s="";++a<i;)s+=n(r[a]);return s},capitalise:function(t){return t[0].toUpperCase()+t.substring(1).toLowerCase()},escapeString:ee,camelCaseToHumanText:oe,camelCaseToHyphenated:ne});function ie(t){var e=new Map;return t.forEach(function(t){return e.set(t[0],t[1])}),e}var ae=Object.freeze({__proto__:null,convertToMap:ie,mapById:function(t,e){var o=new Map;return t.forEach(function(t){return o.set(e(t),t)}),o},keys:function(t){var e=[];return t.forEach(function(t,o){return e.push(o)}),e}}),se=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),le=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},ue=function(t,e){return function(o,n){e(o,n,t)}},ce=function(t,e){var o={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(o[n[r]]=t[n[r]])}return o},pe=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},de=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},he=function(t){var e="function"===typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fe=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.primaryHeaderRowCount=0,e.secondaryHeaderRowCount=0,e.gridHeaderRowCount=0,e.displayedColumnsLeft=[],e.displayedColumnsRight=[],e.displayedColumnsCenter=[],e.displayedColumns=[],e.displayedColumnsAndGroupsMap={},e.viewportColumns=[],e.viewportColumnsHash="",e.headerViewportColumns=[],e.viewportColumnsCenter=[],e.headerViewportColumnsCenter=[],e.viewportRowLeft={},e.viewportRowRight={},e.viewportRowCenter={},e.autoHeightActiveAtLeastOnce=!1,e.rowGroupColumns=[],e.valueColumns=[],e.pivotColumns=[],e.ready=!1,e.changeEventsDispatching=!1,e.autoGroupsNeedBuilding=!1,e.forceRecreateAutoGroups=!1,e.pivotMode=!1,e.bodyWidth=0,e.leftWidth=0,e.rightWidth=0,e.bodyWidthDirty=!0,e.shouldQueueResizeOperations=!1,e.resizeOperationQueue=[],e}return se(e,t),e.prototype.init=function(){var t=this;this.suppressColumnVirtualisation=this.gridOptionsService.get("suppressColumnVirtualisation");var e=this.gridOptionsService.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],function(e){return t.buildAutoGroupColumns(ge(e.source))}),this.addManagedPropertyListener("autoGroupColumnDef",function(e){return t.onAutoGroupColumnDefChanged(ge(e.source))}),this.addManagedPropertyListeners(["defaultColDef","columnTypes","suppressFieldDotNotation"],function(e){return t.onSharedColDefChanged(ge(e.source))}),this.addManagedPropertyListener("pivotMode",function(e){return t.setPivotMode(t.gridOptionsService.get("pivotMode"),ge(e.source))}),this.addManagedListener(this.eventService,qt.EVENT_FIRST_DATA_RENDERED,function(){return t.onFirstDataRendered()})},e.prototype.buildAutoGroupColumns=function(t){this.columnDefs&&(this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns(t))},e.prototype.onAutoGroupColumnDefChanged=function(t){this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,t)},e.prototype.onSharedColDefChanged=function(t){this.gridColumns&&(this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,t),this.createColumnsFromColumnDefs(!0,t))},e.prototype.setColumnDefs=function(t,e){var o=!!this.columnDefs;this.columnDefs=t,this.createColumnsFromColumnDefs(o,e)},e.prototype.recreateColumnDefs=function(t){this.onSharedColDefChanged(t)},e.prototype.destroyOldColumns=function(t,e){var o={};if(t){this.columnUtils.depthFirstOriginalTreeSearch(null,t,function(t){o[t.getInstanceId()]=t}),e&&this.columnUtils.depthFirstOriginalTreeSearch(null,e,function(t){o[t.getInstanceId()]=null});var n=Object.values(o).filter(function(t){return null!=t});this.destroyBeans(n)}},e.prototype.destroyColumns=function(){this.destroyOldColumns(this.primaryColumnTree),this.destroyOldColumns(this.secondaryBalancedTree),this.destroyOldColumns(this.groupAutoColsBalancedTree)},e.prototype.createColumnsFromColumnDefs=function(t,e){var o=this,n=t?this.compareColumnStatesAndDispatchEvents(e):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;var r=this.primaryColumns,i=this.primaryColumnTree,a=this.columnFactory.createColumnTree(this.columnDefs,!0,i,e);this.destroyOldColumns(this.primaryColumnTree,a.columnTree),this.primaryColumnTree=a.columnTree,this.primaryHeaderRowCount=a.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach(function(t){return o.primaryColumnsMap[t.getId()]=t}),this.extractRowGroupColumns(e,r),this.extractPivotColumns(e,r),this.extractValueColumns(e,r),this.ready=!0;var s=void 0===this.gridColsArePrimary;(this.gridColsArePrimary||s||this.autoGroupsNeedBuilding)&&(this.updateGridColumns(),t&&this.gridColsArePrimary&&!this.gridOptionsService.get("maintainColumnOrder")&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(e),this.checkViewportColumns()),this.dispatchEverythingChanged(e),this.changeEventsDispatching=!0,n&&n(),this.changeEventsDispatching=!1,this.dispatchNewColumnsLoaded(e)},e.prototype.shouldRowModelIgnoreRefresh=function(){return this.changeEventsDispatching},e.prototype.dispatchNewColumnsLoaded=function(t){var e={type:qt.EVENT_NEW_COLUMNS_LOADED,source:t};this.eventService.dispatchEvent(e),"gridInitializing"===t&&this.onColumnsReady()},e.prototype.dispatchEverythingChanged=function(t){var e={type:qt.EVENT_COLUMN_EVERYTHING_CHANGED,source:t};this.eventService.dispatchEvent(e)},e.prototype.orderGridColumnsLikePrimary=function(){var t=this,e=this.primaryColumns;if(e){var o=e.filter(function(e){return t.gridColumns.indexOf(e)>=0}),n=this.gridColumns.filter(function(t){return o.indexOf(t)<0});this.gridColumns=de(de([],pe(n),!1),pe(o),!1),this.gridColumns=this.placeLockedColumns(this.gridColumns)}},e.prototype.getAllDisplayedAutoHeightCols=function(){return this.displayedAutoHeightCols},e.prototype.setViewport=function(){this.gridOptionsService.get("enableRtl")?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)},e.prototype.getDisplayedColumnsStartingAt=function(t){for(var e=t,o=[];null!=e;)o.push(e),e=this.getDisplayedColAfter(e);return o},e.prototype.checkViewportColumns=function(t){if((void 0===t&&(t=!1),null!=this.displayedColumnsCenter)&&this.extractViewport()){var e={type:qt.EVENT_VIRTUAL_COLUMNS_CHANGED,afterScroll:t};this.eventService.dispatchEvent(e)}},e.prototype.setViewportPosition=function(t,e,o){void 0===o&&(o=!1),(t!==this.scrollWidth||e!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=t,this.scrollPosition=e,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns(o))},e.prototype.isPivotMode=function(){return this.pivotMode},e.prototype.isPivotSettingAllowed=function(t){return!t||!this.gridOptionsService.get("treeData")||(console.warn("AG Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'"),!1)},e.prototype.setPivotMode=function(t,e){if(t!==this.pivotMode&&this.isPivotSettingAllowed(this.pivotMode)&&(this.pivotMode=t,this.gridColumns)){this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(e);var o={type:qt.EVENT_COLUMN_PIVOT_MODE_CHANGED};this.eventService.dispatchEvent(o)}},e.prototype.getSecondaryPivotColumn=function(t,e){if(i(this.secondaryColumns))return null;var o=this.getPrimaryColumn(e),n=null;return this.secondaryColumns.forEach(function(e){var r=e.getColDef().pivotKeys,i=e.getColDef().pivotValueColumn;gt(r,t)&&i===o&&(n=e)}),n},e.prototype.setBeans=function(t){this.logger=t.create("columnModel")},e.prototype.setFirstRightAndLastLeftPinned=function(t){var e,o;this.gridOptionsService.get("enableRtl")?(e=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,o=this.displayedColumnsRight?ft(this.displayedColumnsRight):null):(e=this.displayedColumnsLeft?ft(this.displayedColumnsLeft):null,o=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach(function(n){n.setLastLeftPinned(n===e,t),n.setFirstRightPinned(n===o,t)})},e.prototype.autoSizeColumns=function(t){var e=this;if(this.shouldQueueResizeOperations)this.resizeOperationQueue.push(function(){return e.autoSizeColumns(t)});else{var o=t.columns,n=t.skipHeader,r=t.skipHeaderGroups,i=t.stopAtGroup,a=t.source,s=void 0===a?"api":a;this.animationFrameService.flushAllFrames();for(var l=[],u=-1,c=null!=n?n:this.gridOptionsService.get("skipHeaderOnAutoSize"),p=null!=r?r:c;0!==u;)u=0,this.actionOnGridColumns(o,function(t){if(l.indexOf(t)>=0)return!1;var o=e.autoWidthCalculator.getPreferredWidthForColumn(t,c);if(o>0){var n=e.normaliseColumnWidth(t,o);t.setActualWidth(n,s),l.push(t),u++}return!0},s);p||this.autoSizeColumnGroupsByColumns(o,s,i),this.dispatchColumnResizedEvent(l,!0,"autosizeColumns")}},e.prototype.dispatchColumnResizedEvent=function(t,e,o,n){if(void 0===n&&(n=null),t&&t.length){var r={type:qt.EVENT_COLUMN_RESIZED,columns:t,column:1===t.length?t[0]:null,flexColumns:n,finished:e,source:o};this.eventService.dispatchEvent(r)}},e.prototype.dispatchColumnChangedEvent=function(t,e,o){var n={type:t,columns:e,column:e&&1==e.length?e[0]:null,source:o};this.eventService.dispatchEvent(n)},e.prototype.dispatchColumnMovedEvent=function(t){var e=t.movedColumns,o=t.source,n=t.toIndex,r=t.finished,i={type:qt.EVENT_COLUMN_MOVED,columns:e,column:e&&1===e.length?e[0]:null,toIndex:n,finished:r,source:o};this.eventService.dispatchEvent(i)},e.prototype.dispatchColumnPinnedEvent=function(t,e){if(t.length){var o=1===t.length?t[0]:null,n=this.getCommonValue(t,function(t){return t.getPinned()}),r={type:qt.EVENT_COLUMN_PINNED,pinned:null!=n?n:null,columns:t,column:o,source:e};this.eventService.dispatchEvent(r)}},e.prototype.dispatchColumnVisibleEvent=function(t,e){if(t.length){var o=1===t.length?t[0]:null,n=this.getCommonValue(t,function(t){return t.isVisible()}),r={type:qt.EVENT_COLUMN_VISIBLE,visible:n,columns:t,column:o,source:e};this.eventService.dispatchEvent(r)}},e.prototype.autoSizeColumn=function(t,e,o){t&&this.autoSizeColumns({columns:[t],skipHeader:o,skipHeaderGroups:!0,source:e})},e.prototype.autoSizeColumnGroupsByColumns=function(t,e,o){var n,r,i,a,s,l=new Set;this.getGridColumns(t).forEach(function(t){for(var e=t.getParent();e&&e!=o;)e.isPadding()||l.add(e),e=e.getParent()});try{for(var u=he(l),c=u.next();!c.done;c=u.next()){var p=c.value;try{for(var d=(i=void 0,he(this.ctrlsService.getHeaderRowContainerCtrls())),h=d.next();!h.done;h=d.next()){if(s=h.value.getHeaderCtrlForColumn(p))break}}catch(f){i={error:f}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}s&&s.resizeLeafColumnsToFit(e)}}catch(g){n={error:g}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return[]},e.prototype.autoSizeAllColumns=function(t,e){var o=this;if(this.shouldQueueResizeOperations)this.resizeOperationQueue.push(function(){return o.autoSizeAllColumns(t,e)});else{var n=this.getAllDisplayedColumns();this.autoSizeColumns({columns:n,skipHeader:e,source:t})}},e.prototype.getColumnsFromTree=function(t){var e=[],o=function(t){for(var n=0;n<t.length;n++){var r=t[n];r instanceof ct?e.push(r):r instanceof dt&&o(r.getChildren())}};return o(t),e},e.prototype.getAllDisplayedTrees=function(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null},e.prototype.getPrimaryColumnTree=function(){return this.primaryColumnTree},e.prototype.getHeaderRowCount=function(){return this.gridHeaderRowCount},e.prototype.getDisplayedTreeLeft=function(){return this.displayedTreeLeft},e.prototype.getDisplayedTreeRight=function(){return this.displayedTreeRight},e.prototype.getDisplayedTreeCentre=function(){return this.displayedTreeCentre},e.prototype.isColumnDisplayed=function(t){return this.getAllDisplayedColumns().indexOf(t)>=0},e.prototype.getAllDisplayedColumns=function(){return this.displayedColumns},e.prototype.getViewportColumns=function(){return this.viewportColumns},e.prototype.getDisplayedLeftColumnsForRow=function(t){return this.colSpanActive?this.getDisplayedColumnsForRow(t,this.displayedColumnsLeft):this.displayedColumnsLeft},e.prototype.getDisplayedRightColumnsForRow=function(t){return this.colSpanActive?this.getDisplayedColumnsForRow(t,this.displayedColumnsRight):this.displayedColumnsRight},e.prototype.isColSpanActive=function(){return this.colSpanActive},e.prototype.getDisplayedColumnsForRow=function(t,e,o,n){for(var r,i=[],a=null,s=function(s){var l,u=e[s],c=e.length-s,p=Math.min(u.getColSpan(t),c),d=[u];if(p>1){for(var h=p-1,f=1;f<=h;f++)d.push(e[s+f]);s+=h}if(o?(l=!1,d.forEach(function(t){o(t)&&(l=!0)})):l=!0,l){if(0===i.length&&a)!!n&&n(u)&&i.push(a);i.push(u)}a=u,r=s},l=0;l<e.length;l++)s(l),l=r;return i},e.prototype.getViewportCenterColumnsForRow=function(t){var e=this;if(!this.colSpanActive)return this.viewportColumnsCenter;var o=this.isColumnVirtualisationSuppressed()?null:this.isColumnInRowViewport.bind(this);return this.getDisplayedColumnsForRow(t,this.displayedColumnsCenter,o,function(t){var o=t.getLeft();return r(o)&&o>e.viewportLeft})},e.prototype.isColumnAtEdge=function(t,e){var o=this.getAllDisplayedColumns();if(!o.length)return!1;var n,r="first"===e;if(t instanceof Kt){var i=t.getDisplayedLeafColumns();if(!i.length)return!1;n=r?i[0]:ft(i)}else n=t;return(r?o[0]:ft(o))===n},e.prototype.getAriaColumnIndex=function(t){var e;return e=t instanceof Kt?t.getLeafColumns()[0]:t,this.ariaOrderColumns.indexOf(e)+1},e.prototype.isColumnInHeaderViewport=function(t){return!!t.isAutoHeaderHeight()||this.isColumnInRowViewport(t)},e.prototype.isColumnInRowViewport=function(t){if(t.isAutoHeight())return!0;var e=t.getLeft()||0,o=e+t.getActualWidth(),n=this.viewportLeft-200,r=this.viewportRight+200;return!(e<n&&o<n)&&!(e>r&&o>r)},e.prototype.getDisplayedColumnsLeftWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsLeft)},e.prototype.getDisplayedColumnsRightWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsRight)},e.prototype.updatePrimaryColumnList=function(t,e,o,n,r,i){var s=this;if(t&&!a(t)){var l=!1;if(t.forEach(function(t){if(t){var r=s.getPrimaryColumn(t);if(r){if(o){if(e.indexOf(r)>=0)return;e.push(r)}else{if(e.indexOf(r)<0)return;mt(e,r)}n(r),l=!0}}}),l){this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(i);var u={type:r,columns:e,column:1===e.length?e[0]:null,source:i};this.eventService.dispatchEvent(u)}}},e.prototype.setRowGroupColumns=function(t,e){this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(t,this.rowGroupColumns,qt.EVENT_COLUMN_ROW_GROUP_CHANGED,!0,this.setRowGroupActive.bind(this),e)},e.prototype.setRowGroupActive=function(t,e,o){t!==e.isRowGroupActive()&&(e.setRowGroupActive(t,o),t&&!this.gridOptionsService.get("suppressRowGroupHidesColumns")&&this.setColumnsVisible([e],!1,o),t||this.gridOptionsService.get("suppressMakeColumnVisibleAfterUnGroup")||this.setColumnsVisible([e],!0,o))},e.prototype.addRowGroupColumns=function(t,e){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(t,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),qt.EVENT_COLUMN_ROW_GROUP_CHANGED,e)},e.prototype.removeRowGroupColumns=function(t,e){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(t,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),qt.EVENT_COLUMN_ROW_GROUP_CHANGED,e)},e.prototype.addPivotColumns=function(t,e){this.updatePrimaryColumnList(t,this.pivotColumns,!0,function(t){return t.setPivotActive(!0,e)},qt.EVENT_COLUMN_PIVOT_CHANGED,e)},e.prototype.setPivotColumns=function(t,e){this.setPrimaryColumnList(t,this.pivotColumns,qt.EVENT_COLUMN_PIVOT_CHANGED,!0,function(t,o){o.setPivotActive(t,e)},e)},e.prototype.removePivotColumns=function(t,e){this.updatePrimaryColumnList(t,this.pivotColumns,!1,function(t){return t.setPivotActive(!1,e)},qt.EVENT_COLUMN_PIVOT_CHANGED,e)},e.prototype.setPrimaryColumnList=function(t,e,o,n,i,a){var s=this;if(this.gridColumns){var l=new Map;e.forEach(function(t,e){return l.set(t,e)}),e.length=0,r(t)&&t.forEach(function(t){var o=s.getPrimaryColumn(t);o&&e.push(o)}),e.forEach(function(t,e){var o=l.get(t);void 0!==o?n&&o!==e||l.delete(t):l.set(t,0)}),(this.primaryColumns||[]).forEach(function(t){var o=e.indexOf(t)>=0;i(o,t)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(a),this.dispatchColumnChangedEvent(o,de([],pe(l.keys()),!1),a)}},e.prototype.setValueColumns=function(t,e){this.setPrimaryColumnList(t,this.valueColumns,qt.EVENT_COLUMN_VALUE_CHANGED,!1,this.setValueActive.bind(this),e)},e.prototype.setValueActive=function(t,e,o){if(t!==e.isValueActive()&&(e.setValueActive(t,o),t&&!e.getAggFunc())){var n=this.aggFuncService.getDefaultAggFunc(e);e.setAggFunc(n)}},e.prototype.addValueColumns=function(t,e){this.updatePrimaryColumnList(t,this.valueColumns,!0,this.setValueActive.bind(this,!0),qt.EVENT_COLUMN_VALUE_CHANGED,e)},e.prototype.removeValueColumns=function(t,e){this.updatePrimaryColumnList(t,this.valueColumns,!1,this.setValueActive.bind(this,!1),qt.EVENT_COLUMN_VALUE_CHANGED,e)},e.prototype.normaliseColumnWidth=function(t,e){var o=t.getMinWidth();r(o)&&e<o&&(e=o);var n=t.getMaxWidth();return r(n)&&t.isGreaterThanMax(e)&&(e=n),e},e.prototype.getPrimaryOrGridColumn=function(t){return this.getPrimaryColumn(t)||this.getGridColumn(t)},e.prototype.setColumnWidths=function(t,e,o,n){var r=this,i=[];t.forEach(function(t){var o=r.getPrimaryOrGridColumn(t.key);if(o&&(i.push({width:t.newWidth,ratios:[1],columns:[o]}),"shift"===r.gridOptionsService.get("colResizeDefault")&&(e=!e),e)){var n=r.getDisplayedColAfter(o);if(!n)return;var a=o.getActualWidth()-t.newWidth,s=n.getActualWidth()+a;i.push({width:s,ratios:[1],columns:[n]})}}),0!==i.length&&this.resizeColumnSets({resizeSets:i,finished:o,source:n})},e.prototype.checkMinAndMaxWidthsForSet=function(t){var e=t.columns,o=t.width,n=0,i=0,a=!0;return e.forEach(function(t){var e=t.getMinWidth();n+=e||0;var o=t.getMaxWidth();r(o)&&o>0?i+=o:a=!1}),o>=n&&(!a||o<=i)},e.prototype.resizeColumnSets=function(t){var e=this,o=t.resizeSets,n=t.finished,i=t.source;if(!o||o.every(function(t){return e.checkMinAndMaxWidthsForSet(t)})){var a=[],s=[];o.forEach(function(t){var e=t.width,o=t.columns,n=t.ratios,l={},u={};o.forEach(function(t){return s.push(t)});for(var c=!0,p=0,d=function(){if(++p>1e3)return console.error("AG Grid: infinite loop in resizeColumnSets"),"break";c=!1;var t=[],i=0,a=e;o.forEach(function(e,o){if(u[e.getId()])a-=l[e.getId()];else{t.push(e);var r=n[o];i+=r}});var s=1/i;t.forEach(function(o,i){var p;i===t.length-1?p=a:(p=Math.round(n[i]*e*s),a-=p);var d=o.getMinWidth(),h=o.getMaxWidth();r(d)&&p<d?(p=d,u[o.getId()]=!0,c=!0):r(h)&&h>0&&p>h&&(p=h,u[o.getId()]=!0,c=!0),l[o.getId()]=p})};c;){if("break"===d())break}o.forEach(function(t){var e=l[t.getId()];t.getActualWidth()!==e&&(t.setActualWidth(e,i),a.push(t))})});var l=a.length>0,u=[];l&&(u=this.refreshFlexedColumns({resizingCols:s,skipSetLeft:!0}),this.setLeftValues(i),this.updateBodyWidths(),this.checkViewportColumns());var c=s.concat(u);(l||n)&&this.dispatchColumnResizedEvent(c,n,i,u)}else if(n){var p=o&&o.length>0?o[0].columns:null;this.dispatchColumnResizedEvent(p,n,i)}},e.prototype.setColumnAggFunc=function(t,e,o){if(t){var n=this.getPrimaryColumn(t);n&&(n.setAggFunc(e),this.dispatchColumnChangedEvent(qt.EVENT_COLUMN_VALUE_CHANGED,[n],o))}},e.prototype.moveRowGroupColumn=function(t,e,o){if(!this.isRowGroupEmpty()){var n=this.rowGroupColumns[t],r=this.rowGroupColumns.slice(t,e);this.rowGroupColumns.splice(t,1),this.rowGroupColumns.splice(e,0,n);var i={type:qt.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:r,column:1===r.length?r[0]:null,source:o};this.eventService.dispatchEvent(i)}},e.prototype.moveColumns=function(t,e,o,n){if(void 0===n&&(n=!0),this.gridColumns){if(this.columnAnimationService.start(),e>this.gridColumns.length-t.length)return console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+e),void console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");var r=this.getGridColumns(t);!this.doesMovePassRules(r,e)||(bt(this.gridColumns,r,e),this.updateDisplayedColumns(o),this.dispatchColumnMovedEvent({movedColumns:r,source:o,toIndex:e,finished:n}),this.columnAnimationService.finish())}},e.prototype.doesMovePassRules=function(t,e){var o=this.getProposedColumnOrder(t,e);return this.doesOrderPassRules(o)},e.prototype.doesOrderPassRules=function(t){return!!this.doesMovePassMarryChildren(t)&&!!this.doesMovePassLockedPositions(t)},e.prototype.getProposedColumnOrder=function(t,e){var o=this.gridColumns.slice();return bt(o,t,e),o},e.prototype.sortColumnsLikeGridColumns=function(t){var e=this;!t||t.length<=1||(t.filter(function(t){return e.gridColumns.indexOf(t)<0}).length>0||t.sort(function(t,o){return e.gridColumns.indexOf(t)-e.gridColumns.indexOf(o)}))},e.prototype.doesMovePassLockedPositions=function(t){var e=0,o=!0;return t.forEach(function(t){var n,r=(n=t.getColDef().lockPosition)?!0===n?0:"left"===n?0:2:1;r<e&&(o=!1),e=r}),o},e.prototype.doesMovePassMarryChildren=function(t){var e=!0;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(o){if(o instanceof dt){var n=o,r=n.getColGroupDef();if(r&&r.marryChildren){var i=[];n.getLeafColumns().forEach(function(e){var o=t.indexOf(e);i.push(o)}),Math.max.apply(Math,i)-Math.min.apply(Math,i)>n.getLeafColumns().length-1&&(e=!1)}}}),e},e.prototype.moveColumnByIndex=function(t,e,o){if(this.gridColumns){var n=this.gridColumns[t];this.moveColumns([n],e,o)}},e.prototype.getColumnDefs=function(){var t=this;if(this.primaryColumns){var e=this.primaryColumns.slice();return this.gridColsArePrimary?e.sort(function(e,o){return t.gridColumns.indexOf(e)-t.gridColumns.indexOf(o)}):this.lastPrimaryOrder&&e.sort(function(e,o){return t.lastPrimaryOrder.indexOf(e)-t.lastPrimaryOrder.indexOf(o)}),this.columnDefFactory.buildColumnDefs(e,this.rowGroupColumns,this.pivotColumns)}},e.prototype.getBodyContainerWidth=function(){return this.bodyWidth},e.prototype.getContainerWidth=function(t){switch(t){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}},e.prototype.updateBodyWidths=function(){var t=this.getWidthOfColsInList(this.displayedColumnsCenter),e=this.getWidthOfColsInList(this.displayedColumnsLeft),o=this.getWidthOfColsInList(this.displayedColumnsRight);if(this.bodyWidthDirty=this.bodyWidth!==t,this.bodyWidth!==t||this.leftWidth!==e||this.rightWidth!==o){this.bodyWidth=t,this.leftWidth=e,this.rightWidth=o;var n={type:qt.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED};this.eventService.dispatchEvent(n);var r={type:qt.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED};this.eventService.dispatchEvent(r)}},e.prototype.getValueColumns=function(){return this.valueColumns?this.valueColumns:[]},e.prototype.getPivotColumns=function(){return this.pivotColumns?this.pivotColumns:[]},e.prototype.isPivotActive=function(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode},e.prototype.getRowGroupColumns=function(){return this.rowGroupColumns?this.rowGroupColumns:[]},e.prototype.getDisplayedCenterColumns=function(){return this.displayedColumnsCenter},e.prototype.getDisplayedLeftColumns=function(){return this.displayedColumnsLeft},e.prototype.getDisplayedRightColumns=function(){return this.displayedColumnsRight},e.prototype.getDisplayedColumns=function(t){switch(t){case"left":return this.getDisplayedLeftColumns();case"right":return this.getDisplayedRightColumns();default:return this.getDisplayedCenterColumns()}},e.prototype.getAllPrimaryColumns=function(){return this.primaryColumns?this.primaryColumns:null},e.prototype.getSecondaryColumns=function(){return this.secondaryColumns?this.secondaryColumns:null},e.prototype.getAllColumnsForQuickFilter=function(){return this.columnsForQuickFilter},e.prototype.getAllGridColumns=function(){var t;return null!==(t=this.gridColumns)&&void 0!==t?t:[]},e.prototype.isEmpty=function(){return a(this.gridColumns)},e.prototype.isRowGroupEmpty=function(){return a(this.rowGroupColumns)},e.prototype.setColumnsVisible=function(t,e,o){void 0===e&&(e=!1),this.applyColumnState({state:t.map(function(t){return{colId:"string"===typeof t?t:t.getColId(),hide:!e}})},o)},e.prototype.setColumnsPinned=function(t,e,o){var n;this.gridColumns&&(this.gridOptionsService.isDomLayout("print")?console.warn("AG Grid: Changing the column pinning status is not allowed with domLayout='print'"):(this.columnAnimationService.start(),n=!0===e||"left"===e?"left":"right"===e?"right":null,this.actionOnGridColumns(t,function(t){return t.getPinned()!==n&&(t.setPinned(n),!0)},o,function(){return{type:qt.EVENT_COLUMN_PINNED,pinned:n,column:null,columns:null,source:o}}),this.columnAnimationService.finish()))},e.prototype.actionOnGridColumns=function(t,e,o,n){var i=this;if(!a(t)){var s=[];if(t.forEach(function(t){if(t){var o=i.getGridColumn(t);if(o)!1!==e(o)&&s.push(o)}}),s.length&&(this.updateDisplayedColumns(o),r(n)&&n)){var l=n();l.columns=s,l.column=1===s.length?s[0]:null,this.eventService.dispatchEvent(l)}}},e.prototype.getDisplayedColBefore=function(t){var e=this.getAllDisplayedColumns(),o=e.indexOf(t);return o>0?e[o-1]:null},e.prototype.getDisplayedColAfter=function(t){var e=this.getAllDisplayedColumns(),o=e.indexOf(t);return o<e.length-1?e[o+1]:null},e.prototype.getDisplayedGroupAfter=function(t){return this.getDisplayedGroupAtDirection(t,"After")},e.prototype.getDisplayedGroupBefore=function(t){return this.getDisplayedGroupAtDirection(t,"Before")},e.prototype.getDisplayedGroupAtDirection=function(t,e){for(var o=t.getProvidedColumnGroup().getLevel()+t.getPaddingLevel(),n=t.getDisplayedLeafColumns(),r="After"===e?ft(n):n[0],i="getDisplayedCol".concat(e);;){var a=this[i](r);if(!a)return null;var s=this.getColumnGroupAtLevel(a,o);if(s!==t)return s}},e.prototype.getColumnGroupAtLevel=function(t,e){for(var o=t.getParent();;){if(o.getProvidedColumnGroup().getLevel()+o.getPaddingLevel()<=e)break;o=o.getParent()}return o},e.prototype.isPinningLeft=function(){return this.displayedColumnsLeft.length>0},e.prototype.isPinningRight=function(){return this.displayedColumnsRight.length>0},e.prototype.getPrimaryAndSecondaryAndAutoColumns=function(){var t;return(t=[]).concat.apply(t,[this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[]])},e.prototype.createStateItemFromColumn=function(t){var e=t.isRowGroupActive()?this.rowGroupColumns.indexOf(t):null,o=t.isPivotActive()?this.pivotColumns.indexOf(t):null,n=t.isValueActive()?t.getAggFunc():null,r=null!=t.getSort()?t.getSort():null,i=null!=t.getSortIndex()?t.getSortIndex():null,a=null!=t.getFlex()&&t.getFlex()>0?t.getFlex():null;return{colId:t.getColId(),width:t.getActualWidth(),hide:!t.isVisible(),pinned:t.getPinned(),sort:r,sortIndex:i,aggFunc:n,rowGroup:t.isRowGroupActive(),rowGroupIndex:e,pivot:t.isPivotActive(),pivotIndex:o,flex:a}},e.prototype.getColumnState=function(){if(i(this.primaryColumns)||!this.isAlive())return[];var t=this.getPrimaryAndSecondaryAndAutoColumns().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(t),t},e.prototype.orderColumnStateList=function(t){var e=ie(this.gridColumns.map(function(t,e){return[t.getColId(),e]}));t.sort(function(t,o){return(e.has(t.colId)?e.get(t.colId):-1)-(e.has(o.colId)?e.get(o.colId):-1)})},e.prototype.resetColumnState=function(t){var e=this;if(!a(this.primaryColumns)){var o=this.getColumnsFromTree(this.primaryColumnTree),n=[],r=1e3,s=1e3,l=[];this.groupAutoColumns&&(l=l.concat(this.groupAutoColumns)),o&&(l=l.concat(o)),l.forEach(function(t){var o=e.getColumnStateFromColDef(t);i(o.rowGroupIndex)&&o.rowGroup&&(o.rowGroupIndex=r++),i(o.pivotIndex)&&o.pivot&&(o.pivotIndex=s++),n.push(o)}),this.applyColumnState({state:n,applyOrder:!0},t)}},e.prototype.getColumnStateFromColDef=function(t){var e=function(t,e){return null!=t?t:null!=e?e:null},o=t.getColDef(),n=e(o.sort,o.initialSort),r=e(o.sortIndex,o.initialSortIndex),i=e(o.hide,o.initialHide),a=e(o.pinned,o.initialPinned),s=e(o.width,o.initialWidth),l=e(o.flex,o.initialFlex),u=e(o.rowGroupIndex,o.initialRowGroupIndex),c=e(o.rowGroup,o.initialRowGroup);null!=u||null!=c&&0!=c||(u=null,c=null);var p=e(o.pivotIndex,o.initialPivotIndex),d=e(o.pivot,o.initialPivot);null!=p||null!=d&&0!=d||(p=null,d=null);var h=e(o.aggFunc,o.initialAggFunc);return{colId:t.getColId(),sort:n,sortIndex:r,hide:i,pinned:a,width:s,flex:l,rowGroup:c,rowGroupIndex:u,pivot:d,pivotIndex:p,aggFunc:h}},e.prototype.applyColumnState=function(t,e){var o=this;if(a(this.primaryColumns))return!1;if(t&&t.state&&!t.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;var n=function(n,r,i){var a=o.compareColumnStatesAndDispatchEvents(e);o.autoGroupsNeedBuilding=!0;var s=r.slice(),l={},u={},c=[],p=[],d=0,h=o.rowGroupColumns.slice(),f=o.pivotColumns.slice();n.forEach(function(n){var r=n.colId||"";if(r.startsWith(Jt))return c.push(n),void p.push(n);var a=i(r);a?(o.syncColumnWithStateItem(a,n,t.defaultState,l,u,!1,e),mt(s,a)):(p.push(n),d+=1)});var g=function(n){return o.syncColumnWithStateItem(n,null,t.defaultState,l,u,!1,e)};s.forEach(g);var y=function(t,e,o,n){var r=t[o.getId()],i=t[n.getId()],a=null!=r,s=null!=i;if(a&&s)return r-i;if(a)return-1;if(s)return 1;var l=e.indexOf(o),u=e.indexOf(n),c=l>=0;return c&&u>=0?l-u:c?-1:1};o.rowGroupColumns.sort(y.bind(o,l,h)),o.pivotColumns.sort(y.bind(o,u,f)),o.updateGridColumns();var v=o.groupAutoColumns?o.groupAutoColumns.slice():[];return c.forEach(function(n){var r=o.getAutoColumn(n.colId);mt(v,r),o.syncColumnWithStateItem(r,n,t.defaultState,null,null,!0,e)}),v.forEach(g),o.applyOrderAfterApplyState(t),o.updateDisplayedColumns(e),o.dispatchEverythingChanged(e),a(),{unmatchedAndAutoStates:p,unmatchedCount:d}};this.columnAnimationService.start();var i=n(t.state||[],this.primaryColumns||[],function(t){return o.getPrimaryColumn(t)}),s=i.unmatchedAndAutoStates,l=i.unmatchedCount;return(s.length>0||r(t.defaultState))&&(l=n(s,this.secondaryColumns||[],function(t){return o.getSecondaryColumn(t)}).unmatchedCount),this.columnAnimationService.finish(),0===l},e.prototype.applyOrderAfterApplyState=function(t){var e=this;if(t.applyOrder&&t.state){var o=[],n={};t.state.forEach(function(t){if(t.colId&&!n[t.colId]){var r=e.gridColumnsMap[t.colId];r&&(o.push(r),n[t.colId]=!0)}});var r=0;this.gridColumns.forEach(function(t){var e=t.getColId();null!=n[e]||(e.startsWith(Jt)?wt(o,t,r++):o.push(t))}),o=this.placeLockedColumns(o),this.doesMovePassMarryChildren(o)?this.gridColumns=o:console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.")}},e.prototype.compareColumnStatesAndDispatchEvents=function(t){var e=this,o={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},n=this.getColumnState(),r={};return n.forEach(function(t){r[t.colId]=t}),function(){var i=e.getPrimaryAndSecondaryAndAutoColumns(),a=function(o,n,r,i){if(!gt(n.map(i),r.map(i))){var a=new Set(n);r.forEach(function(t){a.delete(t)||a.add(t)});var s=de([],pe(a),!1),l={type:o,columns:s,column:1===s.length?s[0]:null,source:t};e.eventService.dispatchEvent(l)}},s=function(t){var e=[];return i.forEach(function(o){var n=r[o.getColId()];n&&t(n,o)&&e.push(o)}),e},l=function(t){return t.getColId()};a(qt.EVENT_COLUMN_ROW_GROUP_CHANGED,o.rowGroupColumns,e.rowGroupColumns,l),a(qt.EVENT_COLUMN_PIVOT_CHANGED,o.pivotColumns,e.pivotColumns,l);var u=s(function(t,e){var o=null!=t.aggFunc,n=o!=e.isValueActive(),r=o&&t.aggFunc!=e.getAggFunc();return n||r});u.length>0&&e.dispatchColumnChangedEvent(qt.EVENT_COLUMN_VALUE_CHANGED,u,t);e.dispatchColumnResizedEvent(s(function(t,e){return t.width!=e.getActualWidth()}),!0,t);e.dispatchColumnPinnedEvent(s(function(t,e){return t.pinned!=e.getPinned()}),t);e.dispatchColumnVisibleEvent(s(function(t,e){return t.hide==e.isVisible()}),t);var c=s(function(t,e){return t.sort!=e.getSort()||t.sortIndex!=e.getSortIndex()});c.length>0&&e.sortController.dispatchSortChangedEvents(t,c),e.normaliseColumnMovedEventForColumnState(n,t)}},e.prototype.getCommonValue=function(t,e){if(t&&0!=t.length){for(var o=e(t[0]),n=1;n<t.length;n++)if(o!==e(t[n]))return;return o}},e.prototype.normaliseColumnMovedEventForColumnState=function(t,e){var o=this,n=this.getColumnState(),r={};n.forEach(function(t){return r[t.colId]=t});var i={};t.forEach(function(t){r[t.colId]&&(i[t.colId]=!0)});var a=t.filter(function(t){return i[t.colId]}),s=n.filter(function(t){return i[t.colId]}),l=[];s.forEach(function(t,e){var n=a&&a[e];if(n&&n.colId!==t.colId){var r=o.getGridColumn(n.colId);r&&l.push(r)}}),l.length&&this.dispatchColumnMovedEvent({movedColumns:l,source:e,finished:!0})},e.prototype.syncColumnWithStateItem=function(t,e,o,n,i,a,s){if(t){var l=function(t,n){var i={value1:void 0,value2:void 0},a=!1;return e&&(void 0!==e[t]&&(i.value1=e[t],a=!0),r(n)&&void 0!==e[n]&&(i.value2=e[n],a=!0)),!a&&o&&(void 0!==o[t]&&(i.value1=o[t]),r(n)&&void 0!==o[n]&&(i.value2=o[n])),i},u=l("hide").value1;void 0!==u&&t.setVisible(!u,s);var c=l("pinned").value1;void 0!==c&&t.setPinned(c);var p=this.columnUtils.calculateColMinWidth(t.getColDef()),d=l("flex").value1;if(void 0!==d&&t.setFlex(d),null==d){var h=l("width").value1;null!=h&&null!=p&&h>=p&&t.setActualWidth(h,s)}var f=l("sort").value1;void 0!==f&&("desc"===f||"asc"===f?t.setSort(f,s):t.setSort(void 0,s));var g=l("sortIndex").value1;if(void 0!==g&&t.setSortIndex(g),!a&&t.isPrimary()){var y=l("aggFunc").value1;void 0!==y&&("string"===typeof y?(t.setAggFunc(y),t.isValueActive()||(t.setValueActive(!0,s),this.valueColumns.push(t))):(r(y)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),t.isValueActive()&&(t.setValueActive(!1,s),mt(this.valueColumns,t))));var v=l("rowGroup","rowGroupIndex"),m=v.value1,C=v.value2;void 0===m&&void 0===C||("number"===typeof C||m?(t.isRowGroupActive()||(t.setRowGroupActive(!0,s),this.rowGroupColumns.push(t)),n&&"number"===typeof C&&(n[t.getId()]=C)):t.isRowGroupActive()&&(t.setRowGroupActive(!1,s),mt(this.rowGroupColumns,t)));var _=l("pivot","pivotIndex"),w=_.value1,b=_.value2;void 0===w&&void 0===b||("number"===typeof b||w?(t.isPivotActive()||(t.setPivotActive(!0,s),this.pivotColumns.push(t)),i&&"number"===typeof b&&(i[t.getId()]=b)):t.isPivotActive()&&(t.setPivotActive(!1,s),mt(this.pivotColumns,t)))}}},e.prototype.getGridColumns=function(t){return this.getColumns(t,this.getGridColumn.bind(this))},e.prototype.getColumns=function(t,e){var o=[];return t&&t.forEach(function(t){var n=e(t);n&&o.push(n)}),o},e.prototype.getColumnWithValidation=function(t){if(null==t)return null;var e=this.getGridColumn(t);return e||console.warn("AG Grid: could not find column "+t),e},e.prototype.getPrimaryColumn=function(t){return this.primaryColumns?this.getColumn(t,this.primaryColumns,this.primaryColumnsMap):null},e.prototype.getGridColumn=function(t){return this.getColumn(t,this.gridColumns,this.gridColumnsMap)},e.prototype.lookupGridColumn=function(t){return this.gridColumnsMap[t]},e.prototype.getSecondaryColumn=function(t){return this.secondaryColumns?this.getColumn(t,this.secondaryColumns,this.secondaryColumnsMap):null},e.prototype.getColumn=function(t,e,o){if(!t||!o)return null;if("string"==typeof t&&o[t])return o[t];for(var n=0;n<e.length;n++)if(this.columnsMatch(e[n],t))return e[n];return this.getAutoColumn(t)},e.prototype.getSourceColumnsForGroupColumn=function(t){var e=t.getColDef().showRowGroup;if(!e)return null;if(!0===e)return this.rowGroupColumns.slice(0);var o=this.getPrimaryColumn(e);return o?[o]:null},e.prototype.getAutoColumn=function(t){var e=this;return this.groupAutoColumns&&r(this.groupAutoColumns)&&!i(this.groupAutoColumns)&&this.groupAutoColumns.find(function(o){return e.columnsMatch(o,t)})||null},e.prototype.columnsMatch=function(t,e){var o=t===e,n=t.getColDef()===e,r=t.getColId()==e;return o||n||r},e.prototype.getDisplayNameForColumn=function(t,e,o){if(void 0===o&&(o=!1),!t)return null;var n=this.getHeaderName(t.getColDef(),t,null,null,e);return o?this.wrapHeaderNameWithAggFunc(t,n):n},e.prototype.getDisplayNameForProvidedColumnGroup=function(t,e,o){var n=e?e.getColGroupDef():null;return n?this.getHeaderName(n,null,t,e,o):null},e.prototype.getDisplayNameForColumnGroup=function(t,e){return this.getDisplayNameForProvidedColumnGroup(t,t.getProvidedColumnGroup(),e)},e.prototype.getHeaderName=function(t,e,o,n,r){var i=t.headerValueGetter;if(i){var a=this.gridOptionsService.addGridCommonParams({colDef:t,column:e,columnGroup:o,providedColumnGroup:n,location:r});return"function"===typeof i?i(a):"string"===typeof i?this.expressionService.evaluate(i,a):(console.warn("AG Grid: headerValueGetter must be a function or a string"),"")}return null!=t.headerName?t.headerName:t.field?oe(t.field):""},e.prototype.wrapHeaderNameWithAggFunc=function(t,e){if(this.gridOptionsService.get("suppressAggFuncInHeader"))return e;var o,n=t.getColDef().pivotValueColumn,i=null;if(r(n)){var a=this.gridOptionsService.get("removePivotHeaderRowWhenSingleValueColumn")&&1===this.valueColumns.length,s=void 0!==t.getColDef().pivotTotalColumnIds;if(a&&!s)return e;i=n?n.getAggFunc():null,o=!0}else{var l=t.isValueActive(),u=this.pivotMode||!this.isRowGroupEmpty();l&&u?(i=t.getAggFunc(),o=!0):o=!1}if(o){var c="string"===typeof i?i:"func",p=this.localeService.getLocaleTextFunc()(c,c);return"".concat(p,"(").concat(e,")")}return e},e.prototype.getColumnGroup=function(t,e){if(!t)return null;if(t instanceof Kt)return t;var o=this.getAllDisplayedTrees(),n="number"===typeof e,r=null;return this.columnUtils.depthFirstAllColumnTreeSearch(o,function(o){if(o instanceof Kt){var i=o;(n?t===i.getGroupId()&&e===i.getPartId():t===i.getGroupId())&&(r=i)}}),r},e.prototype.isReady=function(){return this.ready},e.prototype.extractValueColumns=function(t,e){this.valueColumns=this.extractColumns(e,this.valueColumns,function(e,o){return e.setValueActive(o,t)},function(){},function(){},function(t){var e=t.aggFunc;return null===e||""===e?null:void 0!==e?!!e:void 0},function(t){return null!=t.initialAggFunc&&""!=t.initialAggFunc}),this.valueColumns.forEach(function(t){var e=t.getColDef();null!=e.aggFunc&&""!=e.aggFunc?t.setAggFunc(e.aggFunc):t.getAggFunc()||t.setAggFunc(e.initialAggFunc)})},e.prototype.extractRowGroupColumns=function(t,e){this.rowGroupColumns=this.extractColumns(e,this.rowGroupColumns,function(e,o){return e.setRowGroupActive(o,t)},function(t){return t.rowGroupIndex},function(t){return t.initialRowGroupIndex},function(t){return t.rowGroup},function(t){return t.initialRowGroup})},e.prototype.extractColumns=function(t,e,o,n,r,i,a){void 0===t&&(t=[]),void 0===e&&(e=[]);var s=[],c=[];(this.primaryColumns||[]).forEach(function(o){var p=t.indexOf(o)<0,d=o.getColDef(),h=u(i(d)),f=u(a(d)),g=l(n(d)),y=l(r(d));(void 0!==h?h:void 0!==g?null!==g&&g>=0:p?void 0!==f?f:!!(void 0!==y)&&(null!=y&&y>=0):e.indexOf(o)>=0)&&((p?null!=g||null!=y:null!=g)?s.push(o):c.push(o))});var p=function(t){var e=n(t.getColDef()),o=r(t.getColDef());return null!=e?e:o};s.sort(function(t,e){var o=p(t),n=p(e);return o===n?0:o<n?-1:1});var d=[].concat(s);return e.forEach(function(t){c.indexOf(t)>=0&&d.push(t)}),c.forEach(function(t){d.indexOf(t)<0&&d.push(t)}),e.forEach(function(t){d.indexOf(t)<0&&o(t,!1)}),d.forEach(function(t){e.indexOf(t)<0&&o(t,!0)}),d},e.prototype.extractPivotColumns=function(t,e){this.pivotColumns=this.extractColumns(e,this.pivotColumns,function(e,o){return e.setPivotActive(o,t)},function(t){return t.pivotIndex},function(t){return t.initialPivotIndex},function(t){return t.pivot},function(t){return t.initialPivot})},e.prototype.resetColumnGroupState=function(t){if(this.primaryColumnTree){var e=[];this.columnUtils.depthFirstOriginalTreeSearch(null,this.primaryColumnTree,function(t){if(t instanceof dt){var o=t.getColGroupDef(),n={groupId:t.getGroupId(),open:o?o.openByDefault:void 0};e.push(n)}}),this.setColumnGroupState(e,t)}},e.prototype.getColumnGroupState=function(){var t=[];return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(e){e instanceof dt&&t.push({groupId:e.getGroupId(),open:e.isExpanded()})}),t},e.prototype.setColumnGroupState=function(t,e){var o=this;if(this.gridBalancedTree){this.columnAnimationService.start();var n=[];if(t.forEach(function(t){var e=t.groupId,r=t.open,i=o.getProvidedColumnGroup(e);i&&i.isExpanded()!==r&&(o.logger.log("columnGroupOpened("+i.getGroupId()+","+r+")"),i.setExpanded(r),n.push(i))}),this.updateGroupsAndDisplayedColumns(e),this.setFirstRightAndLastLeftPinned(e),n.length){var r={type:qt.EVENT_COLUMN_GROUP_OPENED,columnGroup:1===dt.length?n[0]:void 0,columnGroups:n};this.eventService.dispatchEvent(r)}this.columnAnimationService.finish()}},e.prototype.setColumnGroupOpened=function(t,e,o){var n;n=t instanceof dt?t.getId():t||"",this.setColumnGroupState([{groupId:n,open:e}],o)},e.prototype.getProvidedColumnGroup=function(t){"string"!==typeof t&&console.error("AG Grid: group key must be a string");var e=null;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(o){o instanceof dt&&o.getId()===t&&(e=o)}),e},e.prototype.calculateColumnsForDisplay=function(){var t=this;return this.pivotMode&&i(this.secondaryColumns)?this.gridColumns.filter(function(e){var o=t.groupAutoColumns&&St(t.groupAutoColumns,e),n=t.valueColumns&&St(t.valueColumns,e);return o||n}):this.gridColumns.filter(function(e){return t.groupAutoColumns&&St(t.groupAutoColumns,e)||e.isVisible()})},e.prototype.checkColSpanActiveInCols=function(t){var e=!1;return t.forEach(function(t){r(t.getColDef().colSpan)&&(e=!0)}),e},e.prototype.calculateColumnsForGroupDisplay=function(){var t=this;this.groupDisplayColumns=[],this.groupDisplayColumnsMap={};this.gridColumns.forEach(function(e){var o=e.getColDef(),n=o.showRowGroup;o&&r(n)&&(t.groupDisplayColumns.push(e),"string"===typeof n?t.groupDisplayColumnsMap[n]=e:!0===n&&t.getRowGroupColumns().forEach(function(o){t.groupDisplayColumnsMap[o.getId()]=e}))})},e.prototype.getGroupDisplayColumns=function(){return this.groupDisplayColumns},e.prototype.getGroupDisplayColumnForGroup=function(t){return this.groupDisplayColumnsMap[t]},e.prototype.updateDisplayedColumns=function(t){var e=this.calculateColumnsForDisplay();this.buildDisplayedTrees(e),this.updateGroupsAndDisplayedColumns(t),this.setFirstRightAndLastLeftPinned(t)},e.prototype.isSecondaryColumnsPresent=function(){return r(this.secondaryColumns)},e.prototype.setSecondaryColumns=function(t,e){var o=this;if(this.gridColumns){var n=t&&t.length>0;if(n||!i(this.secondaryColumns)){if(n){this.processSecondaryColumnDefinitions(t);var r=this.columnFactory.createColumnTree(t,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0,e);this.destroyOldColumns(this.secondaryBalancedTree,r.columnTree),this.secondaryBalancedTree=r.columnTree,this.secondaryHeaderRowCount=r.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach(function(t){return o.secondaryColumnsMap[t.getId()]=t}),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(e)}}},e.prototype.processSecondaryColumnDefinitions=function(t){var e=this.gridOptionsService.get("processPivotResultColDef"),o=this.gridOptionsService.get("processPivotResultColGroupDef");if(e||o){var n=function(t){t.forEach(function(t){if(r(t.children)){var i=t;o&&o(i),n(i.children)}else{e&&e(t)}})};t&&n(t)}},e.prototype.updateGridColumns=function(){var t,e=this,o=this.gridBalancedTree;if(this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns,this.createGroupAutoColumnsIfNeeded()){var n=ie(this.groupAutoColumns.map(function(t){return[t,!0]}));this.lastPrimaryOrder&&(this.lastPrimaryOrder=this.lastPrimaryOrder.filter(function(t){return!n.has(t)}),this.lastPrimaryOrder=de(de([],pe(this.groupAutoColumns),!1),pe(this.lastPrimaryOrder),!1)),this.lastSecondaryOrder&&(this.lastSecondaryOrder=this.lastSecondaryOrder.filter(function(t){return!n.has(t)}),this.lastSecondaryOrder=de(de([],pe(this.groupAutoColumns),!1),pe(this.lastSecondaryOrder),!1))}if(this.secondaryColumns&&this.secondaryBalancedTree){var r=this.secondaryColumns.some(function(t){return void 0!==e.gridColumnsMap[t.getColId()]});this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,r&&(t=this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,t=this.lastPrimaryOrder);if(this.addAutoGroupToGridColumns(),this.orderGridColsLike(t),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.calculateColumnsForGroupDisplay(),this.refreshQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach(function(t){return e.gridColumnsMap[t.getId()]=t}),this.setAutoHeightActive(),!gt(o,this.gridBalancedTree)){var i={type:qt.EVENT_GRID_COLUMNS_CHANGED};this.eventService.dispatchEvent(i)}},e.prototype.setAutoHeightActive=function(){(this.autoHeightActive=this.gridColumns.filter(function(t){return t.isAutoHeight()}).length>0,this.autoHeightActive)&&(this.autoHeightActiveAtLeastOnce=!0,this.gridOptionsService.isRowModelType("clientSide")||this.gridOptionsService.isRowModelType("serverSide")||O("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))},e.prototype.orderGridColsLike=function(t){if(!i(t)){var e=ie(t.map(function(t,e){return[t,e]})),o=!0;if(this.gridColumns.forEach(function(t){e.has(t)&&(o=!1)}),!o){var n=ie(this.gridColumns.map(function(t){return[t,!0]})),r=t.filter(function(t){return n.has(t)}),a=ie(r.map(function(t){return[t,!0]})),s=this.gridColumns.filter(function(t){return!a.has(t)}),l=r.slice();s.forEach(function(t){var e=t.getOriginalParent();if(e){for(var o=[];!o.length&&e;){e.getLeafColumns().forEach(function(t){var e=l.indexOf(t)>=0,n=o.indexOf(t)<0;e&&n&&o.push(t)}),e=e.getOriginalParent()}if(o.length){var n=o.map(function(t){return l.indexOf(t)}),r=Math.max.apply(Math,de([],pe(n),!1));wt(l,t,r+1)}else l.push(t)}else l.push(t)}),this.gridColumns=l}}},e.prototype.isPrimaryColumnGroupsPresent=function(){return this.primaryHeaderRowCount>1},e.prototype.refreshQuickFilterColumns=function(){var t,e=null!==(t=this.isPivotMode()?this.secondaryColumns:this.primaryColumns)&&void 0!==t?t:[];this.groupAutoColumns&&(e=e.concat(this.groupAutoColumns)),this.columnsForQuickFilter=this.gridOptionsService.get("includeHiddenColumnsInQuickFilter")?e:e.filter(function(t){return t.isVisible()||t.isRowGroupActive()})},e.prototype.placeLockedColumns=function(t){var e=[],o=[],n=[];return t.forEach(function(t){var r=t.getColDef().lockPosition;"right"===r?n.push(t):"left"===r||!0===r?e.push(t):o.push(t)}),de(de(de([],pe(e),!1),pe(o),!1),pe(n),!1)},e.prototype.addAutoGroupToGridColumns=function(){if(i(this.groupAutoColumns))return this.destroyOldColumns(this.groupAutoColsBalancedTree),void(this.groupAutoColsBalancedTree=null);this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;var t=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.destroyOldColumns(this.groupAutoColsBalancedTree,t),this.groupAutoColsBalancedTree=t,this.gridBalancedTree=t.concat(this.gridBalancedTree)},e.prototype.clearDisplayedAndViewportColumns=function(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.ariaOrderColumns=[],this.viewportColumns=[],this.headerViewportColumns=[],this.viewportColumnsHash=""},e.prototype.updateGroupsAndDisplayedColumns=function(t){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(t),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths();var e={type:qt.EVENT_DISPLAYED_COLUMNS_CHANGED};this.eventService.dispatchEvent(e)},e.prototype.deriveDisplayedColumns=function(t){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinColumnsAriaOrder(),this.joinDisplayedColumns(),this.setLeftValues(t),this.displayedAutoHeightCols=this.displayedColumns.filter(function(t){return t.isAutoHeight()})},e.prototype.isAutoRowHeightActive=function(){return this.autoHeightActive},e.prototype.wasAutoRowHeightEverActive=function(){return this.autoHeightActiveAtLeastOnce},e.prototype.joinColumnsAriaOrder=function(){var t,e,o=this.getAllGridColumns(),n=[],r=[],i=[];try{for(var a=he(o),s=a.next();!s.done;s=a.next()){var l=s.value,u=l.getPinned();u?!0===u||"left"===u?n.push(l):i.push(l):r.push(l)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}this.ariaOrderColumns=n.concat(r).concat(i)},e.prototype.joinDisplayedColumns=function(){this.gridOptionsService.get("enableRtl")?this.displayedColumns=this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumns=this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)},e.prototype.setLeftValues=function(t){this.setLeftValuesOfColumns(t),this.setLeftValuesOfGroups()},e.prototype.setLeftValuesOfColumns=function(t){var e=this;if(this.primaryColumns){var o=this.getPrimaryAndSecondaryAndAutoColumns().slice(0),n=this.gridOptionsService.get("enableRtl");[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach(function(r){if(n){var i=e.getWidthOfColsInList(r);r.forEach(function(e){i-=e.getActualWidth(),e.setLeft(i,t)})}else{var a=0;r.forEach(function(e){e.setLeft(a,t),a+=e.getActualWidth()})}Ct(o,r)}),o.forEach(function(e){e.setLeft(null,t)})}},e.prototype.setLeftValuesOfGroups=function(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach(function(t){t.forEach(function(t){t instanceof Kt&&t.checkLeft()})})},e.prototype.derivedDisplayedColumnsFromDisplayedTree=function(t,e){e.length=0,this.columnUtils.depthFirstDisplayedColumnTreeSearch(t,function(t){t instanceof ct&&e.push(t)})},e.prototype.isColumnVirtualisationSuppressed=function(){return this.suppressColumnVirtualisation||0===this.viewportRight},e.prototype.extractViewportColumns=function(){this.isColumnVirtualisationSuppressed()?(this.viewportColumnsCenter=this.displayedColumnsCenter,this.headerViewportColumnsCenter=this.displayedColumnsCenter):(this.viewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerViewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this))),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight),this.headerViewportColumns=this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)},e.prototype.getVirtualHeaderGroupRow=function(t,e){var o;switch(t){case"left":o=this.viewportRowLeft[e];break;case"right":o=this.viewportRowRight[e];break;default:o=this.viewportRowCenter[e]}return i(o)&&(o=[]),o},e.prototype.calculateHeaderRows=function(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};var t={};this.headerViewportColumns.forEach(function(e){return t[e.getId()]=!0});var e=function(o,n,r){for(var i=!1,a=0;a<o.length;a++){var s=o[a],l=!1;if(s instanceof ct)l=!0===t[s.getId()];else{var u=s.getDisplayedChildren();u&&(l=e(u,n,r+1))}l&&(i=!0,n[r]||(n[r]=[]),n[r].push(s))}return i};e(this.displayedTreeLeft,this.viewportRowLeft,0),e(this.displayedTreeRight,this.viewportRowRight,0),e(this.displayedTreeCentre,this.viewportRowCenter,0)},e.prototype.extractViewport=function(){this.extractViewportColumns();var t=this.viewportColumns.map(function(t){return"".concat(t.getId(),"-").concat(t.getPinned()||"normal")}).join("#"),e=this.viewportColumnsHash!==t;return e&&(this.viewportColumnsHash=t,this.calculateHeaderRows()),e},e.prototype.refreshFlexedColumns=function(t){var e;void 0===t&&(t={});var o=t.source?t.source:"flex";if(null!=t.viewportWidth&&(this.flexViewportWidth=t.viewportWidth),!this.flexViewportWidth)return[];var n=-1;if(t.resizingCols)for(var i=new Set(t.resizingCols),a=this.displayedColumnsCenter,s=a.length-1;s>=0;s--)if(i.has(a[s])){n=s;break}var l=0,u=[],c=0,p=0;for(s=0;s<this.displayedColumnsCenter.length;s++){this.displayedColumnsCenter[s].getFlex()&&s>n?(u.push(this.displayedColumnsCenter[s]),p+=this.displayedColumnsCenter[s].getFlex(),c+=null!==(e=this.displayedColumnsCenter[s].getMinWidth())&&void 0!==e?e:0):l+=this.displayedColumnsCenter[s].getActualWidth()}if(!u.length)return[];var d=[];l+c>this.flexViewportWidth&&(u.forEach(function(t){var e;return t.setActualWidth(null!==(e=t.getMinWidth())&&void 0!==e?e:0,o)}),d=u,u=[]);var h,f=[];t:for(;;){var g=(h=this.flexViewportWidth-l)/p;for(s=0;s<u.length;s++){var y=u[s],v=g*y.getFlex(),m=0,C=y.getMinWidth(),_=y.getMaxWidth();if(r(C)&&v<C?m=C:r(_)&&v>_&&(m=_),m){y.setActualWidth(m,o),vt(u,y),p-=y.getFlex(),d.push(y),l+=y.getActualWidth();continue t}f[s]=Math.round(v)}break}var w=h;return u.forEach(function(t,e){t.setActualWidth(Math.min(f[e],w),o),d.push(t),w-=f[e]}),t.skipSetLeft||this.setLeftValues(o),t.updateBodyWidths&&this.updateBodyWidths(),t.fireResizedEvent&&this.dispatchColumnResizedEvent(d,!0,o,u),u},e.prototype.sizeColumnsToFit=function(t,e,o,n){var i,a,s,l,u,c=this;if(void 0===e&&(e="sizeColumnsToFit"),this.shouldQueueResizeOperations)this.resizeOperationQueue.push(function(){return c.sizeColumnsToFit(t,e,o,n)});else{var p={};n&&(null===(i=null===n||void 0===n?void 0:n.columnLimits)||void 0===i||i.forEach(function(t){var e=t.key,o=ce(t,["key"]);p["string"===typeof e?e:e.getColId()]=o}));var d=this.getAllDisplayedColumns(),h=t===this.getWidthOfColsInList(d);if(!(t<=0||!d.length||h)){var f=[],g=[];d.forEach(function(t){!0===t.getColDef().suppressSizeToFit?g.push(t):f.push(t)});var y=f.slice(0),v=!1,m=function(t){mt(f,t),g.push(t)};for(f.forEach(function(t){var o,r;t.resetActualWidth(e);var i=null===p||void 0===p?void 0:p[t.getId()],a=null!==(o=null===i||void 0===i?void 0:i.minWidth)&&void 0!==o?o:null===n||void 0===n?void 0:n.defaultMinWidth,s=null!==(r=null===i||void 0===i?void 0:i.maxWidth)&&void 0!==r?r:null===n||void 0===n?void 0:n.defaultMaxWidth,l=t.getActualWidth();"number"===typeof a&&l<a?t.setActualWidth(a,e,!0):"number"===typeof s&&l>s&&t.setActualWidth(s,e,!0)});!v;){v=!0;var C=t-this.getWidthOfColsInList(g);if(C<=0)f.forEach(function(t){var o,r,i=null!==(r=null===(o=null===p||void 0===p?void 0:p[t.getId()])||void 0===o?void 0:o.minWidth)&&void 0!==r?r:null===n||void 0===n?void 0:n.defaultMinWidth;"number"!==typeof i?t.setMinimum(e):t.setActualWidth(i,e,!0)});else for(var _=C/this.getWidthOfColsInList(f),w=C,b=f.length-1;b>=0;b--){var S=f[b],E=null===p||void 0===p?void 0:p[S.getId()],x=null!==(a=null===E||void 0===E?void 0:E.minWidth)&&void 0!==a?a:null===n||void 0===n?void 0:n.defaultMinWidth,T=null!==(s=null===E||void 0===E?void 0:E.maxWidth)&&void 0!==s?s:null===n||void 0===n?void 0:n.defaultMaxWidth,O=null!==(l=S.getMinWidth())&&void 0!==l?l:0,R=null!==(u=S.getMaxWidth())&&void 0!==u?u:Number.MAX_VALUE,P="number"===typeof x&&x>O?x:S.getMinWidth(),A="number"===typeof T&&T<R?T:S.getMaxWidth(),D=Math.round(S.getActualWidth()*_);r(P)&&D<P?(D=P,m(S),v=!1):r(A)&&D>A?(D=A,m(S),v=!1):0===b&&(D=w),S.setActualWidth(D,e,!0),w-=D}}y.forEach(function(t){t.fireColumnWidthChangedEvent(e)}),this.setLeftValues(e),this.updateBodyWidths(),o||this.dispatchColumnResizedEvent(y,!0,e)}}},e.prototype.buildDisplayedTrees=function(t){var e=[],o=[],n=[];t.forEach(function(t){switch(t.getPinned()){case"left":e.push(t);break;case"right":o.push(t);break;default:n.push(t)}});var r=new Yt;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(e,r,"left",this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(o,r,"right",this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(n,r,null,this.displayedTreeCentre),this.updateDisplayedMap()},e.prototype.updateDisplayedMap=function(){var t=this;this.displayedColumnsAndGroupsMap={};var e=function(e){t.displayedColumnsAndGroupsMap[e.getUniqueId()]=e};this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeCentre,e),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeLeft,e),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeRight,e)},e.prototype.isDisplayed=function(t){return this.displayedColumnsAndGroupsMap[t.getUniqueId()]===t},e.prototype.updateOpenClosedVisibilityInColumnGroups=function(){var t=this.getAllDisplayedTrees();this.columnUtils.depthFirstAllColumnTreeSearch(t,function(t){t instanceof Kt&&t.calculateDisplayedColumns()})},e.prototype.getGroupAutoColumns=function(){return this.groupAutoColumns},e.prototype.createGroupAutoColumnsIfNeeded=function(){var t=this.forceRecreateAutoGroups;if(this.forceRecreateAutoGroups=!1,!this.autoGroupsNeedBuilding)return!1;this.autoGroupsNeedBuilding=!1;var e=this.gridOptionsService.isGroupUseEntireRow(this.pivotMode),o=this.pivotMode?this.gridOptionsService.get("pivotSuppressAutoColumn"):this.isGroupSuppressAutoColumn();if((this.rowGroupColumns.length>0||this.gridOptionsService.get("treeData"))&&!o&&!e){var n=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns);if(!this.autoColsEqual(n,this.groupAutoColumns)||t)return this.groupAutoColumns=n,!0}else this.groupAutoColumns=null;return!1},e.prototype.isGroupSuppressAutoColumn=function(){return"custom"===this.gridOptionsService.get("groupDisplayType")||"custom"===this.gridOptionsService.get("treeDataDisplayType")},e.prototype.autoColsEqual=function(t,e){return gt(t,e,function(t,e){return t.getColId()===e.getColId()})},e.prototype.getWidthOfColsInList=function(t){return t.reduce(function(t,e){return t+e.getActualWidth()},0)},e.prototype.getFirstDisplayedColumn=function(){var t=this.gridOptionsService.get("enableRtl"),e=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];t&&e.reverse();for(var o=0;o<e.length;o++){var n=this[e[o]]();if(n.length)return t?ft(n):n[0]}return null},e.prototype.setColumnHeaderHeight=function(t,e){if(t.setAutoHeaderHeight(e)){var o={type:qt.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,column:t,columns:[t],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(o)}},e.prototype.getColumnGroupHeaderRowHeight=function(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()},e.prototype.getColumnHeaderRowHeight=function(){var t=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),e=this.getAllDisplayedColumns().filter(function(t){return t.isAutoHeaderHeight()}).map(function(t){return t.getAutoHeaderHeight()||0});return Math.max.apply(Math,de([t],pe(e),!1))},e.prototype.getHeaderHeight=function(){var t;return null!==(t=this.gridOptionsService.get("headerHeight"))&&void 0!==t?t:this.environment.getFromTheme(25,"headerHeight")},e.prototype.getFloatingFiltersHeight=function(){var t;return null!==(t=this.gridOptionsService.get("floatingFiltersHeight"))&&void 0!==t?t:this.getHeaderHeight()},e.prototype.getGroupHeaderHeight=function(){var t;return null!==(t=this.gridOptionsService.get("groupHeaderHeight"))&&void 0!==t?t:this.getHeaderHeight()},e.prototype.getPivotHeaderHeight=function(){var t;return null!==(t=this.gridOptionsService.get("pivotHeaderHeight"))&&void 0!==t?t:this.getHeaderHeight()},e.prototype.getPivotGroupHeaderHeight=function(){var t;return null!==(t=this.gridOptionsService.get("pivotGroupHeaderHeight"))&&void 0!==t?t:this.getGroupHeaderHeight()},e.prototype.queueResizeOperations=function(){this.shouldQueueResizeOperations=!0},e.prototype.processResizeOperations=function(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(function(t){return t()}),this.resizeOperationQueue=[]},e.prototype.resetColumnDefIntoColumn=function(t,e){var o=t.getUserProvidedColDef();if(!o)return!1;var n=this.columnFactory.addColumnDefaultAndTypes(o,t.getColId());return t.setColDef(n,o,e),!0},e.prototype.isColumnGroupingLocked=function(t){var e=this.gridOptionsService.get("groupLockGroupColumns");return!(!t.isRowGroupActive()||0===e)&&(-1===e||e>this.rowGroupColumns.findIndex(function(e){return e.getColId()===t.getColId()}))},e.prototype.generateColumnStateForRowGroupAndPivotIndexes=function(t,e){var o=this,n={},r=function(t,e,r,i,a,s){if(!e.length||!o.primaryColumns)return[];for(var l=Object.keys(t),u=new Set(l),c=new Set(l),p=new Set(e.map(function(t){var e=t.getColId();return c.delete(e),e}).concat(l)),d=[],h={},f=0,g=0;g<o.primaryColumns.length;g++){var y=o.primaryColumns[g].getColId();p.has(y)&&(d.push(y),h[y]=f++)}var v=1e3,m=!1,C=0,_=function(e){for(var o=h[e],n=C;n<o;n++){var r=d[n];c.has(r)&&(t[r][a]=v++,c.delete(r))}C=o};e.forEach(function(e){var o=e.getColId();if(u.has(o))_(o),t[o][a]=v++;else{var l=e.getColDef();if(null===l[a]||void 0===l[a]&&null==l[s]){if(!m)l[r]||void 0===l[r]&&l[i]?_(o):(c.forEach(function(e){t[e][a]=v+h[e]}),v+=d.length,m=!0);n[o]||(n[o]={colId:o}),n[o][a]=v++}}})};return r(t,this.rowGroupColumns,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),r(e,this.pivotColumns,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(n)},e.prototype.onColumnsReady=function(){var t=this,e=this.gridOptionsService.get("autoSizeStrategy");if(e){var o=e.type;setTimeout(function(){if("fitGridWidth"===o){var n=e.columnLimits,r=e.defaultMinWidth,i=e.defaultMaxWidth,a=null===n||void 0===n?void 0:n.map(function(t){return{key:t.colId,minWidth:t.minWidth,maxWidth:t.maxWidth}});t.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:r,defaultMaxWidth:i,columnLimits:a})}else"fitProvidedWidth"===o&&t.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}},e.prototype.onFirstDataRendered=function(){var t=this,e=this.gridOptionsService.get("autoSizeStrategy");if("fitCellContents"===(null===e||void 0===e?void 0:e.type)){var o=e.colIds,n=e.skipHeader;setTimeout(function(){o?t.autoSizeColumns({columns:o,skipHeader:n,source:"autosizeColumns"}):t.autoSizeAllColumns("autosizeColumns",n)})}},le([J("expressionService")],e.prototype,"expressionService",void 0),le([J("columnFactory")],e.prototype,"columnFactory",void 0),le([J("displayedGroupCreator")],e.prototype,"displayedGroupCreator",void 0),le([J("ctrlsService")],e.prototype,"ctrlsService",void 0),le([J("autoWidthCalculator")],e.prototype,"autoWidthCalculator",void 0),le([J("columnUtils")],e.prototype,"columnUtils",void 0),le([J("columnAnimationService")],e.prototype,"columnAnimationService",void 0),le([J("autoGroupColService")],e.prototype,"autoGroupColService",void 0),le([Q("aggFuncService")],e.prototype,"aggFuncService",void 0),le([Q("valueCache")],e.prototype,"valueCache",void 0),le([Q("animationFrameService")],e.prototype,"animationFrameService",void 0),le([J("sortController")],e.prototype,"sortController",void 0),le([J("columnDefFactory")],e.prototype,"columnDefFactory",void 0),le([Y],e.prototype,"init",null),le([Z],e.prototype,"destroyColumns",null),le([ue(0,tt("loggerFactory"))],e.prototype,"setBeans",null),e=le([X("columnModel")],e)}(Bt);function ge(t){return"gridOptionsUpdated"===t?"gridOptionsChanged":t}var ye=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ve=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},me=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ye(e,t),e.prototype.calculateColMinWidth=function(t){return null!=t.minWidth?t.minWidth:this.environment.getMinColWidth()},e.prototype.calculateColMaxWidth=function(t){return null!=t.maxWidth?t.maxWidth:Number.MAX_SAFE_INTEGER},e.prototype.calculateColInitialWidth=function(t){var e,o=this.calculateColMinWidth(t),n=this.calculateColMaxWidth(t),r=l(t.width),i=l(t.initialWidth);return e=null!=r?r:null!=i?i:200,Math.max(Math.min(e,n),o)},e.prototype.getOriginalPathForColumn=function(t,e){var o=[],n=!1,r=function(e,i){for(var a=0;a<e.length;a++){if(n)return;var s=e[a];if(s instanceof dt)r(s.getChildren(),i+1),o[i]=s;else s===t&&(n=!0)}};return r(e,0),n?o:null},e.prototype.depthFirstOriginalTreeSearch=function(t,e,o){var n=this;e&&e.forEach(function(e){e instanceof dt&&n.depthFirstOriginalTreeSearch(e,e.getChildren(),o),o(e,t)})},e.prototype.depthFirstAllColumnTreeSearch=function(t,e){var o=this;t&&t.forEach(function(t){t instanceof Kt&&o.depthFirstAllColumnTreeSearch(t.getChildren(),e),e(t)})},e.prototype.depthFirstDisplayedColumnTreeSearch=function(t,e){var o=this;t&&t.forEach(function(t){t instanceof Kt&&o.depthFirstDisplayedColumnTreeSearch(t.getDisplayedChildren(),e),e(t)})},e=ve([X("columnUtils")],e)}(Bt),Ce=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),_e=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},we=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ce(e,t),e.prototype.createDisplayedGroups=function(t,e,o,n){for(var r=this,i=this.mapOldGroupsById(n),a=[],s=t,l=function(){var t=s;s=[];for(var n=0,l=function(l){var u=n;n=l;var c=t[u],p=(c instanceof Kt?c.getProvidedColumnGroup():c).getOriginalParent();if(null!=p){var d=r.createColumnGroup(p,e,i,o);for(h=u;h<l;h++)d.addChild(t[h]);s.push(d)}else for(var h=u;h<l;h++)a.push(t[h])},u=1;u<t.length;u++){var c=t[u],p=(c instanceof Kt?c.getProvidedColumnGroup():c).getOriginalParent(),d=t[n];p!==(d instanceof Kt?d.getProvidedColumnGroup():d).getOriginalParent()&&l(u)}n<t.length&&l(t.length)};s.length;)l();return this.setupParentsIntoColumns(a,null),a},e.prototype.createColumnGroup=function(t,e,o,n){var i=t.getGroupId(),a=e.getInstanceIdForKey(i),s=o[Kt.createUniqueId(i,a)];return s&&s.getProvidedColumnGroup()!==t&&(s=null),r(s)?s.reset():(s=new Kt(t,i,a,n),this.context.createBean(s)),s},e.prototype.mapOldGroupsById=function(t){var e={},o=function(t){t.forEach(function(t){if(t instanceof Kt){var n=t;e[t.getUniqueId()]=n,o(n.getChildren())}})};return t&&o(t),e},e.prototype.setupParentsIntoColumns=function(t,e){var o=this;t.forEach(function(t){if(t.setParent(e),t instanceof Kt){var n=t;o.setupParentsIntoColumns(n.getChildren(),n)}})},e=_e([X("displayedGroupCreator")],e)}(Bt),be=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},Se=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},Ee={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,excludeHiddenColumnsFromQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,enableChartToolPanelsButton:!0,suppressChartToolPanelsButton:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressParentsInRowNodes:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,suppressAggAtRootLevel:!0,removePivotHeaderRowWhenSingleValueColumn:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,functionsPassive:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0},xe=function(){function t(){}return t.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu"],t.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy"],t.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"],t.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex"],t.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","excludeHiddenColumnsFromQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterMovesDown","enterMovesDownAfterEdit","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","enableChartToolPanelsButton","suppressChartToolPanelsButton","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilterAllLevels","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents"],t.FUNCTIONAL_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher"],t.CALLBACK_PROPERTIES=["getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering"],t.FUNCTION_PROPERTIES=Se(Se([],be(t.FUNCTIONAL_PROPERTIES),!1),be(t.CALLBACK_PROPERTIES),!1),t.ALL_PROPERTIES=Se(Se(Se(Se(Se(Se([],be(t.ARRAY_PROPERTIES),!1),be(t.OBJECT_PROPERTIES),!1),be(t.STRING_PROPERTIES),!1),be(t.NUMBER_PROPERTIES),!1),be(t.FUNCTION_PROPERTIES),!1),be(t.BOOLEAN_PROPERTIES),!1),t}(),Te=function(){return(Te=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Oe=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},Re=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},Pe=function(){function t(){}var e;return t.getCallbackForEvent=function(t){return!t||t.length<2?t:"on"+t[0].toUpperCase()+t.substring(1)},t.getGridOptionKeys=function(){return this.ALL_PROPERTIES_AND_CALLBACKS},t.combineAttributesAndGridOptions=function(e,o){"object"!==typeof e&&(e={});var n=Te({},e);return t.getGridOptionKeys().forEach(function(e){var r=o[e];"undefined"!==typeof r&&r!==t.VUE_OMITTED_PROPERTY&&(n[e]=r)}),n},t.processOnChange=function(e,o){if(e){var n={},r=!1;if(Object.keys(e).filter(function(e){return t.ALL_PROPERTIES_AND_CALLBACKS_SET.has(e)}).forEach(function(t){n[t]=e[t],r=!0}),r){o.__internalUpdateGridOptions(n);var i={type:qt.EVENT_COMPONENT_STATE_CHANGED};y(n,function(t,e){i[t]=e}),o.dispatchEvent(i)}}},e=t,t.EVENTS=p(qt),t.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY",t.EXCLUDED_INTERNAL_EVENTS=[qt.EVENT_SCROLLBAR_WIDTH_CHANGED,qt.EVENT_CHECKBOX_CHANGED,qt.EVENT_HEIGHT_SCALE_CHANGED,qt.EVENT_BODY_HEIGHT_CHANGED,qt.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,qt.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,qt.EVENT_SCROLL_VISIBILITY_CHANGED,qt.EVENT_COLUMN_HOVER_CHANGED,qt.EVENT_FLASH_CELLS,qt.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,qt.EVENT_DISPLAYED_ROWS_CHANGED,qt.EVENT_LEFT_PINNED_WIDTH_CHANGED,qt.EVENT_RIGHT_PINNED_WIDTH_CHANGED,qt.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,qt.EVENT_POPUP_TO_FRONT,qt.EVENT_STORE_UPDATED,qt.EVENT_COLUMN_PANEL_ITEM_DRAG_START,qt.EVENT_COLUMN_PANEL_ITEM_DRAG_END,qt.EVENT_FILL_START,qt.EVENT_FILL_END,qt.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,qt.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,qt.EVENT_FULL_WIDTH_ROW_FOCUSED,qt.EVENT_HEADER_HEIGHT_CHANGED,qt.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,qt.EVENT_CELL_FOCUS_CLEARED,qt.EVENT_GRID_STYLES_CHANGED,qt.EVENT_FILTER_DESTROYED,qt.EVENT_ROW_DATA_UPDATE_STARTED,qt.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,qt.EVENT_DATA_TYPES_INFERRED,qt.EVENT_FIELD_VALUE_CHANGED,qt.EVENT_FIELD_PICKER_VALUE_SELECTED,qt.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,qt.EVENT_SUPPRESS_MENU_HIDE_CHANGED,qt.EVENT_SUPPRESS_FIELD_DOT_NOTATION,qt.EVENT_ROW_COUNT_READY,qt.EVENT_SIDE_BAR_UPDATED],t.PUBLIC_EVENTS=t.EVENTS.filter(function(e){return!St(t.EXCLUDED_INTERNAL_EVENTS,e)}),t.EVENT_CALLBACKS=t.EVENTS.map(function(e){return t.getCallbackForEvent(e)}),t.STRING_PROPERTIES=xe.STRING_PROPERTIES,t.OBJECT_PROPERTIES=xe.OBJECT_PROPERTIES,t.ARRAY_PROPERTIES=xe.ARRAY_PROPERTIES,t.NUMBER_PROPERTIES=xe.NUMBER_PROPERTIES,t.BOOLEAN_PROPERTIES=xe.BOOLEAN_PROPERTIES,t.FUNCTION_PROPERTIES=xe.FUNCTION_PROPERTIES,t.ALL_PROPERTIES=xe.ALL_PROPERTIES,t.ALL_PROPERTIES_AND_CALLBACKS=Re(Re([],Oe(e.ALL_PROPERTIES),!1),Oe(e.EVENT_CALLBACKS),!1),t.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(t.ALL_PROPERTIES_AND_CALLBACKS),t}(),Ae=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),De=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Me=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.componentsMappedByName={},e}return Ae(e,t),e.prototype.setupComponents=function(t){var e=this;t&&t.forEach(function(t){return e.addComponent(t)})},e.prototype.addComponent=function(t){var e=t.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().toUpperCase();this.componentsMappedByName[e]=t.componentClass},e.prototype.getComponentClass=function(t){return this.componentsMappedByName[t]},e=De([X("agStackComponentsRegistry")],e)}(Bt);function Ie(t,e,o){null==o||"string"===typeof o&&""==o?Fe(t,e):Le(t,e,o)}function Le(t,e,o){t.setAttribute(Ne(e),o.toString())}function Fe(t,e){t.removeAttribute(Ne(e))}function Ne(t){return"aria-".concat(t)}function ke(t,e){e?t.setAttribute("role",e):t.removeAttribute("role")}function Ge(t){return"asc"===t?"ascending":"desc"===t?"descending":"mixed"===t?"other":"none"}function Ve(t){return parseInt(t.getAttribute("aria-posinset"),10)}function Be(t){return t.getAttribute("aria-label")}function ze(t,e){Ie(t,"label",e)}function He(t,e){Ie(t,"labelledby",e)}function je(t,e){Ie(t,"live",e)}function Ue(t,e){Ie(t,"atomic",e)}function We(t,e){Ie(t,"relevant",e)}function Ke(t,e){Ie(t,"level",e)}function qe(t,e){Ie(t,"disabled",e)}function Ye(t,e){Ie(t,"hidden",e)}function Ze(t,e){Ie(t,"activedescendant",e)}function Xe(t,e){Le(t,"expanded",e)}function Je(t){Fe(t,"expanded")}function Qe(t,e){Le(t,"setsize",e)}function $e(t,e){Le(t,"posinset",e)}function to(t,e){Le(t,"multiselectable",e)}function eo(t,e){Le(t,"rowcount",e)}function oo(t,e){Le(t,"rowindex",e)}function no(t,e){Le(t,"colcount",e)}function ro(t,e){Le(t,"colindex",e)}function io(t,e){Le(t,"colspan",e)}function ao(t,e){Le(t,"sort",e)}function so(t){Fe(t,"sort")}function lo(t,e){Ie(t,"selected",e)}function uo(t,e){Ie(t,"controls",e.id),He(e,t.id)}function co(t,e){return void 0===e?t("ariaIndeterminate","indeterminate"):!0===e?t("ariaChecked","checked"):t("ariaUnchecked","unchecked")}var po,ho,fo,go,yo,vo,mo,Co,_o=Object.freeze({__proto__:null,setAriaRole:ke,getAriaSortState:Ge,getAriaLevel:function(t){return parseInt(t.getAttribute("aria-level"),10)},getAriaPosInSet:Ve,getAriaLabel:Be,setAriaLabel:ze,setAriaLabelledBy:He,setAriaDescribedBy:function(t,e){Ie(t,"describedby",e)},setAriaLive:je,setAriaAtomic:Ue,setAriaRelevant:We,setAriaLevel:Ke,setAriaDisabled:qe,setAriaHidden:Ye,setAriaActiveDescendant:Ze,setAriaExpanded:Xe,removeAriaExpanded:Je,setAriaSetSize:Qe,setAriaPosInSet:$e,setAriaMultiSelectable:to,setAriaRowCount:eo,setAriaRowIndex:oo,setAriaColCount:no,setAriaColIndex:ro,setAriaColSpan:io,setAriaSort:ao,removeAriaSort:so,setAriaSelected:lo,setAriaChecked:function(t,e){Le(t,"checked",void 0===e?"mixed":e)},setAriaControls:uo,getAriaCheckboxStateName:co});function wo(){return void 0===po&&(po=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),po}function bo(){if(void 0===ho)if(wo()){var t=navigator.userAgent.match(/version\/(\d+)/i);t&&(ho=null!=t[1]?parseFloat(t[1]):0)}else ho=0;return ho}function So(){if(void 0===fo){var t=window;fo=!!t.chrome&&(!!t.chrome.webstore||!!t.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return fo}function Eo(){return void 0===go&&(go=/(firefox)/i.test(navigator.userAgent)),go}function xo(){return void 0===yo&&(yo=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),yo}function To(){return void 0===vo&&(vo=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),vo}function Oo(){return!wo()||bo()>=15}function Ro(t){if(!t)return null;var e=t.tabIndex,o=t.getAttribute("tabIndex");return-1!==e||null!==o&&(""!==o||Eo())?e.toString():null}function Po(){if(!document.body)return-1;var t=1e6,e=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,o=document.createElement("div");for(document.body.appendChild(o);;){var n=2*t;if(o.style.height=n+"px",n>e||o.clientHeight!==n)break;t=n}return document.body.removeChild(o),t}function Ao(){var t,e,o;return null!==(e=null===(t=document.body)||void 0===t?void 0:t.clientWidth)&&void 0!==e?e:window.innerHeight||(null===(o=document.documentElement)||void 0===o?void 0:o.clientWidth)||-1}function Do(){var t,e,o;return null!==(e=null===(t=document.body)||void 0===t?void 0:t.clientHeight)&&void 0!==e?e:window.innerHeight||(null===(o=document.documentElement)||void 0===o?void 0:o.clientHeight)||-1}function Mo(){return null==Co&&Io(),Co}function Io(){var t=document.body,e=document.createElement("div");e.style.width=e.style.height="100px",e.style.opacity="0",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",e.style.position="absolute",t.appendChild(e);var o=e.offsetWidth-e.clientWidth;0===o&&0===e.clientWidth&&(o=null),e.parentNode&&e.parentNode.removeChild(e),null!=o&&(Co=o,mo=0===o)}function Lo(){return null==mo&&Io(),mo}var Fo=Object.freeze({__proto__:null,isBrowserSafari:wo,getSafariVersion:bo,isBrowserChrome:So,isBrowserFirefox:Eo,isMacOsUserAgent:xo,isIOSUserAgent:To,browserSupportsPreventScroll:Oo,getTabIndex:Ro,getMaxDivHeight:Po,getBodyWidth:Ao,getBodyHeight:Do,getScrollbarWidth:Mo,isInvisibleScrollbar:Lo});function No(t,e){return t.toString().padStart(e,"0")}function ko(t,e){for(var o=[],n=t;n<=e;n++)o.push(n);return o}function Go(t,e,o){return"number"!==typeof t?"":t.toString().replace(".",o).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1".concat(e))}var Vo=Object.freeze({__proto__:null,padStartWidthZeros:No,createArrayOfNumbers:ko,cleanNumber:function(t){return"string"===typeof t&&(t=parseInt(t,10)),"number"===typeof t?Math.floor(t):null},decToHex:function(t,e){for(var o="",n=0;n<e;n++)o+=String.fromCharCode(255&t),t>>>=8;return o},formatNumberTwoDecimalPlacesAndCommas:function(t,e,o){return"number"!==typeof t?"":Go(Math.round(100*t)/100,e,o)},formatNumberCommas:Go,sum:function(t){return null==t?null:t.reduce(function(t,e){return t+e},0)}}),Bo=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a};function zo(t,e,o){if(void 0===e&&(e=!0),void 0===o&&(o="-"),!t)return null;var n=[t.getFullYear(),t.getMonth()+1,t.getDate()].map(function(t){return No(t,2)}).join(o);return e&&(n+=" "+[t.getHours(),t.getMinutes(),t.getSeconds()].map(function(t){return No(t,2)}).join(":")),n}var Ho=function(t){if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function jo(t,e){void 0===e&&(e="YYYY-MM-DD");var o=No(t.getFullYear(),4),n=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i={YYYY:function(){return o.slice(o.length-4,o.length)},YY:function(){return o.slice(o.length-2,o.length)},Y:function(){return"".concat(t.getFullYear())},MMMM:function(){return n[t.getMonth()]},MMM:function(){return n[t.getMonth()].slice(0,3)},MM:function(){return No(t.getMonth()+1,2)},Mo:function(){return"".concat(t.getMonth()+1).concat(Ho(t.getMonth()+1))},M:function(){return"".concat(t.getMonth()+1)},Do:function(){return"".concat(t.getDate()).concat(Ho(t.getDate()))},DD:function(){return No(t.getDate(),2)},D:function(){return"".concat(t.getDate())},dddd:function(){return r[t.getDay()]},ddd:function(){return r[t.getDay()].slice(0,3)},dd:function(){return r[t.getDay()].slice(0,2)},do:function(){return"".concat(t.getDay()).concat(Ho(t.getDay()))},d:function(){return"".concat(t.getDay())}},a=new RegExp(Object.keys(i).join("|"),"g");return e.replace(a,function(t){return t in i?i[t]():t})}function Uo(t){if(!t)return null;var e=Bo(t.split(" "),2),o=e[0],n=e[1];if(!o)return null;var r=o.split("-").map(function(t){return parseInt(t,10)});if(3!==r.filter(function(t){return!isNaN(t)}).length)return null;var i=Bo(r,3),a=i[0],s=i[1],l=i[2],u=new Date(a,s-1,l);if(u.getFullYear()!==a||u.getMonth()!==s-1||u.getDate()!==l)return null;if(!n||"00:00:00"===n)return u;var c=Bo(n.split(":").map(function(t){return parseInt(t,10)}),3),p=c[0],d=c[1],h=c[2];return p>=0&&p<24&&u.setHours(p),d>=0&&d<60&&u.setMinutes(d),h>=0&&h<60&&u.setSeconds(h),u}var Wo,Ko=Object.freeze({__proto__:null,serialiseDate:zo,dateToFormattedString:jo,parseDateTimeFromString:Uo}),qo=function(t){var e="function"===typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yo=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a};function Zo(t,e,o){for(var n=t.parentElement,r=n&&n.firstChild;r;)e&&r.classList.toggle(e,r===t),o&&r.classList.toggle(o,r!==t),r=r.nextSibling}var Xo="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function Jo(t){var e=Element.prototype.matches||Element.prototype.msMatchesSelector,o=e.call(t,"input, select, button, textarea"),n=e.call(t,Xo),r=gn(t);return o&&!n&&r}function Qo(t,e,o){void 0===o&&(o={});var n=o.skipAriaHidden;t.classList.toggle("ag-hidden",!e),n||Ye(t,!e)}function $o(t,e,o){void 0===o&&(o={});var n=o.skipAriaHidden;t.classList.toggle("ag-invisible",!e),n||Ye(t,!e)}function tn(t,e){var o=e?function(t){return t.setAttribute("disabled","")}:function(t){return t.removeAttribute("disabled")};o(t),Dn(t.querySelectorAll("input"),function(t){return o(t)})}function en(t,e,o){for(var n=0;t;){if(t.classList.contains(e))return!0;if(t=t.parentElement,"number"==typeof o){if(++n>o)break}else if(t===o)break}return!1}function on(t){var e=window.getComputedStyle(t),o=e.height,n=e.width,r=e.borderTopWidth,i=e.borderRightWidth,a=e.borderBottomWidth,s=e.borderLeftWidth,l=e.paddingTop,u=e.paddingRight,c=e.paddingBottom,p=e.paddingLeft,d=e.marginTop,h=e.marginRight,f=e.marginBottom,g=e.marginLeft,y=e.boxSizing;return{height:parseFloat(o||"0"),width:parseFloat(n||"0"),borderTopWidth:parseFloat(r||"0"),borderRightWidth:parseFloat(i||"0"),borderBottomWidth:parseFloat(a||"0"),borderLeftWidth:parseFloat(s||"0"),paddingTop:parseFloat(l||"0"),paddingRight:parseFloat(u||"0"),paddingBottom:parseFloat(c||"0"),paddingLeft:parseFloat(p||"0"),marginTop:parseFloat(d||"0"),marginRight:parseFloat(h||"0"),marginBottom:parseFloat(f||"0"),marginLeft:parseFloat(g||"0"),boxSizing:y}}function nn(t){var e=on(t);return"border-box"===e.boxSizing?e.height-e.paddingTop-e.paddingBottom:e.height}function rn(t){var e=on(t);return"border-box"===e.boxSizing?e.width-e.paddingLeft-e.paddingRight:e.width}function an(t){var e=on(t),o=e.marginBottom+e.marginTop;return Math.ceil(t.offsetHeight+o)}function sn(t){var e=on(t),o=e.marginLeft+e.marginRight;return Math.ceil(t.offsetWidth+o)}function ln(t){var e=t.getBoundingClientRect(),o=on(t),n=o.borderTopWidth,r=o.borderLeftWidth,i=o.borderRightWidth,a=o.borderBottomWidth;return{top:e.top+(n||0),left:e.left+(r||0),right:e.right+(i||0),bottom:e.bottom+(a||0)}}function un(){if("boolean"===typeof Wo)return Wo;var t=document.createElement("div");return t.style.direction="rtl",t.style.width="1px",t.style.height="1px",t.style.position="fixed",t.style.top="0px",t.style.overflow="hidden",t.dir="rtl",t.innerHTML='<div style="width: 2px">\n            <span style="display: inline-block; width: 1px"></span>\n            <span style="display: inline-block; width: 1px"></span>\n        </div>',document.body.appendChild(t),t.scrollLeft=1,Wo=0===Math.floor(t.scrollLeft),document.body.removeChild(t),Wo}function cn(t,e){var o=t.scrollLeft;return e&&(o=Math.abs(o),So()&&!un()&&(o=t.scrollWidth-t.clientWidth-o)),o}function pn(t,e,o){o&&(un()?e*=-1:(wo()||So())&&(e=t.scrollWidth-t.clientWidth-e)),t.scrollLeft=e}function dn(t){for(;t&&t.firstChild;)t.removeChild(t.firstChild)}function hn(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function fn(t){return!!t.offsetParent}function gn(t){var e=t;return e.checkVisibility?e.checkVisibility({checkVisibilityCSS:!0}):!(!fn(t)||"visible"!==window.getComputedStyle(t).visibility)}function yn(t){var e=document.createElement("div");return e.innerHTML=(t||"").trim(),e.firstChild}function vn(t,e,o){o&&o.nextSibling===e||(o?o.nextSibling?t.insertBefore(e,o.nextSibling):t.appendChild(e):t.firstChild&&t.firstChild!==e&&t.insertAdjacentElement("afterbegin",e))}function mn(t,e){for(var o=0;o<e.length;o++){var n=e[o],r=t.children[o];r!==n&&t.insertBefore(n,r)}}function Cn(t,e,o){o?o.insertAdjacentElement("afterend",e):t.firstChild?t.insertAdjacentElement("afterbegin",e):t.appendChild(e)}function _n(t,e){var o,n;if(e)try{for(var r=qo(Object.entries(e)),i=r.next();!i.done;i=r.next()){var a=Yo(i.value,2),s=a[0],l=a[1];if(s&&s.length&&null!=l){var u=ne(s),c=l.toString(),p=c.replace(/\s*!important/g,""),d=p.length!=c.length?"important":void 0;t.style.setProperty(u,p,d)}}}catch(h){o={error:h}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}}function wn(t){return t.clientWidth<t.scrollWidth}function bn(t){return t.clientHeight<t.scrollHeight}function Sn(t,e){"flex"===e?(t.style.removeProperty("width"),t.style.removeProperty("minWidth"),t.style.removeProperty("maxWidth"),t.style.flex="1 1 auto"):En(t,e)}function En(t,e){e=Tn(e),t.style.width=e.toString(),t.style.maxWidth=e.toString(),t.style.minWidth=e.toString()}function xn(t,e){e=Tn(e),t.style.height=e.toString(),t.style.maxHeight=e.toString(),t.style.minHeight=e.toString()}function Tn(t){return"number"===typeof t?"".concat(t,"px"):t}function On(t){return t instanceof Node||t instanceof HTMLElement}function Rn(t){if(null==t)return[];var e=[];return Dn(t,function(t){return e.push(t)}),e}function Pn(t,e){if(t)for(var o=0;o<t.length;o++){var n=t[o];e(n.name,n.value)}}function An(t,e,o){null==o?t.removeAttribute(e):t.setAttribute(e,o.toString())}function Dn(t,e){if(null!=t)for(var o=0;o<t.length;o++)e(t[o])}function Mn(t,e){t.then(function(t){var o=t.getGui();null!=o&&("object"===typeof o?e.appendChild(o):e.innerHTML=o)})}var In=Object.freeze({__proto__:null,radioCssClass:Zo,FOCUSABLE_SELECTOR:"[tabindex], input, select, button, textarea, [href]",FOCUSABLE_EXCLUDE:Xo,isFocusableFormField:Jo,setDisplayed:Qo,setVisible:$o,setDisabled:tn,isElementChildOfClass:en,getElementSize:on,getInnerHeight:nn,getInnerWidth:rn,getAbsoluteHeight:an,getAbsoluteWidth:sn,getElementRectWithOffset:ln,isRtlNegativeScroll:un,getScrollLeft:cn,setScrollLeft:pn,clearElement:dn,removeFromParent:hn,isInDOM:fn,isVisible:gn,loadTemplate:yn,ensureDomOrder:vn,setDomChildOrder:mn,insertWithDomOrder:Cn,addStylesToElement:_n,isHorizontalScrollShowing:wn,isVerticalScrollShowing:bn,setElementWidth:Sn,setFixedWidth:En,setElementHeight:function(t,e){"flex"===e?(t.style.removeProperty("height"),t.style.removeProperty("minHeight"),t.style.removeProperty("maxHeight"),t.style.flex="1 1 auto"):xn(t,e)},setFixedHeight:xn,formatSize:Tn,isNodeOrElement:On,copyNodeList:Rn,iterateNamedNodeMap:Pn,addOrRemoveAttribute:An,nodeListForEach:Dn,bindCellRendererToHtmlElement:Mn}),Ln=function(t){var e="function"===typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Fn(t,e,o){var n={},r=t.filter(function(t){return!e.some(function(e){return e===t})});return r.length>0&&r.forEach(function(t){return n[t]=Nn(t,o).values}),n}function Nn(t,e,o,n){var r,i,a=e.map(function(e,o){return{value:e,relevance:kn(t.toLowerCase(),e.toLocaleLowerCase()),idx:o}});if(a.sort(function(t,e){return e.relevance-t.relevance}),o&&(a=a.filter(function(t){return 0!==t.relevance})),a.length>0&&n&&n>0){var s=a[0].relevance*n;a=a.filter(function(t){return s-t.relevance<0})}var l=[],u=[];try{for(var c=Ln(a),p=c.next();!p.done;p=c.next()){var d=p.value;l.push(d.value),u.push(d.idx)}}catch(h){r={error:h}}finally{try{p&&!p.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return{values:l,indices:u}}function kn(t,e){for(var o=t.replace(/\s/g,""),n=e.replace(/\s/g,""),r=0,i=-1,a=0;a<o.length;a++){var s=n.indexOf(o[a],i+1);-1!==s&&(r+=100-100*(i=s)/1e4*100)}return r}var Gn=Object.freeze({__proto__:null,fuzzyCheckStrings:Fn,fuzzySuggestions:Nn}),Vn={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus"};function Bn(t,e,o){var n=zn(t,e,o);if(n){var r=n.className;if("string"===typeof r&&r.indexOf("ag-icon")>-1||"object"===typeof r&&r["ag-icon"])return n}var i=document.createElement("span");return i.appendChild(n),i}function zn(t,e,o,n){var r=null,i=o&&o.getColDef().icons;if(i&&(r=i[t]),e&&!r){var a=e.get("icons");a&&(r=a[t])}if(!r){var s=document.createElement("span"),l=Vn[t];return l||(n?l=t:(console.warn("AG Grid: Did not find icon ".concat(t)),l="")),s.setAttribute("class","ag-icon ag-icon-".concat(l)),s.setAttribute("unselectable","on"),ke(s,"presentation"),s}var u=void 0;if("function"===typeof r)u=r();else{if("string"!==typeof r)throw new Error("icon from grid options needs to be a string or a function");u=r}return"string"===typeof u?yn(u):On(u)?u:void console.warn("AG Grid: iconRenderer should return back a string or a dom object")}var Hn=Object.freeze({__proto__:null,iconNameClassMap:Vn,createIcon:Bn,createIconNoSpan:zn}),jn=function(){function t(){}return t.BACKSPACE="Backspace",t.TAB="Tab",t.ENTER="Enter",t.ESCAPE="Escape",t.SPACE=" ",t.LEFT="ArrowLeft",t.UP="ArrowUp",t.RIGHT="ArrowRight",t.DOWN="ArrowDown",t.DELETE="Delete",t.F2="F2",t.PAGE_UP="PageUp",t.PAGE_DOWN="PageDown",t.PAGE_HOME="Home",t.PAGE_END="End",t.A="KeyA",t.C="KeyC",t.D="KeyD",t.V="KeyV",t.X="KeyX",t.Y="KeyY",t.Z="KeyZ",t}(),Un=65,Wn=67,Kn=86,qn=68,Yn=90,Zn=89;function Xn(t){return!(t.altKey||t.ctrlKey||t.metaKey)&&1===t.key.length}function Jn(t,e,o,n,r){var i=n?n.getColDef().suppressKeyboardEvent:void 0;if(!i)return!1;var a=t.addGridCommonParams({event:e,editing:r,column:n,node:o,data:o.data,colDef:n.getColDef()});if(i&&i(a))return!0;return!1}function Qn(t,e,o,n){var i=n.getDefinition(),a=i&&i.suppressHeaderKeyboardEvent;return!!r(a)&&!!a(t.addGridCommonParams({colDef:i,column:n,headerRowIndex:o,event:e}))}function $n(t){var e;switch(t.keyCode){case Un:e=jn.A;break;case Wn:e=jn.C;break;case Kn:e=jn.V;break;case qn:e=jn.D;break;case Yn:e=jn.Z;break;case Zn:e=jn.Y;break;default:e=t.code}return e}function tr(t,e){return void 0===e&&(e=!1),t===jn.DELETE||!e&&t===jn.BACKSPACE&&xo()}var er=Object.freeze({__proto__:null,isEventFromPrintableCharacter:Xn,isUserSuppressingKeyboardEvent:Jn,isUserSuppressingHeaderKeyboardEvent:Qn,normaliseQwertyAzerty:$n,isDeleteKey:tr});function or(t,e,o){if(0===o)return!1;var n=Math.abs(t.clientX-e.clientX),r=Math.abs(t.clientY-e.clientY);return Math.max(n,r)<=o}var nr=Object.freeze({__proto__:null,areEventsNear:or});var rr=Object.freeze({__proto__:null,sortRowNodesByOrder:function(t,e){if(!t)return!1;for(var o=function(t,o){var n=e[t.id],r=e[o.id],i=void 0!==n,a=void 0!==r;return i&&a?n-r:i||a?i?1:-1:t.__objectId-o.__objectId},n=!1,r=0;r<t.length-1;r++)if(o(t[r],t[r+1])>0){n=!0;break}return!!n&&(t.sort(o),!0)}});function ir(t){var e=new Set;return t.forEach(function(t){return e.add(t)}),e}var ar,sr=Object.freeze({__proto__:null,convertToSet:ir}),lr=function(){return(lr=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},ur=lr(lr(lr(lr(lr(lr(lr(lr(lr(lr(lr(lr(lr(lr(lr(lr(lr(lr({},_o),Tt),Fo),Ko),In),Gt),B),Gn),d),Hn),er),ae),nr),Vo),E),rr),sr),re),cr=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=1),this.nextValue=t,this.step=e}return t.prototype.next=function(){var t=this.nextValue;return this.nextValue+=this.step,t},t.prototype.peek=function(){return this.nextValue},t.prototype.skip=function(t){this.nextValue+=t},t}();!function(t){t[t.IN_PROGRESS=0]="IN_PROGRESS",t[t.RESOLVED=1]="RESOLVED"}(ar||(ar={}));var pr,dr,hr=function(){function t(t){var e=this;this.status=ar.IN_PROGRESS,this.resolution=null,this.waiters=[],t(function(t){return e.onDone(t)},function(t){return e.onReject(t)})}return t.all=function(e){return new t(function(t){var o=e.length,n=new Array(o);e.forEach(function(e,r){e.then(function(e){n[r]=e,0===--o&&t(n)})})})},t.resolve=function(e){return void 0===e&&(e=null),new t(function(t){return t(e)})},t.prototype.then=function(e){var o=this;return new t(function(t){o.status===ar.RESOLVED?t(e(o.resolution)):o.waiters.push(function(o){return t(e(o))})})},t.prototype.resolveNow=function(t,e){return this.status===ar.RESOLVED?e(this.resolution):t},t.prototype.onDone=function(t){this.status=ar.RESOLVED,this.resolution=t,this.waiters.forEach(function(e){return e(t)})},t.prototype.onReject=function(t){console.warn("TBI")},t}(),fr=function(){function t(){this.timestamp=(new Date).getTime()}return t.prototype.print=function(t){var e=(new Date).getTime()-this.timestamp;console.info("".concat(t," = ").concat(e)),this.timestamp=(new Date).getTime()},t}(),gr=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),yr=function(){return(yr=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},vr=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};!function(t){t[t.NOTHING=0]="NOTHING",t[t.WAITING_TO_SHOW=1]="WAITING_TO_SHOW",t[t.SHOWING=2]="SHOWING"}(pr||(pr={})),function(t){t[t.HOVER=0]="HOVER",t[t.FOCUS=1]="FOCUS"}(dr||(dr={}));var mr=function(t){function e(e,o,n){var r=t.call(this)||this;return r.parentComp=e,r.tooltipShowDelayOverride=o,r.tooltipHideDelayOverride=n,r.SHOW_QUICK_TOOLTIP_DIFF=1e3,r.FADE_OUT_TOOLTIP_TIMEOUT=1e3,r.INTERACTIVE_HIDE_DELAY=100,r.interactionEnabled=!1,r.isInteractingWithTooltip=!1,r.state=pr.NOTHING,r.tooltipInstanceCount=0,r.tooltipMouseTrack=!1,r}return gr(e,t),e.prototype.postConstruct=function(){this.gridOptionsService.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gridOptionsService.get("tooltipMouseTrack");var t=this.parentComp.getGui();this.tooltipTrigger===dr.HOVER&&(this.addManagedListener(t,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(t,"mouseleave",this.onMouseLeave.bind(this))),this.tooltipTrigger===dr.FOCUS&&(this.addManagedListener(t,"focusin",this.onFocusIn.bind(this)),this.addManagedListener(t,"focusout",this.onFocusOut.bind(this))),this.addManagedListener(t,"mousemove",this.onMouseMove.bind(this)),this.interactionEnabled||(this.addManagedListener(t,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(t,"keydown",this.onKeyDown.bind(this)))},e.prototype.getGridOptionsTooltipDelay=function(t){var e=this.gridOptionsService.get(t);return e<0&&O("".concat(t," should not be lower than 0")),Math.max(200,e)},e.prototype.getTooltipDelay=function(t){var e,o;return"show"===t?null!==(e=this.tooltipShowDelayOverride)&&void 0!==e?e:this.getGridOptionsTooltipDelay("tooltipShowDelay"):null!==(o=this.tooltipHideDelayOverride)&&void 0!==o?o:this.getGridOptionsTooltipDelay("tooltipHideDelay")},e.prototype.destroy=function(){this.setToDoNothing(),t.prototype.destroy.call(this)},e.prototype.getTooltipTrigger=function(){var t=this.gridOptionsService.get("tooltipTrigger");return t&&"hover"!==t?dr.FOCUS:dr.HOVER},e.prototype.onMouseEnter=function(t){var o=this;this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),To()||(e.isLocked?this.showTooltipTimeoutId=window.setTimeout(function(){o.prepareToShowTooltip(t)},this.INTERACTIVE_HIDE_DELAY):this.prepareToShowTooltip(t))},e.prototype.onMouseMove=function(t){this.lastMouseEvent&&(this.lastMouseEvent=t),this.tooltipMouseTrack&&this.state===pr.SHOWING&&this.tooltipComp&&this.positionTooltip()},e.prototype.onMouseDown=function(){this.setToDoNothing()},e.prototype.onMouseLeave=function(){this.interactionEnabled?this.lockService():this.setToDoNothing()},e.prototype.onFocusIn=function(){this.prepareToShowTooltip()},e.prototype.onFocusOut=function(t){var e,o=t.relatedTarget,n=this.parentComp.getGui(),r=null===(e=this.tooltipComp)||void 0===e?void 0:e.getGui();this.isInteractingWithTooltip||n.contains(o)||this.interactionEnabled&&(null===r||void 0===r?void 0:r.contains(o))||this.setToDoNothing()},e.prototype.onKeyDown=function(){this.setToDoNothing()},e.prototype.prepareToShowTooltip=function(t){if(this.state!=pr.NOTHING||e.isLocked)return!1;var o=0;return t&&(o=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=t||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),o),this.state=pr.WAITING_TO_SHOW,!0},e.prototype.isLastTooltipHiddenRecently=function(){return(new Date).getTime()-e.lastTooltipHideTime<this.SHOW_QUICK_TOOLTIP_DIFF},e.prototype.setToDoNothing=function(){this.state===pr.SHOWING&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=pr.NOTHING,this.lastMouseEvent=null},e.prototype.showTooltip=function(){var t=yr({},this.parentComp.getTooltipParams());if(r(t.value)){this.state=pr.SHOWING,this.tooltipInstanceCount++;var e=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(t).newAgStackInstance().then(e)}else this.setToDoNothing()},e.prototype.hideTooltip=function(t){if(t||!this.isInteractingWithTooltip){this.tooltipComp&&(this.destroyTooltipComp(),e.lastTooltipHideTime=(new Date).getTime());var o={type:qt.EVENT_TOOLTIP_HIDE,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(o),this.state=pr.NOTHING}},e.prototype.newTooltipComponentCallback=function(t,e){if(this.state!==pr.SHOWING||this.tooltipInstanceCount!==t)this.getContext().destroyBean(e);else{var o=e.getGui();this.tooltipComp=e,o.classList.contains("ag-tooltip")||o.classList.add("ag-tooltip-custom"),this.tooltipTrigger===dr.HOVER&&o.classList.add("ag-tooltip-animate"),this.interactionEnabled&&o.classList.add("ag-tooltip-interactive");var n=this.localeService.getLocaleTextFunc(),r=this.popupService.addPopup({eChild:o,ariaLabel:n("ariaLabelTooltip","Tooltip")});r&&(this.tooltipPopupDestroyFunc=r.hideFunc),this.positionTooltip(),this.tooltipTrigger===dr.FOCUS&&(this.onBodyScrollEventCallback=this.addManagedListener(this.eventService,qt.EVENT_BODY_SCROLL,this.setToDoNothing.bind(this)),this.onColumnMovedEventCallback=this.addManagedListener(this.eventService,qt.EVENT_COLUMN_MOVED,this.setToDoNothing.bind(this))),this.interactionEnabled&&(this.tooltipTrigger===dr.HOVER?(this.tooltipMouseEnterListener=this.addManagedListener(o,"mouseenter",this.onTooltipMouseEnter.bind(this))||null,this.tooltipMouseLeaveListener=this.addManagedListener(o,"mouseleave",this.onTooltipMouseLeave.bind(this))||null):(this.tooltipFocusInListener=this.addManagedListener(o,"focusin",this.onTooltipFocusIn.bind(this))||null,this.tooltipFocusOutListener=this.addManagedListener(o,"focusout",this.onTooltipFocusOut.bind(this))||null));var i={type:qt.EVENT_TOOLTIP_SHOW,tooltipGui:o,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(i),this.startHideTimeout()}},e.prototype.onTooltipMouseEnter=function(){this.isInteractingWithTooltip=!0,this.unlockService()},e.prototype.onTooltipMouseLeave=function(){this.isInteractingWithTooltip=!1,this.lockService()},e.prototype.onTooltipFocusIn=function(){this.isInteractingWithTooltip=!0},e.prototype.onTooltipFocusOut=function(t){var e,o=this.parentComp.getGui(),n=null===(e=this.tooltipComp)||void 0===e?void 0:e.getGui(),r=t.relatedTarget;null!==n&&void 0!==n&&n.contains(r)||(this.isInteractingWithTooltip=!1,o.contains(r)?this.startHideTimeout():this.hideTooltip())},e.prototype.positionTooltip=function(){var t={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(yr(yr({},t),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(yr(yr({},t),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))},e.prototype.destroyTooltipComp=function(){var t=this;this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");var e=this.tooltipPopupDestroyFunc,o=this.tooltipComp,n=this.tooltipTrigger===dr.HOVER?this.FADE_OUT_TOOLTIP_TIMEOUT:0;window.setTimeout(function(){e(),t.getContext().destroyBean(o)},n),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0},e.prototype.clearTooltipListeners=function(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(function(t){t&&t()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null},e.prototype.lockService=function(){var t=this;e.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(function(){t.unlockService(),t.setToDoNothing()},this.INTERACTIVE_HIDE_DELAY)},e.prototype.unlockService=function(){e.isLocked=!1,this.clearInteractiveTimeout()},e.prototype.startHideTimeout=function(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))},e.prototype.clearShowTimeout=function(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)},e.prototype.clearHideTimeout=function(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)},e.prototype.clearInteractiveTimeout=function(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)},e.prototype.clearTimeouts=function(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()},e.isLocked=!1,vr([J("popupService")],e.prototype,"popupService",void 0),vr([J("userComponentFactory")],e.prototype,"userComponentFactory",void 0),vr([Y],e.prototype,"postConstruct",null),e}(Bt),Cr=function(){function t(t){this.cssClassStates={},this.getGui=t}return t.prototype.addCssClass=function(t){var e=this,o=(t||"").split(" ");if(o.length>1)o.forEach(function(t){return e.addCssClass(t)});else if(!0!==this.cssClassStates[t]&&t.length){var n=this.getGui();n&&n.classList.add(t),this.cssClassStates[t]=!0}},t.prototype.removeCssClass=function(t){var e=this,o=(t||"").split(" ");if(o.length>1)o.forEach(function(t){return e.removeCssClass(t)});else if(!1!==this.cssClassStates[t]&&t.length){var n=this.getGui();n&&n.classList.remove(t),this.cssClassStates[t]=!1}},t.prototype.containsCssClass=function(t){var e=this.getGui();return!!e&&e.classList.contains(t)},t.prototype.addOrRemoveCssClass=function(t,e){var o=this;if(t){if(t.indexOf(" ")>=0){var n=(t||"").split(" ");if(n.length>1)return void n.forEach(function(t){return o.addOrRemoveCssClass(t,e)})}if(this.cssClassStates[t]!==e&&t.length){var r=this.getGui();r&&r.classList.toggle(t,e),this.cssClassStates[t]=e}}},t}(),_r=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),wr=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},br=new cr,Sr=function(t){function e(e){var o=t.call(this)||this;return o.displayed=!0,o.visible=!0,o.compId=br.next(),o.cssClassManager=new Cr(function(){return o.eGui}),e&&o.setTemplate(e),o}return _r(e,t),e.prototype.preConstructOnComponent=function(){this.usingBrowserTooltips=this.gridOptionsService.get("enableBrowserTooltips")},e.prototype.getCompId=function(){return this.compId},e.prototype.getTooltipParams=function(){return{value:this.tooltipText,location:"UNKNOWN"}},e.prototype.setTooltip=function(t,e,o){var n=this;this.tooltipText!=t&&(this.tooltipText&&(n.usingBrowserTooltips?n.getGui().removeAttribute("title"):n.tooltipFeature=n.destroyBean(n.tooltipFeature)),null!=t&&(this.tooltipText=t,this.tooltipText&&(n.usingBrowserTooltips?n.getGui().setAttribute("title",n.tooltipText):n.tooltipFeature=n.createBean(new mr(n,e,o)))))},e.prototype.createChildComponentsFromTags=function(t,e){var o=this;Rn(t.childNodes).forEach(function(n){if(n instanceof HTMLElement){var r=o.createComponentFromElement(n,function(t){t.getGui()&&o.copyAttributesFromNode(n,t.getGui())},e);if(r){if(r.addItems&&n.children.length){o.createChildComponentsFromTags(n,e);var i=Array.prototype.slice.call(n.children);r.addItems(i)}o.swapComponentForNode(r,t,n)}else n.childNodes&&o.createChildComponentsFromTags(n,e)}})},e.prototype.createComponentFromElement=function(t,o,n){var r=t.nodeName,i=n?n[t.getAttribute("ref")]:void 0,a=this.agStackComponentsRegistry.getComponentClass(r);if(a){e.elementGettingCreated=t;var s=new a(i);return s.setParentComponent(this),this.createBean(s,null,o),s}return null},e.prototype.copyAttributesFromNode=function(t,e){Pn(t.attributes,function(t,o){return e.setAttribute(t,o)})},e.prototype.swapComponentForNode=function(t,e,o){var n=t.getGui();e.replaceChild(n,o),e.insertBefore(document.createComment(o.nodeName),n),this.addDestroyFunc(this.destroyBean.bind(this,t)),this.swapInComponentForQuerySelectors(t,o)},e.prototype.swapInComponentForQuerySelectors=function(t,e){var o=this;this.iterateOverQuerySelectors(function(n){o[n.attributeName]===e&&(o[n.attributeName]=t)})},e.prototype.iterateOverQuerySelectors=function(t){for(var e=Object.getPrototypeOf(this);null!=e;){var o=e.__agComponentMetaData,n=P(e.constructor);o&&o[n]&&o[n].querySelectors&&o[n].querySelectors.forEach(function(e){return t(e)}),e=Object.getPrototypeOf(e)}},e.prototype.activateTabIndex=function(t){var e=this.gridOptionsService.get("tabIndex");t||(t=[]),t.length||t.push(this.getGui()),t.forEach(function(t){return t.setAttribute("tabindex",e.toString())})},e.prototype.setTemplate=function(t,e){var o=yn(t);this.setTemplateFromElement(o,e)},e.prototype.setTemplateFromElement=function(t,e){this.eGui=t,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),e)},e.prototype.createChildComponentsPreConstruct=function(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())},e.prototype.wireQuerySelectors=function(){var t=this;if(this.eGui){var e=this;this.iterateOverQuerySelectors(function(o){var n=function(t){return e[o.attributeName]=t};if(o.refSelector&&t.getAttribute("ref")===o.refSelector)n(t.eGui);else{var r=t.eGui.querySelector(o.querySelector);r&&n(r.__agComponent||r)}})}},e.prototype.getGui=function(){return this.eGui},e.prototype.getFocusableElement=function(){return this.eGui},e.prototype.getAriaElement=function(){return this.getFocusableElement()},e.prototype.setParentComponent=function(t){this.parentComponent=t},e.prototype.getParentComponent=function(){return this.parentComponent},e.prototype.setGui=function(t){this.eGui=t},e.prototype.queryForHtmlElement=function(t){return this.eGui.querySelector(t)},e.prototype.queryForHtmlInputElement=function(t){return this.eGui.querySelector(t)},e.prototype.appendChild=function(t,e){if(null!=t)if(e||(e=this.eGui),On(t))e.appendChild(t);else{var o=t;e.appendChild(o.getGui())}},e.prototype.isDisplayed=function(){return this.displayed},e.prototype.setVisible=function(t,e){if(void 0===e&&(e={}),t!==this.visible){this.visible=t;var o=e.skipAriaHidden;$o(this.eGui,t,{skipAriaHidden:o})}},e.prototype.setDisplayed=function(t,o){if(void 0===o&&(o={}),t!==this.displayed){this.displayed=t;var n=o.skipAriaHidden;Qo(this.eGui,t,{skipAriaHidden:n});var r={type:e.EVENT_DISPLAYED_CHANGED,visible:this.displayed};this.dispatchEvent(r)}},e.prototype.destroy=function(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.parentComponent&&(this.parentComponent=void 0);var e=this.eGui;e&&e.__agComponent&&(e.__agComponent=void 0),t.prototype.destroy.call(this)},e.prototype.addGuiEventListener=function(t,e,o){var n=this;this.eGui.addEventListener(t,e,o),this.addDestroyFunc(function(){return n.eGui.removeEventListener(t,e)})},e.prototype.addCssClass=function(t){this.cssClassManager.addCssClass(t)},e.prototype.removeCssClass=function(t){this.cssClassManager.removeCssClass(t)},e.prototype.containsCssClass=function(t){return this.cssClassManager.containsCssClass(t)},e.prototype.addOrRemoveCssClass=function(t,e){this.cssClassManager.addOrRemoveCssClass(t,e)},e.prototype.getAttribute=function(t){var e=this.eGui;return e?e.getAttribute(t):null},e.prototype.getRefElement=function(t){return this.queryForHtmlElement('[ref="'.concat(t,'"]'))},e.EVENT_DISPLAYED_CHANGED="displayedChanged",wr([J("agStackComponentsRegistry")],e.prototype,"agStackComponentsRegistry",void 0),wr([q],e.prototype,"preConstructOnComponent",null),wr([q],e.prototype,"createChildComponentsPreConstruct",null),e}(Bt);function Er(t){return Tr.bind(this,t,void 0)}function xr(t){return Tr.bind(this,"[ref=".concat(t,"]"),t)}function Tr(t,e,o,n,r){null!==t?"number"!==typeof r?function(t,e,o){var n=function(t,e){t.__agComponentMetaData||(t.__agComponentMetaData={});t.__agComponentMetaData[e]||(t.__agComponentMetaData[e]={});return t.__agComponentMetaData[e]}(t,P(t.constructor));n[e]||(n[e]=[]);n[e].push(o)}(o,"querySelectors",{attributeName:n,querySelector:t,refSelector:e}):console.error("AG Grid: QuerySelector should be on an attribute"):console.error("AG Grid: QuerySelector selector should not be null")}var Or=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Rr=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Pr=function(t){function e(){return t.call(this,'\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>\n            </div>')||this}return Or(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.init=function(t){this.params=t;var e=this.columnModel.getDisplayNameForColumn(t.column,"header",!0),o=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel("".concat(e," ").concat(o("ariaFilterInput","Filter Input")))},e.prototype.onParentModelChanged=function(t){var e=this;null!=t?this.params.parentFilterInstance(function(o){if(o.getModelAsString){var n=o.getModelAsString(t);e.eFloatingFilterText.setValue(n)}}):this.eFloatingFilterText.setValue("")},e.prototype.onParamsUpdated=function(t){this.refresh(t)},e.prototype.refresh=function(t){this.init(t)},Rr([xr("eFloatingFilterText")],e.prototype,"eFloatingFilterText",void 0),Rr([J("columnModel")],e.prototype,"columnModel",void 0),e}(Sr),Ar=function(){function t(t,e,o,n){var r=this;this.alive=!0,this.context=t,this.eParent=n,e.getDateCompDetails(o).newAgStackInstance().then(function(e){r.alive?(r.dateComp=e,e&&(n.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached(),r.tempValue&&e.setDate(r.tempValue),null!=r.disabled&&r.setDateCompDisabled(r.disabled))):t.destroyBean(e)})}return t.prototype.destroy=function(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)},t.prototype.getDate=function(){return this.dateComp?this.dateComp.getDate():this.tempValue},t.prototype.setDate=function(t){this.dateComp?this.dateComp.setDate(t):this.tempValue=t},t.prototype.setDisabled=function(t){this.dateComp?this.setDateCompDisabled(t):this.disabled=t},t.prototype.setDisplayed=function(t){Qo(this.eParent,t)},t.prototype.setInputPlaceholder=function(t){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(t)},t.prototype.setInputAriaLabel=function(t){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(t)},t.prototype.afterGuiAttached=function(t){this.dateComp&&"function"===typeof this.dateComp.afterGuiAttached&&this.dateComp.afterGuiAttached(t)},t.prototype.updateParams=function(t){var e,o,n=!1;(null===(e=this.dateComp)||void 0===e?void 0:e.refresh)&&"function"===typeof this.dateComp.refresh&&(null!==this.dateComp.refresh(t)&&(n=!0));!n&&(null===(o=this.dateComp)||void 0===o?void 0:o.onParamsUpdated)&&"function"===typeof this.dateComp.onParamsUpdated&&(null!==this.dateComp.onParamsUpdated(t)&&O("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead."))},t.prototype.setDateCompDisabled=function(t){null!=this.dateComp&&null!=this.dateComp.setDisabled&&this.dateComp.setDisabled(t)},t}(),Dr=function(){function t(){this.customFilterOptions={}}return t.prototype.init=function(t,e){this.filterOptions=t.filterOptions||e,this.mapCustomOptions(),this.selectDefaultItem(t)},t.prototype.getFilterOptions=function(){return this.filterOptions},t.prototype.mapCustomOptions=function(){var t=this;this.filterOptions&&this.filterOptions.forEach(function(e){if("string"!==typeof e){[["displayKey"],["displayName"],["predicate","test"]].every(function(t){return!!t.some(function(t){return null!=e[t]})||(console.warn("AG Grid: ignoring FilterOptionDef as it doesn't contain one of '".concat(t,"'")),!1)})?t.customFilterOptions[e.displayKey]=e:t.filterOptions=t.filterOptions.filter(function(t){return t===e})||[]}})},t.prototype.selectDefaultItem=function(t){if(t.defaultOption)this.defaultOption=t.defaultOption;else if(this.filterOptions.length>=1){var e=this.filterOptions[0];"string"===typeof e?this.defaultOption=e:e.displayKey?this.defaultOption=e.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")},t.prototype.getDefaultOption=function(){return this.defaultOption},t.prototype.getCustomOption=function(t){return this.customFilterOptions[t]},t}(),Mr={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"},Ir=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Lr=function(){return(Lr=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Fr=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Nr=function(t){function e(e,o){void 0===o&&(o={});var n=t.call(this)||this;return n.eFocusableElement=e,n.callbacks=o,n.callbacks=Lr({shouldStopEventPropagation:function(){return!1},onTabKeyDown:function(t){if(!t.defaultPrevented){var e=n.focusService.findNextFocusableElement(n.eFocusableElement,!1,t.shiftKey);e&&(e.focus(),t.preventDefault())}}},o),n}return Ir(e,t),e.prototype.postConstruct=function(){this.eFocusableElement.classList.add(e.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)},e.prototype.addKeyDownListeners=function(t){var e=this;this.addManagedListener(t,"keydown",function(t){t.defaultPrevented||Dt(t)||(e.callbacks.shouldStopEventPropagation(t)?At(t):t.key===jn.TAB?e.callbacks.onTabKeyDown(t):e.callbacks.handleKeyDown&&e.callbacks.handleKeyDown(t))})},e.FOCUS_MANAGED_CLASS="ag-focus-managed",Fr([J("focusService")],e.prototype,"focusService",void 0),Fr([Y],e.prototype,"postConstruct",null),e}(Bt),kr=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Gr=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Vr='<div class="'.concat("ag-resizer-wrapper",'">\n        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>\n        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>\n        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>\n        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>\n        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>\n        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>\n        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>\n        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>\n    </div>'),Br=function(t){function e(e,o){var n=t.call(this)||this;return n.element=e,n.dragStartPosition={x:0,y:0},n.position={x:0,y:0},n.lastSize={width:-1,height:-1},n.positioned=!1,n.resizersAdded=!1,n.resizeListeners=[],n.boundaryEl=null,n.isResizing=!1,n.isMoving=!1,n.resizable={},n.movable=!1,n.currentResizer=null,n.config=Object.assign({},{popup:!1},o),n}return kr(e,t),e.prototype.center=function(){var t=this.offsetParent,e=t.clientHeight,o=t.clientWidth/2-this.getWidth()/2,n=e/2-this.getHeight()/2;this.offsetElement(o,n)},e.prototype.initialisePosition=function(){if(!this.positioned){var t=this.config,e=t.centered,o=t.forcePopupParentAsOffsetParent,n=t.minWidth,r=t.width,i=t.minHeight,a=t.height,s=t.x,l=t.y;this.offsetParent||this.setOffsetParent();var u=0,c=0,p=gn(this.element);if(p){var d=this.findBoundaryElement(),h=window.getComputedStyle(d);if(null!=h.minWidth){var f=d.offsetWidth-this.element.offsetWidth;c=parseInt(h.minWidth,10)-f}if(null!=h.minHeight){var g=d.offsetHeight-this.element.offsetHeight;u=parseInt(h.minHeight,10)-g}}if(this.minHeight=i||u,this.minWidth=n||c,r&&this.setWidth(r),a&&this.setHeight(a),r&&a||this.refreshSize(),e)this.center();else if(s||l)this.offsetElement(s,l);else if(p&&o){var y=!0;if((d=this.boundaryEl)||(d=this.findBoundaryElement(),y=!1),d){var v=parseFloat(d.style.top),m=parseFloat(d.style.left);y?this.offsetElement(isNaN(m)?0:m,isNaN(v)?0:v):this.setPosition(m,v)}}this.positioned=!!this.offsetParent}},e.prototype.isPositioned=function(){return this.positioned},e.prototype.getPosition=function(){return this.position},e.prototype.setMovable=function(t,e){if(this.config.popup&&t!==this.movable){this.movable=t;var o=this.moveElementDragListener||{eElement:e,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};t?(this.dragService.addDragSource(o),this.moveElementDragListener=o):(this.dragService.removeDragSource(o),this.moveElementDragListener=void 0)}},e.prototype.setResizable=function(t){var e=this;if(this.clearResizeListeners(),t?this.addResizers():this.removeResizers(),"boolean"===typeof t){if(!1===t)return;t={topLeft:t,top:t,topRight:t,right:t,bottomRight:t,bottom:t,bottomLeft:t,left:t}}Object.keys(t).forEach(function(o){var n=!!t[o],r=e.getResizerElement(o),i={dragStartPixels:0,eElement:r,onDragStart:function(t){return e.onResizeStart(t,o)},onDragging:e.onResize.bind(e),onDragStop:function(t){return e.onResizeEnd(t,o)}};(n||!e.isAlive()&&!n)&&(n?(e.dragService.addDragSource(i),e.resizeListeners.push(i),r.style.pointerEvents="all"):r.style.pointerEvents="none",e.resizable[o]=n)})},e.prototype.removeSizeFromEl=function(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")},e.prototype.restoreLastSize=function(){this.element.style.flex="0 0 auto";var t=this.lastSize,e=t.height,o=t.width;-1!==o&&(this.element.style.width="".concat(o,"px")),-1!==e&&(this.element.style.height="".concat(e,"px"))},e.prototype.getHeight=function(){return this.element.offsetHeight},e.prototype.setHeight=function(t){var e=this.config.popup,o=this.element,n=!1;if("string"===typeof t&&-1!==t.indexOf("%"))xn(o,t),t=an(o),n=!0;else if(t=Math.max(this.minHeight,t),this.positioned){var r=this.getAvailableHeight();r&&t>r&&(t=r)}this.getHeight()!==t&&(n?(o.style.maxHeight="unset",o.style.minHeight="unset"):e?xn(o,t):(o.style.height="".concat(t,"px"),o.style.flex="0 0 auto",this.lastSize.height="number"===typeof t?t:parseFloat(t)))},e.prototype.getAvailableHeight=function(){var t=this.config,e=t.popup,o=t.forcePopupParentAsOffsetParent;this.positioned||this.initialisePosition();var n=this.offsetParent.clientHeight;if(!n)return null;var r=this.element.getBoundingClientRect(),i=this.offsetParent.getBoundingClientRect(),a=e?this.position.y:r.top,s=e?0:i.top,l=0;if(o){var u=this.element.parentElement;if(u)l=u.getBoundingClientRect().bottom-r.bottom}return n+s-a-l},e.prototype.getWidth=function(){return this.element.offsetWidth},e.prototype.setWidth=function(t){var e=this.element,o=this.config.popup,n=!1;if("string"===typeof t&&-1!==t.indexOf("%"))En(e,t),t=sn(e),n=!0;else if(this.positioned){t=Math.max(this.minWidth,t);var r=this.offsetParent.clientWidth,i=o?this.position.x:this.element.getBoundingClientRect().left;r&&t+i>r&&(t=r-i)}this.getWidth()!==t&&(n?(e.style.maxWidth="unset",e.style.minWidth="unset"):this.config.popup?En(e,t):(e.style.width="".concat(t,"px"),e.style.flex=" unset",this.lastSize.width="number"===typeof t?t:parseFloat(t)))},e.prototype.offsetElement=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var o=this.config.forcePopupParentAsOffsetParent?this.boundaryEl:this.element;o&&(this.popupService.positionPopup({ePopup:o,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:function(){return{x:t,y:e}}}),this.setPosition(parseFloat(o.style.left),parseFloat(o.style.top)))},e.prototype.constrainSizeToAvailableHeight=function(t){var e=this;if(this.config.forcePopupParentAsOffsetParent){t?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),function(){var t=e.getAvailableHeight();e.element.style.setProperty("max-height","".concat(t,"px"))}):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}},e.prototype.setPosition=function(t,e){this.position.x=t,this.position.y=e},e.prototype.updateDragStartPosition=function(t,e){this.dragStartPosition={x:t,y:e}},e.prototype.calculateMouseMovement=function(t){var e=t.e,o=t.isLeft,n=t.isTop,r=t.anywhereWithin,i=t.topBuffer,a=e.clientX-this.dragStartPosition.x,s=e.clientY-this.dragStartPosition.y;return{movementX:this.shouldSkipX(e,!!o,!!r,a)?0:a,movementY:this.shouldSkipY(e,!!n,i,s)?0:s}},e.prototype.shouldSkipX=function(t,e,o,n){var r=this.element.getBoundingClientRect(),i=this.offsetParent.getBoundingClientRect(),a=this.boundaryEl.getBoundingClientRect(),s=this.config.popup?this.position.x:r.left,l=s<=0&&i.left>=t.clientX||i.right<=t.clientX&&i.right<=a.right;return!!l||(l=e?n<0&&t.clientX>s+i.left||n>0&&t.clientX<s+i.left:o?n<0&&t.clientX>a.right||n>0&&t.clientX<s+i.left:n<0&&t.clientX>a.right||n>0&&t.clientX<a.right)},e.prototype.shouldSkipY=function(t,e,o,n){void 0===o&&(o=0);var r=this.element.getBoundingClientRect(),i=this.offsetParent.getBoundingClientRect(),a=this.boundaryEl.getBoundingClientRect(),s=this.config.popup?this.position.y:r.top,l=s<=0&&i.top>=t.clientY||i.bottom<=t.clientY&&i.bottom<=a.bottom;return!!l||(l=e?n<0&&t.clientY>s+i.top+o||n>0&&t.clientY<s+i.top:n<0&&t.clientY>a.bottom||n>0&&t.clientY<a.bottom)},e.prototype.createResizeMap=function(){var t=this.element;this.resizerMap={topLeft:{element:t.querySelector("[ref=eTopLeftResizer]")},top:{element:t.querySelector("[ref=eTopResizer]")},topRight:{element:t.querySelector("[ref=eTopRightResizer]")},right:{element:t.querySelector("[ref=eRightResizer]")},bottomRight:{element:t.querySelector("[ref=eBottomRightResizer]")},bottom:{element:t.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:t.querySelector("[ref=eBottomLeftResizer]")},left:{element:t.querySelector("[ref=eLeftResizer]")}}},e.prototype.addResizers=function(){if(!this.resizersAdded){var t=this.element;if(t){var e=(new DOMParser).parseFromString(Vr,"text/html").body;t.appendChild(e.firstChild),this.createResizeMap(),this.resizersAdded=!0}}},e.prototype.removeResizers=function(){this.resizerMap=void 0;var t=this.element.querySelector(".".concat("ag-resizer-wrapper"));t&&this.element.removeChild(t),this.resizersAdded=!1},e.prototype.getResizerElement=function(t){return this.resizerMap[t].element},e.prototype.onResizeStart=function(t,e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!e.match(/top/i),isRight:!!e.match(/right/i),isBottom:!!e.match(/bottom/i),isLeft:!!e.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[e].element.classList.add("ag-active");var o=this.config,n=o.popup,r=o.forcePopupParentAsOffsetParent;n||r||this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(t.clientX,t.clientY)},e.prototype.getSiblings=function(){var t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(function(t){return!t.classList.contains("ag-hidden")}):null},e.prototype.getMinSizeOfSiblings=function(){for(var t=this.getSiblings()||[],e=0,o=0,n=0;n<t.length;n++){var r=t[n],i=!!r.style.flex&&"0 0 auto"!==r.style.flex;if(r!==this.element){var a=this.minHeight||0,s=this.minWidth||0;if(i){var l=window.getComputedStyle(r);l.minHeight&&(a=parseInt(l.minHeight,10)),l.minWidth&&(s=parseInt(l.minWidth,10))}else a=r.offsetHeight,s=r.offsetWidth;e+=a,o+=s}}return{height:e,width:o}},e.prototype.applySizeToSiblings=function(t){var e=null,o=this.getSiblings();if(o){for(var n=0;n<o.length;n++){var r=o[n];r!==e&&(t?r.style.height="".concat(r.offsetHeight,"px"):r.style.width="".concat(r.offsetWidth,"px"),r.style.flex="0 0 auto",r===this.element&&(e=o[n+1]))}e&&(e.style.removeProperty("height"),e.style.removeProperty("min-height"),e.style.removeProperty("max-height"),e.style.flex="1 1 auto")}},e.prototype.isResizable=function(){return Object.values(this.resizable).some(function(t){return t})},e.prototype.onResize=function(t){if(this.isResizing&&this.currentResizer){var e=this.config,o=e.popup,n=e.forcePopupParentAsOffsetParent,r=this.currentResizer,i=r.isTop,a=r.isRight,s=r.isBottom,l=r.isLeft,u=a||l,c=s||i,p=this.calculateMouseMovement({e:t,isLeft:l,isTop:i}),d=p.movementX,h=p.movementY,f=this.position.x,g=this.position.y,y=0,v=0;if(u&&d){var m=l?-1:1,C=this.getWidth(),_=C+d*m,w=!1;l&&(f+(y=C-_)<=0||_<=this.minWidth)&&(w=!0,y=0),w||this.setWidth(_)}if(c&&h){m=i?-1:1;var b=this.getHeight(),S=b+h*m,E=!1;i?(g+(v=b-S)<=0||S<=this.minHeight)&&(E=!0,v=0):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&b<S&&this.getMinSizeOfSiblings().height+S>this.element.parentElement.offsetHeight&&(E=!0),E||this.setHeight(S)}this.updateDragStartPosition(t.clientX,t.clientY),((o||n)&&y||v)&&this.offsetElement(f+y,g+v)}},e.prototype.onResizeEnd=function(t,e){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;this.element.classList.remove("ag-resizing"),this.resizerMap[e].element.classList.remove("ag-active"),this.dispatchEvent({type:"resize"})},e.prototype.refreshSize=function(){var t=this.element;this.config.popup&&(this.config.width||this.setWidth(t.offsetWidth),this.config.height||this.setHeight(t.offsetHeight))},e.prototype.onMoveStart=function(t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(t.clientX,t.clientY)},e.prototype.onMove=function(t){if(this.isMoving){var e,o=this.position,n=o.x,r=o.y;this.config.calculateTopBuffer&&(e=this.config.calculateTopBuffer());var i=this.calculateMouseMovement({e:t,isTop:!0,anywhereWithin:!0,topBuffer:e}),a=i.movementX,s=i.movementY;this.offsetElement(n+a,r+s),this.updateDragStartPosition(t.clientX,t.clientY)}},e.prototype.onMoveEnd=function(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")},e.prototype.setOffsetParent=function(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent},e.prototype.findBoundaryElement=function(){for(var t=this.element;t;){if("static"!==window.getComputedStyle(t).position)return t;t=t.parentElement}return this.element},e.prototype.clearResizeListeners=function(){for(;this.resizeListeners.length;){var t=this.resizeListeners.pop();this.dragService.removeDragSource(t)}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()},Gr([J("popupService")],e.prototype,"popupService",void 0),Gr([J("resizeObserverService")],e.prototype,"resizeObserverService",void 0),Gr([J("dragService")],e.prototype,"dragService",void 0),e}(Bt),zr=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Hr=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},jr=function(t){function e(e){var o=t.call(this)||this;return o.filterNameKey=e,o.applyActive=!1,o.hidePopup=null,o.debouncePending=!1,o.appliedModel=null,o.buttonListeners=[],o}return zr(e,t),e.prototype.postConstruct=function(){this.resetTemplate(),this.createManagedBean(new Nr(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new Br(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)},e.prototype.handleKeyDown=function(t){},e.prototype.getFilterTitle=function(){return this.translate(this.filterNameKey)},e.prototype.isFilterActive=function(){return!!this.appliedModel},e.prototype.resetTemplate=function(t){var e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit);var o='\n            <form class="ag-filter-wrapper">\n                <div class="ag-filter-body-wrapper ag-'.concat(this.getCssIdentifier(),'-body-wrapper" ref="eFilterBody">\n                    ').concat(this.createBodyTemplate(),"\n                </div>\n            </form>");this.setTemplate(o,t),(e=this.getGui())&&e.addEventListener("submit",this.onFormSubmit)},e.prototype.isReadOnly=function(){return!!this.providedFilterParams.readOnly},e.prototype.init=function(t){var e=this;this.setParams(t),this.resetUiToDefaults(!0).then(function(){e.updateUiVisibility(),e.setupOnBtApplyDebounce()})},e.prototype.setParams=function(t){this.providedFilterParams=t,this.applyActive=e.isUseApplyButton(t),this.resetButtonsPanel()},e.prototype.updateParams=function(t){var o=this;this.providedFilterParams=t,this.applyActive=e.isUseApplyButton(t),this.resetUiToActiveModel(this.getModel(),function(){o.updateUiVisibility(),o.setupOnBtApplyDebounce()})},e.prototype.resetButtonsPanel=function(){var t=this,e=this.providedFilterParams.buttons,o=e&&e.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(dn(this.eButtonsPanel),this.buttonListeners.forEach(function(t){return null===t||void 0===t?void 0:t()}),this.buttonListeners=[]):o&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),o){var n=document.createDocumentFragment();ir(e).forEach(function(e){return function(e){var o,r;switch(e){case"apply":o=t.translate("applyFilter"),r=function(e){return t.onBtApply(!1,!1,e)};break;case"clear":o=t.translate("clearFilter"),r=function(){return t.onBtClear()};break;case"reset":o=t.translate("resetFilter"),r=function(){return t.onBtReset()};break;case"cancel":o=t.translate("cancelFilter"),r=function(e){t.onBtCancel(e)};break;default:return void console.warn("AG Grid: Unknown button type specified")}var i=yn('<button\n                    type="'.concat("apply"===e?"submit":"button",'"\n                    ref="').concat(e,'FilterButton"\n                    class="ag-button ag-standard-button ag-filter-apply-panel-button"\n                >').concat(o,"\n                </button>"));t.buttonListeners.push(t.addManagedListener(i,"click",r)),n.append(i)}(e)}),this.eButtonsPanel.append(n),this.getGui().appendChild(this.eButtonsPanel)}else this.eButtonsPanel&&hn(this.eButtonsPanel)},e.prototype.getDefaultDebounceMs=function(){return 0},e.prototype.setupOnBtApplyDebounce=function(){var t=this,o=e.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs()),n=N(this.checkApplyDebounce.bind(this),o);this.onBtApplyDebounce=function(){t.debouncePending=!0,n()}},e.prototype.checkApplyDebounce=function(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())},e.prototype.getModel=function(){return this.appliedModel?this.appliedModel:null},e.prototype.setModel=function(t){var e=this;return(null!=t?this.setModelIntoUi(t):this.resetUiToDefaults()).then(function(){e.updateUiVisibility(),e.applyModel("api")})},e.prototype.onBtCancel=function(t){var e=this;this.resetUiToActiveModel(this.getModel(),function(){e.handleCancelEnd(t)})},e.prototype.handleCancelEnd=function(t){this.providedFilterParams.closeOnApply&&this.close(t)},e.prototype.resetUiToActiveModel=function(t,e){var o=this,n=function(){o.onUiChanged(!1,"prevent"),null===e||void 0===e||e()};null!=t?this.setModelIntoUi(t).then(n):this.resetUiToDefaults().then(n)},e.prototype.onBtClear=function(){var t=this;this.resetUiToDefaults().then(function(){return t.onUiChanged()})},e.prototype.onBtReset=function(){this.onBtClear(),this.onBtApply()},e.prototype.applyModel=function(t){var e=this.getModelFromUi();if(!this.isModelValid(e))return!1;var o=this.appliedModel;return this.appliedModel=e,!this.areModelsEqual(o,e)},e.prototype.isModelValid=function(t){return!0},e.prototype.onFormSubmit=function(t){t.preventDefault()},e.prototype.onBtApply=function(t,e,o){if(void 0===t&&(t=!1),void 0===e&&(e=!1),o&&o.preventDefault(),this.applyModel(e?"rowDataUpdated":"ui")){this.providedFilterParams.filterChangedCallback({afterFloatingFilter:t,afterDataChange:e,source:"columnFilter"})}this.providedFilterParams.closeOnApply&&this.applyActive&&!t&&!e&&this.close(o)},e.prototype.onNewRowsLoaded=function(){},e.prototype.close=function(t){if(this.hidePopup){var e,o=t,n=o&&o.key;"Enter"!==n&&"Space"!==n||(e={keyboardEvent:o}),this.hidePopup(e),this.hidePopup=null}},e.prototype.onUiChanged=function(t,e){if(void 0===t&&(t=!1),this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){var o=this.isModelValid(this.getModelFromUi()),n=this.getRefElement("applyFilterButton");n&&tn(n,!o)}t&&!e||"immediately"===e?this.onBtApply(t):(this.applyActive||e)&&"debounce"!==e||this.onBtApplyDebounce()},e.prototype.afterGuiAttached=function(t){t&&(this.hidePopup=t.hidePopup),this.refreshFilterResizer(null===t||void 0===t?void 0:t.container)},e.prototype.refreshFilterResizer=function(t){if(this.positionableFeature&&"toolPanel"!==t){var e="floatingFilter"===t||"columnFilter"===t,o=this.positionableFeature,n=this.gridOptionsService;e?(o.restoreLastSize(),o.setResizable(n.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}},e.prototype.afterGuiDetached=function(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)},e.getDebounceMs=function(t,o){return e.isUseApplyButton(t)?(null!=t.debounceMs&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):null!=t.debounceMs?t.debounceMs:o},e.isUseApplyButton=function(t){return!!t.buttons&&t.buttons.indexOf("apply")>=0},e.prototype.refresh=function(t){return this.providedFilterParams=t,!0},e.prototype.destroy=function(){var e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,t.prototype.destroy.call(this)},e.prototype.translate=function(t){return this.localeService.getLocaleTextFunc()(t,Mr[t])},e.prototype.getCellValue=function(t){return this.providedFilterParams.getValue(t)},e.prototype.getPositionableElement=function(){return this.eFilterBody},Hr([J("rowModel")],e.prototype,"rowModel",void 0),Hr([xr("eFilterBody")],e.prototype,"eFilterBody",void 0),Hr([Y],e.prototype,"postConstruct",null),e}(Sr),Ur=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Wr=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Kr=function(t){function e(e,o){var n=t.call(this,o)||this;return n.labelSeparator="",n.labelAlignment="left",n.disabled=!1,n.label="",n.config=e||{},n}return Ur(e,t),e.prototype.postConstruct=function(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");var t=this.config,e=t.labelSeparator,o=t.label,n=t.labelWidth,r=t.labelAlignment;null!=e&&this.setLabelSeparator(e),null!=o&&this.setLabel(o),null!=n&&this.setLabelWidth(n),this.setLabelAlignment(r||this.labelAlignment),this.refreshLabel()},e.prototype.refreshLabel=function(){dn(this.eLabel),"string"===typeof this.label?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),""===this.label?(Qo(this.eLabel,!1),ke(this.eLabel,"presentation")):(Qo(this.eLabel,!0),ke(this.eLabel,null))},e.prototype.setLabelSeparator=function(t){return this.labelSeparator===t?this:(this.labelSeparator=t,null!=this.label&&this.refreshLabel(),this)},e.prototype.getLabelId=function(){return this.eLabel.id=this.eLabel.id||"ag-".concat(this.getCompId(),"-label"),this.eLabel.id},e.prototype.getLabel=function(){return this.label},e.prototype.setLabel=function(t){return this.label===t?this:(this.label=t,this.refreshLabel(),this)},e.prototype.setLabelAlignment=function(t){var e=this.getGui().classList;return e.toggle("ag-label-align-left","left"===t),e.toggle("ag-label-align-right","right"===t),e.toggle("ag-label-align-top","top"===t),this},e.prototype.setLabelEllipsis=function(t){return this.eLabel.classList.toggle("ag-label-ellipsis",t),this},e.prototype.setLabelWidth=function(t){return null==this.label?this:(Sn(this.eLabel,t),this)},e.prototype.setDisabled=function(t){t=!!t;var e=this.getGui();return tn(e,t),e.classList.toggle("ag-disabled",t),this.disabled=t,this},e.prototype.isDisabled=function(){return!!this.disabled},Wr([Y],e.prototype,"postConstruct",null),e}(Sr),qr=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Yr=function(t){function e(e,o,n){var r=t.call(this,e,o)||this;return r.className=n,r}return qr(e,t),e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()},e.prototype.refreshAriaLabelledBy=function(){var t=this.getAriaElement(),e=this.getLabelId();null!==Be(t)?He(t,""):He(t,null!==e&&void 0!==e?e:"")},e.prototype.setAriaLabel=function(t){return ze(this.getAriaElement(),t),this.refreshAriaLabelledBy(),this},e.prototype.onValueChange=function(t){var e=this;return this.addManagedListener(this,qt.EVENT_FIELD_VALUE_CHANGED,function(){return t(e.getValue())}),this},e.prototype.getWidth=function(){return this.getGui().clientWidth},e.prototype.setWidth=function(t){return En(this.getGui(),t),this},e.prototype.getPreviousValue=function(){return this.previousValue},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t,e){return this.value===t?this:(this.previousValue=this.value,this.value=t,e||this.dispatchEvent({type:qt.EVENT_FIELD_VALUE_CHANGED}),this)},e}(Kr),Zr=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Xr=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Jr='\n    <div class="ag-picker-field" role="presentation">\n        <div ref="eLabel"></div>\n            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">\n            <div ref="eDisplayField" class="ag-picker-field-display"></div>\n            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n        </div>\n    </div>',Qr=function(t){function e(e){var o=t.call(this,e,(null===e||void 0===e?void 0:e.template)||Jr,null===e||void 0===e?void 0:e.className)||this;if(o.isPickerDisplayed=!1,o.skipClick=!1,o.pickerGap=4,o.hideCurrentPicker=null,o.ariaRole=null===e||void 0===e?void 0:e.ariaRole,o.onPickerFocusIn=o.onPickerFocusIn.bind(o),o.onPickerFocusOut=o.onPickerFocusOut.bind(o),!e)return o;var n=e.pickerGap,r=e.maxPickerHeight,i=e.variableWidth,a=e.minPickerWidth,s=e.maxPickerWidth;return null!=n&&(o.pickerGap=n),o.variableWidth=!!i,null!=r&&o.setPickerMaxHeight(r),null!=a&&o.setPickerMinWidth(a),null!=s&&o.setPickerMaxWidth(s),o}return Zr(e,t),e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this),this.setupAria();var e="ag-".concat(this.getCompId(),"-display");this.eDisplayField.setAttribute("id",e);var o=this.getAriaElement();this.addManagedListener(o,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(this.eLabel,"mousedown",this.onLabelOrWrapperMouseDown.bind(this)),this.addManagedListener(this.eWrapper,"mousedown",this.onLabelOrWrapperMouseDown.bind(this));var n=this.config.pickerIcon;if(n){var r=zn(n,this.gridOptionsService);r&&this.eIcon.appendChild(r)}},e.prototype.setupAria=function(){var t=this.getAriaElement();t.setAttribute("tabindex",this.gridOptionsService.get("tabIndex").toString()),Xe(t,!1),this.ariaRole&&ke(t,this.ariaRole)},e.prototype.onLabelOrWrapperMouseDown=function(t){if(t){var e=this.getFocusableElement();if(e!==this.eWrapper&&(null===t||void 0===t?void 0:t.target)===e)return;t.preventDefault(),this.getFocusableElement().focus()}this.skipClick?this.skipClick=!1:this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())},e.prototype.onKeyDown=function(t){switch(t.key){case jn.UP:case jn.DOWN:case jn.ENTER:case jn.SPACE:t.preventDefault(),this.onLabelOrWrapperMouseDown();break;case jn.ESCAPE:this.isPickerDisplayed&&(t.preventDefault(),t.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker())}},e.prototype.showPicker=function(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());var t=this.pickerComponent.getGui();t.addEventListener("focusin",this.onPickerFocusIn),t.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)},e.prototype.renderAndPositionPicker=function(){var t=this,e=this.gridOptionsService.getDocument(),o=this.pickerComponent.getGui();this.gridOptionsService.get("suppressScrollWhenPopupsAreOpen")||(this.destroyMouseWheelFunc=this.addManagedListener(this.eventService,qt.EVENT_BODY_SCROLL,function(){t.hidePicker()}));var n=this.localeService.getLocaleTextFunc(),r=this.config,i=r.pickerAriaLabelKey,a=r.pickerAriaLabelValue,s=r.modalPicker,l={modal:void 0===s||s,eChild:o,closeOnEsc:!0,closedCallback:function(){var o=e.activeElement===e.body;t.beforeHidePicker(),o&&t.isAlive()&&t.getFocusableElement().focus()},ariaLabel:n(i,a)},u=this.popupService.addPopup(l),c=this.maxPickerHeight,p=this.minPickerWidth,d=this.maxPickerWidth;this.variableWidth?(p&&(o.style.minWidth=p),o.style.width=Tn(sn(this.eWrapper)),d&&(o.style.maxWidth=d)):Sn(o,null!==d&&void 0!==d?d:sn(this.eWrapper));var h=null!==c&&void 0!==c?c:"".concat(nn(this.popupService.getPopupParent()),"px");return o.style.setProperty("max-height",h),o.style.position="absolute",this.alignPickerToComponent(),u.hideFunc},e.prototype.alignPickerToComponent=function(){if(this.pickerComponent){var t=this.config.pickerType,e=this.pickerGap,o=this.gridOptionsService.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:t,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:o,keepWithinBounds:!0,nudgeY:e})}},e.prototype.beforeHidePicker=function(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);var t=this.pickerComponent.getGui();t.removeEventListener("focusin",this.onPickerFocusIn),t.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null},e.prototype.toggleExpandedStyles=function(t){this.isAlive()&&(Xe(this.getAriaElement(),t),this.eWrapper.classList.toggle("ag-picker-expanded",t),this.eWrapper.classList.toggle("ag-picker-collapsed",!t))},e.prototype.onPickerFocusIn=function(){this.togglePickerHasFocus(!0)},e.prototype.onPickerFocusOut=function(t){var e;(null===(e=this.pickerComponent)||void 0===e?void 0:e.getGui().contains(t.relatedTarget))||this.togglePickerHasFocus(!1)},e.prototype.togglePickerHasFocus=function(t){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",t)},e.prototype.hidePicker=function(){this.hideCurrentPicker&&this.hideCurrentPicker()},e.prototype.setInputWidth=function(t){return Sn(this.eWrapper,t),this},e.prototype.getFocusableElement=function(){return this.eWrapper},e.prototype.setPickerGap=function(t){return this.pickerGap=t,this},e.prototype.setPickerMinWidth=function(t){return"number"===typeof t&&(t="".concat(t,"px")),this.minPickerWidth=null==t?void 0:t,this},e.prototype.setPickerMaxWidth=function(t){return"number"===typeof t&&(t="".concat(t,"px")),this.maxPickerWidth=null==t?void 0:t,this},e.prototype.setPickerMaxHeight=function(t){return"number"===typeof t&&(t="".concat(t,"px")),this.maxPickerHeight=null==t?void 0:t,this},e.prototype.destroy=function(){this.hidePicker(),t.prototype.destroy.call(this)},Xr([J("popupService")],e.prototype,"popupService",void 0),Xr([xr("eLabel")],e.prototype,"eLabel",void 0),Xr([xr("eWrapper")],e.prototype,"eWrapper",void 0),Xr([xr("eDisplayField")],e.prototype,"eDisplayField",void 0),Xr([xr("eIcon")],e.prototype,"eIcon",void 0),e}(Yr),$r=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ti=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},ei=function(t){function e(e){void 0===e&&(e="default");var o=t.call(this,'<div class="ag-list ag-'.concat(e,'-list" role="listbox"></div>'))||this;return o.cssIdentifier=e,o.options=[],o.itemEls=[],o}return $r(e,t),e.prototype.init=function(){this.addManagedListener(this.getGui(),"keydown",this.handleKeyDown.bind(this))},e.prototype.handleKeyDown=function(t){var e=t.key;switch(e){case jn.ENTER:if(this.highlightedEl){var o=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(o)}else this.setValue(this.getValue());break;case jn.DOWN:case jn.UP:var n=e===jn.DOWN,r=void 0;if(t.preventDefault(),this.highlightedEl){var i=this.itemEls.indexOf(this.highlightedEl)+(n?1:-1);i=Math.min(Math.max(i,0),this.itemEls.length-1),r=this.itemEls[i]}else r=this.itemEls[n?0:this.itemEls.length-1];this.highlightItem(r)}},e.prototype.addOptions=function(t){var e=this;return t.forEach(function(t){return e.addOption(t)}),this},e.prototype.addOption=function(t){var e=t.value,o=ee(t.text||e);return this.options.push({value:e,text:o}),this.renderOption(e,o),this.updateIndices(),this},e.prototype.updateIndices=function(){var t=this.getGui().querySelectorAll(".ag-list-item");t.forEach(function(e,o){$e(e,o+1),Qe(e,t.length)})},e.prototype.renderOption=function(t,e){var o=this,n=document.createElement("div");ke(n,"option"),n.classList.add("ag-list-item","ag-".concat(this.cssIdentifier,"-list-item")),n.innerHTML="<span>".concat(e,"</span>"),n.tabIndex=-1,this.itemEls.push(n),this.addManagedListener(n,"mouseover",function(){return o.highlightItem(n)}),this.addManagedListener(n,"mouseleave",function(){return o.clearHighlighted()}),this.addManagedListener(n,"click",function(){return o.setValue(t)}),this.getGui().appendChild(n)},e.prototype.setValue=function(t,e){if(this.value===t)return this.fireItemSelected(),this;if(null==t)return this.reset(),this;var o=this.options.findIndex(function(e){return e.value===t});if(-1!==o){var n=this.options[o];this.value=n.value,this.displayValue=null!=n.text?n.text:n.value,this.highlightItem(this.itemEls[o]),e||this.fireChangeEvent()}return this},e.prototype.setValueByIndex=function(t){return this.setValue(this.options[t].value)},e.prototype.getValue=function(){return this.value},e.prototype.getDisplayValue=function(){return this.displayValue},e.prototype.refreshHighlighted=function(){var t=this;this.clearHighlighted();var e=this.options.findIndex(function(e){return e.value===t.value});-1!==e&&this.highlightItem(this.itemEls[e])},e.prototype.reset=function(){this.value=null,this.displayValue=null,this.clearHighlighted(),this.fireChangeEvent()},e.prototype.highlightItem=function(t){gn(t)&&(this.clearHighlighted(),this.highlightedEl=t,this.highlightedEl.classList.add(e.ACTIVE_CLASS),lo(this.highlightedEl,!0),this.highlightedEl.focus())},e.prototype.clearHighlighted=function(){this.highlightedEl&&gn(this.highlightedEl)&&(this.highlightedEl.classList.remove(e.ACTIVE_CLASS),lo(this.highlightedEl,!1),this.highlightedEl=null)},e.prototype.fireChangeEvent=function(){this.dispatchEvent({type:qt.EVENT_FIELD_VALUE_CHANGED}),this.fireItemSelected()},e.prototype.fireItemSelected=function(){this.dispatchEvent({type:e.EVENT_ITEM_SELECTED})},e.EVENT_ITEM_SELECTED="selectedItem",e.ACTIVE_CLASS="ag-active-item",ti([Y],e.prototype,"init",null),e}(Sr),oi=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ni=function(){return(ni=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},ri=function(t){function e(e){return t.call(this,ni({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox"},e))||this}return oi(e,t),e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this),this.createListComponent(),this.eWrapper.tabIndex=this.gridOptionsService.get("tabIndex")},e.prototype.createListComponent=function(){var t=this;this.listComponent=this.createBean(new ei("select")),this.listComponent.setParentComponent(this);var o=this.listComponent.getAriaElement(),n="ag-select-list-".concat(this.listComponent.getCompId());o.setAttribute("id",n),uo(this.getAriaElement(),o),this.listComponent.addGuiEventListener("keydown",function(e){e.key===jn.TAB&&(e.preventDefault(),e.stopImmediatePropagation(),t.getGui().dispatchEvent(new KeyboardEvent("keydown",{key:e.key,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,bubbles:!0})))}),this.listComponent.addManagedListener(this.listComponent,ei.EVENT_ITEM_SELECTED,function(){t.hidePicker(),t.dispatchEvent({type:e.EVENT_ITEM_SELECTED})}),this.listComponent.addManagedListener(this.listComponent,qt.EVENT_FIELD_VALUE_CHANGED,function(){t.listComponent&&(t.setValue(t.listComponent.getValue(),!1,!0),t.hidePicker())})},e.prototype.createPickerComponent=function(){return this.listComponent},e.prototype.showPicker=function(){this.listComponent&&(t.prototype.showPicker.call(this),this.listComponent.refreshHighlighted())},e.prototype.addOptions=function(t){var e=this;return t.forEach(function(t){return e.addOption(t)}),this},e.prototype.addOption=function(t){return this.listComponent.addOption(t),this},e.prototype.setValue=function(e,o,n){return this.value!==e&&this.listComponent?(n||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue()?this:(this.eDisplayField.innerHTML=this.listComponent.getDisplayValue(),t.prototype.setValue.call(this,e,o))):this},e.prototype.destroy=function(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),t.prototype.destroy.call(this)},e.EVENT_ITEM_SELECTED="selectedItem",e}(Qr),ii=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ai=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},si=function(t){function e(e,o,n,r){void 0===n&&(n="text"),void 0===r&&(r="input");var i=t.call(this,e,'\n            <div role="presentation">\n                <div ref="eLabel" class="ag-input-field-label"></div>\n                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">\n                    <'.concat(r,' ref="eInput" class="ag-input-field-input"></').concat(r,">\n                </div>\n            </div>"),o)||this;return i.inputType=n,i.displayFieldTag=r,i}return ii(e,t),e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this),this.setInputType(),this.eLabel.classList.add("".concat(this.className,"-label")),this.eWrapper.classList.add("".concat(this.className,"-input-wrapper")),this.eInput.classList.add("".concat(this.className,"-input")),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||"ag-".concat(this.getCompId(),"-input");var e=this.config,o=e.width,n=e.value;null!=o&&this.setWidth(o),null!=n&&this.setValue(n),this.addInputListeners(),this.activateTabIndex([this.eInput])},e.prototype.addInputListeners=function(){var t=this;this.addManagedListener(this.eInput,"input",function(e){return t.setValue(e.target.value)})},e.prototype.setInputType=function(){"input"===this.displayFieldTag&&this.eInput.setAttribute("type",this.inputType)},e.prototype.getInputElement=function(){return this.eInput},e.prototype.setInputWidth=function(t){return Sn(this.eWrapper,t),this},e.prototype.setInputName=function(t){return this.getInputElement().setAttribute("name",t),this},e.prototype.getFocusableElement=function(){return this.eInput},e.prototype.setMaxLength=function(t){return this.eInput.maxLength=t,this},e.prototype.setInputPlaceholder=function(t){return An(this.eInput,"placeholder",t),this},e.prototype.setInputAriaLabel=function(t){return ze(this.eInput,t),this.refreshAriaLabelledBy(),this},e.prototype.setDisabled=function(e){return tn(this.eInput,e),t.prototype.setDisabled.call(this,e)},e.prototype.setAutoComplete=function(t){if(!0===t)An(this.eInput,"autocomplete",null);else{var e="string"===typeof t?t:"off";An(this.eInput,"autocomplete",e)}return this},ai([xr("eLabel")],e.prototype,"eLabel",void 0),ai([xr("eWrapper")],e.prototype,"eWrapper",void 0),ai([xr("eInput")],e.prototype,"eInput",void 0),e}(Yr),li=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ui=function(t){function e(e,o,n){void 0===o&&(o="ag-checkbox"),void 0===n&&(n="checkbox");var r=t.call(this,e,o,n)||this;return r.labelAlignment="right",r.selected=!1,r.readOnly=!1,r.passive=!1,r}return li(e,t),e.prototype.addInputListeners=function(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))},e.prototype.getNextValue=function(){return void 0===this.selected||!this.selected},e.prototype.setPassive=function(t){this.passive=t},e.prototype.isReadOnly=function(){return this.readOnly},e.prototype.setReadOnly=function(t){this.eWrapper.classList.toggle("ag-disabled",t),this.eInput.disabled=t,this.readOnly=t},e.prototype.setDisabled=function(e){return this.eWrapper.classList.toggle("ag-disabled",e),t.prototype.setDisabled.call(this,e)},e.prototype.toggle=function(){if(!this.eInput.disabled){var t=this.isSelected(),e=this.getNextValue();this.passive?this.dispatchChange(e,t):this.setValue(e)}},e.prototype.getValue=function(){return this.isSelected()},e.prototype.setValue=function(t,e){return this.refreshSelectedClass(t),this.setSelected(t,e),this},e.prototype.setName=function(t){return this.getInputElement().name=t,this},e.prototype.isSelected=function(){return this.selected},e.prototype.setSelected=function(t,e){this.isSelected()!==t&&(this.previousValue=this.isSelected(),t=this.selected="boolean"===typeof t?t:void 0,this.eInput.checked=t,this.eInput.indeterminate=void 0===t,e||this.dispatchChange(this.selected,this.previousValue))},e.prototype.dispatchChange=function(t,e,o){this.dispatchEvent({type:qt.EVENT_FIELD_VALUE_CHANGED,selected:t,previousValue:e,event:o});var n=this.getInputElement(),r={type:qt.EVENT_CHECKBOX_CHANGED,id:n.id,name:n.name,selected:t,previousValue:e};this.eventService.dispatchEvent(r)},e.prototype.onCheckboxClick=function(t){if(!this.passive&&!this.eInput.disabled){var e=this.isSelected(),o=this.selected=t.target.checked;this.refreshSelectedClass(o),this.dispatchChange(o,e,t)}},e.prototype.refreshSelectedClass=function(t){this.eWrapper.classList.toggle("ag-checked",!0===t),this.eWrapper.classList.toggle("ag-indeterminate",null==t)},e}(si),ci=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),pi=function(t){function e(e){return t.call(this,e,"ag-radio-button","radio")||this}return ci(e,t),e.prototype.isSelected=function(){return this.eInput.checked},e.prototype.toggle=function(){this.eInput.disabled||this.isSelected()||this.setValue(!0)},e.prototype.addInputListeners=function(){t.prototype.addInputListeners.call(this),this.addManagedListener(this.eventService,qt.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))},e.prototype.onChange=function(t){t.selected&&t.name&&this.eInput.name&&this.eInput.name===t.name&&t.id&&this.eInput.id!==t.id&&this.setValue(!1,!0)},e}(ui),di=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),hi=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},fi=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},gi=function(){function t(t,e,o){this.localeService=t,this.optionsFactory=e,this.valueFormatter=o}return t.prototype.getModelAsString=function(t){var e=this;if(!t)return null;var o=null!=t.operator,n=this.localeService.getLocaleTextFunc();if(o){var r=t,i=r.conditions;if(!i)i=[r.condition1,r.condition2];var a=i.map(function(t){return e.getModelAsString(t)}),s="AND"===r.operator?"andCondition":"orCondition";return a.join(" ".concat(n(s,Mr[s])," "))}if(t.type===yi.BLANK||t.type===yi.NOT_BLANK)return n(t.type,t.type);var l=t,u=this.optionsFactory.getCustomOption(l.type),c=u||{},p=c.displayKey,d=c.displayName,h=c.numberOfInputs;return p&&d&&0===h?(n(p,d),d):this.conditionToString(l,u)},t.prototype.updateParams=function(t){this.optionsFactory=t.optionsFactory},t.prototype.formatValue=function(t){var e;return this.valueFormatter?null!==(e=this.valueFormatter(null!==t&&void 0!==t?t:null))&&void 0!==e?e:"":String(t)},t}(),yi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.eTypes=[],e.eJoinOperatorPanels=[],e.eJoinOperatorsAnd=[],e.eJoinOperatorsOr=[],e.eConditionBodies=[],e.listener=function(){return e.onUiChanged()},e.lastUiCompletePosition=null,e.joinOperatorId=0,e}return di(e,t),e.prototype.getNumberOfInputs=function(t){var o=this.optionsFactory.getCustomOption(t);if(o){var n=o.numberOfInputs;return null!=n?n:1}var r=[e.EMPTY,e.NOT_BLANK,e.BLANK];return t&&r.indexOf(t)>=0?0:t===e.IN_RANGE?2:1},e.prototype.onFloatingFilterChanged=function(t,e){this.setTypeFromFloatingFilter(t),this.setValueFromFloatingFilter(e),this.onUiChanged(!0)},e.prototype.setTypeFromFloatingFilter=function(t){var e=this;this.eTypes.forEach(function(o,n){0===n?o.setValue(t,!0):o.setValue(e.optionsFactory.getDefaultOption(),!0)})},e.prototype.getModelFromUi=function(){var t=this.getUiCompleteConditions();return 0===t.length?null:this.maxNumConditions>1&&t.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:t[0],condition2:t[1],conditions:t}:t[0]},e.prototype.getConditionTypes=function(){return this.eTypes.map(function(t){return t.getValue()})},e.prototype.getConditionType=function(t){return this.eTypes[t].getValue()},e.prototype.getJoinOperator=function(){return 0===this.eJoinOperatorsOr.length?this.defaultJoinOperator:!0===this.eJoinOperatorsOr[0].getValue()?"OR":"AND"},e.prototype.areModelsEqual=function(t,e){var o=this;if(!t&&!e)return!0;if(!t&&e||t&&!e)return!1;var n,r=!t.operator,i=!e.operator;if(!r&&i||r&&!i)return!1;if(r){var a=t,s=e;n=this.areSimpleModelsEqual(a,s)}else{var l=t,u=e;n=l.operator===u.operator&&gt(l.conditions,u.conditions,function(t,e){return o.areSimpleModelsEqual(t,e)})}return n},e.prototype.shouldRefresh=function(t){var e,o,n,r=this.getModel(),i=r?null!==(e=r.conditions)&&void 0!==e?e:[r]:null,a=null!==(n=null===(o=t.filterOptions)||void 0===o?void 0:o.map(function(t){return"string"===typeof t?t:t.displayKey}))&&void 0!==n?n:this.getDefaultFilterOptions();return!(i&&!i.every(function(t){return void 0!==a.find(function(e){return e===t.type})}))&&!("number"===typeof t.maxNumConditions&&i&&i.length>t.maxNumConditions)},e.prototype.refresh=function(e){return!!this.shouldRefresh(e)&&(!!t.prototype.refresh.call(this,e)&&(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0))},e.prototype.setModelIntoUi=function(t){var e=this;if(t.operator){var o=t;o.conditions||(o.conditions=[o.condition1,o.condition2]);var n=this.validateAndUpdateConditions(o.conditions),r=this.getNumConditions();if(n<r)this.removeConditionsAndOperators(n);else if(n>r)for(var i=r;i<n;i++)this.createJoinOperatorPanel(),this.createOption();var a="OR"===o.operator;this.eJoinOperatorsAnd.forEach(function(t){return t.setValue(!a,!0)}),this.eJoinOperatorsOr.forEach(function(t){return t.setValue(a,!0)}),o.conditions.forEach(function(t,o){e.eTypes[o].setValue(t.type,!0),e.setConditionIntoUi(t,o)})}else{var s=t;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(s.type,!0),this.setConditionIntoUi(s,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),hr.resolve()},e.prototype.validateAndUpdateConditions=function(t){var e=t.length;return e>this.maxNumConditions&&(t.splice(this.maxNumConditions),O('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),e=this.maxNumConditions),e},e.prototype.doesFilterPass=function(t){var e,o=this,n=this.getModel();if(null==n)return!0;var r=n.operator,i=[];if(r){var a=n;i.push.apply(i,fi([],hi(null!==(e=a.conditions)&&void 0!==e?e:[]),!1))}else i.push(n);return i[r&&"OR"===r?"some":"every"](function(e){return o.individualConditionPasses(t,e)})},e.prototype.setParams=function(e){t.prototype.setParams.call(this,e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new Dr,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")},e.prototype.setNumConditions=function(t){var e,o;null!=t.suppressAndOrCondition&&O('Since v29.2 "filterParams.suppressAndOrCondition" is deprecated. Use "filterParams.maxNumConditions = 1" instead.'),null!=t.alwaysShowBothConditions&&O('Since v29.2 "filterParams.alwaysShowBothConditions" is deprecated. Use "filterParams.numAlwaysVisibleConditions = 2" instead.'),this.maxNumConditions=null!==(e=t.maxNumConditions)&&void 0!==e?e:t.suppressAndOrCondition?1:2,this.maxNumConditions<1&&(O('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=null!==(o=t.numAlwaysVisibleConditions)&&void 0!==o?o:t.alwaysShowBothConditions?2:1,this.numAlwaysVisibleConditions<1&&(O('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(O('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)},e.prototype.createOption=function(){var t=this,e=this.createManagedBean(new ri);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());var o=this.createValueElement();this.eConditionBodies.push(o),this.eFilterBody.appendChild(o),this.putOptionsIntoDropdown(e),this.resetType(e);var n=this.getNumConditions()-1;this.forEachPositionInput(n,function(e){return t.resetInput(e)}),this.addChangedListeners(e,n)},e.prototype.createJoinOperatorPanel=function(){var t=document.createElement("div");this.eJoinOperatorPanels.push(t),t.classList.add("ag-filter-condition");var e=this.createJoinOperator(this.eJoinOperatorsAnd,t,"and"),o=this.createJoinOperator(this.eJoinOperatorsOr,t,"or");this.eFilterBody.appendChild(t);var n=this.eJoinOperatorPanels.length-1,r=this.joinOperatorId++;this.resetJoinOperatorAnd(e,n,r),this.resetJoinOperatorOr(o,n,r),this.isReadOnly()||(e.onValueChange(this.listener),o.onValueChange(this.listener))},e.prototype.createJoinOperator=function(t,e,o){var n=this.createManagedBean(new pi);return t.push(n),n.addCssClass("ag-filter-condition-operator"),n.addCssClass("ag-filter-condition-operator-".concat(o)),e.appendChild(n.getGui()),n},e.prototype.getDefaultJoinOperator=function(t){return"AND"===t||"OR"===t?t:"AND"},e.prototype.createFilterListOptions=function(){var t=this,e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map(function(e){return"string"===typeof e?t.createBoilerplateListOption(e):t.createCustomListOption(e)})},e.prototype.putOptionsIntoDropdown=function(t){this.filterListOptions.forEach(function(e){t.addOption(e)}),t.setDisabled(this.filterListOptions.length<=1)},e.prototype.createBoilerplateListOption=function(t){return{value:t,text:this.translate(t)}},e.prototype.createCustomListOption=function(t){var e=t.displayKey,o=this.optionsFactory.getCustomOption(t.displayKey);return{value:e,text:o?this.localeService.getLocaleTextFunc()(o.displayKey,o.displayName):this.translate(e)}},e.prototype.isAllowTwoConditions=function(){return this.maxNumConditions>=2},e.prototype.createBodyTemplate=function(){return""},e.prototype.getCssIdentifier=function(){return"simple-filter"},e.prototype.updateUiVisibility=function(){var t=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,t)},e.prototype.updateNumConditions=function(){for(var t,e=-1,o=!0,n=0;n<this.getNumConditions();n++)this.isConditionUiComplete(n)?e=n:o=!1;if(this.shouldAddNewConditionAtEnd(o))this.createJoinOperatorPanel(),this.createOption();else{var r=null!==(t=this.lastUiCompletePosition)&&void 0!==t?t:this.getNumConditions()-2;if(e<r){this.removeConditionsAndOperators(r+1);var i=e+1,a=r-i;a>0&&this.removeConditionsAndOperators(i,a),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e},e.prototype.updateConditionStatusesAndValues=function(t,e){var o=this;this.eTypes.forEach(function(e,n){var r=o.isConditionDisabled(n,t);e.setDisabled(r||o.filterListOptions.length<=1),1===n&&(tn(o.eJoinOperatorPanels[0],r),o.eJoinOperatorsAnd[0].setDisabled(r),o.eJoinOperatorsOr[0].setDisabled(r))}),this.eConditionBodies.forEach(function(t,e){Qo(t,o.isConditionBodyVisible(e))});var n="OR"===(null!==e&&void 0!==e?e:this.getJoinOperator());this.eJoinOperatorsAnd.forEach(function(t,e){t.setValue(!n,!0)}),this.eJoinOperatorsOr.forEach(function(t,e){t.setValue(n,!0)}),this.forEachInput(function(e,n,r,i){o.setElementDisplayed(e,n<i),o.setElementDisabled(e,o.isConditionDisabled(r,t))}),this.resetPlaceholder()},e.prototype.shouldAddNewConditionAtEnd=function(t){return t&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()},e.prototype.removeConditionsAndOperators=function(t,e){if(!(t>=this.getNumConditions())){this.removeComponents(this.eTypes,t,e),this.removeElements(this.eConditionBodies,t,e),this.removeValueElements(t,e);var o=Math.max(t-1,0);this.removeElements(this.eJoinOperatorPanels,o,e),this.removeComponents(this.eJoinOperatorsAnd,o,e),this.removeComponents(this.eJoinOperatorsOr,o,e)}},e.prototype.removeElements=function(t,e,o){this.removeItems(t,e,o).forEach(function(t){return hn(t)})},e.prototype.removeComponents=function(t,e,o){var n=this;this.removeItems(t,e,o).forEach(function(t){hn(t.getGui()),n.destroyBean(t)})},e.prototype.removeItems=function(t,e,o){return null==o?t.splice(e):t.splice(e,o)},e.prototype.afterGuiAttached=function(e){if(t.prototype.afterGuiAttached.call(this,e),this.resetPlaceholder(),!(null===e||void 0===e?void 0:e.suppressFocus))if(this.isReadOnly())this.eFilterBody.focus();else{var o=this.getInputs(0)[0];if(!o)return;o instanceof si&&o.getInputElement().focus()}},e.prototype.afterGuiDetached=function(){t.prototype.afterGuiDetached.call(this);var e=this.getModel();this.resetUiToActiveModel(e);for(var o=-1,n=-1,r=!1,i=this.getJoinOperator(),a=this.getNumConditions()-1;a>=0;a--)if(this.isConditionUiComplete(a))-1===o&&(o=a,n=a);else{var s=a<o;(a>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(a-1)||s)&&(this.removeConditionsAndOperators(a,1),r=!0,s&&n--)}var l=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),l=!0),this.shouldAddNewConditionAtEnd(n===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),l=!0),l&&this.updateConditionStatusesAndValues(n,i),r&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=n},e.prototype.getPlaceholderText=function(t,e){var o=this.translate(t);if(A(this.filterPlaceholder)){var n=this.filterPlaceholder,r=this.eTypes[e].getValue();o=n({filterOptionKey:r,filterOption:this.translate(r),placeholder:o})}else"string"===typeof this.filterPlaceholder&&(o=this.filterPlaceholder);return o},e.prototype.resetPlaceholder=function(){var t=this,e=this.localeService.getLocaleTextFunc();this.forEachInput(function(o,n,r,i){if(o instanceof si){var a=0===n&&i>1?"inRangeStart":0===n?"filterOoo":"inRangeEnd",s=0===n&&i>1?e("ariaFilterFromValue","Filter from value"):0===n?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");o.setInputPlaceholder(t.getPlaceholderText(a,r)),o.setInputAriaLabel(s)}})},e.prototype.setElementValue=function(t,e,o){t instanceof si&&t.setValue(null!=e?String(e):null,!0)},e.prototype.setElementDisplayed=function(t,e){t instanceof Sr&&Qo(t.getGui(),e)},e.prototype.setElementDisabled=function(t,e){t instanceof Sr&&tn(t.getGui(),e)},e.prototype.attachElementOnChange=function(t,e){t instanceof si&&t.onValueChange(e)},e.prototype.forEachInput=function(t){var e=this;this.getConditionTypes().forEach(function(o,n){e.forEachPositionTypeInput(n,o,t)})},e.prototype.forEachPositionInput=function(t,e){var o=this.getConditionType(t);this.forEachPositionTypeInput(t,o,e)},e.prototype.forEachPositionTypeInput=function(t,e,o){for(var n=this.getNumberOfInputs(e),r=this.getInputs(t),i=0;i<r.length;i++){var a=r[i];null!=a&&o(a,i,t,n)}},e.prototype.isConditionDisabled=function(t,e){return!!this.isReadOnly()||0!==t&&t>e+1},e.prototype.isConditionBodyVisible=function(t){var e=this.getConditionType(t);return this.getNumberOfInputs(e)>0},e.prototype.isConditionUiComplete=function(t){return!(t>=this.getNumConditions())&&(this.getConditionType(t)!==e.EMPTY&&!this.getValues(t).some(function(t){return null==t}))},e.prototype.getNumConditions=function(){return this.eTypes.length},e.prototype.getUiCompleteConditions=function(){for(var t=[],e=0;e<this.getNumConditions();e++)this.isConditionUiComplete(e)&&t.push(this.createCondition(e));return t},e.prototype.createMissingConditionsAndOperators=function(){if(!this.isReadOnly())for(var t=this.getNumConditions();t<this.numAlwaysVisibleConditions;t++)this.createJoinOperatorPanel(),this.createOption()},e.prototype.resetUiToDefaults=function(t){var e=this;return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(function(t){return e.resetType(t)}),this.eJoinOperatorsAnd.forEach(function(t,o){return e.resetJoinOperatorAnd(t,o,e.joinOperatorId+o)}),this.eJoinOperatorsOr.forEach(function(t,o){return e.resetJoinOperatorOr(t,o,e.joinOperatorId+o)}),this.joinOperatorId++,this.forEachInput(function(t){return e.resetInput(t)}),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,t||this.onUiChanged(),hr.resolve()},e.prototype.resetType=function(t){var e=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");t.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(e).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)},e.prototype.resetJoinOperatorAnd=function(t,e,o){this.resetJoinOperator(t,e,this.isDefaultOperator("AND"),this.translate("andCondition"),o)},e.prototype.resetJoinOperatorOr=function(t,e,o){this.resetJoinOperator(t,e,this.isDefaultOperator("OR"),this.translate("orCondition"),o)},e.prototype.resetJoinOperator=function(t,e,o,n,r){this.updateJoinOperatorDisabled(t.setValue(o,!0).setName("ag-simple-filter-and-or-".concat(this.getCompId(),"-").concat(r)).setLabel(n),e)},e.prototype.updateJoinOperatorsDisabled=function(){var t=this;this.eJoinOperatorsAnd.forEach(function(e,o){return t.updateJoinOperatorDisabled(e,o)}),this.eJoinOperatorsOr.forEach(function(e,o){return t.updateJoinOperatorDisabled(e,o)})},e.prototype.updateJoinOperatorDisabled=function(t,e){t.setDisabled(this.isReadOnly()||e>0)},e.prototype.resetInput=function(t){this.setElementValue(t,null),this.setElementDisabled(t,this.isReadOnly())},e.prototype.setConditionIntoUi=function(t,e){var o=this,n=this.mapValuesFromModel(t);this.forEachInput(function(t,r,i,a){i===e&&o.setElementValue(t,null!=n[r]?n[r]:null)})},e.prototype.setValueFromFloatingFilter=function(t){var e=this;this.forEachInput(function(o,n,r,i){e.setElementValue(o,0===n&&0===r?t:null,!0)})},e.prototype.isDefaultOperator=function(t){return t===this.defaultJoinOperator},e.prototype.addChangedListeners=function(t,e){var o=this;this.isReadOnly()||(t.onValueChange(this.listener),this.forEachPositionInput(e,function(t){o.attachElementOnChange(t,o.listener)}))},e.prototype.individualConditionPasses=function(t,e){var o=this.getCellValue(t.node),n=this.mapValuesFromModel(e),r=this.optionsFactory.getCustomOption(e.type),i=this.evaluateCustomFilter(r,n,o);return null!=i?i:null==o?this.evaluateNullValue(e.type):this.evaluateNonNullValue(n,o,e,t)},e.prototype.evaluateCustomFilter=function(t,e,o){if(null!=t){var n=t.predicate;return null==n||e.some(function(t){return null==t})?void 0:n(e,o)}},e.prototype.isBlank=function(t){return null==t||"string"===typeof t&&0===t.trim().length},e.prototype.hasInvalidInputs=function(){return!1},e.EMPTY="empty",e.BLANK="blank",e.NOT_BLANK="notBlank",e.EQUALS="equals",e.NOT_EQUAL="notEqual",e.LESS_THAN="lessThan",e.LESS_THAN_OR_EQUAL="lessThanOrEqual",e.GREATER_THAN="greaterThan",e.GREATER_THAN_OR_EQUAL="greaterThanOrEqual",e.IN_RANGE="inRange",e.CONTAINS="contains",e.NOT_CONTAINS="notContains",e.STARTS_WITH="startsWith",e.ENDS_WITH="endsWith",e}(jr),vi=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),mi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vi(e,t),e.prototype.setParams=function(e){t.prototype.setParams.call(this,e),this.scalarFilterParams=e},e.prototype.evaluateNullValue=function(t){switch(t){case e.EQUALS:case e.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case e.GREATER_THAN:case e.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case e.LESS_THAN:case e.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case e.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case e.BLANK:return!0;case e.NOT_BLANK:return!1}return!1},e.prototype.evaluateNonNullValue=function(t,o,n){var r=this.comparator(),i=null!=t[0]?r(t[0],o):0;switch(n.type){case e.EQUALS:return 0===i;case e.NOT_EQUAL:return 0!==i;case e.GREATER_THAN:return i>0;case e.GREATER_THAN_OR_EQUAL:return i>=0;case e.LESS_THAN:return i<0;case e.LESS_THAN_OR_EQUAL:return i<=0;case e.IN_RANGE:var a=r(t[1],o);return this.scalarFilterParams.inRangeInclusive?i>=0&&a<=0:i>0&&a<0;case e.BLANK:return this.isBlank(o);case e.NOT_BLANK:return!this.isBlank(o);default:return console.warn('AG Grid: Unexpected type of filter "'+n.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}},e}(yi),Ci=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),_i=function(){return(_i=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},wi=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},bi=1e3,Si=1/0,Ei=function(t){function e(e,o,n){var r=t.call(this,o,n)||this;return r.dateFilterParams=e,r}return Ci(e,t),e.prototype.conditionToString=function(t,e){var o=t.type,n=(e||{}).numberOfInputs,r=o==yi.IN_RANGE||2===n,i=Uo(t.dateFrom),a=Uo(t.dateTo),s=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(r){var l=null!==i?jo(i,s):"null",u=null!==a?jo(a,s):"null";return"".concat(l,"-").concat(u)}return null!=i?jo(i,s):"".concat(o)},e.prototype.updateParams=function(e){t.prototype.updateParams.call(this,e),this.dateFilterParams=e.dateFilterParams},e}(gi),xi=function(t){function e(){var e=t.call(this,"dateFilter")||this;return e.eConditionPanelsFrom=[],e.eConditionPanelsTo=[],e.dateConditionFromComps=[],e.dateConditionToComps=[],e.minValidYear=bi,e.maxValidYear=Si,e.minValidDate=null,e.maxValidDate=null,e}return Ci(e,t),e.prototype.afterGuiAttached=function(e){t.prototype.afterGuiAttached.call(this,e),this.dateConditionFromComps[0].afterGuiAttached(e)},e.prototype.mapValuesFromModel=function(t){var e=t||{},o=e.dateFrom,n=e.dateTo,r=e.type;return[o&&Uo(o)||null,n&&Uo(n)||null].slice(0,this.getNumberOfInputs(r))},e.prototype.comparator=function(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)},e.prototype.defaultComparator=function(t,e){return null==e||e<t?-1:e>t?1:0},e.prototype.setParams=function(e){this.dateFilterParams=e,t.prototype.setParams.call(this,e);var o=function(t,o){if(null!=e[t]){if(!isNaN(e[t]))return null==e[t]?o:Number(e[t]);console.warn("AG Grid: DateFilter ".concat(t," is not a number"))}return o};this.minValidYear=o("minValidYear",bi),this.maxValidYear=o("maxValidYear",Si),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:Uo(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:Uo(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&console.warn("AG Grid: DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new Ei(this.dateFilterParams,this.localeService,this.optionsFactory)},e.prototype.createDateCompWrapper=function(t){var e=this,o=new Ar(this.getContext(),this.userComponentFactory,{onDateChanged:function(){return e.onUiChanged()},filterParams:this.dateFilterParams},t);return this.addDestroyFunc(function(){return o.destroy()}),o},e.prototype.setElementValue=function(t,e){t.setDate(e)},e.prototype.setElementDisplayed=function(t,e){t.setDisplayed(e)},e.prototype.setElementDisabled=function(t,e){t.setDisabled(e)},e.prototype.getDefaultFilterOptions=function(){return e.DEFAULT_FILTER_OPTIONS},e.prototype.createValueElement=function(){var t=document.createElement("div");return t.classList.add("ag-filter-body"),this.createFromToElement(t,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(t,this.eConditionPanelsTo,this.dateConditionToComps,"to"),t},e.prototype.createFromToElement=function(t,e,o,n){var r=document.createElement("div");r.classList.add("ag-filter-".concat(n)),r.classList.add("ag-filter-date-".concat(n)),e.push(r),t.appendChild(r),o.push(this.createDateCompWrapper(r))},e.prototype.removeValueElements=function(t,e){this.removeDateComps(this.dateConditionFromComps,t,e),this.removeDateComps(this.dateConditionToComps,t,e),this.removeItems(this.eConditionPanelsFrom,t,e),this.removeItems(this.eConditionPanelsTo,t,e)},e.prototype.removeDateComps=function(t,e,o){this.removeItems(t,e,o).forEach(function(t){return t.destroy()})},e.prototype.isValidDateValue=function(t){if(null===t)return!1;if(this.minValidDate){if(t<this.minValidDate)return!1}else if(t.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(t>this.maxValidDate)return!1}else if(t.getUTCFullYear()>this.maxValidYear)return!1;return!0},e.prototype.isConditionUiComplete=function(e){var o=this;if(!t.prototype.isConditionUiComplete.call(this,e))return!1;var n=!0;return this.forEachInput(function(t,r,i,a){i!==e||!n||r>=a||(n=n&&o.isValidDateValue(t.getDate()))}),n},e.prototype.areSimpleModelsEqual=function(t,e){return t.dateFrom===e.dateFrom&&t.dateTo===e.dateTo&&t.type===e.type},e.prototype.getFilterType=function(){return"date"},e.prototype.createCondition=function(t){var e=this.getConditionType(t),o={},n=this.getValues(t);return n.length>0&&(o.dateFrom=zo(n[0])),n.length>1&&(o.dateTo=zo(n[1])),_i({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:e},o)},e.prototype.resetPlaceholder=function(){var t=this.localeService.getLocaleTextFunc(),e=this.translate("dateFormatOoo"),o=t("ariaFilterValue","Filter Value");this.forEachInput(function(t){t.setInputPlaceholder(e),t.setInputAriaLabel(o)})},e.prototype.getInputs=function(t){return t>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[t],this.dateConditionToComps[t]]},e.prototype.getValues=function(t){var e=[];return this.forEachPositionInput(t,function(t,o,n,r){o<r&&e.push(t.getDate())}),e},e.prototype.translate=function(e){return e===mi.LESS_THAN?t.prototype.translate.call(this,"before"):e===mi.GREATER_THAN?t.prototype.translate.call(this,"after"):t.prototype.translate.call(this,e)},e.prototype.getModelAsString=function(t){var e;return null!==(e=this.filterModelFormatter.getModelAsString(t))&&void 0!==e?e:""},e.DEFAULT_FILTER_OPTIONS=[mi.EQUALS,mi.NOT_EQUAL,mi.LESS_THAN,mi.GREATER_THAN,mi.IN_RANGE,mi.BLANK,mi.NOT_BLANK],wi([J("userComponentFactory")],e.prototype,"userComponentFactory",void 0),e}(mi),Ti=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Oi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ti(e,t),e.prototype.getDefaultDebounceMs=function(){return 0},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.isEventFromFloatingFilter=function(t){return t&&t.afterFloatingFilter},e.prototype.isEventFromDataChange=function(t){return null===t||void 0===t?void 0:t.afterDataChange},e.prototype.getLastType=function(){return this.lastType},e.prototype.isReadOnly=function(){return this.readOnly},e.prototype.setLastTypeFromModel=function(t){if(t){var e;if(t.operator)e=t.conditions[0];else e=t;this.lastType=e.type}else this.lastType=this.optionsFactory.getDefaultOption()},e.prototype.canWeEditAfterModelFromParentFilter=function(t){if(!t)return this.isTypeEditable(this.lastType);if(t.operator)return!1;var e=t;return this.isTypeEditable(e.type)},e.prototype.init=function(t){this.setSimpleParams(t,!1)},e.prototype.setSimpleParams=function(t,e){void 0===e&&(e=!0),this.optionsFactory=new Dr,this.optionsFactory.init(t.filterParams,this.getDefaultFilterOptions()),e||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!t.filterParams.readOnly;var o=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(o)},e.prototype.onParamsUpdated=function(t){this.refresh(t)},e.prototype.refresh=function(t){this.setSimpleParams(t)},e.prototype.doesFilterHaveSingleInput=function(t){var e=(this.optionsFactory.getCustomOption(t)||{}).numberOfInputs;return null==e||1==e},e.prototype.isTypeEditable=function(t){var e=[yi.IN_RANGE,yi.EMPTY,yi.BLANK,yi.NOT_BLANK];return!!t&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(t)&&e.indexOf(t)<0},e}(Sr),Ri=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Pi=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Ai=function(t){function e(){return t.call(this,'\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>\n                <div ref="eDateWrapper" style="display: flex;"></div>\n            </div>')||this}return Ri(e,t),e.prototype.getDefaultFilterOptions=function(){return xi.DEFAULT_FILTER_OPTIONS},e.prototype.init=function(e){t.prototype.init.call(this,e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new Ei(this.filterParams,this.localeService,this.optionsFactory);var o=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(o("ariaDateFilterInput","Date Filter Input"))},e.prototype.onParamsUpdated=function(t){this.refresh(t)},e.prototype.refresh=function(e){t.prototype.refresh.call(this,e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())},e.prototype.updateCompOnModelChange=function(t){var e=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(t);if(this.setEditable(e),e){if(t){var o=t;this.dateComp.setDate(Uo(o.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(t)),this.dateComp.setDate(null)},e.prototype.setEditable=function(t){Qo(this.eDateWrapper,t),Qo(this.eReadOnlyText.getGui(),!t)},e.prototype.onParentModelChanged=function(e,o){this.isEventFromFloatingFilter(o)||this.isEventFromDataChange(o)||(t.prototype.setLastTypeFromModel.call(this,e),this.updateCompOnModelChange(e))},e.prototype.onDateChanged=function(){var t=this,e=zo(this.dateComp.getDate());this.params.parentFilterInstance(function(o){if(o){var n=Uo(e);o.onFloatingFilterChanged(t.getLastType()||null,n)}})},e.prototype.getDateComponentParams=function(){var t=jr.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:N(this.onDateChanged.bind(this),t),filterParams:this.params.column.getColDef().filterParams}},e.prototype.createDateComponent=function(){var t=this;this.dateComp=new Ar(this.getContext(),this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper),this.addDestroyFunc(function(){return t.dateComp.destroy()})},e.prototype.updateDateComponent=function(){var t=this.gridOptionsService.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(t)},e.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},Pi([J("userComponentFactory")],e.prototype,"userComponentFactory",void 0),Pi([xr("eReadOnlyText")],e.prototype,"eReadOnlyText",void 0),Pi([xr("eDateWrapper")],e.prototype,"eDateWrapper",void 0),e}(Oi),Di=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Mi=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Ii=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},Li=function(t){function e(){return t.call(this,'\n            <div class="ag-filter-filter">\n                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>\n            </div>')||this}return Di(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.init=function(t){var e=this;this.params=t,this.setParams(t);var o=this.gridOptionsService.getDocument(),n=this.eDateInput.getInputElement();this.addManagedListener(n,"mousedown",function(){e.eDateInput.isDisabled()||e.usingSafariDatePicker||n.focus()}),this.addManagedListener(n,"input",function(t){t.target===o.activeElement&&(e.eDateInput.isDisabled()||e.params.onDateChanged())})},e.prototype.setParams=function(t){var e=this.eDateInput.getInputElement(),o=this.shouldUseBrowserDatePicker(t);this.usingSafariDatePicker=o&&wo(),e.type=o?"date":"text";var n=t.filterParams||{},r=n.minValidYear,i=n.maxValidYear,a=n.minValidDate,s=n.maxValidDate;if(a&&r&&O("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),s&&i&&O("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),a&&s){var l=Ii([a,s].map(function(t){return t instanceof Date?t:Uo(t)}),2),u=l[0],c=l[1];u&&c&&u.getTime()>c.getTime()&&O("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}a?a instanceof Date?e.min=jo(a):e.min=a:r&&(e.min="".concat(r,"-01-01")),s?s instanceof Date?e.max=jo(s):e.max=s:i&&(e.max="".concat(i,"-12-31"))},e.prototype.onParamsUpdated=function(t){this.refresh(t)},e.prototype.refresh=function(t){this.params=t,this.setParams(t)},e.prototype.getDate=function(){return Uo(this.eDateInput.getValue())},e.prototype.setDate=function(t){this.eDateInput.setValue(zo(t,!1))},e.prototype.setInputPlaceholder=function(t){this.eDateInput.setInputPlaceholder(t)},e.prototype.setDisabled=function(t){this.eDateInput.setDisabled(t)},e.prototype.afterGuiAttached=function(t){t&&t.suppressFocus||this.eDateInput.getInputElement().focus()},e.prototype.shouldUseBrowserDatePicker=function(t){return t.filterParams&&null!=t.filterParams.browserDatePicker?t.filterParams.browserDatePicker:So()||Eo()||wo()&&bo()>=14.1},Mi([xr("eDateInput")],e.prototype,"eDateInput",void 0),e}(Sr),Fi=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ni=function(t){function e(e,o,n){return void 0===o&&(o="ag-text-field"),void 0===n&&(n="text"),t.call(this,e,o,n)||this}return Fi(e,t),e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this),this.config.allowedCharPattern&&this.preventDisallowedCharacters()},e.prototype.setValue=function(e,o){return this.eInput.value!==e&&(this.eInput.value=r(e)?e:""),t.prototype.setValue.call(this,e,o)},e.prototype.setStartValue=function(t){this.setValue(t,!0)},e.prototype.preventDisallowedCharacters=function(){var t=new RegExp("[".concat(this.config.allowedCharPattern,"]"));this.addManagedListener(this.eInput,"keydown",function(e){Xn(e)&&e.key&&!t.test(e.key)&&e.preventDefault()}),this.addManagedListener(this.eInput,"paste",function(e){var o,n=null===(o=e.clipboardData)||void 0===o?void 0:o.getData("text");n&&n.split("").some(function(e){return!t.test(e)})&&e.preventDefault()})},e}(si),ki=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Gi=function(t){function e(e){return t.call(this,e,"ag-number-field","number")||this}return ki(e,t),e.prototype.postConstruct=function(){var e=this;t.prototype.postConstruct.call(this),this.addManagedListener(this.eInput,"blur",function(){var t=parseFloat(e.eInput.value),o=isNaN(t)?"":e.normalizeValue(t.toString());e.value!==o&&e.setValue(o)}),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this)),this.eInput.step="any"},e.prototype.onWheel=function(t){document.activeElement===this.eInput&&t.preventDefault()},e.prototype.normalizeValue=function(t){if(""===t)return"";null!=this.precision&&(t=this.adjustPrecision(t));var e=parseFloat(t);return null!=this.min&&e<this.min?t=this.min.toString():null!=this.max&&e>this.max&&(t=this.max.toString()),t},e.prototype.adjustPrecision=function(t,e){if(null==this.precision)return t;if(e){var o=parseFloat(t).toFixed(this.precision);return parseFloat(o).toString()}var n=String(t).split(".");if(n.length>1){if(n[1].length<=this.precision)return t;if(this.precision>0)return"".concat(n[0],".").concat(n[1].slice(0,this.precision))}return n[0]},e.prototype.setMin=function(t){return this.min===t?this:(this.min=t,An(this.eInput,"min",t),this)},e.prototype.setMax=function(t){return this.max===t?this:(this.max=t,An(this.eInput,"max",t),this)},e.prototype.setPrecision=function(t){return this.precision=t,this},e.prototype.setStep=function(t){return this.step===t?this:(this.step=t,An(this.eInput,"step",t),this)},e.prototype.setValue=function(e,o){var n=this;return this.setValueOrInputValue(function(e){return t.prototype.setValue.call(n,e,o)},function(){return n},e)},e.prototype.setStartValue=function(e){var o=this;return this.setValueOrInputValue(function(e){return t.prototype.setValue.call(o,e,!0)},function(t){o.eInput.value=t},e)},e.prototype.setValueOrInputValue=function(t,e,o){if(r(o)){var n=this.isScientificNotation(o);if(n&&this.eInput.validity.valid)return t(o);if(!n)n=(o=this.adjustPrecision(o))!=this.normalizeValue(o);if(n)return e(o)}return t(o)},e.prototype.getValue=function(){if(this.eInput.validity.valid){var e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):t.prototype.getValue.call(this)}},e.prototype.isScientificNotation=function(t){return"string"===typeof t&&t.includes("e")},e}(Ni),Vi=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Bi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Vi(e,t),e.prototype.conditionToString=function(t,e){var o=(e||{}).numberOfInputs;return t.type==yi.IN_RANGE||2===o?"".concat(this.formatValue(t.filter),"-").concat(this.formatValue(t.filterTo)):null!=t.filter?this.formatValue(t.filter):"".concat(t.type)},e}(gi);function zi(t){var e=(null!==t&&void 0!==t?t:{}).allowedCharPattern;return null!==e&&void 0!==e?e:null}var Hi,ji,Ui=function(t){function e(){var e=t.call(this,"numberFilter")||this;return e.eValuesFrom=[],e.eValuesTo=[],e}return Vi(e,t),e.prototype.refresh=function(e){return this.numberFilterParams.allowedCharPattern===e.allowedCharPattern&&t.prototype.refresh.call(this,e)},e.prototype.mapValuesFromModel=function(t){var e=t||{},o=e.filter,n=e.filterTo,r=e.type;return[this.processValue(o),this.processValue(n)].slice(0,this.getNumberOfInputs(r))},e.prototype.getDefaultDebounceMs=function(){return 500},e.prototype.comparator=function(){return function(t,e){return t===e?0:t<e?1:-1}},e.prototype.setParams=function(e){this.numberFilterParams=e,t.prototype.setParams.call(this,e),this.filterModelFormatter=new Bi(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)},e.prototype.getDefaultFilterOptions=function(){return e.DEFAULT_FILTER_OPTIONS},e.prototype.setElementValue=function(e,o,n){var r=!n&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(null!==o&&void 0!==o?o:null):o;t.prototype.setElementValue.call(this,e,r)},e.prototype.createValueElement=function(){var t=zi(this.numberFilterParams),e=document.createElement("div");return e.classList.add("ag-filter-body"),ke(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from",t),this.createFromToElement(e,this.eValuesTo,"to",t),e},e.prototype.createFromToElement=function(t,e,o,n){var r=this.createManagedBean(n?new Ni({allowedCharPattern:n}):new Gi);r.addCssClass("ag-filter-".concat(o)),r.addCssClass("ag-filter-filter"),e.push(r),t.appendChild(r.getGui())},e.prototype.removeValueElements=function(t,e){this.removeComponents(this.eValuesFrom,t,e),this.removeComponents(this.eValuesTo,t,e)},e.prototype.getValues=function(t){var e=this,o=[];return this.forEachPositionInput(t,function(t,n,r,i){n<i&&o.push(e.processValue(e.stringToFloat(t.getValue())))}),o},e.prototype.areSimpleModelsEqual=function(t,e){return t.filter===e.filter&&t.filterTo===e.filterTo&&t.type===e.type},e.prototype.getFilterType=function(){return"number"},e.prototype.processValue=function(t){return null==t?null:isNaN(t)?null:t},e.prototype.stringToFloat=function(t){if("number"===typeof t)return t;var e=n(t);return null!=e&&""===e.trim()&&(e=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(e):null==e||"-"===e.trim()?null:parseFloat(e)},e.prototype.createCondition=function(t){var e=this.getConditionType(t),o={filterType:this.getFilterType(),type:e},n=this.getValues(t);return n.length>0&&(o.filter=n[0]),n.length>1&&(o.filterTo=n[1]),o},e.prototype.getInputs=function(t){return t>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[t],this.eValuesTo[t]]},e.prototype.getModelAsString=function(t){var e;return null!==(e=this.filterModelFormatter.getModelAsString(t))&&void 0!==e?e:""},e.prototype.hasInvalidInputs=function(){var t=!1;return this.forEachInput(function(e){e.getInputElement().validity.valid||(t=!0)}),t},e.DEFAULT_FILTER_OPTIONS=[mi.EQUALS,mi.NOT_EQUAL,mi.GREATER_THAN,mi.GREATER_THAN_OR_EQUAL,mi.LESS_THAN,mi.LESS_THAN_OR_EQUAL,mi.IN_RANGE,mi.BLANK,mi.NOT_BLANK],e}(mi),Wi=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ki=function(){return(Ki=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},qi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Wi(e,t),e.prototype.conditionToString=function(t,e){var o=(e||{}).numberOfInputs;return t.type==yi.IN_RANGE||2===o?"".concat(t.filter,"-").concat(t.filterTo):null!=t.filter?"".concat(t.filter):"".concat(t.type)},e}(gi),Yi=function(t){function e(){var e=t.call(this,"textFilter")||this;return e.eValuesFrom=[],e.eValuesTo=[],e}return Wi(e,t),e.trimInput=function(t){var e=t&&t.trim();return""===e?t:e},e.prototype.getDefaultDebounceMs=function(){return 500},e.prototype.setParams=function(o){this.textFilterParams=o,t.prototype.setParams.call(this,o),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?e.DEFAULT_FORMATTER:e.DEFAULT_LOWERCASE_FORMATTER),this.filterModelFormatter=new qi(this.localeService,this.optionsFactory)},e.prototype.getTextMatcher=function(){var t=this.textFilterParams.textCustomComparator;return t?(ur.warnOnce("textCustomComparator is deprecated, use textMatcher instead."),function(e){var o=e.filterOption,n=e.value,r=e.filterText;return t(o,n,r)}):this.textFilterParams.textMatcher||e.DEFAULT_MATCHER},e.prototype.createCondition=function(t){var e=this.getConditionType(t),o={filterType:this.getFilterType(),type:e},n=this.getValuesWithSideEffects(t,!0);return n.length>0&&(o.filter=n[0]),n.length>1&&(o.filterTo=n[1]),o},e.prototype.getFilterType=function(){return"text"},e.prototype.areSimpleModelsEqual=function(t,e){return t.filter===e.filter&&t.filterTo===e.filterTo&&t.type===e.type},e.prototype.getInputs=function(t){return t>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[t],this.eValuesTo[t]]},e.prototype.getValues=function(t){return this.getValuesWithSideEffects(t,!1)},e.prototype.getValuesWithSideEffects=function(t,o){var r=this,i=[];return this.forEachPositionInput(t,function(t,a,s,l){var u;if(a<l){var c=n(t.getValue());o&&r.textFilterParams.trimInput&&(c=null!==(u=e.trimInput(c))&&void 0!==u?u:null,t.setValue(c,!0)),i.push(c)}}),i},e.prototype.getDefaultFilterOptions=function(){return e.DEFAULT_FILTER_OPTIONS},e.prototype.createValueElement=function(){var t=document.createElement("div");return t.classList.add("ag-filter-body"),ke(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from"),this.createFromToElement(t,this.eValuesTo,"to"),t},e.prototype.createFromToElement=function(t,e,o){var n=this.createManagedBean(new Ni);n.addCssClass("ag-filter-".concat(o)),n.addCssClass("ag-filter-filter"),e.push(n),t.appendChild(n.getGui())},e.prototype.removeValueElements=function(t,e){this.removeComponents(this.eValuesFrom,t,e),this.removeComponents(this.eValuesTo,t,e)},e.prototype.mapValuesFromModel=function(t){var e=t||{},o=e.filter,n=e.filterTo,r=e.type;return[o||null,n||null].slice(0,this.getNumberOfInputs(r))},e.prototype.evaluateNullValue=function(t){var e=[yi.NOT_EQUAL,yi.NOT_CONTAINS,yi.BLANK];return!!t&&e.indexOf(t)>=0},e.prototype.evaluateNonNullValue=function(t,e,o,n){var r=this,i=t.map(function(t){return r.formatter(t)})||[],a=this.formatter(e),s=this.textFilterParams,l=s.api,u=s.colDef,c=s.column,p=s.columnApi,d=s.context,h=s.textFormatter;if(o.type===yi.BLANK)return this.isBlank(e);if(o.type===yi.NOT_BLANK)return!this.isBlank(e);var f={api:l,colDef:u,column:c,columnApi:p,context:d,node:n.node,data:n.data,filterOption:o.type,value:a,textFormatter:h};return i.some(function(t){return r.matcher(Ki(Ki({},f),{filterText:t}))})},e.prototype.getModelAsString=function(t){var e;return null!==(e=this.filterModelFormatter.getModelAsString(t))&&void 0!==e?e:""},e.DEFAULT_FILTER_OPTIONS=[yi.CONTAINS,yi.NOT_CONTAINS,yi.EQUALS,yi.NOT_EQUAL,yi.STARTS_WITH,yi.ENDS_WITH,yi.BLANK,yi.NOT_BLANK],e.DEFAULT_FORMATTER=function(t){return t},e.DEFAULT_LOWERCASE_FORMATTER=function(t){return null==t?null:t.toString().toLowerCase()},e.DEFAULT_MATCHER=function(t){var o=t.filterOption,n=t.value,r=t.filterText;if(null==r)return!1;switch(o){case e.CONTAINS:return n.indexOf(r)>=0;case e.NOT_CONTAINS:return n.indexOf(r)<0;case e.EQUALS:return n===r;case e.NOT_EQUAL:return n!=r;case e.STARTS_WITH:return 0===n.indexOf(r);case e.ENDS_WITH:var i=n.lastIndexOf(r);return i>=0&&i===n.length-r.length;default:return!1}},e}(yi),Zi=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Xi=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Ji=function(t){function e(e){var o=t.call(this)||this;return o.params=e,o.valueChangedListener=function(){},o}return Zi(e,t),e.prototype.setupGui=function(t){var e,o=this;this.eFloatingFilterTextInput=this.createManagedBean(new Ni(null===(e=this.params)||void 0===e?void 0:e.config));var n=this.eFloatingFilterTextInput.getGui();t.appendChild(n),this.addManagedListener(n,"input",function(t){return o.valueChangedListener(t)}),this.addManagedListener(n,"keydown",function(t){return o.valueChangedListener(t)})},e.prototype.setEditable=function(t){this.eFloatingFilterTextInput.setDisabled(!t)},e.prototype.setAutoComplete=function(t){this.eFloatingFilterTextInput.setAutoComplete(t)},e.prototype.getValue=function(){return this.eFloatingFilterTextInput.getValue()},e.prototype.setValue=function(t,e){this.eFloatingFilterTextInput.setValue(t,e)},e.prototype.setValueChangedListener=function(t){this.valueChangedListener=t},e.prototype.setParams=function(t){this.setAriaLabel(t.ariaLabel),void 0!==t.autoComplete&&this.setAutoComplete(t.autoComplete)},e.prototype.setAriaLabel=function(t){this.eFloatingFilterTextInput.setInputAriaLabel(t)},e}(Bt),Qi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Zi(e,t),e.prototype.postConstruct=function(){this.setTemplate('\n            <div class="ag-floating-filter-input" role="presentation" ref="eFloatingFilterInputContainer"></div>\n        ')},e.prototype.getDefaultDebounceMs=function(){return 500},e.prototype.onParentModelChanged=function(t,e){this.isEventFromFloatingFilter(e)||this.isEventFromDataChange(e)||(this.setLastTypeFromModel(t),this.setEditable(this.canWeEditAfterModelFromParentFilter(t)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(t)))},e.prototype.init=function(e){this.setupFloatingFilterInputService(e),t.prototype.init.call(this,e),this.setTextInputParams(e)},e.prototype.setupFloatingFilterInputService=function(t){this.floatingFilterInputService=this.createFloatingFilterInputService(t),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)},e.prototype.setTextInputParams=function(t){var e;this.params=t;var o=null!==(e=t.browserAutoComplete)&&void 0!==e&&e;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(t),autoComplete:o}),this.applyActive=jr.isUseApplyButton(this.params.filterParams),!this.isReadOnly()){var n=jr.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),r=N(this.syncUpWithParentFilter.bind(this),n);this.floatingFilterInputService.setValueChangedListener(r)}},e.prototype.onParamsUpdated=function(t){this.refresh(t)},e.prototype.refresh=function(e){t.prototype.refresh.call(this,e),this.setTextInputParams(e)},e.prototype.recreateFloatingFilterInputService=function(t){var e=this.floatingFilterInputService.getValue();dn(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(t),this.floatingFilterInputService.setValue(e,!0)},e.prototype.getAriaLabel=function(t){var e=this.columnModel.getDisplayNameForColumn(t.column,"header",!0),o=this.localeService.getLocaleTextFunc();return"".concat(e," ").concat(o("ariaFilterInput","Filter Input"))},e.prototype.syncUpWithParentFilter=function(t){var e=this,o=t.key===jn.ENTER;if(!this.applyActive||o){var n=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(n=Yi.trimInput(n),this.floatingFilterInputService.setValue(n,!0)),this.params.parentFilterInstance(function(t){t&&t.onFloatingFilterChanged(e.getLastType()||null,n||null)})}},e.prototype.setEditable=function(t){this.floatingFilterInputService.setEditable(t)},Xi([J("columnModel")],e.prototype,"columnModel",void 0),Xi([xr("eFloatingFilterInputContainer")],e.prototype,"eFloatingFilterInputContainer",void 0),Xi([Y],e.prototype,"postConstruct",null),e}(Oi),$i=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ta=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.valueChangedListener=function(){},e.numberInputActive=!0,e}return $i(e,t),e.prototype.setupGui=function(t){var e=this;this.eFloatingFilterNumberInput=this.createManagedBean(new Gi),this.eFloatingFilterTextInput=this.createManagedBean(new Ni),this.eFloatingFilterTextInput.setDisabled(!0);var o=this.eFloatingFilterNumberInput.getGui(),n=this.eFloatingFilterTextInput.getGui();t.appendChild(o),t.appendChild(n),this.setupListeners(o,function(t){return e.valueChangedListener(t)}),this.setupListeners(n,function(t){return e.valueChangedListener(t)})},e.prototype.setEditable=function(t){this.numberInputActive=t,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)},e.prototype.setAutoComplete=function(t){this.eFloatingFilterNumberInput.setAutoComplete(t),this.eFloatingFilterTextInput.setAutoComplete(t)},e.prototype.getValue=function(){return this.getActiveInputElement().getValue()},e.prototype.setValue=function(t,e){this.getActiveInputElement().setValue(t,e)},e.prototype.getActiveInputElement=function(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput},e.prototype.setValueChangedListener=function(t){this.valueChangedListener=t},e.prototype.setupListeners=function(t,e){this.addManagedListener(t,"input",e),this.addManagedListener(t,"keydown",e)},e.prototype.setParams=function(t){this.setAriaLabel(t.ariaLabel),void 0!==t.autoComplete&&this.setAutoComplete(t.autoComplete)},e.prototype.setAriaLabel=function(t){this.eFloatingFilterNumberInput.setInputAriaLabel(t),this.eFloatingFilterTextInput.setInputAriaLabel(t)},e}(Bt),ea=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $i(e,t),e.prototype.init=function(e){var o;t.prototype.init.call(this,e),this.filterModelFormatter=new Bi(this.localeService,this.optionsFactory,null===(o=e.filterParams)||void 0===o?void 0:o.numberFormatter)},e.prototype.onParamsUpdated=function(t){this.refresh(t)},e.prototype.refresh=function(e){zi(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),t.prototype.refresh.call(this,e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})},e.prototype.getDefaultFilterOptions=function(){return Ui.DEFAULT_FILTER_OPTIONS},e.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},e.prototype.createFloatingFilterInputService=function(t){return this.allowedCharPattern=zi(t.filterParams),this.allowedCharPattern?this.createManagedBean(new Ji({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new ta)},e}(Qi),oa=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),na=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return oa(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e),this.filterModelFormatter=new qi(this.localeService,this.optionsFactory)},e.prototype.onParamsUpdated=function(t){this.refresh(t)},e.prototype.refresh=function(e){t.prototype.refresh.call(this,e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})},e.prototype.getDefaultFilterOptions=function(){return Yi.DEFAULT_FILTER_OPTIONS},e.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},e.prototype.createFloatingFilterInputService=function(){return this.createManagedBean(new Ji)},e}(Qi),ra=function(){function t(t,e){void 0===e&&(e=!1);var o=this;this.destroyFuncs=[],this.touching=!1,this.eventService=new rt,this.eElement=t,this.preventMouseClick=e;var n=this.onTouchStart.bind(this),r=this.onTouchMove.bind(this),i=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",n,{passive:!0}),this.eElement.addEventListener("touchmove",r,{passive:!0}),this.eElement.addEventListener("touchend",i,{passive:!1}),this.destroyFuncs.push(function(){o.eElement.removeEventListener("touchstart",n,{passive:!0}),o.eElement.removeEventListener("touchmove",r,{passive:!0}),o.eElement.removeEventListener("touchend",i,{passive:!1})})}return t.prototype.getActiveTouch=function(t){for(var e=0;e<t.length;e++){if(t[e].identifier===this.touchStart.identifier)return t[e]}return null},t.prototype.addEventListener=function(t,e){this.eventService.addEventListener(t,e)},t.prototype.removeEventListener=function(t,e){this.eventService.removeEventListener(t,e)},t.prototype.onTouchStart=function(e){var o=this;if(!this.touching){this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;var n=this.touchStart;window.setTimeout(function(){var r=o.touchStart===n;if(o.touching&&r&&!o.moved){o.moved=!0;var i={type:t.EVENT_LONG_TAP,touchStart:o.touchStart,touchEvent:e};o.eventService.dispatchEvent(i)}},500)}},t.prototype.onTouchMove=function(t){if(this.touching){var e=this.getActiveTouch(t.touches);if(e)!or(e,this.touchStart,4)&&(this.moved=!0)}},t.prototype.onTouchEnd=function(e){if(this.touching){if(!this.moved){var o={type:t.EVENT_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(o),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}},t.prototype.checkForDoubleTap=function(){var e=(new Date).getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>t.DOUBLE_TAP_MILLIS){var o={type:t.EVENT_DOUBLE_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(o),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e},t.prototype.destroy=function(){this.destroyFuncs.forEach(function(t){return t()})},t.EVENT_TAP="tap",t.EVENT_DOUBLE_TAP="doubleTap",t.EVENT_LONG_TAP="longTap",t.DOUBLE_TAP_MILLIS=500,t}(),ia=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),aa=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},sa=function(t){function e(o){var n=t.call(this)||this;return o||n.setTemplate(e.TEMPLATE),n}return ia(e,t),e.prototype.attachCustomElements=function(t,e,o,n,r){this.eSortOrder=t,this.eSortAsc=e,this.eSortDesc=o,this.eSortMixed=n,this.eSortNone=r},e.prototype.setupSort=function(t,e){var o=this;void 0===e&&(e=!1),this.column=t,this.suppressOrder=e,this.setupMultiSortIndicator(),this.column.isSortable()&&(this.addInIcon("sortAscending",this.eSortAsc,t),this.addInIcon("sortDescending",this.eSortDesc,t),this.addInIcon("sortUnSort",this.eSortNone,t),this.addManagedPropertyListener("unSortIcon",function(){return o.updateIcons()}),this.addManagedListener(this.eventService,qt.EVENT_NEW_COLUMNS_LOADED,function(){return o.updateIcons()}),this.addManagedListener(this.eventService,qt.EVENT_SORT_CHANGED,function(){return o.onSortChanged()}),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return o.onSortChanged()}),this.onSortChanged())},e.prototype.addInIcon=function(t,e,o){if(null!=e){var n=zn(t,this.gridOptionsService,o);n&&e.appendChild(n)}},e.prototype.onSortChanged=function(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()},e.prototype.updateIcons=function(){var t=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){var e="asc"===t;Qo(this.eSortAsc,e,{skipAriaHidden:!0})}if(this.eSortDesc){var o="desc"===t;Qo(this.eSortDesc,o,{skipAriaHidden:!0})}if(this.eSortNone){var n=!this.column.getColDef().unSortIcon&&!this.gridOptionsService.get("unSortIcon"),r=null===t||void 0===t;Qo(this.eSortNone,!n&&r,{skipAriaHidden:!0})}},e.prototype.setupMultiSortIndicator=function(){var t=this;this.addInIcon("sortUnSort",this.eSortMixed,this.column);var e=this.column.getColDef().showRowGroup;this.gridOptionsService.isColumnsSortingCoupledToGroup()&&e&&(this.addManagedListener(this.eventService,qt.EVENT_SORT_CHANGED,function(){return t.updateMultiSortIndicator()}),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return t.updateMultiSortIndicator()}),this.updateMultiSortIndicator())},e.prototype.updateMultiSortIndicator=function(){if(this.eSortMixed){var t="mixed"===this.sortController.getDisplaySortForColumn(this.column);Qo(this.eSortMixed,t,{skipAriaHidden:!0})}},e.prototype.updateSortOrder=function(){var t,e=this;if(this.eSortOrder){var o=this.sortController.getColumnsWithSortingOrdered(),n=null!==(t=this.sortController.getDisplaySortIndexForColumn(this.column))&&void 0!==t?t:-1,r=o.some(function(t){var o;return null!==(o=e.sortController.getDisplaySortIndexForColumn(t))&&void 0!==o&&o}),i=n>=0&&r;Qo(this.eSortOrder,i,{skipAriaHidden:!0}),n>=0?this.eSortOrder.textContent=(n+1).toString():dn(this.eSortOrder)}},e.TEMPLATE='<span class="ag-sort-indicator-container">\n            <span ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>\n        </span>',aa([xr("eSortOrder")],e.prototype,"eSortOrder",void 0),aa([xr("eSortAsc")],e.prototype,"eSortAsc",void 0),aa([xr("eSortDesc")],e.prototype,"eSortDesc",void 0),aa([xr("eSortMixed")],e.prototype,"eSortMixed",void 0),aa([xr("eSortNone")],e.prototype,"eSortNone",void 0),aa([J("columnModel")],e.prototype,"columnModel",void 0),aa([J("sortController")],e.prototype,"sortController",void 0),e}(Sr),la=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ua=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},ca=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lastMovingChanged=0,e}return la(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.refresh=function(t){return this.params=t,this.workOutTemplate()==this.currentTemplate&&(this.workOutShowMenu()==this.currentShowMenu&&(this.workOutSort()==this.currentSort&&(this.shouldSuppressMenuHide()==this.currentSuppressMenuHide&&(this.setDisplayName(t),!0))))},e.prototype.workOutTemplate=function(){var t,o=null!==(t=this.params.template)&&void 0!==t?t:e.TEMPLATE;return o=o&&o.trim?o.trim():o},e.prototype.init=function(t){this.params=t,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(t)},e.prototype.setDisplayName=function(t){if(this.currentDisplayName!=t.displayName){this.currentDisplayName=t.displayName;var e=ee(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=e)}},e.prototype.addInIcon=function(t,e,o){if(null!=e){var n=zn(t,this.gridOptionsService,o);n&&e.appendChild(n)}},e.prototype.setupTap=function(){var t=this;if(!this.gridOptionsService.get("suppressTouch")){var e=new ra(this.getGui(),!0),o=this.shouldSuppressMenuHide(),n=o&&r(this.eMenu),i=n?new ra(this.eMenu,!0):e;if(this.params.enableMenu){var a=n?"EVENT_TAP":"EVENT_LONG_TAP";this.addManagedListener(i,ra[a],function(e){return t.params.showColumnMenuAfterMouseClick(e.touchStart)})}if(this.params.enableSorting){this.addManagedListener(e,ra.EVENT_TAP,function(e){var n,r,i=e.touchStart.target;o&&((null===(n=t.eMenu)||void 0===n?void 0:n.contains(i))||(null===(r=t.eFilterButton)||void 0===r?void 0:r.contains(i)))||t.sortController.progressSort(t.params.column,!1,"uiColumnSorted")})}if(this.params.enableFilterButton){var s=new ra(this.eFilterButton,!0);this.addManagedListener(s,"tap",function(){return t.params.showFilter(t.eFilterButton)}),this.addDestroyFunc(function(){return s.destroy()})}this.addDestroyFunc(function(){return e.destroy()}),n&&this.addDestroyFunc(function(){return i.destroy()})}},e.prototype.workOutShowMenu=function(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()},e.prototype.shouldSuppressMenuHide=function(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()},e.prototype.setMenu=function(){var t=this;if(this.eMenu){if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu)return hn(this.eMenu),void(this.eMenu=void 0);var e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedListener(this.eMenu,"click",function(){return t.params.showColumnMenu(t.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}},e.prototype.onMenuKeyboardShortcut=function(t){var e,o,n,r,i=this.params.column,a=this.menuService.isLegacyMenuEnabled();if(t&&!a){if(this.menuService.isFilterMenuInHeaderEnabled(i))return this.params.showFilter(null!==(o=null!==(e=this.eFilterButton)&&void 0!==e?e:this.eMenu)&&void 0!==o?o:this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu(null!==(r=null!==(n=this.eMenu)&&void 0!==n?n:this.eFilterButton)&&void 0!==r?r:this.getGui()),!0;return!1},e.prototype.workOutSort=function(){return this.params.enableSorting},e.prototype.setupSort=function(){var t=this;if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.context.createBean(new sa(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),this.currentSort){this.addManagedListener(this.params.column,ct.EVENT_MOVING_CHANGED,function(){t.lastMovingChanged=(new Date).getTime()}),this.eLabel&&this.addManagedListener(this.eLabel,"click",function(e){var o=t.params.column.isMoving(),n=(new Date).getTime()-t.lastMovingChanged<50;if(!(o||n)){var r="ctrl"===t.gridOptionsService.get("multiSortKey")?e.ctrlKey||e.metaKey:e.shiftKey;t.params.progressSort(r)}});var e=function(){if(t.addOrRemoveCssClass("ag-header-cell-sorted-asc",t.params.column.isSortAscending()),t.addOrRemoveCssClass("ag-header-cell-sorted-desc",t.params.column.isSortDescending()),t.addOrRemoveCssClass("ag-header-cell-sorted-none",t.params.column.isSortNone()),t.params.column.getColDef().showRowGroup){var e=t.columnModel.getSourceColumnsForGroupColumn(t.params.column),o=!(null===e||void 0===e?void 0:e.every(function(e){return t.params.column.getSort()==e.getSort()}));t.addOrRemoveCssClass("ag-header-cell-sorted-mixed",o)}};this.addManagedListener(this.eventService,qt.EVENT_SORT_CHANGED,e),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_ROW_GROUP_CHANGED,e)}},e.prototype.setupFilterIcon=function(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))},e.prototype.setupFilterButton=function(){var t=this;this.eFilterButton&&(this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedListener(this.eFilterButton,"click",function(){return t.params.showFilter(t.eFilterButton)}):this.eFilterButton=void 0)},e.prototype.configureFilter=function(t,e,o){if(!t)return hn(e),!1;var n=this.params.column;return this.addInIcon("filter",e,n),this.addManagedListener(n,ct.EVENT_FILTER_CHANGED,o),o(),!0},e.prototype.onFilterChangedIcon=function(){var t=this.params.column.isFilterActive();Qo(this.eFilter,t,{skipAriaHidden:!0})},e.prototype.onFilterChangedButton=function(){var t=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",t)},e.prototype.getAnchorElementForMenu=function(t){var e,o,n,r;return t?null!==(o=null!==(e=this.eFilterButton)&&void 0!==e?e:this.eMenu)&&void 0!==o?o:this.getGui():null!==(r=null!==(n=this.eMenu)&&void 0!==n?n:this.eFilterButton)&&void 0!==r?r:this.getGui()},e.TEMPLATE='<div class="ag-cell-label-container" role="presentation">\n            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>\n            <span ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>\n            <div ref="eLabel" class="ag-header-cell-label" role="presentation">\n                <span ref="eText" class="ag-header-cell-text"></span>\n                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>\n                <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>\n            </div>\n        </div>',ua([J("sortController")],e.prototype,"sortController",void 0),ua([J("menuService")],e.prototype,"menuService",void 0),ua([J("columnModel")],e.prototype,"columnModel",void 0),ua([xr("eFilter")],e.prototype,"eFilter",void 0),ua([xr("eFilterButton")],e.prototype,"eFilterButton",void 0),ua([xr("eSortIndicator")],e.prototype,"eSortIndicator",void 0),ua([xr("eMenu")],e.prototype,"eMenu",void 0),ua([xr("eLabel")],e.prototype,"eLabel",void 0),ua([xr("eText")],e.prototype,"eText",void 0),ua([xr("eSortOrder")],e.prototype,"eSortOrder",void 0),ua([xr("eSortAsc")],e.prototype,"eSortAsc",void 0),ua([xr("eSortDesc")],e.prototype,"eSortDesc",void 0),ua([xr("eSortMixed")],e.prototype,"eSortMixed",void 0),ua([xr("eSortNone")],e.prototype,"eSortNone",void 0),e}(Sr),pa=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),da=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},ha=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return pa(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.init=function(t){this.params=t,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()},e.prototype.checkWarnings=function(){this.params.template&&O("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")},e.prototype.setupExpandIcons=function(){var t=this;this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");var e=function(e){if(!Dt(e)){var o=!t.params.columnGroup.isExpanded();t.columnModel.setColumnGroupOpened(t.params.columnGroup.getProvidedColumnGroup(),o,"uiColumnExpanded")}};this.addTouchAndClickListeners(this.eCloseIcon,e),this.addTouchAndClickListeners(this.eOpenIcon,e);var o=function(t){At(t)};this.addManagedListener(this.eCloseIcon,"dblclick",o),this.addManagedListener(this.eOpenIcon,"dblclick",o),this.addManagedListener(this.getGui(),"dblclick",e),this.updateIconVisibility();var n=this.params.columnGroup.getProvidedColumnGroup();this.addManagedListener(n,dt.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(n,dt.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))},e.prototype.addTouchAndClickListeners=function(t,e){var o=new ra(t,!0);this.addManagedListener(o,ra.EVENT_TAP,e),this.addDestroyFunc(function(){return o.destroy()}),this.addManagedListener(t,"click",e)},e.prototype.updateIconVisibility=function(){if(this.params.columnGroup.isExpandable()){var t=this.params.columnGroup.isExpanded();Qo(this.eOpenIcon,t),Qo(this.eCloseIcon,!t)}else Qo(this.eOpenIcon,!1),Qo(this.eCloseIcon,!1)},e.prototype.addInIcon=function(t,e){var o=zn(t,this.gridOptionsService,null);o&&this.getRefElement(e).appendChild(o)},e.prototype.addGroupExpandIcon=function(){if(!this.params.columnGroup.isExpandable())return Qo(this.eOpenIcon,!1),void Qo(this.eCloseIcon,!1)},e.prototype.setupLabel=function(){var t,e=this.params,o=e.displayName,n=e.columnGroup;if(r(o)){var i=ee(o,!0);this.getRefElement("agLabel").textContent=i}this.addOrRemoveCssClass("ag-sticky-label",!(null===(t=n.getColGroupDef())||void 0===t?void 0:t.suppressStickyLabel))},e.TEMPLATE='<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">\n            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>\n            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>\n            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>\n        </div>',da([J("columnModel")],e.prototype,"columnModel",void 0),da([xr("agOpened")],e.prototype,"eOpenIcon",void 0),da([xr("agClosed")],e.prototype,"eCloseIcon",void 0),e}(Sr),fa=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ga=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fa(e,t),e.prototype.isPopup=function(){return!0},e.prototype.setParentComponent=function(e){e.addCssClass("ag-has-popup"),t.prototype.setParentComponent.call(this,e)},e.prototype.destroy=function(){var e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),t.prototype.destroy.call(this)},e}(Sr),ya=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),va=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},ma=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return ya(e,t),e.prototype.init=function(t){this.params=t,this.focusAfterAttached=t.cellStartedEdit,this.eTextArea.setMaxLength(t.maxLength||200).setCols(t.cols||60).setRows(t.rows||10),r(t.value,!0)&&this.eTextArea.setValue(t.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()},e.prototype.onKeyDown=function(t){var e=t.key;(e===jn.LEFT||e===jn.UP||e===jn.RIGHT||e===jn.DOWN||t.shiftKey&&e===jn.ENTER)&&t.stopPropagation()},e.prototype.afterGuiAttached=function(){var t=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(t("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()},e.prototype.getValue=function(){var t=this.eTextArea.getValue();return r(t)||r(this.params.value)?this.params.parseValue(t):this.params.value},e.TEMPLATE='<div class="ag-large-text">\n            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>\n        </div>',va([xr("eTextArea")],e.prototype,"eTextArea",void 0),e}(ga),Ca=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),_a=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},wa=function(t){function e(){var e=t.call(this,'<div class="ag-cell-edit-wrapper">\n                <ag-select class="ag-cell-editor" ref="eSelect"></ag-select>\n            </div>')||this;return e.startedByEnter=!1,e}return Ca(e,t),e.prototype.init=function(t){this.focusAfterAttached=t.cellStartedEdit;var e=this.eSelect,o=this.valueFormatterService,n=this.gridOptionsService,r=t.values,a=t.value,s=t.eventKey;if(i(r))console.warn("AG Grid: no values found for select cellEditor");else{this.startedByEnter=null!=s&&s===jn.ENTER;var l=!1;r.forEach(function(n){var r={value:n},i=o.formatValue(t.column,null,n),s=null!==i&&void 0!==i;r.text=s?i:n,e.addOption(r),l=l||a===n}),l?e.setValue(t.value,!0):t.values.length&&e.setValue(t.values[0],!0);var u=t.valueListGap,c=t.valueListMaxWidth,p=t.valueListMaxHeight;null!=u&&e.setPickerGap(u),null!=p&&e.setPickerMaxHeight(p),null!=c&&e.setPickerMaxWidth(c),"fullRow"!==n.get("editType")&&this.addManagedListener(this.eSelect,ri.EVENT_ITEM_SELECTED,function(){return t.stopEditing()})}},e.prototype.afterGuiAttached=function(){var t=this;this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(function(){t.isAlive()&&t.eSelect.showPicker()})},e.prototype.focusIn=function(){this.eSelect.getFocusableElement().focus()},e.prototype.getValue=function(){return this.eSelect.getValue()},e.prototype.isPopup=function(){return!1},_a([J("valueFormatterService")],e.prototype,"valueFormatterService",void 0),_a([xr("eSelect")],e.prototype,"eSelect",void 0),e}(ga),ba=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Sa=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Ea=function(t){function e(e){var o=t.call(this,'\n            <div class="ag-cell-edit-wrapper">\n                '.concat(e.getTemplate(),"\n            </div>"))||this;return o.cellEditorInput=e,o}return ba(e,t),e.prototype.init=function(t){this.params=t;var e,o=this.eInput;if(this.cellEditorInput.init(o,t),t.cellStartedEdit){this.focusAfterAttached=!0;var n=t.eventKey;n===jn.BACKSPACE||t.eventKey===jn.DELETE?e="":n&&1===n.length?e=n:(e=this.cellEditorInput.getStartValue(),n!==jn.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,e=this.cellEditorInput.getStartValue();null!=e&&o.setStartValue(e),this.addManagedListener(o.getGui(),"keydown",function(t){var e=t.key;e!==jn.PAGE_UP&&e!==jn.PAGE_DOWN||t.preventDefault()})},e.prototype.afterGuiAttached=function(){var t,e,o=this.localeService.getLocaleTextFunc(),n=this.eInput;if(n.setInputAriaLabel(o("ariaInputEditor","Input Editor")),this.focusAfterAttached){wo()||n.getFocusableElement().focus();var r=n.getInputElement();this.highlightAllOnFocus?r.select():null===(e=(t=this.cellEditorInput).setCaret)||void 0===e||e.call(t)}},e.prototype.focusIn=function(){var t=this.eInput,e=t.getFocusableElement(),o=t.getInputElement();e.focus(),o.select()},e.prototype.getValue=function(){return this.cellEditorInput.getValue()},e.prototype.isPopup=function(){return!1},Sa([xr("eInput")],e.prototype,"eInput",void 0),e}(ga),xa=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ta=function(){function t(){}return t.prototype.getTemplate=function(){return'<ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field>'},t.prototype.init=function(t,e){this.eInput=t,this.params=e,null!=e.maxLength&&t.setMaxLength(e.maxLength)},t.prototype.getValue=function(){var t=this.eInput.getValue();return r(t)||r(this.params.value)?this.params.parseValue(t):this.params.value},t.prototype.getStartValue=function(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value},t.prototype.setCaret=function(){var t=this.eInput.getValue(),e=r(t)&&t.length||0;e&&this.eInput.getInputElement().setSelectionRange(e,e)},t}(),Oa=function(t){function e(){return t.call(this,new Ta)||this}return xa(e,t),e}(Ea),Ra=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Pa=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Aa=function(t){function e(){var e=t.call(this)||this;e.refreshCount=0;var o=document.createElement("span"),n=document.createElement("span");n.setAttribute("class","ag-value-change-delta");var r=document.createElement("span");return r.setAttribute("class","ag-value-change-value"),o.appendChild(n),o.appendChild(r),e.setTemplateFromElement(o),e}return Ra(e,t),e.prototype.init=function(t){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(t,!0)},e.prototype.showDelta=function(t,e){var o=Math.abs(e),n=t.formatValue(o),i=r(n)?n:o,a=e>=0;this.eDelta.textContent=a?"\u2191"+i:"\u2193"+i,this.eDelta.classList.toggle("ag-value-change-delta-up",a),this.eDelta.classList.toggle("ag-value-change-delta-down",!a)},e.prototype.setTimerToRemoveDelta=function(){var t=this;this.refreshCount++;var e=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(function(){window.setTimeout(function(){e===t.refreshCount&&t.hideDeltaValue()},2e3)})},e.prototype.hideDeltaValue=function(){this.eValue.classList.remove("ag-value-change-value-highlight"),dn(this.eDelta)},e.prototype.refresh=function(t,e){void 0===e&&(e=!1);var o=t.value;if(o===this.lastValue)return!1;if(r(t.valueFormatted)?this.eValue.textContent=t.valueFormatted:r(t.value)?this.eValue.textContent=o:dn(this.eValue),this.filterManager.isSuppressFlashingCellsBecauseFiltering())return!1;if("number"===typeof o&&"number"===typeof this.lastValue){var n=o-this.lastValue;this.showDelta(t,n)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),e||this.setTimerToRemoveDelta(),this.lastValue=o,!0},Pa([J("filterManager")],e.prototype,"filterManager",void 0),e}(Sr),Da=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ma=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Ia=function(t){function e(){var e=t.call(this)||this;e.refreshCount=0;var o=document.createElement("span"),n=document.createElement("span");return n.setAttribute("class","ag-value-slide-current"),o.appendChild(n),e.setTemplateFromElement(o),e.eCurrent=e.queryForHtmlElement(".ag-value-slide-current"),e}return Da(e,t),e.prototype.init=function(t){this.refresh(t,!0)},e.prototype.addSlideAnimation=function(){var t=this;this.refreshCount++;var e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);var o=document.createElement("span");o.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=o,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(function(){window.setTimeout(function(){e===t.refreshCount&&t.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(function(){e===t.refreshCount&&(t.getGui().removeChild(t.ePrevious),t.ePrevious=null)},3e3)})},e.prototype.refresh=function(t,e){void 0===e&&(e=!1);var o=t.value;return i(o)&&(o=""),o!==this.lastValue&&(!this.filterManager.isSuppressFlashingCellsBecauseFiltering()&&(e||this.addSlideAnimation(),this.lastValue=o,r(t.valueFormatted)?this.eCurrent.textContent=t.valueFormatted:r(t.value)?this.eCurrent.textContent=o:dn(this.eCurrent),!0))},Ma([J("filterManager")],e.prototype,"filterManager",void 0),e}(Sr),La=function(){return(La=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Fa=function(){function t(e){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=t.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=e}return t.prototype.setData=function(t){this.setDataCommon(t,!1)},t.prototype.updateData=function(t){this.setDataCommon(t,!0)},t.prototype.setDataCommon=function(t,e){var o=this.data;this.data=t,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();var n=this.createDataChangedEvent(t,o,e);this.dispatchLocalEvent(n)},t.prototype.updateDataOnDetailNode=function(){this.detailNode&&(this.detailNode.data=this.data)},t.prototype.createDataChangedEvent=function(e,o,n){return{type:t.EVENT_DATA_CHANGED,node:this,oldData:o,newData:e,update:n}},t.prototype.createLocalRowEvent=function(t){return{type:t,node:this}},t.prototype.getRowIndexString=function(){return"top"===this.rowPinned?"t-"+this.rowIndex:"bottom"===this.rowPinned?"b-"+this.rowIndex:this.rowIndex.toString()},t.prototype.createDaemonNode=function(){var e=new t(this.beans);return e.id=this.id,e.data=this.data,e.__daemon=!0,e.selected=this.selected,e.level=this.level,e},t.prototype.setDataAndId=function(t,e){var o=r(this.id)?this.createDaemonNode():null,n=this.data;this.data=t,this.updateDataOnDetailNode(),this.setId(e),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,o);var i=this.createDataChangedEvent(t,n,!1);this.dispatchLocalEvent(i)},t.prototype.checkRowSelectable=function(){var t=this.beans.gridOptionsService.get("isRowSelectable");this.setRowSelectable(!t||t(this))},t.prototype.setRowSelectable=function(e,o){if(this.selectable!==e){if(this.selectable=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_SELECTABLE_CHANGED)),o)return;if(this.beans.gridOptionsService.get("groupSelectsChildren")){var n=this.calculateSelectedFromChildren();return void this.setSelectedParams({newValue:null!==n&&void 0!==n&&n,source:"selectableChanged"})}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}},t.prototype.setId=function(e){var o=this.beans.gridOptionsService.getCallback("getRowId");if(o)if(this.data){var n=this.getGroupKeys(!0);this.id=o({data:this.data,parentKeys:n.length>0?n:void 0,level:this.level}),null!==this.id&&"string"===typeof this.id&&this.id.startsWith(t.ID_PREFIX_ROW_GROUP)&&console.error("AG Grid: Row IDs cannot start with ".concat(t.ID_PREFIX_ROW_GROUP,", this is a reserved prefix for AG Grid's row grouping feature.")),null!==this.id&&"string"!==typeof this.id&&(this.id=""+this.id)}else this.id=void 0;else this.id=e},t.prototype.getGroupKeys=function(t){void 0===t&&(t=!1);var e=[],o=this;for(t&&(o=o.parent);o&&o.level>=0;)e.push(o.key),o=o.parent;return e.reverse(),e},t.prototype.isPixelInRange=function(t){return!(!r(this.rowTop)||!r(this.rowHeight))&&(t>=this.rowTop&&t<this.rowTop+this.rowHeight)},t.prototype.setFirstChild=function(e){this.firstChild!==e&&(this.firstChild=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_FIRST_CHILD_CHANGED)))},t.prototype.setLastChild=function(e){this.lastChild!==e&&(this.lastChild=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_LAST_CHILD_CHANGED)))},t.prototype.setChildIndex=function(e){this.childIndex!==e&&(this.childIndex=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_CHILD_INDEX_CHANGED)))},t.prototype.setRowTop=function(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_TOP_CHANGED)),this.setDisplayed(null!==e))},t.prototype.clearRowTopAndRowIndex=function(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)},t.prototype.setDisplayed=function(e){this.displayed!==e&&(this.displayed=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_DISPLAYED_CHANGED)))},t.prototype.setDragging=function(e){this.dragging!==e&&(this.dragging=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_DRAGGING_CHANGED)))},t.prototype.setHighlighted=function(e){e!==this.highlighted&&(this.highlighted=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_HIGHLIGHT_CHANGED)))},t.prototype.setHovered=function(t){this.hovered!==t&&(this.hovered=t)},t.prototype.isHovered=function(){return this.hovered},t.prototype.setAllChildrenCount=function(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_ALL_CHILDREN_COUNT_CHANGED)))},t.prototype.setMaster=function(e){this.master!==e&&(this.master&&!e&&(this.expanded=!1),this.master=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_MASTER_CHANGED)))},t.prototype.setGroup=function(e){this.group!==e&&(this.group&&!e&&(this.expanded=!1),this.group=e,this.updateHasChildren(),this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_GROUP_CHANGED)))},t.prototype.setRowHeight=function(e,o){void 0===o&&(o=!1),this.rowHeight=e,this.rowHeightEstimated=o,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_HEIGHT_CHANGED))},t.prototype.setRowAutoHeight=function(t,e){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[e.getId()]=t,null!=t&&(null==this.checkAutoHeightsDebounced&&(this.checkAutoHeightsDebounced=N(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())},t.prototype.checkAutoHeights=function(){var t=this,e=!1,o=!0,n=0,r=this.__autoHeights;if(null!=r&&(this.beans.columnModel.getAllDisplayedAutoHeightCols().forEach(function(i){var a=r[i.getId()];if(null==a){if(!t.beans.columnModel.isColSpanActive())return void(e=!0);var s=[];switch(i.getPinned()){case"left":s=t.beans.columnModel.getDisplayedLeftColumnsForRow(t);break;case"right":s=t.beans.columnModel.getDisplayedRightColumnsForRow(t);break;case null:s=t.beans.columnModel.getViewportCenterColumnsForRow(t)}if(s.includes(i))return void(e=!0);a=-1}else o=!1;a>n&&(n=a)}),!e&&((o||n<10)&&(n=this.beans.gridOptionsService.getRowHeightForNode(this).height),n!=this.rowHeight))){this.setRowHeight(n);var i=this.beans.rowModel;i.onRowHeightChangedDebounced&&i.onRowHeightChangedDebounced()}},t.prototype.setRowIndex=function(e){this.rowIndex!==e&&(this.rowIndex=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_ROW_INDEX_CHANGED)))},t.prototype.setUiLevel=function(e){this.uiLevel!==e&&(this.uiLevel=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_UI_LEVEL_CHANGED)))},t.prototype.setExpanded=function(e,o){if(this.expanded!==e){this.expanded=e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_EXPANDED_CHANGED));var n=Object.assign({},this.createGlobalRowEvent(qt.EVENT_ROW_GROUP_OPENED),{expanded:e,event:o||null});this.beans.rowNodeEventThrottle.dispatchExpanded(n),this.sibling&&this.beans.rowRenderer.refreshCells({rowNodes:[this]})}},t.prototype.createGlobalRowEvent=function(t){return this.beans.gridOptionsService.addGridCommonParams({type:t,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})},t.prototype.dispatchLocalEvent=function(t){this.eventService&&this.eventService.dispatchEvent(t)},t.prototype.setDataValue=function(t,e,o){var n=this,r=function(){var e;return"string"!==typeof t?t:null!==(e=n.beans.columnModel.getGridColumn(t))&&void 0!==e?e:n.beans.columnModel.getPrimaryColumn(t)}(),i=this.getValueFromValueService(r);if(this.beans.gridOptionsService.get("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(r,i,e,o),!1;var a=this.beans.valueService.setValue(this,r,e,o);return this.dispatchCellChangedEvent(r,e,i),this.checkRowSelectable(),a},t.prototype.getValueFromValueService=function(t){var e=this.leafGroup&&this.beans.columnModel.isPivotMode(),o=this.group&&this.expanded&&!this.footer&&!e,n=this.beans.gridOptionsService.getGroupIncludeFooter()({node:this}),r=this.beans.gridOptionsService.get("groupSuppressBlankHeader"),i=o&&n&&!r;return this.beans.valueService.getValue(t,this,!1,i)},t.prototype.dispatchEventForSaveValueReadOnly=function(t,e,o,n){var r=this.beans.gridOptionsService.addGridCommonParams({type:qt.EVENT_CELL_EDIT_REQUEST,event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:t,colDef:t.getColDef(),data:this.data,node:this,oldValue:e,newValue:o,value:o,source:n});this.beans.eventService.dispatchEvent(r)},t.prototype.setGroupValue=function(t,e){var o=this.beans.columnModel.getGridColumn(t);i(this.groupData)&&(this.groupData={});var n=o.getColId(),r=this.groupData[n];r!==e&&(this.groupData[n]=e,this.dispatchCellChangedEvent(o,e,r))},t.prototype.setAggData=function(t){var e=this,o=this.aggData;if(this.aggData=t,this.eventService){var n=function(t){var n=e.aggData?e.aggData[t]:void 0,r=o?o[t]:void 0;if(n!==r){var i=e.beans.columnModel.lookupGridColumn(t);i&&e.dispatchCellChangedEvent(i,n,r)}};for(var r in this.aggData)n(r);for(var r in t)r in this.aggData||n(r)}},t.prototype.updateHasChildren=function(){var e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(this.beans.gridOptionsService.isRowModelType("serverSide")){var o=this.beans.gridOptionsService.get("treeData"),n=this.beans.gridOptionsService.get("isServerSideGroup");e=!this.stub&&!this.footer&&(o?!!n&&n(this.data):!!this.group)}e!==this.__hasChildren&&(this.__hasChildren=!!e,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(t.EVENT_HAS_CHILDREN_CHANGED)))},t.prototype.hasChildren=function(){return null==this.__hasChildren&&this.updateHasChildren(),this.__hasChildren},t.prototype.isEmptyRowGroupNode=function(){return this.group&&a(this.childrenAfterGroup)},t.prototype.dispatchCellChangedEvent=function(e,o,n){var r={type:t.EVENT_CELL_CHANGED,node:this,column:e,newValue:o,oldValue:n};this.dispatchLocalEvent(r)},t.prototype.resetQuickFilterAggregateText=function(){this.quickFilterAggregateText=null},t.prototype.isExpandable=function(){return!this.footer&&(this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master)},t.prototype.isSelected=function(){return this.footer?this.sibling.isSelected():this.selected},t.prototype.depthFirstSearch=function(t){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(function(e){return e.depthFirstSearch(t)}),t(this)},t.prototype.calculateSelectedFromChildren=function(){var t,e=!1,o=!1,n=!1;if(!(null===(t=this.childrenAfterGroup)||void 0===t?void 0:t.length))return this.selectable?this.selected:null;for(var r=0;r<this.childrenAfterGroup.length;r++){var i=this.childrenAfterGroup[r],a=i.isSelected();if(!i.selectable){var s=i.calculateSelectedFromChildren();if(null===s)continue;a=s}switch(a){case!0:e=!0;break;case!1:o=!0;break;default:n=!0}}return n||e&&o?void 0:!!e||!o&&(this.selectable?this.selected:null)},t.prototype.setSelectedInitialValue=function(t){this.selected=t},t.prototype.selectThisNode=function(e,o,n){void 0===n&&(n="api");var r=!this.selectable&&e,i=this.selected===e;if(r||i)return!1;if(this.selected=e,this.eventService){this.dispatchLocalEvent(this.createLocalRowEvent(t.EVENT_ROW_SELECTED));var a=this.sibling;a&&a.footer&&a.dispatchLocalEvent(a.createLocalRowEvent(t.EVENT_ROW_SELECTED))}var s=La(La({},this.createGlobalRowEvent(qt.EVENT_ROW_SELECTED)),{event:o||null,source:n});return this.beans.eventService.dispatchEvent(s),!0},t.prototype.setSelected=function(t,e,o){void 0===e&&(e=!1),void 0===o&&(o="api"),"boolean"!==typeof o?this.setSelectedParams({newValue:t,clearSelection:e,rangeSelect:!1,source:o}):console.warn("AG Grid: since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.")},t.prototype.setSelectedParams=function(t){return this.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),0):void 0===this.id?(console.warn("AG Grid: cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(La(La({},t),{nodes:[this.footer?this.sibling:this]}))},t.prototype.isRowPinned=function(){return"top"===this.rowPinned||"bottom"===this.rowPinned},t.prototype.isParentOfNode=function(t){for(var e=this.parent;e;){if(e===t)return!0;e=e.parent}return!1},t.prototype.addEventListener=function(t,e){var o,n;this.eventService||(this.eventService=new rt),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new it(this.beans.frameworkOverrides));var r=null!==(n=null===(o=this.frameworkEventListenerService)||void 0===o?void 0:o.wrap(e))&&void 0!==n?n:e;this.eventService.addEventListener(t,r)},t.prototype.removeEventListener=function(t,e){var o,n;if(this.eventService){var r=null!==(n=null===(o=this.frameworkEventListenerService)||void 0===o?void 0:o.unwrap(e))&&void 0!==n?n:e;this.eventService.removeEventListener(t,r),this.eventService.noRegisteredListenersExist()&&(this.eventService=null)}},t.prototype.onMouseEnter=function(){this.dispatchLocalEvent(this.createLocalRowEvent(t.EVENT_MOUSE_ENTER))},t.prototype.onMouseLeave=function(){this.dispatchLocalEvent(this.createLocalRowEvent(t.EVENT_MOUSE_LEAVE))},t.prototype.getFirstChildOfFirstChild=function(t){for(var e=this,o=!0,n=!1,i=null;o&&!n;){var a=e.parent;r(a)&&e.firstChild?a.rowGroupColumn===t&&(n=!0,i=a):o=!1,e=a}return n?i:null},t.prototype.isFullWidthCell=function(){if(this.detail)return!0;var t=this.beans.gridOptionsService.getCallback("isFullWidthRow");return!!t&&t({rowNode:this})},t.prototype.getRoute=function(){if(null!=this.key){for(var t=[],e=this;null!=e.key;)t.push(e.key),e=e.parent;return t.reverse()}},t.prototype.createFooter=function(){var e=this;if(!this.sibling){var o=new Set(["eventService","__objectId","sticky"]),n=new t(this.beans);Object.keys(this).forEach(function(t){o.has(t)||(n[t]=e[t])}),n.footer=!0,n.setRowTop(null),n.setRowIndex(null),n.oldRowTop=null,n.id="rowGroupFooter_"+this.id,n.sibling=this,this.sibling=n}},t.prototype.destroyFooter=function(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)},t.ID_PREFIX_ROW_GROUP="row-group-",t.ID_PREFIX_TOP_PINNED="t-",t.ID_PREFIX_BOTTOM_PINNED="b-",t.OBJECT_ID_SEQUENCE=0,t.EVENT_ROW_SELECTED="rowSelected",t.EVENT_DATA_CHANGED="dataChanged",t.EVENT_CELL_CHANGED="cellChanged",t.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged",t.EVENT_MASTER_CHANGED="masterChanged",t.EVENT_GROUP_CHANGED="groupChanged",t.EVENT_MOUSE_ENTER="mouseEnter",t.EVENT_MOUSE_LEAVE="mouseLeave",t.EVENT_HEIGHT_CHANGED="heightChanged",t.EVENT_TOP_CHANGED="topChanged",t.EVENT_DISPLAYED_CHANGED="displayedChanged",t.EVENT_FIRST_CHILD_CHANGED="firstChildChanged",t.EVENT_LAST_CHILD_CHANGED="lastChildChanged",t.EVENT_CHILD_INDEX_CHANGED="childIndexChanged",t.EVENT_ROW_INDEX_CHANGED="rowIndexChanged",t.EVENT_EXPANDED_CHANGED="expandedChanged",t.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged",t.EVENT_SELECTABLE_CHANGED="selectableChanged",t.EVENT_UI_LEVEL_CHANGED="uiLevelChanged",t.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged",t.EVENT_DRAGGING_CHANGED="draggingChanged",t}(),Na=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ka=function(){return(ka=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Ga=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Va=function(t){function e(){return t.call(this,'\n            <div class="ag-selection-checkbox" role="presentation">\n                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n            </div>')||this}return Na(e,t),e.prototype.postConstruct=function(){this.eCheckbox.setPassive(!0)},e.prototype.getCheckboxId=function(){return this.eCheckbox.getInputElement().id},e.prototype.onDataChanged=function(){this.onSelectionChanged()},e.prototype.onSelectableChanged=function(){this.showOrHideSelect()},e.prototype.onSelectionChanged=function(){var t=this.rowNode.isSelected();this.eCheckbox.setValue(t,!0)},e.prototype.onClicked=function(t,e,o){return this.rowNode.setSelectedParams({newValue:t,rangeSelect:o.shiftKey,groupSelectsFiltered:e,event:o,source:"checkboxSelected"})},e.prototype.init=function(t){var e=this;if(this.rowNode=t.rowNode,this.column=t.column,this.overrides=t.overrides,this.onSelectionChanged(),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",function(t){At(t)}),this.addManagedListener(this.eCheckbox.getInputElement(),"click",function(t){At(t);var o=e.gridOptionsService.get("groupSelectsFiltered"),n=e.eCheckbox.getValue();e.shouldHandleIndeterminateState(n,o)?0===e.onClicked(!0,o,t||{})&&e.onClicked(!1,o,t):n?e.onClicked(!1,o,t):e.onClicked(!0,o,t||{})}),this.addManagedListener(this.rowNode,Fa.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this)),this.gridOptionsService.get("isRowSelectable")||"function"===typeof this.getIsVisible()){var o=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,qt.EVENT_DISPLAYED_COLUMNS_CHANGED,o),this.addManagedListener(this.rowNode,Fa.EVENT_DATA_CHANGED,o),this.addManagedListener(this.rowNode,Fa.EVENT_CELL_CHANGED,o),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")},e.prototype.shouldHandleIndeterminateState=function(t,e){return e&&(void 0===this.eCheckbox.getPreviousValue()||void 0===t)&&this.gridOptionsService.isRowModelType("clientSide")},e.prototype.showOrHideSelect=function(){var t,e,o,n,r=this.rowNode.selectable,i=this.getIsVisible();if(r)if("function"===typeof i){var a=null===(t=this.overrides)||void 0===t?void 0:t.callbackParams,s=null===(e=this.column)||void 0===e?void 0:e.createColumnFunctionCallbackParams(this.rowNode);r=!!s&&i(ka(ka({},a),s))}else r=null!==i&&void 0!==i&&i;if(null===(o=this.column)||void 0===o?void 0:o.getColDef().showDisabledCheckboxes)return this.eCheckbox.setDisabled(!r),this.setVisible(!0),void this.setDisplayed(!0);null!==(n=this.overrides)&&void 0!==n&&n.removeHidden?this.setDisplayed(r):this.setVisible(r)},e.prototype.getIsVisible=function(){var t,e;return this.overrides?this.overrides.isVisible:null===(e=null===(t=this.column)||void 0===t?void 0:t.getColDef())||void 0===e?void 0:e.checkboxSelection},Ga([xr("eCheckbox")],e.prototype,"eCheckbox",void 0),Ga([Y],e.prototype,"postConstruct",null),e}(Sr);!function(t){t[t.Up=0]="Up",t[t.Down=1]="Down"}(Hi||(Hi={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right"}(ji||(ji={}));var Ba,za=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ha=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},ja=function(t){var e="function"===typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(t){t[t.ToolPanel=0]="ToolPanel",t[t.HeaderCell=1]="HeaderCell",t[t.RowDrag=2]="RowDrag",t[t.ChartPanel=3]="ChartPanel",t[t.AdvancedFilterBuilder=4]="AdvancedFilterBuilder"}(Ba||(Ba={}));var Ua,Wa=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dragSourceAndParamsList=[],e.dropTargets=[],e}var o;return za(e,t),o=e,e.prototype.init=function(){this.ePinnedIcon=Bn("columnMovePin",this.gridOptionsService,null),this.eHideIcon=Bn("columnMoveHide",this.gridOptionsService,null),this.eMoveIcon=Bn("columnMoveMove",this.gridOptionsService,null),this.eLeftIcon=Bn("columnMoveLeft",this.gridOptionsService,null),this.eRightIcon=Bn("columnMoveRight",this.gridOptionsService,null),this.eGroupIcon=Bn("columnMoveGroup",this.gridOptionsService,null),this.eAggregateIcon=Bn("columnMoveValue",this.gridOptionsService,null),this.ePivotIcon=Bn("columnMovePivot",this.gridOptionsService,null),this.eDropNotAllowedIcon=Bn("dropNotAllowed",this.gridOptionsService,null)},e.prototype.addDragSource=function(t,e){void 0===e&&(e=!1);var o={eElement:t.eElement,dragStartPixels:t.dragStartPixels,onDragStart:this.onDragStart.bind(this,t),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:e};this.dragSourceAndParamsList.push({params:o,dragSource:t}),this.dragService.addDragSource(o)},e.prototype.removeDragSource=function(t){var e=this.dragSourceAndParamsList.find(function(e){return e.dragSource===t});e&&(this.dragService.removeDragSource(e.params),mt(this.dragSourceAndParamsList,e))},e.prototype.clearDragSourceParamsList=function(){var t=this;this.dragSourceAndParamsList.forEach(function(e){return t.dragService.removeDragSource(e.params)}),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0},e.prototype.nudge=function(){this.dragging&&this.onDragging(this.eventLastTime,!0)},e.prototype.onDragStart=function(t,e){this.dragging=!0,this.dragSource=t,this.eventLastTime=e,this.dragItem=this.dragSource.getDragItem(),this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()},e.prototype.onDragStop=function(t){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){var e=this.createDropTargetEvent(this.lastDropTarget,t,null,null,!1);this.lastDropTarget.onDragStop(e)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()},e.prototype.onDragging=function(t,e){var o,n,r,i,a=this,s=this.getHorizontalDirection(t),l=this.getVerticalDirection(t);this.eventLastTime=t,this.positionGhost(t);var u=this.dropTargets.filter(function(e){return a.isMouseOnDropTarget(t,e)}),c=this.findCurrentDropTarget(t,u);if(c!==this.lastDropTarget)this.leaveLastTargetIfExists(t,s,l,e),null!==this.lastDropTarget&&null===c&&(null===(n=(o=this.dragSource).onGridExit)||void 0===n||n.call(o,this.dragItem)),null===this.lastDropTarget&&null!==c&&(null===(i=(r=this.dragSource).onGridEnter)||void 0===i||i.call(r,this.dragItem)),this.enterDragTargetIfExists(c,t,s,l,e),this.lastDropTarget=c;else if(c&&c.onDragging){var p=this.createDropTargetEvent(c,t,s,l,e);c.onDragging(p)}},e.prototype.getAllContainersFromDropTarget=function(t){var e=t.getSecondaryContainers?t.getSecondaryContainers():null,o=[[t.getContainer()]];return e?o.concat(e):o},e.prototype.allContainersIntersect=function(t,e){var o,n;try{for(var r=ja(e),i=r.next();!i.done;i=r.next()){var a=i.value.getBoundingClientRect();if(0===a.width||0===a.height)return!1;var s=t.clientX>=a.left&&t.clientX<a.right,l=t.clientY>=a.top&&t.clientY<a.bottom;if(!s||!l)return!1}}catch(u){o={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return!0},e.prototype.isMouseOnDropTarget=function(t,e){var o,n,r=this.getAllContainersFromDropTarget(e),i=!1;try{for(var a=ja(r),s=a.next();!s.done;s=a.next()){var l=s.value;if(this.allContainersIntersect(t,l)){i=!0;break}}}catch(u){o={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return!(e.targetContainsSource&&!e.getContainer().contains(this.dragSource.eElement))&&(i&&e.isInterestedIn(this.dragSource.type,this.dragSource.eElement))},e.prototype.findCurrentDropTarget=function(t,e){var o,n,r,i,a=e.length;if(0===a)return null;if(1===a)return e[0];var s=this.gridOptionsService.getRootNode().elementsFromPoint(t.clientX,t.clientY);try{for(var l=ja(s),u=l.next();!u.done;u=l.next()){var c=u.value;try{for(var p=(r=void 0,ja(e)),d=p.next();!d.done;d=p.next()){var h=d.value;if(-1!==Et(this.getAllContainersFromDropTarget(h)).indexOf(c))return h}}catch(f){r={error:f}}finally{try{d&&!d.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}}}catch(g){o={error:g}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(o)throw o.error}}return null},e.prototype.enterDragTargetIfExists=function(t,e,o,n,r){if(t){if(t.onDragEnter){var i=this.createDropTargetEvent(t,e,o,n,r);t.onDragEnter(i)}this.setGhostIcon(t.getIconName?t.getIconName():null)}},e.prototype.leaveLastTargetIfExists=function(t,e,o,n){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){var r=this.createDropTargetEvent(this.lastDropTarget,t,e,o,n);this.lastDropTarget.onDragLeave(r)}this.setGhostIcon(null)}},e.prototype.addDropTarget=function(t){this.dropTargets.push(t)},e.prototype.removeDropTarget=function(t){this.dropTargets=this.dropTargets.filter(function(e){return e.getContainer()!==t.getContainer()})},e.prototype.hasExternalDropZones=function(){return this.dropTargets.some(function(t){return t.external})},e.prototype.findExternalZone=function(t){return this.dropTargets.filter(function(t){return t.external}).find(function(e){return e.getContainer()===t.getContainer()})||null},e.prototype.getHorizontalDirection=function(t){var e=this.eventLastTime&&this.eventLastTime.clientX,o=t.clientX;return e===o?null:e>o?ji.Left:ji.Right},e.prototype.getVerticalDirection=function(t){var e=this.eventLastTime&&this.eventLastTime.clientY,o=t.clientY;return e===o?null:e>o?Hi.Up:Hi.Down},e.prototype.createDropTargetEvent=function(t,e,o,n,r){var i=t.getContainer(),a=i.getBoundingClientRect(),s=this.gridApi,l=this.columnApi,u=this.dragItem,c=this.dragSource;return{event:e,x:e.clientX-a.left,y:e.clientY-a.top,vDirection:n,hDirection:o,dragSource:c,fromNudge:r,dragItem:u,api:s,columnApi:l,dropZoneTarget:i}},e.prototype.positionGhost=function(t){var e=this.eGhost;if(e){var o=e.getBoundingClientRect().height,n=Ao()-2,r=Do()-2,i=ln(e.offsetParent),a=t.clientY,s=t.clientX,l=a-i.top-o/2,u=s-i.left-10,c=this.gridOptionsService.getDocument(),p=c.defaultView||window,d=p.pageYOffset||c.documentElement.scrollTop,h=p.pageXOffset||c.documentElement.scrollLeft;n>0&&u+e.clientWidth>n+h&&(u=n+h-e.clientWidth),u<0&&(u=0),r>0&&l+e.clientHeight>r+d&&(l=r+d-e.clientHeight),l<0&&(l=0),e.style.left="".concat(u,"px"),e.style.top="".concat(l,"px")}},e.prototype.removeGhost=function(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null},e.prototype.createGhost=function(){this.eGhost=yn(o.GHOST_TEMPLATE),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost);var t=this.environment.getTheme().theme;t&&this.eGhost.classList.add(t),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);var e=this.eGhost.querySelector(".ag-dnd-ghost-label"),n=this.dragSource.dragItemName;A(n)&&(n=n()),e.innerHTML=ee(n)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";var r=this.gridOptionsService.getDocument(),i=null,a=null;try{i=r.fullscreenElement}catch(l){}finally{i||(i=this.gridOptionsService.getRootNode());var s=i.querySelector("body");a=s||(i instanceof ShadowRoot?i:i instanceof Document?null===i||void 0===i?void 0:i.documentElement:i)}this.eGhostParent=a,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")},e.prototype.setGhostIcon=function(t,e){void 0===e&&(e=!1),dn(this.eGhostIcon);var n=null;switch(t||(t=this.dragSource.getDefaultIconName?this.dragSource.getDefaultIconName():o.ICON_NOT_ALLOWED),t){case o.ICON_PINNED:n=this.ePinnedIcon;break;case o.ICON_MOVE:n=this.eMoveIcon;break;case o.ICON_LEFT:n=this.eLeftIcon;break;case o.ICON_RIGHT:n=this.eRightIcon;break;case o.ICON_GROUP:n=this.eGroupIcon;break;case o.ICON_AGGREGATE:n=this.eAggregateIcon;break;case o.ICON_PIVOT:n=this.ePivotIcon;break;case o.ICON_NOT_ALLOWED:n=this.eDropNotAllowedIcon;break;case o.ICON_HIDE:n=this.eHideIcon}this.eGhostIcon.classList.toggle("ag-shake-left-to-right",e),n===this.eHideIcon&&this.gridOptionsService.get("suppressDragLeaveHidesColumns")||n&&this.eGhostIcon.appendChild(n)},e.ICON_PINNED="pinned",e.ICON_MOVE="move",e.ICON_LEFT="left",e.ICON_RIGHT="right",e.ICON_GROUP="group",e.ICON_AGGREGATE="aggregate",e.ICON_PIVOT="pivot",e.ICON_NOT_ALLOWED="notAllowed",e.ICON_HIDE="hide",e.GHOST_TEMPLATE='<div class="ag-dnd-ghost ag-unselectable">\n            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>\n            <div class="ag-dnd-ghost-label"></div>\n        </div>',Ha([J("dragService")],e.prototype,"dragService",void 0),Ha([J("mouseEventService")],e.prototype,"mouseEventService",void 0),Ha([J("columnApi")],e.prototype,"columnApi",void 0),Ha([J("gridApi")],e.prototype,"gridApi",void 0),Ha([Y],e.prototype,"init",null),Ha([Z],e.prototype,"clearDragSourceParamsList",null),e=o=Ha([X("dragAndDropService")],e)}(Bt),Ka=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),qa=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Ya=function(t){function e(e,o,n,r,i,a){var s=t.call(this)||this;return s.cellValueFn=e,s.rowNode=o,s.column=n,s.customGui=r,s.dragStartPixels=i,s.suppressVisibilityChange=a,s.dragSource=null,s}return Ka(e,t),e.prototype.isCustomGui=function(){return null!=this.customGui},e.prototype.postConstruct=function(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(zn("rowDrag",this.gridOptionsService,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){var t=this.gridOptionsService.get("rowDragManaged")?new Ja(this,this.beans,this.rowNode,this.column):new Xa(this,this.beans,this.rowNode,this.column);this.createManagedBean(t,this.beans.context)}},e.prototype.setDragElement=function(t,e){this.setTemplateFromElement(t),this.addDragSource(e)},e.prototype.getSelectedNodes=function(){if(!this.gridOptionsService.get("rowDragMultiRow"))return[this.rowNode];var t=this.beans.selectionService.getSelectedNodes();return-1!==t.indexOf(this.rowNode)?t:[this.rowNode]},e.prototype.checkCompatibility=function(){var t=this.gridOptionsService.get("rowDragManaged");this.gridOptionsService.get("treeData")&&t&&O("If using row drag with tree data, you cannot have rowDragManaged=true")},e.prototype.getDragItem=function(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}},e.prototype.getRowDragText=function(t){if(t){var e=t.getColDef();if(e.rowDragText)return e.rowDragText}return this.gridOptionsService.get("rowDragText")},e.prototype.addDragSource=function(t){var e=this;void 0===t&&(t=4),this.dragSource&&this.removeDragSource();var o=this.localeService.getLocaleTextFunc();this.dragSource={type:Ba.RowDrag,eElement:this.getGui(),dragItemName:function(){var t,n=e.getDragItem(),r=(null===(t=n.rowNodes)||void 0===t?void 0:t.length)||1,i=e.getRowDragText(e.column);return i?i(n,r):1===r?e.cellValueFn():"".concat(r," ").concat(o("rowDragRows","rows"))},getDragItem:function(){return e.getDragItem()},dragStartPixels:t,dragSourceDomDataKey:this.gridOptionsService.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)},e.prototype.removeDragSource=function(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null},qa([J("beans")],e.prototype,"beans",void 0),qa([Y],e.prototype,"postConstruct",null),qa([Z],e.prototype,"removeDragSource",null),e}(Sr),Za=function(t){function e(e,o,n){var r=t.call(this)||this;return r.parent=e,r.rowNode=o,r.column=n,r}return Ka(e,t),e.prototype.setDisplayedOrVisible=function(t){var e={skipAriaHidden:!0};if(t)this.parent.setDisplayed(!1,e);else{var o=!0,n=!1;this.column&&(o=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),n=A(this.column.getColDef().rowDrag)),n?(this.parent.setDisplayed(!0,e),this.parent.setVisible(o,e)):(this.parent.setDisplayed(o,e),this.parent.setVisible(!0,e))}},e}(Bt),Xa=function(t){function e(e,o,n,r){var i=t.call(this,e,n,r)||this;return i.beans=o,i}return Ka(e,t),e.prototype.postConstruct=function(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,qt.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()},e.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},e.prototype.workOutVisibility=function(){var t=this.gridOptionsService.get("suppressRowDrag");this.setDisplayedOrVisible(t)},qa([Y],e.prototype,"postConstruct",null),e}(Za),Ja=function(t){function e(e,o,n,r){var i=t.call(this,e,n,r)||this;return i.beans=o,i}return Ka(e,t),e.prototype.postConstruct=function(){this.addManagedListener(this.beans.eventService,qt.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,qt.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,qt.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,qt.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()},e.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},e.prototype.workOutVisibility=function(){var t=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),e=t&&t.shouldPreventRowMove(),o=this.gridOptionsService.get("suppressRowDrag"),n=this.beans.dragAndDropService.hasExternalDropZones(),r=e&&!n||o;this.setDisplayedOrVisible(r)},qa([Y],e.prototype,"postConstruct",null),e}(Za),Qa=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),$a=function(){return($a=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},ts=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},es=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qa(e,t),e.prototype.init=function(t,e,o,n,r,i,a){var s,l,u,c;this.params=a,this.eGui=e,this.eCheckbox=o,this.eExpanded=n,this.eContracted=r,this.comp=t,this.compClass=i;var p=a.node;a.value;var d=a.colDef,h=this.isTopLevelFooter();if(!h){if(this.isEmbeddedRowMismatch())return;if(p.footer&&this.gridOptionsService.get("groupHideOpenParents"))if((d&&d.showRowGroup)!==(p.rowGroupColumn&&p.rowGroupColumn.getColId()))return}if(this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),!h){var f=a.node.footer&&a.node.rowGroupIndex===this.columnModel.getRowGroupColumns().findIndex(function(t){var e;return t.getColId()===(null===(e=a.colDef)||void 0===e?void 0:e.showRowGroup)}),g="multipleColumns"!=this.gridOptionsService.get("groupDisplayType")||this.gridOptionsService.get("treeData")||this.gridOptionsService.get("showOpenedGroup")&&!a.node.footer&&(!a.node.group||null!=a.node.rowGroupIndex&&a.node.rowGroupIndex>this.columnModel.getRowGroupColumns().findIndex(function(t){var e;return t.getColId()===(null===(e=a.colDef)||void 0===e?void 0:e.showRowGroup)})),y=!p.group&&((null===(s=this.params.colDef)||void 0===s?void 0:s.field)||(null===(l=this.params.colDef)||void 0===l?void 0:l.valueGetter)),v=this.isExpandable(),m=this.columnModel.isPivotMode()&&p.leafGroup&&(null===(u=p.rowGroupColumn)||void 0===u?void 0:u.getColId())===(null===(c=a.column)||void 0===c?void 0:c.getColDef().showRowGroup);if(!this.showingValueForOpenedParent&&!v&&!y&&!g&&!f&&!m)return}this.addExpandAndContract(),this.addFullWidthRowDraggerIfNeeded(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded()},e.prototype.getCellAriaRole=function(){var t,e,o=null===(t=this.params.colDef)||void 0===t?void 0:t.cellAriaRole,n=null===(e=this.params.column)||void 0===e?void 0:e.getColDef().cellAriaRole;return o||n||"gridcell"},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.expandListener=null},e.prototype.refreshAriaExpanded=function(){var t=this.params,e=t.node,o=t.eGridCell;if(this.expandListener&&(this.expandListener=this.expandListener()),this.isExpandable()){var n=function(){Xe(o,!!e.expanded)};this.expandListener=this.addManagedListener(e,Fa.EVENT_EXPANDED_CHANGED,n)||null,n()}else Je(o)},e.prototype.isTopLevelFooter=function(){if(!this.gridOptionsService.get("groupIncludeTotalFooter"))return!1;if(null!=this.params.value||-1!=this.params.node.level)return!1;var t=this.params.colDef;if(null==t)return!0;if(!0===t.showRowGroup)return!0;var e=this.columnModel.getRowGroupColumns();return!e||0===e.length||e[0].getId()===t.showRowGroup},e.prototype.isEmbeddedRowMismatch=function(){if(!this.params.fullWidth||!this.gridOptionsService.get("embedFullWidthRows"))return!1;var t="left"===this.params.pinned,e="right"===this.params.pinned,o=!t&&!e;return this.gridOptionsService.get("enableRtl")?this.columnModel.isPinningLeft()?!e:!o:this.columnModel.isPinningLeft()?!t:!o},e.prototype.findDisplayedGroupNode=function(){var t=this.params.column,e=this.params.node;if(this.showingValueForOpenedParent)for(var o=e.parent;null!=o;){if(o.rowGroupColumn&&t.isRowGroupDisplayed(o.rowGroupColumn.getId())){this.displayedGroupNode=o;break}o=o.parent}i(this.displayedGroupNode)&&(this.displayedGroupNode=e)},e.prototype.setupShowingValueForOpenedParent=function(){var t=this.params.node,e=this.params.column;if(this.gridOptionsService.get("groupHideOpenParents"))if(t.groupData){if(null!=t.rowGroupColumn){var o=t.rowGroupColumn.getId();if(e.isRowGroupDisplayed(o))return void(this.showingValueForOpenedParent=!1)}var n=null!=t.groupData[e.getId()];this.showingValueForOpenedParent=n}else this.showingValueForOpenedParent=!1;else this.showingValueForOpenedParent=!1},e.prototype.addValueElement=function(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())},e.prototype.addGroupValue=function(){var t,e=this.adjustParamsWithDetailsFromRelatedColumn(),o=this.getInnerCompDetails(e),n=e.valueFormatted,r=e.value,i=n;if(null==i){var a=this.displayedGroupNode.rowGroupColumn&&(null===(t=this.params.column)||void 0===t?void 0:t.isRowGroupDisplayed(this.displayedGroupNode.rowGroupColumn.getId()));if(""===this.displayedGroupNode.key&&this.displayedGroupNode.group&&a)i=this.localeService.getLocaleTextFunc()("blanks","(Blanks)");else i=null!==r&&void 0!==r?r:null}this.comp.setInnerRenderer(o,i)},e.prototype.adjustParamsWithDetailsFromRelatedColumn=function(){var t=this.displayedGroupNode.rowGroupColumn,e=this.params.column;if(!t)return this.params;if(null!=e&&!e.isRowGroupDisplayed(t.getId()))return this.params;var o=this.params,n=this.params,r=n.value,i=n.node,a=this.valueFormatterService.formatValue(t,i,r);return $a($a({},o),{valueFormatted:a})},e.prototype.addFooterValue=function(){var t=this.params.footerValueGetter,e="";if(t){var o=v(this.params);o.value=this.params.value,"function"===typeof t?e=t(o):"string"===typeof t?e=this.expressionService.evaluate(t,o):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else{e=this.localeService.getLocaleTextFunc()("footerTotal","Total")+" "+(null!=this.params.value?this.params.value:"")}var n=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(n,e)},e.prototype.getInnerCompDetails=function(t){var e=this;if(t.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gridOptionsService.get("groupRowRendererParams"),t);var o=this.userComponentFactory.getInnerRendererDetails(t,t),n=function(t){return t&&t.componentClass==e.compClass};if(o&&!n(o))return o;var r=this.displayedGroupNode.rowGroupColumn,i=r?r.getColDef():void 0;if(i){var a=this.userComponentFactory.getCellRendererDetails(i,t);if(a&&!n(a))return a;if(n(a)&&i.cellRendererParams&&i.cellRendererParams.innerRenderer)return this.userComponentFactory.getInnerRendererDetails(i.cellRendererParams,t)}},e.prototype.addChildCount=function(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,Fa.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())},e.prototype.updateChildCount=function(){var t=this.displayedGroupNode.allChildrenCount,e=this.isShowRowGroupForThisRow()&&null!=t&&t>=0?"(".concat(t,")"):"";this.comp.setChildCount(e)},e.prototype.isShowRowGroupForThisRow=function(){if(this.gridOptionsService.get("treeData"))return!0;var t=this.displayedGroupNode.rowGroupColumn;if(!t)return!1;var e=this.params.column;return null==e||e.isRowGroupDisplayed(t.getId())},e.prototype.addExpandAndContract=function(){var t,e=this.params,o=zn("groupExpanded",this.gridOptionsService,null),n=zn("groupContracted",this.gridOptionsService,null);o&&this.eExpanded.appendChild(o),n&&this.eContracted.appendChild(n);var r=e.eGridCell;(null===(t=this.params.column)||void 0===t?void 0:t.isCellEditable(e.node))&&this.gridOptionsService.get("enableGroupEdit")||!this.isExpandable()||e.suppressDoubleClickExpand||this.addManagedListener(r,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(r,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(e.node,Fa.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();var i=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,Fa.EVENT_ALL_CHILDREN_COUNT_CHANGED,i),this.addManagedListener(this.displayedGroupNode,Fa.EVENT_MASTER_CHANGED,i),this.addManagedListener(this.displayedGroupNode,Fa.EVENT_GROUP_CHANGED,i),this.addManagedListener(this.displayedGroupNode,Fa.EVENT_HAS_CHILDREN_CHANGED,i)},e.prototype.onExpandClicked=function(t){Dt(t)||(At(t),this.onExpandOrContract(t))},e.prototype.onExpandOrContract=function(t){var e=this.displayedGroupNode,o=!e.expanded;!o&&e.sticky&&this.scrollToStickyNode(e),e.setExpanded(o,t)},e.prototype.scrollToStickyNode=function(t){this.ctrlsService.getGridBodyCtrl().getScrollFeature().setVerticalScrollPosition(t.rowTop-t.stickyRowTop)},e.prototype.isExpandable=function(){if(this.showingValueForOpenedParent)return!0;var t=this.displayedGroupNode,e=this.columnModel.isPivotMode()&&t.leafGroup;if(!(t.isExpandable()&&!t.footer&&!e))return!1;var o=this.params.column;return null==o||"string"!==typeof o.getColDef().showRowGroup||this.isShowRowGroupForThisRow()},e.prototype.showExpandAndContractIcons=function(){var t=this.params,e=this.displayedGroupNode,o=this.columnModel,n=t.node,r=this.isExpandable();if(r){var i=!!this.showingValueForOpenedParent||n.expanded;this.comp.setExpandedDisplayed(i),this.comp.setContractedDisplayed(!i)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);var a=o.isPivotMode(),s=a&&e.leafGroup,l=r&&!s,u=n.footer&&-1===n.level;this.comp.addOrRemoveCssClass("ag-cell-expandable",l),this.comp.addOrRemoveCssClass("ag-row-group",l),a?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",s):u||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!l)},e.prototype.onRowNodeIsExpandableChanged=function(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()},e.prototype.setupIndent=function(){var t=this.params.node;this.params.suppressPadding||(this.addManagedListener(t,Fa.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())},e.prototype.setIndent=function(){if(!this.gridOptionsService.get("groupHideOpenParents")){var t=this.params,e=t.node,o=!!t.colDef,n=this.gridOptionsService.get("treeData"),r=!o||n||!0===t.colDef.showRowGroup?e.uiLevel:0;this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+r,this.comp.addOrRemoveCssClass(this.indentClass,!0)}},e.prototype.addFullWidthRowDraggerIfNeeded=function(){var t=this;if(this.params.fullWidth&&this.params.rowDrag){var e=new Ya(function(){return t.params.value},this.params.node);this.createManagedBean(e,this.context),this.eGui.insertAdjacentElement("afterbegin",e.getGui())}},e.prototype.isUserWantsSelected=function(){var t=this.params.checkbox;return"function"===typeof t||!0===t},e.prototype.addCheckboxIfNeeded=function(){var t=this,e=this.displayedGroupNode,o=this.isUserWantsSelected()&&!e.footer&&!e.rowPinned&&!e.detail;if(o){var n=new Va;this.getContext().createBean(n),n.init({rowNode:this.params.node,column:this.params.column,overrides:{isVisible:this.params.checkbox,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(n.getGui()),this.addDestroyFunc(function(){return t.getContext().destroyBean(n)})}this.comp.setCheckboxVisible(o)},e.prototype.onKeyDown=function(t){t.key!==jn.ENTER||this.params.suppressEnterExpand||(this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract(t))},e.prototype.onCellDblClicked=function(t){Dt(t)||(Lt(this.eExpanded,t)||Lt(this.eContracted,t)||this.onExpandOrContract(t))},ts([J("expressionService")],e.prototype,"expressionService",void 0),ts([J("valueFormatterService")],e.prototype,"valueFormatterService",void 0),ts([J("columnModel")],e.prototype,"columnModel",void 0),ts([J("userComponentFactory")],e.prototype,"userComponentFactory",void 0),ts([J("ctrlsService")],e.prototype,"ctrlsService",void 0),e}(Bt),os=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ns=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},rs=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return os(e,t),e.prototype.init=function(t){var e=this,o={setInnerRenderer:function(t,o){return e.setRenderDetails(t,o)},setChildCount:function(t){return e.eChildCount.textContent=t},addOrRemoveCssClass:function(t,o){return e.addOrRemoveCssClass(t,o)},setContractedDisplayed:function(t){return Qo(e.eContracted,t)},setExpandedDisplayed:function(t){return Qo(e.eExpanded,t)},setCheckboxVisible:function(t){return e.eCheckbox.classList.toggle("ag-invisible",!t)}},n=this.createManagedBean(new es),r=!t.colDef,i=this.getGui();n.init(o,i,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,t),r&&ke(i,n.getCellAriaRole())},e.prototype.setRenderDetails=function(t,e){var o=this;if(t){var n=t.newAgStackInstance();if(!n)return;n.then(function(t){if(t){var e=function(){return o.context.destroyBean(t)};o.isAlive()?(o.eValue.appendChild(t.getGui()),o.addDestroyFunc(e)):e()}})}else this.eValue.innerText=e},e.prototype.destroy=function(){this.getContext().destroyBean(this.innerCellRenderer),t.prototype.destroy.call(this)},e.prototype.refresh=function(){return!1},e.TEMPLATE='<span class="ag-cell-wrapper">\n            <span class="ag-group-expanded" ref="eExpanded"></span>\n            <span class="ag-group-contracted" ref="eContracted"></span>\n            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>\n            <span class="ag-group-value" ref="eValue"></span>\n            <span class="ag-group-child-count" ref="eChildCount"></span>\n        </span>',ns([xr("eExpanded")],e.prototype,"eExpanded",void 0),ns([xr("eContracted")],e.prototype,"eContracted",void 0),ns([xr("eCheckbox")],e.prototype,"eCheckbox",void 0),ns([xr("eValue")],e.prototype,"eValue",void 0),ns([xr("eChildCount")],e.prototype,"eChildCount",void 0),e}(Sr),is=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),as=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},ss=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return is(e,t),e.prototype.init=function(t){t.node.failedLoad?this.setupFailed():this.setupLoading()},e.prototype.setupFailed=function(){var t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingError","ERR")},e.prototype.setupLoading=function(){var t=zn("groupLoading",this.gridOptionsService,null);t&&this.eLoadingIcon.appendChild(t);var e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingOoo","Loading")},e.prototype.refresh=function(t){return!1},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-loading">\n            <span class="ag-loading-icon" ref="eLoadingIcon"></span>\n            <span class="ag-loading-text" ref="eLoadingText"></span>\n        </div>',as([xr("eLoadingIcon")],e.prototype,"eLoadingIcon",void 0),as([xr("eLoadingText")],e.prototype,"eLoadingText",void 0),e}(Sr),ls=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),us=function(t){function e(){return t.call(this)||this}return ls(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.init=function(t){var o=this,n=this.gridOptionsService.get("overlayLoadingTemplate");if(this.setTemplate(null!==n&&void 0!==n?n:e.DEFAULT_LOADING_OVERLAY_TEMPLATE),!n){var r=this.localeService.getLocaleTextFunc();setTimeout(function(){o.getGui().textContent=r("loadingOoo","Loading...")})}},e.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>',e}(Sr),cs=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ps=function(t){function e(){return t.call(this)||this}return cs(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.init=function(t){var o=this,n=this.gridOptionsService.get("overlayNoRowsTemplate");if(this.setTemplate(null!==n&&void 0!==n?n:e.DEFAULT_NO_ROWS_TEMPLATE),!n){var r=this.localeService.getLocaleTextFunc();setTimeout(function(){o.getGui().textContent=r("noRowsToShow","No Rows To Show")})}},e.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center"></span>',e}(Sr),ds=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),hs=function(t){function e(){return t.call(this,'<div class="ag-tooltip"></div>')||this}return ds(e,t),e.prototype.init=function(t){var e=t.value;this.getGui().textContent=ee(e,!0)},e}(ga),fs=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),gs=function(){function t(){}return t.prototype.getTemplate=function(){return'<ag-input-number-field class="ag-cell-editor" ref="eInput"></ag-input-number-field>'},t.prototype.init=function(t,e){this.eInput=t,this.params=e,null!=e.max&&t.setMax(e.max),null!=e.min&&t.setMin(e.min),null!=e.precision&&t.setPrecision(e.precision),null!=e.step&&t.setStep(e.step);var o=t.getInputElement();e.preventStepping?t.addManagedListener(o,"keydown",this.preventStepping):e.showStepperButtons&&o.classList.add("ag-number-field-input-stepper")},t.prototype.preventStepping=function(t){t.key!==jn.UP&&t.key!==jn.DOWN||t.preventDefault()},t.prototype.getValue=function(){var t=this.eInput.getValue();if(!r(t)&&!r(this.params.value))return this.params.value;var e=this.params.parseValue(t);if(null==e)return e;if("string"===typeof e){if(""===e)return null;e=Number(e)}return isNaN(e)?null:e},t.prototype.getStartValue=function(){return this.params.value},t}(),ys=function(t){function e(){return t.call(this,new gs)||this}return fs(e,t),e}(Ea),vs=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ms=function(){function t(){}return t.prototype.getTemplate=function(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'},t.prototype.init=function(t,e){this.eInput=t,this.params=e,null!=e.min&&t.setMin(e.min),null!=e.max&&t.setMax(e.max),null!=e.step&&t.setStep(e.step)},t.prototype.getValue=function(){var t=this.eInput.getDate();return r(t)||r(this.params.value)?null!==t&&void 0!==t?t:null:this.params.value},t.prototype.getStartValue=function(){var t=this.params.value;if(t instanceof Date)return zo(t,!1)},t}(),Cs=function(t){function e(){return t.call(this,new ms)||this}return vs(e,t),e}(Ea),_s=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ws=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},bs=function(){function t(t){this.getDataTypeService=t}return t.prototype.getTemplate=function(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'},t.prototype.init=function(t,e){this.eInput=t,this.params=e,null!=e.min&&t.setMin(e.min),null!=e.max&&t.setMax(e.max),null!=e.step&&t.setStep(e.step)},t.prototype.getValue=function(){var t=this.formatDate(this.eInput.getDate());return r(t)||r(this.params.value)?this.params.parseValue(null!==t&&void 0!==t?t:""):this.params.value},t.prototype.getStartValue=function(){var t,e;return zo(null!==(e=this.parseDate(null!==(t=this.params.value)&&void 0!==t?t:void 0))&&void 0!==e?e:null,!1)},t.prototype.parseDate=function(t){return this.getDataTypeService().getDateParserFunction(this.params.column)(t)},t.prototype.formatDate=function(t){return this.getDataTypeService().getDateFormatterFunction(this.params.column)(t)},t}(),Ss=function(t){function e(){var e=t.call(this,new bs(function(){return e.dataTypeService}))||this;return e}return _s(e,t),ws([J("dataTypeService")],e.prototype,"dataTypeService",void 0),e}(Ea),Es=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),xs=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Ts=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return Es(e,t),e.prototype.init=function(t){var e=this;this.params=t,this.updateCheckbox(t);var o=this.eCheckbox.getInputElement();o.setAttribute("tabindex","-1"),je(o,"polite"),this.addManagedListener(o,"click",function(t){if(At(t),!e.eCheckbox.isDisabled()){var o=e.eCheckbox.getValue();e.onCheckboxChanged(o)}}),this.addManagedListener(o,"dblclick",function(t){At(t)});var n=this.gridOptionsService.getDocument();this.addManagedListener(this.params.eGridCell,"keydown",function(t){if(t.key===jn.SPACE&&!e.eCheckbox.isDisabled()){e.params.eGridCell===n.activeElement&&e.eCheckbox.toggle();var o=e.eCheckbox.getValue();e.onCheckboxChanged(o),t.preventDefault()}})},e.prototype.refresh=function(t){return this.params=t,this.updateCheckbox(t),!0},e.prototype.updateCheckbox=function(t){var e,o,n,r,i=!0;if(t.node.group&&t.column){var a=t.column.getColId();a.startsWith(Jt)?r=null==t.value||""===t.value?void 0:"true"===t.value:t.node.aggData&&void 0!==t.node.aggData[a]?r=null!==(e=t.value)&&void 0!==e?e:void 0:i=!1}else r=null!==(o=t.value)&&void 0!==o?o:void 0;if(i){this.eCheckbox.setValue(r);var s=null!=t.disabled?t.disabled:!(null===(n=t.column)||void 0===n?void 0:n.isCellEditable(t.node));this.eCheckbox.setDisabled(s);var l=this.localeService.getLocaleTextFunc(),u=co(l,r),c=s?u:"".concat(l("ariaToggleCellValue","Press SPACE to toggle cell value")," (").concat(u,")");this.eCheckbox.setInputAriaLabel(c)}else this.eCheckbox.setDisplayed(!1)},e.prototype.onCheckboxChanged=function(t){var e=this.params,o=e.column,n=e.node,r=e.rowIndex,i=e.value,a={type:qt.EVENT_CELL_EDITING_STARTED,column:o,colDef:null===o||void 0===o?void 0:o.getColDef(),data:n.data,node:n,rowIndex:r,rowPinned:n.rowPinned,value:i};this.eventService.dispatchEvent(a);var s=this.params.node.setDataValue(this.params.column,t,"edit"),l={type:qt.EVENT_CELL_EDITING_STOPPED,column:o,colDef:null===o||void 0===o?void 0:o.getColDef(),data:n.data,node:n,rowIndex:r,rowPinned:n.rowPinned,value:i,oldValue:i,newValue:t,valueChanged:s};this.eventService.dispatchEvent(l)},e.TEMPLATE='\n        <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">\n            <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n        </div>',xs([xr("eCheckbox")],e.prototype,"eCheckbox",void 0),e}(Sr),Os=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Rs=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Ps=function(t){function e(){return t.call(this,'\n            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">\n                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n            </div>')||this}return Os(e,t),e.prototype.init=function(t){var e,o=this;this.params=t;var n=null!==(e=t.value)&&void 0!==e?e:void 0;this.eCheckbox.setValue(n),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(n),this.addManagedListener(this.eCheckbox,qt.EVENT_FIELD_VALUE_CHANGED,function(t){return o.setAriaLabel(t.selected)})},e.prototype.getValue=function(){return this.eCheckbox.getValue()},e.prototype.focusIn=function(){this.eCheckbox.getFocusableElement().focus()},e.prototype.afterGuiAttached=function(){this.params.cellStartedEdit&&this.focusIn()},e.prototype.isPopup=function(){return!1},e.prototype.setAriaLabel=function(t){var e=this.localeService.getLocaleTextFunc(),o=co(e,t),n=e("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel("".concat(n," (").concat(o,")"))},Rs([xr("eCheckbox")],e.prototype,"eCheckbox",void 0),e}(ga),As=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ds=function(t){function e(){var e=t.call(this)||this;return e.setTemplate("<div></div>"),e}return As(e,t),e.prototype.init=function(t){var e;this.params=t,this.cssClassPrefix=null!==(e=this.params.cssClassPrefix)&&void 0!==e?e:"ag-menu-option",this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu()},e.prototype.configureDefaults=function(){return!0},e.prototype.addIcon=function(){if(!this.params.isCompact){var t=yn('<span ref="eIcon" class="'.concat(this.getClassName("part")," ").concat(this.getClassName("icon"),'" role="presentation"></span>'));this.params.checked?t.appendChild(zn("check",this.gridOptionsService)):this.params.icon&&(On(this.params.icon)?t.appendChild(this.params.icon):"string"===typeof this.params.icon?t.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(t)}},e.prototype.addName=function(){var t=yn('<span ref="eName" class="'.concat(this.getClassName("part")," ").concat(this.getClassName("text"),'">').concat(this.params.name||"","</span>"));this.getGui().appendChild(t)},e.prototype.addShortcut=function(){if(!this.params.isCompact){var t=yn('<span ref="eShortcut" class="'.concat(this.getClassName("part")," ").concat(this.getClassName("shortcut"),'">').concat(this.params.shortcut||"","</span>"));this.getGui().appendChild(t)}},e.prototype.addSubMenu=function(){var t=yn('<span ref="ePopupPointer" class="'.concat(this.getClassName("part")," ").concat(this.getClassName("popup-pointer"),'"></span>')),e=this.getGui();if(this.params.subMenu){var o=this.gridOptionsService.get("enableRtl")?"smallLeft":"smallRight";Xe(e,!1),t.appendChild(zn(o,this.gridOptionsService))}e.appendChild(t)},e.prototype.getClassName=function(t){return"".concat(this.cssClassPrefix,"-").concat(t)},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(Sr),Ms=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Is=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Ls=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},Fs=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},Ns=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.agGridDefaults={agDateInput:Li,agColumnHeader:ca,agColumnGroupHeader:ha,agSortIndicator:sa,agTextColumnFloatingFilter:na,agNumberColumnFloatingFilter:ea,agDateColumnFloatingFilter:Ai,agReadOnlyFloatingFilter:Pr,agAnimateShowChangeCellRenderer:Aa,agAnimateSlideCellRenderer:Ia,agGroupCellRenderer:rs,agGroupRowRenderer:rs,agLoadingCellRenderer:ss,agCheckboxCellRenderer:Ts,agCellEditor:Oa,agTextCellEditor:Oa,agNumberCellEditor:ys,agDateCellEditor:Cs,agDateStringCellEditor:Ss,agSelectCellEditor:wa,agLargeTextCellEditor:ma,agCheckboxCellEditor:Ps,agTextColumnFilter:Yi,agNumberColumnFilter:Ui,agDateColumnFilter:xi,agLoadingOverlay:us,agNoRowsOverlay:ps,agTooltipComponent:hs,agMenuItem:Ds},e.enterpriseAgDefaultCompsModule={agSetColumnFilter:V.SetFilterModule,agSetColumnFloatingFilter:V.SetFilterModule,agMultiColumnFilter:V.MultiFilterModule,agMultiColumnFloatingFilter:V.MultiFilterModule,agGroupColumnFilter:V.RowGroupingModule,agGroupColumnFloatingFilter:V.RowGroupingModule,agRichSelect:V.RichSelectModule,agRichSelectCellEditor:V.RichSelectModule,agDetailCellRenderer:V.MasterDetailModule,agSparklineCellRenderer:V.SparklinesModule},e.jsComps={},e}return Ms(e,t),e.prototype.init=function(){var t=this;null!=this.gridOptions.components&&y(this.gridOptions.components,function(e,o){return t.registerJsComponent(e,o)})},e.prototype.registerDefaultComponent=function(t,e){this.agGridDefaults[t]?console.error("Trying to overwrite a default component. You should call registerComponent"):this.agGridDefaults[t]=e},e.prototype.registerJsComponent=function(t,e){this.jsComps[t]=e},e.prototype.retrieve=function(t,e){var o=this,n=function(t,e){return{componentFromFramework:e,component:t}},r=this.getFrameworkOverrides().frameworkComponent(e,this.gridOptions.components);if(null!=r)return n(r,!0);var i=this.jsComps[e];if(i)return n(i,this.getFrameworkOverrides().isFrameworkComponent(i));var a=this.agGridDefaults[e];if(a)return n(a,!1);var s=this.enterpriseAgDefaultCompsModule[e];return s?j.__assertRegistered(s,"AG Grid '".concat(t,"' component: ").concat(e),this.context.getGridId()):T(function(){o.warnAboutMissingComponent(t,e)},"MissingComp"+e),null},e.prototype.warnAboutMissingComponent=function(t,e){var o=Nn(e,Fs(Fs([],Ls(Object.keys(this.agGridDefaults).filter(function(t){return!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(t)})),!1),Ls(Object.keys(this.jsComps)),!1),!0,.8).values;console.warn("AG Grid: Could not find '".concat(e,"' component. It was configured as \"").concat(t,": '").concat(e,"'\" but it wasn't found in the list of registered components.")),o.length>0&&console.warn("         Did you mean: [".concat(o.slice(0,3),"]?")),console.warn("If using a custom component check it has been registered as described in: ".concat(this.getFrameworkOverrides().getDocLink("components/")))},Is([J("gridOptions")],e.prototype,"gridOptions",void 0),Is([Y],e.prototype,"init",null),e=Is([X("userComponentRegistry")],e)}(Bt),ks={propertyName:"dateComponent",cellRenderer:!1},Gs={propertyName:"headerComponent",cellRenderer:!1},Vs={propertyName:"headerGroupComponent",cellRenderer:!1},Bs={propertyName:"cellRenderer",cellRenderer:!0},zs={propertyName:"cellEditor",cellRenderer:!1},Hs={propertyName:"innerRenderer",cellRenderer:!0},js={propertyName:"loadingOverlayComponent",cellRenderer:!1},Us={propertyName:"noRowsOverlayComponent",cellRenderer:!1},Ws={propertyName:"tooltipComponent",cellRenderer:!1},Ks={propertyName:"filter",cellRenderer:!1},qs={propertyName:"floatingFilterComponent",cellRenderer:!1},Ys={propertyName:"toolPanel",cellRenderer:!1},Zs={propertyName:"statusPanel",cellRenderer:!1},Xs={propertyName:"fullWidthCellRenderer",cellRenderer:!0},Js={propertyName:"loadingCellRenderer",cellRenderer:!0},Qs={propertyName:"groupRowRenderer",cellRenderer:!0},$s={propertyName:"detailCellRenderer",cellRenderer:!0},tl={propertyName:"menuItem",cellRenderer:!1},el=function(){function t(){}return t.getFloatingFilterType=function(t){return this.filterToFloatingFilterMapping[t]},t.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"},t}(),ol=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),nl=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},rl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ol(e,t),e.prototype.getHeaderCompDetails=function(t,e){return this.getCompDetails(t,Gs,"agColumnHeader",e)},e.prototype.getHeaderGroupCompDetails=function(t){var e=t.columnGroup.getColGroupDef();return this.getCompDetails(e,Vs,"agColumnGroupHeader",t)},e.prototype.getFullWidthCellRendererDetails=function(t){return this.getCompDetails(this.gridOptions,Xs,null,t,!0)},e.prototype.getFullWidthLoadingCellRendererDetails=function(t){return this.getCompDetails(this.gridOptions,Js,"agLoadingCellRenderer",t,!0)},e.prototype.getFullWidthGroupCellRendererDetails=function(t){return this.getCompDetails(this.gridOptions,Qs,"agGroupRowRenderer",t,!0)},e.prototype.getFullWidthDetailCellRendererDetails=function(t){return this.getCompDetails(this.gridOptions,$s,"agDetailCellRenderer",t,!0)},e.prototype.getInnerRendererDetails=function(t,e){return this.getCompDetails(t,Hs,null,e)},e.prototype.getFullWidthGroupRowInnerCellRenderer=function(t,e){return this.getCompDetails(t,Hs,null,e)},e.prototype.getCellRendererDetails=function(t,e){return this.getCompDetails(t,Bs,null,e)},e.prototype.getCellEditorDetails=function(t,e){return this.getCompDetails(t,zs,"agCellEditor",e,!0)},e.prototype.getFilterDetails=function(t,e,o){return this.getCompDetails(t,Ks,o,e,!0)},e.prototype.getDateCompDetails=function(t){return this.getCompDetails(this.gridOptions,ks,"agDateInput",t,!0)},e.prototype.getLoadingOverlayCompDetails=function(t){return this.getCompDetails(this.gridOptions,js,"agLoadingOverlay",t,!0)},e.prototype.getNoRowsOverlayCompDetails=function(t){return this.getCompDetails(this.gridOptions,Us,"agNoRowsOverlay",t,!0)},e.prototype.getTooltipCompDetails=function(t){return this.getCompDetails(t.colDef,Ws,"agTooltipComponent",t,!0)},e.prototype.getSetFilterCellRendererDetails=function(t,e){return this.getCompDetails(t,Bs,null,e)},e.prototype.getFloatingFilterCompDetails=function(t,e,o){return this.getCompDetails(t,qs,o,e)},e.prototype.getToolPanelCompDetails=function(t,e){return this.getCompDetails(t,Ys,null,e,!0)},e.prototype.getStatusPanelCompDetails=function(t,e){return this.getCompDetails(t,Zs,null,e,!0)},e.prototype.getMenuItemCompDetails=function(t,e){return this.getCompDetails(t,tl,"agMenuItem",e,!0)},e.prototype.getCompDetails=function(t,e,o,n,r){var i=this;void 0===r&&(r=!1);var a=e.propertyName,s=e.cellRenderer,l=this.getCompKeys(t,e,n),u=l.compName,c=l.jsComp,p=l.fwComp,d=l.paramsFromSelector,h=l.popupFromSelector,f=l.popupPositionFromSelector,g=function(t){var e=i.userComponentRegistry.retrieve(a,t);e&&(c=e.componentFromFramework?void 0:e.component,p=e.componentFromFramework?e.component:void 0)};if(null!=u&&g(u),null==c&&null==p&&null!=o&&g(o),c&&s&&!this.agComponentUtils.doesImplementIComponent(c)&&(c=this.agComponentUtils.adaptFunction(a,c)),c||p){var y=this.mergeParamsWithApplicationProvidedParams(t,e,n,d),v=null==c,m=c||p;return{componentFromFramework:v,componentClass:m,params:y,type:e,popupFromSelector:h,popupPositionFromSelector:f,newAgStackInstance:function(){return i.newAgStackInstance(m,v,y,e)}}}r&&console.error("AG Grid: Could not find component ".concat(u,", did you forget to configure this component?"))},e.prototype.getCompKeys=function(t,e,o){var n,r,i,a,s,l,u=this,c=e.propertyName;if(t){var p=t,d=p[c+"Selector"],h=d?d(o):null,f=function(t){if("string"===typeof t)n=t;else if(null!=t&&!0!==t){u.getFrameworkOverrides().isFrameworkComponent(t)?i=t:r=t}};h?(f(h.component),a=h.params,s=h.popup,l=h.popupPosition):f(p[c])}return{compName:n,jsComp:r,fwComp:i,paramsFromSelector:a,popupFromSelector:s,popupPositionFromSelector:l}},e.prototype.newAgStackInstance=function(t,e,o,n){var r,i=n.propertyName;if(!e)r=new t;else{var a=this.componentMetadataProvider.retrieve(i);r=this.frameworkComponentWrapper.wrap(t,a.mandatoryMethodList,a.optionalMethodList,n)}var s=this.initComponent(r,o);return null==s?hr.resolve(r):s.then(function(){return r})},e.prototype.mergeParamsWithApplicationProvidedParams=function(t,e,o,n){void 0===n&&(n=null);var r=this.gridOptionsService.getGridCommonParams();_(r,o);var i=t&&t[e.propertyName+"Params"];"function"===typeof i?_(r,i(o)):"object"===typeof i&&_(r,i);return _(r,n),r},e.prototype.initComponent=function(t,e){if(this.context.createBean(t),null!=t.init)return t.init(e)},e.prototype.getDefaultFloatingFilterType=function(t,e){if(null==t)return null;var o=null,n=this.getCompKeys(t,Ks),r=n.compName,i=n.jsComp,a=n.fwComp;r?o=el.getFloatingFilterType(r):null==i&&null==a&&!0===t.filter&&(o=e());return o},nl([J("gridOptions")],e.prototype,"gridOptions",void 0),nl([J("agComponentUtils")],e.prototype,"agComponentUtils",void 0),nl([J("componentMetadataProvider")],e.prototype,"componentMetadataProvider",void 0),nl([J("userComponentRegistry")],e.prototype,"userComponentRegistry",void 0),nl([Q("frameworkComponentWrapper")],e.prototype,"frameworkComponentWrapper",void 0),e=nl([X("userComponentFactory")],e)}(Bt),il=function(){function t(){}return t.ColDefPropertyMap={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0},t.ALL_PROPERTIES=Object.keys(t.ColDefPropertyMap),t}();!function(t){t[t.SINGLE_SHEET=0]="SINGLE_SHEET",t[t.MULTI_SHEET=1]="MULTI_SHEET"}(Ua||(Ua={}));var al,sl=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ll=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},ul=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dragEndFunctions=[],e.dragSources=[],e}return sl(e,t),e.prototype.removeAllListeners=function(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0},e.prototype.removeListener=function(t){var e=t.dragSource.eElement,o=t.mouseDownListener;if(e.removeEventListener("mousedown",o),t.touchEnabled){var n=t.touchStartListener;e.removeEventListener("touchstart",n,{passive:!0})}},e.prototype.removeDragSource=function(t){var e=this.dragSources.find(function(e){return e.dragSource===t});e&&(this.removeListener(e),mt(this.dragSources,e))},e.prototype.isDragging=function(){return this.dragging},e.prototype.addDragSource=function(t){var e=this,o=this.onMouseDown.bind(this,t),n=t.eElement,r=t.includeTouch,i=t.stopPropagationForTouch;n.addEventListener("mousedown",o);var a=null,s=this.gridOptionsService.get("suppressTouch");r&&!s&&(a=function(o){Jo(o.target)||(o.cancelable&&(o.preventDefault(),i&&o.stopPropagation()),e.onTouchStart(t,o))},n.addEventListener("touchstart",a,{passive:!1})),this.dragSources.push({dragSource:t,mouseDownListener:o,touchStartListener:a,touchEnabled:!!r})},e.prototype.getStartTarget=function(){return this.startTarget},e.prototype.onTouchStart=function(t,e){var o=this;this.currentDragParams=t,this.dragging=!1;var n=e.touches[0];this.touchLastTime=n,this.touchStart=n;var r=function(e){return o.onTouchUp(e,t.eElement)},i=e.target,a=[{target:this.gridOptionsService.getRootNode(),type:"touchmove",listener:function(t){t.cancelable&&t.preventDefault()},options:{passive:!1}},{target:i,type:"touchmove",listener:function(e){return o.onTouchMove(e,t.eElement)},options:{passive:!0}},{target:i,type:"touchend",listener:r,options:{passive:!0}},{target:i,type:"touchcancel",listener:r,options:{passive:!0}}];this.addTemporaryEvents(a),0===t.dragStartPixels&&this.onCommonMove(n,this.touchStart,t.eElement)},e.prototype.onMouseDown=function(t,e){var o=this,n=e;if((!t.skipMouseEvent||!t.skipMouseEvent(e))&&!n._alreadyProcessedByDragService&&(n._alreadyProcessedByDragService=!0,0===e.button)){this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.currentDragParams=t,this.dragging=!1,this.mouseStartEvent=e,this.startTarget=e.target;var r=this.gridOptionsService.getRootNode(),i=[{target:r,type:"mousemove",listener:function(e){return o.onMouseMove(e,t.eElement)}},{target:r,type:"mouseup",listener:function(e){return o.onMouseUp(e,t.eElement)}},{target:r,type:"contextmenu",listener:function(t){return t.preventDefault()}}];this.addTemporaryEvents(i),0===t.dragStartPixels&&this.onMouseMove(e,t.eElement)}},e.prototype.addTemporaryEvents=function(t){t.forEach(function(t){var e=t.target,o=t.type,n=t.listener,r=t.options;e.addEventListener(o,n,r)}),this.dragEndFunctions.push(function(){t.forEach(function(t){var e=t.target,o=t.type,n=t.listener,r=t.options;e.removeEventListener(o,n,r)})})},e.prototype.isEventNearStartEvent=function(t,e){var o=this.currentDragParams.dragStartPixels;return or(t,e,r(o)?o:4)},e.prototype.getFirstActiveTouch=function(t){for(var e=0;e<t.length;e++)if(t[e].identifier===this.touchStart.identifier)return t[e];return null},e.prototype.onCommonMove=function(t,e,o){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(t,e))return;this.dragging=!0;var n={type:qt.EVENT_DRAG_STARTED,target:o};this.eventService.dispatchEvent(n),this.currentDragParams.onDragStart(e),this.currentDragParams.onDragging(e)}this.currentDragParams.onDragging(t)},e.prototype.onTouchMove=function(t,e){var o=this.getFirstActiveTouch(t.touches);o&&this.onCommonMove(o,this.touchStart,e)},e.prototype.onMouseMove=function(t,e){var o;wo()&&(null===(o=this.gridOptionsService.getDocument().getSelection())||void 0===o||o.removeAllRanges());this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.onCommonMove(t,this.mouseStartEvent,e)},e.prototype.shouldPreventMouseEvent=function(t){var e=this.gridOptionsService.get("enableCellTextSelection"),o="mousemove"===t.type;return e&&o&&t.cancelable&&this.mouseEventService.isEventFromThisGrid(t)&&!this.isOverFormFieldElement(t)},e.prototype.isOverFormFieldElement=function(t){var e=t.target,o=null===e||void 0===e?void 0:e.tagName.toLocaleLowerCase();return!!(null===o||void 0===o?void 0:o.match("^a$|textarea|input|select|button"))},e.prototype.onTouchUp=function(t,e){var o=this.getFirstActiveTouch(t.changedTouches);o||(o=this.touchLastTime),this.onUpCommon(o,e)},e.prototype.onMouseUp=function(t,e){this.onUpCommon(t,e)},e.prototype.onUpCommon=function(t,e){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(t);var o={type:qt.EVENT_DRAG_STOPPED,target:e};this.eventService.dispatchEvent(o)}this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(function(t){return t()}),this.dragEndFunctions.length=0},ll([J("mouseEventService")],e.prototype,"mouseEventService",void 0),ll([Z],e.prototype,"removeAllListeners",null),e=ll([X("dragService")],e)}(Bt),cl=function(){function t(t){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=t.scrollContainer,this.scrollHorizontally=-1!==t.scrollAxis.indexOf("x"),this.scrollVertically=-1!==t.scrollAxis.indexOf("y"),this.scrollByTick=null!=t.scrollByTick?t.scrollByTick:20,t.onScrollCallback&&(this.onScrollCallback=t.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=t.getVerticalPosition,this.setVerticalPosition=t.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=t.getHorizontalPosition,this.setHorizontalPosition=t.setHorizontalPosition),this.shouldSkipVerticalScroll=t.shouldSkipVerticalScroll||function(){return!1},this.shouldSkipHorizontalScroll=t.shouldSkipHorizontalScroll||function(){return!1}}return t.prototype.check=function(t,e){void 0===e&&(e=!1);var o=e||this.shouldSkipVerticalScroll();if(!o||!this.shouldSkipHorizontalScroll()){var n=this.scrollContainer.getBoundingClientRect(),r=this.scrollByTick;this.tickLeft=t.clientX<n.left+r,this.tickRight=t.clientX>n.right-r,this.tickUp=t.clientY<n.top+r&&!o,this.tickDown=t.clientY>n.bottom-r&&!o,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}},t.prototype.ensureTickingStarted=function(){null===this.tickingInterval&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)},t.prototype.doTick=function(){var t;if(this.tickCount++,t=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){var e=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(e-t),this.tickDown&&this.setVerticalPosition(e+t)}if(this.scrollHorizontally){var o=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(o-t),this.tickRight&&this.setHorizontalPosition(o+t)}this.onScrollCallback&&this.onScrollCallback()},t.prototype.ensureCleared=function(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)},t}(),pl=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),dl=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},hl="ag-list-item-hovered",fl=function(t){function e(e,o,n){var r=t.call(this)||this;return r.comp=e,r.virtualList=o,r.params=n,r.currentDragValue=null,r.lastHoveredListItem=null,r}return pl(e,t),e.prototype.postConstruct=function(){this.addManagedListener(this.params.eventSource,this.params.listItemDragStartEvent,this.listItemDragStart.bind(this)),this.addManagedListener(this.params.eventSource,this.params.listItemDragEndEvent,this.listItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()},e.prototype.listItemDragStart=function(t){this.currentDragValue=this.params.getCurrentDragValue(t),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)},e.prototype.listItemDragEnd=function(){var t=this;window.setTimeout(function(){t.currentDragValue=null,t.moveBlocked=!1},10)},e.prototype.createDropTarget=function(){var t=this,e={isInterestedIn:function(e){return e===t.params.dragSourceType},getIconName:function(){return t.moveBlocked?Wa.ICON_PINNED:Wa.ICON_MOVE},getContainer:function(){return t.comp.getGui()},onDragging:function(e){return t.onDragging(e)},onDragStop:function(){return t.onDragStop()},onDragLeave:function(){return t.onDragLeave()}};this.dragAndDropService.addDropTarget(e)},e.prototype.createAutoScrollService=function(){var t=this.virtualList.getGui();this.autoScrollService=new cl({scrollContainer:t,scrollAxis:"y",getVerticalPosition:function(){return t.scrollTop},setVerticalPosition:function(e){return t.scrollTop=e}})},e.prototype.onDragging=function(t){if(this.currentDragValue&&!this.moveBlocked){var e=this.getListDragItem(t),o=this.virtualList.getComponentAt(e.rowIndex);if(o){var n=o.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===e.rowIndex&&this.lastHoveredListItem.position===e.position||(this.autoScrollService.check(t.event),this.clearHoveredItems(),this.lastHoveredListItem=e,Zo(n,hl),Zo(n,"ag-item-highlight-".concat(e.position)))}}},e.prototype.getListDragItem=function(t){var e=this.virtualList.getGui(),o=parseFloat(window.getComputedStyle(e).paddingTop),n=this.virtualList.getRowHeight(),r=this.virtualList.getScrollTop(),i=Math.max(0,(t.y-o+r)/n),a=this.params.getNumRows(this.comp)-1,s=0|Math.min(a,i);return{rowIndex:s,position:Math.round(i)>i||i>a?"bottom":"top",component:this.virtualList.getComponentAt(s)}},e.prototype.onDragStop=function(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearHoveredItems(),this.autoScrollService.ensureCleared())},e.prototype.onDragLeave=function(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()},e.prototype.clearHoveredItems=function(){this.virtualList.getGui().querySelectorAll(".".concat(hl)).forEach(function(t){[hl,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach(function(e){t.classList.remove(e)})}),this.lastHoveredListItem=null},dl([J("dragAndDropService")],e.prototype,"dragAndDropService",void 0),dl([Y],e.prototype,"postConstruct",null),e}(Bt);!function(t){t[t.Above=0]="Above",t[t.Below=1]="Below"}(al||(al={}));var gl=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};function yl(t){var e=t;return null!=e&&null!=e.getFrameworkComponentInstance?e.getFrameworkComponentInstance():t}var vl,ml=function(){function t(){this.detailGridInfoMap={},this.destroyCalled=!1}return t.prototype.init=function(){var t=this;switch(this.rowModel.getType()){case"clientSide":this.clientSideRowModel=this.rowModel;break;case"infinite":this.infiniteRowModel=this.rowModel;break;case"serverSide":this.serverSideRowModel=this.rowModel}this.ctrlsService.whenReady(function(){t.gridBodyCtrl=t.ctrlsService.getGridBodyCtrl()})},t.prototype.__getAlignedGridService=function(){return this.alignedGridsService},t.prototype.__getContext=function(){return this.context},t.prototype.__getModel=function(){return this.rowModel},t.prototype.getGridId=function(){return this.context.getGridId()},t.prototype.addDetailGridInfo=function(t,e){this.detailGridInfoMap[t]=e},t.prototype.removeDetailGridInfo=function(t){this.detailGridInfoMap[t]=void 0},t.prototype.getDetailGridInfo=function(t){return this.detailGridInfoMap[t]},t.prototype.forEachDetailGridInfo=function(t){var e=0;y(this.detailGridInfoMap,function(o,n){r(n)&&(t(n,e),e++)})},t.prototype.getDataAsCsv=function(t){if(j.__assertRegistered(V.CsvExportModule,"api.getDataAsCsv",this.context.getGridId()))return this.csvCreator.getDataAsCsv(t)},t.prototype.exportDataAsCsv=function(t){j.__assertRegistered(V.CsvExportModule,"api.exportDataAsCSv",this.context.getGridId())&&this.csvCreator.exportDataAsCsv(t)},t.prototype.assertNotExcelMultiSheet=function(t,e){return!!j.__assertRegistered(V.ExcelExportModule,"api."+t,this.context.getGridId())&&(this.excelCreator.getFactoryMode()!==Ua.MULTI_SHEET||(console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'"),!1))},t.prototype.getDataAsExcel=function(t){if(this.assertNotExcelMultiSheet("getDataAsExcel",t))return this.excelCreator.getDataAsExcel(t)},t.prototype.exportDataAsExcel=function(t){this.assertNotExcelMultiSheet("exportDataAsExcel",t)&&this.excelCreator.exportDataAsExcel(t)},t.prototype.getSheetDataForExcel=function(t){if(j.__assertRegistered(V.ExcelExportModule,"api.getSheetDataForExcel",this.context.getGridId()))return this.excelCreator.setFactoryMode(Ua.MULTI_SHEET),this.excelCreator.getSheetDataForExcel(t)},t.prototype.getMultipleSheetsAsExcel=function(t){if(j.__assertRegistered(V.ExcelExportModule,"api.getMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.getMultipleSheetsAsExcel(t)},t.prototype.exportMultipleSheetsAsExcel=function(t){j.__assertRegistered(V.ExcelExportModule,"api.exportMultipleSheetsAsExcel",this.context.getGridId())&&this.excelCreator.exportMultipleSheetsAsExcel(t)},t.prototype.setGridAriaProperty=function(t,e){if(t){var o=this.ctrlsService.getGridBodyCtrl().getGui(),n="aria-".concat(t);null===e?o.removeAttribute(n):o.setAttribute(n,e)}},t.prototype.logMissingRowModel=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];console.error("AG Grid: api.".concat(t," can only be called when gridOptions.rowModelType is ").concat(e.join(" or ")))},t.prototype.logDeprecation=function(t,e,o,n){O("Since ".concat(t," api.").concat(e," is deprecated. Please use ").concat(o," instead. ").concat(n))},t.prototype.getPinnedTopRowCount=function(){return this.pinnedRowModel.getPinnedTopRowCount()},t.prototype.getPinnedBottomRowCount=function(){return this.pinnedRowModel.getPinnedBottomRowCount()},t.prototype.getPinnedTopRow=function(t){return this.pinnedRowModel.getPinnedTopRow(t)},t.prototype.getPinnedBottomRow=function(t){return this.pinnedRowModel.getPinnedBottomRow(t)},t.prototype.expireValueCache=function(){this.valueCache.expire()},t.prototype.getVerticalPixelRange=function(){return this.gridBodyCtrl.getScrollFeature().getVScrollPosition()},t.prototype.getHorizontalPixelRange=function(){return this.gridBodyCtrl.getScrollFeature().getHScrollPosition()},t.prototype.refreshCells=function(t){var e=this;void 0===t&&(t={}),this.frameworkOverrides.wrapIncoming(function(){return e.rowRenderer.refreshCells(t)})},t.prototype.flashCells=function(t){var e=this;void 0===t&&(t={});var o=function(t){return O("Since v31.1 api.flashCells parameter '".concat(t,"Delay' is deprecated. Please use '").concat(t,"Duration' instead."))};r(t.fadeDelay)&&o("fade"),r(t.flashDelay)&&o("flash"),this.frameworkOverrides.wrapIncoming(function(){return e.rowRenderer.flashCells(t)})},t.prototype.redrawRows=function(t){var e=this;void 0===t&&(t={});var o=t?t.rowNodes:void 0;this.frameworkOverrides.wrapIncoming(function(){return e.rowRenderer.redrawRows(o)})},t.prototype.refreshHeader=function(){var t=this;this.frameworkOverrides.wrapIncoming(function(){return t.ctrlsService.getHeaderRowContainerCtrls().forEach(function(t){return t.refresh()})})},t.prototype.isAnyFilterPresent=function(){return this.filterManager.isAnyFilterPresent()},t.prototype.isColumnFilterPresent=function(){return this.filterManager.isColumnFilterPresent()||this.filterManager.isAggregateFilterPresent()},t.prototype.isQuickFilterPresent=function(){return this.filterManager.isQuickFilterPresent()},t.prototype.getModel=function(){return O("Since v31.1 getModel() is deprecated. Please use the appropriate grid API methods instead."),this.rowModel},t.prototype.setRowNodeExpanded=function(t,e,o){this.expansionService.setRowNodeExpanded(t,e,o)},t.prototype.onGroupExpandedOrCollapsed=function(){i(this.clientSideRowModel)?this.logMissingRowModel("onGroupExpandedOrCollapsed","clientSide"):this.expansionService.onGroupExpandedOrCollapsed()},t.prototype.refreshClientSideRowModel=function(t){i(this.clientSideRowModel)?this.logMissingRowModel("refreshClientSideRowModel","clientSide"):this.clientSideRowModel.refreshModel(t)},t.prototype.isAnimationFrameQueueEmpty=function(){return this.animationFrameService.isQueueEmpty()},t.prototype.flushAllAnimationFrames=function(){this.animationFrameService.flushAllFrames()},t.prototype.getRowNode=function(t){return this.rowModel.getRowNode(t)},t.prototype.getSizesForCurrentTheme=function(){return{rowHeight:this.gos.getRowHeightAsNumber(),headerHeight:this.columnModel.getHeaderHeight()}},t.prototype.expandAll=function(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!0):this.logMissingRowModel("expandAll","clientSide","serverSide")},t.prototype.collapseAll=function(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!1):this.logMissingRowModel("collapseAll","clientSide","serverSide")},t.prototype.addRenderedRowListener=function(t,e,o){this.rowRenderer.addRenderedRowListener(t,e,o)},t.prototype.getQuickFilter=function(){return this.gos.get("quickFilterText")},t.prototype.getAdvancedFilterModel=function(){return j.__assertRegistered(V.AdvancedFilterModule,"api.getAdvancedFilterModel",this.context.getGridId())?this.filterManager.getAdvancedFilterModel():null},t.prototype.setAdvancedFilterModel=function(t){this.filterManager.setAdvancedFilterModel(t)},t.prototype.showAdvancedFilterBuilder=function(){j.__assertRegistered(V.AdvancedFilterModule,"api.setAdvancedFilterModel",this.context.getGridId())&&this.filterManager.showAdvancedFilterBuilder("api")},t.prototype.setNodesSelected=function(t){if(t.nodes.every(function(t){return t.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),!1):void 0!==t.id||(console.warn("AG Grid: cannot select node until id for node is known"),!1)})){var e=t.nodes,o=t.source,n=t.newValue,r=e;this.selectionService.setNodesSelected({nodes:r,source:null!==o&&void 0!==o?o:"api",newValue:n})}},t.prototype.selectAll=function(t){void 0===t&&(t="apiSelectAll"),this.selectionService.selectAllRowNodes({source:t})},t.prototype.deselectAll=function(t){void 0===t&&(t="apiSelectAll"),this.selectionService.deselectAllRowNodes({source:t})},t.prototype.selectAllFiltered=function(t){void 0===t&&(t="apiSelectAllFiltered"),this.selectionService.selectAllRowNodes({source:t,justFiltered:!0})},t.prototype.deselectAllFiltered=function(t){void 0===t&&(t="apiSelectAllFiltered"),this.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})},t.prototype.getServerSideSelectionState=function(){return i(this.serverSideRowModel)?(this.logMissingRowModel("getServerSideSelectionState","serverSide"),null):this.selectionService.getSelectionState()},t.prototype.setServerSideSelectionState=function(t){i(this.serverSideRowModel)?this.logMissingRowModel("setServerSideSelectionState","serverSide"):this.selectionService.setSelectionState(t,"api")},t.prototype.selectAllOnCurrentPage=function(t){void 0===t&&(t="apiSelectAllCurrentPage"),this.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})},t.prototype.deselectAllOnCurrentPage=function(t){void 0===t&&(t="apiSelectAllCurrentPage"),this.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})},t.prototype.showLoadingOverlay=function(){this.overlayService.showLoadingOverlay()},t.prototype.showNoRowsOverlay=function(){this.overlayService.showNoRowsOverlay()},t.prototype.hideOverlay=function(){this.overlayService.hideOverlay()},t.prototype.getSelectedNodes=function(){return this.selectionService.getSelectedNodes()},t.prototype.getSelectedRows=function(){return this.selectionService.getSelectedRows()},t.prototype.getBestCostNodeSelection=function(){if(!i(this.clientSideRowModel))return this.selectionService.getBestCostNodeSelection();this.logMissingRowModel("getBestCostNodeSelection","clientSide")},t.prototype.getRenderedNodes=function(){return this.rowRenderer.getRenderedNodes()},t.prototype.ensureColumnVisible=function(t,e){var o=this;void 0===e&&(e="auto"),this.frameworkOverrides.wrapIncoming(function(){return o.gridBodyCtrl.getScrollFeature().ensureColumnVisible(t,e)},"ensureVisible")},t.prototype.ensureIndexVisible=function(t,e){var o=this;this.frameworkOverrides.wrapIncoming(function(){return o.gridBodyCtrl.getScrollFeature().ensureIndexVisible(t,e)},"ensureVisible")},t.prototype.ensureNodeVisible=function(t,e){var o=this;void 0===e&&(e=null),this.frameworkOverrides.wrapIncoming(function(){return o.gridBodyCtrl.getScrollFeature().ensureNodeVisible(t,e)},"ensureVisible")},t.prototype.forEachLeafNode=function(t){i(this.clientSideRowModel)?this.logMissingRowModel("forEachLeafNode","clientSide"):this.clientSideRowModel.forEachLeafNode(t)},t.prototype.forEachNode=function(t,e){this.rowModel.forEachNode(t,e)},t.prototype.forEachNodeAfterFilter=function(t){i(this.clientSideRowModel)?this.logMissingRowModel("forEachNodeAfterFilter","clientSide"):this.clientSideRowModel.forEachNodeAfterFilter(t)},t.prototype.forEachNodeAfterFilterAndSort=function(t){i(this.clientSideRowModel)?this.logMissingRowModel("forEachNodeAfterFilterAndSort","clientSide"):this.clientSideRowModel.forEachNodeAfterFilterAndSort(t)},t.prototype.getFilterInstance=function(t,e){return O("'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."),this.filterManager.getFilterInstance(t,e)},t.prototype.getColumnFilterInstance=function(t){return this.filterManager.getColumnFilterInstance(t)},t.prototype.destroyFilter=function(t){var e=this.columnModel.getPrimaryColumn(t);if(e)return this.filterManager.destroyFilter(e,"api")},t.prototype.getStatusPanel=function(t){if(j.__assertRegistered(V.StatusBarModule,"api.getStatusPanel",this.context.getGridId()))return yl(this.statusBarService.getStatusPanel(t))},t.prototype.getColumnDef=function(t){var e=this.columnModel.getPrimaryColumn(t);return e?e.getColDef():null},t.prototype.getColumnDefs=function(){return this.columnModel.getColumnDefs()},t.prototype.onFilterChanged=function(t){void 0===t&&(t="api"),this.filterManager.onFilterChanged({source:t})},t.prototype.onSortChanged=function(){this.sortController.onSortChanged("api")},t.prototype.setFilterModel=function(t){var e=this;this.frameworkOverrides.wrapIncoming(function(){return e.filterManager.setFilterModel(t)})},t.prototype.getFilterModel=function(){return this.filterManager.getFilterModel()},t.prototype.getColumnFilterModel=function(t){return this.filterManager.getColumnFilterModel(t)},t.prototype.setColumnFilterModel=function(t,e){return this.filterManager.setColumnFilterModel(t,e)},t.prototype.getFocusedCell=function(){return this.focusService.getFocusedCell()},t.prototype.clearFocusedCell=function(){return this.focusService.clearFocusedCell()},t.prototype.setFocusedCell=function(t,e,o){this.focusService.setFocusedCell({rowIndex:t,column:e,rowPinned:o,forceBrowserFocus:!0})},t.prototype.addRowDropZone=function(t){this.gridBodyCtrl.getRowDragFeature().addRowDropZone(t)},t.prototype.removeRowDropZone=function(t){var e=this.dragAndDropService.findExternalZone(t);e&&this.dragAndDropService.removeDropTarget(e)},t.prototype.getRowDropZoneParams=function(t){return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(t)},t.prototype.assertSideBarLoaded=function(t){return j.__assertRegistered(V.SideBarModule,"api."+t,this.context.getGridId())},t.prototype.isSideBarVisible=function(){return this.assertSideBarLoaded("isSideBarVisible")&&this.sideBarService.getSideBarComp().isDisplayed()},t.prototype.setSideBarVisible=function(t){this.assertSideBarLoaded("setSideBarVisible")&&this.sideBarService.getSideBarComp().setDisplayed(t)},t.prototype.setSideBarPosition=function(t){this.assertSideBarLoaded("setSideBarPosition")&&this.sideBarService.getSideBarComp().setSideBarPosition(t)},t.prototype.openToolPanel=function(t){this.assertSideBarLoaded("openToolPanel")&&this.sideBarService.getSideBarComp().openToolPanel(t,"api")},t.prototype.closeToolPanel=function(){this.assertSideBarLoaded("closeToolPanel")&&this.sideBarService.getSideBarComp().close("api")},t.prototype.getOpenedToolPanel=function(){return this.assertSideBarLoaded("getOpenedToolPanel")?this.sideBarService.getSideBarComp().openedItem():null},t.prototype.refreshToolPanel=function(){this.assertSideBarLoaded("refreshToolPanel")&&this.sideBarService.getSideBarComp().refresh()},t.prototype.isToolPanelShowing=function(){return this.assertSideBarLoaded("isToolPanelShowing")&&this.sideBarService.getSideBarComp().isToolPanelShowing()},t.prototype.getToolPanelInstance=function(t){if(this.assertSideBarLoaded("getToolPanelInstance"))return yl(this.sideBarService.getSideBarComp().getToolPanelInstance(t))},t.prototype.getSideBar=function(){if(this.assertSideBarLoaded("getSideBar"))return this.sideBarService.getSideBarComp().getDef()},t.prototype.resetRowHeights=function(){if(r(this.clientSideRowModel)){if(this.columnModel.isAutoRowHeightActive())return void console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");this.clientSideRowModel.resetRowHeights()}},t.prototype.setRowCount=function(t,e){if(this.serverSideRowModel)return this.columnModel.isRowGroupEmpty()?void this.serverSideRowModel.setRowCount(t,e):void console.error("AG Grid: setRowCount cannot be used while using row grouping.");this.infiniteRowModel?this.infiniteRowModel.setRowCount(t,e):this.logMissingRowModel("setRowCount","infinite","serverSide")},t.prototype.onRowHeightChanged=function(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()},t.prototype.getValue=function(t,e){var o=this.columnModel.getPrimaryColumn(t);return i(o)&&(o=this.columnModel.getGridColumn(t)),i(o)?null:this.valueService.getValue(o,e)},t.prototype.addEventListener=function(t,e){this.apiEventService.addEventListener(t,e)},t.prototype.addGlobalListener=function(t){this.apiEventService.addGlobalListener(t)},t.prototype.removeEventListener=function(t,e){this.apiEventService.removeEventListener(t,e)},t.prototype.removeGlobalListener=function(t){this.apiEventService.removeGlobalListener(t)},t.prototype.dispatchEvent=function(t){this.eventService.dispatchEvent(t)},t.prototype.destroy=function(){var t="See ".concat(this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed"));if(!this.destroyCalled){var e={type:qt.EVENT_GRID_PRE_DESTROYED,state:this.getState()};this.dispatchEvent(e),this.destroyCalled=!0;var o=this.ctrlsService.getGridCtrl();o&&o.destroyGridUi(),this.context.destroy(),b(this,["isDestroyed"],t)}},t.prototype.isDestroyed=function(){return this.destroyCalled},t.prototype.resetQuickFilter=function(){this.filterManager.resetQuickFilterCache()},t.prototype.getCellRanges=function(){return this.rangeService?this.rangeService.getCellRanges():(j.__assertRegistered(V.RangeSelectionModule,"api.getCellRanges",this.context.getGridId()),null)},t.prototype.addCellRange=function(t){this.rangeService?this.rangeService.addCellRange(t):j.__assertRegistered(V.RangeSelectionModule,"api.addCellRange",this.context.getGridId())},t.prototype.clearRangeSelection=function(){this.rangeService&&this.rangeService.removeAllCellRanges(),j.__assertRegistered(V.RangeSelectionModule,"gridApi.clearRangeSelection",this.context.getGridId())},t.prototype.undoCellEditing=function(){this.undoRedoService.undo("api")},t.prototype.redoCellEditing=function(){this.undoRedoService.redo("api")},t.prototype.getCurrentUndoSize=function(){return this.undoRedoService.getCurrentUndoStackSize()},t.prototype.getCurrentRedoSize=function(){return this.undoRedoService.getCurrentRedoStackSize()},t.prototype.assertChart=function(t,e){if(j.__assertRegistered(V.GridChartsModule,"api."+t,this.context.getGridId()))return this.frameworkOverrides.wrapIncoming(function(){return e()})},t.prototype.getChartModels=function(){var t=this;return this.assertChart("getChartModels",function(){return t.chartService.getChartModels()})},t.prototype.getChartRef=function(t){var e=this;return this.assertChart("getChartRef",function(){return e.chartService.getChartRef(t)})},t.prototype.getChartImageDataURL=function(t){var e=this;return this.assertChart("getChartImageDataURL",function(){return e.chartService.getChartImageDataURL(t)})},t.prototype.downloadChart=function(t){var e=this;return this.assertChart("downloadChart",function(){return e.chartService.downloadChart(t)})},t.prototype.openChartToolPanel=function(t){var e=this;return this.assertChart("openChartToolPanel",function(){return e.chartService.openChartToolPanel(t)})},t.prototype.closeChartToolPanel=function(t){var e=this;return this.assertChart("closeChartToolPanel",function(){return e.chartService.closeChartToolPanel(t.chartId)})},t.prototype.createRangeChart=function(t){var e=this;return this.assertChart("createRangeChart",function(){return e.chartService.createRangeChart(t)})},t.prototype.createPivotChart=function(t){var e=this;return this.assertChart("createPivotChart",function(){return e.chartService.createPivotChart(t)})},t.prototype.createCrossFilterChart=function(t){var e=this;return this.assertChart("createCrossFilterChart",function(){return e.chartService.createCrossFilterChart(t)})},t.prototype.updateChart=function(t){var e=this;return this.assertChart("updateChart",function(){return e.chartService.updateChart(t)})},t.prototype.restoreChart=function(t,e){var o=this;return this.assertChart("restoreChart",function(){return o.chartService.restoreChart(t,e)})},t.prototype.assertClipboard=function(t,e){j.__assertRegistered(V.ClipboardModule,"api"+t,this.context.getGridId())&&e()},t.prototype.copyToClipboard=function(t){var e=this;this.assertClipboard("copyToClipboard",function(){return e.clipboardService.copyToClipboard(t)})},t.prototype.cutToClipboard=function(t){var e=this;this.assertClipboard("cutToClipboard",function(){return e.clipboardService.cutToClipboard(t)})},t.prototype.copySelectedRowsToClipboard=function(t){var e=this;this.assertClipboard("copySelectedRowsToClipboard",function(){return e.clipboardService.copySelectedRowsToClipboard(t)})},t.prototype.copySelectedRangeToClipboard=function(t){var e=this;this.assertClipboard("copySelectedRangeToClipboard",function(){return e.clipboardService.copySelectedRangeToClipboard(t)})},t.prototype.copySelectedRangeDown=function(){var t=this;this.assertClipboard("copySelectedRangeDown",function(){return t.clipboardService.copyRangeDown()})},t.prototype.pasteFromClipboard=function(){var t=this;this.assertClipboard("pasteFromClipboard",function(){return t.clipboardService.pasteFromClipboard()})},t.prototype.showColumnMenuAfterButtonClick=function(t,e){O("'showColumnMenuAfterButtonClick' is deprecated. Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere.");var o=this.columnModel.getGridColumn(t);this.menuService.showColumnMenu({column:o,buttonElement:e,positionBy:"button"})},t.prototype.showColumnMenuAfterMouseClick=function(t,e){O("'showColumnMenuAfterMouseClick' is deprecated. Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere.");var o=this.columnModel.getGridColumn(t);o||(o=this.columnModel.getPrimaryColumn(t)),o?this.menuService.showColumnMenu({column:o,mouseEvent:e,positionBy:"mouse"}):console.error("AG Grid: column '".concat(t,"' not found"))},t.prototype.showColumnChooser=function(t){this.menuService.showColumnChooser({chooserParams:t})},t.prototype.showColumnFilter=function(t){var e=this.columnModel.getGridColumn(t);e?this.menuService.showFilterMenu({column:e,containerType:"columnFilter",positionBy:"auto"}):console.error("AG Grid: column '".concat(t,"' not found"))},t.prototype.showColumnMenu=function(t){var e=this.columnModel.getGridColumn(t);e?this.menuService.showColumnMenu({column:e,positionBy:"auto"}):console.error("AG Grid: column '".concat(t,"' not found"))},t.prototype.hidePopupMenu=function(){this.menuService.hidePopupMenu()},t.prototype.hideColumnChooser=function(){this.menuService.hideColumnChooser()},t.prototype.tabToNextCell=function(t){return this.navigationService.tabToNextCell(!1,t)},t.prototype.tabToPreviousCell=function(t){return this.navigationService.tabToNextCell(!0,t)},t.prototype.getCellRendererInstances=function(t){return void 0===t&&(t={}),this.rowRenderer.getCellRendererInstances(t).map(yl)},t.prototype.getCellEditorInstances=function(t){return void 0===t&&(t={}),this.rowRenderer.getCellEditorInstances(t).map(yl)},t.prototype.getEditingCells=function(){return this.rowRenderer.getEditingCells()},t.prototype.stopEditing=function(t){void 0===t&&(t=!1),this.rowRenderer.stopEditing(t)},t.prototype.startEditingCell=function(t){var e=this.columnModel.getGridColumn(t.colKey);if(e){var o={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:e};null==t.rowPinned&&this.ensureIndexVisible(t.rowIndex),this.ensureColumnVisible(t.colKey);var n=this.navigationService.getCellByPosition(o);n&&(this.focusService.isCellFocused(o)||this.focusService.setFocusedCell(o),n.startRowOrCellEdit(t.key))}else console.warn("AG Grid: no column found for ".concat(t.colKey))},t.prototype.addAggFunc=function(t,e){this.logDeprecation("v31.1","addAggFunc(key, func)","addAggFuncs({ key: func })"),this.aggFuncService&&this.aggFuncService.addAggFuncs({key:e})},t.prototype.addAggFuncs=function(t){this.aggFuncService&&this.aggFuncService.addAggFuncs(t)},t.prototype.clearAggFuncs=function(){this.aggFuncService&&this.aggFuncService.clear()},t.prototype.applyServerSideTransaction=function(t){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.applyTransaction(t);this.logMissingRowModel("applyServerSideTransaction","serverSide")},t.prototype.applyServerSideTransactionAsync=function(t,e){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.applyTransactionAsync(t,e);this.logMissingRowModel("applyServerSideTransactionAsync","serverSide")},t.prototype.applyServerSideRowData=function(t){var e,o,n=null!==(e=t.startRow)&&void 0!==e?e:0,r=null!==(o=t.route)&&void 0!==o?o:[];n<0?console.warn("AG Grid: invalid value ".concat(t.startRow," for startRow, the value should be >= 0")):this.serverSideRowModel?this.serverSideRowModel.applyRowData(t.successParams,n,r):this.logMissingRowModel("setServerSideDatasource","serverSide")},t.prototype.retryServerSideLoads=function(){this.serverSideRowModel?this.serverSideRowModel.retryLoads():this.logMissingRowModel("retryServerSideLoads","serverSide")},t.prototype.flushServerSideAsyncTransactions=function(){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.flushAsyncTransactions();this.logMissingRowModel("flushServerSideAsyncTransactions","serverSide")},t.prototype.applyTransaction=function(t){var e=this;if(this.clientSideRowModel)return this.frameworkOverrides.wrapIncoming(function(){return e.clientSideRowModel.updateRowData(t)});this.logMissingRowModel("applyTransaction","clientSide")},t.prototype.applyTransactionAsync=function(t,e){var o=this;this.clientSideRowModel?this.frameworkOverrides.wrapIncoming(function(){return o.clientSideRowModel.batchUpdateRowData(t,e)}):this.logMissingRowModel("applyTransactionAsync","clientSide")},t.prototype.flushAsyncTransactions=function(){var t=this;this.clientSideRowModel?this.frameworkOverrides.wrapIncoming(function(){return t.clientSideRowModel.flushAsyncTransactions()}):this.logMissingRowModel("flushAsyncTransactions","clientSide")},t.prototype.refreshInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():this.logMissingRowModel("refreshInfiniteCache","infinite")},t.prototype.purgeInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():this.logMissingRowModel("purgeInfiniteCache","infinite")},t.prototype.refreshServerSide=function(t){this.serverSideRowModel?this.serverSideRowModel.refreshStore(t):this.logMissingRowModel("refreshServerSide","serverSide")},t.prototype.getServerSideGroupLevelState=function(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(this.logMissingRowModel("getServerSideGroupLevelState","serverSide"),[])},t.prototype.getInfiniteRowCount=function(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();this.logMissingRowModel("getInfiniteRowCount","infinite")},t.prototype.isLastRowIndexKnown=function(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();this.logMissingRowModel("isLastRowIndexKnown","infinite")},t.prototype.getCacheBlockState=function(){return this.rowNodeBlockLoader.getBlockState()},t.prototype.getFirstDisplayedRow=function(){return this.logDeprecation("v31.1","getFirstDisplayedRow","getFirstDisplayedRowIndex"),this.getFirstDisplayedRowIndex()},t.prototype.getFirstDisplayedRowIndex=function(){return this.rowRenderer.getFirstVirtualRenderedRow()},t.prototype.getLastDisplayedRow=function(){return this.logDeprecation("v31.1","getLastDisplayedRow","getLastDisplayedRowIndex"),this.getLastDisplayedRowIndex()},t.prototype.getLastDisplayedRowIndex=function(){return this.rowRenderer.getLastVirtualRenderedRow()},t.prototype.getDisplayedRowAtIndex=function(t){return this.rowModel.getRow(t)},t.prototype.getDisplayedRowCount=function(){return this.rowModel.getRowCount()},t.prototype.paginationIsLastPageFound=function(){return this.paginationProxy.isLastPageFound()},t.prototype.paginationGetPageSize=function(){return this.paginationProxy.getPageSize()},t.prototype.paginationGetCurrentPage=function(){return this.paginationProxy.getCurrentPage()},t.prototype.paginationGetTotalPages=function(){return this.paginationProxy.getTotalPages()},t.prototype.paginationGetRowCount=function(){return this.paginationProxy.getMasterRowCount()},t.prototype.paginationGoToNextPage=function(){this.paginationProxy.goToNextPage()},t.prototype.paginationGoToPreviousPage=function(){this.paginationProxy.goToPreviousPage()},t.prototype.paginationGoToFirstPage=function(){this.paginationProxy.goToFirstPage()},t.prototype.paginationGoToLastPage=function(){this.paginationProxy.goToLastPage()},t.prototype.paginationGoToPage=function(t){this.paginationProxy.goToPage(t)},t.prototype.sizeColumnsToFit=function(t){"number"===typeof t?this.columnModel.sizeColumnsToFit(t,"api"):this.gridBodyCtrl.sizeColumnsToFit(t)},t.prototype.setColumnGroupOpened=function(t,e){this.columnModel.setColumnGroupOpened(t,e,"api")},t.prototype.getColumnGroup=function(t,e){return this.columnModel.getColumnGroup(t,e)},t.prototype.getProvidedColumnGroup=function(t){return this.columnModel.getProvidedColumnGroup(t)},t.prototype.getDisplayNameForColumn=function(t,e){return this.columnModel.getDisplayNameForColumn(t,e)||""},t.prototype.getDisplayNameForColumnGroup=function(t,e){return this.columnModel.getDisplayNameForColumnGroup(t,e)||""},t.prototype.getColumn=function(t){return this.columnModel.getPrimaryColumn(t)},t.prototype.getColumns=function(){return this.columnModel.getAllPrimaryColumns()},t.prototype.applyColumnState=function(t){return this.columnModel.applyColumnState(t,"api")},t.prototype.getColumnState=function(){return this.columnModel.getColumnState()},t.prototype.resetColumnState=function(){this.columnModel.resetColumnState("api")},t.prototype.getColumnGroupState=function(){return this.columnModel.getColumnGroupState()},t.prototype.setColumnGroupState=function(t){this.columnModel.setColumnGroupState(t,"api")},t.prototype.resetColumnGroupState=function(){this.columnModel.resetColumnGroupState("api")},t.prototype.isPinning=function(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()},t.prototype.isPinningLeft=function(){return this.columnModel.isPinningLeft()},t.prototype.isPinningRight=function(){return this.columnModel.isPinningRight()},t.prototype.getDisplayedColAfter=function(t){return this.columnModel.getDisplayedColAfter(t)},t.prototype.getDisplayedColBefore=function(t){return this.columnModel.getDisplayedColBefore(t)},t.prototype.setColumnVisible=function(t,e){this.logDeprecation("v31.1","setColumnVisible(key,visible)","setColumnsVisible([key],visible)"),this.columnModel.setColumnsVisible([t],e,"api")},t.prototype.setColumnsVisible=function(t,e){this.columnModel.setColumnsVisible(t,e,"api")},t.prototype.setColumnPinned=function(t,e){this.logDeprecation("v31.1","setColumnPinned(key,pinned)","setColumnsPinned([key],pinned)"),this.columnModel.setColumnsPinned([t],e,"api")},t.prototype.setColumnsPinned=function(t,e){this.columnModel.setColumnsPinned(t,e,"api")},t.prototype.getAllGridColumns=function(){return this.columnModel.getAllGridColumns()},t.prototype.getDisplayedLeftColumns=function(){return this.columnModel.getDisplayedLeftColumns()},t.prototype.getDisplayedCenterColumns=function(){return this.columnModel.getDisplayedCenterColumns()},t.prototype.getDisplayedRightColumns=function(){return this.columnModel.getDisplayedRightColumns()},t.prototype.getAllDisplayedColumns=function(){return this.columnModel.getAllDisplayedColumns()},t.prototype.getAllDisplayedVirtualColumns=function(){return this.columnModel.getViewportColumns()},t.prototype.moveColumn=function(t,e){this.logDeprecation("v31.1","moveColumn(key, toIndex)","moveColumns([key], toIndex)"),this.columnModel.moveColumns([t],e,"api")},t.prototype.moveColumnByIndex=function(t,e){this.columnModel.moveColumnByIndex(t,e,"api")},t.prototype.moveColumns=function(t,e){this.columnModel.moveColumns(t,e,"api")},t.prototype.moveRowGroupColumn=function(t,e){this.columnModel.moveRowGroupColumn(t,e,"api")},t.prototype.setColumnAggFunc=function(t,e){this.columnModel.setColumnAggFunc(t,e,"api")},t.prototype.setColumnWidth=function(t,e,o,n){void 0===o&&(o=!0),void 0===n&&(n="api"),this.logDeprecation("v31.1","setColumnWidth(col, width)","setColumnWidths([{key: col, newWidth: width}])"),this.columnModel.setColumnWidths([{key:t,newWidth:e}],!1,o,n)},t.prototype.setColumnWidths=function(t,e,o){void 0===e&&(e=!0),void 0===o&&(o="api"),this.columnModel.setColumnWidths(t,!1,e,o)},t.prototype.isPivotMode=function(){return this.columnModel.isPivotMode()},t.prototype.getPivotResultColumn=function(t,e){return this.columnModel.getSecondaryPivotColumn(t,e)},t.prototype.setValueColumns=function(t){this.columnModel.setValueColumns(t,"api")},t.prototype.getValueColumns=function(){return this.columnModel.getValueColumns()},t.prototype.removeValueColumn=function(t){this.logDeprecation("v31.1","removeValueColumn(colKey)","removeValueColumns([colKey])"),this.columnModel.removeValueColumns([t],"api")},t.prototype.removeValueColumns=function(t){this.columnModel.removeValueColumns(t,"api")},t.prototype.addValueColumn=function(t){this.logDeprecation("v31.1","addValueColumn(colKey)","addValueColumns([colKey])"),this.columnModel.addValueColumns([t],"api")},t.prototype.addValueColumns=function(t){this.columnModel.addValueColumns(t,"api")},t.prototype.setRowGroupColumns=function(t){this.columnModel.setRowGroupColumns(t,"api")},t.prototype.removeRowGroupColumn=function(t){this.logDeprecation("v31.1","removeRowGroupColumn(colKey)","removeRowGroupColumns([colKey])"),this.columnModel.removeRowGroupColumns([t],"api")},t.prototype.removeRowGroupColumns=function(t){this.columnModel.removeRowGroupColumns(t,"api")},t.prototype.addRowGroupColumn=function(t){this.logDeprecation("v31.1","addRowGroupColumn(colKey)","addRowGroupColumns([colKey])"),this.columnModel.addRowGroupColumns([t],"api")},t.prototype.addRowGroupColumns=function(t){this.columnModel.addRowGroupColumns(t,"api")},t.prototype.getRowGroupColumns=function(){return this.columnModel.getRowGroupColumns()},t.prototype.setPivotColumns=function(t){this.columnModel.setPivotColumns(t,"api")},t.prototype.removePivotColumn=function(t){this.logDeprecation("v31.1","removePivotColumn(colKey)","removePivotColumns([colKey])"),this.columnModel.removePivotColumns([t],"api")},t.prototype.removePivotColumns=function(t){this.columnModel.removePivotColumns(t,"api")},t.prototype.addPivotColumn=function(t){this.logDeprecation("v31.1","addPivotColumn(colKey)","addPivotColumns([colKey])"),this.columnModel.addPivotColumns([t],"api")},t.prototype.addPivotColumns=function(t){this.columnModel.addPivotColumns(t,"api")},t.prototype.getPivotColumns=function(){return this.columnModel.getPivotColumns()},t.prototype.getLeftDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeLeft()},t.prototype.getCenterDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeCentre()},t.prototype.getRightDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeRight()},t.prototype.getAllDisplayedColumnGroups=function(){return this.columnModel.getAllDisplayedTrees()},t.prototype.autoSizeColumn=function(t,e){return this.logDeprecation("v31.1","autoSizeColumn(key, skipHeader)","autoSizeColumns([key], skipHeader)"),this.columnModel.autoSizeColumns({columns:[t],skipHeader:e,source:"api"})},t.prototype.autoSizeColumns=function(t,e){this.columnModel.autoSizeColumns({columns:t,skipHeader:e,source:"api"})},t.prototype.autoSizeAllColumns=function(t){this.columnModel.autoSizeAllColumns("api",t)},t.prototype.setPivotResultColumns=function(t){this.columnModel.setSecondaryColumns(t,"api")},t.prototype.getPivotResultColumns=function(){return this.columnModel.getSecondaryColumns()},t.prototype.getState=function(){return this.stateService.getState()},t.prototype.getGridOption=function(t){return this.gos.get(t)},t.prototype.setGridOption=function(t,e){var o;this.updateGridOptions(((o={})[t]=e,o))},t.prototype.updateGridOptions=function(t){this.gos.updateGridOptions({options:t})},t.prototype.__internalUpdateGridOptions=function(t){this.gos.updateGridOptions({options:t,source:"gridOptionsUpdated"})},t.prototype.deprecatedUpdateGridOption=function(t,e){O("set".concat(t.charAt(0).toUpperCase()).concat(t.slice(1,t.length)," is deprecated. Please use 'api.setGridOption('").concat(t,"', newValue)' or 'api.updateGridOptions({ ").concat(t,": newValue })' instead.")),this.setGridOption(t,e)},t.prototype.setPivotMode=function(t){this.deprecatedUpdateGridOption("pivotMode",t)},t.prototype.setPinnedTopRowData=function(t){this.deprecatedUpdateGridOption("pinnedTopRowData",t)},t.prototype.setPinnedBottomRowData=function(t){this.deprecatedUpdateGridOption("pinnedBottomRowData",t)},t.prototype.setPopupParent=function(t){this.deprecatedUpdateGridOption("popupParent",t)},t.prototype.setSuppressModelUpdateAfterUpdateTransaction=function(t){this.deprecatedUpdateGridOption("suppressModelUpdateAfterUpdateTransaction",t)},t.prototype.setDataTypeDefinitions=function(t){this.deprecatedUpdateGridOption("dataTypeDefinitions",t)},t.prototype.setPagination=function(t){this.deprecatedUpdateGridOption("pagination",t)},t.prototype.paginationSetPageSize=function(t){this.deprecatedUpdateGridOption("paginationPageSize",t)},t.prototype.setSideBar=function(t){this.deprecatedUpdateGridOption("sideBar",t)},t.prototype.setSuppressClipboardPaste=function(t){this.deprecatedUpdateGridOption("suppressClipboardPaste",t)},t.prototype.setGroupRemoveSingleChildren=function(t){this.deprecatedUpdateGridOption("groupRemoveSingleChildren",t)},t.prototype.setGroupRemoveLowestSingleChildren=function(t){this.deprecatedUpdateGridOption("groupRemoveLowestSingleChildren",t)},t.prototype.setGroupDisplayType=function(t){this.deprecatedUpdateGridOption("groupDisplayType",t)},t.prototype.setGroupIncludeFooter=function(t){this.deprecatedUpdateGridOption("groupIncludeFooter",t)},t.prototype.setGroupIncludeTotalFooter=function(t){this.deprecatedUpdateGridOption("groupIncludeTotalFooter",t)},t.prototype.setRowClass=function(t){this.deprecatedUpdateGridOption("rowClass",t)},t.prototype.setDeltaSort=function(t){this.deprecatedUpdateGridOption("deltaSort",t)},t.prototype.setSuppressRowDrag=function(t){this.deprecatedUpdateGridOption("suppressRowDrag",t)},t.prototype.setSuppressMoveWhenRowDragging=function(t){this.deprecatedUpdateGridOption("suppressMoveWhenRowDragging",t)},t.prototype.setSuppressRowClickSelection=function(t){this.deprecatedUpdateGridOption("suppressRowClickSelection",t)},t.prototype.setEnableAdvancedFilter=function(t){this.deprecatedUpdateGridOption("enableAdvancedFilter",t)},t.prototype.setIncludeHiddenColumnsInAdvancedFilter=function(t){this.deprecatedUpdateGridOption("includeHiddenColumnsInAdvancedFilter",t)},t.prototype.setAdvancedFilterParent=function(t){this.deprecatedUpdateGridOption("advancedFilterParent",t)},t.prototype.setAdvancedFilterBuilderParams=function(t){this.deprecatedUpdateGridOption("advancedFilterBuilderParams",t)},t.prototype.setQuickFilter=function(t){O("setQuickFilter is deprecated. Please use 'api.setGridOption('quickFilterText', newValue)' or 'api.updateGridOptions({ quickFilterText: newValue })' instead."),this.gos.updateGridOptions({options:{quickFilterText:t}})},t.prototype.setExcludeHiddenColumnsFromQuickFilter=function(t){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",!t)},t.prototype.setIncludeHiddenColumnsInQuickFilter=function(t){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",t)},t.prototype.setQuickFilterParser=function(t){this.deprecatedUpdateGridOption("quickFilterParser",t)},t.prototype.setQuickFilterMatcher=function(t){this.deprecatedUpdateGridOption("quickFilterMatcher",t)},t.prototype.setAlwaysShowHorizontalScroll=function(t){this.deprecatedUpdateGridOption("alwaysShowHorizontalScroll",t)},t.prototype.setAlwaysShowVerticalScroll=function(t){this.deprecatedUpdateGridOption("alwaysShowVerticalScroll",t)},t.prototype.setFunctionsReadOnly=function(t){this.deprecatedUpdateGridOption("functionsReadOnly",t)},t.prototype.setColumnDefs=function(t,e){void 0===e&&(e="api"),O("setColumnDefs is deprecated. Please use 'api.setGridOption('columnDefs', newValue)' or 'api.updateGridOptions({ columnDefs: newValue })' instead."),this.gos.updateGridOptions({options:{columnDefs:t},source:e})},t.prototype.setAutoGroupColumnDef=function(t,e){void 0===e&&(e="api"),O("setAutoGroupColumnDef is deprecated. Please use 'api.setGridOption('autoGroupColumnDef', newValue)' or 'api.updateGridOptions({ autoGroupColumnDef: newValue })' instead."),this.gos.updateGridOptions({options:{autoGroupColumnDef:t},source:e})},t.prototype.setDefaultColDef=function(t,e){void 0===e&&(e="api"),O("setDefaultColDef is deprecated. Please use 'api.setGridOption('defaultColDef', newValue)' or 'api.updateGridOptions({ defaultColDef: newValue })' instead."),this.gos.updateGridOptions({options:{defaultColDef:t},source:e})},t.prototype.setColumnTypes=function(t,e){void 0===e&&(e="api"),O("setColumnTypes is deprecated. Please use 'api.setGridOption('columnTypes', newValue)' or 'api.updateGridOptions({ columnTypes: newValue })' instead."),this.gos.updateGridOptions({options:{columnTypes:t},source:e})},t.prototype.setTreeData=function(t){this.deprecatedUpdateGridOption("treeData",t)},t.prototype.setServerSideDatasource=function(t){this.deprecatedUpdateGridOption("serverSideDatasource",t)},t.prototype.setCacheBlockSize=function(t){this.deprecatedUpdateGridOption("cacheBlockSize",t)},t.prototype.setDatasource=function(t){this.deprecatedUpdateGridOption("datasource",t)},t.prototype.setViewportDatasource=function(t){this.deprecatedUpdateGridOption("viewportDatasource",t)},t.prototype.setRowData=function(t){this.deprecatedUpdateGridOption("rowData",t)},t.prototype.setEnableCellTextSelection=function(t){this.deprecatedUpdateGridOption("enableCellTextSelection",t)},t.prototype.setHeaderHeight=function(t){this.deprecatedUpdateGridOption("headerHeight",t)},t.prototype.setDomLayout=function(t){this.deprecatedUpdateGridOption("domLayout",t)},t.prototype.setFillHandleDirection=function(t){this.deprecatedUpdateGridOption("fillHandleDirection",t)},t.prototype.setGroupHeaderHeight=function(t){this.deprecatedUpdateGridOption("groupHeaderHeight",t)},t.prototype.setFloatingFiltersHeight=function(t){this.deprecatedUpdateGridOption("floatingFiltersHeight",t)},t.prototype.setPivotHeaderHeight=function(t){this.deprecatedUpdateGridOption("pivotHeaderHeight",t)},t.prototype.setPivotGroupHeaderHeight=function(t){this.deprecatedUpdateGridOption("pivotGroupHeaderHeight",t)},t.prototype.setAnimateRows=function(t){this.deprecatedUpdateGridOption("animateRows",t)},t.prototype.setIsExternalFilterPresent=function(t){this.deprecatedUpdateGridOption("isExternalFilterPresent",t)},t.prototype.setDoesExternalFilterPass=function(t){this.deprecatedUpdateGridOption("doesExternalFilterPass",t)},t.prototype.setNavigateToNextCell=function(t){this.deprecatedUpdateGridOption("navigateToNextCell",t)},t.prototype.setTabToNextCell=function(t){this.deprecatedUpdateGridOption("tabToNextCell",t)},t.prototype.setTabToNextHeader=function(t){this.deprecatedUpdateGridOption("tabToNextHeader",t)},t.prototype.setNavigateToNextHeader=function(t){this.deprecatedUpdateGridOption("navigateToNextHeader",t)},t.prototype.setRowGroupPanelShow=function(t){this.deprecatedUpdateGridOption("rowGroupPanelShow",t)},t.prototype.setGetGroupRowAgg=function(t){this.deprecatedUpdateGridOption("getGroupRowAgg",t)},t.prototype.setGetBusinessKeyForNode=function(t){this.deprecatedUpdateGridOption("getBusinessKeyForNode",t)},t.prototype.setGetChildCount=function(t){this.deprecatedUpdateGridOption("getChildCount",t)},t.prototype.setProcessRowPostCreate=function(t){this.deprecatedUpdateGridOption("processRowPostCreate",t)},t.prototype.setGetRowId=function(t){O("getRowId is a static property and can no longer be updated.")},t.prototype.setGetRowClass=function(t){this.deprecatedUpdateGridOption("getRowClass",t)},t.prototype.setIsFullWidthRow=function(t){this.deprecatedUpdateGridOption("isFullWidthRow",t)},t.prototype.setIsRowSelectable=function(t){this.deprecatedUpdateGridOption("isRowSelectable",t)},t.prototype.setIsRowMaster=function(t){this.deprecatedUpdateGridOption("isRowMaster",t)},t.prototype.setPostSortRows=function(t){this.deprecatedUpdateGridOption("postSortRows",t)},t.prototype.setGetDocument=function(t){this.deprecatedUpdateGridOption("getDocument",t)},t.prototype.setGetContextMenuItems=function(t){this.deprecatedUpdateGridOption("getContextMenuItems",t)},t.prototype.setGetMainMenuItems=function(t){this.deprecatedUpdateGridOption("getMainMenuItems",t)},t.prototype.setProcessCellForClipboard=function(t){this.deprecatedUpdateGridOption("processCellForClipboard",t)},t.prototype.setSendToClipboard=function(t){this.deprecatedUpdateGridOption("sendToClipboard",t)},t.prototype.setProcessCellFromClipboard=function(t){this.deprecatedUpdateGridOption("processCellFromClipboard",t)},t.prototype.setProcessPivotResultColDef=function(t){this.deprecatedUpdateGridOption("processPivotResultColDef",t)},t.prototype.setProcessPivotResultColGroupDef=function(t){this.deprecatedUpdateGridOption("processPivotResultColGroupDef",t)},t.prototype.setPostProcessPopup=function(t){this.deprecatedUpdateGridOption("postProcessPopup",t)},t.prototype.setInitialGroupOrderComparator=function(t){this.deprecatedUpdateGridOption("initialGroupOrderComparator",t)},t.prototype.setGetChartToolbarItems=function(t){this.deprecatedUpdateGridOption("getChartToolbarItems",t)},t.prototype.setPaginationNumberFormatter=function(t){this.deprecatedUpdateGridOption("paginationNumberFormatter",t)},t.prototype.setGetServerSideGroupLevelParams=function(t){this.deprecatedUpdateGridOption("getServerSideGroupLevelParams",t)},t.prototype.setIsServerSideGroupOpenByDefault=function(t){this.deprecatedUpdateGridOption("isServerSideGroupOpenByDefault",t)},t.prototype.setIsApplyServerSideTransaction=function(t){this.deprecatedUpdateGridOption("isApplyServerSideTransaction",t)},t.prototype.setIsServerSideGroup=function(t){this.deprecatedUpdateGridOption("isServerSideGroup",t)},t.prototype.setGetServerSideGroupKey=function(t){this.deprecatedUpdateGridOption("getServerSideGroupKey",t)},t.prototype.setGetRowStyle=function(t){this.deprecatedUpdateGridOption("getRowStyle",t)},t.prototype.setGetRowHeight=function(t){this.deprecatedUpdateGridOption("getRowHeight",t)},gl([Q("csvCreator")],t.prototype,"csvCreator",void 0),gl([Q("excelCreator")],t.prototype,"excelCreator",void 0),gl([J("rowRenderer")],t.prototype,"rowRenderer",void 0),gl([J("navigationService")],t.prototype,"navigationService",void 0),gl([J("filterManager")],t.prototype,"filterManager",void 0),gl([J("columnModel")],t.prototype,"columnModel",void 0),gl([J("selectionService")],t.prototype,"selectionService",void 0),gl([J("gridOptionsService")],t.prototype,"gos",void 0),gl([J("valueService")],t.prototype,"valueService",void 0),gl([J("alignedGridsService")],t.prototype,"alignedGridsService",void 0),gl([J("eventService")],t.prototype,"eventService",void 0),gl([J("pinnedRowModel")],t.prototype,"pinnedRowModel",void 0),gl([J("context")],t.prototype,"context",void 0),gl([J("rowModel")],t.prototype,"rowModel",void 0),gl([J("sortController")],t.prototype,"sortController",void 0),gl([J("paginationProxy")],t.prototype,"paginationProxy",void 0),gl([J("focusService")],t.prototype,"focusService",void 0),gl([J("dragAndDropService")],t.prototype,"dragAndDropService",void 0),gl([Q("rangeService")],t.prototype,"rangeService",void 0),gl([Q("clipboardService")],t.prototype,"clipboardService",void 0),gl([Q("aggFuncService")],t.prototype,"aggFuncService",void 0),gl([J("menuService")],t.prototype,"menuService",void 0),gl([J("valueCache")],t.prototype,"valueCache",void 0),gl([J("animationFrameService")],t.prototype,"animationFrameService",void 0),gl([Q("statusBarService")],t.prototype,"statusBarService",void 0),gl([Q("chartService")],t.prototype,"chartService",void 0),gl([Q("undoRedoService")],t.prototype,"undoRedoService",void 0),gl([Q("rowNodeBlockLoader")],t.prototype,"rowNodeBlockLoader",void 0),gl([Q("ssrmTransactionManager")],t.prototype,"serverSideTransactionManager",void 0),gl([J("ctrlsService")],t.prototype,"ctrlsService",void 0),gl([J("overlayService")],t.prototype,"overlayService",void 0),gl([Q("sideBarService")],t.prototype,"sideBarService",void 0),gl([J("stateService")],t.prototype,"stateService",void 0),gl([J("expansionService")],t.prototype,"expansionService",void 0),gl([J("apiEventService")],t.prototype,"apiEventService",void 0),gl([J("frameworkOverrides")],t.prototype,"frameworkOverrides",void 0),gl([Y],t.prototype,"init",null),t=gl([X("gridApi")],t)}(),Cl=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),_l=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},wl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.quickFilter=null,e.quickFilterParts=null,e}var o;return Cl(e,t),o=e,e.prototype.postConstruct=function(){var t=this;this.addManagedListener(this.eventService,qt.EVENT_COLUMN_PIVOT_MODE_CHANGED,function(){return t.resetQuickFilterCache()}),this.addManagedListener(this.eventService,qt.EVENT_NEW_COLUMNS_LOADED,function(){return t.resetQuickFilterCache()}),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return t.resetQuickFilterCache()}),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_VISIBLE,function(){t.gridOptionsService.get("includeHiddenColumnsInQuickFilter")||t.resetQuickFilterCache()}),this.addManagedPropertyListener("quickFilterText",function(e){return t.setQuickFilter(e.currentValue)}),this.addManagedPropertyListener("includeHiddenColumnsInQuickFilter",function(){return t.onIncludeHiddenColumnsInQuickFilterChanged()}),this.quickFilter=this.parseQuickFilter(this.gridOptionsService.get("quickFilterText")),this.parser=this.gridOptionsService.get("quickFilterParser"),this.matcher=this.gridOptionsService.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],function(){return t.setQuickFilterParserAndMatcher()})},e.prototype.isQuickFilterPresent=function(){return null!==this.quickFilter},e.prototype.doesRowPassQuickFilter=function(t){var e=this,o=this.gridOptionsService.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(o,t):this.quickFilterParts.every(function(n){return o?e.doesRowPassQuickFilterCache(t,n):e.doesRowPassQuickFilterNoCache(t,n)})},e.prototype.resetQuickFilterCache=function(){this.rowModel.forEachNode(function(t){return t.quickFilterAggregateText=null})},e.prototype.setQuickFilterParts=function(){var t=this.quickFilter,e=this.parser;this.quickFilterParts=t?e?e(t):t.split(" "):null},e.prototype.parseQuickFilter=function(t){return r(t)?this.gridOptionsService.isRowModelType("clientSide")?t.toUpperCase():(console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model"),null):null},e.prototype.setQuickFilter=function(t){if(null==t||"string"===typeof t){var e=this.parseQuickFilter(t);this.quickFilter!==e&&(this.quickFilter=e,this.setQuickFilterParts(),this.dispatchEvent({type:o.EVENT_QUICK_FILTER_CHANGED}))}else console.warn("AG Grid - Grid option quickFilterText only supports string inputs, received: ".concat(typeof t))},e.prototype.setQuickFilterParserAndMatcher=function(){var t=this.gridOptionsService.get("quickFilterParser"),e=this.gridOptionsService.get("quickFilterMatcher"),n=t!==this.parser||e!==this.matcher;this.parser=t,this.matcher=e,n&&(this.setQuickFilterParts(),this.dispatchEvent({type:o.EVENT_QUICK_FILTER_CHANGED}))},e.prototype.onIncludeHiddenColumnsInQuickFilterChanged=function(){this.columnModel.refreshQuickFilterColumns(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchEvent({type:o.EVENT_QUICK_FILTER_CHANGED})},e.prototype.doesRowPassQuickFilterNoCache=function(t,e){var o=this;return this.columnModel.getAllColumnsForQuickFilter().some(function(n){var i=o.getQuickFilterTextForColumn(n,t);return r(i)&&i.indexOf(e)>=0})},e.prototype.doesRowPassQuickFilterCache=function(t,e){return this.checkGenerateQuickFilterAggregateText(t),t.quickFilterAggregateText.indexOf(e)>=0},e.prototype.doesRowPassQuickFilterMatcher=function(t,e){var o;t?(this.checkGenerateQuickFilterAggregateText(e),o=e.quickFilterAggregateText):o=this.getQuickFilterAggregateText(e);var n=this.quickFilterParts;return(0,this.matcher)(n,o)},e.prototype.checkGenerateQuickFilterAggregateText=function(t){t.quickFilterAggregateText||(t.quickFilterAggregateText=this.getQuickFilterAggregateText(t))},e.prototype.getQuickFilterTextForColumn=function(t,e){var o=this.valueService.getValue(t,e,!0),n=t.getColDef();if(n.getQuickFilterText){var i=this.gridOptionsService.addGridCommonParams({value:o,node:e,data:e.data,column:t,colDef:n});o=n.getQuickFilterText(i)}return r(o)?o.toString().toUpperCase():null},e.prototype.getQuickFilterAggregateText=function(t){var e=this,n=[];return this.columnModel.getAllColumnsForQuickFilter().forEach(function(o){var i=e.getQuickFilterTextForColumn(o,t);r(i)&&n.push(i)}),n.join(o.QUICK_FILTER_SEPARATOR)},e.EVENT_QUICK_FILTER_CHANGED="quickFilterChanged",e.QUICK_FILTER_SEPARATOR="\n",_l([J("valueService")],e.prototype,"valueService",void 0),_l([J("columnModel")],e.prototype,"columnModel",void 0),_l([J("rowModel")],e.prototype,"rowModel",void 0),_l([Y],e.prototype,"postConstruct",null),e=o=_l([X("quickFilterService")],e)}(Bt),bl=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Sl=function(){return(Sl=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},El=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},xl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.allColumnFilters=new Map,e.allColumnListeners=new Map,e.activeAggregateFilters=[],e.activeColumnFilters=[],e.processingFilterChange=!1,e.filterModelUpdateQueue=[],e.columnFilterModelUpdateQueue=[],e.advancedFilterModelUpdateQueue=[],e}return bl(e,t),e.prototype.init=function(){var t,e,o,n=this;this.addManagedListener(this.eventService,qt.EVENT_GRID_COLUMNS_CHANGED,function(){return n.onColumnsChanged()}),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_VALUE_CHANGED,function(){return n.refreshFiltersForAggregations()}),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_PIVOT_CHANGED,function(){return n.refreshFiltersForAggregations()}),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_PIVOT_MODE_CHANGED,function(){return n.refreshFiltersForAggregations()}),this.addManagedListener(this.eventService,qt.EVENT_NEW_COLUMNS_LOADED,function(){return n.updateAdvancedFilterColumns()}),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_VISIBLE,function(){return n.updateAdvancedFilterColumns()}),this.addManagedListener(this.eventService,qt.EVENT_ROW_DATA_UPDATED,function(){return n.onNewRowsLoaded("rowDataUpdated")}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],function(){n.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",function(){n.updateAggFiltering(),n.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",function(t){return n.setAdvancedFilterModel(t.currentValue)}),this.addManagedListener(this.eventService,qt.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,function(t){var e=t.enabled;return n.onAdvancedFilterEnabledChanged(e)}),this.addManagedListener(this.eventService,qt.EVENT_DATA_TYPES_INFERRED,function(){return n.processFilterModelUpdateQueue()}),this.addManagedListener(this.quickFilterService,wl.EVENT_QUICK_FILTER_CHANGED,function(){return n.onFilterChanged({source:"quickFilter"})}),this.initialFilterModel=Sl({},null!==(o=null===(e=null===(t=this.gridOptionsService.get("initialState"))||void 0===t?void 0:t.filter)||void 0===e?void 0:e.filterModel)&&void 0!==o?o:{})},e.prototype.isExternalFilterPresentCallback=function(){var t=this.gridOptionsService.getCallback("isExternalFilterPresent");return"function"===typeof t&&t({})},e.prototype.doesExternalFilterPass=function(t){var e=this.gridOptionsService.get("doesExternalFilterPass");return"function"===typeof e&&e(t)},e.prototype.setFilterModel=function(t,e){var o=this;if(void 0===e&&(e="api"),this.isAdvancedFilterEnabled())this.warnAdvancedFilters();else if(this.dataTypeService.isPendingInference())this.filterModelUpdateQueue.push({model:t,source:e});else{var n=[],r=this.getFilterModel();if(t){var i=ir(Object.keys(t));this.allColumnFilters.forEach(function(e,r){var a=t[r];n.push(o.setModelOnFilterWrapper(e.filterPromise,a)),i.delete(r)}),i.forEach(function(e){var r=o.columnModel.getPrimaryColumn(e)||o.columnModel.getGridColumn(e);if(r)if(r.isFilterAllowed()){var i=o.getOrCreateFilterWrapper(r,"NO_UI");i?n.push(o.setModelOnFilterWrapper(i.filterPromise,t[e])):console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: "+e)}else console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+e);else console.warn("AG Grid: setFilterModel() - no column found for colId: "+e)})}else this.allColumnFilters.forEach(function(t){n.push(o.setModelOnFilterWrapper(t.filterPromise,null))});hr.all(n).then(function(){var t=o.getFilterModel(),n=[];o.allColumnFilters.forEach(function(e,o){var i=r?r[o]:null,a=t?t[o]:null;ur.jsonEquals(i,a)||n.push(e.column)}),n.length>0&&o.onFilterChanged({columns:n,source:e})})}},e.prototype.setModelOnFilterWrapper=function(t,e){return new hr(function(o){t.then(function(t){"function"!==typeof t.setModel&&(console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel"),o()),(t.setModel(e)||hr.resolve()).then(function(){return o()})})})},e.prototype.getFilterModel=function(){var t=this,e={};return this.allColumnFilters.forEach(function(o,n){var i=t.getModelFromFilterWrapper(o);r(i)&&(e[n]=i)}),e},e.prototype.getModelFromFilterWrapper=function(t){var e,o=t.filterPromise.resolveNow(null,function(t){return t});return null==o?null!==(e=this.initialFilterModel[t.column.getColId()])&&void 0!==e?e:null:"function"!==typeof o.getModel?(console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel"),null):o.getModel()},e.prototype.isColumnFilterPresent=function(){return this.activeColumnFilters.length>0},e.prototype.isAggregateFilterPresent=function(){return!!this.activeAggregateFilters.length},e.prototype.isExternalFilterPresent=function(){return this.externalFilterPresent},e.prototype.isChildFilterPresent=function(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()},e.prototype.isAdvancedFilterPresent=function(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()},e.prototype.onAdvancedFilterEnabledChanged=function(t){var e,o=this;t?this.allColumnFilters.size&&(this.allColumnFilters.forEach(function(t){return o.disposeFilterWrapper(t,"advancedFilterEnabled")}),this.onFilterChanged({source:"advancedFilter"})):(null===(e=this.advancedFilterService)||void 0===e?void 0:e.isFilterPresent())&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))},e.prototype.isAdvancedFilterEnabled=function(){var t;return null===(t=this.advancedFilterService)||void 0===t?void 0:t.isEnabled()},e.prototype.isAdvancedFilterHeaderActive=function(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()},e.prototype.doAggregateFiltersPass=function(t,e){return this.doColumnFiltersPass(t,e,!0)},e.prototype.updateActiveFilters=function(){var t=this;this.activeColumnFilters.length=0,this.activeAggregateFilters.length=0;var e=function(t){return!!t&&(t.isFilterActive?t.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1))},o=!!this.gridOptionsService.getGroupAggFiltering();this.allColumnFilters.forEach(function(n){if(n.filterPromise.resolveNow(!1,e)){var r=n.filterPromise.resolveNow(null,function(t){return t});!function(e){if(!e.isPrimary())return!0;var n=!t.columnModel.isPivotActive();return!(!e.isValueActive()||!n)&&(!!t.columnModel.isPivotMode()||o)}(n.column)?t.activeColumnFilters.push(r):t.activeAggregateFilters.push(r)}})},e.prototype.updateFilterFlagInColumns=function(t,e){this.allColumnFilters.forEach(function(o){var n=o.filterPromise.resolveNow(!1,function(t){return t.isFilterActive()});o.column.setFilterActive(n,t,e)})},e.prototype.isAnyFilterPresent=function(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()},e.prototype.doColumnFiltersPass=function(t,e,o){for(var n=t.data,r=t.aggData,i=o?this.activeAggregateFilters:this.activeColumnFilters,a=o?r:n,s=0;s<i.length;s++){var l=i[s];if(null!=l&&l!==e){if("function"!==typeof l.doesFilterPass)throw new Error("Filter is missing method doesFilterPass");if(!l.doesFilterPass({node:t,data:a}))return!1}}return!0},e.prototype.resetQuickFilterCache=function(){this.quickFilterService.resetQuickFilterCache()},e.prototype.refreshFiltersForAggregations=function(){this.gridOptionsService.getGroupAggFiltering()&&this.onFilterChanged()},e.prototype.callOnFilterChangedOutsideRenderCycle=function(t){var e=this,o=function(){return e.onFilterChanged(t)};this.rowRenderer.isRefreshInProgress()?setTimeout(o,0):o()},e.prototype.onFilterChanged=function(t){void 0===t&&(t={});var e=t.source,o=t.filterInstance,n=t.additionalEventAttributes,r=t.columns;this.updateDependantFilters(),this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",n),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.allColumnFilters.forEach(function(t){t.filterPromise&&t.filterPromise.then(function(t){t&&t!==o&&t.onAnyFilterChanged&&t.onAnyFilterChanged()})});var i={source:e,type:qt.EVENT_FILTER_CHANGED,columns:r||[]};n&&_(i,n),this.processingFilterChange=!0,this.eventService.dispatchEvent(i),this.processingFilterChange=!1},e.prototype.isSuppressFlashingCellsBecauseFiltering=function(){var t;return!(null!==(t=this.gridOptionsService.get("allowShowChangeAfterFilter"))&&void 0!==t&&t)&&this.processingFilterChange},e.prototype.isQuickFilterPresent=function(){return this.quickFilterService.isQuickFilterPresent()},e.prototype.updateAggFiltering=function(){this.aggFiltering=!!this.gridOptionsService.getGroupAggFiltering()},e.prototype.isAggregateQuickFilterPresent=function(){return this.isQuickFilterPresent()&&(this.aggFiltering||this.columnModel.isPivotMode())},e.prototype.isNonAggregateQuickFilterPresent=function(){return this.isQuickFilterPresent()&&!(this.aggFiltering||this.columnModel.isPivotMode())},e.prototype.doesRowPassOtherFilters=function(t,e){return this.doesRowPassFilter({rowNode:e,filterInstanceToSkip:t})},e.prototype.doesRowPassAggregateFilters=function(t){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(t.rowNode))&&!(this.isAggregateFilterPresent()&&!this.doAggregateFiltersPass(t.rowNode,t.filterInstanceToSkip))},e.prototype.doesRowPassFilter=function(t){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(t.rowNode))&&(!(this.isExternalFilterPresent()&&!this.doesExternalFilterPass(t.rowNode))&&(!(this.isColumnFilterPresent()&&!this.doColumnFiltersPass(t.rowNode,t.filterInstanceToSkip))&&!(this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(t.rowNode))))},e.prototype.onNewRowsLoaded=function(t){this.allColumnFilters.forEach(function(t){t.filterPromise.then(function(t){t.onNewRowsLoaded&&t.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(t,{afterDataChange:!0}),this.updateActiveFilters()},e.prototype.createValueGetter=function(t){var e=this;return function(o){var n=o.node;return e.valueService.getValue(t,n,!0)}},e.prototype.createGetValue=function(t){var e=this;return function(o,n){var r=n?e.columnModel.getGridColumn(n):t;return r?e.valueService.getValue(r,o,!0):void 0}},e.prototype.getFilterComponent=function(t,e,o){var n;if(void 0===o&&(o=!0),o)return(null===(n=this.getOrCreateFilterWrapper(t,e))||void 0===n?void 0:n.filterPromise)||null;var r=this.cachedFilter(t);return r?r.filterPromise:null},e.prototype.isFilterActive=function(t){var e=this.cachedFilter(t);return!!e&&e.filterPromise.resolveNow(!1,function(t){return t.isFilterActive()})},e.prototype.getOrCreateFilterWrapper=function(t,e){if(!t.isFilterAllowed())return null;var o=this.cachedFilter(t);return o?"NO_UI"!==e&&this.putIntoGui(o,e):(o=this.createFilterWrapper(t,e),this.setColumnFilterWrapper(t,o)),o},e.prototype.cachedFilter=function(t){return this.allColumnFilters.get(t.getColId())},e.prototype.getDefaultFilter=function(t){var e;if(j.__isRegistered(V.SetFilterModule,this.context.getGridId()))e="agSetColumnFilter";else{var o=this.dataTypeService.getBaseDataType(t);e="number"===o?"agNumberColumnFilter":"date"===o||"dateString"===o?"agDateColumnFilter":"agTextColumnFilter"}return e},e.prototype.getDefaultFloatingFilter=function(t){var e;if(j.__isRegistered(V.SetFilterModule,this.context.getGridId()))e="agSetColumnFloatingFilter";else{var o=this.dataTypeService.getBaseDataType(t);e="number"===o?"agNumberColumnFloatingFilter":"date"===o||"dateString"===o?"agDateColumnFloatingFilter":"agTextColumnFloatingFilter"}return e},e.prototype.createFilterInstance=function(t){var e,o=this,n=this.getDefaultFilter(t),r=t.getColDef(),i=Sl(Sl({},this.createFilterParams(t,r)),{filterModifiedCallback:function(){return o.filterModifiedCallbackFactory(e,t)()},filterChangedCallback:function(n){return o.filterChangedCallbackFactory(e,t)(n)},doesRowPassOtherFilter:function(t){return o.doesRowPassOtherFilters(e,t)}}),a=this.userComponentFactory.getFilterDetails(r,i,n);return a?{filterPromise:function(){var t=a.newAgStackInstance();return t&&t.then(function(t){return e=t}),t},compDetails:a}:{filterPromise:null,compDetails:null}},e.prototype.createFilterParams=function(t,e){return this.gridOptionsService.addGridCommonParams({column:t,colDef:v(e),rowModel:this.rowModel,filterChangedCallback:function(){},filterModifiedCallback:function(){},valueGetter:this.createValueGetter(t),getValue:this.createGetValue(t),doesRowPassOtherFilter:function(){return!0}})},e.prototype.createFilterWrapper=function(t,e){var o,n={column:t,filterPromise:null,compiledElement:null,guiPromise:hr.resolve(null),compDetails:null},r=this.createFilterInstance(t),i=r.filterPromise,a=r.compDetails;return n.filterPromise=null!==(o=null===i||void 0===i?void 0:i())&&void 0!==o?o:null,n.compDetails=a,i&&this.putIntoGui(n,e),n},e.prototype.putIntoGui=function(t,e){var o=this,n=document.createElement("div");n.className="ag-filter",t.guiPromise=new hr(function(i){t.filterPromise.then(function(a){var s=a.getGui();r(s)||console.warn("AG Grid: getGui method from filter returned ".concat(s,", it should be a DOM element or an HTML template string.")),"string"===typeof s&&(s=yn(s)),n.appendChild(s),i(n);var l={type:qt.EVENT_FILTER_OPENED,column:t.column,source:e,eGui:n};o.eventService.dispatchEvent(l)})})},e.prototype.onColumnsChanged=function(){var t=this,e=[];this.allColumnFilters.forEach(function(o,n){(o.column.isPrimary()?t.columnModel.getPrimaryColumn(n):t.columnModel.getGridColumn(n))||(e.push(o.column),t.disposeFilterWrapper(o,"columnChanged"),t.disposeColumnListener(n))}),e.length>0?this.onFilterChanged({columns:e,source:"api"}):this.updateDependantFilters()},e.prototype.updateDependantFilters=function(){var t=this,e=this.columnModel.getGroupAutoColumns();null===e||void 0===e||e.forEach(function(e){"agGroupColumnFilter"===e.getColDef().filter&&t.getOrCreateFilterWrapper(e,"NO_UI")})},e.prototype.isFilterAllowed=function(t){var e,o;if(this.isAdvancedFilterEnabled())return!1;if(!t.isFilterAllowed())return!1;var n=this.allColumnFilters.get(t.getColId());return null===(o=null===(e=null===n||void 0===n?void 0:n.filterPromise)||void 0===e?void 0:e.resolveNow(!0,function(t){return"function"!==typeof(null===t||void 0===t?void 0:t.isFilterAllowed)||(null===t||void 0===t?void 0:t.isFilterAllowed())}))||void 0===o||o},e.prototype.getFloatingFilterCompDetails=function(t,e){var o=this,n=function(e){var n=o.getFilterComponent(t,"NO_UI");null!=n&&n.then(function(t){e(yl(t))})},r=t.getColDef(),i=Sl(Sl({},this.createFilterParams(t,r)),{filterChangedCallback:function(){return n(function(e){return o.filterChangedCallbackFactory(e,t)()})}}),a=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(r,Ks,i),s=this.userComponentFactory.getDefaultFloatingFilterType(r,function(){return o.getDefaultFloatingFilter(t)});null==s&&(s="agReadOnlyFloatingFilter");var l={column:t,filterParams:a,currentParentModel:function(){return o.getCurrentFloatingFilterParentModel(t)},parentFilterInstance:n,showParentFilter:e,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(r,l,s)},e.prototype.getCurrentFloatingFilterParentModel=function(t){var e=this.getFilterComponent(t,"NO_UI",!1);return e?e.resolveNow(null,function(t){return t&&t.getModel()}):null},e.prototype.destroyFilter=function(t,e){void 0===e&&(e="api");var o=t.getColId(),n=this.allColumnFilters.get(o);this.disposeColumnListener(o),delete this.initialFilterModel[o],n&&(this.disposeFilterWrapper(n,e),this.onFilterChanged({columns:[t],source:"api"}))},e.prototype.disposeColumnListener=function(t){var e=this.allColumnListeners.get(t);e&&(this.allColumnListeners.delete(t),e())},e.prototype.disposeFilterWrapper=function(t,e){var o=this;t.filterPromise.then(function(n){o.getContext().destroyBean(n),t.column.setFilterActive(!1,"filterDestroyed"),o.allColumnFilters.delete(t.column.getColId());var r={type:qt.EVENT_FILTER_DESTROYED,source:e,column:t.column};o.eventService.dispatchEvent(r)})},e.prototype.filterModifiedCallbackFactory=function(t,e){var o=this;return function(){var n={type:qt.EVENT_FILTER_MODIFIED,column:e,filterInstance:t};o.eventService.dispatchEvent(n)}},e.prototype.filterChangedCallbackFactory=function(t,e){var o=this;return function(n){var r,i=null!==(r=null===n||void 0===n?void 0:n.source)&&void 0!==r?r:"api",a={filter:t,additionalEventAttributes:n,columns:[e],source:i};o.callOnFilterChangedOutsideRenderCycle(a)}},e.prototype.checkDestroyFilter=function(t){var e=this,o=this.allColumnFilters.get(t);if(o){var n=o.column,r=(n.isFilterAllowed()?this.createFilterInstance(n):{compDetails:null}).compDetails;if(this.areFilterCompsDifferent(o.compDetails,r))this.destroyFilter(n,"paramsUpdated");else{var i=n.getColDef().filterParams;o.filterPromise?o.filterPromise.then(function(t){!1===(null===t||void 0===t||!t.refresh||t.refresh(Sl(Sl(Sl({},e.createFilterParams(n,n.getColDef())),{filterModifiedCallback:e.filterModifiedCallbackFactory(t,n),filterChangedCallback:e.filterChangedCallbackFactory(t,n),doesRowPassOtherFilter:function(o){return e.doesRowPassOtherFilters(t,o)}}),i)))&&e.destroyFilter(n,"paramsUpdated")}):this.destroyFilter(n,"paramsUpdated")}}},e.prototype.setColumnFilterWrapper=function(t,e){var o=this,n=t.getColId();this.allColumnFilters.set(n,e),this.allColumnListeners.set(n,this.addManagedListener(t,ct.EVENT_COL_DEF_CHANGED,function(){return o.checkDestroyFilter(n)}))},e.prototype.areFilterCompsDifferent=function(t,e){if(!e||!t)return!0;var o=t.componentClass,n=e.componentClass;return!(o===n||(null===o||void 0===o?void 0:o.render)&&(null===n||void 0===n?void 0:n.render)&&o.render===n.render)},e.prototype.getAdvancedFilterModel=function(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null},e.prototype.setAdvancedFilterModel=function(t){this.isAdvancedFilterEnabled()&&(this.dataTypeService.isPendingInference()?this.advancedFilterModelUpdateQueue.push(t):(this.advancedFilterService.setModel(null!==t&&void 0!==t?t:null),this.onFilterChanged({source:"advancedFilter"})))},e.prototype.showAdvancedFilterBuilder=function(t){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder(t,!0)},e.prototype.updateAdvancedFilterColumns=function(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})},e.prototype.hasFloatingFilters=function(){return!this.isAdvancedFilterEnabled()&&this.columnModel.getAllGridColumns().some(function(t){return t.getColDef().floatingFilter})},e.prototype.getFilterInstance=function(t,e){if(!this.isAdvancedFilterEnabled()){var o=this.getFilterInstanceImpl(t,function(t){if(e){var o=yl(t);e(o)}});return yl(o)}this.warnAdvancedFilters()},e.prototype.getColumnFilterInstance=function(t){var e=this;return new Promise(function(o){e.getFilterInstance(t,function(t){o(t)})})},e.prototype.getFilterInstanceImpl=function(t,e){var o=this.columnModel.getPrimaryColumn(t);if(o){var n=this.getFilterComponent(o,"NO_UI"),r=n&&n.resolveNow(null,function(t){return t});return r?setTimeout(e,0,r):n&&n.then(function(t){e(t)}),r}},e.prototype.warnAdvancedFilters=function(){O("Column Filter API methods have been disabled as Advanced Filters are enabled.")},e.prototype.setupAdvancedFilterHeaderComp=function(t){var e;null===(e=this.advancedFilterService)||void 0===e||e.getCtrl().setupHeaderComp(t)},e.prototype.getHeaderRowCount=function(){return this.isAdvancedFilterHeaderActive()?1:0},e.prototype.getHeaderHeight=function(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0},e.prototype.processFilterModelUpdateQueue=function(){var t=this;this.filterModelUpdateQueue.forEach(function(e){var o=e.model,n=e.source;return t.setFilterModel(o,n)}),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(function(e){var o=e.key,n=e.model,r=e.resolve;t.setColumnFilterModel(o,n).then(function(){return r()})}),this.columnFilterModelUpdateQueue=[],this.advancedFilterModelUpdateQueue.forEach(function(e){return t.setAdvancedFilterModel(e)}),this.advancedFilterModelUpdateQueue=[]},e.prototype.getColumnFilterModel=function(t){var e=this.getFilterWrapper(t);return e?this.getModelFromFilterWrapper(e):null},e.prototype.setColumnFilterModel=function(t,e){if(this.isAdvancedFilterEnabled())return this.warnAdvancedFilters(),Promise.resolve();if(this.dataTypeService.isPendingInference()){var o=function(){},n=new Promise(function(t){o=t});return this.columnFilterModelUpdateQueue.push({key:t,model:e,resolve:o}),n}var r=this.columnModel.getPrimaryColumn(t),i=r?this.getOrCreateFilterWrapper(r,"NO_UI"):null;return i?function(t){return new Promise(function(e){t.then(function(t){return e(t)})})}(this.setModelOnFilterWrapper(i.filterPromise,e)):Promise.resolve()},e.prototype.getFilterWrapper=function(t){var e,o=this.columnModel.getPrimaryColumn(t);return o&&null!==(e=this.cachedFilter(o))&&void 0!==e?e:null},e.prototype.destroy=function(){var e=this;t.prototype.destroy.call(this),this.allColumnFilters.forEach(function(t){return e.disposeFilterWrapper(t,"gridDestroyed")}),this.allColumnListeners.clear()},El([J("valueService")],e.prototype,"valueService",void 0),El([J("columnModel")],e.prototype,"columnModel",void 0),El([J("rowModel")],e.prototype,"rowModel",void 0),El([J("userComponentFactory")],e.prototype,"userComponentFactory",void 0),El([J("rowRenderer")],e.prototype,"rowRenderer",void 0),El([J("dataTypeService")],e.prototype,"dataTypeService",void 0),El([J("quickFilterService")],e.prototype,"quickFilterService",void 0),El([Q("advancedFilterService")],e.prototype,"advancedFilterService",void 0),El([Y],e.prototype,"init",null),e=El([X("filterManager")],e)}(Bt),Tl=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ol=function(t){function e(e,o){var n=t.call(this,e)||this;return n.ctrl=o,n}return Tl(e,t),e.prototype.getCtrl=function(){return this.ctrl},e}(Sr),Rl=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Pl=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Al=function(t){function e(o){return t.call(this,e.TEMPLATE,o)||this}return Rl(e,t),e.prototype.postConstruct=function(){var t=this,e=this.getGui(),o={addOrRemoveCssClass:function(e,o){return t.addOrRemoveCssClass(e,o)},addOrRemoveBodyCssClass:function(e,o){return t.eFloatingFilterBody.classList.toggle(e,o)},setButtonWrapperDisplayed:function(e){return Qo(t.eButtonWrapper,e)},setCompDetails:function(e){return t.setCompDetails(e)},getFloatingFilterComp:function(){return t.compPromise},setWidth:function(t){return e.style.width=t},setMenuIcon:function(e){return t.eButtonShowMainFilter.appendChild(e)}};this.ctrl.setComp(o,e,this.eButtonShowMainFilter,this.eFloatingFilterBody)},e.prototype.setCompDetails=function(t){var e=this;if(!t)return this.destroyFloatingFilterComp(),void(this.compPromise=null);this.compPromise=t.newAgStackInstance(),this.compPromise.then(function(t){return e.afterCompCreated(t)})},e.prototype.destroyFloatingFilterComp=function(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))},e.prototype.afterCompCreated=function(t){t&&(this.isAlive()?(this.destroyFloatingFilterComp(),this.floatingFilterComp=t,this.eFloatingFilterBody.appendChild(t.getGui()),t.afterGuiAttached&&t.afterGuiAttached()):this.destroyBean(t))},e.TEMPLATE='<div class="ag-header-cell ag-floating-filter" role="gridcell">\n            <div ref="eFloatingFilterBody" role="presentation"></div>\n            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">\n                <button type="button" class="ag-button ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>\n            </div>\n        </div>',Pl([xr("eFloatingFilterBody")],e.prototype,"eFloatingFilterBody",void 0),Pl([xr("eButtonWrapper")],e.prototype,"eButtonWrapper",void 0),Pl([xr("eButtonShowMainFilter")],e.prototype,"eButtonShowMainFilter",void 0),Pl([Y],e.prototype,"postConstruct",null),Pl([Z],e.prototype,"destroyFloatingFilterComp",null),e}(Ol),Dl=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ml=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};!function(t){t.AUTO_HEIGHT="ag-layout-auto-height",t.NORMAL="ag-layout-normal",t.PRINT="ag-layout-print"}(vl||(vl={}));var Il,Ll,Fl=function(t){function e(e){var o=t.call(this)||this;return o.view=e,o}return Dl(e,t),e.prototype.postConstruct=function(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()},e.prototype.updateLayoutClasses=function(){var t=this.getDomLayout(),e={autoHeight:"autoHeight"===t,normal:"normal"===t,print:"print"===t},o=e.autoHeight?vl.AUTO_HEIGHT:e.print?vl.PRINT:vl.NORMAL;this.view.updateLayoutClasses(o,e)},e.prototype.getDomLayout=function(){var t,e=null!==(t=this.gridOptionsService.get("domLayout"))&&void 0!==t?t:"normal";return-1===["normal","print","autoHeight"].indexOf(e)?(O("".concat(e," is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.")),"normal"):e},Ml([Y],e.prototype,"postConstruct",null),e}(Bt),Nl=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),kl=function(){return(kl=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Gl=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};!function(t){t[t.Vertical=0]="Vertical",t[t.Horizontal=1]="Horizontal"}(Il||(Il={})),function(t){t[t.Container=0]="Container",t[t.FakeContainer=1]="FakeContainer"}(Ll||(Ll={}));var Vl,Bl=function(t){function e(e){var o=t.call(this)||this;return o.lastScrollSource=[null,null],o.scrollLeft=-1,o.nextScrollTop=-1,o.scrollTop=-1,o.lastOffsetHeight=-1,o.lastScrollTop=-1,o.eBodyViewport=e,o.resetLastHScrollDebounced=N(function(){return o.lastScrollSource[Il.Horizontal]=null},500),o.resetLastVScrollDebounced=N(function(){return o.lastScrollSource[Il.Vertical]=null},500),o}return Nl(e,t),e.prototype.postConstruct=function(){var t=this;this.enableRtl=this.gridOptionsService.get("enableRtl"),this.addManagedListener(this.eventService,qt.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady(function(e){t.centerRowContainerCtrl=e.centerRowContainerCtrl,t.onDisplayedColumnsWidthChanged(),t.addScrollListener()})},e.prototype.addScrollListener=function(){var t=this.ctrlsService.getFakeHScrollComp(),e=this.ctrlsService.getFakeVScrollComp();this.addManagedListener(this.centerRowContainerCtrl.getViewportElement(),"scroll",this.onHScroll.bind(this)),t.onScrollCallback(this.onFakeHScroll.bind(this));var o=this.gridOptionsService.get("debounceVerticalScrollbar"),n=o?N(this.onVScroll.bind(this),100):this.onVScroll.bind(this),r=o?N(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",n),e.onScrollCallback(r)},e.prototype.onDisplayedColumnsWidthChanged=function(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()},e.prototype.horizontallyScrollHeaderCenterAndFloatingCenter=function(t){if(!(null==this.centerRowContainerCtrl)){void 0===t&&(t=this.centerRowContainerCtrl.getCenterViewportScrollLeft());var e=this.enableRtl?t:-t,o=this.ctrlsService.getTopCenterRowContainerCtrl(),n=this.ctrlsService.getStickyTopCenterRowContainerCtrl(),r=this.ctrlsService.getBottomCenterRowContainerCtrl(),i=this.ctrlsService.getFakeHScrollComp();this.ctrlsService.getHeaderRowContainerCtrl().setHorizontalScroll(-e),r.setContainerTranslateX(e),o.setContainerTranslateX(e),n.setContainerTranslateX(e);var a=this.centerRowContainerCtrl.getViewportElement(),s=this.lastScrollSource[Il.Horizontal]===Ll.Container;t=Math.abs(t),s?i.setScrollPosition(t):pn(a,t,this.enableRtl)}},e.prototype.isControllingScroll=function(t,e){return null==this.lastScrollSource[e]?(this.lastScrollSource[e]=t,!0):this.lastScrollSource[e]===t},e.prototype.onFakeHScroll=function(){this.isControllingScroll(Ll.FakeContainer,Il.Horizontal)&&this.onHScrollCommon(Ll.FakeContainer)},e.prototype.onHScroll=function(){this.isControllingScroll(Ll.Container,Il.Horizontal)&&this.onHScrollCommon(Ll.Container)},e.prototype.onHScrollCommon=function(t){var e,o=this.centerRowContainerCtrl.getViewportElement(),n=o.scrollLeft;this.shouldBlockScrollUpdate(Il.Horizontal,n,!0)||(e=t===Ll.Container?cn(o,this.enableRtl):this.ctrlsService.getFakeHScrollComp().getScrollPosition(),this.doHorizontalScroll(Math.round(e)),this.resetLastHScrollDebounced())},e.prototype.onFakeVScroll=function(){this.isControllingScroll(Ll.FakeContainer,Il.Vertical)&&this.onVScrollCommon(Ll.FakeContainer)},e.prototype.onVScroll=function(){this.isControllingScroll(Ll.Container,Il.Vertical)&&this.onVScrollCommon(Ll.Container)},e.prototype.onVScrollCommon=function(t){var e;e=t===Ll.Container?this.eBodyViewport.scrollTop:this.ctrlsService.getFakeVScrollComp().getScrollPosition(),this.shouldBlockScrollUpdate(Il.Vertical,e,!0)||(this.animationFrameService.setScrollTop(e),this.nextScrollTop=e,t===Ll.Container?this.ctrlsService.getFakeVScrollComp().setScrollPosition(e):this.eBodyViewport.scrollTop=e,this.gridOptionsService.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())},e.prototype.doHorizontalScroll=function(t){var e=this.ctrlsService.getFakeHScrollComp().getScrollPosition();this.scrollLeft===t&&t===e||(this.scrollLeft=t,this.fireScrollEvent(Il.Horizontal),this.horizontallyScrollHeaderCenterAndFloatingCenter(t),this.centerRowContainerCtrl.onHorizontalViewportChanged(!0))},e.prototype.fireScrollEvent=function(t){var e=this,o={type:qt.EVENT_BODY_SCROLL,direction:t===Il.Horizontal?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(o),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(function(){var t=kl(kl({},o),{type:qt.EVENT_BODY_SCROLL_END});e.eventService.dispatchEvent(t)},100)},e.prototype.shouldBlockScrollUpdate=function(t,e,o){return void 0===o&&(o=!1),!(o&&!To())&&(t===Il.Vertical?this.shouldBlockVerticalScroll(e):this.shouldBlockHorizontalScroll(e))},e.prototype.shouldBlockVerticalScroll=function(t){var e=nn(this.eBodyViewport),o=this.eBodyViewport.scrollHeight;return t<0||t+e>o},e.prototype.shouldBlockHorizontalScroll=function(t){var e=this.centerRowContainerCtrl.getCenterWidth(),o=this.centerRowContainerCtrl.getViewportElement().scrollWidth;if(this.enableRtl&&un()){if(t>0)return!0}else if(t<0)return!0;return Math.abs(t)+e>o},e.prototype.redrawRowsAfterScroll=function(){this.fireScrollEvent(Il.Vertical)},e.prototype.checkScrollLeft=function(){this.scrollLeft!==this.centerRowContainerCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(Ll.Container)},e.prototype.scrollGridIfNeeded=function(){var t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),t},e.prototype.setHorizontalScrollPosition=function(t,e){void 0===e&&(e=!1);var o=this.centerRowContainerCtrl.getViewportElement().scrollWidth-this.centerRowContainerCtrl.getCenterWidth();!e&&this.shouldBlockScrollUpdate(Il.Horizontal,t)&&(t=this.enableRtl&&un()?t>0?0:o:Math.min(Math.max(t,0),o)),pn(this.centerRowContainerCtrl.getViewportElement(),Math.abs(t),this.enableRtl),this.doHorizontalScroll(t)},e.prototype.setVerticalScrollPosition=function(t){this.eBodyViewport.scrollTop=t},e.prototype.getVScrollPosition=function(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}},e.prototype.getApproximateVScollPosition=function(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()},e.prototype.getHScrollPosition=function(){return this.centerRowContainerCtrl.getHScrollPosition()},e.prototype.isHorizontalScrollShowing=function(){return this.centerRowContainerCtrl.isHorizontalScrollShowing()},e.prototype.scrollHorizontally=function(t){var e=this.centerRowContainerCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(e+t),this.centerRowContainerCtrl.getViewportElement().scrollLeft-e},e.prototype.scrollToTop=function(){this.eBodyViewport.scrollTop=0},e.prototype.ensureNodeVisible=function(t,e){void 0===e&&(e=null);for(var o=this.rowModel.getRowCount(),n=-1,r=0;r<o;r++){var i=this.rowModel.getRow(r);if("function"===typeof t){if(i&&t(i)){n=r;break}}else if(t===i||t===i.data){n=r;break}}n>=0&&this.ensureIndexVisible(n,e)},e.prototype.ensureIndexVisible=function(t,e){var o=this;if(!this.gridOptionsService.isDomLayout("print")){var n=this.paginationProxy.getRowCount();if("number"!==typeof t||t<0||t>=n)console.warn("AG Grid: Invalid row index for ensureIndexVisible: "+t);else{var r=this.gridOptionsService.get("pagination")&&!this.gridOptionsService.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(function(){r||o.paginationProxy.goToPageWithIndex(t);var n,i=o.ctrlsService.getGridBodyCtrl().getStickyTopHeight(),a=o.paginationProxy.getRow(t);do{var s=a.rowTop,l=a.rowHeight,u=o.paginationProxy.getPixelOffset(),c=a.rowTop-u,p=c+a.rowHeight,d=o.getVScrollPosition(),h=o.heightScaler.getDivStretchOffset(),f=d.top+h,g=d.bottom+h,y=g-f,v=o.heightScaler.getScrollPositionForPixel(c),m=o.heightScaler.getScrollPositionForPixel(p-y),C=Math.min((v+m)/2,c),_=null;"top"===e?_=v:"bottom"===e?_=m:"middle"===e?_=C:f+i>c?_=v-i:g<p&&(_=m),null!==_&&(o.setVerticalScrollPosition(_),o.rowRenderer.redraw({afterScroll:!0})),n=s!==a.rowTop||l!==a.rowHeight}while(n);o.animationFrameService.flushAllFrames()})}}},e.prototype.ensureColumnVisible=function(t,e){var o=this;void 0===e&&(e="auto");var n=this.columnModel.getGridColumn(t);if(n&&!n.isPinned()&&this.columnModel.isColumnDisplayed(n)){var r=this.getPositionedHorizontalScroll(n,e);this.getFrameworkOverrides().wrapIncoming(function(){null!==r&&o.centerRowContainerCtrl.setCenterViewportScrollLeft(r),o.centerRowContainerCtrl.onHorizontalViewportChanged(),o.animationFrameService.flushAllFrames()})}},e.prototype.setScrollPosition=function(t,e){var o=this;this.getFrameworkOverrides().wrapIncoming(function(){o.centerRowContainerCtrl.setCenterViewportScrollLeft(e),o.setVerticalScrollPosition(t),o.rowRenderer.redraw({afterScroll:!0}),o.animationFrameService.flushAllFrames()})},e.prototype.getPositionedHorizontalScroll=function(t,e){var o=this.isColumnOutsideViewport(t),n=o.columnBeforeStart,r=o.columnAfterEnd,i=this.centerRowContainerCtrl.getCenterWidth()<t.getActualWidth(),a=this.centerRowContainerCtrl.getCenterWidth(),s=this.enableRtl,l=(s?n:r)||i,u=s?r:n;"auto"!==e&&(l="start"===e,u="end"===e);var c="middle"===e;if(l||u||c){var p=this.getColumnBounds(t),d=p.colLeft,h=p.colMiddle,f=p.colRight;return c?h-a/2:l?s?f:d:s?d-a:f-a}return null},e.prototype.isColumnOutsideViewport=function(t){var e=this.getViewportBounds(),o=e.start,n=e.end,r=this.getColumnBounds(t),i=r.colLeft,a=r.colRight,s=this.enableRtl;return{columnBeforeStart:s?o>a:n<a,columnAfterEnd:s?n<i:o>i}},e.prototype.getColumnBounds=function(t){var e=this.enableRtl,o=this.columnModel.getBodyContainerWidth(),n=t.getActualWidth(),r=t.getLeft(),i=e?-1:1,a=e?o-r:r;return{colLeft:a,colMiddle:a+n/2*i,colRight:a+n*i}},e.prototype.getViewportBounds=function(){var t=this.centerRowContainerCtrl.getCenterWidth(),e=this.centerRowContainerCtrl.getCenterViewportScrollLeft();return{start:e,end:t+e,width:t}},Gl([J("ctrlsService")],e.prototype,"ctrlsService",void 0),Gl([J("animationFrameService")],e.prototype,"animationFrameService",void 0),Gl([J("paginationProxy")],e.prototype,"paginationProxy",void 0),Gl([J("rowModel")],e.prototype,"rowModel",void 0),Gl([J("rowContainerHeightService")],e.prototype,"heightScaler",void 0),Gl([J("rowRenderer")],e.prototype,"rowRenderer",void 0),Gl([J("columnModel")],e.prototype,"columnModel",void 0),Gl([Y],e.prototype,"postConstruct",null),e}(Bt),zl=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Hl=function(){return(Hl=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},jl=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Ul=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},Wl=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},Kl=function(t){function e(e){var o=t.call(this)||this;return o.isMultiRowDrag=!1,o.eContainer=e,o}return zl(e,t),e.prototype.postConstruct=function(){var t=this;this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(function(){var e=t.ctrlsService.getGridBodyCtrl();t.autoScrollService=new cl({scrollContainer:e.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:function(){return e.getScrollFeature().getVScrollPosition().top},setVerticalPosition:function(t){return e.getScrollFeature().setVerticalScrollPosition(t)},onScrollCallback:function(){t.onDragging(t.lastDraggingEvent)}})})},e.prototype.getContainer=function(){return this.eContainer},e.prototype.isInterestedIn=function(t){return t===Ba.RowDrag},e.prototype.getIconName=function(){return this.gridOptionsService.get("rowDragManaged")&&this.shouldPreventRowMove()?Wa.ICON_NOT_ALLOWED:Wa.ICON_MOVE},e.prototype.shouldPreventRowMove=function(){return!!this.columnModel.getRowGroupColumns().length||(!!this.filterManager.isAnyFilterPresent()||!!this.sortController.isSortActive())},e.prototype.getRowNodes=function(t){var e=this;if(!this.isFromThisGrid(t))return t.dragItem.rowNodes||[];var o=this.gridOptionsService.get("rowDragMultiRow"),n=Wl([],Ul(this.selectionService.getSelectedNodes()),!1).sort(function(t,o){return null==t.rowIndex||null==o.rowIndex?0:e.getRowIndexNumber(t)-e.getRowIndexNumber(o)}),r=t.dragItem.rowNode;return o&&-1!==n.indexOf(r)?(this.isMultiRowDrag=!0,n):(this.isMultiRowDrag=!1,[r])},e.prototype.onDragEnter=function(t){t.dragItem.rowNodes=this.getRowNodes(t),this.dispatchGridEvent(qt.EVENT_ROW_DRAG_ENTER,t),this.getRowNodes(t).forEach(function(t){t.setDragging(!0)}),this.onEnterOrDragging(t)},e.prototype.onDragging=function(t){this.onEnterOrDragging(t)},e.prototype.isFromThisGrid=function(t){return t.dragSource.dragSourceDomDataKey===this.gridOptionsService.getDomDataKey()},e.prototype.isDropZoneWithinThisGrid=function(t){var e=this.ctrlsService.getGridBodyCtrl().getGui(),o=t.dropZoneTarget;return!e.contains(o)},e.prototype.onEnterOrDragging=function(t){this.dispatchGridEvent(qt.EVENT_ROW_DRAG_MOVE,t),this.lastDraggingEvent=t;var e=this.mouseEventService.getNormalisedPosition(t).y;this.gridOptionsService.get("rowDragManaged")&&this.doManagedDrag(t,e),this.autoScrollService.check(t.event)},e.prototype.doManagedDrag=function(t,e){var o=this.isFromThisGrid(t),n=this.gridOptionsService.get("rowDragManaged"),r=t.dragItem.rowNodes;n&&this.shouldPreventRowMove()||(this.gridOptionsService.get("suppressMoveWhenRowDragging")||!o?this.isDropZoneWithinThisGrid(t)||this.clientSideRowModel.highlightRowAtPixel(r[0],e):this.moveRows(r,e))},e.prototype.getRowIndexNumber=function(t){return parseInt(ft(t.getRowIndexString().split("-")),10)},e.prototype.moveRowAndClearHighlight=function(t){var e=this,o=this.clientSideRowModel.getLastHighlightedRowNode(),n=o&&o.highlighted===al.Below,r=this.mouseEventService.getNormalisedPosition(t).y,i=t.dragItem.rowNodes,a=n?1:0;if(this.isFromThisGrid(t))i.forEach(function(t){t.rowTop<r&&(a-=1)}),this.moveRows(i,r,a);else{var s=this.gridOptionsService.getCallback("getRowId"),l=this.clientSideRowModel.getRowIndexAtPixel(r)+1;this.clientSideRowModel.getHighlightPosition(r)===al.Above&&l--,this.clientSideRowModel.updateRowData({add:i.map(function(t){return t.data}).filter(function(t){return!e.clientSideRowModel.getRowNode(s?s({data:t,level:0}):t.id)}),addIndex:l})}this.clearRowHighlight()},e.prototype.clearRowHighlight=function(){this.clientSideRowModel.highlightRowAtPixel(null)},e.prototype.moveRows=function(t,e,o){void 0===o&&(o=0),this.clientSideRowModel.ensureRowsAtPixel(t,e,o)&&(this.focusService.clearFocusedCell(),this.rangeService&&this.rangeService.removeAllCellRanges())},e.prototype.addRowDropZone=function(t){var e=this;if(t.getContainer())if(this.dragAndDropService.findExternalZone(t))console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");else{var o={getContainer:t.getContainer};t.fromGrid?(t.fromGrid=void 0,o=t):(t.onDragEnter&&(o.onDragEnter=function(o){t.onDragEnter(e.draggingToRowDragEvent(qt.EVENT_ROW_DRAG_ENTER,o))}),t.onDragLeave&&(o.onDragLeave=function(o){t.onDragLeave(e.draggingToRowDragEvent(qt.EVENT_ROW_DRAG_LEAVE,o))}),t.onDragging&&(o.onDragging=function(o){t.onDragging(e.draggingToRowDragEvent(qt.EVENT_ROW_DRAG_MOVE,o))}),t.onDragStop&&(o.onDragStop=function(o){t.onDragStop(e.draggingToRowDragEvent(qt.EVENT_ROW_DRAG_END,o))})),this.dragAndDropService.addDropTarget(Hl({isInterestedIn:function(t){return t===Ba.RowDrag},getIconName:function(){return Wa.ICON_MOVE},external:!0},o))}else O("addRowDropZone - A container target needs to be provided")},e.prototype.getRowDropZone=function(t){var e=this,o=this.getContainer.bind(this),n=this.onDragEnter.bind(this),r=this.onDragLeave.bind(this),i=this.onDragging.bind(this),a=this.onDragStop.bind(this);return t?{getContainer:o,onDragEnter:t.onDragEnter?function(o){n(o),t.onDragEnter(e.draggingToRowDragEvent(qt.EVENT_ROW_DRAG_ENTER,o))}:n,onDragLeave:t.onDragLeave?function(o){r(o),t.onDragLeave(e.draggingToRowDragEvent(qt.EVENT_ROW_DRAG_LEAVE,o))}:r,onDragging:t.onDragging?function(o){i(o),t.onDragging(e.draggingToRowDragEvent(qt.EVENT_ROW_DRAG_MOVE,o))}:i,onDragStop:t.onDragStop?function(o){a(o),t.onDragStop(e.draggingToRowDragEvent(qt.EVENT_ROW_DRAG_END,o))}:a,fromGrid:!0}:{getContainer:o,onDragEnter:n,onDragLeave:r,onDragging:i,onDragStop:a,fromGrid:!0}},e.prototype.draggingToRowDragEvent=function(t,e){var o,n,r=this.mouseEventService.getNormalisedPosition(e).y,i=-1;switch(r>this.paginationProxy.getCurrentPageHeight()||(i=this.rowModel.getRowIndexAtPixel(r),o=this.rowModel.getRow(i)),e.vDirection){case Hi.Down:n="down";break;case Hi.Up:n="up";break;default:n=null}return this.gridOptionsService.addGridCommonParams({type:t,event:e.event,node:e.dragItem.rowNode,nodes:e.dragItem.rowNodes,overIndex:i,overNode:o,y:r,vDirection:n})},e.prototype.dispatchGridEvent=function(t,e){var o=this.draggingToRowDragEvent(t,e);this.eventService.dispatchEvent(o)},e.prototype.onDragLeave=function(t){this.dispatchGridEvent(qt.EVENT_ROW_DRAG_LEAVE,t),this.stopDragging(t),this.gridOptionsService.get("rowDragManaged")&&this.clearRowHighlight(),this.isFromThisGrid(t)&&(this.isMultiRowDrag=!1)},e.prototype.onDragStop=function(t){this.dispatchGridEvent(qt.EVENT_ROW_DRAG_END,t),this.stopDragging(t),!this.gridOptionsService.get("rowDragManaged")||!this.gridOptionsService.get("suppressMoveWhenRowDragging")&&this.isFromThisGrid(t)||this.isDropZoneWithinThisGrid(t)||this.moveRowAndClearHighlight(t)},e.prototype.stopDragging=function(t){this.autoScrollService.ensureCleared(),this.getRowNodes(t).forEach(function(t){t.setDragging(!1)})},jl([J("dragAndDropService")],e.prototype,"dragAndDropService",void 0),jl([J("rowModel")],e.prototype,"rowModel",void 0),jl([J("paginationProxy")],e.prototype,"paginationProxy",void 0),jl([J("columnModel")],e.prototype,"columnModel",void 0),jl([J("focusService")],e.prototype,"focusService",void 0),jl([J("sortController")],e.prototype,"sortController",void 0),jl([J("filterManager")],e.prototype,"filterManager",void 0),jl([J("selectionService")],e.prototype,"selectionService",void 0),jl([J("mouseEventService")],e.prototype,"mouseEventService",void 0),jl([J("ctrlsService")],e.prototype,"ctrlsService",void 0),jl([Q("rangeService")],e.prototype,"rangeService",void 0),jl([Y],e.prototype,"postConstruct",null),e}(Bt),ql=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Yl=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};!function(t){t.ANIMATION_ON="ag-row-animation",t.ANIMATION_OFF="ag-row-no-animation"}(Vl||(Vl={}));var Zl,Xl,Jl=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stickyTopHeight=0,e}return ql(e,t),e.prototype.getScrollFeature=function(){return this.bodyScrollFeature},e.prototype.getBodyViewportElement=function(){return this.eBodyViewport},e.prototype.setComp=function(t,e,o,n,r,i){var a=this;this.comp=t,this.eGridBody=e,this.eBodyViewport=o,this.eTop=n,this.eBottom=r,this.eStickyTop=i,this.setCellTextSelection(this.gridOptionsService.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",function(t){return a.setCellTextSelection(t.currentValue)}),this.createManagedBean(new Fl(this.comp)),this.bodyScrollFeature=this.createManagedBean(new Bl(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([n,o,r,i]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.filterManager.setupAdvancedFilterHeaderComp(n),this.ctrlsService.registerGridBodyCtrl(this)},e.prototype.getComp=function(){return this.comp},e.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,qt.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))},e.prototype.addFocusListeners=function(t){var e=this;t.forEach(function(t){e.addManagedListener(t,"focusin",function(e){var o=en(e.target,"ag-root",t);t.classList.toggle("ag-has-focus",!o)}),e.addManagedListener(t,"focusout",function(e){var o=e.target,n=e.relatedTarget,r=t.contains(n),i=en(n,"ag-root",t);en(o,"ag-root",t)||r&&!i||t.classList.remove("ag-has-focus")})})},e.prototype.setColumnMovingCss=function(t){this.comp.setColumnMovingCss("ag-column-moving",t)},e.prototype.setCellTextSelection=function(t){void 0===t&&(t=!1),this.comp.setCellSelectableCss("ag-selectable",t)},e.prototype.onScrollVisibilityChanged=function(){var t=this,e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyTopWidth(e);var o=e&&this.gridOptionsService.getScrollbarWidth()||0,n=Lo()?16:0,r="calc(100% + ".concat(o+n,"px)");this.animationFrameService.requestAnimationFrame(function(){return t.comp.setBodyViewportWidth(r)})},e.prototype.onGridColumnsChanged=function(){var t=this.columnModel.getAllGridColumns();this.comp.setColumnCount(t.length)},e.prototype.disableBrowserDragging=function(){this.addManagedListener(this.eGridBody,"dragstart",function(t){if(t.target instanceof HTMLImageElement)return t.preventDefault(),!1})},e.prototype.addStopEditingWhenGridLosesFocus=function(){var t=this;if(this.gridOptionsService.get("stopEditingWhenCellsLoseFocus")){var e=function(e){var n=e.relatedTarget;if(null!==Ro(n)){var r=o.some(function(t){return t.contains(n)})&&t.mouseEventService.isElementInThisGrid(n);if(!r){var i=t.popupService;r=i.getActivePopups().some(function(t){return t.contains(n)})||i.isElementWithinCustomPopup(n)}r||t.rowRenderer.stopEditing()}else t.rowRenderer.stopEditing()},o=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop];o.forEach(function(o){return t.addManagedListener(o,"focusout",e)})}},e.prototype.updateRowCount=function(){var t=this.headerNavigationService.getHeaderRowCount()+this.filterManager.getHeaderRowCount(),e=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,o=-1===e?-1:t+e;this.comp.setRowCount(o)},e.prototype.registerBodyViewportResizeListener=function(t){this.comp.registerBodyViewportResizeListener(t)},e.prototype.setVerticalScrollPaddingVisible=function(t){var e=t?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(e)},e.prototype.isVerticalScrollShowing=function(){var t=this.gridOptionsService.get("alwaysShowVerticalScroll"),e=t?"ag-force-vertical-scroll":null,o=this.gridOptionsService.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(e,t),t||o&&bn(this.eBodyViewport)},e.prototype.setupRowAnimationCssClass=function(){var t=this,e=function(){var e=t.gridOptionsService.isAnimateRows()&&!t.rowContainerHeightService.isStretching(),o=e?Vl.ANIMATION_ON:Vl.ANIMATION_OFF;t.comp.setRowAnimationCssOnBodyViewport(o,e)};e(),this.addManagedListener(this.eventService,qt.EVENT_HEIGHT_SCALE_CHANGED,e),this.addManagedPropertyListener("animateRows",e)},e.prototype.getGridBodyElement=function(){return this.eGridBody},e.prototype.addBodyViewportListener=function(){var t=this.onBodyViewportContextMenu.bind(this);this.addManagedListener(this.eBodyViewport,"contextmenu",t),this.mockContextMenuForIPad(t),this.addManagedListener(this.eBodyViewport,"wheel",this.onBodyViewportWheel.bind(this)),this.addManagedListener(this.eStickyTop,"wheel",this.onStickyTopWheel.bind(this)),this.addFullWidthContainerWheelListener()},e.prototype.addFullWidthContainerWheelListener=function(){var t=this,e=this.eBodyViewport.querySelector(".ag-full-width-container"),o=this.eBodyViewport.querySelector(".ag-center-cols-viewport");e&&o&&this.addManagedListener(e,"wheel",function(e){return t.onFullWidthContainerWheel(e,o)})},e.prototype.onFullWidthContainerWheel=function(t,e){!t.deltaX||Math.abs(t.deltaY)>Math.abs(t.deltaX)||!this.mouseEventService.isEventFromThisGrid(t)||(t.preventDefault(),e.scrollBy({left:t.deltaX}))},e.prototype.onBodyViewportContextMenu=function(t,e,o){if(t||o){if(this.gridOptionsService.get("preventDefaultOnContextMenu"))(t||o).preventDefault();var n=(t||e).target;n!==this.eBodyViewport&&n!==this.ctrlsService.getCenterRowContainerCtrl().getViewportElement()||this.menuService.showContextMenu({mouseEvent:t,touchEvent:o,value:null,anchorToElement:this.eGridBody})}},e.prototype.mockContextMenuForIPad=function(t){if(To()){var e=new ra(this.eBodyViewport);this.addManagedListener(e,ra.EVENT_LONG_TAP,function(e){t(void 0,e.touchStart,e.touchEvent)}),this.addDestroyFunc(function(){return e.destroy()})}},e.prototype.onBodyViewportWheel=function(t){this.gridOptionsService.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&t.preventDefault()},e.prototype.onStickyTopWheel=function(t){t.preventDefault(),t.offsetY&&this.scrollVertically(t.deltaY)},e.prototype.getGui=function(){return this.eGridBody},e.prototype.scrollVertically=function(t){var e=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(e+t),this.eBodyViewport.scrollTop-e},e.prototype.addRowDragListener=function(){this.rowDragFeature=this.createManagedBean(new Kl(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)},e.prototype.getRowDragFeature=function(){return this.rowDragFeature},e.prototype.onPinnedRowDataChanged=function(){this.setFloatingHeights()},e.prototype.setFloatingHeights=function(){var t=this.pinnedRowModel,e=t.getPinnedTopTotalHeight(),o=t.getPinnedBottomTotalHeight();this.comp.setTopHeight(e),this.comp.setBottomHeight(o),this.comp.setTopDisplay(e?"inherit":"none"),this.comp.setBottomDisplay(o?"inherit":"none"),this.setStickyTopOffsetTop()},e.prototype.setStickyTopHeight=function(t){void 0===t&&(t=0),this.comp.setStickyTopHeight("".concat(t,"px")),this.stickyTopHeight=t},e.prototype.getStickyTopHeight=function(){return this.stickyTopHeight},e.prototype.setStickyTopWidth=function(t){if(t){var e=this.gridOptionsService.getScrollbarWidth();this.comp.setStickyTopWidth("calc(100% - ".concat(e,"px)"))}else this.comp.setStickyTopWidth("100%")},e.prototype.onHeaderHeightChanged=function(){this.setStickyTopOffsetTop()},e.prototype.setStickyTopOffsetTop=function(){var t=this.ctrlsService.getGridHeaderCtrl().getHeaderHeight()+this.filterManager.getHeaderHeight(),e=this.pinnedRowModel.getPinnedTopTotalHeight(),o=0;t>0&&(o+=t+1),e>0&&(o+=e+1),this.comp.setStickyTopTop("".concat(o,"px"))},e.prototype.sizeColumnsToFit=function(t,e){var o=this,n=this.isVerticalScrollShowing()?this.gridOptionsService.getScrollbarWidth():0,r=rn(this.eGridBody)-n;r>0?this.columnModel.sizeColumnsToFit(r,"sizeColumnsToFit",!1,t):void 0===e?window.setTimeout(function(){o.sizeColumnsToFit(t,100)},0):100===e?window.setTimeout(function(){o.sizeColumnsToFit(t,500)},100):500===e?window.setTimeout(function(){o.sizeColumnsToFit(t,-1)},500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")},e.prototype.addScrollEventListener=function(t){this.eBodyViewport.addEventListener("scroll",t,{passive:!0})},e.prototype.removeScrollEventListener=function(t){this.eBodyViewport.removeEventListener("scroll",t)},Yl([J("animationFrameService")],e.prototype,"animationFrameService",void 0),Yl([J("rowContainerHeightService")],e.prototype,"rowContainerHeightService",void 0),Yl([J("ctrlsService")],e.prototype,"ctrlsService",void 0),Yl([J("columnModel")],e.prototype,"columnModel",void 0),Yl([J("scrollVisibleService")],e.prototype,"scrollVisibleService",void 0),Yl([J("menuService")],e.prototype,"menuService",void 0),Yl([J("headerNavigationService")],e.prototype,"headerNavigationService",void 0),Yl([J("dragAndDropService")],e.prototype,"dragAndDropService",void 0),Yl([J("pinnedRowModel")],e.prototype,"pinnedRowModel",void 0),Yl([J("rowRenderer")],e.prototype,"rowRenderer",void 0),Yl([J("popupService")],e.prototype,"popupService",void 0),Yl([J("mouseEventService")],e.prototype,"mouseEventService",void 0),Yl([J("rowModel")],e.prototype,"rowModel",void 0),Yl([J("filterManager")],e.prototype,"filterManager",void 0),e}(Bt);!function(t){t[t.FILL=0]="FILL",t[t.RANGE=1]="RANGE"}(Zl||(Zl={})),function(t){t[t.VALUE=0]="VALUE",t[t.DIMENSION=1]="DIMENSION"}(Xl||(Xl={}));var Ql,$l=function(){function t(t,e){this.beans=t,this.cellCtrl=e}return t.prototype.setComp=function(t,e){this.cellComp=t,this.eGui=e,this.onRangeSelectionChanged()},t.prototype.onRangeSelectionChanged=function(){this.cellComp&&(this.rangeCount=this.beans.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass("ag-cell-range-selected",0!==this.rangeCount),this.cellComp.addOrRemoveCssClass("".concat("ag-cell-range-selected","-1"),1===this.rangeCount),this.cellComp.addOrRemoveCssClass("".concat("ag-cell-range-selected","-2"),2===this.rangeCount),this.cellComp.addOrRemoveCssClass("".concat("ag-cell-range-selected","-3"),3===this.rangeCount),this.cellComp.addOrRemoveCssClass("".concat("ag-cell-range-selected","-4"),this.rangeCount>=4),this.cellComp.addOrRemoveCssClass("ag-cell-range-chart",this.hasChartRange),lo(this.eGui,this.rangeCount>0||void 0),this.cellComp.addOrRemoveCssClass("ag-cell-range-single-cell",this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())},t.prototype.updateRangeBorders=function(){var t=this.getRangeBorders(),e=this.isSingleCell(),o=!e&&t.top,n=!e&&t.right,r=!e&&t.bottom,i=!e&&t.left;this.cellComp.addOrRemoveCssClass("ag-cell-range-top",o),this.cellComp.addOrRemoveCssClass("ag-cell-range-right",n),this.cellComp.addOrRemoveCssClass("ag-cell-range-bottom",r),this.cellComp.addOrRemoveCssClass("ag-cell-range-left",i)},t.prototype.isSingleCell=function(){var t=this.beans.rangeService;return 1===this.rangeCount&&t&&!t.isMoreThanOneCell()},t.prototype.getHasChartRange=function(){var t=this.beans.rangeService;if(!this.rangeCount||!t)return!1;var e=t.getCellRanges();return e.length>0&&e.every(function(t){return St([Xl.DIMENSION,Xl.VALUE],t.type)})},t.prototype.updateRangeBordersIfRangeCount=function(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())},t.prototype.getRangeBorders=function(){var t,e,o=this,n=this.beans.gridOptionsService.get("enableRtl"),r=!1,i=!1,a=!1,s=!1,l=this.cellCtrl.getCellPosition().column,u=this.beans,c=u.rangeService,p=u.columnModel;n?(t=p.getDisplayedColAfter(l),e=p.getDisplayedColBefore(l)):(t=p.getDisplayedColBefore(l),e=p.getDisplayedColAfter(l));var d=c.getCellRanges().filter(function(t){return c.isCellInSpecificRange(o.cellCtrl.getCellPosition(),t)});t||(s=!0),e||(i=!0);for(var h=0;h<d.length&&!(r&&i&&a&&s);h++){var f=d[h],g=c.getRangeStartRow(f),y=c.getRangeEndRow(f);!r&&this.beans.rowPositionUtils.sameRow(g,this.cellCtrl.getCellPosition())&&(r=!0),!a&&this.beans.rowPositionUtils.sameRow(y,this.cellCtrl.getCellPosition())&&(a=!0),!s&&t&&f.columns.indexOf(t)<0&&(s=!0),!i&&e&&f.columns.indexOf(e)<0&&(i=!0)}return{top:r,right:i,bottom:a,left:s}},t.prototype.refreshHandle=function(){if(this.beans.rangeService&&!this.beans.context.isDestroyed()){var t=this.shouldHaveSelectionHandle();this.selectionHandle&&!t&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),t&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass("ag-cell-range-handle",!!this.selectionHandle)}},t.prototype.shouldHaveSelectionHandle=function(){var t=this.beans,e=t.gridOptionsService,o=t.rangeService,n=o.getCellRanges(),r=n.length;if(this.rangeCount<1||r<1)return!1;var i=ft(n),a=this.cellCtrl.getCellPosition(),s=e.get("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),l=e.get("enableRangeHandle"),u=1===r&&!this.cellCtrl.isEditing()&&(s||l);if(this.hasChartRange){var c=n[0].type===Xl.DIMENSION&&o.isCellInSpecificRange(a,n[0]);this.cellComp.addOrRemoveCssClass("ag-cell-range-chart-category",c),u=i.type===Xl.VALUE}return u&&null!=i.endRow&&o.isContiguousRange(i)&&o.isBottomRightCell(i,a)},t.prototype.addSelectionHandle=function(){var t=this.beans,e=t.gridOptionsService,o=ft(t.rangeService.getCellRanges()).type,n=e.get("enableFillHandle")&&i(o)?Zl.FILL:Zl.RANGE;this.selectionHandle&&this.selectionHandle.getType()!==n&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.beans.selectionHandleFactory.createSelectionHandle(n)),this.selectionHandle.refresh(this.cellCtrl)},t.prototype.destroy=function(){this.beans.context.destroyBean(this.selectionHandle)},t}(),tu=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),eu=function(t){function e(e,o){var n=t.call(this)||this;return n.cellCtrl=e,n.beans=o,n.column=e.getColumn(),n.rowNode=e.getRowNode(),n.setupColSpan(),n.setupRowSpan(),n}return tu(e,t),e.prototype.setupRowSpan=function(){var t=this;this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListener(this.beans.eventService,qt.EVENT_NEW_COLUMNS_LOADED,function(){return t.onNewColumnsLoaded()})},e.prototype.setComp=function(t){this.eGui=t,this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()},e.prototype.onNewColumnsLoaded=function(){var t=this.column.getRowSpan(this.rowNode);this.rowSpan!==t&&(this.rowSpan=t,this.applyRowSpan(!0))},e.prototype.onDisplayColumnsChanged=function(){var t=this.getColSpanningList();gt(this.colsSpanning,t)||(this.colsSpanning=t,this.onWidthChanged(),this.onLeftChanged())},e.prototype.setupColSpan=function(){null!=this.column.getColDef().colSpan&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,qt.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,qt.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))},e.prototype.onWidthChanged=function(){if(this.eGui){var t=this.getCellWidth();this.eGui.style.width="".concat(t,"px")}},e.prototype.getCellWidth=function(){return this.colsSpanning?this.colsSpanning.reduce(function(t,e){return t+e.getActualWidth()},0):this.column.getActualWidth()},e.prototype.getColSpanningList=function(){var t=this.column.getColSpan(this.rowNode),e=[];if(1===t)e.push(this.column);else for(var o=this.column,n=this.column.getPinned(),r=0;o&&r<t&&(e.push(o),(o=this.beans.columnModel.getDisplayedColAfter(o))&&!i(o))&&n===o.getPinned();r++);return e},e.prototype.onLeftChanged=function(){if(this.eGui){var t=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=t+"px"}},e.prototype.getCellLeft=function(){return(this.beans.gridOptionsService.get("enableRtl")&&this.colsSpanning?ft(this.colsSpanning):this.column).getLeft()},e.prototype.modifyLeftForPrintLayout=function(t){if(!this.cellCtrl.isPrintLayout()||"left"===this.column.getPinned())return t;var e=this.beans.columnModel.getDisplayedColumnsLeftWidth();return"right"===this.column.getPinned()?e+this.beans.columnModel.getBodyContainerWidth()+(t||0):e+(t||0)},e.prototype.applyRowSpan=function(t){if(1!==this.rowSpan||t){var e=this.beans.gridOptionsService.getRowHeightAsNumber()*this.rowSpan;this.eGui.style.height="".concat(e,"px"),this.eGui.style.zIndex="1"}},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(Bt),ou=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),nu=function(t){function e(e,o){var n=t.call(this)||this;return n.staticClasses=[],n.cellCtrl=e,n.beans=o,n.column=e.getColumn(),n.rowNode=e.getRowNode(),n}return ou(e,t),e.prototype.setComp=function(t){this.cellComp=t,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()},e.prototype.applyCellClassRules=function(){var t=this,e=this.column.getColDef(),o=e.cellClassRules,n=this.beans.gridOptionsService.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(o===this.cellClassRules?void 0:this.cellClassRules,o,n,function(e){return t.cellComp.addOrRemoveCssClass(e,!0)},function(e){return t.cellComp.addOrRemoveCssClass(e,!1)}),this.cellClassRules=o},e.prototype.applyUserStyles=function(){var t=this.column.getColDef();if(t.cellStyle){var e;if("function"===typeof t.cellStyle){var o=this.beans.gridOptionsService.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:t,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex});e=(0,t.cellStyle)(o)}else e=t.cellStyle;e&&this.cellComp.setUserStyles(e)}},e.prototype.applyClassesFromColDef=function(){var t=this,e=this.column.getColDef(),o=this.beans.gridOptionsService.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(function(e){return t.cellComp.addOrRemoveCssClass(e,!1)}),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,o),this.staticClasses.length&&this.staticClasses.forEach(function(e){return t.cellComp.addOrRemoveCssClass(e,!0)})},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(Bt),ru=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),iu=function(t){function e(e,o){var n=t.call(this)||this;return n.ctrl=e,n.beans=o,n}return ru(e,t),e.prototype.setComp=function(t){this.eGui=t,this.setupTooltip()},e.prototype.setBrowserTooltip=function(t){null!=t&&""!=t?this.eGui.setAttribute("title",t):this.eGui.removeAttribute("title")},e.prototype.setupTooltip=function(){this.browserTooltips=this.beans.gridOptionsService.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?this.setBrowserTooltip(this.tooltip):this.createTooltipFeatureIfNeeded()},e.prototype.updateTooltipText=function(){this.tooltip=this.ctrl.getTooltipValue()},e.prototype.createTooltipFeatureIfNeeded=function(){var t,e,o,n,r=this;if(null==this.genericTooltipFeature){var i={getTooltipParams:function(){return r.getTooltipParams()},getGui:function(){return r.ctrl.getGui()}};this.genericTooltipFeature=this.createManagedBean(new mr(i,null===(e=(t=this.ctrl).getTooltipShowDelayOverride)||void 0===e?void 0:e.call(t),null===(n=(o=this.ctrl).getTooltipHideDelayOverride)||void 0===n?void 0:n.call(o)),this.beans.context)}},e.prototype.refreshToolTip=function(){this.updateTooltipText(),this.browserTooltips&&this.setBrowserTooltip(this.tooltip)},e.prototype.getTooltipParams=function(){var t=this,e=this.ctrl,o=e.getColumn?e.getColumn():void 0,n=e.getColDef?e.getColDef():void 0,r=e.getRowNode?e.getRowNode():void 0;return{location:e.getLocation(),colDef:n,column:o,rowIndex:e.getRowIndex?e.getRowIndex():void 0,node:r,data:r?r.data:void 0,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?e.getValueFormatted():void 0,hideTooltipCallback:function(){return t.genericTooltipFeature.hideTooltip(!0)}}},e.prototype.getTooltipText=function(){return this.tooltip},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(Bt),au=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},su=function(){function t(){}return t.prototype.postConstruct=function(){this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.gridOptionsService.isRowModelType("serverSide")&&(this.serverSideRowModel=this.rowModel)},au([J("resizeObserverService")],t.prototype,"resizeObserverService",void 0),au([J("paginationProxy")],t.prototype,"paginationProxy",void 0),au([J("context")],t.prototype,"context",void 0),au([J("columnApi")],t.prototype,"columnApi",void 0),au([J("gridApi")],t.prototype,"gridApi",void 0),au([J("gridOptionsService")],t.prototype,"gridOptionsService",void 0),au([J("expressionService")],t.prototype,"expressionService",void 0),au([J("environment")],t.prototype,"environment",void 0),au([J("rowRenderer")],t.prototype,"rowRenderer",void 0),au([J("templateService")],t.prototype,"templateService",void 0),au([J("valueService")],t.prototype,"valueService",void 0),au([J("eventService")],t.prototype,"eventService",void 0),au([J("columnModel")],t.prototype,"columnModel",void 0),au([J("headerNavigationService")],t.prototype,"headerNavigationService",void 0),au([J("navigationService")],t.prototype,"navigationService",void 0),au([J("columnAnimationService")],t.prototype,"columnAnimationService",void 0),au([Q("rangeService")],t.prototype,"rangeService",void 0),au([J("focusService")],t.prototype,"focusService",void 0),au([J("popupService")],t.prototype,"popupService",void 0),au([J("valueFormatterService")],t.prototype,"valueFormatterService",void 0),au([J("stylingService")],t.prototype,"stylingService",void 0),au([J("columnHoverService")],t.prototype,"columnHoverService",void 0),au([J("userComponentFactory")],t.prototype,"userComponentFactory",void 0),au([J("userComponentRegistry")],t.prototype,"userComponentRegistry",void 0),au([J("animationFrameService")],t.prototype,"animationFrameService",void 0),au([J("dragService")],t.prototype,"dragService",void 0),au([J("dragAndDropService")],t.prototype,"dragAndDropService",void 0),au([J("sortController")],t.prototype,"sortController",void 0),au([J("filterManager")],t.prototype,"filterManager",void 0),au([J("rowContainerHeightService")],t.prototype,"rowContainerHeightService",void 0),au([J("frameworkOverrides")],t.prototype,"frameworkOverrides",void 0),au([J("cellPositionUtils")],t.prototype,"cellPositionUtils",void 0),au([J("rowPositionUtils")],t.prototype,"rowPositionUtils",void 0),au([J("selectionService")],t.prototype,"selectionService",void 0),au([Q("selectionHandleFactory")],t.prototype,"selectionHandleFactory",void 0),au([J("rowCssClassCalculator")],t.prototype,"rowCssClassCalculator",void 0),au([J("rowModel")],t.prototype,"rowModel",void 0),au([J("ctrlsService")],t.prototype,"ctrlsService",void 0),au([J("ctrlsFactory")],t.prototype,"ctrlsFactory",void 0),au([J("agStackComponentsRegistry")],t.prototype,"agStackComponentsRegistry",void 0),au([J("valueCache")],t.prototype,"valueCache",void 0),au([J("rowNodeEventThrottle")],t.prototype,"rowNodeEventThrottle",void 0),au([J("localeService")],t.prototype,"localeService",void 0),au([J("valueParserService")],t.prototype,"valueParserService",void 0),au([J("syncService")],t.prototype,"syncService",void 0),au([J("ariaAnnouncementService")],t.prototype,"ariaAnnouncementService",void 0),au([Y],t.prototype,"postConstruct",null),t=au([X("beans")],t)}(),lu=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),uu=function(t){function e(e,o,n){var r=t.call(this)||this;return r.cellCtrl=e,r.beans=o,r.column=n,r}return lu(e,t),e.prototype.onMouseEvent=function(t,e){if(!Dt(e))switch(t){case"click":this.onCellClicked(e);break;case"mousedown":case"touchstart":this.onMouseDown(e);break;case"dblclick":this.onCellDoubleClicked(e);break;case"mouseout":this.onMouseOut(e);break;case"mouseover":this.onMouseOver(e)}},e.prototype.onCellClicked=function(t){var e=this;if(this.isDoubleClickOnIPad())return this.onCellDoubleClicked(t),void t.preventDefault();var o=this.beans,n=o.eventService,r=o.rangeService,i=o.gridOptionsService,a=t.ctrlKey||t.metaKey;r&&a&&r.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&r.intersectLastRange(!0);var s=this.cellCtrl.createEvent(t,qt.EVENT_CELL_CLICKED);n.dispatchEvent(s);var l=this.column.getColDef();l.onCellClicked&&window.setTimeout(function(){e.beans.frameworkOverrides.wrapOutgoing(function(){l.onCellClicked(s)})},0),!((i.get("singleClickEdit")||l.singleClickEdit)&&!i.get("suppressClickEdit"))||t.shiftKey&&0!=(null===r||void 0===r?void 0:r.getCellRanges().length)||this.cellCtrl.startRowOrCellEdit()},e.prototype.isDoubleClickOnIPad=function(){if(!To()||Mt("dblclick"))return!1;var t=(new Date).getTime(),e=t-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=t,e},e.prototype.onCellDoubleClicked=function(t){var e=this,o=this.column.getColDef(),n=this.cellCtrl.createEvent(t,qt.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(n),"function"===typeof o.onCellDoubleClicked&&window.setTimeout(function(){e.beans.frameworkOverrides.wrapOutgoing(function(){o.onCellDoubleClicked(n)})},0),!this.beans.gridOptionsService.get("singleClickEdit")&&!this.beans.gridOptionsService.get("suppressClickEdit")&&this.cellCtrl.startRowOrCellEdit(null,t)},e.prototype.onMouseDown=function(t){var e=t.ctrlKey,o=t.metaKey,n=t.shiftKey,r=t.target,i=this.cellCtrl,a=this.beans,s=a.eventService,l=a.rangeService,u=a.focusService;if(!this.isRightClickInExistingRange(t)){var c=l&&0!=l.getCellRanges().length;if(!n||!c){var p=wo()&&!i.isEditing()&&!Jo(r);i.focusCell(p)}if(n&&c&&!u.isCellFocused(i.getCellPosition())){t.preventDefault();var d=u.getFocusedCell();if(d){var h=d.column,f=d.rowIndex,g=d.rowPinned,y=a.rowRenderer.getRowByPosition({rowIndex:f,rowPinned:g}),v=null===y||void 0===y?void 0:y.getCellCtrl(h);(null===v||void 0===v?void 0:v.isEditing())&&v.stopEditing(),u.setFocusedCell({column:h,rowIndex:f,rowPinned:g,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(r)){if(l){var m=this.cellCtrl.getCellPosition();if(n)l.extendLatestRangeToCell(m);else{var C=e||o;l.setRangeToCell(m,C)}}s.dispatchEvent(this.cellCtrl.createEvent(t,qt.EVENT_CELL_MOUSE_DOWN))}}},e.prototype.isRightClickInExistingRange=function(t){var e=this.beans.rangeService;if(e){var o=e.isCellInAnyRange(this.cellCtrl.getCellPosition()),n=2===t.button||t.ctrlKey&&this.beans.gridOptionsService.get("allowContextMenuWithControlKey");if(o&&n)return!0}return!1},e.prototype.containsWidget=function(t){return en(t,"ag-selection-checkbox",3)},e.prototype.onMouseOut=function(t){if(!this.mouseStayingInsideCell(t)){var e=this.cellCtrl.createEvent(t,qt.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(e),this.beans.columnHoverService.clearMouseOver()}},e.prototype.onMouseOver=function(t){if(!this.mouseStayingInsideCell(t)){var e=this.cellCtrl.createEvent(t,qt.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(e),this.beans.columnHoverService.setMouseOver([this.column])}},e.prototype.mouseStayingInsideCell=function(t){if(!t.target||!t.relatedTarget)return!1;var e=this.cellCtrl.getGui(),o=e.contains(t.target),n=e.contains(t.relatedTarget);return o&&n},e.prototype.destroy=function(){},e}(su),cu=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),pu=function(t){function e(e,o,n,r,i){var a=t.call(this)||this;return a.cellCtrl=e,a.beans=o,a.rowNode=r,a.rowCtrl=i,a}return cu(e,t),e.prototype.setComp=function(t){this.eGui=t},e.prototype.onKeyDown=function(t){var e=t.key;switch(e){case jn.ENTER:this.onEnterKeyDown(t);break;case jn.F2:this.onF2KeyDown(t);break;case jn.ESCAPE:this.onEscapeKeyDown(t);break;case jn.TAB:this.onTabKeyDown(t);break;case jn.BACKSPACE:case jn.DELETE:this.onBackspaceOrDeleteKeyDown(e,t);break;case jn.DOWN:case jn.UP:case jn.RIGHT:case jn.LEFT:this.onNavigationKeyDown(t,e)}},e.prototype.onNavigationKeyDown=function(t,e){this.cellCtrl.isEditing()||(t.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(t):this.beans.navigationService.navigateToNextCell(t,e,this.cellCtrl.getCellPosition(),!0),t.preventDefault())},e.prototype.onShiftRangeSelect=function(t){if(this.beans.rangeService){var e=this.beans.rangeService.extendLatestRangeInDirection(t);e&&this.beans.navigationService.ensureCellVisible(e)}},e.prototype.onTabKeyDown=function(t){this.beans.navigationService.onTabKeyDown(this.cellCtrl,t)},e.prototype.onBackspaceOrDeleteKeyDown=function(t,e){var o=this.cellCtrl,n=this.beans,r=this.rowNode,i=n.gridOptionsService,a=n.rangeService,s=n.eventService;o.isEditing()||(s.dispatchEvent({type:qt.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),tr(t,i.get("enableCellEditingOnBackspace"))?a&&i.get("enableRangeSelection")?a.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"}):o.isCellEditable()&&r.setDataValue(o.getColumn(),null,"cellClear"):o.startRowOrCellEdit(t,e),s.dispatchEvent({type:qt.EVENT_KEY_SHORTCUT_CHANGED_CELL_END}))},e.prototype.onEnterKeyDown=function(t){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,t.shiftKey);else if(this.beans.gridOptionsService.get("enterNavigatesVertically")){var e=t.shiftKey?jn.UP:jn.DOWN;this.beans.navigationService.navigateToNextCell(null,e,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(jn.ENTER,t),this.cellCtrl.isEditing()&&t.preventDefault()},e.prototype.onF2KeyDown=function(t){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(jn.F2,t)},e.prototype.onEscapeKeyDown=function(t){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))},e.prototype.processCharacter=function(t){if(!(t.target!==this.eGui)&&!this.cellCtrl.isEditing()){var e=t.key;" "===e?this.onSpaceKeyDown(t):(this.cellCtrl.startRowOrCellEdit(e,t),t.preventDefault())}},e.prototype.onSpaceKeyDown=function(t){var e=this.beans.gridOptionsService;if(!this.cellCtrl.isEditing()&&e.isRowSelection()){var o=this.rowNode.isSelected(),n=!o;if(n||!e.get("suppressRowDeselection")){var r=this.beans.gridOptionsService.get("groupSelectsFiltered"),i=this.rowNode.setSelectedParams({newValue:n,rangeSelect:t.shiftKey,groupSelectsFiltered:r,event:t,source:"spaceKey"});void 0===o&&0===i&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:t.shiftKey,groupSelectsFiltered:r,event:t,source:"spaceKey"})}}t.preventDefault()},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(Bt),du=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),hu=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},fu=function(t){function e(e,o,n){var r=t.call(this,'<div class="ag-drag-handle ag-row-drag" draggable="true"></div>')||this;return r.rowNode=e,r.column=o,r.eCell=n,r}return du(e,t),e.prototype.postConstruct=function(){this.getGui().appendChild(zn("rowDrag",this.gridOptionsService,null)),this.addGuiEventListener("mousedown",function(t){t.stopPropagation()}),this.addDragSource(),this.checkVisibility()},e.prototype.addDragSource=function(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))},e.prototype.onDragStart=function(t){var e=this,o=this.column.getColDef().dndSourceOnRowDrag;t.dataTransfer.setDragImage(this.eCell,0,0);o?o(this.gridOptionsService.addGridCommonParams({rowNode:this.rowNode,dragEvent:t})):function(){try{var o=JSON.stringify(e.rowNode.data);t.dataTransfer.setData("application/json",o),t.dataTransfer.setData("text/plain",o)}catch(n){}}()},e.prototype.checkVisibility=function(){var t=this.column.isDndSource(this.rowNode);this.setDisplayed(t)},hu([Y],e.prototype,"postConstruct",null),e}(Sr),gu=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},yu=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},vu=function(){function t(){}return t.getHeaderClassesFromColDef=function(t,e,o,n){return i(t)?[]:this.getColumnClassesFromCollDef(t.headerClass,t,e,o,n)},t.getToolPanelClassesFromColDef=function(t,e,o,n){return i(t)?[]:this.getColumnClassesFromCollDef(t.toolPanelClass,t,e,o,n)},t.refreshFirstAndLastStyles=function(t,e,o){t.addOrRemoveCssClass("ag-column-first",o.isColumnAtEdge(e,"first")),t.addOrRemoveCssClass("ag-column-last",o.isColumnAtEdge(e,"last"))},t.getClassParams=function(t,e,o,n){return e.addGridCommonParams({colDef:t,column:o,columnGroup:n})},t.getColumnClassesFromCollDef=function(t,e,o,n,r){if(i(t))return[];var a;"function"===typeof t?a=t(this.getClassParams(e,o,n,r)):a=t;return"string"===typeof a?[a]:Array.isArray(a)?yu([],gu(a),!1):[]},t}(),mu=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Cu=function(){return(Cu=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},_u=0,wu=function(t){function e(e,o,n,r){var i=t.call(this)||this;return i.cellRangeFeature=null,i.cellPositionFeature=null,i.cellCustomStyleFeature=null,i.tooltipFeature=null,i.cellMouseListenerFeature=null,i.cellKeyboardListenerFeature=null,i.suppressRefreshCell=!1,i.onCellCompAttachedFuncs=[],i.column=e,i.rowNode=o,i.beans=n,i.rowCtrl=r,i.instanceId=e.getId()+"-"+_u++,i.colIdSanitised=ee(i.column.getId()),n.gridOptionsService.get("suppressCellFocus")||(i.tabIndex=-1),i.createCellPosition(),i.addFeatures(),i.updateAndFormatValue(!1),i}return mu(e,t),e.prototype.shouldRestoreFocus=function(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)},e.prototype.addFeatures=function(){var t=this;this.cellPositionFeature=new eu(this,this.beans),this.addDestroyFunc(function(){var e;null===(e=t.cellPositionFeature)||void 0===e||e.destroy(),t.cellPositionFeature=null}),this.cellCustomStyleFeature=new nu(this,this.beans),this.addDestroyFunc(function(){var e;null===(e=t.cellCustomStyleFeature)||void 0===e||e.destroy(),t.cellCustomStyleFeature=null}),this.cellMouseListenerFeature=new uu(this,this.beans,this.column),this.addDestroyFunc(function(){var e;null===(e=t.cellMouseListenerFeature)||void 0===e||e.destroy(),t.cellMouseListenerFeature=null}),this.cellKeyboardListenerFeature=new pu(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(function(){var e;null===(e=t.cellKeyboardListenerFeature)||void 0===e||e.destroy(),t.cellKeyboardListenerFeature=null}),this.column.isTooltipEnabled()&&(this.enableTooltipFeature(),this.addDestroyFunc(function(){t.disableTooltipFeature()})),this.beans.rangeService&&this.beans.gridOptionsService.get("enableRangeSelection")&&(this.cellRangeFeature=new $l(this.beans,this),this.addDestroyFunc(function(){var e;null===(e=t.cellRangeFeature)||void 0===e||e.destroy(),t.cellRangeFeature=null}))},e.prototype.enableTooltipFeature=function(){var t=this,e={getColumn:function(){return t.column},getColDef:function(){return t.column.getColDef()},getRowIndex:function(){return t.cellPosition.rowIndex},getRowNode:function(){return t.rowNode},getGui:function(){return t.getGui()},getLocation:function(){return"cell"},getTooltipValue:function(){var e=t.column.getColDef(),o=t.rowNode.data;if(e.tooltipField&&r(o))return w(o,e.tooltipField,t.column.isTooltipFieldContainsDots());var n=e.tooltipValueGetter;return n?n(t.beans.gridOptionsService.addGridCommonParams({location:"cell",colDef:t.column.getColDef(),column:t.column,rowIndex:t.cellPosition.rowIndex,node:t.rowNode,data:t.rowNode.data,value:t.value,valueFormatted:t.valueFormatted})):null},getValueFormatted:function(){return t.valueFormatted}};this.tooltipFeature=new iu(e,this.beans)},e.prototype.disableTooltipFeature=function(){this.tooltipFeature&&(this.tooltipFeature.destroy(),this.tooltipFeature=null)},e.prototype.setComp=function(t,e,o,n,r){var i,a,s,l;this.cellComp=t,this.eGui=e,this.printLayout=n,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(o),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),null===(i=this.cellPositionFeature)||void 0===i||i.setComp(e),null===(a=this.cellCustomStyleFeature)||void 0===a||a.setComp(t),null===(s=this.tooltipFeature)||void 0===s||s.setComp(e),null===(l=this.cellKeyboardListenerFeature)||void 0===l||l.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(t,e),r&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(function(t){return t()}),this.onCellCompAttachedFuncs=[])},e.prototype.setupAutoHeight=function(t){var e=this;if(this.isAutoHeight=this.column.isAutoHeight(),this.isAutoHeight&&t){var o=t.parentElement,n=this.beans.gridOptionsService.getRowHeightForNode(this.rowNode).height,r=function(i){if(!e.editing&&e.isAlive()){var a=on(o),s=a.paddingTop+a.paddingBottom+a.borderBottomWidth+a.borderTopWidth,l=t.offsetHeight+s;if(i<5){var u=e.beans.gridOptionsService.getDocument();if(!u||!u.contains(t)||0==l)return void window.setTimeout(function(){return r(i+1)},0)}var c=Math.max(l,n);e.rowNode.setRowAutoHeight(c,e.column)}},i=function(){return r(0)};i();var a=this.beans.resizeObserverService.observeResize(t,i);this.addDestroyFunc(function(){a(),e.rowNode.setRowAutoHeight(void 0,e.column)})}},e.prototype.getCellAriaRole=function(){var t;return null!==(t=this.column.getColDef().cellAriaRole)&&void 0!==t?t:"gridcell"},e.prototype.getInstanceId=function(){return this.instanceId},e.prototype.getIncludeSelection=function(){return this.includeSelection},e.prototype.getIncludeRowDrag=function(){return this.includeRowDrag},e.prototype.getIncludeDndSource=function(){return this.includeDndSource},e.prototype.getColumnIdSanitised=function(){return this.colIdSanitised},e.prototype.getTabIndex=function(){return this.tabIndex},e.prototype.isCellRenderer=function(){var t=this.column.getColDef();return null!=t.cellRenderer||null!=t.cellRendererSelector},e.prototype.getValueToDisplay=function(){return null!=this.valueFormatted?this.valueFormatted:this.value},e.prototype.showValue=function(t){void 0===t&&(t=!1);var e,o=this.getValueToDisplay();if(this.isCellRenderer()){var n=this.createCellRendererParams();e=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),n)}this.cellComp.setRenderDetails(e,o,t),this.refreshHandle()},e.prototype.setupControlComps=function(){var t=this.column.getColDef();this.includeSelection=this.isIncludeControl(t.checkboxSelection),this.includeRowDrag=this.isIncludeControl(t.rowDrag),this.includeDndSource=this.isIncludeControl(t.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)},e.prototype.isForceWrapper=function(){return this.beans.gridOptionsService.get("enableCellTextSelection")||this.column.isAutoHeight()},e.prototype.isIncludeControl=function(t){return!(null!=this.rowNode.rowPinned)&&("function"===typeof t||!0===t)},e.prototype.refreshShouldDestroy=function(){var t=this.column.getColDef(),e=this.includeSelection!=this.isIncludeControl(t.checkboxSelection),o=this.includeRowDrag!=this.isIncludeControl(t.rowDrag),n=this.includeDndSource!=this.isIncludeControl(t.dndSource);return e||o||n},e.prototype.startEditing=function(t,e,o){var n=this;if(void 0===t&&(t=null),void 0===e&&(e=!1),void 0===o&&(o=null),this.isCellEditable()&&!this.editing)if(this.cellComp){var r=this.createCellEditorParams(t,e),i=this.column.getColDef(),a=this.beans.userComponentFactory.getCellEditorDetails(i,r);this.editCompDetails=a;var s=null!=(null===a||void 0===a?void 0:a.popupFromSelector)?a.popupFromSelector:!!i.cellEditorPopup,l=null!=(null===a||void 0===a?void 0:a.popupPositionFromSelector)?a.popupPositionFromSelector:i.cellEditorPopupPosition;this.setEditing(!0),this.cellComp.setEditDetails(a,s,l,this.beans.gridOptionsService.get("reactiveCustomComponents"));var u=this.createEvent(o,qt.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(u)}else this.onCellCompAttachedFuncs.push(function(){n.startEditing(t,e,o)})},e.prototype.setEditing=function(t){this.editing!==t&&(this.editing=t,this.refreshHandle())},e.prototype.stopRowOrCellEdit=function(t){void 0===t&&(t=!1),"fullRow"===this.beans.gridOptionsService.get("editType")?this.rowCtrl.stopEditing(t):this.stopEditing(t)},e.prototype.onPopupEditorClosed=function(){this.isEditing()&&this.stopEditingAndFocus()},e.prototype.takeValueFromCellEditor=function(t){var e={newValueExists:!1};if(t)return e;var o=this.cellComp.getCellEditor();return o?o.isCancelAfterEnd&&o.isCancelAfterEnd()?e:{newValue:o.getValue(),newValueExists:!0}:e},e.prototype.saveNewValue=function(t,e){if(e===t)return!1;this.suppressRefreshCell=!0;var o=this.rowNode.setDataValue(this.column,e,"edit");return this.suppressRefreshCell=!1,o},e.prototype.stopEditing=function(t){if(void 0===t&&(t=!1),!this.editing)return!1;var e=this.takeValueFromCellEditor(t),o=e.newValue,n=e.newValueExists,r=this.rowNode.getValueFromValueService(this.column),i=!1;return n&&(i=this.saveNewValue(r,o)),this.setEditing(!1),this.cellComp.setEditDetails(),this.editCompDetails=void 0,this.updateAndFormatValue(!1),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(r,o,!t&&!!i),i},e.prototype.dispatchEditingStoppedEvent=function(t,e,o){var n=Cu(Cu({},this.createEvent(null,qt.EVENT_CELL_EDITING_STOPPED)),{oldValue:t,newValue:e,valueChanged:o});this.beans.eventService.dispatchEvent(n)},e.prototype.createCellEditorParams=function(t,e){return this.beans.gridOptionsService.addGridCommonParams({value:this.rowNode.getValueFromValueService(this.column),eventKey:t,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,cellStartedEdit:e,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)})},e.prototype.createCellRendererParams=function(){var t=this;return this.beans.gridOptionsService.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:function(){return t.rowNode.getValueFromValueService(t.column)},setValue:function(e){return t.beans.valueService.setValue(t.rowNode,t.column,e)},formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:function(e,o,n,r){return t.registerRowDragger(e,o,r)}})},e.prototype.parseValue=function(t){return this.beans.valueParserService.parseValue(this.column,this.rowNode,t,this.getValue())},e.prototype.setFocusOutOnEditor=function(){if(this.editing){var t=this.cellComp.getCellEditor();t&&t.focusOut&&t.focusOut()}},e.prototype.setFocusInOnEditor=function(){if(this.editing){var t=this.cellComp.getCellEditor();t&&t.focusIn?t.focusIn():this.focusCell(!0)}},e.prototype.onCellChanged=function(t){t.column===this.column&&this.refreshCell({})},e.prototype.refreshOrDestroyCell=function(t){var e;this.refreshShouldDestroy()?null===(e=this.rowCtrl)||void 0===e||e.refreshCell(this):this.refreshCell(t)},e.prototype.refreshCell=function(t){var e,o,n;if(!this.suppressRefreshCell&&!this.editing){var r=this.column.getColDef(),i=null!=t&&!!t.newData,a=null!=t&&!!t.suppressFlash||!!r.suppressCellFlash,s=null==r.field&&null==r.valueGetter&&null==r.showRowGroup,l=t&&t.forceRefresh||s||i,u=!!this.cellComp,c=this.updateAndFormatValue(u);if(u){if(l||c){this.showValue(i);var p=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();!a&&!p&&(this.beans.gridOptionsService.get("enableCellChangeFlash")||r.enableCellChangeFlash)&&this.flashCell(),null===(e=this.cellCustomStyleFeature)||void 0===e||e.applyUserStyles(),null===(o=this.cellCustomStyleFeature)||void 0===o||o.applyClassesFromColDef()}this.refreshToolTip(),null===(n=this.cellCustomStyleFeature)||void 0===n||n.applyCellClassRules()}}},e.prototype.stopEditingAndFocus=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1),this.stopRowOrCellEdit(),this.focusCell(!0),t||this.navigateAfterEdit(e)},e.prototype.navigateAfterEdit=function(t){if(this.beans.gridOptionsService.get("enterNavigatesVerticallyAfterEdit")){var e=t?jn.UP:jn.DOWN;this.beans.navigationService.navigateToNextCell(null,e,this.getCellPosition(),!1)}},e.prototype.flashCell=function(t){var e,o,n=null!==(e=null===t||void 0===t?void 0:t.flashDuration)&&void 0!==e?e:null===t||void 0===t?void 0:t.flashDelay,r=null!==(o=null===t||void 0===t?void 0:t.fadeDuration)&&void 0!==o?o:null===t||void 0===t?void 0:t.fadeDelay;this.animateCell("data-changed",n,r)},e.prototype.animateCell=function(t,e,o){var n=this;if(this.cellComp){var i="ag-cell-".concat(t),a="ag-cell-".concat(t,"-animation"),s=this.beans.gridOptionsService;e||(e=s.get("cellFlashDuration")),r(o)||(o=s.get("cellFadeDuration")),this.cellComp.addOrRemoveCssClass(i,!0),this.cellComp.addOrRemoveCssClass(a,!1),this.beans.frameworkOverrides.wrapIncoming(function(){window.setTimeout(function(){n.isAlive()&&(n.cellComp.addOrRemoveCssClass(i,!1),n.cellComp.addOrRemoveCssClass(a,!0),n.eGui.style.transition="background-color ".concat(o,"ms"),window.setTimeout(function(){n.isAlive()&&(n.cellComp.addOrRemoveCssClass(a,!1),n.eGui.style.transition="")},o))},e)})}},e.prototype.onFlashCells=function(t){if(this.cellComp){var e=this.beans.cellPositionUtils.createId(this.getCellPosition());t.cells[e]&&this.animateCell("highlight")}},e.prototype.isCellEditable=function(){return this.column.isCellEditable(this.rowNode)},e.prototype.isSuppressFillHandle=function(){return this.column.isSuppressFillHandle()},e.prototype.formatValue=function(t){var e;return null!==(e=this.callValueFormatter(t))&&void 0!==e?e:t},e.prototype.callValueFormatter=function(t){return this.beans.valueFormatterService.formatValue(this.column,this.rowNode,t)},e.prototype.updateAndFormatValue=function(t){var e=this.value,o=this.valueFormatted;return this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value),!t||(!this.valuesAreEqual(e,this.value)||this.valueFormatted!=o)},e.prototype.valuesAreEqual=function(t,e){var o=this.column.getColDef();return o.equals?o.equals(t,e):t===e},e.prototype.getComp=function(){return this.cellComp},e.prototype.getValue=function(){return this.value},e.prototype.getValueFormatted=function(){return this.valueFormatted},e.prototype.addDomData=function(){var t=this,o=this.getGui();this.beans.gridOptionsService.setDomData(o,e.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(function(){return t.beans.gridOptionsService.setDomData(o,e.DOM_DATA_KEY_CELL_CTRL,null)})},e.prototype.createEvent=function(t,e){return this.beans.gridOptionsService.addGridCommonParams({type:e,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:t,rowIndex:this.rowNode.rowIndex})},e.prototype.processCharacter=function(t){var e;null===(e=this.cellKeyboardListenerFeature)||void 0===e||e.processCharacter(t)},e.prototype.onKeyDown=function(t){var e;null===(e=this.cellKeyboardListenerFeature)||void 0===e||e.onKeyDown(t)},e.prototype.onMouseEvent=function(t,e){var o;null===(o=this.cellMouseListenerFeature)||void 0===o||o.onMouseEvent(t,e)},e.prototype.getGui=function(){return this.eGui},e.prototype.refreshToolTip=function(){var t;null===(t=this.tooltipFeature)||void 0===t||t.refreshToolTip()},e.prototype.getColSpanningList=function(){return this.cellPositionFeature.getColSpanningList()},e.prototype.onLeftChanged=function(){var t;this.cellComp&&(null===(t=this.cellPositionFeature)||void 0===t||t.onLeftChanged())},e.prototype.onDisplayedColumnsChanged=function(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())},e.prototype.refreshFirstAndLastStyles=function(){var t=this.cellComp,e=this.column,o=this.beans;vu.refreshFirstAndLastStyles(t,e,o.columnModel)},e.prototype.refreshAriaColIndex=function(){var t=this.beans.columnModel.getAriaColumnIndex(this.column);ro(this.getGui(),t)},e.prototype.isSuppressNavigable=function(){return this.column.isSuppressNavigable(this.rowNode)},e.prototype.onWidthChanged=function(){var t;return null===(t=this.cellPositionFeature)||void 0===t?void 0:t.onWidthChanged()},e.prototype.getColumn=function(){return this.column},e.prototype.getRowNode=function(){return this.rowNode},e.prototype.getBeans=function(){return this.beans},e.prototype.isPrintLayout=function(){return this.printLayout},e.prototype.appendChild=function(t){this.eGui.appendChild(t)},e.prototype.refreshHandle=function(){this.cellRangeFeature&&this.cellRangeFeature.refreshHandle()},e.prototype.getCellPosition=function(){return this.cellPosition},e.prototype.isEditing=function(){return this.editing},e.prototype.startRowOrCellEdit=function(t,e){var o=this;void 0===e&&(e=null),this.cellComp?"fullRow"===this.beans.gridOptionsService.get("editType")?this.rowCtrl.startRowEditing(t,this):this.startEditing(t,!0,e):this.onCellCompAttachedFuncs.push(function(){o.startRowOrCellEdit(t,e)})},e.prototype.getRowCtrl=function(){return this.rowCtrl},e.prototype.getRowPosition=function(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}},e.prototype.updateRangeBordersIfRangeCount=function(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()},e.prototype.onRangeSelectionChanged=function(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},e.prototype.isRangeSelectionEnabled=function(){return null!=this.cellRangeFeature},e.prototype.focusCell=function(t){void 0===t&&(t=!1),this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:t})},e.prototype.onRowIndexChanged=function(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},e.prototype.onFirstRightPinnedChanged=function(){if(this.cellComp){var t=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass("ag-cell-first-right-pinned",t)}},e.prototype.onLastLeftPinnedChanged=function(){if(this.cellComp){var t=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass("ag-cell-last-left-pinned",t)}},e.prototype.onCellFocused=function(t){if(!this.beans.gridOptionsService.get("suppressCellFocus")){var e=this.beans.focusService.isCellFocused(this.cellPosition);if(this.cellComp){if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass("ag-cell-focus",e),e&&t&&t.forceBrowserFocus)this.cellComp.getFocusableElement().focus({preventScroll:!!t.preventScrollOnBrowserFocus});var o="fullRow"===this.beans.gridOptionsService.get("editType");e||o||!this.editing||this.stopRowOrCellEdit(),e&&this.rowCtrl.announceDescription()}else e&&(null===t||void 0===t?void 0:t.forceBrowserFocus)&&(this.focusEventToRestore=t)}},e.prototype.createCellPosition=function(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:n(this.rowNode.rowPinned),column:this.column}},e.prototype.applyStaticCssClasses=function(){this.cellComp.addOrRemoveCssClass("ag-cell",!0),this.cellComp.addOrRemoveCssClass("ag-cell-not-inline-editing",!0);var t=1==this.column.isAutoHeight();this.cellComp.addOrRemoveCssClass("ag-cell-auto-height",t),this.cellComp.addOrRemoveCssClass("ag-cell-normal-height",!t)},e.prototype.onColumnHover=function(){if(this.cellComp&&this.beans.gridOptionsService.get("columnHoverHighlight")){var t=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass("ag-column-hover",t)}},e.prototype.onColDefChanged=function(){var t,e;if(this.cellComp)if(this.column.isAutoHeight()!==this.isAutoHeight&&(null===(t=this.rowCtrl)||void 0===t||t.refreshCell(this)),this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature(),null===(e=this.tooltipFeature)||void 0===e||e.setComp(this.eGui)):this.disableTooltipFeature(),this.setWrapText(),this.editing){var o=this.getCellEditor();if(null===o||void 0===o?void 0:o.refresh){var n=this.editCompDetails.params,r=n.eventKey,i=n.cellStartedEdit,a=this.createCellEditorParams(r,i),s=this.column.getColDef(),l=this.beans.userComponentFactory.getCellEditorDetails(s,a);o.refresh(l.params)}}else this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0})},e.prototype.setWrapText=function(){var t=1==this.column.getColDef().wrapText;this.cellComp.addOrRemoveCssClass("ag-cell-wrap-text",t)},e.prototype.dispatchCellContextMenuEvent=function(t){var e=this,o=this.column.getColDef(),n=this.createEvent(t,qt.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(n),o.onCellContextMenu&&window.setTimeout(function(){e.beans.frameworkOverrides.wrapOutgoing(function(){o.onCellContextMenu(n)})},0)},e.prototype.getCellRenderer=function(){return this.cellComp?this.cellComp.getCellRenderer():null},e.prototype.getCellEditor=function(){return this.cellComp?this.cellComp.getCellEditor():null},e.prototype.destroy=function(){this.onCellCompAttachedFuncs=[],t.prototype.destroy.call(this)},e.prototype.createSelectionCheckbox=function(){var t=new Va;return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t},e.prototype.createDndSource=function(){var t=new fu(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(t),t},e.prototype.registerRowDragger=function(t,e,o){var n=this;if(this.customRowDragComp)this.customRowDragComp.setDragElement(t,e);else{var r=this.createRowDragComp(t,e,o);r&&(this.customRowDragComp=r,this.addDestroyFunc(function(){n.beans.context.destroyBean(r),n.customRowDragComp=null}))}},e.prototype.createRowDragComp=function(t,e,o){var n=this,r=this.beans.gridOptionsService.get("pagination"),i=this.beans.gridOptionsService.get("rowDragManaged"),a=this.beans.gridOptionsService.isRowModelType("clientSide");if(i){if(!a)return void O("managed row dragging is only allowed in the Client Side Row Model");if(r)return void O("managed row dragging is not possible when doing pagination")}var s=new Ya(function(){return n.value},this.rowNode,this.column,t,e,o);return this.beans.context.createBean(s),s},e.DOM_DATA_KEY_CELL_CTRL="cellCtrl",e}(Bt),bu=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Su=function(t){var e="function"===typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Eu=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},xu=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))};!function(t){t.Normal="Normal",t.FullWidth="FullWidth",t.FullWidthLoading="FullWidthLoading",t.FullWidthGroup="FullWidthGroup",t.FullWidthDetail="FullWidthDetail"}(Ql||(Ql={}));var Tu,Ou,Ru=0,Pu=function(t){function e(e,o,n,r,i){var a=t.call(this)||this;return a.allRowGuis=[],a.active=!0,a.centerCellCtrls={list:[],map:{}},a.leftCellCtrls={list:[],map:{}},a.rightCellCtrls={list:[],map:{}},a.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},a.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},a.rowDragComps=[],a.lastMouseDownOnDragger=!1,a.emptyStyle={},a.updateColumnListsPending=!1,a.rowId=null,a.businessKeySanitised=null,a.beans=o,a.gridOptionsService=o.gridOptionsService,a.rowNode=e,a.paginationPage=o.paginationProxy.getCurrentPage(),a.useAnimationFrameForCreate=r,a.printLayout=i,a.suppressRowTransform=a.gridOptionsService.get("suppressRowTransform"),a.instanceId=e.id+"-"+Ru++,a.rowId=ee(e.id),a.initRowBusinessKey(),a.rowFocused=o.focusService.isRowFocused(a.rowNode.rowIndex,a.rowNode.rowPinned),a.rowLevel=o.rowCssClassCalculator.calculateRowLevel(a.rowNode),a.setRowType(),a.setAnimateFlags(n),a.rowStyles=a.processStylesFromGridOptions(),a.isFullWidth()&&!a.gridOptionsService.get("suppressCellFocus")&&(a.tabIndex=-1),a.addListeners(),a}return bu(e,t),e.prototype.initRowBusinessKey=function(){this.businessKeyForNodeFunc=this.gridOptionsService.get("getBusinessKeyForNode"),this.updateRowBusinessKey()},e.prototype.updateRowBusinessKey=function(){if("function"===typeof this.businessKeyForNodeFunc){var t=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=ee(t)}},e.prototype.getRowId=function(){return this.rowId},e.prototype.getRowStyles=function(){return this.rowStyles},e.prototype.getTabIndex=function(){return this.tabIndex},e.prototype.isSticky=function(){return this.rowNode.sticky},e.prototype.getBeans=function(){return this.beans},e.prototype.getInstanceId=function(){return this.instanceId},e.prototype.setComp=function(t,e,o){var n={rowComp:t,element:e,containerType:o};this.allRowGuis.push(n),o===Ou.LEFT?this.leftGui=n:o===Ou.RIGHT?this.rightGui=n:o===Ou.FULL_WIDTH?this.fullWidthGui=n:this.centerGui=n,this.initialiseRowComp(n),"FullWidthLoading"===this.rowType||this.rowNode.rowPinned||this.beans.rowRenderer.dispatchFirstDataRenderedEvent()},e.prototype.unsetComp=function(t){switch(this.allRowGuis=this.allRowGuis.filter(function(e){return e.containerType!==t}),t){case Ou.LEFT:this.leftGui=void 0;break;case Ou.RIGHT:this.rightGui=void 0;break;case Ou.FULL_WIDTH:this.fullWidthGui=void 0;break;case Ou.CENTER:this.centerGui=void 0}},e.prototype.isCacheable=function(){return this.rowType===Ql.FullWidthDetail&&this.gridOptionsService.get("keepDetailRows")},e.prototype.setCached=function(t){var e=t?"none":"";this.allRowGuis.forEach(function(t){return t.element.style.display=e})},e.prototype.initialiseRowComp=function(t){var o=this,n=this.gridOptionsService;this.listenOnDomOrder(t),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),n.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);var r=t.rowComp;this.getInitialRowClasses(t.containerType).forEach(function(t){return r.addOrRemoveCssClass(t,!0)}),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&Xe(t.element,1==this.rowNode.expanded),this.setRowCompRowId(r),this.setRowCompRowBusinessKey(r),n.setDomData(t.element,e.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc(function(){return n.setDomData(t.element,e.DOM_DATA_KEY_ROW_CTRL,null)}),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,t.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(t.element),this.isFullWidth()&&this.setupFullWidth(t),n.get("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(function(){o.isAlive()&&t.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()},e.prototype.setRowCompRowBusinessKey=function(t){null!=this.businessKeySanitised&&t.setRowBusinessKey(this.businessKeySanitised)},e.prototype.getBusinessKey=function(){return this.businessKeySanitised},e.prototype.setRowCompRowId=function(t){this.rowId=ee(this.rowNode.id),null!=this.rowId&&t.setRowId(this.rowId)},e.prototype.executeSlideAndFadeAnimations=function(t){var e=this,o=t.containerType;this.slideInAnimation[o]&&(L(function(){e.onTopChanged()}),this.slideInAnimation[o]=!1),this.fadeInAnimation[o]&&(L(function(){t.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[o]=!1)},e.prototype.addRowDraggerToRow=function(t){if(this.gridOptionsService.get("enableRangeSelection"))O("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`");else{var e=this.beans.localeService.getLocaleTextFunc(),o=new Ya(function(){return"1 ".concat(e("rowDragRow","row"))},this.rowNode,void 0,t.element,void 0,!0),n=this.createBean(o,this.beans.context);this.rowDragComps.push(n)}},e.prototype.setupFullWidth=function(t){var e=this.getPinnedForContainer(t.containerType),o=this.createFullWidthParams(t.element,e);if(this.rowType!=Ql.FullWidthDetail||j.__assertRegistered(V.MasterDetailModule,"cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId())){var n;switch(this.rowType){case Ql.FullWidthDetail:n=this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(o);break;case Ql.FullWidthGroup:n=this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(o);break;case Ql.FullWidthLoading:n=this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(o);break;default:n=this.beans.userComponentFactory.getFullWidthCellRendererDetails(o)}t.rowComp.showFullWidth(n)}},e.prototype.isPrintLayout=function(){return this.printLayout},e.prototype.getFullWidthCellRenderers=function(){var t,e;return this.gridOptionsService.get("embedFullWidthRows")?this.allRowGuis.map(function(t){var e;return null===(e=null===t||void 0===t?void 0:t.rowComp)||void 0===e?void 0:e.getFullWidthCellRenderer()}):[null===(e=null===(t=this.fullWidthGui)||void 0===t?void 0:t.rowComp)||void 0===e?void 0:e.getFullWidthCellRenderer()]},e.prototype.getCellElement=function(t){var e=this.getCellCtrl(t);return e?e.getGui():null},e.prototype.executeProcessRowPostCreateFunc=function(){var t=this.gridOptionsService.getCallback("processRowPostCreate");t&&this.areAllContainersReady()&&t({eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)})},e.prototype.areAllContainersReady=function(){var t=!!this.leftGui||!this.beans.columnModel.isPinningLeft(),e=!!this.centerGui,o=!!this.rightGui||!this.beans.columnModel.isPinningRight();return t&&e&&o},e.prototype.setRowType=function(){var t=this.rowNode.stub,e=this.rowNode.isFullWidthCell(),o=this.gridOptionsService.get("masterDetail")&&this.rowNode.detail,n=this.beans.columnModel.isPivotMode(),r=!!this.rowNode.group&&!this.rowNode.footer&&this.gridOptionsService.isGroupUseEntireRow(n);this.rowType=t?Ql.FullWidthLoading:o?Ql.FullWidthDetail:e?Ql.FullWidth:r?Ql.FullWidthGroup:Ql.Normal},e.prototype.updateColumnLists=function(t,e){var o=this;(void 0===t&&(t=!1),void 0===e&&(e=!1),this.isFullWidth())||(t||this.gridOptionsService.get("suppressAnimationFrame")||this.printLayout?this.updateColumnListsImpl(e):this.updateColumnListsPending||(this.beans.animationFrameService.createTask(function(){o.active&&o.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0))},e.prototype.createCellCtrls=function(t,e,o){var n=this;void 0===o&&(o=null);var r={list:[],map:{}},i=function(t,e){r.list.push(e),r.map[t]=e};return e.forEach(function(e){var o=e.getInstanceId(),r=t.map[o];r||(r=new wu(e,n.rowNode,n.beans,n)),i(o,r)}),t.list.forEach(function(t){null!=r.map[t.getColumn().getInstanceId()]||(!n.isCellEligibleToBeRemoved(t,o)?i(t.getColumn().getInstanceId(),t):t.destroy())}),r},e.prototype.updateColumnListsImpl=function(t){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(t)},e.prototype.setCellCtrls=function(t){var e=this;this.allRowGuis.forEach(function(o){var n=e.getCellCtrlsForContainer(o.containerType);o.rowComp.setCellCtrls(n,t)})},e.prototype.getCellCtrlsForContainer=function(t){switch(t){case Ou.LEFT:return this.leftCellCtrls.list;case Ou.RIGHT:return this.rightCellCtrls.list;case Ou.FULL_WIDTH:return[];case Ou.CENTER:return this.centerCellCtrls.list;default:throw new Error("Unhandled case: ".concat(t))}},e.prototype.createAllCellCtrls=function(){var t=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{var e=t.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,e);var o=t.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,o,"left");var n=t.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,n,"right")}},e.prototype.isCellEligibleToBeRemoved=function(t,e){if(t.getColumn().getPinned()!=e)return!0;var o=t.isEditing(),n=this.beans.focusService.isCellFocused(t.getCellPosition());if(o||n){var r=t.getColumn();return!(this.beans.columnModel.getAllDisplayedColumns().indexOf(r)>=0)}return!0},e.prototype.getDomOrder=function(){return this.gridOptionsService.get("ensureDomOrder")||this.gridOptionsService.isDomLayout("print")},e.prototype.listenOnDomOrder=function(t){var e=this,o=function(){t.rowComp.setDomOrder(e.getDomOrder())};this.addManagedPropertyListener("domLayout",o),this.addManagedPropertyListener("ensureDomOrder",o)},e.prototype.setAnimateFlags=function(t){if(!this.isSticky()&&t){var e=r(this.rowNode.oldRowTop),o=this.beans.columnModel.isPinningLeft(),n=this.beans.columnModel.isPinningRight();if(e){if(this.isFullWidth()&&!this.gridOptionsService.get("embedFullWidthRows"))return void(this.slideInAnimation.fullWidth=!0);this.slideInAnimation.center=!0,this.slideInAnimation.left=o,this.slideInAnimation.right=n}else{if(this.isFullWidth()&&!this.gridOptionsService.get("embedFullWidthRows"))return void(this.fadeInAnimation.fullWidth=!0);this.fadeInAnimation.center=!0,this.fadeInAnimation.left=o,this.fadeInAnimation.right=n}}},e.prototype.isEditing=function(){return this.editingRow},e.prototype.isFullWidth=function(){return this.rowType!==Ql.Normal},e.prototype.getRowType=function(){return this.rowType},e.prototype.refreshFullWidth=function(){var t=this,e=function(e,o){return!e||e.rowComp.refreshFullWidth(function(){return t.createFullWidthParams(e.element,o)})},o=e(this.fullWidthGui,null),n=e(this.centerGui,null),r=e(this.leftGui,"left"),i=e(this.rightGui,"right");return o&&n&&r&&i},e.prototype.addListeners=function(){var t=this;this.addManagedListener(this.rowNode,Fa.EVENT_HEIGHT_CHANGED,function(){return t.onRowHeightChanged()}),this.addManagedListener(this.rowNode,Fa.EVENT_ROW_SELECTED,function(){return t.onRowSelected()}),this.addManagedListener(this.rowNode,Fa.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.rowNode.detail&&this.addManagedListener(this.rowNode.parent,Fa.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_CELL_CHANGED,this.postProcessCss.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_DRAGGING_CHANGED,this.postProcessRowDragging.bind(this)),this.addManagedListener(this.rowNode,Fa.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));var e=this.beans.eventService;this.addManagedListener(e,qt.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(e,qt.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(e,qt.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(e,qt.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(e,qt.EVENT_CELL_FOCUSED,this.onCellFocusChanged.bind(this)),this.addManagedListener(e,qt.EVENT_CELL_FOCUS_CLEARED,this.onCellFocusChanged.bind(this)),this.addManagedListener(e,qt.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(e,qt.EVENT_MODEL_UPDATED,this.refreshFirstAndLastRowStyles.bind(this)),this.addManagedListener(e,qt.EVENT_COLUMN_MOVED,this.updateColumnLists.bind(this)),this.addDestroyFunc(function(){t.destroyBeans(t.rowDragComps,t.beans.context)}),this.addManagedPropertyListeners(["rowDragEntireRow"],function(){t.gridOptionsService.get("rowDragEntireRow")?t.allRowGuis.forEach(function(e){t.addRowDraggerToRow(e)}):(t.destroyBeans(t.rowDragComps,t.beans.context),t.rowDragComps=[])}),this.addListenersForCellComps()},e.prototype.addListenersForCellComps=function(){var t=this;this.addManagedListener(this.rowNode,Fa.EVENT_ROW_INDEX_CHANGED,function(){t.getAllCellCtrls().forEach(function(t){return t.onRowIndexChanged()})}),this.addManagedListener(this.rowNode,Fa.EVENT_CELL_CHANGED,function(e){t.getAllCellCtrls().forEach(function(t){return t.onCellChanged(e)})})},e.prototype.onRowNodeDataChanged=function(t){var e=this;this.isFullWidth()!==!!this.rowNode.isFullWidthCell()?this.beans.rowRenderer.redrawRow(this.rowNode):this.isFullWidth()?this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode):(this.getAllCellCtrls().forEach(function(e){return e.refreshCell({suppressFlash:!t.update,newData:!t.update})}),this.allRowGuis.forEach(function(t){e.setRowCompRowId(t.rowComp),e.updateRowBusinessKey(),e.setRowCompRowBusinessKey(t.rowComp)}),this.onRowSelected(),this.postProcessCss())},e.prototype.postProcessCss=function(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()},e.prototype.onRowNodeHighlightChanged=function(){var t=this.rowNode.highlighted;this.allRowGuis.forEach(function(e){var o=t===al.Above,n=t===al.Below;e.rowComp.addOrRemoveCssClass("ag-row-highlight-above",o),e.rowComp.addOrRemoveCssClass("ag-row-highlight-below",n)})},e.prototype.postProcessRowDragging=function(){var t=this.rowNode.dragging;this.allRowGuis.forEach(function(e){return e.rowComp.addOrRemoveCssClass("ag-row-dragging",t)})},e.prototype.updateExpandedCss=function(){var t=this.rowNode.isExpandable(),e=1==this.rowNode.expanded;this.allRowGuis.forEach(function(o){o.rowComp.addOrRemoveCssClass("ag-row-group",t),o.rowComp.addOrRemoveCssClass("ag-row-group-expanded",t&&e),o.rowComp.addOrRemoveCssClass("ag-row-group-contracted",t&&!e),Xe(o.element,t&&e)})},e.prototype.onDisplayedColumnsChanged=function(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()},e.prototype.onVirtualColumnsChanged=function(){this.updateColumnLists(!1,!0)},e.prototype.getRowPosition=function(){return{rowPinned:n(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}},e.prototype.onKeyboardNavigate=function(t){var e=this.allRowGuis.find(function(e){return e.element.contains(t.target)});if((e?e.element:null)===t.target){var o=this.rowNode,n=this.beans.focusService.getFocusedCell(),r={rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:n&&n.column};this.beans.navigationService.navigateToNextCell(t,t.key,r,!0),t.preventDefault()}},e.prototype.onTabKeyDown=function(t){if(!t.defaultPrevented&&!Dt(t)){var e=this.allRowGuis.find(function(e){return e.element.contains(t.target)}),o=e?e.element:null,n=o===t.target,r=null;n||(r=this.beans.focusService.findNextFocusableElement(o,!1,t.shiftKey)),(this.isFullWidth()&&n||!r)&&this.beans.navigationService.onTabKeyDown(this,t)}},e.prototype.onFullWidthRowFocused=function(t){var e,o=this.rowNode,n=!!t&&(this.isFullWidth()&&t.rowIndex===o.rowIndex&&t.rowPinned==o.rowPinned),r=this.fullWidthGui?this.fullWidthGui.element:null===(e=this.centerGui)||void 0===e?void 0:e.element;r&&(r.classList.toggle("ag-full-width-focus",n),n&&r.focus({preventScroll:!0}))},e.prototype.refreshCell=function(t){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,t),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,t),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,t),this.updateColumnLists()},e.prototype.removeCellCtrl=function(t,e){var o={list:[],map:{}};return t.list.forEach(function(t){t!==e&&(o.list.push(t),o.map[t.getInstanceId()]=t)}),o},e.prototype.onMouseEvent=function(t,e){switch(t){case"dblclick":this.onRowDblClick(e);break;case"click":this.onRowClick(e);break;case"touchstart":case"mousedown":this.onRowMouseDown(e)}},e.prototype.createRowEvent=function(t,e){return this.gridOptionsService.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:e})},e.prototype.createRowEventWithSource=function(t,e){var o=this.createRowEvent(t,e);return o.source=this,o},e.prototype.onRowDblClick=function(t){if(!Dt(t)){var e=this.createRowEventWithSource(qt.EVENT_ROW_DOUBLE_CLICKED,t);this.beans.eventService.dispatchEvent(e)}},e.prototype.onRowMouseDown=function(t){if(this.lastMouseDownOnDragger=en(t.target,"ag-row-drag",3),this.isFullWidth()){var e=this.rowNode,o=this.beans.columnModel;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges(),this.beans.focusService.setFocusedCell({rowIndex:e.rowIndex,column:o.getAllDisplayedColumns()[0],rowPinned:e.rowPinned,forceBrowserFocus:!0})}},e.prototype.onRowClick=function(t){if(!(Dt(t)||this.lastMouseDownOnDragger)){var e=this.createRowEventWithSource(qt.EVENT_ROW_CLICKED,t);this.beans.eventService.dispatchEvent(e);var o=t.ctrlKey||t.metaKey,n=t.shiftKey;if(!(this.gridOptionsService.get("groupSelectsChildren")&&this.rowNode.group||this.isRowSelectionBlocked()||this.gridOptionsService.get("suppressRowClickSelection"))){var r=this.gridOptionsService.get("rowMultiSelectWithClick"),i=!this.gridOptionsService.get("suppressRowDeselection"),a="rowClicked";if(this.rowNode.isSelected())r?this.rowNode.setSelectedParams({newValue:!1,event:t,source:a}):o?i&&this.rowNode.setSelectedParams({newValue:!1,event:t,source:a}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!n,rangeSelect:n,event:t,source:a});else{var s=!r&&!o;this.rowNode.setSelectedParams({newValue:!0,clearSelection:s,rangeSelect:n,event:t,source:a})}}}},e.prototype.isRowSelectionBlocked=function(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!this.gridOptionsService.isRowSelection()},e.prototype.setupDetailRowAutoHeight=function(t){var e=this;if(this.rowType===Ql.FullWidthDetail&&this.gridOptionsService.get("detailRowAutoHeight")){var o=function(){var o=t.clientHeight;if(null!=o&&o>0){window.setTimeout(function(){e.rowNode.setRowHeight(o),e.beans.clientSideRowModel?e.beans.clientSideRowModel.onRowHeightChanged():e.beans.serverSideRowModel&&e.beans.serverSideRowModel.onRowHeightChanged()},0)}},n=this.beans.resizeObserverService.observeResize(t,o);this.addDestroyFunc(n),o()}},e.prototype.createFullWidthParams=function(t,e){var o=this;return this.gridOptionsService.addGridCommonParams({fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,rowIndex:this.rowNode.rowIndex,eGridCell:t,eParentOfValue:t,pinned:e,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:function(t,e,n,r){return o.addFullWidthRowDragging(t,e,n,r)}})},e.prototype.addFullWidthRowDragging=function(t,e,o,n){if(void 0===o&&(o=""),this.isFullWidth()){var r=new Ya(function(){return o},this.rowNode,void 0,t,e,n);this.createManagedBean(r,this.beans.context)}},e.prototype.onUiLevelChanged=function(){var t=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=t){var e="ag-row-level-"+t,o="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(function(t){t.rowComp.addOrRemoveCssClass(e,!0),t.rowComp.addOrRemoveCssClass(o,!1)})}this.rowLevel=t},e.prototype.isFirstRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()},e.prototype.isLastRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()},e.prototype.refreshFirstAndLastRowStyles=function(){var t=this.isFirstRowOnPage(),e=this.isLastRowOnPage();this.firstRowOnPage!==t&&(this.firstRowOnPage=t,this.allRowGuis.forEach(function(e){return e.rowComp.addOrRemoveCssClass("ag-row-first",t)})),this.lastRowOnPage!==e&&(this.lastRowOnPage=e,this.allRowGuis.forEach(function(t){return t.rowComp.addOrRemoveCssClass("ag-row-last",e)}))},e.prototype.stopEditing=function(t){var e,o;if(void 0===t&&(t=!1),!this.stoppingRowEdit){var n=this.getAllCellCtrls(),r=this.editingRow;this.stoppingRowEdit=!0;var i=!1;try{for(var a=Su(n),s=a.next();!s.done;s=a.next()){var l=s.value.stopEditing(t);r&&!t&&!i&&l&&(i=!0)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(e)throw e.error}}if(i){var u=this.createRowEvent(qt.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(u)}r&&this.setEditingRow(!1),this.stoppingRowEdit=!1}},e.prototype.setInlineEditingCss=function(t){this.allRowGuis.forEach(function(e){e.rowComp.addOrRemoveCssClass("ag-row-inline-editing",t),e.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!t)})},e.prototype.setEditingRow=function(t){this.editingRow=t,this.allRowGuis.forEach(function(e){return e.rowComp.addOrRemoveCssClass("ag-row-editing",t)});var e=t?this.createRowEvent(qt.EVENT_ROW_EDITING_STARTED):this.createRowEvent(qt.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(e)},e.prototype.startRowEditing=function(t,e,o){(void 0===t&&(t=null),void 0===e&&(e=null),void 0===o&&(o=null),this.editingRow)||this.getAllCellCtrls().reduce(function(n,r){var i=r===e;return i?r.startEditing(t,i,o):r.startEditing(null,i,o),!!n||r.isEditing()},!1)&&this.setEditingRow(!0)},e.prototype.getAllCellCtrls=function(){return 0===this.leftCellCtrls.list.length&&0===this.rightCellCtrls.list.length?this.centerCellCtrls.list:xu(xu(xu([],Eu(this.centerCellCtrls.list),!1),Eu(this.leftCellCtrls.list),!1),Eu(this.rightCellCtrls.list),!1)},e.prototype.postProcessClassesFromGridOptions=function(){var t=this,e=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);e&&e.length&&e.forEach(function(e){t.allRowGuis.forEach(function(t){return t.rowComp.addOrRemoveCssClass(e,!0)})})},e.prototype.postProcessRowClassRules=function(){var t=this;this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,function(e){t.allRowGuis.forEach(function(t){return t.rowComp.addOrRemoveCssClass(e,!0)})},function(e){t.allRowGuis.forEach(function(t){return t.rowComp.addOrRemoveCssClass(e,!1)})})},e.prototype.setStylesFromGridOptions=function(t,e){var o=this;t&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(e,function(t){return t.rowComp.setUserStyles(o.rowStyles)})},e.prototype.getPinnedForContainer=function(t){return t===Ou.LEFT?"left":t===Ou.RIGHT?"right":null},e.prototype.getInitialRowClasses=function(t){var e=this.getPinnedForContainer(t),o={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[t],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:e};return this.beans.rowCssClassCalculator.getInitialRowClasses(o)},e.prototype.processStylesFromGridOptions=function(){var t=this.gridOptionsService.get("rowStyle");if(!t||"function"!==typeof t){var e,o=this.gridOptionsService.getCallback("getRowStyle");if(o)e=o({data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex});return e||t?Object.assign({},t,e):this.emptyStyle}console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead")},e.prototype.onRowSelected=function(t){var e=this,o=this.beans.gridOptionsService.getDocument(),n=!!this.rowNode.isSelected();this.forEachGui(t,function(t){t.rowComp.addOrRemoveCssClass("ag-row-selected",n),lo(t.element,n),!t.element.contains(o.activeElement)||t!==e.centerGui&&t!==e.fullWidthGui||e.announceDescription()})},e.prototype.announceDescription=function(){if(!this.isRowSelectionBlocked()){var t=this.rowNode.isSelected();if(!t||!this.beans.gridOptionsService.get("suppressRowDeselection")){var e=this.beans.localeService.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect","Press SPACE to ".concat(t?"deselect":"select"," this row."));this.beans.ariaAnnouncementService.announceValue(e)}}},e.prototype.isUseAnimationFrameForCreate=function(){return this.useAnimationFrameForCreate},e.prototype.addHoverFunctionality=function(t){var e=this;this.active&&(this.addManagedListener(t,"mouseenter",function(){return e.rowNode.onMouseEnter()}),this.addManagedListener(t,"mouseleave",function(){return e.rowNode.onMouseLeave()}),this.addManagedListener(this.rowNode,Fa.EVENT_MOUSE_ENTER,function(){e.beans.dragService.isDragging()||e.gridOptionsService.get("suppressRowHoverHighlight")||(t.classList.add("ag-row-hover"),e.rowNode.setHovered(!0))}),this.addManagedListener(this.rowNode,Fa.EVENT_MOUSE_LEAVE,function(){t.classList.remove("ag-row-hover"),e.rowNode.setHovered(!1)}))},e.prototype.roundRowTopToBounds=function(t){var e=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),o=this.applyPaginationOffset(e.top,!0)-100,n=this.applyPaginationOffset(e.bottom,!0)+100;return Math.min(Math.max(o,t),n)},e.prototype.getFrameworkOverrides=function(){return this.beans.frameworkOverrides},e.prototype.forEachGui=function(t,e){t?e(t):this.allRowGuis.forEach(e)},e.prototype.onRowHeightChanged=function(t){if(null!=this.rowNode.rowHeight){var e=this.rowNode.rowHeight,o=this.beans.environment.getDefaultRowHeight(),n=this.gridOptionsService.isGetRowHeightFunction()?this.gridOptionsService.getRowHeightForNode(this.rowNode).height:void 0,r=n?"".concat(Math.min(o,n)-2,"px"):void 0;this.forEachGui(t,function(t){t.element.style.height="".concat(e,"px"),r&&t.element.style.setProperty("--ag-line-height",r)})}},e.prototype.addEventListener=function(e,o){t.prototype.addEventListener.call(this,e,o)},e.prototype.removeEventListener=function(e,o){t.prototype.removeEventListener.call(this,e,o)},e.prototype.destroyFirstPass=function(e){if(void 0===e&&(e=!1),this.active=!1,!e&&this.gridOptionsService.isAnimateRows()&&!this.isSticky())if(null!=this.rowNode.rowTop){var o=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(o)}else this.allRowGuis.forEach(function(t){return t.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0)});this.rowNode.setHovered(!1);var n=this.createRowEvent(qt.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(n),this.beans.eventService.dispatchEvent(n),t.prototype.destroy.call(this)},e.prototype.destroySecondPass=function(){this.allRowGuis.length=0,this.stopEditing();var t=function(t){return t.list.forEach(function(t){return t.destroy()}),{list:[],map:{}}};this.centerCellCtrls=t(this.centerCellCtrls),this.leftCellCtrls=t(this.leftCellCtrls),this.rightCellCtrls=t(this.rightCellCtrls)},e.prototype.setFocusedClasses=function(t){var e=this;this.forEachGui(t,function(t){t.rowComp.addOrRemoveCssClass("ag-row-focus",e.rowFocused),t.rowComp.addOrRemoveCssClass("ag-row-no-focus",!e.rowFocused)})},e.prototype.onCellFocusChanged=function(){var t=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses()),!t&&this.editingRow&&this.stopEditing(!1)},e.prototype.onPaginationChanged=function(){var t=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==t&&(this.paginationPage=t,this.onTopChanged()),this.refreshFirstAndLastRowStyles()},e.prototype.onTopChanged=function(){this.setRowTop(this.rowNode.rowTop)},e.prototype.onPaginationPixelOffsetChanged=function(){this.onTopChanged()},e.prototype.applyPaginationOffset=function(t,e){return void 0===e&&(e=!1),this.rowNode.isRowPinned()||this.rowNode.sticky?t:t+this.beans.paginationProxy.getPixelOffset()*(e?1:-1)},e.prototype.setRowTop=function(t){if(!this.printLayout&&r(t)){var e=this.applyPaginationOffset(t),o=this.rowNode.isRowPinned()||this.rowNode.sticky?e:this.beans.rowContainerHeightService.getRealPixelPosition(e),n="".concat(o,"px");this.setRowTopStyle(n)}},e.prototype.getInitialRowTop=function(t){return this.suppressRowTransform?this.getInitialRowTopShared(t):void 0},e.prototype.getInitialTransform=function(t){return this.suppressRowTransform?void 0:"translateY(".concat(this.getInitialRowTopShared(t),")")},e.prototype.getInitialRowTopShared=function(t){if(this.printLayout)return"";var e;if(this.isSticky())e=this.rowNode.stickyRowTop;else{var o=this.slideInAnimation[t]?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,n=this.applyPaginationOffset(o);e=this.rowNode.isRowPinned()?n:this.beans.rowContainerHeightService.getRealPixelPosition(n)}return e+"px"},e.prototype.setRowTopStyle=function(t){var e=this;this.allRowGuis.forEach(function(o){return e.suppressRowTransform?o.rowComp.setTop(t):o.rowComp.setTransform("translateY(".concat(t,")"))})},e.prototype.getRowNode=function(){return this.rowNode},e.prototype.getCellCtrl=function(t){var e=null;return this.getAllCellCtrls().forEach(function(o){o.getColumn()==t&&(e=o)}),null!=e?e:(this.getAllCellCtrls().forEach(function(o){o.getColSpanningList().indexOf(t)>=0&&(e=o)}),e)},e.prototype.onRowIndexChanged=function(){null!=this.rowNode.rowIndex&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())},e.prototype.getRowIndex=function(){return this.rowNode.getRowIndexString()},e.prototype.updateRowIndexes=function(t){var e=this.rowNode.getRowIndexString(),o=this.beans.headerNavigationService.getHeaderRowCount()+this.beans.filterManager.getHeaderRowCount(),n=this.rowNode.rowIndex%2===0,r=o+this.rowNode.rowIndex+1;this.forEachGui(t,function(t){t.rowComp.setRowIndex(e),t.rowComp.addOrRemoveCssClass("ag-row-even",n),t.rowComp.addOrRemoveCssClass("ag-row-odd",!n),oo(t.element,r)})},e.DOM_DATA_KEY_ROW_CTRL="renderedRow",e}(Bt),Au=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Du=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Mu=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},Iu=function(t){function e(e){var o=t.call(this)||this;return o.element=e,o}return Au(e,t),e.prototype.postConstruct=function(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()},e.prototype.addKeyboardListeners=function(){var t=this.processKeyboardEvent.bind(this,"keydown");this.addManagedListener(this.element,"keydown",t)},e.prototype.addMouseListeners=function(){var t=this;["dblclick","contextmenu","mouseover","mouseout","click",Mt("touchstart")?"touchstart":"mousedown"].forEach(function(e){var o=t.processMouseEvent.bind(t,e);t.addManagedListener(t.element,e,o)})},e.prototype.processMouseEvent=function(t,e){if(this.mouseEventService.isEventFromThisGrid(e)&&!Dt(e)){var o=this.getRowForEvent(e),n=this.mouseEventService.getRenderedCellForEvent(e);"contextmenu"===t?this.handleContextMenuMouseEvent(e,void 0,o,n):(n&&n.onMouseEvent(t,e),o&&o.onMouseEvent(t,e))}},e.prototype.mockContextMenuForIPad=function(){var t=this;if(To()){var e=new ra(this.element);this.addManagedListener(e,ra.EVENT_LONG_TAP,function(e){var o=t.getRowForEvent(e.touchEvent),n=t.mouseEventService.getRenderedCellForEvent(e.touchEvent);t.handleContextMenuMouseEvent(void 0,e.touchEvent,o,n)}),this.addDestroyFunc(function(){return e.destroy()})}},e.prototype.getRowForEvent=function(t){for(var e=t.target;e;){var o=this.gridOptionsService.getDomData(e,Pu.DOM_DATA_KEY_ROW_CTRL);if(o)return o;e=e.parentElement}return null},e.prototype.handleContextMenuMouseEvent=function(t,e,o,n){var r=o?o.getRowNode():null,i=n?n.getColumn():null,a=null;if(i){var s=t||e;n.dispatchCellContextMenuEvent(null!==s&&void 0!==s?s:null),a=this.valueService.getValue(i,r)}var l=this.ctrlsService.getGridBodyCtrl(),u=n?n.getGui():l.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:t,touchEvent:e,rowNode:r,column:i,value:a,anchorToElement:u})},e.prototype.getControlsForEventTarget=function(t){return{cellCtrl:It(this.gridOptionsService,t,wu.DOM_DATA_KEY_CELL_CTRL),rowCtrl:It(this.gridOptionsService,t,Pu.DOM_DATA_KEY_ROW_CTRL)}},e.prototype.processKeyboardEvent=function(t,e){var o=this.getControlsForEventTarget(e.target),n=o.cellCtrl,r=o.rowCtrl;e.defaultPrevented||(n?this.processCellKeyboardEvent(n,t,e):r&&r.isFullWidth()&&this.processFullWidthRowKeyboardEvent(r,t,e))},e.prototype.processCellKeyboardEvent=function(t,e,o){var n=t.getRowNode(),r=t.getColumn(),i=t.isEditing();Jn(this.gridOptionsService,o,n,r,i)||"keydown"===e&&(!i&&this.navigationService.handlePageScrollingKey(o)||t.onKeyDown(o),this.doGridOperations(o,t.isEditing()),Xn(o)&&t.processCharacter(o));if("keydown"===e){var a=t.createEvent(o,qt.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(a)}},e.prototype.processFullWidthRowKeyboardEvent=function(t,e,o){var n=t.getRowNode(),r=this.focusService.getFocusedCell(),i=r&&r.column;if(!Jn(this.gridOptionsService,o,n,i,!1)){var a=o.key;if("keydown"===e)switch(a){case jn.PAGE_HOME:case jn.PAGE_END:case jn.PAGE_UP:case jn.PAGE_DOWN:this.navigationService.handlePageScrollingKey(o,!0);break;case jn.UP:case jn.DOWN:t.onKeyboardNavigate(o);break;case jn.TAB:t.onTabKeyDown(o)}}if("keydown"===e){var s=t.createRowEvent(qt.EVENT_CELL_KEY_DOWN,o);this.eventService.dispatchEvent(s)}},e.prototype.doGridOperations=function(t,e){if((t.ctrlKey||t.metaKey)&&!e&&this.mouseEventService.isEventFromThisGrid(t)){var o=$n(t);return o===jn.A?this.onCtrlAndA(t):o===jn.C?this.onCtrlAndC(t):o===jn.D?this.onCtrlAndD(t):o===jn.V?this.onCtrlAndV(t):o===jn.X?this.onCtrlAndX(t):o===jn.Y?this.onCtrlAndY():o===jn.Z?this.onCtrlAndZ(t):void 0}},e.prototype.onCtrlAndA=function(t){var e=this.pinnedRowModel,o=this.paginationProxy,n=this.rangeService;if(n&&o.isRowsToRender()){var r=Mu([e.isEmpty("top"),e.isEmpty("bottom")],2),i=r[0]?null:"top",s=void 0,l=void 0;r[1]?(s=null,l=this.paginationProxy.getRowCount()-1):(s="bottom",l=e.getPinnedBottomRowData().length-1);var u=this.columnModel.getAllDisplayedColumns();if(a(u))return;n.setCellRange({rowStartIndex:0,rowStartPinned:i,rowEndIndex:l,rowEndPinned:s,columnStart:u[0],columnEnd:ft(u)})}t.preventDefault()},e.prototype.onCtrlAndC=function(t){if(this.clipboardService&&!this.gridOptionsService.get("enableCellTextSelection")){var e=this.getControlsForEventTarget(t.target),o=e.cellCtrl,n=e.rowCtrl;(null===o||void 0===o?void 0:o.isEditing())||(null===n||void 0===n?void 0:n.isEditing())||(t.preventDefault(),this.clipboardService.copyToClipboard())}},e.prototype.onCtrlAndX=function(t){if(this.clipboardService&&!this.gridOptionsService.get("enableCellTextSelection")&&!this.gridOptionsService.get("suppressCutToClipboard")){var e=this.getControlsForEventTarget(t.target),o=e.cellCtrl,n=e.rowCtrl;(null===o||void 0===o?void 0:o.isEditing())||(null===n||void 0===n?void 0:n.isEditing())||(t.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}},e.prototype.onCtrlAndV=function(t){var e=this.getControlsForEventTarget(t.target),o=e.cellCtrl,n=e.rowCtrl;(null===o||void 0===o?void 0:o.isEditing())||(null===n||void 0===n?void 0:n.isEditing())||this.clipboardService&&!this.gridOptionsService.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()},e.prototype.onCtrlAndD=function(t){this.clipboardService&&!this.gridOptionsService.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),t.preventDefault()},e.prototype.onCtrlAndZ=function(t){this.gridOptionsService.get("undoRedoCellEditing")&&(t.preventDefault(),t.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))},e.prototype.onCtrlAndY=function(){this.undoRedoService.redo("ui")},Du([J("mouseEventService")],e.prototype,"mouseEventService",void 0),Du([J("valueService")],e.prototype,"valueService",void 0),Du([J("menuService")],e.prototype,"menuService",void 0),Du([J("ctrlsService")],e.prototype,"ctrlsService",void 0),Du([J("navigationService")],e.prototype,"navigationService",void 0),Du([J("focusService")],e.prototype,"focusService",void 0),Du([J("undoRedoService")],e.prototype,"undoRedoService",void 0),Du([J("columnModel")],e.prototype,"columnModel",void 0),Du([J("paginationProxy")],e.prototype,"paginationProxy",void 0),Du([J("pinnedRowModel")],e.prototype,"pinnedRowModel",void 0),Du([Q("rangeService")],e.prototype,"rangeService",void 0),Du([Q("clipboardService")],e.prototype,"clipboardService",void 0),Du([Y],e.prototype,"postConstruct",null),e}(Bt),Lu=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Fu=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Nu=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},ku=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},Gu=function(t){function e(e){var o=t.call(this)||this;return o.centerContainerCtrl=e,o}return Lu(e,t),e.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady(function(){t.gridBodyCtrl=t.ctrlsService.getGridBodyCtrl(),t.listenForResize()}),this.addManagedListener(this.eventService,qt.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this)),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],function(){t.checkViewportAndScrolls()})},e.prototype.listenForResize=function(){var t=this,e=function(){return t.onCenterViewportResized()};this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)},e.prototype.onScrollbarWidthChanged=function(){this.checkViewportAndScrolls()},e.prototype.onCenterViewportResized=function(){if(this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();var t=this.centerContainerCtrl.getCenterWidth();t!==this.centerWidth&&(this.centerWidth=t,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0},e.prototype.keepPinnedColumnsNarrowerThanViewport=function(){var t=rn(this.gridBodyCtrl.getBodyViewportElement());if(!(t<=50)){var e=this.getPinnedColumnsOverflowingViewport(t-50),o=this.gridOptionsService.getCallback("processUnpinnedColumns");if(e.length){if(o)e=o({columns:e,viewportWidth:t});this.columnModel.setColumnsPinned(e,null,"viewportSizeFeature")}}},e.prototype.getPinnedColumnsOverflowingViewport=function(t){var e=this.pinnedWidthService.getPinnedRightWidth()+this.pinnedWidthService.getPinnedLeftWidth();if(e<t)return[];for(var o=ku([],Nu(this.columnModel.getDisplayedLeftColumns()),!1),n=ku([],Nu(this.columnModel.getDisplayedRightColumns()),!1),r=0,i=0,a=[],s=e-0-t;(i<o.length||r<n.length)&&s>0;){var l;if(r<n.length)s-=(l=n[r++]).getActualWidth(),a.push(l);if(i<o.length&&s>0)s-=(l=o[i++]).getActualWidth(),a.push(l)}return a},e.prototype.checkViewportAndScrolls=function(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()},e.prototype.getBodyHeight=function(){return this.bodyHeight},e.prototype.checkBodyHeight=function(){var t=nn(this.gridBodyCtrl.getBodyViewportElement());if(this.bodyHeight!==t){this.bodyHeight=t;var e={type:qt.EVENT_BODY_HEIGHT_CHANGED};this.eventService.dispatchEvent(e)}},e.prototype.updateScrollVisibleService=function(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)},e.prototype.updateScrollVisibleServiceImpl=function(){var t={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(t)},e.prototype.isHorizontalScrollShowing=function(){return this.centerContainerCtrl.isHorizontalScrollShowing()},e.prototype.onHorizontalViewportChanged=function(){var t=this.centerContainerCtrl.getCenterWidth(),e=this.centerContainerCtrl.getViewportScrollLeft();this.columnModel.setViewportPosition(t,e)},Fu([J("ctrlsService")],e.prototype,"ctrlsService",void 0),Fu([J("pinnedWidthService")],e.prototype,"pinnedWidthService",void 0),Fu([J("columnModel")],e.prototype,"columnModel",void 0),Fu([J("scrollVisibleService")],e.prototype,"scrollVisibleService",void 0),Fu([Y],e.prototype,"postConstruct",null),e}(Bt),Vu=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Bu=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},zu=function(t){function e(e){var o=t.call(this)||this;return o.element=e,o}return Vu(e,t),e.prototype.postConstruct=function(){this.addManagedListener(this.eventService,qt.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))},e.prototype.onPinnedLeftWidthChanged=function(){var t=this.pinnedWidthService.getPinnedLeftWidth(),e=t>0;Qo(this.element,e),En(this.element,t)},e.prototype.getWidth=function(){return this.pinnedWidthService.getPinnedLeftWidth()},Bu([J("pinnedWidthService")],e.prototype,"pinnedWidthService",void 0),Bu([Y],e.prototype,"postConstruct",null),e}(Bt),Hu=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ju=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Uu=function(t){function e(e){var o=t.call(this)||this;return o.element=e,o}return Hu(e,t),e.prototype.postConstruct=function(){this.addManagedListener(this.eventService,qt.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))},e.prototype.onPinnedRightWidthChanged=function(){var t=this.pinnedWidthService.getPinnedRightWidth(),e=t>0;Qo(this.element,e),En(this.element,t)},e.prototype.getWidth=function(){return this.pinnedWidthService.getPinnedRightWidth()},ju([J("pinnedWidthService")],e.prototype,"pinnedWidthService",void 0),ju([Y],e.prototype,"postConstruct",null),e}(Bt),Wu=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ku=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},qu=function(t){function e(e,o){var n=t.call(this)||this;return n.eContainer=e,n.eViewport=o,n}return Wu(e,t),e.prototype.postConstruct=function(){this.addManagedListener(this.eventService,qt.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))},e.prototype.onHeightChanged=function(){var t=this.maxDivHeightScaler.getUiContainerHeight(),e=null!=t?"".concat(t,"px"):"";this.eContainer.style.height=e,this.eViewport&&(this.eViewport.style.height=e)},Ku([J("rowContainerHeightService")],e.prototype,"maxDivHeightScaler",void 0),Ku([Y],e.prototype,"postConstruct",null),e}(Bt),Yu=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Zu=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Xu=function(t){function e(e){var o=t.call(this)||this;return o.eContainer=e,o}return Yu(e,t),e.prototype.postConstruct=function(){var t=this;i(this.rangeService)||(this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListener("enableRangeSelection",function(e){e.currentValue?t.enableFeature():t.disableFeature()}),this.addDestroyFunc(function(){return t.disableFeature()}),this.gridOptionsService.get("enableRangeSelection")&&this.enableFeature())},e.prototype.enableFeature=function(){this.dragService.addDragSource(this.params)},e.prototype.disableFeature=function(){this.dragService.removeDragSource(this.params)},Zu([Q("rangeService")],e.prototype,"rangeService",void 0),Zu([J("dragService")],e.prototype,"dragService",void 0),Zu([Y],e.prototype,"postConstruct",null),e}(Bt),Ju=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Qu=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},$u=function(t){function e(e,o){void 0===o&&(o=!1);var n=t.call(this)||this;return n.callback=e,n.addSpacer=o,n}return Ju(e,t),e.prototype.postConstruct=function(){var t=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",t),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,t),this.addManagedListener(this.eventService,qt.EVENT_DISPLAYED_COLUMNS_CHANGED,t),this.addManagedListener(this.eventService,qt.EVENT_LEFT_PINNED_WIDTH_CHANGED,t),this.addSpacer&&(this.addManagedListener(this.eventService,qt.EVENT_RIGHT_PINNED_WIDTH_CHANGED,t),this.addManagedListener(this.eventService,qt.EVENT_SCROLL_VISIBILITY_CHANGED,t),this.addManagedListener(this.eventService,qt.EVENT_SCROLLBAR_WIDTH_CHANGED,t)),this.setWidth()},e.prototype.setWidth=function(){var t,e=this.columnModel,o=this.gridOptionsService.isDomLayout("print"),n=e.getBodyContainerWidth(),r=e.getDisplayedColumnsLeftWidth(),i=e.getDisplayedColumnsRightWidth();o?t=n+r+i:(t=n,this.addSpacer&&0===(this.gridOptionsService.get("enableRtl")?r:i)&&this.scrollVisibleService.isVerticalScrollShowing()&&(t+=this.gridOptionsService.getScrollbarWidth()));this.callback(t)},Qu([J("columnModel")],e.prototype,"columnModel",void 0),Qu([J("scrollVisibleService")],e.prototype,"scrollVisibleService",void 0),Qu([Y],e.prototype,"postConstruct",null),e}(Bt),tc=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ec=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},oc=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},nc=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))};function rc(t){switch(t){case Tu.CENTER:case Tu.TOP_CENTER:case Tu.STICKY_TOP_CENTER:case Tu.BOTTOM_CENTER:return Ou.CENTER;case Tu.LEFT:case Tu.TOP_LEFT:case Tu.STICKY_TOP_LEFT:case Tu.BOTTOM_LEFT:return Ou.LEFT;case Tu.RIGHT:case Tu.TOP_RIGHT:case Tu.STICKY_TOP_RIGHT:case Tu.BOTTOM_RIGHT:return Ou.RIGHT;case Tu.FULL_WIDTH:case Tu.TOP_FULL_WIDTH:case Tu.STICKY_TOP_FULL_WIDTH:case Tu.BOTTOM_FULL_WIDTH:return Ou.FULL_WIDTH;default:throw Error("Invalid Row Container Type")}}!function(t){t.LEFT="left",t.RIGHT="right",t.CENTER="center",t.FULL_WIDTH="fullWidth",t.TOP_LEFT="topLeft",t.TOP_RIGHT="topRight",t.TOP_CENTER="topCenter",t.TOP_FULL_WIDTH="topFullWidth",t.STICKY_TOP_LEFT="stickyTopLeft",t.STICKY_TOP_RIGHT="stickyTopRight",t.STICKY_TOP_CENTER="stickyTopCenter",t.STICKY_TOP_FULL_WIDTH="stickyTopFullWidth",t.BOTTOM_LEFT="bottomLeft",t.BOTTOM_RIGHT="bottomRight",t.BOTTOM_CENTER="bottomCenter",t.BOTTOM_FULL_WIDTH="bottomFullWidth"}(Tu||(Tu={})),function(t){t.LEFT="left",t.RIGHT="right",t.CENTER="center",t.FULL_WIDTH="fullWidth"}(Ou||(Ou={}));var ic=ie([[Tu.CENTER,"ag-center-cols-container"],[Tu.LEFT,"ag-pinned-left-cols-container"],[Tu.RIGHT,"ag-pinned-right-cols-container"],[Tu.FULL_WIDTH,"ag-full-width-container"],[Tu.TOP_CENTER,"ag-floating-top-container"],[Tu.TOP_LEFT,"ag-pinned-left-floating-top"],[Tu.TOP_RIGHT,"ag-pinned-right-floating-top"],[Tu.TOP_FULL_WIDTH,"ag-floating-top-full-width-container"],[Tu.STICKY_TOP_CENTER,"ag-sticky-top-container"],[Tu.STICKY_TOP_LEFT,"ag-pinned-left-sticky-top"],[Tu.STICKY_TOP_RIGHT,"ag-pinned-right-sticky-top"],[Tu.STICKY_TOP_FULL_WIDTH,"ag-sticky-top-full-width-container"],[Tu.BOTTOM_CENTER,"ag-floating-bottom-container"],[Tu.BOTTOM_LEFT,"ag-pinned-left-floating-bottom"],[Tu.BOTTOM_RIGHT,"ag-pinned-right-floating-bottom"],[Tu.BOTTOM_FULL_WIDTH,"ag-floating-bottom-full-width-container"]]),ac=ie([[Tu.CENTER,"ag-center-cols-viewport"],[Tu.TOP_CENTER,"ag-floating-top-viewport"],[Tu.STICKY_TOP_CENTER,"ag-sticky-top-viewport"],[Tu.BOTTOM_CENTER,"ag-floating-bottom-viewport"]]),sc=function(t){function e(e){var o=t.call(this)||this;return o.visible=!0,o.EMPTY_CTRLS=[],o.name=e,o.isFullWithContainer=o.name===Tu.TOP_FULL_WIDTH||o.name===Tu.STICKY_TOP_FULL_WIDTH||o.name===Tu.BOTTOM_FULL_WIDTH||o.name===Tu.FULL_WIDTH,o}return tc(e,t),e.getRowContainerCssClasses=function(t){return{container:ic.get(t),viewport:ac.get(t)}},e.getPinned=function(t){switch(t){case Tu.BOTTOM_LEFT:case Tu.TOP_LEFT:case Tu.STICKY_TOP_LEFT:case Tu.LEFT:return"left";case Tu.BOTTOM_RIGHT:case Tu.TOP_RIGHT:case Tu.STICKY_TOP_RIGHT:case Tu.RIGHT:return"right";default:return null}},e.prototype.postConstruct=function(){var t=this;this.enableRtl=this.gridOptionsService.get("enableRtl"),this.forContainers([Tu.CENTER],function(){return t.viewportSizeFeature=t.createManagedBean(new Gu(t))})},e.prototype.registerWithCtrlsService=function(){switch(this.name){case Tu.CENTER:this.ctrlsService.registerCenterRowContainerCtrl(this);break;case Tu.LEFT:this.ctrlsService.registerLeftRowContainerCtrl(this);break;case Tu.RIGHT:this.ctrlsService.registerRightRowContainerCtrl(this);break;case Tu.TOP_CENTER:this.ctrlsService.registerTopCenterRowContainerCtrl(this);break;case Tu.TOP_LEFT:this.ctrlsService.registerTopLeftRowContainerCon(this);break;case Tu.TOP_RIGHT:this.ctrlsService.registerTopRightRowContainerCtrl(this);break;case Tu.STICKY_TOP_CENTER:this.ctrlsService.registerStickyTopCenterRowContainerCtrl(this);break;case Tu.STICKY_TOP_LEFT:this.ctrlsService.registerStickyTopLeftRowContainerCon(this);break;case Tu.STICKY_TOP_RIGHT:this.ctrlsService.registerStickyTopRightRowContainerCtrl(this);break;case Tu.BOTTOM_CENTER:this.ctrlsService.registerBottomCenterRowContainerCtrl(this);break;case Tu.BOTTOM_LEFT:this.ctrlsService.registerBottomLeftRowContainerCtrl(this);break;case Tu.BOTTOM_RIGHT:this.ctrlsService.registerBottomRightRowContainerCtrl(this)}},e.prototype.forContainers=function(t,e){t.indexOf(this.name)>=0&&e()},e.prototype.getContainerElement=function(){return this.eContainer},e.prototype.getViewportSizeFeature=function(){return this.viewportSizeFeature},e.prototype.setComp=function(t,e,o){var n=this;this.comp=t,this.eContainer=e,this.eViewport=o,this.createManagedBean(new Iu(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();var r=[Tu.TOP_CENTER,Tu.TOP_LEFT,Tu.TOP_RIGHT],i=[Tu.STICKY_TOP_CENTER,Tu.STICKY_TOP_LEFT,Tu.STICKY_TOP_RIGHT],a=[Tu.BOTTOM_CENTER,Tu.BOTTOM_LEFT,Tu.BOTTOM_RIGHT],s=[Tu.CENTER,Tu.LEFT,Tu.RIGHT],l=nc(nc(nc(nc([],oc(r),!1),oc(a),!1),oc(s),!1),oc(i),!1),u=[Tu.CENTER,Tu.LEFT,Tu.RIGHT,Tu.FULL_WIDTH],c=[Tu.CENTER,Tu.TOP_CENTER,Tu.STICKY_TOP_CENTER,Tu.BOTTOM_CENTER],p=[Tu.LEFT,Tu.BOTTOM_LEFT,Tu.TOP_LEFT,Tu.STICKY_TOP_LEFT],d=[Tu.RIGHT,Tu.BOTTOM_RIGHT,Tu.TOP_RIGHT,Tu.STICKY_TOP_RIGHT];this.forContainers(p,function(){n.pinnedWidthFeature=n.createManagedBean(new zu(n.eContainer)),n.addManagedListener(n.eventService,qt.EVENT_LEFT_PINNED_WIDTH_CHANGED,function(){return n.onPinnedWidthChanged()})}),this.forContainers(d,function(){n.pinnedWidthFeature=n.createManagedBean(new Uu(n.eContainer)),n.addManagedListener(n.eventService,qt.EVENT_RIGHT_PINNED_WIDTH_CHANGED,function(){return n.onPinnedWidthChanged()})}),this.forContainers(u,function(){return n.createManagedBean(new qu(n.eContainer,n.name===Tu.CENTER?o:void 0))}),this.forContainers(l,function(){return n.createManagedBean(new Xu(n.eContainer))}),this.forContainers(c,function(){return n.createManagedBean(new $u(function(t){return n.comp.setContainerWidth("".concat(t,"px"))}))}),this.addListeners(),this.registerWithCtrlsService()},e.prototype.addListeners=function(){var t=this;this.addManagedListener(this.eventService,qt.EVENT_DISPLAYED_COLUMNS_CHANGED,function(){return t.onDisplayedColumnsChanged()}),this.addManagedListener(this.eventService,qt.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,function(){return t.onDisplayedColumnsWidthChanged()}),this.addManagedListener(this.eventService,qt.EVENT_DISPLAYED_ROWS_CHANGED,function(e){return t.onDisplayedRowsChanged(e.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()},e.prototype.listenOnDomOrder=function(){var t=this;if([Tu.STICKY_TOP_CENTER,Tu.STICKY_TOP_LEFT,Tu.STICKY_TOP_RIGHT,Tu.STICKY_TOP_FULL_WIDTH].indexOf(this.name)>=0)this.comp.setDomOrder(!0);else{var e=function(){var e=t.gridOptionsService.get("ensureDomOrder"),o=t.gridOptionsService.isDomLayout("print");t.comp.setDomOrder(e||o)};this.addManagedPropertyListener("domLayout",e),e()}},e.prototype.stopHScrollOnPinnedRows=function(){var t=this;this.forContainers([Tu.TOP_CENTER,Tu.STICKY_TOP_CENTER,Tu.BOTTOM_CENTER],function(){t.addManagedListener(t.eViewport,"scroll",function(){return t.eViewport.scrollLeft=0})})},e.prototype.onDisplayedColumnsChanged=function(){var t=this;this.forContainers([Tu.CENTER],function(){return t.onHorizontalViewportChanged()})},e.prototype.onDisplayedColumnsWidthChanged=function(){var t=this;this.forContainers([Tu.CENTER],function(){return t.onHorizontalViewportChanged()})},e.prototype.addPreventScrollWhileDragging=function(){var t=this,e=function(e){t.dragService.isDragging()&&e.cancelable&&e.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(function(){return t.eContainer.removeEventListener("touchmove",e)})},e.prototype.onHorizontalViewportChanged=function(t){void 0===t&&(t=!1);var e=this.getCenterWidth(),o=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(e,o,t)},e.prototype.getCenterWidth=function(){return rn(this.eViewport)},e.prototype.getCenterViewportScrollLeft=function(){return cn(this.eViewport,this.enableRtl)},e.prototype.registerViewportResizeListener=function(t){var e=this.resizeObserverService.observeResize(this.eViewport,t);this.addDestroyFunc(function(){return e()})},e.prototype.isViewportInTheDOMTree=function(){return fn(this.eViewport)},e.prototype.getViewportScrollLeft=function(){return cn(this.eViewport,this.enableRtl)},e.prototype.isHorizontalScrollShowing=function(){return this.gridOptionsService.get("alwaysShowHorizontalScroll")||wn(this.eViewport)},e.prototype.getViewportElement=function(){return this.eViewport},e.prototype.setContainerTranslateX=function(t){this.eContainer.style.transform="translateX(".concat(t,"px)")},e.prototype.getHScrollPosition=function(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}},e.prototype.setCenterViewportScrollLeft=function(t){pn(this.eViewport,t,this.enableRtl)},e.prototype.isContainerVisible=function(){return!e.getPinned(this.name)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0},e.prototype.onPinnedWidthChanged=function(){var t=this.isContainerVisible();this.visible!=t&&(this.visible=t,this.onDisplayedRowsChanged())},e.prototype.onDisplayedRowsChanged=function(t){var e=this;if(void 0===t&&(t=!1),this.visible){var o=this.gridOptionsService.isDomLayout("print"),n=this.gridOptionsService.get("embedFullWidthRows")||o,r=this.getRowCtrls().filter(function(t){var o=t.isFullWidth();return e.isFullWithContainer?!n&&o:n||!o});this.comp.setRowCtrls({rowCtrls:r,useFlushSync:t})}else this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS})},e.prototype.getRowCtrls=function(){switch(this.name){case Tu.TOP_CENTER:case Tu.TOP_LEFT:case Tu.TOP_RIGHT:case Tu.TOP_FULL_WIDTH:return this.rowRenderer.getTopRowCtrls();case Tu.STICKY_TOP_CENTER:case Tu.STICKY_TOP_LEFT:case Tu.STICKY_TOP_RIGHT:case Tu.STICKY_TOP_FULL_WIDTH:return this.rowRenderer.getStickyTopRowCtrls();case Tu.BOTTOM_CENTER:case Tu.BOTTOM_LEFT:case Tu.BOTTOM_RIGHT:case Tu.BOTTOM_FULL_WIDTH:return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getCentreRowCtrls()}},ec([J("dragService")],e.prototype,"dragService",void 0),ec([J("ctrlsService")],e.prototype,"ctrlsService",void 0),ec([J("columnModel")],e.prototype,"columnModel",void 0),ec([J("resizeObserverService")],e.prototype,"resizeObserverService",void 0),ec([J("rowRenderer")],e.prototype,"rowRenderer",void 0),ec([Y],e.prototype,"postConstruct",null),e}(Bt),lc=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),uc=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},cc='<div class="ag-root ag-unselectable" role="treegrid">\n        <ag-header-root ref="gridHeader"></ag-header-root>\n        <div class="ag-floating-top" ref="eTop" role="presentation">\n            <ag-row-container ref="topLeftContainer" name="'.concat(Tu.TOP_LEFT,'"></ag-row-container>\n            <ag-row-container ref="topCenterContainer" name="').concat(Tu.TOP_CENTER,'"></ag-row-container>\n            <ag-row-container ref="topRightContainer" name="').concat(Tu.TOP_RIGHT,'"></ag-row-container>\n            <ag-row-container ref="topFullWidthContainer" name="').concat(Tu.TOP_FULL_WIDTH,'"></ag-row-container>\n        </div>\n        <div class="ag-body" ref="eBody" role="presentation">\n            <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">\n                <ag-row-container ref="leftContainer" name="').concat(Tu.LEFT,'"></ag-row-container>\n                <ag-row-container ref="centerContainer" name="').concat(Tu.CENTER,'"></ag-row-container>\n                <ag-row-container ref="rightContainer" name="').concat(Tu.RIGHT,'"></ag-row-container>\n                <ag-row-container ref="fullWidthContainer" name="').concat(Tu.FULL_WIDTH,'"></ag-row-container>\n            </div>\n            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>\n        </div>\n        <div class="ag-sticky-top" ref="eStickyTop" role="presentation">\n            <ag-row-container ref="stickyTopLeftContainer" name="').concat(Tu.STICKY_TOP_LEFT,'"></ag-row-container>\n            <ag-row-container ref="stickyTopCenterContainer" name="').concat(Tu.STICKY_TOP_CENTER,'"></ag-row-container>\n            <ag-row-container ref="stickyTopRightContainer" name="').concat(Tu.STICKY_TOP_RIGHT,'"></ag-row-container>\n            <ag-row-container ref="stickyTopFullWidthContainer" name="').concat(Tu.STICKY_TOP_FULL_WIDTH,'"></ag-row-container>\n        </div>\n        <div class="ag-floating-bottom" ref="eBottom" role="presentation">\n            <ag-row-container ref="bottomLeftContainer" name="').concat(Tu.BOTTOM_LEFT,'"></ag-row-container>\n            <ag-row-container ref="bottomCenterContainer" name="').concat(Tu.BOTTOM_CENTER,'"></ag-row-container>\n            <ag-row-container ref="bottomRightContainer" name="').concat(Tu.BOTTOM_RIGHT,'"></ag-row-container>\n            <ag-row-container ref="bottomFullWidthContainer" name="').concat(Tu.BOTTOM_FULL_WIDTH,'"></ag-row-container>\n        </div>\n        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>\n        <ag-overlay-wrapper></ag-overlay-wrapper>\n    </div>'),pc=function(t){function e(){return t.call(this,cc)||this}return lc(e,t),e.prototype.init=function(){var t=this,e=function(t,e){var o="".concat(t,"px");e.style.minHeight=o,e.style.height=o},o={setRowAnimationCssOnBodyViewport:function(e,o){return t.setRowAnimationCssOnBodyViewport(e,o)},setColumnCount:function(e){return no(t.getGui(),e)},setRowCount:function(e){return eo(t.getGui(),e)},setTopHeight:function(o){return e(o,t.eTop)},setBottomHeight:function(o){return e(o,t.eBottom)},setTopDisplay:function(e){return t.eTop.style.display=e},setBottomDisplay:function(e){return t.eBottom.style.display=e},setStickyTopHeight:function(e){return t.eStickyTop.style.height=e},setStickyTopTop:function(e){return t.eStickyTop.style.top=e},setStickyTopWidth:function(e){return t.eStickyTop.style.width=e},setColumnMovingCss:function(e,o){return t.addOrRemoveCssClass(e,o)},updateLayoutClasses:function(e,o){[t.eBodyViewport.classList,t.eBody.classList].forEach(function(t){t.toggle(vl.AUTO_HEIGHT,o.autoHeight),t.toggle(vl.NORMAL,o.normal),t.toggle(vl.PRINT,o.print)}),t.addOrRemoveCssClass(vl.AUTO_HEIGHT,o.autoHeight),t.addOrRemoveCssClass(vl.NORMAL,o.normal),t.addOrRemoveCssClass(vl.PRINT,o.print)},setAlwaysVerticalScrollClass:function(e,o){return t.eBodyViewport.classList.toggle("ag-force-vertical-scroll",o)},registerBodyViewportResizeListener:function(e){var o=t.resizeObserverService.observeResize(t.eBodyViewport,e);t.addDestroyFunc(function(){return o()})},setPinnedTopBottomOverflowY:function(e){return t.eTop.style.overflowY=t.eBottom.style.overflowY=e},setCellSelectableCss:function(e,o){[t.eTop,t.eBodyViewport,t.eBottom].forEach(function(t){return t.classList.toggle(e,o)})},setBodyViewportWidth:function(e){return t.eBodyViewport.style.width=e}};this.ctrl=this.createManagedBean(new Jl),this.ctrl.setComp(o,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop),(this.rangeService&&this.gridOptionsService.get("enableRangeSelection")||"multiple"===this.gridOptionsService.get("rowSelection"))&&to(this.getGui(),!0)},e.prototype.setRowAnimationCssOnBodyViewport=function(t,e){var o=this.eBodyViewport.classList;o.toggle(Vl.ANIMATION_ON,e),o.toggle(Vl.ANIMATION_OFF,!e)},e.prototype.getFloatingTopBottom=function(){return[this.eTop,this.eBottom]},uc([J("resizeObserverService")],e.prototype,"resizeObserverService",void 0),uc([Q("rangeService")],e.prototype,"rangeService",void 0),uc([xr("eBodyViewport")],e.prototype,"eBodyViewport",void 0),uc([xr("eStickyTop")],e.prototype,"eStickyTop",void 0),uc([xr("eTop")],e.prototype,"eTop",void 0),uc([xr("eBottom")],e.prototype,"eBottom",void 0),uc([xr("gridHeader")],e.prototype,"headerRootComp",void 0),uc([xr("eBody")],e.prototype,"eBody",void 0),uc([Y],e.prototype,"init",null),e}(Sr),dc=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),hc=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},fc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return dc(e,t),e.prototype.postConstruct=function(){this.addManagedListener(this.eventService,qt.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))},e.prototype.onDisplayedColumnsChanged=function(){this.update()},e.prototype.onDisplayedColumnsWidthChanged=function(){this.update()},e.prototype.update=function(){var t=this;this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(function(){t.columnAnimationService.executeLaterVMTurn(function(){return t.updateImpl()})}):this.updateImpl()},e.prototype.updateImpl=function(){var t=this.ctrlsService.getCenterRowContainerCtrl();if(t&&!this.columnAnimationService.isActive()){var e={horizontalScrollShowing:t.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(e)}},e.prototype.setScrollsVisible=function(t){if(this.horizontalScrollShowing!==t.horizontalScrollShowing||this.verticalScrollShowing!==t.verticalScrollShowing){this.horizontalScrollShowing=t.horizontalScrollShowing,this.verticalScrollShowing=t.verticalScrollShowing;var e={type:qt.EVENT_SCROLL_VISIBILITY_CHANGED};this.eventService.dispatchEvent(e)}},e.prototype.isHorizontalScrollShowing=function(){return this.horizontalScrollShowing},e.prototype.isVerticalScrollShowing=function(){return this.verticalScrollShowing},hc([J("ctrlsService")],e.prototype,"ctrlsService",void 0),hc([J("columnAnimationService")],e.prototype,"columnAnimationService",void 0),hc([Y],e.prototype,"postConstruct",null),e=hc([X("scrollVisibleService")],e)}(Bt),gc=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),yc=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},vc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gridInstanceId=o.gridInstanceSequence.next(),e}var o;return gc(e,t),o=e,e.prototype.stampTopLevelGridCompWithGridInstance=function(t){t[o.GRID_DOM_KEY]=this.gridInstanceId},e.prototype.getRenderedCellForEvent=function(t){return It(this.gridOptionsService,t.target,wu.DOM_DATA_KEY_CELL_CTRL)},e.prototype.isEventFromThisGrid=function(t){return this.isElementInThisGrid(t.target)},e.prototype.isElementInThisGrid=function(t){for(var e=t;e;){var n=e[o.GRID_DOM_KEY];if(r(n))return n===this.gridInstanceId;e=e.parentElement}return!1},e.prototype.getCellPositionForEvent=function(t){var e=this.getRenderedCellForEvent(t);return e?e.getCellPosition():null},e.prototype.getNormalisedPosition=function(t){var e,o,n=this.gridOptionsService.isDomLayout("normal"),r=t;if(null!=r.clientX||null!=r.clientY?(e=r.clientX,o=r.clientY):(e=r.x,o=r.y),n){var i=this.ctrlsService.getGridBodyCtrl(),a=i.getScrollFeature().getVScrollPosition();e+=i.getScrollFeature().getHScrollPosition().left,o+=a.top}return{x:e,y:o}},e.gridInstanceSequence=new cr,e.GRID_DOM_KEY="__ag_grid_instance",yc([J("ctrlsService")],e.prototype,"ctrlsService",void 0),e=o=yc([X("mouseEventService")],e)}(Bt),mc=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Cc=function(){return(Cc=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},_c=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},wc=function(t){function e(){var e=t.call(this)||this;return e.onPageDown=k(e.onPageDown,100),e.onPageUp=k(e.onPageUp,100),e}return mc(e,t),e.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady(function(e){t.gridBodyCon=e.gridBodyCtrl})},e.prototype.handlePageScrollingKey=function(t,e){void 0===e&&(e=!1);var o=t.key,n=t.altKey,r=t.ctrlKey||t.metaKey,i=!!this.rangeService&&t.shiftKey,a=this.mouseEventService.getCellPositionForEvent(t),s=!1;switch(o){case jn.PAGE_HOME:case jn.PAGE_END:r||n||(this.onHomeOrEndKey(o),s=!0);break;case jn.LEFT:case jn.RIGHT:case jn.UP:case jn.DOWN:if(!a)return!1;!r||n||i||(this.onCtrlUpDownLeftRight(o,a),s=!0);break;case jn.PAGE_DOWN:case jn.PAGE_UP:r||n||(s=this.handlePageUpDown(o,a,e))}return s&&t.preventDefault(),s},e.prototype.handlePageUpDown=function(t,e,o){return o&&(e=this.focusService.getFocusedCell()),!!e&&(t===jn.PAGE_UP?this.onPageUp(e):this.onPageDown(e),!0)},e.prototype.navigateTo=function(t){var e=t.scrollIndex,o=t.scrollType,n=t.scrollColumn,i=t.focusIndex,a=t.focusColumn;if(r(n)&&!n.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(n),r(e)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e,o),t.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(i),this.focusService.setFocusedCell({rowIndex:i,column:a,rowPinned:null,forceBrowserFocus:!0}),this.rangeService){var s={rowIndex:i,rowPinned:null,column:a};this.rangeService.setRangeToCell(s)}},e.prototype.onPageDown=function(t){var e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),o=this.getViewportHeight(),n=this.paginationProxy.getPixelOffset(),r=e.top+o,i=this.paginationProxy.getRowIndexAtPixel(r+n);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(t,i):this.navigateToNextPage(t,i)},e.prototype.onPageUp=function(t){var e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),o=this.paginationProxy.getPixelOffset(),n=e.top,r=this.paginationProxy.getRowIndexAtPixel(n+o);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(t,r,!0):this.navigateToNextPage(t,r,!0)},e.prototype.navigateToNextPage=function(t,e,o){void 0===o&&(o=!1);var n,r=this.getViewportHeight(),i=this.paginationProxy.getPageFirstRow(),a=this.paginationProxy.getPageLastRow(),s=this.paginationProxy.getPixelOffset(),l=this.paginationProxy.getRow(t.rowIndex),u=o?(null===l||void 0===l?void 0:l.rowHeight)-r-s:r-s,c=(null===l||void 0===l?void 0:l.rowTop)+u,p=this.paginationProxy.getRowIndexAtPixel(c+s);if(p===t.rowIndex){var d=o?-1:1;e=p=t.rowIndex+d}o?(n="bottom",p<i&&(p=i),e<i&&(e=i)):(n="top",p>a&&(p=a),e>a&&(e=a)),this.isRowTallerThanView(p)&&(e=p,n="top"),this.navigateTo({scrollIndex:e,scrollType:n,scrollColumn:null,focusIndex:p,focusColumn:t.column})},e.prototype.navigateToNextPageWithAutoHeight=function(t,e,o){var n=this;void 0===o&&(o=!1),this.navigateTo({scrollIndex:e,scrollType:o?"bottom":"top",scrollColumn:null,focusIndex:e,focusColumn:t.column}),setTimeout(function(){var r=n.getNextFocusIndexForAutoHeight(t,o);n.navigateTo({scrollIndex:e,scrollType:o?"bottom":"top",scrollColumn:null,focusIndex:r,focusColumn:t.column,isAsync:!0})},50)},e.prototype.getNextFocusIndexForAutoHeight=function(t,e){var o;void 0===e&&(e=!1);for(var n=e?-1:1,r=this.getViewportHeight(),i=this.paginationProxy.getPageLastRow(),a=0,s=t.rowIndex;s>=0&&s<=i;){var l=this.paginationProxy.getRow(s);if(l){var u=null!==(o=l.rowHeight)&&void 0!==o?o:0;if(a+u>r)break;a+=u}s+=n}return Math.max(0,Math.min(s,i))},e.prototype.getViewportHeight=function(){var t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),e=this.gridOptionsService.getScrollbarWidth(),o=t.bottom-t.top;return this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()&&(o-=e),o},e.prototype.isRowTallerThanView=function(t){var e=this.paginationProxy.getRow(t);if(!e)return!1;var o=e.rowHeight;return"number"===typeof o&&o>this.getViewportHeight()},e.prototype.onCtrlUpDownLeftRight=function(t,e){var o=this.cellNavigationService.getNextCellToFocus(t,e,!0),n=o.rowIndex,r=o.column;this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:r,focusIndex:n,focusColumn:r})},e.prototype.onHomeOrEndKey=function(t){var e=t===jn.PAGE_HOME,o=this.columnModel.getAllDisplayedColumns(),n=e?o[0]:ft(o),r=e?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:n,focusIndex:r,focusColumn:n})},e.prototype.onTabKeyDown=function(t,e){var o=e.shiftKey;if(this.tabToNextCellCommon(t,o,e))e.preventDefault();else if(o){var n=t.getRowPosition(),r=n.rowIndex;(n.rowPinned?0===r:r===this.paginationProxy.getPageFirstRow())&&(0===this.gridOptionsService.get("headerHeight")||this.gridOptionsService.get("suppressHeaderFocus")?this.focusService.focusNextGridCoreContainer(!0,!0):(e.preventDefault(),this.focusService.focusPreviousFromFirstCell(e)))}else t instanceof wu&&t.focusCell(!0),this.focusService.focusNextGridCoreContainer(o)&&e.preventDefault()},e.prototype.tabToNextCell=function(t,e){var o=this.focusService.getFocusedCell();if(!o)return!1;var n=this.getCellByPosition(o);return!!(n||(n=this.rowRenderer.getRowByPosition(o))&&n.isFullWidth())&&this.tabToNextCellCommon(n,t,e)},e.prototype.tabToNextCellCommon=function(t,e,o){var n=t.isEditing();if(!n&&t instanceof wu){var r=t.getRowCtrl();r&&(n=r.isEditing())}return(n?"fullRow"===this.gridOptionsService.get("editType")?this.moveToNextEditingRow(t,e,o):this.moveToNextEditingCell(t,e,o):this.moveToNextCellNotEditing(t,e))||!!this.focusService.getFocusedHeader()},e.prototype.moveToNextEditingCell=function(t,e,o){void 0===o&&(o=null);var n=t.getCellPosition();t.getGui().focus(),t.stopEditing();var r=this.findNextCellToFocusOn(n,e,!0);return null!=r&&(r.startEditing(null,!0,o),r.focusCell(!1),!0)},e.prototype.moveToNextEditingRow=function(t,e,o){void 0===o&&(o=null);var n=t.getCellPosition(),r=this.findNextCellToFocusOn(n,e,!0);if(null==r)return!1;var i=r.getCellPosition(),a=this.isCellEditable(n),s=this.isCellEditable(i),l=i&&n.rowIndex===i.rowIndex&&n.rowPinned===i.rowPinned;(a&&t.setFocusOutOnEditor(),l)||(t.getRowCtrl().stopEditing(),r.getRowCtrl().startRowEditing(void 0,void 0,o));return s?(r.setFocusInOnEditor(),r.focusCell()):r.focusCell(!0),!0},e.prototype.moveToNextCellNotEditing=function(t,e){var o,n=this.columnModel.getAllDisplayedColumns();o=t instanceof Pu?Cc(Cc({},t.getRowPosition()),{column:e?n[0]:ft(n)}):t.getCellPosition();var i=this.findNextCellToFocusOn(o,e,!1);if(i instanceof wu)i.focusCell(!0);else if(i)return this.tryToFocusFullWidthRow(i.getRowPosition(),e);return r(i)},e.prototype.findNextCellToFocusOn=function(t,e,o){for(var n=t;;){t!==n&&(t=n),e||(n=this.getLastCellOfColSpan(n)),n=this.cellNavigationService.getNextTabbedCell(n,e);var i=this.gridOptionsService.getCallback("tabToNextCell");if(r(i)){var a=i({backwards:e,editing:o,previousCellPosition:t,nextCellPosition:n||null});r(a)?(a.floating&&(O("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),a.rowPinned=a.floating),n={rowIndex:a.rowIndex,column:a.column,rowPinned:a.rowPinned}):n=null}if(!n)return null;if(n.rowIndex<0){var s=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:s+n.rowIndex,column:n.column},fromCell:!0}),null}var l="fullRow"===this.gridOptionsService.get("editType");if(o&&!l)if(!this.isCellEditable(n))continue;this.ensureCellVisible(n);var u=this.getCellByPosition(n);if(!u){var c=this.rowRenderer.getRowByPosition(n);if(!c||!c.isFullWidth()||o)continue;return c}if(!u.isSuppressNavigable())return this.rangeService&&this.rangeService.setRangeToCell(n),u}},e.prototype.isCellEditable=function(t){var e=this.lookupRowNodeForCell(t);return!!e&&t.column.isCellEditable(e)},e.prototype.getCellByPosition=function(t){var e=this.rowRenderer.getRowByPosition(t);return e?e.getCellCtrl(t.column):null},e.prototype.lookupRowNodeForCell=function(t){return"top"===t.rowPinned?this.pinnedRowModel.getPinnedTopRow(t.rowIndex):"bottom"===t.rowPinned?this.pinnedRowModel.getPinnedBottomRow(t.rowIndex):this.paginationProxy.getRow(t.rowIndex)},e.prototype.navigateToNextCell=function(t,e,o,n){for(var a=o,s=!1;a&&(a===o||!this.isValidNavigateCell(a));)this.gridOptionsService.get("enableRtl")?e===jn.LEFT&&(a=this.getLastCellOfColSpan(a)):e===jn.RIGHT&&(a=this.getLastCellOfColSpan(a)),s=i(a=this.cellNavigationService.getNextCellToFocus(e,a));if(s&&t&&t.key===jn.UP&&(a={rowIndex:-1,rowPinned:null,column:o.column}),n){var l=this.gridOptionsService.getCallback("navigateToNextCell");if(r(l)){var u=l({key:e,previousCellPosition:o,nextCellPosition:a||null,event:t});r(u)?(u.floating&&(O("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),u.rowPinned=u.floating),a={rowPinned:u.rowPinned,rowIndex:u.rowIndex,column:u.column}):a=null}}if(a)if(a.rowIndex<0){var c=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:c+a.rowIndex,column:o.column},event:t||void 0,fromCell:!0})}else{var p=this.getNormalisedPosition(a);p?this.focusPosition(p):this.tryToFocusFullWidthRow(a)}},e.prototype.getNormalisedPosition=function(t){this.ensureCellVisible(t);var e=this.getCellByPosition(t);return e?(t=e.getCellPosition(),this.ensureCellVisible(t),t):null},e.prototype.tryToFocusFullWidthRow=function(t,e){void 0===e&&(e=!1);var o=this.columnModel.getAllDisplayedColumns(),n=this.rowRenderer.getRowByPosition(t);if(!n||!n.isFullWidth())return!1;var r=this.focusService.getFocusedCell(),i={rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:t.column||(e?ft(o):o[0])};this.focusPosition(i);var a=null!=r&&this.rowPositionUtils.before(i,r),s={type:qt.EVENT_FULL_WIDTH_ROW_FOCUSED,rowIndex:i.rowIndex,rowPinned:i.rowPinned,column:i.column,isFullWidthCell:!0,floating:i.rowPinned,fromBelow:a};return this.eventService.dispatchEvent(s),!0},e.prototype.focusPosition=function(t){this.focusService.setFocusedCell({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0}),this.rangeService&&this.rangeService.setRangeToCell(t)},e.prototype.isValidNavigateCell=function(t){return!!this.rowPositionUtils.getRowNode(t)},e.prototype.getLastCellOfColSpan=function(t){var e=this.getCellByPosition(t);if(!e)return t;var o=e.getColSpanningList();return 1===o.length?t:{rowIndex:t.rowIndex,column:ft(o),rowPinned:t.rowPinned}},e.prototype.ensureCellVisible=function(t){var e=this.gridOptionsService.isGroupRowsSticky(),o=this.rowModel.getRow(t.rowIndex);!(e&&(null===o||void 0===o?void 0:o.sticky))&&i(t.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t.rowIndex),t.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(t.column)},_c([J("mouseEventService")],e.prototype,"mouseEventService",void 0),_c([J("paginationProxy")],e.prototype,"paginationProxy",void 0),_c([J("focusService")],e.prototype,"focusService",void 0),_c([Q("rangeService")],e.prototype,"rangeService",void 0),_c([J("columnModel")],e.prototype,"columnModel",void 0),_c([J("rowModel")],e.prototype,"rowModel",void 0),_c([J("ctrlsService")],e.prototype,"ctrlsService",void 0),_c([J("rowRenderer")],e.prototype,"rowRenderer",void 0),_c([J("headerNavigationService")],e.prototype,"headerNavigationService",void 0),_c([J("rowPositionUtils")],e.prototype,"rowPositionUtils",void 0),_c([J("cellNavigationService")],e.prototype,"cellNavigationService",void 0),_c([J("pinnedRowModel")],e.prototype,"pinnedRowModel",void 0),_c([Y],e.prototype,"postConstruct",null),e=_c([X("navigationService")],e)}(Bt),bc=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Sc=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Ec=function(t){function e(e){var o=t.call(this,'<div class="ag-popup-editor" tabindex="-1"/>')||this;return o.params=e,o}return bc(e,t),e.prototype.postConstruct=function(){this.gridOptionsService.setDomData(this.getGui(),e.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()},e.prototype.addKeyDownListener=function(){var t=this,e=this.getGui(),o=this.params;this.addManagedListener(e,"keydown",function(e){Jn(t.gridOptionsService,e,o.node,o.column,!0)||o.onKeyDown(e)})},e.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper",Sc([Y],e.prototype,"postConstruct",null),e}(ga),xc=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Tc=function(t){function e(e,o,n,r,i){var a=t.call(this)||this;a.rendererVersion=0,a.editorVersion=0,a.beans=e,a.column=o.getColumn(),a.rowNode=o.getRowNode(),a.rowCtrl=o.getRowCtrl(),a.eRow=r,a.cellCtrl=o;var s=document.createElement("div");s.setAttribute("comp-id","".concat(a.getCompId())),a.setTemplateFromElement(s);var l=a.getGui();a.forceWrapper=o.isForceWrapper(),a.refreshWrapper(!1);var u=function(t,e){null!=e&&""!=e?l.setAttribute(t,e):l.removeAttribute(t)};ke(l,o.getCellAriaRole()),u("col-id",o.getColumnIdSanitised());var c=o.getTabIndex();void 0!==c&&u("tabindex",c.toString());var p={addOrRemoveCssClass:function(t,e){return a.addOrRemoveCssClass(t,e)},setUserStyles:function(t){return _n(l,t)},getFocusableElement:function(){return a.getFocusableElement()},setIncludeSelection:function(t){return a.includeSelection=t},setIncludeRowDrag:function(t){return a.includeRowDrag=t},setIncludeDndSource:function(t){return a.includeDndSource=t},setRenderDetails:function(t,e,o){return a.setRenderDetails(t,e,o)},setEditDetails:function(t,e,o){return a.setEditDetails(t,e,o)},getCellEditor:function(){return a.cellEditor||null},getCellRenderer:function(){return a.cellRenderer||null},getParentOfValue:function(){return a.getParentOfValue()}};return o.setComp(p,a.getGui(),a.eCellWrapper,n,i),a}return xc(e,t),e.prototype.getParentOfValue=function(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()},e.prototype.setRenderDetails=function(t,e,o){if(!(this.cellEditor&&!this.cellEditorPopupWrapper)){this.firstRender=null==this.firstRender;var n=this.refreshWrapper(!1);if(this.refreshEditStyles(!1),t)!(o||n)&&this.refreshCellRenderer(t)||(this.destroyRenderer(),this.createCellRendererInstance(t));else this.destroyRenderer(),this.insertValueWithoutCellRenderer(e)}},e.prototype.setEditDetails=function(t,e,o){t?this.createCellEditorInstance(t,e,o):this.destroyEditor()},e.prototype.removeControls=function(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)},e.prototype.refreshWrapper=function(t){var e=this.includeRowDrag||this.includeDndSource||this.includeSelection,o=e||this.forceWrapper,n=o&&null==this.eCellWrapper;if(n){var r=document.createElement("div");r.setAttribute("role","presentation"),r.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=r,this.getGui().appendChild(this.eCellWrapper)}var i=!o&&null!=this.eCellWrapper;i&&(hn(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!o);var a=!t&&o,s=a&&null==this.eCellValue;if(s){var l=document.createElement("span");l.setAttribute("role","presentation"),l.setAttribute("class","ag-cell-value"),this.eCellValue=l,this.eCellWrapper.appendChild(this.eCellValue)}var u=!a&&null!=this.eCellValue;u&&(hn(this.eCellValue),this.eCellValue=void 0);var c=n||i||s||u;return c&&this.removeControls(),t||e&&this.addControls(),c},e.prototype.addControls=function(){this.includeRowDrag&&null==this.rowDraggingComp&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&null==this.dndSourceComp&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&null==this.checkboxSelectionComp&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))},e.prototype.createCellEditorInstance=function(t,e,o){var n=this,r=this.editorVersion,a=t.newAgStackInstance();if(a){var s=t.params;a.then(function(t){return n.afterCellEditorCreated(r,t,s,e,o)}),i(this.cellEditor)&&s.cellStartedEdit&&this.cellCtrl.focusCell(!0)}},e.prototype.insertValueWithoutCellRenderer=function(t){var e=this.getParentOfValue();dn(e);var o=null!=t?ee(t,!0):null;null!=o&&(e.textContent=o)},e.prototype.destroyEditorAndRenderer=function(){this.destroyRenderer(),this.destroyEditor()},e.prototype.destroyRenderer=function(){var t=this.beans.context;this.cellRenderer=t.destroyBean(this.cellRenderer),hn(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++},e.prototype.destroyEditor=function(){var t=this.beans.context;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=t.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=t.destroyBean(this.cellEditorPopupWrapper),hn(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++},e.prototype.refreshCellRenderer=function(t){if(null==this.cellRenderer||null==this.cellRenderer.refresh)return!1;if(this.cellRendererClass!==t.componentClass)return!1;var e=this.cellRenderer.refresh(t.params);return!0===e||void 0===e},e.prototype.createCellRendererInstance=function(t){var e=this,o=!this.beans.gridOptionsService.get("suppressAnimationFrame"),n=this.rendererVersion,r=t.componentClass,i=function(){if(!(e.rendererVersion!==n||!e.isAlive())){var o=t.newAgStackInstance(),i=e.afterCellRendererCreated.bind(e,n,r);o&&o.then(i)}};o&&this.firstRender?this.beans.animationFrameService.createTask(i,this.rowNode.rowIndex,"createTasksP2"):i()},e.prototype.getCtrl=function(){return this.cellCtrl},e.prototype.getRowCtrl=function(){return this.rowCtrl},e.prototype.getCellRenderer=function(){return this.cellRenderer},e.prototype.getCellEditor=function(){return this.cellEditor},e.prototype.afterCellRendererCreated=function(t,e,o){if(!this.isAlive()||t!==this.rendererVersion)this.beans.context.destroyBean(o);else if(this.cellRenderer=o,this.cellRendererClass=e,this.cellRendererGui=this.cellRenderer.getGui(),null!=this.cellRendererGui){var n=this.getParentOfValue();dn(n),n.appendChild(this.cellRendererGui)}},e.prototype.afterCellEditorCreated=function(t,e,o,n,r){if(t!==this.editorVersion)this.beans.context.destroyBean(e);else{if(e.isCancelBeforeStart&&e.isCancelBeforeStart())return this.beans.context.destroyBean(e),void this.cellCtrl.stopEditing(!0);if(!e.getGui)return console.warn("AG Grid: cellEditor for column ".concat(this.column.getId()," is missing getGui() method")),void this.beans.context.destroyBean(e);this.cellEditor=e,this.cellEditorGui=e.getGui();var i=n||void 0!==e.isPopup&&e.isPopup();i?this.addPopupCellEditor(o,r):this.addInCellEditor(),this.refreshEditStyles(!0,i),e.afterGuiAttached&&e.afterGuiAttached()}},e.prototype.refreshEditStyles=function(t,e){var o;this.addOrRemoveCssClass("ag-cell-inline-editing",t&&!e),this.addOrRemoveCssClass("ag-cell-popup-editing",t&&!!e),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!t||!!e),null===(o=this.rowCtrl)||void 0===o||o.setInlineEditingCss(t)},e.prototype.addInCellEditor=function(){var t=this.getGui(),e=this.beans.gridOptionsService.getDocument();(t.contains(e.activeElement)&&t.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui)&&this.getParentOfValue().appendChild(this.cellEditorGui)},e.prototype.addPopupCellEditor=function(t,e){var o=this;"fullRow"===this.beans.gridOptionsService.get("editType")&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");var n=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new Ec(t));var r=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&r.appendChild(this.cellEditorGui);var i=this.beans.popupService,a=this.beans.gridOptionsService.get("stopEditingWhenCellsLoseFocus"),s=null!=e?e:n.getPopupPosition?n.getPopupPosition():"over",l=this.beans.gridOptionsService.get("enableRtl"),u={ePopup:r,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:s,alignSide:l?"right":"left",keepWithinBounds:!0},c=i.positionPopupByComponent.bind(i,u),p=this.beans.localeService.getLocaleTextFunc(),d=i.addPopup({modal:a,eChild:r,closeOnEsc:!0,closedCallback:function(){o.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:c,ariaLabel:p("ariaLabelCellEditor","Cell Editor")});d&&(this.hideEditorPopup=d.hideFunc)},e.prototype.detach=function(){this.eRow.removeChild(this.getGui())},e.prototype.destroy=function(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),t.prototype.destroy.call(this)},e.prototype.clearParentOfValue=function(){var t=this.getGui(),e=this.beans.gridOptionsService.getDocument();t.contains(e.activeElement)&&Oo()&&t.focus({preventScroll:!0}),dn(this.getParentOfValue())},e}(Sr),Oc=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Rc=function(t){function e(e,o,n){var r=t.call(this)||this;r.cellComps={},r.beans=o,r.rowCtrl=e;var i=document.createElement("div");i.setAttribute("comp-id","".concat(r.getCompId())),i.setAttribute("style",r.getInitialStyle(n)),r.setTemplateFromElement(i);var a=r.getGui(),s=a.style;r.domOrder=r.rowCtrl.getDomOrder(),ke(a,"row");var l=r.rowCtrl.getTabIndex();null!=l&&a.setAttribute("tabindex",l.toString());var u={setDomOrder:function(t){return r.domOrder=t},setCellCtrls:function(t){return r.setCellCtrls(t)},showFullWidth:function(t){return r.showFullWidth(t)},getFullWidthCellRenderer:function(){return r.getFullWidthCellRenderer()},addOrRemoveCssClass:function(t,e){return r.addOrRemoveCssClass(t,e)},setUserStyles:function(t){return _n(a,t)},setTop:function(t){return s.top=t},setTransform:function(t){return s.transform=t},setRowIndex:function(t){return a.setAttribute("row-index",t)},setRowId:function(t){return a.setAttribute("row-id",t)},setRowBusinessKey:function(t){return a.setAttribute("row-business-key",t)},refreshFullWidth:function(t){return r.refreshFullWidth(t)}};return e.setComp(u,r.getGui(),n),r.addDestroyFunc(function(){e.unsetComp(n)}),r}return Oc(e,t),e.prototype.getInitialStyle=function(t){var e=this.rowCtrl.getInitialTransform(t);return e?"transform: ".concat(e):"top: ".concat(this.rowCtrl.getInitialRowTop(t))},e.prototype.showFullWidth=function(t){var e=this,o=t.newAgStackInstance();o&&o.then(function(t){if(e.isAlive()){var o=t.getGui();e.getGui().appendChild(o),e.rowCtrl.setupDetailRowAutoHeight(o),e.setFullWidthRowComp(t)}else e.beans.context.destroyBean(t)})},e.prototype.setCellCtrls=function(t){var e=this,o=Object.assign({},this.cellComps);t.forEach(function(t){var n=t.getInstanceId();null==e.cellComps[n]?e.newCellComp(t):o[n]=null});var n=C(o).filter(function(t){return null!=t});this.destroyCells(n),this.ensureDomOrder(t)},e.prototype.ensureDomOrder=function(t){var e=this;if(this.domOrder){var o=[];t.forEach(function(t){var n=e.cellComps[t.getInstanceId()];n&&o.push(n.getGui())}),mn(this.getGui(),o)}},e.prototype.newCellComp=function(t){var e=new Tc(this.beans,t,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[t.getInstanceId()]=e,this.getGui().appendChild(e.getGui())},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.destroyAllCells()},e.prototype.destroyAllCells=function(){var t=C(this.cellComps).filter(function(t){return null!=t});this.destroyCells(t)},e.prototype.setFullWidthRowComp=function(t){var e=this;this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=t,this.addDestroyFunc(function(){e.fullWidthCellRenderer=e.beans.context.destroyBean(e.fullWidthCellRenderer)})},e.prototype.getFullWidthCellRenderer=function(){return this.fullWidthCellRenderer},e.prototype.destroyCells=function(t){var e=this;t.forEach(function(t){if(t){var o=t.getCtrl().getInstanceId();e.cellComps[o]===t&&(t.detach(),t.destroy(),e.cellComps[o]=null)}})},e.prototype.refreshFullWidth=function(t){var e=this.fullWidthCellRenderer;if(!e||!e.refresh)return!1;var o=t();return e.refresh(o)},e}(Sr),Pc=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ac=function(){return(Ac=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Dc=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};var Mc,Ic=function(t){function e(){var e=t.call(this,function(){var t=Sr.elementGettingCreated.getAttribute("name"),e=sc.getRowContainerCssClasses(t);return t===Tu.CENTER||t===Tu.TOP_CENTER||t===Tu.STICKY_TOP_CENTER||t===Tu.BOTTOM_CENTER?'<div class="'.concat(e.viewport,'" ref="eViewport" role="presentation">\n                <div class="').concat(e.container,'" ref="eContainer"></div>\n            </div>'):'<div class="'.concat(e.container,'" ref="eContainer"></div>')}())||this;return e.rowComps={},e.name=Sr.elementGettingCreated.getAttribute("name"),e.type=rc(e.name),e}return Pc(e,t),e.prototype.postConstruct=function(){var t=this,e={setViewportHeight:function(e){return t.eViewport.style.height=e},setRowCtrls:function(e){var o=e.rowCtrls;return t.setRowCtrls(o)},setDomOrder:function(e){t.domOrder=e},setContainerWidth:function(e){return t.eContainer.style.width=e}};this.createManagedBean(new sc(this.name)).setComp(e,this.eContainer,this.eViewport)},e.prototype.preDestroy=function(){this.setRowCtrls([])},e.prototype.setRowCtrls=function(t){var e=this,o=Ac({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;t.forEach(function(t){var n=t.getInstanceId(),r=o[n];if(r)e.rowComps[n]=r,delete o[n],e.ensureDomOrder(r.getGui());else{if(!t.getRowNode().displayed)return;var i=new Rc(t,e.beans,e.type);e.rowComps[n]=i,e.appendRow(i.getGui())}}),C(o).forEach(function(t){e.eContainer.removeChild(t.getGui()),t.destroy()}),ke(this.eContainer,"rowgroup")},e.prototype.appendRow=function(t){this.domOrder?Cn(this.eContainer,t,this.lastPlacedElement):this.eContainer.appendChild(t),this.lastPlacedElement=t},e.prototype.ensureDomOrder=function(t){this.domOrder&&(vn(this.eContainer,t,this.lastPlacedElement),this.lastPlacedElement=t)},Dc([J("beans")],e.prototype,"beans",void 0),Dc([xr("eViewport")],e.prototype,"eViewport",void 0),Dc([xr("eContainer")],e.prototype,"eContainer",void 0),Dc([Y],e.prototype,"postConstruct",null),Dc([Z],e.prototype,"preDestroy",null),e}(Sr),Lc=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Fc=function(){function t(t){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=t}return t.prototype.onDragEnter=function(t){var e=this;if(this.clearColumnsList(),!this.gridOptionsService.get("functionsReadOnly")){var o=t.dragItem.columns;o&&o.forEach(function(t){t.isPrimary()&&(t.isAnyFunctionActive()||(t.isAllowValue()?e.columnsToAggregate.push(t):t.isAllowRowGroup()?e.columnsToGroup.push(t):t.isAllowPivot()&&e.columnsToPivot.push(t)))})}},t.prototype.getIconName=function(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?Wa.ICON_PINNED:Wa.ICON_MOVE:null},t.prototype.onDragLeave=function(t){this.clearColumnsList()},t.prototype.clearColumnsList=function(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0},t.prototype.onDragging=function(t){},t.prototype.onDragStop=function(t){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")},Lc([J("columnModel")],t.prototype,"columnModel",void 0),Lc([J("gridOptionsService")],t.prototype,"gridOptionsService",void 0),t}(),Nc=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},kc=function(){function t(){}return t.attemptMoveColumns=function(t){var e=t.isFromHeader,o=t.hDirection,n=t.xPosition,r=t.fromEnter,i=t.fakeEvent,a=t.pinned,s=t.gridOptionsService,l=t.columnModel,u=o===ji.Left,c=o===ji.Right,p=t.allMovingColumns;if(e){var d=[];p.forEach(function(t){for(var e,o=null,n=t.getParent();null!=n&&1===n.getDisplayedLeafColumns().length;)o=n,n=n.getParent();null!=o?(!!(null===(e=o.getColGroupDef())||void 0===e?void 0:e.marryChildren)?o.getProvidedColumnGroup().getLeafColumns():o.getLeafColumns()).forEach(function(t){d.includes(t)||d.push(t)}):d.includes(t)||d.push(t)}),p=d}var h=p.slice();l.sortColumnsLikeGridColumns(h);var f=this.calculateValidMoves({movingCols:h,draggingRight:c,xPosition:n,pinned:a,gridOptionsService:s,columnModel:l}),g=this.calculateOldIndex(h,l);if(0!==f.length){var y=f[0],v=null!==g&&!r;if(e&&(v=null!==g),v&&!i){if(u&&y>=g)return;if(c&&y<=g)return}for(var m=l.getAllDisplayedColumns(),C=[],_=null,w=0;w<f.length;w++){var b=f[w],S=l.getProposedColumnOrder(h,b);if(l.doesOrderPassRules(S)){var E=S.filter(function(t){return m.includes(t)});if(null===_)_=E;else if(!gt(E,_))break;var x=this.groupFragCount(S);C.push({move:b,fragCount:x})}}if(0!==C.length)return C.sort(function(t,e){return t.fragCount-e.fragCount}),this.moveColumns(p,C[0].move,"uiColumnMoved",!1,l)}},t.moveColumns=function(t,e,o,n,r){return r.moveColumns(t,e,o,n),n?null:{columns:t,toIndex:e}},t.calculateOldIndex=function(t,e){var o=e.getAllGridColumns(),n=yt(t.map(function(t){return o.indexOf(t)})),r=n[0];return ft(n)-r!==n.length-1?null:r},t.groupFragCount=function(t){function e(t){for(var e=[],o=t.getOriginalParent();null!=o;)e.push(o),o=o.getOriginalParent();return e}for(var o=0,n=function(n){var r,i=e(t[n]),a=e(t[n+1]);i=(r=Nc(i.length>a.length?[i,a]:[a,i],2))[0],a=r[1],i.forEach(function(t){-1===a.indexOf(t)&&o++})},r=0;r<t.length-1;r++)n(r);return o},t.calculateValidMoves=function(t){var e=t.movingCols,o=t.draggingRight,n=t.xPosition,r=t.pinned,i=t.gridOptionsService,a=t.columnModel;if(i.get("suppressMovableColumns")||e.some(function(t){return t.getColDef().suppressMovable}))return[];var s,l=a.getDisplayedColumns(r),u=a.getAllGridColumns(),c=l.filter(function(t){return St(e,t)}),p=l.filter(function(t){return!St(e,t)}),d=u.filter(function(t){return!St(e,t)}),h=0,f=n;if(o){var g=0;c.forEach(function(t){return g+=t.getActualWidth()}),f-=g}if(f>0){for(var y=0;y<p.length;y++){if((f-=p[y].getActualWidth())<0)break;h++}o&&h++}if(h>0){var v=p[h-1];s=d.indexOf(v)+1}else-1===(s=d.indexOf(p[0]))&&(s=0);var m=[s],C=function(t,e){return t-e};if(o){for(var _=s+1,w=u.length-1;_<=w;)m.push(_),_++;m.sort(C)}else{_=s,w=u.length-1;for(var b=u[_];_<=w&&l.indexOf(b)<0;)_++,m.push(_),b=u[_];_=s-1;for(;_>=0;)m.push(_),_--;m.sort(C).reverse()}return m},t.normaliseX=function(t,e,o,n,r){var i=r.getHeaderRowContainerCtrl(e).getViewport();(o&&(t-=i.getBoundingClientRect().left),n.get("enableRtl"))&&(t=i.clientWidth-t);return null==e&&(t+=r.getCenterRowContainerCtrl().getCenterViewportScrollLeft()),t},t}(),Gc=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Vc=function(){function t(t,e){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=t,this.eContainer=e,this.centerContainer=!r(t)}return t.prototype.init=function(){var t=this;this.ctrlsService.whenReady(function(){t.gridBodyCon=t.ctrlsService.getGridBodyCtrl()})},t.prototype.getIconName=function(){return this.pinned?Wa.ICON_PINNED:Wa.ICON_MOVE},t.prototype.onDragEnter=function(t){var e=t.dragItem.columns;if(t.dragSource.type===Ba.ToolPanel)this.setColumnsVisible(e,!0,"uiColumnDragged");else{var o=t.dragItem.visibleState,n=(e||[]).filter(function(t){return o[t.getId()]});this.setColumnsVisible(n,!0,"uiColumnDragged")}this.setColumnsPinned(e,this.pinned,"uiColumnDragged"),this.onDragging(t,!0,!0)},t.prototype.onDragLeave=function(){this.ensureIntervalCleared(),this.lastMovedInfo=null},t.prototype.setColumnsVisible=function(t,e,o){if(t){var n=t.filter(function(t){return!t.getColDef().lockVisible});this.columnModel.setColumnsVisible(n,e,o)}},t.prototype.setColumnsPinned=function(t,e,o){if(t){var n=t.filter(function(t){return!t.getColDef().lockPinned});this.columnModel.setColumnsPinned(n,e,o)}},t.prototype.onDragStop=function(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null},t.prototype.checkCenterForScrolling=function(t){if(this.centerContainer){var e=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft(),o=e+this.ctrlsService.getCenterRowContainerCtrl().getCenterWidth();this.gridOptionsService.get("enableRtl")?(this.needToMoveRight=t<e+50,this.needToMoveLeft=t>o-50):(this.needToMoveLeft=t<e+50,this.needToMoveRight=t>o-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}},t.prototype.onDragging=function(t,e,o,n){var r,a=this;if(void 0===t&&(t=this.lastDraggingEvent),void 0===e&&(e=!1),void 0===o&&(o=!1),void 0===n&&(n=!1),n){if(this.lastMovedInfo){var s=this.lastMovedInfo,l=s.columns,u=s.toIndex;kc.moveColumns(l,u,"uiColumnMoved",!0,this.columnModel)}}else if(this.lastDraggingEvent=t,!i(t.hDirection)){var c=kc.normaliseX(t.x,this.pinned,!1,this.gridOptionsService,this.ctrlsService);e||this.checkCenterForScrolling(c);var p=this.normaliseDirection(t.hDirection),d=t.dragSource.type,h=(null===(r=t.dragSource.getDragItem().columns)||void 0===r?void 0:r.filter(function(t){return!t.getColDef().lockPinned||t.getPinned()==a.pinned}))||[],f=kc.attemptMoveColumns({allMovingColumns:h,isFromHeader:d===Ba.HeaderCell,hDirection:p,xPosition:c,pinned:this.pinned,fromEnter:e,fakeEvent:o,gridOptionsService:this.gridOptionsService,columnModel:this.columnModel});f&&(this.lastMovedInfo=f)}},t.prototype.normaliseDirection=function(t){if(!this.gridOptionsService.get("enableRtl"))return t;switch(t){case ji.Left:return ji.Right;case ji.Right:return ji.Left;default:console.error("AG Grid: Unknown direction ".concat(t))}},t.prototype.ensureIntervalStarted=function(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.needToMoveLeft?this.dragAndDropService.setGhostIcon(Wa.ICON_LEFT,!0):this.dragAndDropService.setGhostIcon(Wa.ICON_RIGHT,!0))},t.prototype.ensureIntervalCleared=function(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(Wa.ICON_MOVE))},t.prototype.moveInterval=function(){var t;this.intervalCount++,(t=10+5*this.intervalCount)>100&&(t=100);var e=null,o=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?e=o.scrollHorizontally(-t):this.needToMoveRight&&(e=o.scrollHorizontally(t)),0!==e)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;var n=this.lastDraggingEvent.dragItem.columns.filter(function(t){return!t.getColDef().lockPinned});if(n.length>0&&(this.dragAndDropService.setGhostIcon(Wa.ICON_PINNED),this.failedMoveAttempts>7)){var r=this.needToMoveLeft?"left":"right";this.setColumnsPinned(n,r,"uiColumnDragged"),this.dragAndDropService.nudge()}}},Gc([J("columnModel")],t.prototype,"columnModel",void 0),Gc([J("dragAndDropService")],t.prototype,"dragAndDropService",void 0),Gc([J("gridOptionsService")],t.prototype,"gridOptionsService",void 0),Gc([J("ctrlsService")],t.prototype,"ctrlsService",void 0),Gc([Y],t.prototype,"init",null),t}(),Bc=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),zc=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Hc=function(t){function e(e,o){var n=t.call(this)||this;return n.pinned=e,n.eContainer=o,n}return Bc(e,t),e.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady(function(e){switch(t.pinned){case"left":t.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.leftRowContainerCtrl.getContainerElement()],[e.bottomLeftRowContainerCtrl.getContainerElement()],[e.topLeftRowContainerCtrl.getContainerElement()]];break;case"right":t.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.rightRowContainerCtrl.getContainerElement()],[e.bottomRightRowContainerCtrl.getContainerElement()],[e.topRightRowContainerCtrl.getContainerElement()]];break;default:t.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.centerRowContainerCtrl.getViewportElement()],[e.bottomCenterRowContainerCtrl.getViewportElement()],[e.topCenterRowContainerCtrl.getViewportElement()]]}})},e.prototype.isInterestedIn=function(t){return t===Ba.HeaderCell||t===Ba.ToolPanel&&this.gridOptionsService.get("allowDragFromColumnsToolPanel")},e.prototype.getSecondaryContainers=function(){return this.eSecondaryContainers},e.prototype.getContainer=function(){return this.eContainer},e.prototype.init=function(){this.moveColumnFeature=this.createManagedBean(new Vc(this.pinned,this.eContainer)),this.bodyDropPivotTarget=this.createManagedBean(new Fc(this.pinned)),this.dragAndDropService.addDropTarget(this)},e.prototype.getIconName=function(){return this.currentDropListener.getIconName()},e.prototype.isDropColumnInPivotMode=function(t){return this.columnModel.isPivotMode()&&t.dragSource.type===Ba.ToolPanel},e.prototype.onDragEnter=function(t){this.currentDropListener=this.isDropColumnInPivotMode(t)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(t)},e.prototype.onDragLeave=function(t){this.currentDropListener.onDragLeave(t)},e.prototype.onDragging=function(t){this.currentDropListener.onDragging(t)},e.prototype.onDragStop=function(t){this.currentDropListener.onDragStop(t)},zc([J("dragAndDropService")],e.prototype,"dragAndDropService",void 0),zc([J("columnModel")],e.prototype,"columnModel",void 0),zc([J("ctrlsService")],e.prototype,"ctrlsService",void 0),zc([Y],e.prototype,"postConstruct",null),zc([Y],e.prototype,"init",null),e}(Bt),jc=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Uc=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Wc=function(t){function e(o){var n=t.call(this,e.TEMPLATE,o)||this;return n.headerCompVersion=0,n.column=o.getColumnGroupChild(),n.pinned=o.getPinned(),n}return jc(e,t),e.prototype.postConstruct=function(){var t,e,o=this,n=this.getGui();t="col-id",null!=(e=this.column.getColId())&&""!=e?n.setAttribute(t,e):n.removeAttribute(t);var r={setWidth:function(t){return n.style.width=t},addOrRemoveCssClass:function(t,e){return o.addOrRemoveCssClass(t,e)},setAriaSort:function(t){return t?ao(n,t):so(n)},setUserCompDetails:function(t){return o.setUserCompDetails(t)},getUserCompInstance:function(){return o.headerComp}};this.ctrl.setComp(r,this.getGui(),this.eResize,this.eHeaderCompWrapper);var i=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",i)},e.prototype.destroyHeaderComp=function(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)},e.prototype.setUserCompDetails=function(t){var e=this;this.headerCompVersion++;var o=this.headerCompVersion;t.newAgStackInstance().then(function(t){return e.afterCompCreated(o,t)})},e.prototype.afterCompCreated=function(t,e){t==this.headerCompVersion&&this.isAlive()?(this.destroyHeaderComp(),this.headerComp=e,this.headerCompGui=e.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())):this.destroyBean(e)},e.TEMPLATE='<div class="ag-header-cell" role="columnheader">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n            <div ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>\n        </div>',Uc([xr("eResize")],e.prototype,"eResize",void 0),Uc([xr("eHeaderCompWrapper")],e.prototype,"eHeaderCompWrapper",void 0),Uc([Y],e.prototype,"postConstruct",null),Uc([Z],e.prototype,"destroyHeaderComp",null),e}(Ol),Kc=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),qc=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Yc=function(t){function e(o){return t.call(this,e.TEMPLATE,o)||this}return Kc(e,t),e.prototype.postConstruct=function(){var t=this,e=this.getGui();e.setAttribute("col-id",this.ctrl.getColId());var o={addOrRemoveCssClass:function(e,o){return t.addOrRemoveCssClass(e,o)},setResizableDisplayed:function(e){return Qo(t.eResize,e)},setWidth:function(t){return e.style.width=t},setAriaExpanded:function(t){return o="aria-expanded",void 0!=(n=t)?e.setAttribute(o,n):e.removeAttribute(o);var o,n},setUserCompDetails:function(e){return t.setUserCompDetails(e)},getUserCompInstance:function(){return t.headerGroupComp}};this.ctrl.setComp(o,e,this.eResize)},e.prototype.setUserCompDetails=function(t){var e=this;t.newAgStackInstance().then(function(t){return e.afterHeaderCompCreated(t)})},e.prototype.afterHeaderCompCreated=function(t){var e=this,o=function(){return e.destroyBean(t)};if(this.isAlive()){var n=this.getGui(),r=t.getGui();n.appendChild(r),this.addDestroyFunc(o),this.headerGroupComp=t,this.ctrl.setDragSource(n)}else o()},e.TEMPLATE='<div class="ag-header-group-cell" role="columnheader">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n        </div>',qc([xr("eResize")],e.prototype,"eResize",void 0),qc([Y],e.prototype,"postConstruct",null),e}(Ol),Zc=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Xc=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};!function(t){t.COLUMN_GROUP="group",t.COLUMN="column",t.FLOATING_FILTER="filter"}(Mc||(Mc={}));var Jc,Qc=function(t){function e(e){var o=t.call(this)||this;return o.headerComps={},o.ctrl=e,o.setTemplate('<div class="'.concat(o.ctrl.getHeaderRowClass(),'" role="row"></div>')),o}return Zc(e,t),e.prototype.init=function(){var t=this;oo(this.getGui(),this.ctrl.getAriaRowIndex());var e={setHeight:function(e){return t.getGui().style.height=e},setTop:function(e){return t.getGui().style.top=e},setHeaderCtrls:function(e,o){return t.setHeaderCtrls(e,o)},setWidth:function(e){return t.getGui().style.width=e}};this.ctrl.setComp(e)},e.prototype.destroyHeaderCtrls=function(){this.setHeaderCtrls([],!1)},e.prototype.setHeaderCtrls=function(t,e){var o=this;if(this.isAlive()){var n=this.headerComps;if(this.headerComps={},t.forEach(function(t){var e=t.getInstanceId(),r=n[e];delete n[e],null==r&&(r=o.createHeaderComp(t),o.getGui().appendChild(r.getGui())),o.headerComps[e]=r}),y(n,function(t,e){o.getGui().removeChild(e.getGui()),o.destroyBean(e)}),e){var r=C(this.headerComps);r.sort(function(t,e){return t.getCtrl().getColumnGroupChild().getLeft()-e.getCtrl().getColumnGroupChild().getLeft()});var i=r.map(function(t){return t.getGui()});mn(this.getGui(),i)}}},e.prototype.createHeaderComp=function(t){var e;switch(this.ctrl.getType()){case Mc.COLUMN_GROUP:e=new Yc(t);break;case Mc.FLOATING_FILTER:e=new Al(t);break;default:e=new Wc(t)}return this.createBean(e),e.setParentComponent(this),e},Xc([Y],e.prototype,"init",null),Xc([Z],e.prototype,"destroyHeaderCtrls",null),e}(Sr),$c=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),tp=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},ep=0,op=function(t){function e(e,o,n){var r=t.call(this)||this;return r.resizeToggleTimeout=0,r.resizeMultiplier=1,r.resizeFeature=null,r.lastFocusEvent=null,r.dragSource=null,r.columnGroupChild=e,r.parentRowCtrl=n,r.beans=o,r.instanceId=e.getUniqueId()+"-"+ep++,r}return $c(e,t),e.prototype.postConstruct=function(){var t=this;this.addManagedPropertyListeners(["suppressHeaderFocus"],function(){return t.refreshTabIndex()})},e.prototype.shouldStopEventPropagation=function(t){var e=this.focusService.getFocusedHeader(),o=e.headerRowIndex,n=e.column;return Qn(this.gridOptionsService,t,o,n)},e.prototype.getWrapperHasFocus=function(){return this.gridOptionsService.getDocument().activeElement===this.eGui},e.prototype.setGui=function(t){this.eGui=t,this.addDomData(),this.addManagedListener(this.beans.eventService,qt.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onDisplayedColumnsChanged(),this.refreshTabIndex()},e.prototype.onDisplayedColumnsChanged=function(){this.comp&&this.column&&(this.refreshFirstAndLastStyles(),this.refreshAriaColIndex())},e.prototype.refreshFirstAndLastStyles=function(){var t=this.comp,e=this.column,o=this.beans;vu.refreshFirstAndLastStyles(t,e,o.columnModel)},e.prototype.refreshAriaColIndex=function(){var t=this.beans,e=this.column,o=t.columnModel.getAriaColumnIndex(e);ro(this.eGui,o)},e.prototype.addResizeAndMoveKeyboardListeners=function(){this.resizeFeature&&(this.addManagedListener(this.eGui,"keydown",this.onGuiKeyDown.bind(this)),this.addManagedListener(this.eGui,"keyup",this.onGuiKeyUp.bind(this)))},e.prototype.refreshTabIndex=function(){this.gridOptionsService.get("suppressHeaderFocus")?this.eGui.removeAttribute("tabindex"):this.eGui.setAttribute("tabindex","-1")},e.prototype.onGuiKeyDown=function(t){var e,o=this.gridOptionsService.getDocument().activeElement,n=t.key===jn.LEFT||t.key===jn.RIGHT;if(this.isResizing&&(t.preventDefault(),t.stopImmediatePropagation()),o===this.eGui&&(t.shiftKey||t.altKey)&&((this.isResizing||n)&&(t.preventDefault(),t.stopImmediatePropagation()),n)){var r=t.key===jn.LEFT!==this.gridOptionsService.get("enableRtl"),i=ji[r?"Left":"Right"];if(t.altKey){this.isResizing=!0,this.resizeMultiplier+=1;var a=this.getViewportAdjustedResizeDiff(t);this.resizeHeader(a,t.shiftKey),null===(e=this.resizeFeature)||void 0===e||e.toggleColumnResizing(!0)}else this.moveHeader(i)}},e.prototype.getViewportAdjustedResizeDiff=function(t){var e=this.getResizeDiff(t);if(this.column.getPinned()){var o=this.pinnedWidthService.getPinnedLeftWidth(),n=this.pinnedWidthService.getPinnedRightWidth(),r=rn(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(o+n+e>r){if(!(r>o+n))return 0;e=r-o-n}}return e},e.prototype.getResizeDiff=function(t){var e=t.key===jn.LEFT!==this.gridOptionsService.get("enableRtl"),o=this.column.getPinned(),n=this.gridOptionsService.get("enableRtl");return o&&n!==("right"===o)&&(e=!e),(e?-1:1)*this.resizeMultiplier},e.prototype.onGuiKeyUp=function(){var t=this;this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=setTimeout(function(){var e;null===(e=t.resizeFeature)||void 0===e||e.toggleColumnResizing(!1)},150))},e.prototype.handleKeyDown=function(t){var e=this.getWrapperHasFocus();switch(t.key){case jn.PAGE_DOWN:case jn.PAGE_UP:case jn.PAGE_HOME:case jn.PAGE_END:e&&t.preventDefault()}},e.prototype.addDomData=function(){var t=this,o=e.DOM_DATA_KEY_HEADER_CTRL;this.gridOptionsService.setDomData(this.eGui,o,this),this.addDestroyFunc(function(){return t.gridOptionsService.setDomData(t.eGui,o,null)})},e.prototype.getGui=function(){return this.eGui},e.prototype.focus=function(t){return!!this.eGui&&(this.lastFocusEvent=t||null,this.eGui.focus(),!0)},e.prototype.getRowIndex=function(){return this.parentRowCtrl.getRowIndex()},e.prototype.getParentRowCtrl=function(){return this.parentRowCtrl},e.prototype.getPinned=function(){return this.parentRowCtrl.getPinned()},e.prototype.getInstanceId=function(){return this.instanceId},e.prototype.getColumnGroupChild=function(){return this.columnGroupChild},e.prototype.removeDragSource=function(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)},e.prototype.handleContextMenuMouseEvent=function(t,e,o){var n=null!==t&&void 0!==t?t:e;this.gridOptionsService.get("preventDefaultOnContextMenu")&&n.preventDefault();var r=o instanceof ct?o:void 0;this.menuService.isHeaderContextMenuEnabled(r)&&this.menuService.showHeaderContextMenu(r,t,e),this.dispatchColumnMouseEvent(qt.EVENT_COLUMN_HEADER_CONTEXT_MENU,o)},e.prototype.dispatchColumnMouseEvent=function(t,e){var o={type:t,column:e};this.eventService.dispatchEvent(o)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeDragSource(),this.comp=null,this.column=null,this.resizeFeature=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null,this.eGui=null},e.DOM_DATA_KEY_HEADER_CTRL="headerCtrl",tp([J("pinnedWidthService")],e.prototype,"pinnedWidthService",void 0),tp([J("focusService")],e.prototype,"focusService",void 0),tp([J("userComponentFactory")],e.prototype,"userComponentFactory",void 0),tp([J("ctrlsService")],e.prototype,"ctrlsService",void 0),tp([J("dragAndDropService")],e.prototype,"dragAndDropService",void 0),tp([J("menuService")],e.prototype,"menuService",void 0),tp([Y],e.prototype,"postConstruct",null),e}(Bt),np=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),rp=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},ip=function(t){function e(e,o,n,r){var i=t.call(this)||this;return i.columnOrGroup=e,i.eCell=o,i.ariaEl=i.eCell.querySelector("[role=columnheader]")||i.eCell,i.colsSpanning=r,i.beans=n,i}return np(e,t),e.prototype.setColsSpanning=function(t){this.colsSpanning=t,this.onLeftChanged()},e.prototype.getColumnOrGroup=function(){return this.beans.gridOptionsService.get("enableRtl")&&this.colsSpanning?ft(this.colsSpanning):this.columnOrGroup},e.prototype.postConstruct=function(){this.addManagedListener(this.columnOrGroup,ct.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,qt.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onLeftChanged.bind(this))},e.prototype.setLeftFirstTime=function(){var t=this.beans.gridOptionsService.get("suppressColumnMoveAnimation"),e=r(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&e&&!t?this.animateInLeft():this.onLeftChanged()},e.prototype.animateInLeft=function(){var t=this,e=this.getColumnOrGroup(),o=e.getLeft(),n=e.getOldLeft(),r=this.modifyLeftForPrintLayout(e,n),i=this.modifyLeftForPrintLayout(e,o);this.setLeft(r),this.actualLeft=i,this.beans.columnAnimationService.executeNextVMTurn(function(){t.actualLeft===i&&t.setLeft(i)})},e.prototype.onLeftChanged=function(){var t=this.getColumnOrGroup(),e=t.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(t,e),this.setLeft(this.actualLeft)},e.prototype.modifyLeftForPrintLayout=function(t,e){if(!this.beans.gridOptionsService.isDomLayout("print"))return e;if("left"===t.getPinned())return e;var o=this.beans.columnModel.getDisplayedColumnsLeftWidth();return"right"===t.getPinned()?o+this.beans.columnModel.getBodyContainerWidth()+e:o+e},e.prototype.setLeft=function(t){if(r(t)&&(this.eCell.style.left="".concat(t,"px")),this.columnOrGroup instanceof ct)this.columnOrGroup;else{var e=this.columnOrGroup.getLeafColumns();if(!e.length)return;e.length>1&&io(this.ariaEl,e.length),e[0]}},rp([Y],e.prototype,"postConstruct",null),e}(Bt),ap=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),sp=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},lp=function(t){function e(e,o){var n=t.call(this)||this;return n.columns=e,n.element=o,n}return ap(e,t),e.prototype.postConstruct=function(){this.gridOptionsService.get("columnHoverHighlight")&&this.addMouseHoverListeners()},e.prototype.addMouseHoverListeners=function(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))},e.prototype.onMouseOut=function(){this.columnHoverService.clearMouseOver()},e.prototype.onMouseOver=function(){this.columnHoverService.setMouseOver(this.columns)},sp([J("columnHoverService")],e.prototype,"columnHoverService",void 0),sp([Y],e.prototype,"postConstruct",null),e}(Bt),up=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),cp=function(t){function e(e,o,n){var r=t.call(this,e,o,n)||this;return r.iconCreated=!1,r.column=e,r}return up(e,t),e.prototype.setComp=function(t,e,o,n){this.comp=t,this.eButtonShowMainFilter=o,this.eFloatingFilterBody=n,this.setGui(e),this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this)),this.setupFilterChangedListener(),this.addManagedListener(this.column,ct.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))},e.prototype.resizeHeader=function(){},e.prototype.moveHeader=function(){},e.prototype.setupActive=function(){var t=this.column.getColDef(),e=!!t.filter,o=!!t.floatingFilter;this.active=e&&o},e.prototype.setupUi=function(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),this.active&&!this.iconCreated){var t=zn("filter",this.gridOptionsService,this.column);t&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(t))}},e.prototype.setupFocus=function(){this.createManagedBean(new Nr(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))},e.prototype.setupAria=function(){var t=this.localeService.getLocaleTextFunc();ze(this.eButtonShowMainFilter,t("ariaFilterMenuOpen","Open Filter Menu"))},e.prototype.onTabKeyDown=function(t){if(!(this.gridOptionsService.getDocument().activeElement===this.eGui)){var e=this.focusService.findNextFocusableElement(this.eGui,null,t.shiftKey);if(e)return this.beans.headerNavigationService.scrollToColumn(this.column),t.preventDefault(),void e.focus();var o=this.findNextColumnWithFloatingFilter(t.shiftKey);o&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:o},event:t})&&t.preventDefault()}},e.prototype.findNextColumnWithFloatingFilter=function(t){var e=this.beans.columnModel,o=this.column;do{if(!(o=t?e.getDisplayedColBefore(o):e.getDisplayedColAfter(o)))break}while(!o.getColDef().filter||!o.getColDef().floatingFilter);return o},e.prototype.handleKeyDown=function(e){t.prototype.handleKeyDown.call(this,e);var o=this.getWrapperHasFocus();switch(e.key){case jn.UP:case jn.DOWN:o||e.preventDefault();case jn.LEFT:case jn.RIGHT:if(o)return;e.stopPropagation();case jn.ENTER:o&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case jn.ESCAPE:o||this.eGui.focus()}},e.prototype.onFocusIn=function(t){if(!this.eGui.contains(t.relatedTarget)){var e=!!t.relatedTarget&&!t.relatedTarget.classList.contains("ag-floating-filter"),o=!!t.relatedTarget&&en(t.relatedTarget,"ag-floating-filter");if(e&&o&&t.target===this.eGui){var n=this.lastFocusEvent,r=!(!n||n.key!==jn.TAB);if(n&&r){var i=n.shiftKey;this.focusService.focusInto(this.eGui,i)}}var a=this.getRowIndex();this.beans.focusService.setFocusedHeader(a,this.column)}},e.prototype.setupHover=function(){var t=this;this.createManagedBean(new lp([this.column],this.eGui));var e=function(){if(t.gridOptionsService.get("columnHoverHighlight")){var e=t.beans.columnHoverService.isHovered(t.column);t.comp.addOrRemoveCssClass("ag-column-hover",e)}};this.addManagedListener(this.eventService,qt.EVENT_COLUMN_HOVER_CHANGED,e),e()},e.prototype.setupLeft=function(){var t=new ip(this.column,this.eGui,this.beans);this.createManagedBean(t)},e.prototype.setupFilterButton=function(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()},e.prototype.setupUserComp=function(){var t=this;if(this.active){var e=this.beans.filterManager.getFloatingFilterCompDetails(this.column,function(){return t.showParentFilter()});e&&this.setCompDetails(e)}},e.prototype.setCompDetails=function(t){this.userCompDetails=t,this.comp.setCompDetails(t)},e.prototype.showParentFilter=function(){var t=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:t,containerType:"floatingFilter",positionBy:"button"})},e.prototype.setupSyncWithFilter=function(){var t=this;if(this.active){var e=this.beans.filterManager,o=function(o){var n=t.comp.getFloatingFilterComp();n&&n.then(function(n){if(n){var r=e.getCurrentFloatingFilterParentModel(t.column);n.onParentModelChanged(r,o)}})};this.destroySyncListener=this.addManagedListener(this.column,ct.EVENT_FILTER_CHANGED,o),e.isFilterActive(this.column)&&o(null)}},e.prototype.setupWidth=function(){var t=this,e=function(){var e="".concat(t.column.getActualWidth(),"px");t.comp.setWidth(e)};this.addManagedListener(this.column,ct.EVENT_WIDTH_CHANGED,e),e()},e.prototype.setupFilterChangedListener=function(){this.active&&(this.destroyFilterChangedListener=this.addManagedListener(this.column,ct.EVENT_FILTER_CHANGED,this.updateFilterButton.bind(this)),this.updateFilterButton())},e.prototype.updateFilterButton=function(){if(!this.suppressFilterButton&&this.comp){var t=this.beans.filterManager.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(t),this.highlightFilterButtonWhenActive&&t&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}},e.prototype.onColDefChanged=function(){var t,e,o=this,n=this.active;this.setupActive();var r=!n&&this.active;n&&!this.active&&(null===(t=this.destroySyncListener)||void 0===t||t.call(this),null===(e=this.destroyFilterChangedListener)||void 0===e||e.call(this));var i=this.active?this.beans.filterManager.getFloatingFilterCompDetails(this.column,function(){return o.showParentFilter()}):null,a=this.comp.getFloatingFilterComp();a&&i?a.then(function(t){var e;!t||o.beans.filterManager.areFilterCompsDifferent(null!==(e=o.userCompDetails)&&void 0!==e?e:null,i)?o.updateCompDetails(i,r):o.updateFloatingFilterParams(i)}):this.updateCompDetails(i,r)},e.prototype.updateCompDetails=function(t,e){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),e&&(this.setupSyncWithFilter(),this.setupFilterChangedListener()))},e.prototype.updateFloatingFilterParams=function(t){var e;if(t){var o=t.params;null===(e=this.comp.getFloatingFilterComp())||void 0===e||e.then(function(t){var e=!1;(null===t||void 0===t?void 0:t.refresh)&&"function"===typeof t.refresh&&(null!==t.refresh(o)&&(e=!0));!e&&(null===t||void 0===t?void 0:t.onParamsUpdated)&&"function"===typeof t.onParamsUpdated&&(null!==t.onParamsUpdated(o)&&O("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead."))})}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.destroySyncListener=null,this.destroyFilterChangedListener=null},e}(op),pp=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),dp=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},hp=function(t){function e(e,o,n,r,i){var a=t.call(this)||this;return a.pinned=e,a.column=o,a.eResize=n,a.comp=r,a.ctrl=i,a}return pp(e,t),e.prototype.postConstruct=function(){var t,e,o=this,n=[],r=function(){n.forEach(function(t){return t()}),n.length=0},i=function(){var i=o.column.isResizable(),a=!o.gridOptionsService.get("suppressAutoSize")&&!o.column.getColDef().suppressAutoSize;(i!==t||a!==e)&&(t=i,e=a,r(),function(){if(Qo(o.eResize,t),t){var r=o.horizontalResizeService.addResizeBar({eResizeBar:o.eResize,onResizeStart:o.onResizeStart.bind(o),onResizing:o.onResizing.bind(o,!1),onResizeEnd:o.onResizing.bind(o,!0)});if(n.push(r),e){var i=o.gridOptionsService.get("skipHeaderOnAutoSize"),a=function(){o.columnModel.autoSizeColumn(o.column,"uiColumnResized",i)};o.eResize.addEventListener("dblclick",a);var s=new ra(o.eResize);s.addEventListener(ra.EVENT_DOUBLE_TAP,a),n.push(function(){o.eResize.removeEventListener("dblclick",a),s.removeEventListener(ra.EVENT_DOUBLE_TAP,a),s.destroy()})}}}())};i(),this.addDestroyFunc(r),this.ctrl.addRefreshFunction(i)},e.prototype.onResizing=function(t,e){var o=this.column,n=this.lastResizeAmount,r=this.resizeStartWidth,i=this.normaliseResizeAmount(e),a=[{key:o,newWidth:r+i}];if(this.column.getPinned()&&this.pinnedWidthService.getPinnedLeftWidth()+this.pinnedWidthService.getPinnedRightWidth()+(i-n)>rn(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50)return;this.lastResizeAmount=i,this.columnModel.setColumnWidths(a,this.resizeWithShiftKey,t,"uiColumnResized"),t&&this.toggleColumnResizing(!1)},e.prototype.onResizeStart=function(t){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=t,this.toggleColumnResizing(!0)},e.prototype.toggleColumnResizing=function(t){this.comp.addOrRemoveCssClass("ag-column-resizing",t)},e.prototype.normaliseResizeAmount=function(t){var e=t,o="left"!==this.pinned,n="right"===this.pinned;return this.gridOptionsService.get("enableRtl")?o&&(e*=-1):n&&(e*=-1),e},dp([J("horizontalResizeService")],e.prototype,"horizontalResizeService",void 0),dp([J("pinnedWidthService")],e.prototype,"pinnedWidthService",void 0),dp([J("ctrlsService")],e.prototype,"ctrlsService",void 0),dp([J("columnModel")],e.prototype,"columnModel",void 0),dp([Y],e.prototype,"postConstruct",null),e}(Bt),fp=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),gp=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},yp=function(t){function e(e){var o=t.call(this)||this;return o.cbSelectAllVisible=!1,o.processingEventFromCheckbox=!1,o.column=e,o}return fp(e,t),e.prototype.onSpaceKeyDown=function(t){var e=this.cbSelectAll,o=this.gridOptionsService.getDocument();e.isDisplayed()&&!e.getGui().contains(o.activeElement)&&(t.preventDefault(),e.setValue(!e.getValue()))},e.prototype.getCheckboxGui=function(){return this.cbSelectAll.getGui()},e.prototype.setComp=function(t){this.headerCellCtrl=t,this.cbSelectAll=this.createManagedBean(new ui),this.cbSelectAll.addCssClass("ag-header-select-all"),ke(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,qt.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_PAGINATION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,qt.EVENT_FIELD_VALUE_CHANGED,this.onCbSelectAll.bind(this)),Ye(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()},e.prototype.onNewColumnsLoaded=function(){this.showOrHideSelectAll()},e.prototype.onDisplayedColumnsChanged=function(){this.isAlive()&&this.showOrHideSelectAll()},e.prototype.showOrHideSelectAll=function(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()},e.prototype.onModelChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},e.prototype.onSelectionChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},e.prototype.updateStateOfCheckbox=function(){if(!this.processingEventFromCheckbox){this.processingEventFromCheckbox=!0;var t=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(t);var e=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!e),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}},e.prototype.refreshSelectAllLabel=function(){var t=this.localeService.getLocaleTextFunc(),e=this.cbSelectAll.getValue()?t("ariaChecked","checked"):t("ariaUnchecked","unchecked"),o=t("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll","".concat(o," (").concat(e,")")):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel("".concat(o," (").concat(e,")")),this.headerCellCtrl.announceAriaDescription()},e.prototype.checkSelectionType=function(t){return!("multiple"!==this.gridOptionsService.get("rowSelection"))||(console.warn("AG Grid: ".concat(t," is only available if using 'multiple' rowSelection.")),!1)},e.prototype.checkRightRowModelType=function(t){var e=this.rowModel.getType();return!("clientSide"!==e&&"serverSide"!==e)||(console.warn("AG Grid: ".concat(t," is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ").concat(e,".")),!1)},e.prototype.onCbSelectAll=function(){if(!this.processingEventFromCheckbox&&this.cbSelectAllVisible){var t=this.cbSelectAll.getValue(),e=this.isFilteredOnly(),o=this.isCurrentPageOnly(),n="uiSelectAll";o?n="uiSelectAllCurrentPage":e&&(n="uiSelectAllFiltered");var r={source:n,justFiltered:e,justCurrentPage:o};t?this.selectionService.selectAllRowNodes(r):this.selectionService.deselectAllRowNodes(r)}},e.prototype.isCheckboxSelection=function(){var t=this.column.getColDef().headerCheckboxSelection;"function"===typeof t&&(t=t(this.gridOptionsService.addGridCommonParams({column:this.column,colDef:this.column.getColDef()})));return!!t&&(this.checkRightRowModelType("headerCheckboxSelection")&&this.checkSelectionType("headerCheckboxSelection"))},e.prototype.isFilteredOnly=function(){return!!this.column.getColDef().headerCheckboxSelectionFilteredOnly},e.prototype.isCurrentPageOnly=function(){return!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly},gp([J("rowModel")],e.prototype,"rowModel",void 0),gp([J("selectionService")],e.prototype,"selectionService",void 0),e}(Bt),vp=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),mp=function(t){function e(e,o,n){var r=t.call(this,e,o,n)||this;return r.refreshFunctions=[],r.userHeaderClasses=new Set,r.ariaDescriptionProperties=new Map,r.column=e,r}return vp(e,t),e.prototype.setComp=function(t,e,o,n){var r=this;this.comp=t,this.setGui(e),this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(n),this.addColumnHoverListener(),this.setupFilterClass(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.resizeFeature=this.createManagedBean(new hp(this.getPinned(),this.column,o,t,this)),this.createManagedBean(new lp([this.column],e)),this.createManagedBean(new ip(this.column,e,this.beans)),this.createManagedBean(new Nr(e,{shouldStopEventPropagation:function(t){return r.shouldStopEventPropagation(t)},onTabKeyDown:function(){return null},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(),this.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],this.refresh.bind(this)),this.addManagedListener(this.column,ct.EVENT_COL_DEF_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))},e.prototype.resizeHeader=function(t,e){var o,n;if(this.column.isResizable()){var r=this.column.getActualWidth(),i=null!==(o=this.column.getMinWidth())&&void 0!==o?o:0,a=null!==(n=this.column.getMaxWidth())&&void 0!==n?n:Number.MAX_SAFE_INTEGER,s=Math.min(Math.max(r+t,i),a);this.beans.columnModel.setColumnWidths([{key:this.column,newWidth:s}],e,!0,"uiColumnResized")}},e.prototype.moveHeader=function(t){var e=this.eGui,o=this.column,n=this.gridOptionsService,r=this.ctrlsService,i=this.getPinned(),a=e.getBoundingClientRect().left,s=o.getActualWidth(),l=n.get("enableRtl"),u=t===ji.Left!==l,c=kc.normaliseX(u?a-20:a+s+20,i,!0,n,r);kc.attemptMoveColumns({allMovingColumns:[o],isFromHeader:!0,hDirection:t,xPosition:c,pinned:i,fromEnter:!1,fakeEvent:!1,gridOptionsService:n,columnModel:this.beans.columnModel}),r.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(o,"auto")},e.prototype.setupUserComp=function(){var t=this.lookupUserCompDetails();this.setCompDetails(t)},e.prototype.setCompDetails=function(t){this.userCompDetails=t,this.comp.setUserCompDetails(t)},e.prototype.lookupUserCompDetails=function(){var t=this.createParams(),e=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(e,t)},e.prototype.createParams=function(){var t=this;return this.gridOptionsService.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:function(e){t.menuService.showColumnMenu({column:t.column,buttonElement:e,positionBy:"button"})},showColumnMenuAfterMouseClick:function(e){t.menuService.showColumnMenu({column:t.column,mouseEvent:e,positionBy:"mouse"})},showFilter:function(e){t.menuService.showFilterMenu({column:t.column,buttonElement:e,containerType:"columnFilter",positionBy:"button"})},progressSort:function(e){t.beans.sortController.progressSort(t.column,!!e,"uiColumnSorted")},setSort:function(e,o){t.beans.sortController.setSortForColumn(t.column,e,!!o,"uiColumnSorted")},eGridHeader:this.getGui()})},e.prototype.setupSelectAll=function(){this.selectAllFeature=this.createManagedBean(new yp(this.column)),this.selectAllFeature.setComp(this)},e.prototype.getSelectAllGui=function(){return this.selectAllFeature.getCheckboxGui()},e.prototype.handleKeyDown=function(e){t.prototype.handleKeyDown.call(this,e),e.key===jn.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===jn.ENTER&&this.onEnterKeyDown(e),e.key===jn.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)},e.prototype.onEnterKeyDown=function(t){if(t.ctrlKey||t.metaKey)this.showMenuOnKeyPress(t,!0);else if(this.sortable){var e=t.shiftKey;this.beans.sortController.progressSort(this.column,e,"uiColumnSorted")}},e.prototype.showMenuOnKeyPress=function(t,e){var o=this.comp.getUserCompInstance();o&&o instanceof ca&&o.onMenuKeyboardShortcut(e)&&t.preventDefault()},e.prototype.onFocusIn=function(t){if(!this.getGui().contains(t.relatedTarget)){var e=this.getRowIndex();this.focusService.setFocusedHeader(e,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)},e.prototype.onFocusOut=function(t){this.getGui().contains(t.relatedTarget)||this.setActiveHeader(!1)},e.prototype.setupTooltip=function(){var t=this,e={getColumn:function(){return t.column},getColDef:function(){return t.column.getColDef()},getGui:function(){return t.eGui},getLocation:function(){return"header"},getTooltipValue:function(){return t.column.getColDef().headerTooltip}},o=this.createManagedBean(new iu(e,this.beans));o.setComp(this.eGui),this.refreshFunctions.push(function(){return o.refreshToolTip()})},e.prototype.setupClassesFromColDef=function(){var t=this,e=function(){var e=t.column.getColDef(),o=vu.getHeaderClassesFromColDef(e,t.gridOptionsService,t.column,null),n=t.userHeaderClasses;t.userHeaderClasses=new Set(o),o.forEach(function(e){n.has(e)?n.delete(e):t.comp.addOrRemoveCssClass(e,!0)}),n.forEach(function(e){return t.comp.addOrRemoveCssClass(e,!1)})};this.refreshFunctions.push(e),e()},e.prototype.setDragSource=function(t){var e=this;if(this.dragSourceElement=t,this.removeDragSource(),t&&this.draggable){var o=this,n=o.column,r=o.beans,i=o.displayName,a=o.dragAndDropService,s=o.gridOptionsService,l=r.columnModel,u=!this.gridOptionsService.get("suppressDragLeaveHidesColumns"),c=this.dragSource={type:Ba.HeaderCell,eElement:t,getDefaultIconName:function(){return u?Wa.ICON_HIDE:Wa.ICON_NOT_ALLOWED},getDragItem:function(){return e.createDragItem(n)},dragItemName:i,onDragStarted:function(){u=!s.get("suppressDragLeaveHidesColumns"),n.setMoving(!0,"uiColumnMoved")},onDragStopped:function(){return n.setMoving(!1,"uiColumnMoved")},onGridEnter:function(t){var e;if(u){var o=(null===(e=null===t||void 0===t?void 0:t.columns)||void 0===e?void 0:e.filter(function(t){return!t.getColDef().lockVisible}))||[];l.setColumnsVisible(o,!0,"uiColumnMoved")}},onGridExit:function(t){var e;if(u){var o=(null===(e=null===t||void 0===t?void 0:t.columns)||void 0===e?void 0:e.filter(function(t){return!t.getColDef().lockVisible}))||[];l.setColumnsVisible(o,!1,"uiColumnMoved")}}};a.addDragSource(c,!0)}},e.prototype.createDragItem=function(t){var e={};return e[t.getId()]=t.isVisible(),{columns:[t],visibleState:e}},e.prototype.updateState=function(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()},e.prototype.addRefreshFunction=function(t){this.refreshFunctions.push(t)},e.prototype.refresh=function(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(function(t){return t()})},e.prototype.refreshHeaderComp=function(){var t=this.lookupUserCompDetails();!!(null!=this.comp.getUserCompInstance()&&this.userCompDetails.componentClass==t.componentClass)&&this.attemptHeaderCompRefresh(t.params)?this.setDragSource(this.dragSourceElement):this.setCompDetails(t)},e.prototype.attemptHeaderCompRefresh=function(t){var e=this.comp.getUserCompInstance();return!!e&&(!!e.refresh&&e.refresh(t))},e.prototype.calculateDisplayName=function(){return this.beans.columnModel.getDisplayNameForColumn(this.column,"header",!0)},e.prototype.checkDisplayName=function(){this.displayName!==this.calculateDisplayName()&&this.refresh()},e.prototype.workOutDraggable=function(){var t=this.column.getColDef();return!!(!this.gridOptionsService.get("suppressMovableColumns")&&!t.suppressMovable&&!t.lockPosition)||!!t.enableRowGroup||!!t.enablePivot},e.prototype.onColumnRowGroupChanged=function(){this.checkDisplayName()},e.prototype.onColumnPivotChanged=function(){this.checkDisplayName()},e.prototype.onColumnValueChanged=function(){this.checkDisplayName()},e.prototype.setupWidth=function(){var t=this,e=function(){var e=t.column.getActualWidth();t.comp.setWidth("".concat(e,"px"))};this.addManagedListener(this.column,ct.EVENT_WIDTH_CHANGED,e),e()},e.prototype.setupMovingCss=function(){var t=this,e=function(){t.comp.addOrRemoveCssClass("ag-header-cell-moving",t.column.isMoving())};this.addManagedListener(this.column,ct.EVENT_MOVING_CHANGED,e),e()},e.prototype.setupMenuClass=function(){var t=this,e=function(){t.comp.addOrRemoveCssClass("ag-column-menu-visible",t.column.isMenuVisible())};this.addManagedListener(this.column,ct.EVENT_MENU_VISIBLE_CHANGED,e),e()},e.prototype.setupSortableClass=function(){var t=this,e=function(){t.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!t.sortable)};e(),this.addRefreshFunction(e),this.addManagedListener(this.eventService,ct.EVENT_SORT_CHANGED,this.refreshAriaSort.bind(this))},e.prototype.setupFilterClass=function(){var t=this,e=function(){var e=t.column.isFilterActive();t.comp.addOrRemoveCssClass("ag-header-cell-filtered",e),t.refreshAria()};this.addManagedListener(this.column,ct.EVENT_FILTER_ACTIVE_CHANGED,e),e()},e.prototype.setupWrapTextClass=function(){var t=this,e=function(){var e=!!t.column.getColDef().wrapHeaderText;t.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",e)};e(),this.addRefreshFunction(e)},e.prototype.onDisplayedColumnsChanged=function(){t.prototype.onDisplayedColumnsChanged.call(this),this.isAlive()&&this.onHeaderHeightChanged()},e.prototype.onHeaderHeightChanged=function(){this.refreshSpanHeaderHeight()},e.prototype.refreshSpanHeaderHeight=function(){var t=this.eGui,e=this.column,o=this.comp,n=this.beans;if(!e.isSpanHeaderHeight())return t.style.removeProperty("top"),t.style.removeProperty("height"),o.addOrRemoveCssClass("ag-header-span-height",!1),void o.addOrRemoveCssClass("ag-header-span-total",!1);var r=this.column.getColumnGroupPaddingInfo(),i=r.numberOfParents,a=r.isSpanningTotal;o.addOrRemoveCssClass("ag-header-span-height",i>0);var s=n.columnModel,l=s.getColumnHeaderRowHeight();if(0===i)return o.addOrRemoveCssClass("ag-header-span-total",!1),t.style.setProperty("top","0px"),void t.style.setProperty("height","".concat(l,"px"));o.addOrRemoveCssClass("ag-header-span-total",a);var u=i*(s.isPivotMode()?s.getPivotGroupHeaderHeight():s.getGroupHeaderHeight());t.style.setProperty("top","".concat(-u,"px")),t.style.setProperty("height","".concat(l+u,"px"))},e.prototype.setupAutoHeight=function(t){var e,o=this,n=this.beans,r=n.columnModel,i=n.resizeObserverService,a=function(e){if(o.isAlive()){var n=on(o.getGui()),i=n.paddingTop+n.paddingBottom+n.borderBottomWidth+n.borderTopWidth,s=t.offsetHeight+i;if(e<5){var l=o.beans.gridOptionsService.getDocument();if(!l||!l.contains(t)||0==s)return void window.setTimeout(function(){return a(e+1)},0)}r.setColumnHeaderHeight(o.column,s)}},s=!1,l=function(){var t=o.column.isAutoHeaderHeight();t&&!s&&u(),!t&&s&&c()},u=function(){s=!0,a(0),o.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),e=i.observeResize(t,function(){return a(0)})},c=function(){s=!1,e&&e(),o.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),e=void 0};l(),this.addDestroyFunc(function(){return c()}),this.addManagedListener(this.column,ct.EVENT_WIDTH_CHANGED,function(){return s&&a(0)}),this.addManagedListener(this.eventService,ct.EVENT_SORT_CHANGED,function(){s&&window.setTimeout(function(){return a(0)})}),this.addRefreshFunction(l)},e.prototype.refreshAriaSort=function(){if(this.sortable){var t=this.localeService.getLocaleTextFunc(),e=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(Ge(e)),this.setAriaDescriptionProperty("sort",t("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)},e.prototype.refreshAriaMenu=function(){if(this.menuEnabled){var t=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",t("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)},e.prototype.refreshAriaFilterButton=function(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){var t=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",t("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)},e.prototype.refreshAriaFiltered=function(){var t=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",t("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)},e.prototype.setAriaDescriptionProperty=function(t,e){null!=e?this.ariaDescriptionProperties.set(t,e):this.ariaDescriptionProperties.delete(t)},e.prototype.announceAriaDescription=function(){var t=this,e=this.beans.gridOptionsService.getDocument();if(this.eGui.contains(e.activeElement)){var o=Array.from(this.ariaDescriptionProperties.keys()).sort(function(t,e){return"filter"===t?-1:e.charCodeAt(0)-t.charCodeAt(0)}).map(function(e){return t.ariaDescriptionProperties.get(e)}).join(". ");this.beans.ariaAnnouncementService.announceValue(o)}},e.prototype.refreshAria=function(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()},e.prototype.addColumnHoverListener=function(){var t=this,e=function(){if(t.gridOptionsService.get("columnHoverHighlight")){var e=t.beans.columnHoverService.isHovered(t.column);t.comp.addOrRemoveCssClass("ag-column-hover",e)}};this.addManagedListener(this.eventService,qt.EVENT_COLUMN_HOVER_CHANGED,e),e()},e.prototype.getColId=function(){return this.column.getColId()},e.prototype.addActiveHeaderMouseListeners=function(){var t=this,e=function(e){return t.handleMouseOverChange("mouseenter"===e.type)};this.addManagedListener(this.getGui(),"mouseenter",e),this.addManagedListener(this.getGui(),"mouseleave",e),this.addManagedListener(this.getGui(),"click",function(){return t.dispatchColumnMouseEvent(qt.EVENT_COLUMN_HEADER_CLICKED,t.column)}),this.addManagedListener(this.getGui(),"contextmenu",function(e){return t.handleContextMenuMouseEvent(e,void 0,t.column)})},e.prototype.handleMouseOverChange=function(t){this.setActiveHeader(t);var e={type:t?qt.EVENT_COLUMN_HEADER_MOUSE_OVER:qt.EVENT_COLUMN_HEADER_MOUSE_LEAVE,column:this.column};this.eventService.dispatchEvent(e)},e.prototype.setActiveHeader=function(t){this.comp.addOrRemoveCssClass("ag-header-active",t)},e.prototype.getAnchorElementForMenu=function(t){var e=this.comp.getUserCompInstance();return e instanceof ca?e.getAnchorElementForMenu(t):this.getGui()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.refreshFunctions=null,this.selectAllFeature=null,this.dragSourceElement=null,this.userCompDetails=null,this.userHeaderClasses=null,this.ariaDescriptionProperties=null},e}(op),Cp=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),_p=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},wp=function(t){function e(e,o,n,r){var i=t.call(this)||this;return i.eResize=o,i.comp=e,i.pinned=n,i.columnGroup=r,i}return Cp(e,t),e.prototype.postConstruct=function(){var t=this;if(this.columnGroup.isResizable()){var e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gridOptionsService.get("suppressAutoSize")){var o=this.gridOptionsService.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",function(){var e=[];t.columnGroup.getDisplayedLeafColumns().forEach(function(t){t.getColDef().suppressAutoSize||e.push(t.getColId())}),e.length>0&&t.columnModel.autoSizeColumns({columns:e,skipHeader:o,stopAtGroup:t.columnGroup,source:"uiColumnResized"}),t.resizeLeafColumnsToFit("uiColumnResized")})}}else this.comp.setResizableDisplayed(!1)},e.prototype.onResizeStart=function(t){var e=this.getInitialValues(t);this.storeLocalValues(e),this.toggleColumnResizing(!0)},e.prototype.onResizing=function(t,e,o){void 0===o&&(o="uiColumnResized");var n=this.normaliseDragChange(e),r=this.resizeStartWidth+n;this.resizeColumnsFromLocalValues(r,o,t)},e.prototype.getInitialValues=function(t){var e=this.getColumnsToResize(),o=this.getInitialSizeOfColumns(e),n={columnsToResize:e,resizeStartWidth:o,resizeRatios:this.getSizeRatiosOfColumns(e,o)},r=null;if(t&&(r=this.columnModel.getDisplayedGroupAfter(this.columnGroup)),r){var i=r.getDisplayedLeafColumns(),a=n.groupAfterColumns=i.filter(function(t){return t.isResizable()}),s=n.groupAfterStartWidth=this.getInitialSizeOfColumns(a);n.groupAfterRatios=this.getSizeRatiosOfColumns(a,s)}else n.groupAfterColumns=void 0,n.groupAfterStartWidth=void 0,n.groupAfterRatios=void 0;return n},e.prototype.storeLocalValues=function(t){var e=t.columnsToResize,o=t.resizeStartWidth,n=t.resizeRatios,r=t.groupAfterColumns,i=t.groupAfterStartWidth,a=t.groupAfterRatios;this.resizeCols=e,this.resizeStartWidth=o,this.resizeRatios=n,this.resizeTakeFromCols=r,this.resizeTakeFromStartWidth=i,this.resizeTakeFromRatios=a},e.prototype.clearLocalValues=function(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0},e.prototype.resizeLeafColumnsToFit=function(t){var e=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),o=this.getInitialValues();e>o.resizeStartWidth&&this.resizeColumns(o,e,t,!0)},e.prototype.resizeColumnsFromLocalValues=function(t,e,o){var n,r,i;if(void 0===o&&(o=!0),this.resizeCols&&this.resizeRatios){var a={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:null!==(n=this.resizeTakeFromCols)&&void 0!==n?n:void 0,groupAfterStartWidth:null!==(r=this.resizeTakeFromStartWidth)&&void 0!==r?r:void 0,groupAfterRatios:null!==(i=this.resizeTakeFromRatios)&&void 0!==i?i:void 0};this.resizeColumns(a,t,e,o)}},e.prototype.resizeColumns=function(t,e,o,n){void 0===n&&(n=!0);var r=t.columnsToResize,i=t.resizeStartWidth,a=t.resizeRatios,s=t.groupAfterColumns,l=t.groupAfterStartWidth,u=t.groupAfterRatios,c=[];if(c.push({columns:r,ratios:a,width:e}),s){var p=e-i;c.push({columns:s,ratios:u,width:l-p})}this.columnModel.resizeColumnSets({resizeSets:c,finished:n,source:o}),n&&this.toggleColumnResizing(!1)},e.prototype.toggleColumnResizing=function(t){this.comp.addOrRemoveCssClass("ag-column-resizing",t)},e.prototype.getColumnsToResize=function(){return this.columnGroup.getDisplayedLeafColumns().filter(function(t){return t.isResizable()})},e.prototype.getInitialSizeOfColumns=function(t){return t.reduce(function(t,e){return t+e.getActualWidth()},0)},e.prototype.getSizeRatiosOfColumns=function(t,e){return t.map(function(t){return t.getActualWidth()/e})},e.prototype.normaliseDragChange=function(t){var e=t;return this.gridOptionsService.get("enableRtl")?"left"!==this.pinned&&(e*=-1):"right"===this.pinned&&(e*=-1),e},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.clearLocalValues()},_p([J("horizontalResizeService")],e.prototype,"horizontalResizeService",void 0),_p([J("autoWidthCalculator")],e.prototype,"autoWidthCalculator",void 0),_p([J("columnModel")],e.prototype,"columnModel",void 0),_p([Y],e.prototype,"postConstruct",null),e}(Bt),bp=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Sp=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Ep=function(t){function e(e,o){var n=t.call(this)||this;return n.removeChildListenersFuncs=[],n.columnGroup=o,n.comp=e,n}return bp(e,t),e.prototype.postConstruct=function(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,Kt.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))},e.prototype.addListenersToChildrenColumns=function(){var t=this;this.removeListenersOnChildrenColumns();var e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(function(o){o.addEventListener("widthChanged",e),o.addEventListener("visibleChanged",e),t.removeChildListenersFuncs.push(function(){o.removeEventListener("widthChanged",e),o.removeEventListener("visibleChanged",e)})})},e.prototype.removeListenersOnChildrenColumns=function(){this.removeChildListenersFuncs.forEach(function(t){return t()}),this.removeChildListenersFuncs=[]},e.prototype.onDisplayedChildrenChanged=function(){this.addListenersToChildrenColumns(),this.onWidthChanged()},e.prototype.onWidthChanged=function(){var t=this.columnGroup.getActualWidth();this.comp.setWidth("".concat(t,"px")),this.comp.addOrRemoveCssClass("ag-hidden",0===t)},Sp([Y],e.prototype,"postConstruct",null),e}(Bt),xp=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Tp=function(){return(Tp=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Op=function(t){function e(e,o,n){var r=t.call(this,e,o,n)||this;return r.onSuppressColMoveChange=function(){if(!r.isAlive()||r.isSuppressMoving())r.removeDragSource();else if(!r.dragSource){var t=r.getGui();r.setDragSource(t)}},r.column=e,r}return xp(e,t),e.prototype.setComp=function(t,e,o){this.comp=t,this.setGui(e),this.displayName=this.beans.columnModel.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.setupUserComp(),this.addHeaderMouseListeners();var n=this.getParentRowCtrl().getPinned(),r=this.column.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new lp(r,e)),this.createManagedBean(new ip(this.column,e,this.beans)),this.createManagedBean(new Ep(t,this.column)),this.resizeFeature=this.createManagedBean(new wp(t,o,n,this.column)),this.createManagedBean(new Nr(e,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:function(){},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addManagedPropertyListener(qt.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners()},e.prototype.resizeHeader=function(t,e){if(this.resizeFeature){var o=this.resizeFeature.getInitialValues(e);this.resizeFeature.resizeColumns(o,o.resizeStartWidth+t,"uiColumnResized",!0)}},e.prototype.moveHeader=function(t){var e=this,o=e.beans,n=e.eGui,r=e.column,i=e.gridOptionsService,a=e.ctrlsService,s=i.get("enableRtl"),l=t===ji.Left,u=this.getPinned(),c=n.getBoundingClientRect(),p=c.left,d=c.width,h=kc.normaliseX(l!==s?p-20:p+d+20,u,!0,i,a),f=r.getGroupId(),g=this.focusService.getFocusedHeader();kc.attemptMoveColumns({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,hDirection:t,xPosition:h,pinned:u,fromEnter:!1,fakeEvent:!1,gridOptionsService:i,columnModel:o.columnModel});var y=r.getDisplayedLeafColumns(),v=l?y[0]:ft(y);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(v,"auto"),!this.isAlive()&&g&&this.restoreFocus(f,r,g)},e.prototype.restoreFocus=function(t,e,o){var n=e.getLeafColumns();if(n.length){var r=n[0].getParent();if(r){var i=this.findGroupWidthId(r,t);i&&this.focusService.focusHeaderPosition({headerPosition:Tp(Tp({},o),{column:i})})}}},e.prototype.findGroupWidthId=function(t,e){for(;t;){if(t.getGroupId()===e)return t;t=t.getParent()}return null},e.prototype.resizeLeafColumnsToFit=function(t){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(t)},e.prototype.setupUserComp=function(){var t=this,e=this.gridOptionsService.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:function(e){t.beans.columnModel.setColumnGroupOpened(t.column.getProvidedColumnGroup(),e,"gridInitializing")}}),o=this.userComponentFactory.getHeaderGroupCompDetails(e);this.comp.setUserCompDetails(o)},e.prototype.addHeaderMouseListeners=function(){var t=this,e=function(e){return t.handleMouseOverChange("mouseenter"===e.type)};this.addManagedListener(this.getGui(),"mouseenter",e),this.addManagedListener(this.getGui(),"mouseleave",e),this.addManagedListener(this.getGui(),"click",function(){return t.dispatchColumnMouseEvent(qt.EVENT_COLUMN_HEADER_CLICKED,t.column.getProvidedColumnGroup())}),this.addManagedListener(this.getGui(),"contextmenu",function(e){return t.handleContextMenuMouseEvent(e,void 0,t.column.getProvidedColumnGroup())})},e.prototype.handleMouseOverChange=function(t){var e={type:t?qt.EVENT_COLUMN_HEADER_MOUSE_OVER:qt.EVENT_COLUMN_HEADER_MOUSE_LEAVE,column:this.column.getProvidedColumnGroup()};this.eventService.dispatchEvent(e)},e.prototype.setupTooltip=function(){var t=this,e=this.column.getColGroupDef(),o={getColumn:function(){return t.column},getGui:function(){return t.eGui},getLocation:function(){return"headerGroup"},getTooltipValue:function(){return e&&e.headerTooltip}};e&&(o.getColDef=function(){return e}),this.createManagedBean(new iu(o,this.beans)).setComp(this.eGui)},e.prototype.setupExpandable=function(){var t=this.column.getProvidedColumnGroup();this.refreshExpanded(),this.addManagedListener(t,dt.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(t,dt.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))},e.prototype.refreshExpanded=function(){var t=this.column;this.expandable=t.isExpandable();var e=t.isExpanded();this.expandable?this.comp.setAriaExpanded(e?"true":"false"):this.comp.setAriaExpanded(void 0)},e.prototype.getColId=function(){return this.column.getUniqueId()},e.prototype.addClasses=function(){var t=this,e=this.column.getColGroupDef(),o=vu.getHeaderClassesFromColDef(e,this.gridOptionsService,null,this.column);this.column.isPadding()?(o.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(function(t){return t.isSpanHeaderHeight()})&&o.push("ag-header-span-height")):o.push("ag-header-group-cell-with-group");o.forEach(function(e){return t.comp.addOrRemoveCssClass(e,!0)})},e.prototype.setupMovingCss=function(){var t=this,e=this.column.getProvidedColumnGroup().getLeafColumns(),o=function(){return t.comp.addOrRemoveCssClass("ag-header-cell-moving",t.column.isMoving())};e.forEach(function(e){t.addManagedListener(e,ct.EVENT_MOVING_CHANGED,o)}),o()},e.prototype.onFocusIn=function(t){if(!this.eGui.contains(t.relatedTarget)){var e=this.getRowIndex();this.beans.focusService.setFocusedHeader(e,this.column)}},e.prototype.handleKeyDown=function(e){t.prototype.handleKeyDown.call(this,e);var o=this.getWrapperHasFocus();if(this.expandable&&o&&e.key===jn.ENTER){var n=this.column,r=!n.isExpanded();this.beans.columnModel.setColumnGroupOpened(n.getProvidedColumnGroup(),r,"uiColumnExpanded")}},e.prototype.setDragSource=function(t){var e=this;if(this.isAlive()&&!this.isSuppressMoving()&&(this.removeDragSource(),t)){var o=this,n=o.beans,r=o.column,i=o.displayName,a=o.gridOptionsService,s=o.dragAndDropService,l=n.columnModel,u=r.getProvidedColumnGroup().getLeafColumns(),c=!a.get("suppressDragLeaveHidesColumns"),p=this.dragSource={type:Ba.HeaderCell,eElement:t,getDefaultIconName:function(){return c?Wa.ICON_HIDE:Wa.ICON_NOT_ALLOWED},dragItemName:i,getDragItem:function(){return e.getDragItemForGroup(r)},onDragStarted:function(){c=!a.get("suppressDragLeaveHidesColumns"),u.forEach(function(t){return t.setMoving(!0,"uiColumnDragged")})},onDragStopped:function(){return u.forEach(function(t){return t.setMoving(!1,"uiColumnDragged")})},onGridEnter:function(t){var e;if(c){var o=(null===(e=null===t||void 0===t?void 0:t.columns)||void 0===e?void 0:e.filter(function(t){return!t.getColDef().lockVisible}))||[];l.setColumnsVisible(o,!0,"uiColumnMoved")}},onGridExit:function(t){var e;if(c){var o=(null===(e=null===t||void 0===t?void 0:t.columns)||void 0===e?void 0:e.filter(function(t){return!t.getColDef().lockVisible}))||[];l.setColumnsVisible(o,!1,"uiColumnMoved")}}};s.addDragSource(p,!0)}},e.prototype.getDragItemForGroup=function(t){var e=t.getProvidedColumnGroup().getLeafColumns(),o={};e.forEach(function(t){return o[t.getId()]=t.isVisible()});var n=[];return this.beans.columnModel.getAllDisplayedColumns().forEach(function(t){e.indexOf(t)>=0&&(n.push(t),mt(e,t))}),e.forEach(function(t){return n.push(t)}),{columns:n,visibleState:o}},e.prototype.isSuppressMoving=function(){var t=!1;return this.column.getLeafColumns().forEach(function(e){(e.getColDef().suppressMovable||e.getColDef().lockPosition)&&(t=!0)}),t||this.gridOptionsService.get("suppressMovableColumns")},e}(op),Rp=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Pp=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Ap=function(t){var e="function"===typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dp=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},Mp=0,Ip=function(t){function e(e,o,n){var r=t.call(this)||this;r.instanceId=Mp++,r.rowIndex=e,r.pinned=o,r.type=n;var i=n==Mc.COLUMN_GROUP?"ag-header-row-column-group":n==Mc.FLOATING_FILTER?"ag-header-row-column-filter":"ag-header-row-column";return r.headerRowClass="ag-header-row ".concat(i),r}return Rp(e,t),e.prototype.postConstruct=function(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.isEnsureDomOrder=this.gridOptionsService.get("ensureDomOrder")},e.prototype.getInstanceId=function(){return this.instanceId},e.prototype.setComp=function(t,e){void 0===e&&(e=!0),this.comp=t,e&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()},e.prototype.getHeaderRowClass=function(){return this.headerRowClass},e.prototype.getAriaRowIndex=function(){return this.rowIndex+1},e.prototype.addEventListeners=function(){var t=this;this.addManagedListener(this.eventService,qt.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_VIRTUAL_COLUMNS_CHANGED,function(e){return t.onVirtualColumnsChanged(e.afterScroll)}),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_GRID_STYLES_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",function(e){return t.isEnsureDomOrder=e.currentValue}),this.addManagedPropertyListener("headerHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("groupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotGroupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("floatingFiltersHeight",this.onRowHeightChanged.bind(this))},e.prototype.getHeaderCellCtrl=function(t){if(this.headerCellCtrls)return p(this.headerCellCtrls).find(function(e){return e.getColumnGroupChild()===t})},e.prototype.onDisplayedColumnsChanged=function(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()},e.prototype.getType=function(){return this.type},e.prototype.onColumnResized=function(){this.setWidth()},e.prototype.setWidth=function(){var t=this.getWidthForRow();this.comp.setWidth("".concat(t,"px"))},e.prototype.getWidthForRow=function(){var t=this.beans.columnModel;return this.isPrintLayout?null!=this.pinned?0:t.getContainerWidth("right")+t.getContainerWidth("left")+t.getContainerWidth(null):t.getContainerWidth(this.pinned)},e.prototype.onRowHeightChanged=function(){var t=this.getTopAndHeight(),e=t.topOffset,o=t.rowHeight;this.comp.setTop(e+"px"),this.comp.setHeight(o+"px")},e.prototype.getTopAndHeight=function(){var t=this.beans,e=t.columnModel,o=t.filterManager,n=e.getHeaderRowCount(),r=[],i=0;o.hasFloatingFilters()&&(n++,i=1);for(var a=e.getColumnGroupHeaderRowHeight(),s=e.getColumnHeaderRowHeight(),l=n-(1+i),u=0;u<l;u++)r.push(a);r.push(s);for(u=0;u<i;u++)r.push(e.getFloatingFiltersHeight());var c=0;for(u=0;u<this.rowIndex;u++)c+=r[u];return{topOffset:c,rowHeight:r[this.rowIndex]}},e.prototype.getPinned=function(){return this.pinned},e.prototype.getRowIndex=function(){return this.rowIndex},e.prototype.onVirtualColumnsChanged=function(t){void 0===t&&(t=!1);var e=this.getHeaderCtrls(),o=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(e,o,t)},e.prototype.getHeaderCtrls=function(){var t,e,o,n,r=this,i=this.headerCellCtrls;this.headerCellCtrls=new Map;var a=this.getColumnsInViewport();try{for(var s=Ap(a),l=s.next();!l.done;l=s.next()){var u=l.value;this.recycleAndCreateHeaderCtrls(u,i)}}catch(y){t={error:y}}finally{try{l&&!l.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}var c=function(t){var e=r.beans,o=e.focusService,n=e.columnModel;return!!o.isHeaderWrapperFocused(t)&&n.isDisplayed(t.getColumnGroupChild())};if(i)try{for(var p=Ap(i),d=p.next();!d.done;d=p.next()){var h=Dp(d.value,2),f=h[0],g=h[1];c(g)?this.headerCellCtrls.set(f,g):this.destroyBean(g)}}catch(v){o={error:v}}finally{try{d&&!d.done&&(n=p.return)&&n.call(p)}finally{if(o)throw o.error}}return Array.from(this.headerCellCtrls.values())},e.prototype.recycleAndCreateHeaderCtrls=function(t,e){if(this.headerCellCtrls&&!t.isEmptyGroup()){var o,n=t.getUniqueId();if(e&&(o=e.get(n),e.delete(n)),o&&o.getColumnGroupChild()!=t&&(this.destroyBean(o),o=void 0),null==o)switch(this.type){case Mc.FLOATING_FILTER:o=this.createBean(new cp(t,this.beans,this));break;case Mc.COLUMN_GROUP:o=this.createBean(new Op(t,this.beans,this));break;default:o=this.createBean(new mp(t,this.beans,this))}this.headerCellCtrls.set(n,o)}},e.prototype.getColumnsInViewport=function(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()},e.prototype.getColumnsInViewportPrintLayout=function(){if(null!=this.pinned)return[];var t=[],e=this.getActualDepth(),o=this.beans.columnModel;return["left",null,"right"].forEach(function(n){var r=o.getVirtualHeaderGroupRow(n,e);t=t.concat(r)}),t},e.prototype.getActualDepth=function(){return this.type==Mc.FLOATING_FILTER?this.rowIndex-1:this.rowIndex},e.prototype.getColumnsInViewportNormalLayout=function(){return this.beans.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())},e.prototype.focusHeader=function(t,e){if(!this.headerCellCtrls)return!1;var o=Array.from(this.headerCellCtrls.values()).find(function(e){return e.getColumnGroupChild()==t});return!!o&&o.focus(e)},e.prototype.destroy=function(){var e=this;this.headerCellCtrls&&this.headerCellCtrls.forEach(function(t){e.destroyBean(t)}),this.headerCellCtrls=void 0,t.prototype.destroy.call(this)},Pp([J("beans")],e.prototype,"beans",void 0),Pp([Y],e.prototype,"postConstruct",null),e}(Bt),Lp=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Fp=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Np=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},kp=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},Gp=function(t){function e(e){var o=t.call(this)||this;return o.hidden=!1,o.includeFloatingFilter=!1,o.groupsRowCtrls=[],o.pinned=e,o}return Lp(e,t),e.prototype.setComp=function(t,e){this.comp=t,this.eViewport=e,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport),this.addManagedListener(this.eventService,qt.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()},e.prototype.setupDragAndDrop=function(t){var e=new Hc(this.pinned,t);this.createManagedBean(e)},e.prototype.refresh=function(t){var e=this;void 0===t&&(t=!1);var o=new cr,n=this.focusService.getFocusHeaderToUseAfterRefresh();!function(){var t=e.columnModel.getHeaderRowCount()-1;e.groupsRowCtrls=e.destroyBeans(e.groupsRowCtrls);for(var n=0;n<t;n++){var r=e.createBean(new Ip(o.next(),e.pinned,Mc.COLUMN_GROUP));e.groupsRowCtrls.push(r)}}(),function(){var n=o.next(),r=!e.hidden&&(null==e.columnsRowCtrl||!t||e.columnsRowCtrl.getRowIndex()!==n);(r||e.hidden)&&(e.columnsRowCtrl=e.destroyBean(e.columnsRowCtrl)),r&&(e.columnsRowCtrl=e.createBean(new Ip(n,e.pinned,Mc.COLUMN)))}(),function(){e.includeFloatingFilter=e.filterManager.hasFloatingFilters()&&!e.hidden;var n=function(){e.filtersRowCtrl=e.destroyBean(e.filtersRowCtrl)};if(e.includeFloatingFilter){var r=o.next();if(e.filtersRowCtrl){var i=e.filtersRowCtrl.getRowIndex()!==r;t&&!i||n()}e.filtersRowCtrl||(e.filtersRowCtrl=e.createBean(new Ip(r,e.pinned,Mc.FLOATING_FILTER)))}else n()}();var r=this.getAllCtrls();this.comp.setCtrls(r),this.restoreFocusOnHeader(n)},e.prototype.restoreFocusOnHeader=function(t){null!=t&&t.column.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:t})},e.prototype.getAllCtrls=function(){var t=kp([],Np(this.groupsRowCtrls),!1);return this.columnsRowCtrl&&t.push(this.columnsRowCtrl),this.filtersRowCtrl&&t.push(this.filtersRowCtrl),t},e.prototype.onGridColumnsChanged=function(){this.refresh(!0)},e.prototype.onDisplayedColumnsChanged=function(){var t=this.filterManager.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==t&&this.refresh(!0)},e.prototype.setupCenterWidth=function(){var t=this;null==this.pinned&&this.createManagedBean(new $u(function(e){return t.comp.setCenterWidth("".concat(e,"px"))},!0))},e.prototype.setHorizontalScroll=function(t){this.comp.setViewportScrollLeft(t)},e.prototype.setupPinnedWidth=function(){var t=this;if(null!=this.pinned){var e="left"===this.pinned,o="right"===this.pinned;this.hidden=!0;var n=function(){var n=e?t.pinnedWidthService.getPinnedLeftWidth():t.pinnedWidthService.getPinnedRightWidth();if(null!=n){var r=0==n,i=t.hidden!==r,a=t.gridOptionsService.get("enableRtl"),s=t.gridOptionsService.getScrollbarWidth(),l=t.scrollVisibleService.isVerticalScrollShowing()&&(a&&e||!a&&o)?n+s:n;t.comp.setPinnedContainerWidth("".concat(l,"px")),t.comp.setDisplayed(!r),i&&(t.hidden=r,t.refresh())}};this.addManagedListener(this.eventService,qt.EVENT_LEFT_PINNED_WIDTH_CHANGED,n),this.addManagedListener(this.eventService,qt.EVENT_RIGHT_PINNED_WIDTH_CHANGED,n),this.addManagedListener(this.eventService,qt.EVENT_SCROLL_VISIBILITY_CHANGED,n),this.addManagedListener(this.eventService,qt.EVENT_SCROLLBAR_WIDTH_CHANGED,n)}},e.prototype.getHeaderCtrlForColumn=function(t){if(t instanceof ct){if(!this.columnsRowCtrl)return;return this.columnsRowCtrl.getHeaderCellCtrl(t)}if(0!==this.groupsRowCtrls.length)for(var e=0;e<this.groupsRowCtrls.length;e++){var o=this.groupsRowCtrls[e].getHeaderCellCtrl(t);if(o)return o}},e.prototype.getHtmlElementForColumnHeader=function(t){var e=this.getHeaderCtrlForColumn(t);return e?e.getGui():null},e.prototype.getRowType=function(t){var e=this.getAllCtrls()[t];return e?e.getType():void 0},e.prototype.focusHeader=function(t,e,o){var n=this.getAllCtrls()[t];return!!n&&n.focusHeader(e,o)},e.prototype.getViewport=function(){return this.eViewport},e.prototype.getRowCount=function(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)},e.prototype.destroy=function(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),t.prototype.destroy.call(this)},Fp([J("ctrlsService")],e.prototype,"ctrlsService",void 0),Fp([J("scrollVisibleService")],e.prototype,"scrollVisibleService",void 0),Fp([J("pinnedWidthService")],e.prototype,"pinnedWidthService",void 0),Fp([J("columnModel")],e.prototype,"columnModel",void 0),Fp([J("focusService")],e.prototype,"focusService",void 0),Fp([J("filterManager")],e.prototype,"filterManager",void 0),e}(Bt),Vp=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Bp=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},zp=function(t){function e(e){var o=t.call(this)||this;return o.headerRowComps={},o.rowCompsList=[],o.pinned=e,o}return Vp(e,t),e.prototype.init=function(){var t=this;this.selectAndSetTemplate();var e={setDisplayed:function(e){return t.setDisplayed(e)},setCtrls:function(e){return t.setCtrls(e)},setCenterWidth:function(e){return t.eCenterContainer.style.width=e},setViewportScrollLeft:function(e){return t.getGui().scrollLeft=e},setPinnedContainerWidth:function(e){var o=t.getGui();o.style.width=e,o.style.maxWidth=e,o.style.minWidth=e}};this.createManagedBean(new Gp(this.pinned)).setComp(e,this.getGui())},e.prototype.selectAndSetTemplate=function(){var t="left"==this.pinned,o="right"==this.pinned,n=t?e.PINNED_LEFT_TEMPLATE:o?e.PINNED_RIGHT_TEMPLATE:e.CENTER_TEMPLATE;this.setTemplate(n),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()},e.prototype.destroyRowComps=function(){this.setCtrls([])},e.prototype.destroyRowComp=function(t){this.destroyBean(t),this.eRowContainer.removeChild(t.getGui())},e.prototype.setCtrls=function(t){var e,o=this,n=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];t.forEach(function(t){var r=t.getInstanceId(),i=n[r];delete n[r];var a=i||o.createBean(new Qc(t));o.headerRowComps[r]=a,o.rowCompsList.push(a),function(t){var n=t.getGui();n.parentElement!=o.eRowContainer&&o.eRowContainer.appendChild(n),e&&vn(o.eRowContainer,n,e),e=n}(a)}),C(n).forEach(function(t){return o.destroyRowComp(t)})},e.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="rowgroup"></div>',e.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="rowgroup"></div>',e.CENTER_TEMPLATE='<div class="ag-header-viewport" role="presentation">\n            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>\n        </div>',Bp([xr("eCenterContainer")],e.prototype,"eCenterContainer",void 0),Bp([Y],e.prototype,"init",null),Bp([Z],e.prototype,"destroyRowComps",null),e}(Sr),Hp=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),jp=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};!function(t){t[t.UP=0]="UP",t[t.DOWN=1]="DOWN",t[t.LEFT=2]="LEFT",t[t.RIGHT=3]="RIGHT"}(Jc||(Jc={}));var Up,Wp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentHeaderRowWithoutSpan=-1,e}return Hp(e,t),e.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady(function(e){t.gridBodyCon=e.gridBodyCtrl});var e=this.gridOptionsService.getDocument();this.addManagedListener(e,"mousedown",function(){return t.setCurrentHeaderRowWithoutSpan(-1)})},e.prototype.getHeaderRowCount=function(){var t=this.ctrlsService.getHeaderRowContainerCtrl();return t?t.getRowCount():0},e.prototype.navigateVertically=function(t,e,o){if(e||(e=this.focusService.getFocusedHeader()),!e)return!1;var n=e.headerRowIndex,r=e.column,i=this.getHeaderRowCount(),a=t===Jc.UP?this.headerPositionUtils.getColumnVisibleParent(r,n):this.headerPositionUtils.getColumnVisibleChild(r,n),s=a.headerRowIndex,l=a.column,u=a.headerRowIndexWithoutSpan,c=!1;return s<0&&(s=0,l=r,c=!0),s>=i?(s=-1,this.setCurrentHeaderRowWithoutSpan(-1)):void 0!==u&&(this.currentHeaderRowWithoutSpan=u),!(!c&&!l)&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:s,column:l},allowUserOverride:!0,event:o})},e.prototype.setCurrentHeaderRowWithoutSpan=function(t){this.currentHeaderRowWithoutSpan=t},e.prototype.navigateHorizontally=function(t,e,o){void 0===e&&(e=!1);var n,r,i=this.focusService.getFocusedHeader(),a=t===Jc.LEFT,s=this.gridOptionsService.get("enableRtl");return-1!==this.currentHeaderRowWithoutSpan?i.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=i.headerRowIndex,a!==s?(r="Before",n=this.headerPositionUtils.findHeader(i,r)):(r="After",n=this.headerPositionUtils.findHeader(i,r)),n||!e?this.focusService.focusHeaderPosition({headerPosition:n,direction:r,fromTab:e,allowUserOverride:!0,event:o}):this.focusNextHeaderRow(i,r,o)},e.prototype.focusNextHeaderRow=function(t,e,o){var n,r=t.headerRowIndex,i=null;if("Before"===e?r>0&&(n=r-1,this.currentHeaderRowWithoutSpan-=1,i=this.headerPositionUtils.findColAtEdgeForHeaderRow(n,"end")):(n=r+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),i=this.headerPositionUtils.findColAtEdgeForHeaderRow(n,"start")),!i)return!1;var a=this.headerPositionUtils.getHeaderIndexToFocus(i.column,null===i||void 0===i?void 0:i.headerRowIndex),s=a.column,l=a.headerRowIndex;return this.focusService.focusHeaderPosition({headerPosition:{column:s,headerRowIndex:l},direction:e,fromTab:!0,allowUserOverride:!0,event:o})},e.prototype.scrollToColumn=function(t,e){if(void 0===e&&(e="After"),!t.getPinned()){var o;if(t instanceof Kt){var n=t.getDisplayedLeafColumns();o="Before"===e?ft(n):n[0]}else o=t;this.gridBodyCon.getScrollFeature().ensureColumnVisible(o)}},jp([J("focusService")],e.prototype,"focusService",void 0),jp([J("headerPositionUtils")],e.prototype,"headerPositionUtils",void 0),jp([J("ctrlsService")],e.prototype,"ctrlsService",void 0),jp([Y],e.prototype,"postConstruct",null),e=jp([X("headerNavigationService")],e)}(Bt),Kp=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),qp=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Yp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Kp(e,t),e.prototype.setComp=function(t,e,o){this.comp=t,this.eGui=e,this.createManagedBean(new Nr(o,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight();var n=this.onHeaderContextMenu.bind(this);this.addManagedListener(this.eGui,"contextmenu",n),this.mockContextMenuForIPad(n),this.ctrlsService.registerGridHeaderCtrl(this)},e.prototype.setupHeaderHeight=function(){var t=this.setHeaderHeight.bind(this);t(),this.addManagedPropertyListener("headerHeight",t),this.addManagedPropertyListener("pivotHeaderHeight",t),this.addManagedPropertyListener("groupHeaderHeight",t),this.addManagedPropertyListener("pivotGroupHeaderHeight",t),this.addManagedPropertyListener("floatingFiltersHeight",t),this.addManagedListener(this.eventService,qt.EVENT_DISPLAYED_COLUMNS_CHANGED,t),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,t),this.addManagedListener(this.eventService,qt.EVENT_GRID_STYLES_CHANGED,t),this.addManagedListener(this.eventService,qt.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,t)},e.prototype.getHeaderHeight=function(){return this.headerHeight},e.prototype.setHeaderHeight=function(){var t,e=this.columnModel,o=0,n=e.getHeaderRowCount();this.filterManager.hasFloatingFilters()&&(n++,o=1);var r=this.columnModel.getColumnGroupHeaderRowHeight(),i=this.columnModel.getColumnHeaderRowHeight(),a=n-(1+o);if(t=o*e.getFloatingFiltersHeight(),t+=a*r,t+=i,this.headerHeight!==t){this.headerHeight=t;var s="".concat(t+1,"px");this.comp.setHeightAndMinHeight(s),this.eventService.dispatchEvent({type:qt.EVENT_HEADER_HEIGHT_CHANGED})}},e.prototype.onPivotModeChanged=function(){var t=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",t),this.comp.addOrRemoveCssClass("ag-pivot-off",!t)},e.prototype.onDisplayedColumnsChanged=function(){var t=this.columnModel.getAllDisplayedColumns().some(function(t){return t.isSpanHeaderHeight()});this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)},e.prototype.onTabKeyDown=function(t){var e=this.gridOptionsService.get("enableRtl"),o=t.shiftKey!==e?Jc.LEFT:Jc.RIGHT;(this.headerNavigationService.navigateHorizontally(o,!0,t)||this.focusService.focusNextGridCoreContainer(t.shiftKey))&&t.preventDefault()},e.prototype.handleKeyDown=function(t){var e=null;switch(t.key){case jn.LEFT:e=Jc.LEFT;case jn.RIGHT:r(e)||(e=Jc.RIGHT),this.headerNavigationService.navigateHorizontally(e,!1,t);break;case jn.UP:e=Jc.UP;case jn.DOWN:r(e)||(e=Jc.DOWN),this.headerNavigationService.navigateVertically(e,null,t)&&t.preventDefault();break;default:return}},e.prototype.onFocusOut=function(t){var e=this.gridOptionsService.getDocument(),o=t.relatedTarget;!o&&this.eGui.contains(e.activeElement)||this.eGui.contains(o)||this.focusService.clearFocusedHeader()},e.prototype.onHeaderContextMenu=function(t,e,o){if((t||o)&&this.menuService.isHeaderContextMenuEnabled()){var n=(null!==t&&void 0!==t?t:e).target;n!==this.eGui&&n!==this.ctrlsService.getHeaderRowContainerCtrl().getViewport()||this.menuService.showHeaderContextMenu(void 0,t,o)}},e.prototype.mockContextMenuForIPad=function(t){if(To()){var e=new ra(this.eGui);this.addManagedListener(e,ra.EVENT_LONG_TAP,function(e){t(void 0,e.touchStart,e.touchEvent)}),this.addDestroyFunc(function(){return e.destroy()})}},qp([J("headerNavigationService")],e.prototype,"headerNavigationService",void 0),qp([J("focusService")],e.prototype,"focusService",void 0),qp([J("columnModel")],e.prototype,"columnModel",void 0),qp([J("ctrlsService")],e.prototype,"ctrlsService",void 0),qp([J("filterManager")],e.prototype,"filterManager",void 0),qp([J("menuService")],e.prototype,"menuService",void 0),e}(Bt),Zp=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Xp=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Jp=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return Zp(e,t),e.prototype.postConstruct=function(){var t=this,e={addOrRemoveCssClass:function(e,o){return t.addOrRemoveCssClass(e,o)},setHeightAndMinHeight:function(e){t.getGui().style.height=e,t.getGui().style.minHeight=e}};this.createManagedBean(new Yp).setComp(e,this.getGui(),this.getFocusableElement());var o=function(e){t.createManagedBean(e),t.appendChild(e)};o(new zp("left")),o(new zp(null)),o(new zp("right"))},e.TEMPLATE='<div class="ag-header" role="presentation"/>',Xp([Y],e.prototype,"postConstruct",null),e}(Sr),Qp=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),$p=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},td=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qp(e,t),e.prototype.addResizeBar=function(t){var e=this,o={dragStartPixels:t.dragStartPixels||0,eElement:t.eResizeBar,onDragStart:this.onDragStart.bind(this,t),onDragStop:this.onDragStop.bind(this,t),onDragging:this.onDragging.bind(this,t),includeTouch:!0,stopPropagationForTouch:!0};this.dragService.addDragSource(o);return function(){return e.dragService.removeDragSource(o)}},e.prototype.onDragStart=function(t,e){this.dragStartX=e.clientX,this.setResizeIcons();var o=e instanceof MouseEvent&&!0===e.shiftKey;t.onResizeStart(o)},e.prototype.setResizeIcons=function(){var t=this.ctrlsService.getGridCtrl();t.setResizeCursor(!0),t.disableUserSelect(!0)},e.prototype.onDragStop=function(t,e){t.onResizeEnd(this.resizeAmount),this.resetIcons()},e.prototype.resetIcons=function(){var t=this.ctrlsService.getGridCtrl();t.setResizeCursor(!1),t.disableUserSelect(!1)},e.prototype.onDragging=function(t,e){this.resizeAmount=e.clientX-this.dragStartX,t.onResizing(this.resizeAmount)},$p([J("dragService")],e.prototype,"dragService",void 0),$p([J("ctrlsService")],e.prototype,"ctrlsService",void 0),e=$p([X("horizontalResizeService")],e)}(Bt),ed=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),od=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},nd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ed(e,t),e.prototype.hideActiveMenu=function(){this.hidePopup&&this.hidePopup()},e.prototype.showMenuAfterMouseEvent=function(t,e,o){var n=this;this.showPopup(t,function(r){n.popupService.positionPopupUnderMouseEvent({column:t,type:o,mouseEvent:e,ePopup:r})},o,e.target,this.menuService.isLegacyMenuEnabled())},e.prototype.showMenuAfterButtonClick=function(t,e,o){var n=this,r=-1,i="left",a=this.menuService.isLegacyMenuEnabled();!a&&this.gridOptionsService.get("enableRtl")&&(r=1,i="right");var s=a?void 0:4*r,l=a?void 0:4;this.showPopup(t,function(r){n.popupService.positionPopupByComponent({type:o,eventSource:e,ePopup:r,nudgeX:s,nudgeY:l,alignSide:i,keepWithinBounds:!0,position:"under",column:t})},o,e,a)},e.prototype.showPopup=function(t,e,o,n,r){var i=this,a=t?this.filterManager.getOrCreateFilterWrapper(t,"COLUMN_MENU"):void 0;if(!a||!t)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");var s,l=document.createElement("div");ke(l,"presentation"),l.classList.add("ag-menu"),r||l.classList.add("ag-filter-menu"),this.tabListener=this.addManagedListener(l,"keydown",function(t){return i.trapFocusWithin(t,l)}),a.guiPromise.then(function(t){return l.appendChild(t)});var u=this.menuService.isColumnMenuAnchoringEnabled()?null!==n&&void 0!==n?n:this.ctrlsService.getGridBodyCtrl().getGui():void 0,c=this.localeService.getLocaleTextFunc(),p=r&&"columnFilter"!==o?c("ariaLabelColumnMenu","Column Menu"):c("ariaLabelColumnFilter","Column Filter"),d=this.popupService.addPopup({modal:!0,eChild:l,closeOnEsc:!0,closedCallback:function(e){t.setMenuVisible(!1,"contextMenu");var r=e instanceof KeyboardEvent;if(i.tabListener&&(i.tabListener=i.tabListener()),r&&n&&gn(n)){var s=i.focusService.findTabbableParent(n);s&&s.focus()}!function(){var t;null===(t=a.filterPromise)||void 0===t||t.then(function(t){var e;return null===(e=null===t||void 0===t?void 0:t.afterGuiDetached)||void 0===e?void 0:e.call(t)})}(),i.dispatchVisibleChangedEvent(!1,o,t)},positionCallback:function(){return e(l)},anchorToElement:u,ariaLabel:p});d&&(this.hidePopup=s=d.hideFunc),a.filterPromise.then(function(t){e(l),t.afterGuiAttached&&t.afterGuiAttached({container:o,hidePopup:s})}),t.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,o,t)},e.prototype.trapFocusWithin=function(t,e){t.key!==jn.TAB||t.defaultPrevented||this.focusService.findNextFocusableElement(e,!1,t.shiftKey)||(t.preventDefault(),this.focusService.focusInto(e,t.shiftKey))},e.prototype.dispatchVisibleChangedEvent=function(t,e,o){var n={type:qt.EVENT_COLUMN_MENU_VISIBLE_CHANGED,visible:t,switchingTab:!1,key:e,column:null!==o&&void 0!==o?o:null};this.eventService.dispatchEvent(n)},e.prototype.isMenuEnabled=function(t){var e;return t.isFilterAllowed()&&(null!==(e=t.getColDef().menuTabs)&&void 0!==e?e:["filterMenuTab"]).includes("filterMenuTab")},e.prototype.showMenuAfterContextMenuEvent=function(){},od([J("filterManager")],e.prototype,"filterManager",void 0),od([J("popupService")],e.prototype,"popupService",void 0),od([J("focusService")],e.prototype,"focusService",void 0),od([J("ctrlsService")],e.prototype,"ctrlsService",void 0),od([J("menuService")],e.prototype,"menuService",void 0),e=od([X("filterMenuFactory")],e)}(Bt),rd=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),id=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};!function(t){t.TAB_GUARD="ag-tab-guard",t.TAB_GUARD_TOP="ag-tab-guard-top",t.TAB_GUARD_BOTTOM="ag-tab-guard-bottom"}(Up||(Up={}));var ad,sd=function(t){function e(e){var o=t.call(this)||this;o.skipTabGuardFocus=!1,o.forcingFocusOut=!1;var n=e.comp,r=e.eTopGuard,i=e.eBottomGuard,a=e.focusTrapActive,s=e.forceFocusOutWhenTabGuardsAreEmpty,l=e.focusInnerElement,u=e.onFocusIn,c=e.onFocusOut,p=e.shouldStopEventPropagation,d=e.onTabKeyDown,h=e.handleKeyDown,f=e.eFocusableElement;return o.comp=n,o.eTopGuard=r,o.eBottomGuard=i,o.providedFocusInnerElement=l,o.eFocusableElement=f,o.focusTrapActive=!!a,o.forceFocusOutWhenTabGuardsAreEmpty=!!s,o.providedFocusIn=u,o.providedFocusOut=c,o.providedShouldStopEventPropagation=p,o.providedOnTabKeyDown=d,o.providedHandleKeyDown=h,o}return rd(e,t),e.prototype.postConstruct=function(){var t=this;this.createManagedBean(new Nr(this.eFocusableElement,{shouldStopEventPropagation:function(){return t.shouldStopEventPropagation()},onTabKeyDown:function(e){return t.onTabKeyDown(e)},handleKeyDown:function(e){return t.handleKeyDown(e)},onFocusIn:function(e){return t.onFocusIn(e)},onFocusOut:function(e){return t.onFocusOut(e)}})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(function(e){return t.addManagedListener(e,"focus",t.onFocus.bind(t))})},e.prototype.handleKeyDown=function(t){this.providedHandleKeyDown&&this.providedHandleKeyDown(t)},e.prototype.tabGuardsAreActive=function(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")},e.prototype.shouldStopEventPropagation=function(){return!!this.providedShouldStopEventPropagation&&this.providedShouldStopEventPropagation()},e.prototype.activateTabGuards=function(){if(!this.forcingFocusOut){var t=this.gridOptionsService.get("tabIndex");this.comp.setTabIndex(t.toString())}},e.prototype.deactivateTabGuards=function(){this.comp.setTabIndex()},e.prototype.onFocus=function(t){if(this.skipTabGuardFocus)this.skipTabGuardFocus=!1;else{if(this.forceFocusOutWhenTabGuardsAreEmpty)if(0===this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length)return void this.findNextElementOutsideAndFocus(t.target===this.eBottomGuard);var e=t.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(e):this.focusInnerElement(e)}},e.prototype.findNextElementOutsideAndFocus=function(t){var e=this.gridOptionsService.getDocument(),o=this.focusService.findFocusableElements(e.body,null,!0),n=o.indexOf(t?this.eTopGuard:this.eBottomGuard);if(-1!==n){var r,i;t?(r=0,i=n):(r=n+1,i=o.length);var a=o.slice(r,i),s=this.gridOptionsService.get("tabIndex");a.sort(function(t,e){var o=parseInt(t.getAttribute("tabindex")||"0"),n=parseInt(e.getAttribute("tabindex")||"0");return n===s?1:o===s?-1:0===o?1:0===n?-1:o-n}),a[t?a.length-1:0].focus()}},e.prototype.onFocusIn=function(t){this.focusTrapActive||(this.providedFocusIn&&this.providedFocusIn(t),this.deactivateTabGuards())},e.prototype.onFocusOut=function(t){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(t),this.eFocusableElement.contains(t.relatedTarget)||this.activateTabGuards())},e.prototype.onTabKeyDown=function(t){var e=this;if(this.providedOnTabKeyDown)this.providedOnTabKeyDown(t);else if(!this.focusTrapActive&&!t.defaultPrevented){var o=this.tabGuardsAreActive();o&&this.deactivateTabGuards();var n=this.getNextFocusableElement(t.shiftKey);o&&setTimeout(function(){return e.activateTabGuards()},0),n&&(n.focus(),t.preventDefault())}},e.prototype.focusInnerElement=function(t){void 0===t&&(t=!1);var e=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(e.splice(0,1),e.splice(e.length-1,1)),e.length&&e[t?e.length-1:0].focus({preventScroll:!0})},e.prototype.getNextFocusableElement=function(t){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,t)},e.prototype.forceFocusOutOfContainer=function(t){var e=this;if(void 0===t&&(t=!1),!this.forcingFocusOut){var o=t?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,o.focus(),window.setTimeout(function(){e.forcingFocusOut=!1,e.activateTabGuards()})}},e.prototype.isTabGuard=function(t){return t===this.eTopGuard||t===this.eBottomGuard},id([J("focusService")],e.prototype,"focusService",void 0),id([Y],e.prototype,"postConstruct",null),e}(Bt),ld=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ud=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},cd=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},pd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ld(e,t),e.prototype.initialiseTabGuard=function(t){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();var e=[this.eTopGuard,this.eBottomGuard],o={setTabIndex:function(t){e.forEach(function(e){return null!=t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")})}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new sd({comp:o,focusTrapActive:!!t.focusTrapActive,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:t.onFocusIn,onFocusOut:t.onFocusOut,focusInnerElement:t.focusInnerElement,handleKeyDown:t.handleKeyDown,onTabKeyDown:t.onTabKeyDown,shouldStopEventPropagation:t.shouldStopEventPropagation,forceFocusOutWhenTabGuardsAreEmpty:t.forceFocusOutWhenTabGuardsAreEmpty}))},e.prototype.createTabGuard=function(t){var e=document.createElement("div"),o="top"===t?Up.TAB_GUARD_TOP:Up.TAB_GUARD_BOTTOM;return e.classList.add(Up.TAB_GUARD,o),ke(e,"presentation"),e},e.prototype.addTabGuards=function(t,e){this.eFocusableElement.insertAdjacentElement("afterbegin",t),this.eFocusableElement.insertAdjacentElement("beforeend",e)},e.prototype.removeAllChildrenExceptTabGuards=function(){var t=[this.eTopGuard,this.eBottomGuard];dn(this.getFocusableElement()),this.addTabGuards.apply(this,cd([],ud(t),!1))},e.prototype.forceFocusOutOfContainer=function(t){void 0===t&&(t=!1),this.tabGuardCtrl.forceFocusOutOfContainer(t)},e.prototype.appendChild=function(e,o){On(e)||(e=e.getGui());var n=this.eBottomGuard;n?n.insertAdjacentElement("beforebegin",e):t.prototype.appendChild.call(this,e,o)},e}(Sr),dd=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),hd=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},fd=function(t){function e(o){var n=t.call(this,e.getTemplate(o.cssClass))||this;return n.items=[],n.tabbedItemScrollMap=new Map,n.params=o,o.items&&o.items.forEach(function(t){return n.addItem(t)}),n}return dd(e,t),e.prototype.postConstruct=function(){var t=this;this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),focusInnerElement:this.focusInnerElement.bind(this),focusTrapActive:!0}),this.addDestroyFunc(function(){var e,o,n;return null===(n=null===(o=null===(e=t.activeItem)||void 0===e?void 0:e.tabbedItem)||void 0===o?void 0:o.afterDetachedCallback)||void 0===n?void 0:n.call(o)})},e.getTemplate=function(t){return'<div class="ag-tabs '.concat(t,'">\n            <div ref="eHeader" role="tablist" class="ag-tabs-header ').concat(t?"".concat(t,"-header"):"",'"></div>\n            <div ref="eBody" role="presentation" class="ag-tabs-body ').concat(t?"".concat(t,"-body"):"",'"></div>\n        </div>')},e.prototype.handleKeyDown=function(t){var e=this.gridOptionsService.getDocument();switch(t.key){case jn.RIGHT:case jn.LEFT:if(!this.eHeader.contains(e.activeElement))return;var o=t.key===jn.RIGHT,n=this.gridOptionsService.get("enableRtl"),r=this.items.indexOf(this.activeItem),i=o!==n?Math.min(r+1,this.items.length-1):Math.max(r-1,0);if(r===i)return;t.preventDefault();var a=this.items[i];this.showItemWrapper(a),a.eHeaderButton.focus();break;case jn.UP:case jn.DOWN:t.stopPropagation()}},e.prototype.onTabKeyDown=function(t){if(!t.defaultPrevented){var e=this.focusService,o=this.eHeader,n=this.eBody,r=this.activeItem,i=this.gridOptionsService.getDocument().activeElement,a=t.target;if(t.preventDefault(),o.contains(i))this.focusBody(t.shiftKey);else{var s=null;e.isTargetUnderManagedComponent(n,a)&&(t.shiftKey&&(s=this.focusService.findFocusableElementBeforeTabGuard(n,a)),s||(s=r.eHeaderButton)),!s&&n.contains(i)&&((s=e.findNextFocusableElement(n,!1,t.shiftKey))||this.focusHeader()),s&&s.focus()}}},e.prototype.focusInnerElement=function(t){t?this.focusHeader():this.focusBody(!0)},e.prototype.focusHeader=function(){this.activeItem.eHeaderButton.focus()},e.prototype.focusBody=function(t){this.focusService.focusInto(this.eBody,t)},e.prototype.setAfterAttachedParams=function(t){this.afterAttachedParams=t},e.prototype.showFirstItem=function(){this.items.length>0&&this.showItemWrapper(this.items[0])},e.prototype.addItem=function(t){var e=document.createElement("span");ke(e,"tab"),e.setAttribute("tabindex","-1"),e.appendChild(t.title),e.classList.add("ag-tab"),this.eHeader.appendChild(e),ze(e,t.titleLabel);var o={tabbedItem:t,eHeaderButton:e};this.items.push(o),e.addEventListener("click",this.showItemWrapper.bind(this,o))},e.prototype.showItem=function(t){var e=this.items.find(function(e){return e.tabbedItem===t});e&&this.showItemWrapper(e)},e.prototype.showItemWrapper=function(t){var e,o,n,r,i,a,s=this,l=t.tabbedItem,u=t.eHeaderButton;null===(o=(e=this.params).onItemClicked)||void 0===o||o.call(e,{item:l}),this.activeItem!==t?(this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),dn(this.eBody),l.bodyPromise.then(function(t){s.eBody.appendChild(t);var e=!s.focusService.isKeyboardMode();if(s.focusService.focusInto(s.eBody,!1,e),l.afterAttachedCallback&&l.afterAttachedCallback(s.afterAttachedParams),s.params.keepScrollPosition){var o=l.getScrollableContainer&&l.getScrollableContainer()||t;s.lastScrollListener=s.addManagedListener(o,"scroll",function(){s.tabbedItemScrollMap.set(l.name,o.scrollTop)});var n=s.tabbedItemScrollMap.get(l.name);void 0!==n&&setTimeout(function(){o.scrollTop=n},0)}}),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),null===(a=(i=this.activeItem.tabbedItem).afterDetachedCallback)||void 0===a||a.call(i)),u.classList.add("ag-tab-selected"),this.activeItem=t):null===(r=(n=this.params).onActiveItemClicked)||void 0===r||r.call(n)},hd([J("focusService")],e.prototype,"focusService",void 0),hd([xr("eHeader")],e.prototype,"eHeader",void 0),hd([xr("eBody")],e.prototype,"eBody",void 0),hd([Y],e.prototype,"postConstruct",null),e}(pd),gd=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),yd=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},vd=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.polyfillFunctions=[],e}return gd(e,t),e.prototype.observeResize=function(t,e){var o=this,n=this.gridOptionsService.getWindow(),r=this.gridOptionsService.get("suppressBrowserResizeObserver");return!!n.ResizeObserver&&!r?function(){var o=new n.ResizeObserver(e);return o.observe(t),function(){return o.disconnect()}}():this.getFrameworkOverrides().wrapIncoming(function(){return function(){var n,r,i=null!==(n=null===t||void 0===t?void 0:t.clientWidth)&&void 0!==n?n:0,a=null!==(r=null===t||void 0===t?void 0:t.clientHeight)&&void 0!==r?r:0,s=!0,l=function(){var n,r;if(s){var u=null!==(n=null===t||void 0===t?void 0:t.clientWidth)&&void 0!==n?n:0,c=null!==(r=null===t||void 0===t?void 0:t.clientHeight)&&void 0!==r?r:0;(u!==i||c!==a)&&(i=u,a=c,e()),o.doNextPolyfillTurn(l)}};return l(),function(){return s=!1}}()},"resize-observer")},e.prototype.doNextPolyfillTurn=function(t){this.polyfillFunctions.push(t),this.schedulePolyfill()},e.prototype.schedulePolyfill=function(){var t=this;if(!this.polyfillScheduled){this.polyfillScheduled=!0,window.setTimeout(function(){var e=t.polyfillFunctions;t.polyfillScheduled=!1,t.polyfillFunctions=[],e.forEach(function(t){return t()})},50)}},e=yd([X("resizeObserverService")],e)}(Bt),md=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Cd=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},_d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.createTasksP1={list:[],sorted:!1},e.createTasksP2={list:[],sorted:!1},e.destroyTasks=[],e.ticking=!1,e.scrollGoingDown=!0,e.lastPage=0,e.lastScrollTop=0,e.taskCount=0,e.cancelledTasks=new Set,e}return md(e,t),e.prototype.setScrollTop=function(t){var e=this.gridOptionsService.get("pagination");if(this.scrollGoingDown=t>=this.lastScrollTop,e&&0===t){var o=this.paginationProxy.getCurrentPage();o!==this.lastPage&&(this.lastPage=o,this.scrollGoingDown=!0)}this.lastScrollTop=t},e.prototype.init=function(){this.useAnimationFrame=!this.gridOptionsService.get("suppressAnimationFrame")},e.prototype.isOn=function(){return this.useAnimationFrame},e.prototype.verifyAnimationFrameOn=function(t){!1===this.useAnimationFrame&&console.warn("AG Grid: AnimationFrameService.".concat(t," called but animation frames are off"))},e.prototype.createTask=function(t,e,o){this.verifyAnimationFrameOn(o);var n={task:t,index:e,createOrder:++this.taskCount};this.addTaskToList(this[o],n),this.schedule()},e.prototype.cancelTask=function(t){this.cancelledTasks.add(t)},e.prototype.addTaskToList=function(t,e){t.list.push(e),t.sorted=!1},e.prototype.sortTaskList=function(t){if(!t.sorted){var e=this.scrollGoingDown?1:-1;t.list.sort(function(t,o){return t.index!==o.index?e*(o.index-t.index):o.createOrder-t.createOrder}),t.sorted=!0}},e.prototype.addDestroyTask=function(t){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(t),this.schedule()},e.prototype.executeFrame=function(t){this.verifyAnimationFrameOn("executeFrame");for(var e=this.createTasksP1,o=e.list,n=this.createTasksP2,r=n.list,i=this.destroyTasks,a=(new Date).getTime(),s=(new Date).getTime()-a,l=t<=0,u=this.ctrlsService.getGridBodyCtrl();l||s<t;){if(!u.getScrollFeature().scrollGridIfNeeded()){var c=void 0;if(o.length)this.sortTaskList(e),c=o.pop().task;else if(r.length)this.sortTaskList(n),c=r.pop().task;else{if(!i.length){this.cancelledTasks.clear();break}c=i.pop()}this.cancelledTasks.has(c)||c()}s=(new Date).getTime()-a}o.length||r.length||i.length?this.requestFrame():this.stopTicking()},e.prototype.stopTicking=function(){this.ticking=!1},e.prototype.flushAllFrames=function(){this.useAnimationFrame&&this.executeFrame(-1)},e.prototype.schedule=function(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))},e.prototype.requestFrame=function(){var t=this.executeFrame.bind(this,60);this.requestAnimationFrame(t)},e.prototype.requestAnimationFrame=function(t){var e=this.gridOptionsService.getWindow();e.requestAnimationFrame?e.requestAnimationFrame(t):e.webkitRequestAnimationFrame?e.webkitRequestAnimationFrame(t):e.setTimeout(t,0)},e.prototype.isQueueEmpty=function(){return!this.ticking},e.prototype.debounce=function(t){var e=this,o=!1;return function(){e.isOn()?o||(o=!0,e.addDestroyTask(function(){o=!1,t()})):window.setTimeout(t,0)}},Cd([J("ctrlsService")],e.prototype,"ctrlsService",void 0),Cd([J("paginationProxy")],e.prototype,"paginationProxy",void 0),Cd([Y],e.prototype,"init",null),e=Cd([X("animationFrameService")],e)}(Bt);!function(t){t.EVERYTHING="group",t.FILTER="filter",t.SORT="sort",t.MAP="map",t.AGGREGATE="aggregate",t.FILTER_AGGREGATES="filter_aggregates",t.PIVOT="pivot",t.NOTHING="nothing"}(ad||(ad={}));var wd,bd=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Sd=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Ed=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bd(e,t),e.prototype.postConstruct=function(){this.isClientSideRowModel="clientSide"===this.rowModel.getType()},e.prototype.expandRows=function(t){if(this.isClientSideRowModel){var e=new Set(t);this.rowModel.forEachNode(function(t){t.id&&e.has(t.id)&&(t.expanded=!0)}),this.onGroupExpandedOrCollapsed()}},e.prototype.getExpandedRows=function(){var t=[];return this.rowModel.forEachNode(function(e){var o=e.expanded,n=e.id;o&&n&&t.push(n)}),t},e.prototype.expandAll=function(t){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(t)},e.prototype.setRowNodeExpanded=function(t,e,o){t&&(o&&t.parent&&-1!==t.parent.level&&this.setRowNodeExpanded(t.parent,e,o),t.setExpanded(e))},e.prototype.onGroupExpandedOrCollapsed=function(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:ad.MAP})},Sd([J("rowModel")],e.prototype,"rowModel",void 0),Sd([Y],e.prototype,"postConstruct",null),e=Sd([X("expansionService")],e)}(Bt),xd=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Td=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Od=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xd(e,t),e.prototype.postConstruct=function(){var t;this.activeMenuFactory=null!==(t=this.enterpriseMenuFactory)&&void 0!==t?t:this.filterMenuFactory},e.prototype.showColumnMenu=function(t){this.showColumnMenuCommon(this.activeMenuFactory,t,"columnMenu")},e.prototype.showFilterMenu=function(t){var e=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(e,t,t.containerType,!0)},e.prototype.showHeaderContextMenu=function(t,e,o){this.activeMenuFactory.showMenuAfterContextMenuEvent(t,e,o)},e.prototype.showContextMenu=function(t){var e,o,n,r=t.column,i=t.anchorToElement,a=t.rowNode,s=t.value;null===(e=this.contextMenuFactory)||void 0===e||e.onContextMenu(null!==(o=t.mouseEvent)&&void 0!==o?o:null,null!==(n=t.touchEvent)&&void 0!==n?n:null,null!==a&&void 0!==a?a:null,null!==r&&void 0!==r?r:null,s,i)},e.prototype.showColumnChooser=function(t){var e;null===(e=this.columnChooserFactory)||void 0===e||e.showColumnChooser(t)},e.prototype.hidePopupMenu=function(){var t;null===(t=this.contextMenuFactory)||void 0===t||t.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()},e.prototype.hideColumnChooser=function(){var t;null===(t=this.columnChooserFactory)||void 0===t||t.hideActiveColumnChooser()},e.prototype.isColumnMenuInHeaderEnabled=function(t){var e=t.getColDef(),o=e.suppressMenu,n=e.suppressHeaderMenuButton;return!(null!==n&&void 0!==n?n:o)&&this.activeMenuFactory.isMenuEnabled(t)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)},e.prototype.isFilterMenuInHeaderEnabled=function(t){return!t.getColDef().suppressHeaderFilterButton&&this.filterManager.isFilterAllowed(t)},e.prototype.isHeaderContextMenuEnabled=function(t){return!(null===t||void 0===t?void 0:t.getColDef().suppressHeaderContextMenu)&&"new"===this.getColumnMenuType()},e.prototype.isHeaderMenuButtonAlwaysShowEnabled=function(){return this.isSuppressMenuHide()},e.prototype.isHeaderMenuButtonEnabled=function(){var t=!this.isSuppressMenuHide();return!(To()&&t)},e.prototype.isHeaderFilterButtonEnabled=function(t){return this.isFilterMenuInHeaderEnabled(t)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(t)},e.prototype.isFilterMenuItemEnabled=function(t){return this.filterManager.isFilterAllowed(t)&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(t)&&!this.isFloatingFilterButtonDisplayed(t)},e.prototype.isColumnMenuAnchoringEnabled=function(){return!this.isLegacyMenuEnabled()},e.prototype.areAdditionalColumnMenuItemsEnabled=function(){return"new"===this.getColumnMenuType()},e.prototype.isLegacyMenuEnabled=function(){return"legacy"===this.getColumnMenuType()},e.prototype.isFloatingFilterButtonEnabled=function(t){var e,o=t.getColDef(),n=null===(e=o.floatingFilterComponentParams)||void 0===e?void 0:e.suppressFilterButton;return null!=n&&O("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),null==o.suppressFloatingFilterButton?!n:!o.suppressFloatingFilterButton},e.prototype.getColumnMenuType=function(){var t;return null!==(t=this.gridOptionsService.get("columnMenu"))&&void 0!==t?t:"legacy"},e.prototype.isFloatingFilterButtonDisplayed=function(t){return!!t.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(t)},e.prototype.isSuppressMenuHide=function(){var t=this.gridOptionsService.get("suppressMenuHide");return this.isLegacyMenuEnabled()?t:!this.gridOptionsService.exists("suppressMenuHide")||t},e.prototype.showColumnMenuCommon=function(t,e,o,n){var r=this,i=e.column,a=e.positionBy;if("button"===a){var s=e.buttonElement;t.showMenuAfterButtonClick(i,s,o,n)}else if("mouse"===a){var l=e.mouseEvent;t.showMenuAfterMouseEvent(i,l,o,n)}else i&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(i,"auto"),this.animationFrameService.requestAnimationFrame(function(){var e=r.ctrlsService.getHeaderRowContainerCtrl(i.getPinned()).getHeaderCtrlForColumn(i);t.showMenuAfterButtonClick(i,e.getAnchorElementForMenu(n),o,!0)}))},Td([Q("enterpriseMenuFactory")],e.prototype,"enterpriseMenuFactory",void 0),Td([J("filterMenuFactory")],e.prototype,"filterMenuFactory",void 0),Td([Q("contextMenuFactory")],e.prototype,"contextMenuFactory",void 0),Td([J("ctrlsService")],e.prototype,"ctrlsService",void 0),Td([J("animationFrameService")],e.prototype,"animationFrameService",void 0),Td([Q("columnChooserFactory")],e.prototype,"columnChooserFactory",void 0),Td([J("filterManager")],e.prototype,"filterManager",void 0),Td([Y],e.prototype,"postConstruct",null),e=Td([X("menuService")],e)}(Bt),Rd=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Pd=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Ad=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Rd(e,t),e.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady(function(e){t.centerRowContainerCtrl=e.centerRowContainerCtrl})},e.prototype.getPreferredWidthForColumn=function(t,e){var o=this.getHeaderCellForColumn(t);if(!o)return-1;var n=this.rowRenderer.getAllCellsForColumn(t);return e||n.push(o),this.addElementsToContainerAndGetWidth(n)},e.prototype.getPreferredWidthForColumnGroup=function(t){var e=this.getHeaderCellForColumn(t);return e?this.addElementsToContainerAndGetWidth([e]):-1},e.prototype.addElementsToContainerAndGetWidth=function(t){var e=this,o=document.createElement("form");o.style.position="fixed";var n=this.centerRowContainerCtrl.getContainerElement();t.forEach(function(t){return e.cloneItemIntoDummy(t,o)}),n.appendChild(o);var r=o.offsetWidth;return n.removeChild(o),r+this.getAutoSizePadding()},e.prototype.getAutoSizePadding=function(){return this.gridOptionsService.get("autoSizePadding")},e.prototype.getHeaderCellForColumn=function(t){var e=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(function(o){var n=o.getHtmlElementForColumnHeader(t);null!=n&&(e=n)}),e},e.prototype.cloneItemIntoDummy=function(t,e){var o=t.cloneNode(!0);o.style.width="",o.style.position="static",o.style.left="";var n=document.createElement("div"),r=n.classList;["ag-header-cell","ag-header-group-cell"].some(function(t){return o.classList.contains(t)})?(r.add("ag-header","ag-header-row"),n.style.position="static"):r.add("ag-row");for(var i=t.parentElement;i;){if(["ag-header-row","ag-row"].some(function(t){return i.classList.contains(t)})){for(var a=0;a<i.classList.length;a++){var s=i.classList[a];"ag-row-position-absolute"!=s&&r.add(s)}break}i=i.parentElement}n.appendChild(o),e.appendChild(n)},Pd([J("rowRenderer")],e.prototype,"rowRenderer",void 0),Pd([J("ctrlsService")],e.prototype,"ctrlsService",void 0),Pd([J("rowCssClassCalculator")],e.prototype,"rowCssClassCalculator",void 0),Pd([Y],e.prototype,"postConstruct",null),e=Pd([X("autoWidthCalculator")],e)}(Bt),Dd=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Md=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Id=function(t){var e="function"===typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ld=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},Fd=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},Nd=function(t){function e(e,o){var n=t.call(this)||this;return n.createRowCon=e,n.destroyRowCtrls=o,n.stickyRowCtrls=[],n.containerHeight=0,n}return Dd(e,t),e.prototype.postConstruct=function(){var t=this;this.isClientSide="clientSide"===this.rowModel.getType(),this.ctrlsService.whenReady(function(e){t.gridBodyCtrl=e.gridBodyCtrl})},e.prototype.getStickyRowCtrls=function(){return this.stickyRowCtrls},e.prototype.checkStickyRows=function(){var t=this,e=0;if(!this.gridOptionsService.isGroupRowsSticky())return this.refreshNodesAndContainerHeight([],e);for(var o=[],n=this.rowRenderer.getFirstVisibleVerticalPixel(),r=function(r){var i,a,s,l;if(o.push(r),t.isClientSide){for(var u=r;u.isExpandable()&&u.expanded;)if(u.master)u=u.detailNode;else if(u.childrenAfterSort){if(0===u.childrenAfterSort.length)break;u=ft(u.childrenAfterSort)}l=u.rowTop+u.rowHeight}else if(r.master)l=r.detailNode.rowTop+r.detailNode.rowHeight;else{var c=null===(i=r.childStore)||void 0===i?void 0:i.getStoreBounds();l=(null!==(a=null===c||void 0===c?void 0:c.heightPx)&&void 0!==a?a:0)+(null!==(s=null===c||void 0===c?void 0:c.topPx)&&void 0!==s?s:0)}var p=n+e+r.rowHeight;r.stickyRowTop=l<p?e+(l-p):e,e=0,o.forEach(function(t){var o=t.stickyRowTop+t.rowHeight;e<o&&(e=o)})},i=0;;){var a=n+e,s=this.rowModel.getRowIndexAtPixel(a),l=this.rowModel.getRow(s);if(null==l)break;if(l.level<0)break;if(100===i++)break;for(var u=[],c=l.parent;c.level>=0;)u.push(c),c=c.parent;var p=u.reverse().find(function(t){return o.indexOf(t)<0&&t.displayed});if(p)r(p);else{if(!(l.isExpandable()&&l.expanded&&l.rowTop<a))break;r(l)}}return this.refreshNodesAndContainerHeight(o,e)},e.prototype.refreshStickyNode=function(t){for(var e=[],o=0;o<this.stickyRowCtrls.length;o++){var n=this.stickyRowCtrls[o].getRowNode();n!==t&&e.push(n)}this.refreshNodesAndContainerHeight(e,this.containerHeight)&&this.checkStickyRows()},e.prototype.refreshNodesAndContainerHeight=function(t,e){var o,n,r,i=this,a=!1,s=this.stickyRowCtrls.filter(function(e){return-1===t.indexOf(e.getRowNode())}),l=t.filter(function(t){return-1===i.stickyRowCtrls.findIndex(function(e){return e.getRowNode()===t})});(s.length||l.length)&&(a=!0);var u={};s.forEach(function(t){u[t.getRowNode().id]=t,i.stickyRowCtrls=i.stickyRowCtrls.filter(function(e){return e!==t})});try{for(var c=Id(Object.values(u)),p=c.next();!p.done;p=c.next()){p.value.getRowNode().sticky=!1}}catch(h){o={error:h}}finally{try{p&&!p.done&&(n=c.return)&&n.call(c)}finally{if(o)throw o.error}}this.destroyRowCtrls(u,!1);var d=l.map(function(t){return t.sticky=!0,i.createRowCon(t,!1,!1)});return(r=this.stickyRowCtrls).push.apply(r,Fd([],Ld(d),!1)),this.stickyRowCtrls.forEach(function(t){return t.setRowTop(t.getRowNode().stickyRowTop)}),this.stickyRowCtrls.sort(function(t,e){return e.getRowNode().rowIndex-t.getRowNode().rowIndex}),this.containerHeight!==e&&(this.containerHeight=e,this.gridBodyCtrl.setStickyTopHeight(e),a=!0),a},Md([J("rowModel")],e.prototype,"rowModel",void 0),Md([J("rowRenderer")],e.prototype,"rowRenderer",void 0),Md([J("ctrlsService")],e.prototype,"ctrlsService",void 0),Md([Y],e.prototype,"postConstruct",null),e}(Bt),kd=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Gd=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Vd=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},Bd=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},zd=function(t){var e="function"===typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hd=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.destroyFuncsForColumnListeners=[],e.rowCtrlsByRowIndex={},e.zombieRowCtrls={},e.allRowCtrls=[],e.topRowCtrls=[],e.bottomRowCtrls=[],e.refreshInProgress=!1,e.dataFirstRenderedFired=!1,e.setupRangeSelectionListeners=function(){var t=function(){e.getAllCellCtrls().forEach(function(t){return t.onRangeSelectionChanged()})},o=function(){e.getAllCellCtrls().forEach(function(t){return t.updateRangeBordersIfRangeCount()})},n=function(){e.eventService.addEventListener(qt.EVENT_RANGE_SELECTION_CHANGED,t),e.eventService.addEventListener(qt.EVENT_COLUMN_MOVED,o),e.eventService.addEventListener(qt.EVENT_COLUMN_PINNED,o),e.eventService.addEventListener(qt.EVENT_COLUMN_VISIBLE,o)},r=function(){e.eventService.removeEventListener(qt.EVENT_RANGE_SELECTION_CHANGED,t),e.eventService.removeEventListener(qt.EVENT_COLUMN_MOVED,o),e.eventService.removeEventListener(qt.EVENT_COLUMN_PINNED,o),e.eventService.removeEventListener(qt.EVENT_COLUMN_VISIBLE,o)};e.addDestroyFunc(function(){return r()}),e.addManagedPropertyListener("enableRangeSelection",function(t){t.currentValue?n():r()}),e.gridOptionsService.get("enableRangeSelection")&&n()},e}return kd(e,t),e.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady(function(){t.gridBodyCtrl=t.ctrlsService.getGridBodyCtrl(),t.initialise()})},e.prototype.initialise=function(){var t=this;if(this.addManagedListener(this.eventService,qt.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_BODY_SCROLL,this.onBodyScroll.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_BODY_HEIGHT_CHANGED,this.redraw.bind(this)),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],function(){return t.onDomLayoutChanged()}),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],function(){return t.redraw()}),this.addManagedPropertyListeners(["suppressCellFocus","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],function(){return t.redrawRows()}),this.gridOptionsService.isGroupRowsSticky()){var e=this.rowModel.getType();"clientSide"!==e&&"serverSide"!==e||(this.stickyRowFeature=this.createManagedBean(new Nd(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gridOptionsService.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gridOptionsService.get("embedFullWidthRows"),this.redrawAfterModelUpdate()},e.prototype.initialiseCache=function(){if(this.gridOptionsService.get("keepDetailRows")){var t=this.getKeepDetailRowsCount(),e=null!=t?t:3;this.cachedRowCtrls=new jd(e)}},e.prototype.getKeepDetailRowsCount=function(){return this.gridOptionsService.get("keepDetailRowsCount")},e.prototype.getStickyTopRowCtrls=function(){return this.stickyRowFeature?this.stickyRowFeature.getStickyRowCtrls():[]},e.prototype.updateAllRowCtrls=function(){var t=C(this.rowCtrlsByRowIndex),e=C(this.zombieRowCtrls),o=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];e.length>0||o.length>0?this.allRowCtrls=Bd(Bd(Bd([],Vd(t),!1),Vd(e),!1),Vd(o),!1):this.allRowCtrls=t},e.prototype.onCellFocusChanged=function(t){this.getAllCellCtrls().forEach(function(e){return e.onCellFocused(t)}),this.getFullWidthRowCtrls().forEach(function(e){return e.onFullWidthRowFocused(t)})},e.prototype.registerCellEventListeners=function(){var t=this;this.addManagedListener(this.eventService,qt.EVENT_CELL_FOCUSED,function(e){t.onCellFocusChanged(e)}),this.addManagedListener(this.eventService,qt.EVENT_CELL_FOCUS_CLEARED,function(){t.onCellFocusChanged()}),this.addManagedListener(this.eventService,qt.EVENT_FLASH_CELLS,function(e){t.getAllCellCtrls().forEach(function(t){return t.onFlashCells(e)})}),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_HOVER_CHANGED,function(){t.getAllCellCtrls().forEach(function(t){return t.onColumnHover()})}),this.addManagedListener(this.eventService,qt.EVENT_DISPLAYED_COLUMNS_CHANGED,function(){t.getAllCellCtrls().forEach(function(t){return t.onDisplayedColumnsChanged()})}),this.addManagedListener(this.eventService,qt.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,function(){t.printLayout&&t.getAllCellCtrls().forEach(function(t){return t.onLeftChanged()})}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,qt.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))},e.prototype.removeGridColumnListeners=function(){this.destroyFuncsForColumnListeners.forEach(function(t){return t()}),this.destroyFuncsForColumnListeners.length=0},e.prototype.refreshListenersToColumnsForCellComps=function(){var t=this;this.removeGridColumnListeners(),this.columnModel.getAllGridColumns().forEach(function(e){var o=function(o){t.getAllCellCtrls().forEach(function(t){t.getColumn()===e&&o(t)})},n=function(){o(function(t){return t.onLeftChanged()})},r=function(){o(function(t){return t.onWidthChanged()})},i=function(){o(function(t){return t.onFirstRightPinnedChanged()})},a=function(){o(function(t){return t.onLastLeftPinnedChanged()})},s=function(){o(function(t){return t.onColDefChanged()})};e.addEventListener("leftChanged",n),e.addEventListener("widthChanged",r),e.addEventListener("firstRightPinnedChanged",i),e.addEventListener("lastLeftPinnedChanged",a),e.addEventListener("colDefChanged",s),t.destroyFuncsForColumnListeners.push(function(){e.removeEventListener("leftChanged",n),e.removeEventListener("widthChanged",r),e.removeEventListener("firstRightPinnedChanged",i),e.removeEventListener("lastLeftPinnedChanged",a),e.removeEventListener("colDefChanged",s)})})},e.prototype.onDomLayoutChanged=function(){var t=this.gridOptionsService.isDomLayout("print"),e=t||this.gridOptionsService.get("embedFullWidthRows"),o=e!==this.embedFullWidthRows||this.printLayout!==t;this.printLayout=t,this.embedFullWidthRows=e,o&&this.redrawAfterModelUpdate({domLayoutChanged:!0})},e.prototype.datasourceChanged=function(){this.firstRenderedRow=0,this.lastRenderedRow=-1;var t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t)},e.prototype.onPageLoaded=function(t){var e={recycleRows:t.keepRenderedRows,animate:t.animate,newData:t.newData,newPage:t.newPage,onlyBody:!0};this.redrawAfterModelUpdate(e)},e.prototype.getAllCellsForColumn=function(t){var e=[];return this.getAllRowCtrls().forEach(function(o){var n=o.getCellElement(t);n&&e.push(n)}),e},e.prototype.refreshFloatingRowComps=function(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())},e.prototype.getTopRowCtrls=function(){return this.topRowCtrls},e.prototype.getCentreRowCtrls=function(){return this.allRowCtrls},e.prototype.getBottomRowCtrls=function(){return this.bottomRowCtrls},e.prototype.refreshFloatingRows=function(t,e){var o=this;t.forEach(function(t){t.destroyFirstPass(),t.destroySecondPass()}),t.length=0,e&&e.forEach(function(e){var n=new Pu(e,o.beans,!1,!1,o.printLayout);t.push(n)})},e.prototype.onPinnedRowDataChanged=function(){this.redrawAfterModelUpdate({recycleRows:!0})},e.prototype.redrawRow=function(t,e){var o,n=this;if(void 0===e&&(e=!1),t.sticky)this.stickyRowFeature.refreshStickyNode(t);else{if(null===(o=this.cachedRowCtrls)||void 0===o?void 0:o.has(t))return void this.cachedRowCtrls.removeRow(t);var r=function(e){var o=e[t.rowIndex];o&&o.getRowNode()===t&&(o.destroyFirstPass(),o.destroySecondPass(),e[t.rowIndex]=n.createRowCon(t,!1,!1))};switch(t.rowPinned){case"top":r(this.topRowCtrls);break;case"bottom":r(this.bottomRowCtrls);break;default:r(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}e||this.dispatchDisplayedRowsChanged(!1)},e.prototype.redrawRows=function(t){var e=this;if(null!=t)return null===t||void 0===t||t.forEach(function(t){return e.redrawRow(t,!0)}),void this.dispatchDisplayedRowsChanged(!1);this.redrawAfterModelUpdate()},e.prototype.getCellToRestoreFocusToAfterRefresh=function(t){var e=(null===t||void 0===t?void 0:t.suppressKeepFocus)?null:this.focusService.getFocusCellToUseAfterRefresh();if(null==e)return null;var o=this.gridOptionsService.getDocument().activeElement,n=this.gridOptionsService.getDomData(o,wu.DOM_DATA_KEY_CELL_CTRL),r=this.gridOptionsService.getDomData(o,Pu.DOM_DATA_KEY_ROW_CTRL);return n||r?e:null},e.prototype.redrawAfterModelUpdate=function(t){void 0===t&&(t={}),this.getLockOnRefresh();var e=this.getCellToRestoreFocusToAfterRefresh(t);this.updateContainerHeights(),this.scrollToTopIfNewData(t);var o=!t.domLayoutChanged&&!!t.recycleRows,n=t.animate&&this.gridOptionsService.isAnimateRows(),r=o?this.getRowsToRecycle():null;o||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature&&this.stickyRowFeature.checkStickyRows(),this.recycleRows(r,n),this.gridBodyCtrl.updateRowCount(),t.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),null!=e&&this.restoreFocusedCell(e),this.releaseLockOnRefresh()},e.prototype.scrollToTopIfNewData=function(t){var e=t.newData||t.newPage,o=this.gridOptionsService.get("suppressScrollOnNewData");e&&!o&&this.gridBodyCtrl.getScrollFeature().scrollToTop()},e.prototype.updateContainerHeights=function(){if(this.printLayout)this.rowContainerHeightService.setModelHeight(null);else{var t=this.paginationProxy.getCurrentPageHeight();0===t&&(t=1),this.rowContainerHeightService.setModelHeight(t)}},e.prototype.getLockOnRefresh=function(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0},e.prototype.releaseLockOnRefresh=function(){this.refreshInProgress=!1},e.prototype.isRefreshInProgress=function(){return this.refreshInProgress},e.prototype.restoreFocusedCell=function(t){t&&(this.focusService.setRestoreFocusedCell(t),this.onCellFocusChanged(this.beans.gridOptionsService.addGridCommonParams({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"mock"})))},e.prototype.stopEditing=function(t){void 0===t&&(t=!1),this.getAllRowCtrls().forEach(function(e){e.stopEditing(t)})},e.prototype.getAllCellCtrls=function(){for(var t=[],e=this.getAllRowCtrls(),o=e.length,n=0;n<o;n++)for(var r=e[n].getAllCellCtrls(),i=r.length,a=0;a<i;a++)t.push(r[a]);return t},e.prototype.getAllRowCtrls=function(){var t,e,o=this.stickyRowFeature&&this.stickyRowFeature.getStickyRowCtrls()||[],n=Bd(Bd(Bd([],Vd(this.topRowCtrls),!1),Vd(this.bottomRowCtrls),!1),Vd(o),!1);try{for(var r=zd(Object.keys(this.rowCtrlsByRowIndex)),i=r.next();!i.done;i=r.next()){var a=i.value;n.push(this.rowCtrlsByRowIndex[a])}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},e.prototype.addRenderedRowListener=function(t,e,o){var n=this.rowCtrlsByRowIndex[e];n&&n.addEventListener(t,o)},e.prototype.flashCells=function(t){void 0===t&&(t={}),this.getCellCtrls(t.rowNodes,t.columns).forEach(function(e){return e.flashCell(t)})},e.prototype.refreshCells=function(t){var e=this;void 0===t&&(t={});var o={forceRefresh:t.force,newData:!1,suppressFlash:t.suppressFlash};this.getCellCtrls(t.rowNodes,t.columns).forEach(function(t){return t.refreshOrDestroyCell(o)}),t.rowNodes&&(this.getRowCtrls(t.rowNodes).forEach(function(t){t.isFullWidth()&&(t.refreshFullWidth()||e.redrawRow(t.getRowNode(),!0))}),this.dispatchDisplayedRowsChanged(!1))},e.prototype.getCellRendererInstances=function(t){var e,o=this,n=this.getCellCtrls(t.rowNodes,t.columns).map(function(t){return t.getCellRenderer()}).filter(function(t){return null!=t});if(null===(e=t.columns)||void 0===e?void 0:e.length)return n;var r=[],i=this.mapRowNodes(t.rowNodes);return this.getAllRowCtrls().forEach(function(t){if((!i||o.isRowInMap(t.getRowNode(),i))&&t.isFullWidth())for(var e=t.getFullWidthCellRenderers(),n=0;n<e.length;n++){var a=e[n];null!=a&&r.push(a)}}),Bd(Bd([],Vd(r),!1),Vd(n),!1)},e.prototype.getCellEditorInstances=function(t){var e=[];return this.getCellCtrls(t.rowNodes,t.columns).forEach(function(t){var o=t.getCellEditor();o&&e.push(o)}),e},e.prototype.getEditingCells=function(){var t=[];return this.getAllCellCtrls().forEach(function(e){if(e.isEditing()){var o=e.getCellPosition();t.push(o)}}),t},e.prototype.mapRowNodes=function(t){if(t){var e={top:{},bottom:{},normal:{}};return t.forEach(function(t){var o=t.id;"top"===t.rowPinned?e.top[o]=t:"bottom"===t.rowPinned?e.bottom[o]=t:e.normal[o]=t}),e}},e.prototype.isRowInMap=function(t,e){var o=t.id,n=t.rowPinned;return"bottom"===n?null!=e.bottom[o]:"top"===n?null!=e.top[o]:null!=e.normal[o]},e.prototype.getRowCtrls=function(t){var e=this,o=this.mapRowNodes(t),n=this.getAllRowCtrls();return t&&o?n.filter(function(t){var n=t.getRowNode();return e.isRowInMap(n,o)}):n},e.prototype.getCellCtrls=function(t,e){var o,n=this;r(e)&&(o={},e.forEach(function(t){var e=n.columnModel.getGridColumn(t);r(e)&&(o[e.getId()]=!0)}));var i=[];return this.getRowCtrls(t).forEach(function(t){t.getAllCellCtrls().forEach(function(t){var e=t.getColumn().getId();o&&!o[e]||i.push(t)})}),i},e.prototype.destroy=function(){this.removeAllRowComps(),t.prototype.destroy.call(this)},e.prototype.removeAllRowComps=function(){var t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t)},e.prototype.getRowsToRecycle=function(){var t=[];y(this.rowCtrlsByRowIndex,function(e,o){null==o.getRowNode().id&&t.push(e)}),this.removeRowCtrls(t);var e={};return y(this.rowCtrlsByRowIndex,function(t,o){var n=o.getRowNode();e[n.id]=o}),this.rowCtrlsByRowIndex={},e},e.prototype.removeRowCtrls=function(t,e){var o=this;void 0===e&&(e=!1),t.forEach(function(t){var n=o.rowCtrlsByRowIndex[t];n&&(n.destroyFirstPass(e),n.destroySecondPass()),delete o.rowCtrlsByRowIndex[t]})},e.prototype.onBodyScroll=function(t){"vertical"===t.direction&&this.redraw({afterScroll:!0})},e.prototype.redraw=function(t){void 0===t&&(t={});var e,o=t.afterScroll;this.stickyRowFeature&&Oo()&&(e=this.getCellToRestoreFocusToAfterRefresh()||void 0);var n=this.firstRenderedRow,r=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();var i=!1;this.stickyRowFeature&&(i=this.stickyRowFeature.checkStickyRows());var a=this.firstRenderedRow!==n||this.lastRenderedRow!==r;if((!o||i||a)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,o),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(o&&!i),null!=e)){var s=this.getCellToRestoreFocusToAfterRefresh();null!=e&&null==s&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(e))}},e.prototype.removeRowCompsNotToDraw=function(t,e){var o={};t.forEach(function(t){return o[t]=!0});var n=Object.keys(this.rowCtrlsByRowIndex).filter(function(t){return!o[t]});this.removeRowCtrls(n,e)},e.prototype.calculateIndexesToDraw=function(t){var e=this,o=ko(this.firstRenderedRow,this.lastRenderedRow),n=function(t,n){var r=n.getRowNode().rowIndex;null!=r&&(r<e.firstRenderedRow||r>e.lastRenderedRow)&&e.doNotUnVirtualiseRow(n)&&o.push(r)};y(this.rowCtrlsByRowIndex,n),y(t,n),o.sort(function(t,e){return t-e});for(var r=[],i=0;i<o.length;i++){var a=o[i],s=this.paginationProxy.getRow(a);s&&!s.sticky&&r.push(a)}return r},e.prototype.recycleRows=function(t,e,o){var n=this;void 0===e&&(e=!1),void 0===o&&(o=!1);var i=this.calculateIndexesToDraw(t);((this.printLayout||o)&&(e=!1),this.removeRowCompsNotToDraw(i,!e),i.forEach(function(i){r(n.createOrUpdateRowCtrl(i,t,e,o))}),t)&&(o&&!this.gridOptionsService.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(function(){n.destroyRowCtrls(t,e),n.updateAllRowCtrls(),n.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(t,e));this.updateAllRowCtrls()},e.prototype.dispatchDisplayedRowsChanged=function(t){void 0===t&&(t=!1);var e={type:qt.EVENT_DISPLAYED_ROWS_CHANGED,afterScroll:t};this.eventService.dispatchEvent(e)},e.prototype.onDisplayedColumnsChanged=function(){var t=this.columnModel.isPinningLeft(),e=this.columnModel.isPinningRight();(this.pinningLeft!==t||e!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=e,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())},e.prototype.redrawFullWidthEmbeddedRows=function(){var t=[];this.getFullWidthRowCtrls().forEach(function(e){var o=e.getRowNode().rowIndex;t.push(o.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(t),this.redraw({afterScroll:!0})},e.prototype.getFullWidthRowCtrls=function(t){var e=this,o=this.mapRowNodes(t);return this.getAllRowCtrls().filter(function(t){if(!t.isFullWidth())return!1;var n=t.getRowNode();return!(null!=o&&!e.isRowInMap(n,o))})},e.prototype.createOrUpdateRowCtrl=function(t,e,o,n){var i,a=this.rowCtrlsByRowIndex[t];if(a||r(i=this.paginationProxy.getRow(t))&&r(e)&&e[i.id]&&i.alreadyRendered&&(a=e[i.id],e[i.id]=null),!a){if(i||(i=this.paginationProxy.getRow(t)),!r(i))return;a=this.createRowCon(i,o,n)}return i&&(i.alreadyRendered=!0),this.rowCtrlsByRowIndex[t]=a,a},e.prototype.destroyRowCtrls=function(t,e){var o=this,n=[];y(t,function(t,r){r&&(o.cachedRowCtrls&&r.isCacheable()?o.cachedRowCtrls.addRow(r):(r.destroyFirstPass(!e),e?(o.zombieRowCtrls[r.getInstanceId()]=r,n.push(function(){r.destroySecondPass(),delete o.zombieRowCtrls[r.getInstanceId()]})):r.destroySecondPass()))}),e&&(n.push(function(){o.updateAllRowCtrls(),o.dispatchDisplayedRowsChanged()}),D(n))},e.prototype.getRowBuffer=function(){return this.gridOptionsService.get("rowBuffer")},e.prototype.getRowBufferInPixels=function(){return this.getRowBuffer()*this.gridOptionsService.getRowHeightAsNumber()},e.prototype.workOutFirstAndLastRowsToRender=function(){var t,e;if(this.rowContainerHeightService.updateOffset(),this.paginationProxy.isRowsToRender())if(this.printLayout)this.environment.refreshRowHeightVariable(),t=this.paginationProxy.getPageFirstRow(),e=this.paginationProxy.getPageLastRow();else{var o=this.getRowBufferInPixels(),n=this.ctrlsService.getGridBodyCtrl(),r=this.gridOptionsService.get("suppressRowVirtualisation"),i=!1,a=void 0,s=void 0;do{var l=this.paginationProxy.getPixelOffset(),u=this.paginationProxy.getCurrentPagePixelRange(),c=u.pageFirstPixel,p=u.pageLastPixel,d=this.rowContainerHeightService.getDivStretchOffset(),h=n.getScrollFeature().getVScrollPosition(),f=h.top,g=h.bottom;r?(a=c+d,s=p+d):(a=Math.max(f+l-o,c)+d,s=Math.min(g+l+o,p)+d),this.firstVisibleVPixel=Math.max(f+l,c)+d,i=this.ensureAllRowsInRangeHaveHeightsCalculated(a,s)}while(i);var y=this.paginationProxy.getRowIndexAtPixel(a),v=this.paginationProxy.getRowIndexAtPixel(s),m=this.paginationProxy.getPageFirstRow(),C=this.paginationProxy.getPageLastRow();y<m&&(y=m),v>C&&(v=C),t=y,e=v}else t=0,e=-1;var _=this.gridOptionsService.isDomLayout("normal"),w=this.gridOptionsService.get("suppressMaxRenderedRowRestriction"),b=Math.max(this.getRowBuffer(),500);_&&!w&&e-t>b&&(e=t+b);var S=t!==this.firstRenderedRow,E=e!==this.lastRenderedRow;if(S||E){this.firstRenderedRow=t,this.lastRenderedRow=e;var x={type:qt.EVENT_VIEWPORT_CHANGED,firstRow:t,lastRow:e};this.eventService.dispatchEvent(x)}},e.prototype.dispatchFirstDataRenderedEvent=function(){var t=this;if(!this.dataFirstRenderedFired){this.dataFirstRenderedFired=!0;var e={type:qt.EVENT_FIRST_DATA_RENDERED,firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(function(){t.beans.eventService.dispatchEvent(e)})}},e.prototype.ensureAllRowsInRangeHaveHeightsCalculated=function(t,e){var o=this.paginationProxy.ensureRowHeightsValid(t,e,-1,-1);return o&&this.updateContainerHeights(),o},e.prototype.getFirstVisibleVerticalPixel=function(){return this.firstVisibleVPixel},e.prototype.getFirstVirtualRenderedRow=function(){return this.firstRenderedRow},e.prototype.getLastVirtualRenderedRow=function(){return this.lastRenderedRow},e.prototype.doNotUnVirtualiseRow=function(t){var e=t.getRowNode(),o=this.focusService.isRowNodeFocused(e),n=t.isEditing(),r=e.detail;return!!(o||n||r)&&!!this.paginationProxy.isRowPresent(e)},e.prototype.createRowCon=function(t,e,o){var n=this.cachedRowCtrls?this.cachedRowCtrls.getRow(t):null;if(n)return n;var r=this.gridOptionsService.get("suppressAnimationFrame"),i=o&&!r&&!this.printLayout;return new Pu(t,this.beans,e,i,this.printLayout)},e.prototype.getRenderedNodes=function(){var t=this.rowCtrlsByRowIndex;return Object.keys(t).map(function(e){return t[e].getRowNode()})},e.prototype.getRowByPosition=function(t){var e,o=t.rowIndex;switch(t.rowPinned){case"top":e=this.topRowCtrls[o];break;case"bottom":e=this.bottomRowCtrls[o];break;default:(e=this.rowCtrlsByRowIndex[o])||(e=this.getStickyTopRowCtrls().find(function(t){return t.getRowNode().rowIndex===o})||null)}return e},e.prototype.getRowNode=function(t){switch(t.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[t.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[t.rowIndex];default:return this.rowModel.getRow(t.rowIndex)}},e.prototype.isRangeInRenderedViewport=function(t,e){if(null==t||null==e)return!1;var o=t>this.lastRenderedRow;return!(e<this.firstRenderedRow)&&!o},Gd([J("animationFrameService")],e.prototype,"animationFrameService",void 0),Gd([J("paginationProxy")],e.prototype,"paginationProxy",void 0),Gd([J("columnModel")],e.prototype,"columnModel",void 0),Gd([J("pinnedRowModel")],e.prototype,"pinnedRowModel",void 0),Gd([J("rowModel")],e.prototype,"rowModel",void 0),Gd([J("focusService")],e.prototype,"focusService",void 0),Gd([J("beans")],e.prototype,"beans",void 0),Gd([J("rowContainerHeightService")],e.prototype,"rowContainerHeightService",void 0),Gd([J("ctrlsService")],e.prototype,"ctrlsService",void 0),Gd([Y],e.prototype,"postConstruct",null),e=Gd([X("rowRenderer")],e)}(Bt),jd=function(){function t(t){this.entriesMap={},this.entriesList=[],this.maxCount=t}return t.prototype.addRow=function(t){if(this.entriesMap[t.getRowNode().id]=t,this.entriesList.push(t),t.setCached(!0),this.entriesList.length>this.maxCount){var e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}},t.prototype.getRow=function(t){if(null==t||null==t.id)return null;var e=this.entriesMap[t.id];return e?(this.removeFromCache(e),e.setCached(!1),e.getRowNode()!=t?null:e):null},t.prototype.has=function(t){return null!=this.entriesMap[t.id]},t.prototype.removeRow=function(t){var e=t.id,o=this.entriesMap[e];delete this.entriesMap[e],mt(this.entriesList,o)},t.prototype.removeFromCache=function(t){var e=t.getRowNode().id;delete this.entriesMap[e],mt(this.entriesList,t)},t.prototype.getEntries=function(){return this.entriesList},t}(),Ud=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Wd=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Kd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ud(e,t),e.prototype.formatValue=function(t,e,o,n,r){void 0===r&&(r=!0);var i,a=null,s=t.getColDef();if(n?i=n:r&&(i=s.valueFormatter),i){var l=this.gridOptionsService.addGridCommonParams({value:o,node:e,data:e?e.data:null,colDef:s,column:t});a="function"===typeof i?i(l):this.expressionService.evaluate(i,l)}else if(s.refData)return s.refData[o]||"";return null==a&&Array.isArray(o)&&(a=o.join(", ")),a},Wd([J("expressionService")],e.prototype,"expressionService",void 0),e=Wd([X("valueFormatterService")],e)}(Bt),qd=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Yd=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Zd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return qd(e,t),e.prototype.init=function(){var t=this;this.setPinnedTopRowData(),this.setPinnedBottomRowData(),this.addManagedPropertyListener("pinnedTopRowData",function(){return t.setPinnedTopRowData()}),this.addManagedPropertyListener("pinnedBottomRowData",function(){return t.setPinnedBottomRowData()})},e.prototype.isEmpty=function(t){return a("top"===t?this.pinnedTopRows:this.pinnedBottomRows)},e.prototype.isRowsToRender=function(t){return!this.isEmpty(t)},e.prototype.getRowAtPixel=function(t,e){var o="top"===e?this.pinnedTopRows:this.pinnedBottomRows;if(a(o))return 0;for(var n=0;n<o.length;n++){var r=o[n];if(r.rowTop+r.rowHeight-1>=t)return n}return o.length-1},e.prototype.setPinnedTopRowData=function(){var t=this.gridOptionsService.get("pinnedTopRowData");this.pinnedTopRows=this.createNodesFromData(t,!0);var e={type:qt.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(e)},e.prototype.setPinnedBottomRowData=function(){var t=this.gridOptionsService.get("pinnedBottomRowData");this.pinnedBottomRows=this.createNodesFromData(t,!1);var e={type:qt.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(e)},e.prototype.createNodesFromData=function(t,e){var o=this,n=[];if(t){var r=0;t.forEach(function(t,i){var a=new Fa(o.beans);a.data=t;var s=e?Fa.ID_PREFIX_TOP_PINNED:Fa.ID_PREFIX_BOTTOM_PINNED;a.id=s+i,a.rowPinned=e?"top":"bottom",a.setRowTop(r),a.setRowHeight(o.gridOptionsService.getRowHeightForNode(a).height),a.setRowIndex(i),r+=a.rowHeight,n.push(a)})}return n},e.prototype.getPinnedTopRowData=function(){return this.pinnedTopRows},e.prototype.getPinnedBottomRowData=function(){return this.pinnedBottomRows},e.prototype.getPinnedTopTotalHeight=function(){return this.getTotalHeight(this.pinnedTopRows)},e.prototype.getPinnedTopRowCount=function(){return this.pinnedTopRows?this.pinnedTopRows.length:0},e.prototype.getPinnedBottomRowCount=function(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0},e.prototype.getPinnedTopRow=function(t){return this.pinnedTopRows[t]},e.prototype.getPinnedBottomRow=function(t){return this.pinnedBottomRows[t]},e.prototype.forEachPinnedTopRow=function(t){a(this.pinnedTopRows)||this.pinnedTopRows.forEach(t)},e.prototype.forEachPinnedBottomRow=function(t){a(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(t)},e.prototype.getPinnedBottomTotalHeight=function(){return this.getTotalHeight(this.pinnedBottomRows)},e.prototype.getTotalHeight=function(t){if(!t||0===t.length)return 0;var e=ft(t);return e.rowTop+e.rowHeight},Yd([J("beans")],e.prototype,"beans",void 0),Yd([Y],e.prototype,"init",null),e=Yd([X("pinnedRowModel")],e)}(Bt);!function(t){t.Applied="Applied",t.StoreNotFound="StoreNotFound",t.StoreLoading="StoreLoading",t.StoreWaitingToLoad="StoreWaitingToLoad",t.StoreLoadingFailed="StoreLoadingFailed",t.StoreWrongType="StoreWrongType",t.Cancelled="Cancelled",t.StoreNotStarted="StoreNotStarted"}(wd||(wd={}));var Xd,Jd=function(){function t(t,e){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=t,this.pathRoot={rowNode:e,children:null},this.mapToItems[e.id]=this.pathRoot}return t.prototype.setInactive=function(){this.active=!1},t.prototype.isActive=function(){return this.active},t.prototype.depthFirstSearchChangedPath=function(t,e){if(t.children)for(var o=0;o<t.children.length;o++)this.depthFirstSearchChangedPath(t.children[o],e);e(t.rowNode)},t.prototype.depthFirstSearchEverything=function(t,e,o){if(t.childrenAfterGroup)for(var n=0;n<t.childrenAfterGroup.length;n++){var r=t.childrenAfterGroup[n];r.childrenAfterGroup?this.depthFirstSearchEverything(t.childrenAfterGroup[n],e,o):o&&e(r)}e(t)},t.prototype.forEachChangedNodeDepthFirst=function(t,e,o){void 0===e&&(e=!1),void 0===o&&(o=!1),this.active&&!o?this.depthFirstSearchChangedPath(this.pathRoot,t):this.depthFirstSearchEverything(this.pathRoot.rowNode,t,e)},t.prototype.executeFromRootNode=function(t){t(this.pathRoot.rowNode)},t.prototype.createPathItems=function(t){for(var e=t,o=0;!this.mapToItems[e.id];){var n={rowNode:e,children:null};this.mapToItems[e.id]=n,o++,e=e.parent}return o},t.prototype.populateColumnsMap=function(t,e){var o=this;if(this.keepingColumns&&e)for(var n=t;n;)this.nodeIdsToColumns[n.id]||(this.nodeIdsToColumns[n.id]={}),e.forEach(function(t){return o.nodeIdsToColumns[n.id][t.getId()]=!0}),n=n.parent},t.prototype.linkPathItems=function(t,e){for(var o=t,n=0;n<e;n++){var r=this.mapToItems[o.id],i=this.mapToItems[o.parent.id];i.children||(i.children=[]),i.children.push(r),o=o.parent}},t.prototype.addParentNode=function(t,e){if(t&&!t.isRowPinned()){var o=this.createPathItems(t);this.linkPathItems(t,o),this.populateColumnsMap(t,e)}},t.prototype.canSkip=function(t){return this.active&&!this.mapToItems[t.id]},t.prototype.getValueColumnsForNode=function(t,e){if(!this.keepingColumns)return e;var o=this.nodeIdsToColumns[t.id];return e.filter(function(t){return o[t.getId()]})},t.prototype.getNotValueColumnsForNode=function(t,e){if(!this.keepingColumns)return null;var o=this.nodeIdsToColumns[t.id];return e.filter(function(t){return!o[t.getId()]})},t}(),Qd=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),$d=function(t){function e(o){var n=t.call(this)||this;return n.state=e.STATE_WAITING_TO_LOAD,n.version=0,n.id=o,n}return Qd(e,t),e.prototype.getId=function(){return this.id},e.prototype.load=function(){this.state=e.STATE_LOADING,this.loadFromDatasource()},e.prototype.getVersion=function(){return this.version},e.prototype.setStateWaitingToLoad=function(){this.version++,this.state=e.STATE_WAITING_TO_LOAD},e.prototype.getState=function(){return this.state},e.prototype.pageLoadFailed=function(t){this.isRequestMostRecentAndLive(t)&&(this.state=e.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)},e.prototype.success=function(t,e){this.successCommon(t,e)},e.prototype.pageLoaded=function(t,e,o){this.successCommon(t,{rowData:e,rowCount:o})},e.prototype.isRequestMostRecentAndLive=function(t){var e=t===this.version,o=this.isAlive();return e&&o},e.prototype.successCommon=function(t,o){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(t)&&(this.state=e.STATE_LOADED,this.processServerResult(o))},e.prototype.dispatchLoadCompleted=function(t){void 0===t&&(t=!0);var o={type:e.EVENT_LOAD_COMPLETE,success:t,block:this};this.dispatchEvent(o)},e.EVENT_LOAD_COMPLETE="loadComplete",e.STATE_WAITING_TO_LOAD="needsLoading",e.STATE_LOADING="loading",e.STATE_LOADED="loaded",e.STATE_FAILED="failed",e}(Bt),th=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),eh=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},oh=function(t,e){return function(o,n){e(o,n,t)}},nh=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.activeBlockLoadsCount=0,e.blocks=[],e.active=!0,e}var o;return th(e,t),o=e,e.prototype.postConstruct=function(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();var t=this.gridOptionsService.get("blockLoadDebounceMillis");t&&t>0&&(this.checkBlockToLoadDebounce=ur.debounce(this.performCheckBlocksToLoad.bind(this),t))},e.prototype.setBeans=function(t){this.logger=t.create("RowNodeBlockLoader")},e.prototype.getMaxConcurrentDatasourceRequests=function(){var t=this.gridOptionsService.get("maxConcurrentDatasourceRequests");return null==t?2:t<=0?void 0:t},e.prototype.addBlock=function(t){this.blocks.push(t),t.addEventListener($d.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()},e.prototype.removeBlock=function(t){ur.removeFromArray(this.blocks,t)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.active=!1},e.prototype.loadComplete=function(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchEvent({type:o.BLOCK_LOADED_EVENT}),0==this.activeBlockLoadsCount&&this.dispatchEvent({type:o.BLOCK_LOADER_FINISHED_EVENT})},e.prototype.checkBlockToLoad=function(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()},e.prototype.performCheckBlocksToLoad=function(){if(this.active)if(this.printCacheStatus(),null!=this.maxConcurrentRequests&&this.activeBlockLoadsCount>=this.maxConcurrentRequests)this.logger.log("checkBlockToLoad: max loads exceeded");else{var t=this.getAvailableLoadingCount(),e=this.blocks.filter(function(t){return t.getState()===$d.STATE_WAITING_TO_LOAD}).slice(0,t);this.registerLoads(e.length),e.forEach(function(t){return t.load()}),this.printCacheStatus()}},e.prototype.getBlockState=function(){if(this.gridOptionsService.isRowModelType("serverSide"))return this.rowModel.getBlockStates();var t={};return this.blocks.forEach(function(e){var o=e.getBlockStateJson(),n=o.id,r=o.state;t[n]=r}),t},e.prototype.printCacheStatus=function(){this.logger.isLogging()&&this.logger.log("printCacheStatus: activePageLoadsCount = ".concat(this.activeBlockLoadsCount,",")+" blocks = ".concat(JSON.stringify(this.getBlockState())))},e.prototype.isLoading=function(){return this.activeBlockLoadsCount>0},e.prototype.registerLoads=function(t){this.activeBlockLoadsCount+=t},e.prototype.getAvailableLoadingCount=function(){return void 0!==this.maxConcurrentRequests?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0},e.BLOCK_LOADED_EVENT="blockLoaded",e.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished",eh([J("rowModel")],e.prototype,"rowModel",void 0),eh([Y],e.prototype,"postConstruct",null),eh([oh(0,tt("loggerFactory"))],e.prototype,"setBeans",null),e=o=eh([X("rowNodeBlockLoader")],e)}(Bt),rh=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ih=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},ah=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentPage=0,e.topDisplayedRowIndex=0,e.bottomDisplayedRowIndex=0,e.pixelOffset=0,e.masterRowCount=0,e}return rh(e,t),e.prototype.postConstruct=function(){this.active=this.gridOptionsService.get("pagination"),this.pageSizeFromGridOptions=this.gridOptionsService.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedListener(this.eventService,qt.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this)),this.onModelUpdated()},e.prototype.ensureRowHeightsValid=function(t,e,o,n){var r=this.rowModel.ensureRowHeightsValid(t,e,this.getPageFirstRow(),this.getPageLastRow());return r&&this.calculatePages(),r},e.prototype.isPaginateChildRows=function(){return!(!this.gridOptionsService.get("groupRemoveSingleChildren")&&!this.gridOptionsService.get("groupRemoveLowestSingleChildren"))||this.gridOptionsService.get("paginateChildRows")},e.prototype.onModelUpdated=function(t){this.calculatePages();var e={type:qt.EVENT_PAGINATION_CHANGED,animate:!!t&&t.animate,newData:!!t&&t.newData,newPage:!!t&&t.newPage,newPageSize:!!t&&t.newPageSize,keepRenderedRows:!!t&&t.keepRenderedRows};this.eventService.dispatchEvent(e)},e.prototype.onPaginationGridOptionChanged=function(){this.active=this.gridOptionsService.get("pagination"),this.calculatePages();var t={type:qt.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!1,keepRenderedRows:!0};this.eventService.dispatchEvent(t)},e.prototype.onPageSizeGridOptionChanged=function(){this.setPageSize(this.gridOptionsService.get("paginationPageSize"),"gridOptions")},e.prototype.goToPage=function(t){if(this.active&&this.currentPage!==t&&"number"===typeof this.currentPage){this.currentPage=t;var e={type:qt.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!0,newPageSize:!1};this.onModelUpdated(e)}},e.prototype.getPixelOffset=function(){return this.pixelOffset},e.prototype.getRow=function(t){return this.rowModel.getRow(t)},e.prototype.getRowNode=function(t){return this.rowModel.getRowNode(t)},e.prototype.getRowIndexAtPixel=function(t){return this.rowModel.getRowIndexAtPixel(t)},e.prototype.getCurrentPageHeight=function(){return i(this.topRowBounds)||i(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)},e.prototype.getCurrentPagePixelRange=function(){return{pageFirstPixel:this.topRowBounds?this.topRowBounds.rowTop:0,pageLastPixel:this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0}},e.prototype.isRowPresent=function(t){return!!this.rowModel.isRowPresent(t)&&(t.rowIndex>=this.topDisplayedRowIndex&&t.rowIndex<=this.bottomDisplayedRowIndex)},e.prototype.isEmpty=function(){return this.rowModel.isEmpty()},e.prototype.isRowsToRender=function(){return this.rowModel.isRowsToRender()},e.prototype.forEachNode=function(t){return this.rowModel.forEachNode(t)},e.prototype.forEachNodeOnPage=function(t){for(var e=this.getPageFirstRow(),o=this.getPageLastRow(),n=e;n<=o;n++){var r=this.getRow(n);r&&t(r)}},e.prototype.getType=function(){return this.rowModel.getType()},e.prototype.getRowBounds=function(t){var e=this.rowModel.getRowBounds(t);return e.rowIndex=t,e},e.prototype.getPageFirstRow=function(){return this.topRowBounds?this.topRowBounds.rowIndex:-1},e.prototype.getPageLastRow=function(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1},e.prototype.getRowCount=function(){return this.rowModel.getRowCount()},e.prototype.getPageForIndex=function(t){return Math.floor(t/this.pageSize)},e.prototype.goToPageWithIndex=function(t){if(this.active){var e=this.getPageForIndex(t);this.goToPage(e)}},e.prototype.isRowInPage=function(t){return!this.active||this.getPageForIndex(t.rowIndex)===this.currentPage},e.prototype.isLastPageFound=function(){return this.rowModel.isLastRowIndexKnown()},e.prototype.getCurrentPage=function(){return this.currentPage},e.prototype.goToNextPage=function(){this.goToPage(this.currentPage+1)},e.prototype.goToPreviousPage=function(){this.goToPage(this.currentPage-1)},e.prototype.goToFirstPage=function(){this.goToPage(0)},e.prototype.goToLastPage=function(){var t=this.rowModel.getRowCount(),e=Math.floor(t/this.pageSize);this.goToPage(e)},e.prototype.getPageSize=function(){return this.pageSize},e.prototype.getTotalPages=function(){return this.totalPages},e.prototype.setPage=function(t){this.currentPage=t},Object.defineProperty(e.prototype,"pageSize",{get:function(){return r(this.pageSizeAutoCalculated)?this.pageSizeAutoCalculated:r(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:r(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:r(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize},enumerable:!1,configurable:!0}),e.prototype.unsetAutoCalculatedPageSize=function(){if(void 0!==this.pageSizeAutoCalculated){var t=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==t&&this.onModelUpdated({type:qt.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!1,newPageSize:!0})}},e.prototype.setPageSize=function(t,e){var o=this.pageSize;switch(e){case"autoCalculated":this.pageSizeAutoCalculated=t;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=t,0!==this.currentPage&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=t;break;case"gridOptions":this.pageSizeFromGridOptions=t,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,0!==this.currentPage&&this.goToFirstPage()}if(o!==this.pageSize){var n={type:qt.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!1,newPageSize:!0};this.onModelUpdated(n)}},e.prototype.calculatePages=function(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(r(this.topRowBounds)?this.topRowBounds.rowTop:0)},e.prototype.setPixelOffset=function(t){this.pixelOffset!==t&&(this.pixelOffset=t,this.eventService.dispatchEvent({type:qt.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))},e.prototype.setZeroRows=function(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0},e.prototype.adjustCurrentPageIfInvalid=function(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)},e.prototype.calculatePagesMasterRowsOnly=function(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0)this.setZeroRows();else{var t=this.masterRowCount-1;this.totalPages=Math.floor(t/this.pageSize)+1,this.adjustCurrentPageIfInvalid();var e=this.pageSize*this.currentPage,o=this.pageSize*(this.currentPage+1)-1;if(o>t&&(o=t),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(e),o===t)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{var n=this.rowModel.getTopLevelRowDisplayedIndex(o+1);this.bottomDisplayedRowIndex=n-1}}},e.prototype.getMasterRowCount=function(){return this.masterRowCount},e.prototype.calculatePagesAllRows=function(){if(this.masterRowCount=this.rowModel.getRowCount(),0!==this.masterRowCount){var t=this.masterRowCount-1;this.totalPages=Math.floor(t/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>t&&(this.bottomDisplayedRowIndex=t)}else this.setZeroRows()},e.prototype.calculatedPagesNotActive=function(){this.setPageSize(this.masterRowCount,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1},ih([J("rowModel")],e.prototype,"rowModel",void 0),ih([Y],e.prototype,"postConstruct",null),e=ih([X("paginationProxy")],e)}(Bt),sh=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),lh=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},uh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return sh(e,t),e.prototype.processAllCellClasses=function(t,e,o,n){this.processClassRules(void 0,t.cellClassRules,e,o,n),this.processStaticCellClasses(t,e,o)},e.prototype.processClassRules=function(t,e,o,n,r){if(null!=e||null!=t){var i={},a={},s=function(t,e){t.split(" ").forEach(function(t){""!=t.trim()&&e(t)})};if(e)for(var l=Object.keys(e),u=function(t){var n,r=l[t],u=e[r];"string"===typeof u?n=c.expressionService.evaluate(u,o):"function"===typeof u&&(n=u(o)),s(r,function(t){n?i[t]=!0:a[t]=!0})},c=this,p=0;p<l.length;p++)u(p);t&&r&&Object.keys(t).forEach(function(t){return s(t,function(t){i[t]||(a[t]=!0)})}),r&&Object.keys(a).forEach(r),Object.keys(i).forEach(n)}},e.prototype.getStaticCellClasses=function(t,e){var o,n=t.cellClass;if(!n)return[];"function"===typeof n?o=n(e):o=n;return"string"===typeof o&&(o=[o]),o||[]},e.prototype.processStaticCellClasses=function(t,e,o){this.getStaticCellClasses(t,e).forEach(function(t){o(t)})},lh([J("expressionService")],e.prototype,"expressionService",void 0),e=lh([X("stylingService")],e)}(Bt),ch=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ph=function(t){function e(e){return t.call(this,e,"ag-toggle-button")||this}return ch(e,t),e.prototype.setValue=function(e,o){return t.prototype.setValue.call(this,e,o),this.addOrRemoveCssClass("ag-selected",this.getValue()),this},e}(ui),dh=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),hh=function(t){function e(e){return t.call(this,e,"ag-text-area",null,"textarea")||this}return dh(e,t),e.prototype.setValue=function(e,o){var n=t.prototype.setValue.call(this,e,o);return this.eInput.value=e,n},e.prototype.setCols=function(t){return this.eInput.cols=t,this},e.prototype.setRows=function(t){return this.eInput.rows=t,this},e}(si),fh=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),gh=function(t){function e(e){return t.call(this,e,"ag-date-field","date")||this}return fh(e,t),e.prototype.postConstruct=function(){var e=this;t.prototype.postConstruct.call(this),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this));var o=wo();this.addManagedListener(this.eInput,"mousedown",function(){e.isDisabled()||o||e.eInput.focus()}),this.eInput.step="any"},e.prototype.onWheel=function(t){document.activeElement===this.eInput&&t.preventDefault()},e.prototype.setMin=function(t){var e,o=t instanceof Date?null!==(e=zo(null!==t&&void 0!==t?t:null,!1))&&void 0!==e?e:void 0:t;return this.min===o?this:(this.min=o,An(this.eInput,"min",o),this)},e.prototype.setMax=function(t){var e,o=t instanceof Date?null!==(e=zo(null!==t&&void 0!==t?t:null,!1))&&void 0!==e?e:void 0:t;return this.max===o?this:(this.max=o,An(this.eInput,"max",o),this)},e.prototype.setStep=function(t){return this.step===t?this:(this.step=t,An(this.eInput,"step",t),this)},e.prototype.getDate=function(){var t;if(this.eInput.validity.valid)return null!==(t=Uo(this.getValue()))&&void 0!==t?t:void 0},e.prototype.setDate=function(t,e){this.setValue(zo(null!==t&&void 0!==t?t:null,!1),e)},e}(Ni),yh=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),vh=function(t){function e(e){return t.call(this,e,"ag-range-field","range")||this}return yh(e,t),e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this);var e=this.config,o=e.min,n=e.max,r=e.step;null!=o&&this.setMinValue(o),null!=n&&this.setMaxValue(n),this.setStep(r||1)},e.prototype.addInputListeners=function(){var t=this;this.addManagedListener(this.eInput,"input",function(e){var o=e.target.value;t.setValue(o)})},e.prototype.setMinValue=function(t){return this.min=t,this.eInput.setAttribute("min",t.toString()),this},e.prototype.setMaxValue=function(t){return this.max=t,this.eInput.setAttribute("max",t.toString()),this},e.prototype.setStep=function(t){return this.eInput.setAttribute("step",t.toString()),this},e.prototype.setValue=function(e,o){null!=this.min&&(e=Math.max(parseFloat(e),this.min).toString()),null!=this.max&&(e=Math.min(parseFloat(e),this.max).toString());var n=t.prototype.setValue.call(this,e,o);return this.eInput.value=e,n},e}(si),mh=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ch=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},_h=function(t){function e(e,o){var n=t.call(this,'<div class="ag-rich-select-row" role="presentation"></div>')||this;return n.params=e,n.wrapperEl=o,n}return mh(e,t),e.prototype.postConstruct=function(){this.addManagedListener(this.getGui(),"click",this.onClick.bind(this))},e.prototype.setState=function(t){var e="";this.params.valueFormatter&&(e=this.params.valueFormatter(t)),this.populateWithRenderer(t,e)||this.populateWithoutRenderer(t,e),this.value=t},e.prototype.highlightString=function(t){var e=this.parsedValue;if(!this.params.cellRenderer&&r(e)){var o=r(t);if(o){var n=null===e||void 0===e?void 0:e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase());if(n>=0){var i=n+t.length,a=ee(e.slice(0,n),!0),s=ee(e.slice(n,i),!0),l=ee(e.slice(i));this.renderValueWithoutRenderer("".concat(a,'<span class="ag-rich-select-row-text-highlight">').concat(s,"</span>").concat(l))}else o=!1}o||this.renderValueWithoutRenderer(e)}},e.prototype.updateHighlighted=function(t){var e,o=this.getGui(),n="ag-rich-select-row-".concat(this.getCompId());(null===(e=o.parentElement)||void 0===e||e.setAttribute("id",n),t)&&(Ze(this.getParentComponent().getAriaElement(),n),this.wrapperEl.setAttribute("data-active-option",n));lo(o.parentElement,t),this.addOrRemoveCssClass("ag-rich-select-row-selected",t)},e.prototype.populateWithoutRenderer=function(t,e){var o=this.gridOptionsService.getDocument(),n=this.getGui(),i=o.createElement("span");i.style.overflow="hidden",i.style.textOverflow="ellipsis";var a=ee(r(e)?e:t,!0);this.parsedValue=r(a)?a:null,n.appendChild(i),this.renderValueWithoutRenderer(a)},e.prototype.renderValueWithoutRenderer=function(t){var e=this.getGui().querySelector("span");e&&(e.innerHTML=r(t)?t:"&nbsp;")},e.prototype.populateWithRenderer=function(t,e){var o,n,r=this;return this.params.cellRenderer&&(n=this.userComponentFactory.getCellRendererDetails(this.params,{value:t,valueFormatted:e})),n&&(o=n.newAgStackInstance()),o&&Mn(o,this.getGui()),!!o&&(o.then(function(t){r.addDestroyFunc(function(){r.getContext().destroyBean(t)})}),!0)},e.prototype.onClick=function(){var t=this.getParentComponent(),e={type:qt.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:!1,value:this.value};null===t||void 0===t||t.dispatchEvent(e)},Ch([J("userComponentFactory")],e.prototype,"userComponentFactory",void 0),Ch([Y],e.prototype,"postConstruct",null),e}(Sr),wh=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),bh=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Sh=function(t){function e(o){var n=t.call(this,e.getTemplate((null===o||void 0===o?void 0:o.cssIdentifier)||"default"))||this;n.renderedRows=new Map,n.rowHeight=20;var r=o||{},i=r.cssIdentifier,a=void 0===i?"default":i,s=r.ariaRole,l=void 0===s?"listbox":s,u=r.listName;return n.cssIdentifier=a,n.ariaRole=l,n.listName=u,n}return wh(e,t),e.prototype.postConstruct=function(){var t=this;this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:function(e){return t.onFocusIn(e)},onFocusOut:function(e){return t.onFocusOut(e)},focusInnerElement:function(e){return t.focusInnerElement(e)},onTabKeyDown:function(e){return t.onTabKeyDown(e)},handleKeyDown:function(e){return t.handleKeyDown(e)}}),this.setAriaProperties(),this.addManagedListener(this.eventService,qt.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanged.bind(this))},e.prototype.onGridStylesChanged=function(){this.rowHeight=this.getItemHeight(),this.refresh()},e.prototype.setAriaProperties=function(){var t=this.localeService.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),e=this.eContainer;ke(e,this.ariaRole),ze(e,t)},e.prototype.addResizeObserver=function(){var t=this,e=this.resizeObserverService.observeResize(this.getGui(),function(){return t.animationFrameService.requestAnimationFrame(function(){return t.drawVirtualRows()})});this.addDestroyFunc(e)},e.prototype.focusInnerElement=function(t){this.focusRow(t?this.model.getRowCount()-1:0)},e.prototype.onFocusIn=function(t){var e=t.target;e.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=Ve(e)-1)},e.prototype.onFocusOut=function(t){this.getFocusableElement().contains(t.relatedTarget)||(this.lastFocusedRowIndex=null)},e.prototype.handleKeyDown=function(t){switch(t.key){case jn.UP:case jn.DOWN:this.navigate(t.key===jn.UP)&&t.preventDefault()}},e.prototype.onTabKeyDown=function(t){this.navigate(t.shiftKey)?t.preventDefault():(At(t),this.forceFocusOutOfContainer(t.shiftKey))},e.prototype.navigate=function(t){if(null==this.lastFocusedRowIndex)return!1;var e=this.lastFocusedRowIndex+(t?-1:1);return!(e<0||e>=this.model.getRowCount())&&(this.focusRow(e),!0)},e.prototype.getLastFocusedRow=function(){return this.lastFocusedRowIndex},e.prototype.focusRow=function(t){var e=this;this.ensureIndexVisible(t),window.setTimeout(function(){if(e.isAlive()){var o=e.renderedRows.get(t);o&&o.eDiv.focus()}},10)},e.prototype.getComponentAt=function(t){var e=this.renderedRows.get(t);return e&&e.rowComponent},e.prototype.forEachRenderedRow=function(t){this.renderedRows.forEach(function(e,o){return t(e.rowComponent,o)})},e.getTemplate=function(t){return'<div class="ag-virtual-list-viewport ag-'.concat(t,'-virtual-list-viewport" role="presentation">\n                <div class="ag-virtual-list-container ag-').concat(t,'-virtual-list-container" ref="eContainer"></div>\n            </div>')},e.prototype.getItemHeight=function(){return this.environment.getListItemHeight()},e.prototype.ensureIndexVisible=function(t,e){void 0===e&&(e=!0);var o=this.model.getRowCount();if("number"!==typeof t||t<0||t>=o)return console.warn("AG Grid: invalid row index for ensureIndexVisible: "+t),!1;var n=t*this.rowHeight,r=n+this.rowHeight,i=this.getGui(),a=i.scrollTop,s=i.offsetHeight,l=a+s,u=e?0:this.rowHeight,c=l<r-u;if(a>n+u)return i.scrollTop=n,!0;if(c){var p=r-s;return i.scrollTop=p,!0}return!1},e.prototype.setComponentCreator=function(t){this.componentCreator=t},e.prototype.setComponentUpdater=function(t){this.componentUpdater=t},e.prototype.getRowHeight=function(){return this.rowHeight},e.prototype.getScrollTop=function(){return this.getGui().scrollTop},e.prototype.setRowHeight=function(t){this.rowHeight=t,this.refresh()},e.prototype.refresh=function(t){var e=this;if(null!=this.model&&this.isAlive()){var o=this.model.getRowCount();this.eContainer.style.height="".concat(o*this.rowHeight,"px"),G(function(){return e.eContainer.clientHeight>=o*e.rowHeight},function(){e.isAlive()&&(e.canSoftRefresh(t)?e.drawVirtualRows(!0):(e.clearVirtualRows(),e.drawVirtualRows()))})}},e.prototype.canSoftRefresh=function(t){return!!(t&&this.renderedRows.size&&"function"===typeof this.model.areRowsEqual&&this.componentUpdater)},e.prototype.clearVirtualRows=function(){var t=this;this.renderedRows.forEach(function(e,o){return t.removeRow(o)})},e.prototype.drawVirtualRows=function(t){if(this.isAlive()&&this.model){var e=this.getGui(),o=e.scrollTop,n=o+e.offsetHeight,r=Math.floor(o/this.rowHeight),i=Math.floor(n/this.rowHeight);this.ensureRowsRendered(r,i,t)}},e.prototype.ensureRowsRendered=function(t,e,o){var n=this;this.renderedRows.forEach(function(o,r){(r<t||r>e)&&r!==n.lastFocusedRowIndex&&n.removeRow(r)}),o&&this.refreshRows();for(var r=t;r<=e;r++)this.renderedRows.has(r)||r<this.model.getRowCount()&&this.insertRow(r)},e.prototype.insertRow=function(t){var e=this,o=this.model.getRow(t),n=document.createElement("div");n.classList.add("ag-virtual-list-item","ag-".concat(this.cssIdentifier,"-virtual-list-item")),ke(n,"tree"===this.ariaRole?"treeitem":"option"),Qe(n,this.model.getRowCount()),$e(n,t+1),n.setAttribute("tabindex","-1"),n.style.height="".concat(this.rowHeight,"px"),n.style.top="".concat(this.rowHeight*t,"px");var r=this.componentCreator(o,n);r.addGuiEventListener("focusin",function(){return e.lastFocusedRowIndex=t}),n.appendChild(r.getGui()),this.renderedRows.has(t-1)?this.renderedRows.get(t-1).eDiv.insertAdjacentElement("afterend",n):this.renderedRows.has(t+1)?this.renderedRows.get(t+1).eDiv.insertAdjacentElement("beforebegin",n):this.eContainer.appendChild(n),this.renderedRows.set(t,{rowComponent:r,eDiv:n,value:o})},e.prototype.removeRow=function(t){var e=this.renderedRows.get(t);this.eContainer.removeChild(e.eDiv),this.destroyBean(e.rowComponent),this.renderedRows.delete(t)},e.prototype.refreshRows=function(){var t=this,e=this.model.getRowCount();this.renderedRows.forEach(function(o,n){var r,i;if(n>=e)t.removeRow(n);else{var a=t.model.getRow(n);(null===(i=(r=t.model).areRowsEqual)||void 0===i?void 0:i.call(r,o.value,a))?t.componentUpdater(a,o.rowComponent):t.removeRow(n)}})},e.prototype.addScrollListener=function(){var t=this;this.addGuiEventListener("scroll",function(){return t.drawVirtualRows()},{passive:!0})},e.prototype.setModel=function(t){this.model=t},e.prototype.getAriaElement=function(){return this.eContainer},e.prototype.destroy=function(){this.isAlive()&&(this.clearVirtualRows(),t.prototype.destroy.call(this))},bh([J("resizeObserverService")],e.prototype,"resizeObserverService",void 0),bh([J("animationFrameService")],e.prototype,"animationFrameService",void 0),bh([xr("eContainer")],e.prototype,"eContainer",void 0),bh([Y],e.prototype,"postConstruct",null),e}(pd),Eh=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),xh=function(){return(xh=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Th=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Oh='\n    <div class="ag-picker-field" role="presentation">\n        <div ref="eLabel"></div>\n            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-rich-select-value ag-picker-collapsed">\n            <div ref="eDisplayField" class="ag-picker-field-display"></div>\n            <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>\n            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n        </div>\n    </div>',Rh=function(t){function e(e){var o,n,r=this;(r=t.call(this,xh(xh({pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"ag-list",className:"ag-rich-select",pickerIcon:"smallDown",ariaRole:"combobox",template:null!==(o=null===e||void 0===e?void 0:e.template)&&void 0!==o?o:Oh,modalPicker:!1},e),{maxPickerHeight:null!==(n=null===e||void 0===e?void 0:e.maxPickerHeight)&&void 0!==n?n:"calc(var(--ag-row-height) * 6.5)"}))||this).searchString="",r.highlightedItem=-1,r.lastRowHovered=-1,r.searchStringCreator=null;var i=e||{},a=i.cellRowHeight,s=i.value,l=i.valueList,u=i.searchStringCreator;return null!=a&&(r.cellRowHeight=a),void 0!==s&&(r.value=s),null!=l&&(r.values=l),u&&(r.searchStringCreator=u),r}return Eh(e,t),e.prototype.postConstruct=function(){var e=this;t.prototype.postConstruct.call(this),this.createLoadingElement(),this.createListComponent();var o=this.config,n=o.allowTyping,r=o.placeholder;n?(this.eInput.setAutoComplete(!1).setInputPlaceholder(r),this.eDisplayField.classList.add("ag-hidden")):this.eInput.setDisplayed(!1),this.eWrapper.tabIndex=this.gridOptionsService.get("tabIndex");var i=this.config.searchDebounceDelay,a=void 0===i?300:i;this.clearSearchString=N(this.clearSearchString,a),this.renderSelectedValue(),n&&(this.eInput.onValueChange(function(t){return e.searchTextFromString(t)}),this.addManagedListener(this.eWrapper,"focus",this.onWrapperFocus.bind(this))),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))},e.prototype.createLoadingElement=function(){var t=this.gridOptionsService.getDocument(),e=this.localeService.getLocaleTextFunc(),o=t.createElement("div");o.classList.add("ag-loading-text"),o.innerText=e("loadingOoo","Loading..."),this.eLoading=o},e.prototype.createListComponent=function(){var t=this;this.listComponent=this.createBean(new Sh({cssIdentifier:"rich-select"})),this.listComponent.setComponentCreator(this.createRowComponent.bind(this));this.listComponent.setComponentUpdater(function(t,e){}),this.listComponent.setParentComponent(this),this.addManagedListener(this.listComponent,qt.EVENT_FIELD_PICKER_VALUE_SELECTED,function(e){t.onListValueSelected(e.value,e.fromEnterKey)});var e=this.cellRowHeight;e&&this.listComponent.setRowHeight(e);var o=this.listComponent.getGui(),n=this.listComponent.getAriaElement();this.addManagedListener(o,"mousemove",this.onPickerMouseMove.bind(this)),this.addManagedListener(o,"mousedown",function(t){return t.preventDefault()}),o.classList.add("ag-rich-select-list");var r="ag-rich-select-list-".concat(this.listComponent.getCompId());n.setAttribute("id",r),ze(n,this.localeService.getLocaleTextFunc()(this.config.pickerAriaLabelKey,this.config.pickerAriaLabelValue)),uo(this.eWrapper,n)},e.prototype.renderSelectedValue=function(){var t,e,o=this,n=this.value,i=this.eDisplayField,a=this.config,s=this.config,l=s.allowTyping,u=s.initialInputValue,c=this.config.valueFormatter?this.config.valueFormatter(n):n;if(l)this.eInput.setValue(null!==u&&void 0!==u?u:c);else if(a.cellRenderer&&(t=this.userComponentFactory.getCellRendererDetails(this.config,{value:n,valueFormatted:c})),t&&(e=t.newAgStackInstance()),e)dn(i),Mn(e,i),e.then(function(t){o.addDestroyFunc(function(){return o.getContext().destroyBean(t)})});else if(r(this.value))i.innerText=c,i.classList.remove("ag-display-as-placeholder");else{var p=a.placeholder;r(p)?(i.innerHTML="".concat(ee(p)),i.classList.add("ag-display-as-placeholder")):dn(i)}},e.prototype.getCurrentValueIndex=function(){var t=this.currentList,e=this.value;if(null==e||!t)return-1;for(var o=0;o<t.length;o++)if(t[o]===e)return o;return-1},e.prototype.highlightFilterMatch=function(){var t,e=this;null===(t=this.listComponent)||void 0===t||t.forEachRenderedRow(function(t,o){t.highlightString(e.searchString)})},e.prototype.highlightSelectedValue=function(t){var e,o=this;null==t&&(t=this.getCurrentValueIndex()),this.highlightedItem=t,null===(e=this.listComponent)||void 0===e||e.forEachRenderedRow(function(e,n){var r=-1!==t&&o.highlightedItem===n;e.updateHighlighted(r)})},e.prototype.setRowHeight=function(t){t!==this.cellRowHeight&&(this.cellRowHeight=t),this.listComponent&&this.listComponent.setRowHeight(t)},e.prototype.createPickerComponent=function(){var t=this.values;return t&&this.setValueList({valueList:t}),this.listComponent},e.prototype.setSearchStringCreator=function(t){this.searchStringCreator=t},e.prototype.setValueList=function(t){var e=t.valueList,o=t.refresh;this.listComponent&&this.currentList!==e&&(this.currentList=e,this.listComponent.setModel({getRowCount:function(){return e.length},getRow:function(t){return e[t]},areRowsEqual:function(t,e){return t===e}}),o&&(this.values?this.listComponent.refresh(!0):(this.values=e,this.isPickerDisplayed&&this.showCurrentValueInPicker())))},e.prototype.showPicker=function(){t.prototype.showPicker.call(this),this.showCurrentValueInPicker(),this.displayOrHidePicker()},e.prototype.showCurrentValueInPicker=function(){var t,e;if(this.listComponent)if(this.currentList){(null===(t=this.eLoading)||void 0===t?void 0:t.offsetParent)&&(null===(e=this.eLoading.parentElement)||void 0===e||e.removeChild(this.eLoading));var o=this.getCurrentValueIndex();-1!==o?(this.listComponent.refresh(),this.listComponent.ensureIndexVisible(o),this.listComponent.refresh(!0),this.highlightSelectedValue(o)):this.listComponent.refresh()}else this.isPickerDisplayed&&this.eLoading&&this.listComponent.appendChild(this.eLoading)},e.prototype.beforeHidePicker=function(){this.highlightedItem=-1,t.prototype.beforeHidePicker.call(this)},e.prototype.onWrapperFocus=function(){if(this.eInput){var t=this.eInput.getFocusableElement();t.focus(),t.select()}},e.prototype.onWrapperFocusOut=function(t){this.eWrapper.contains(t.relatedTarget)||this.hidePicker()},e.prototype.buildSearchStringFromKeyboardEvent=function(t){var e=t.key;if(e===jn.BACKSPACE)this.searchString=this.searchString.slice(0,-1),e="";else if(!Xn(t))return;t.preventDefault(),this.searchTextFromCharacter(e)},e.prototype.searchTextFromCharacter=function(t){this.searchString+=t,this.runSearch(),this.clearSearchString()},e.prototype.searchTextFromString=function(t){null==t&&(t=""),this.searchString=t,this.runSearch()},e.prototype.buildSearchStrings=function(t){var e,o=this.config.valueFormatter,n=void 0===o?function(t){return t}:o;return"number"===typeof t[0]||"string"===typeof t[0]?e=t.map(function(t){return n(t)}):"object"===typeof t[0]&&this.searchStringCreator&&(e=this.searchStringCreator(t)),e},e.prototype.getSuggestionsAndFilteredValues=function(t,e){var o=this,n=[],r=[];if(!t.length)return{suggestions:n,filteredValues:r};var i=this.config,a=i.searchType,s=void 0===a?"fuzzy":a,l=i.filterList;if("fuzzy"===s){var u=Nn(this.searchString,e,!0);n=u.values;var c=u.indices;if(l&&c.length)for(var p=0;p<c.length;p++)r.push(this.values[c[p]])}else n=e.filter(function(t,e){var n=t.toLocaleLowerCase(),i=o.searchString.toLocaleLowerCase(),a="match"===s?n.startsWith(i):-1!==n.indexOf(i);return l&&a&&r.push(o.values[e]),a});return{suggestions:n,filteredValues:r}},e.prototype.filterListModel=function(t){this.config.filterList&&(this.setValueList({valueList:t,refresh:!0}),this.alignPickerToComponent())},e.prototype.runSearch=function(){var t,e,o=this.values,n=this.buildSearchStrings(o);if(n){var r=this.getSuggestionsAndFilteredValues(this.searchString,n),i=r.suggestions,a=r.filteredValues,s=this.config,l=s.filterList,u=s.highlightMatch,c=s.searchType,p=void 0===c?"fuzzy":c,d=a.length,h=!(!l||""===this.searchString);if(this.filterListModel(h?a:o),i.length){var f=h?0:n.indexOf(i[0]);this.selectListItem(f)}else if(this.highlightSelectedValue(-1),!h||d)null===(t=this.listComponent)||void 0===t||t.ensureIndexVisible(0);else if(h){this.getAriaElement().removeAttribute("data-active-option");var g=null===(e=this.listComponent)||void 0===e?void 0:e.getAriaElement();g&&Ze(g,null)}u&&"fuzzy"!==p&&this.highlightFilterMatch(),this.displayOrHidePicker()}else this.highlightSelectedValue(-1)},e.prototype.displayOrHidePicker=function(){var t,e=null===(t=this.listComponent)||void 0===t?void 0:t.getGui(),o=!!this.currentList&&0===this.currentList.length;null===e||void 0===e||e.classList.toggle("ag-hidden",o)},e.prototype.clearSearchString=function(){this.searchString=""},e.prototype.selectListItem=function(t,e){!this.isPickerDisplayed||!this.currentList||!this.listComponent||t<0||t>=this.currentList.length||(this.listComponent.ensureIndexVisible(t,!e)&&!e&&this.listComponent.refresh(!0),this.highlightSelectedValue(t))},e.prototype.setValue=function(e,o,n){var r=this.currentList?this.currentList.indexOf(e):-1;return-1===r?this:(this.value=e,n||this.selectListItem(r),this.renderSelectedValue(),t.prototype.setValue.call(this,e,o))},e.prototype.createRowComponent=function(t){var e=new _h(this.config,this.eWrapper);e.setParentComponent(this.listComponent),this.getContext().createBean(e),e.setState(t);var o=this.config,n=o.highlightMatch,r=o.searchType;return n&&"fuzzy"!==(void 0===r?"fuzzy":r)&&e.highlightString(this.searchString),e},e.prototype.getRowForMouseEvent=function(t){var e=this.listComponent;if(!e)return-1;var o=(null===e||void 0===e?void 0:e.getGui()).getBoundingClientRect(),n=e.getScrollTop(),r=t.clientY-o.top+n;return Math.floor(r/e.getRowHeight())},e.prototype.onPickerMouseMove=function(t){if(this.listComponent){var e=this.getRowForMouseEvent(t);-1!==e&&e!=this.lastRowHovered&&(this.lastRowHovered=e,this.selectListItem(e,!0))}},e.prototype.onNavigationKeyDown=function(t,e){t.preventDefault();var o=e===jn.DOWN;if(this.isPickerDisplayed||!o){var n=this.highlightedItem,r=-1===n?0:n+(o?1:-1);this.selectListItem(r)}else this.showPicker()},e.prototype.onEnterKeyDown=function(t){this.isPickerDisplayed&&(t.preventDefault(),this.currentList&&this.onListValueSelected(this.currentList[this.highlightedItem],!0))},e.prototype.onTabKeyDown=function(){this.isPickerDisplayed&&this.currentList&&this.setValue(this.currentList[this.highlightedItem],!1,!0)},e.prototype.onListValueSelected=function(t,e){this.setValue(t,!1,!0),this.dispatchPickerEvent(t,e),this.hidePicker()},e.prototype.dispatchPickerEvent=function(t,e){var o={type:qt.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:e,value:t};this.dispatchEvent(o)},e.prototype.getFocusableElement=function(){return this.config.allowTyping?this.eInput.getFocusableElement():t.prototype.getFocusableElement.call(this)},e.prototype.onKeyDown=function(t){var e=t.key,o=this.config.allowTyping;switch(e){case jn.LEFT:case jn.RIGHT:case jn.PAGE_HOME:case jn.PAGE_END:o||t.preventDefault();break;case jn.PAGE_UP:case jn.PAGE_DOWN:t.preventDefault();break;case jn.DOWN:case jn.UP:this.onNavigationKeyDown(t,e);break;case jn.ESCAPE:this.isPickerDisplayed&&(gn(this.listComponent.getGui())&&(t.preventDefault(),At(t)),this.hidePicker());break;case jn.ENTER:this.onEnterKeyDown(t);break;case jn.TAB:this.onTabKeyDown();break;default:o||this.buildSearchStringFromKeyboardEvent(t)}},e.prototype.destroy=function(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),this.eLoading=void 0,t.prototype.destroy.call(this)},Th([J("userComponentFactory")],e.prototype,"userComponentFactory",void 0),Th([xr("eInput")],e.prototype,"eInput",void 0),e}(Qr),Ph=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ah=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Dh=function(t){function e(o){var n=t.call(this,o,e.TEMPLATE)||this;return n.labelAlignment="top",n}return Ph(e,t),e.prototype.init=function(){this.eSlider.addCssClass("ag-slider-field")},e.prototype.onValueChange=function(t){var e=this,o=qt.EVENT_FIELD_VALUE_CHANGED;return this.addManagedListener(this.eText,o,function(){var o=parseFloat(e.eText.getValue());e.eSlider.setValue(o.toString(),!0),t(o||0)}),this.addManagedListener(this.eSlider,o,function(){var o=e.eSlider.getValue();e.eText.setValue(o,!0),t(parseFloat(o))}),this},e.prototype.setSliderWidth=function(t){return this.eSlider.setWidth(t),this},e.prototype.setTextFieldWidth=function(t){return this.eText.setWidth(t),this},e.prototype.setMinValue=function(t){return this.eSlider.setMinValue(t),this.eText.setMin(t),this},e.prototype.setMaxValue=function(t){return this.eSlider.setMaxValue(t),this.eText.setMax(t),this},e.prototype.getValue=function(){return this.eText.getValue()},e.prototype.setValue=function(t){return this.getValue()===t?this:(this.eText.setValue(t,!0),this.eSlider.setValue(t,!0),this.dispatchEvent({type:qt.EVENT_FIELD_VALUE_CHANGED}),this)},e.prototype.setStep=function(t){return this.eSlider.setStep(t),this.eText.setStep(t),this},e.TEMPLATE='<div class="ag-slider">\n            <label ref="eLabel"></label>\n            <div class="ag-wrapper ag-slider-wrapper">\n                <ag-input-range ref="eSlider"></ag-input-range>\n                <ag-input-number-field ref="eText"></ag-input-number-field>\n            </div>\n        </div>',Ah([xr("eLabel")],e.prototype,"eLabel",void 0),Ah([xr("eSlider")],e.prototype,"eSlider",void 0),Ah([xr("eText")],e.prototype,"eText",void 0),Ah([Y],e.prototype,"init",null),e}(Kr),Mh=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ih=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Lh=function(t){function e(o){void 0===o&&(o={});var n=t.call(this,e.getTemplate(o))||this;n.suppressEnabledCheckbox=!0,n.suppressOpenCloseIcons=!1;var r=o.title,i=o.enabled,a=o.items,s=o.suppressEnabledCheckbox,l=o.suppressOpenCloseIcons;return n.title=r,n.cssIdentifier=o.cssIdentifier||"default",n.enabled=null==i||i,n.items=a||[],n.alignItems=o.alignItems||"center",null!=s&&(n.suppressEnabledCheckbox=s),null!=l&&(n.suppressOpenCloseIcons=l),n}return Mh(e,t),e.getTemplate=function(t){var e=t.cssIdentifier||"default",o=t.direction||"vertical";return'<div class="ag-group ag-'.concat(e,'-group" role="presentation">\n            <div class="ag-group-title-bar ag-').concat(e,'-group-title-bar ag-unselectable" ref="eTitleBar" role="button">\n                <span class="ag-group-title-bar-icon ag-').concat(e,'-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>\n                <span class="ag-group-title-bar-icon ag-').concat(e,'-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>\n                <span ref="eTitle" class="ag-group-title ag-').concat(e,'-group-title"></span>\n            </div>\n            <div ref="eToolbar" class="ag-group-toolbar ag-').concat(e,'-group-toolbar">\n                <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>\n            </div>\n            <div ref="eContainer" class="ag-group-container ag-group-container-').concat(o," ag-").concat(e,'-group-container"></div>\n        </div>')},e.prototype.postConstruct=function(){if(this.items.length){var t=this.items;this.items=[],this.addItems(t)}var e=this.localeService.getLocaleTextFunc();this.cbGroupEnabled.setLabel(e("enabled","Enabled")),this.title&&this.setTitle(this.title),this.enabled&&this.setEnabled(this.enabled),this.setAlignItems(this.alignItems),this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract(),this.refreshAriaStatus(),this.refreshChildDisplay()},e.prototype.setupExpandContract=function(){var t=this;this.eGroupClosedIcon.appendChild(Bn("columnSelectClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(Bn("columnSelectOpen",this.gridOptionsService,null)),this.addManagedListener(this.eTitleBar,"click",function(){return t.toggleGroupExpand()}),this.addManagedListener(this.eTitleBar,"keydown",function(e){switch(e.key){case jn.ENTER:case jn.SPACE:e.preventDefault(),t.toggleGroupExpand();break;case jn.RIGHT:case jn.LEFT:e.preventDefault(),t.toggleGroupExpand(e.key===jn.RIGHT)}})},e.prototype.refreshAriaStatus=function(){this.suppressOpenCloseIcons||Xe(this.eTitleBar,this.expanded)},e.prototype.refreshChildDisplay=function(){var t=!this.suppressOpenCloseIcons;Qo(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),Qo(this.eGroupOpenedIcon,t&&this.expanded),Qo(this.eGroupClosedIcon,t&&!this.expanded)},e.prototype.isExpanded=function(){return this.expanded},e.prototype.setAlignItems=function(t){this.alignItems!==t&&this.removeCssClass("ag-group-item-alignment-".concat(this.alignItems)),this.alignItems=t;var e="ag-group-item-alignment-".concat(this.alignItems);return this.addCssClass(e),this},e.prototype.toggleGroupExpand=function(t){return this.suppressOpenCloseIcons?(this.expanded=!0,this.refreshChildDisplay(),Qo(this.eContainer,!0),this):(t=null!=t?t:!this.expanded,this.expanded===t?this:(this.expanded=t,this.refreshAriaStatus(),this.refreshChildDisplay(),Qo(this.eContainer,t),this.dispatchEvent({type:this.expanded?e.EVENT_EXPANDED:e.EVENT_COLLAPSED}),this))},e.prototype.addItems=function(t){var e=this;t.forEach(function(t){return e.addItem(t)})},e.prototype.prependItem=function(t){this.insertItem(t,this.eContainer.firstChild)},e.prototype.addItem=function(t){this.insertItem(t,null)},e.prototype.insertItem=function(t,e){var o=this.eContainer,n=t instanceof Sr?t.getGui():t;n.classList.add("ag-group-item","ag-".concat(this.cssIdentifier,"-group-item")),o.insertBefore(n,e),this.items.push(n)},e.prototype.hideItem=function(t,e){Qo(this.items[e],!t)},e.prototype.setTitle=function(t){return this.eTitle.innerText=t,this},e.prototype.addCssClassToTitleBar=function(t){this.eTitleBar.classList.add(t)},e.prototype.setEnabled=function(t,e){return this.enabled=t,this.refreshDisabledStyles(),this.toggleGroupExpand(t),e||this.cbGroupEnabled.setValue(t),this},e.prototype.isEnabled=function(){return this.enabled},e.prototype.onEnableChange=function(t){var e=this;return this.cbGroupEnabled.onValueChange(function(o){e.setEnabled(o,!0),t(o)}),this},e.prototype.hideEnabledCheckbox=function(t){return this.suppressEnabledCheckbox=t,this.refreshChildDisplay(),this.refreshDisabledStyles(),this},e.prototype.hideOpenCloseIcons=function(t){return this.suppressOpenCloseIcons=t,t&&this.toggleGroupExpand(!0),this},e.prototype.refreshDisabledStyles=function(){this.addOrRemoveCssClass("ag-disabled",!this.enabled),this.suppressEnabledCheckbox&&!this.enabled?(this.eTitleBar.classList.add("ag-disabled-group-title-bar"),this.eTitleBar.removeAttribute("tabindex")):(this.eTitleBar.classList.remove("ag-disabled-group-title-bar"),this.eTitleBar.setAttribute("tabindex","0")),this.eContainer.classList.toggle("ag-disabled-group-container",!this.enabled)},e.EVENT_EXPANDED="expanded",e.EVENT_COLLAPSED="collapsed",Ih([xr("eTitleBar")],e.prototype,"eTitleBar",void 0),Ih([xr("eGroupOpenedIcon")],e.prototype,"eGroupOpenedIcon",void 0),Ih([xr("eGroupClosedIcon")],e.prototype,"eGroupClosedIcon",void 0),Ih([xr("eToolbar")],e.prototype,"eToolbar",void 0),Ih([xr("cbGroupEnabled")],e.prototype,"cbGroupEnabled",void 0),Ih([xr("eTitle")],e.prototype,"eTitle",void 0),Ih([xr("eContainer")],e.prototype,"eContainer",void 0),Ih([Y],e.prototype,"postConstruct",null),e}(Sr),Fh=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Nh=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},kh=function(t){function e(e,o){void 0===e&&(e=0);var n=t.call(this,'<div class="ag-menu-list" role="tree"></div>')||this;return n.level=e,n.menuItems=[],n.params=null!==o&&void 0!==o?o:{column:null,node:null,value:null},n}return Fh(e,t),e.prototype.postConstruct=function(){var t=this;this.initialiseTabGuard({onTabKeyDown:function(e){return t.onTabKeyDown(e)},handleKeyDown:function(e){return t.handleKeyDown(e)},onFocusIn:function(e){return t.handleFocusIn(e)},onFocusOut:function(e){return t.handleFocusOut(e)}})},e.prototype.onTabKeyDown=function(t){var e=this.getParentComponent(),o=e&&e.getGui();o&&o.classList.contains("ag-focus-managed")||t.preventDefault(),t.shiftKey&&this.closeIfIsChild(t)},e.prototype.handleKeyDown=function(t){switch(t.key){case jn.UP:case jn.RIGHT:case jn.DOWN:case jn.LEFT:t.preventDefault(),this.handleNavKey(t.key);break;case jn.ESCAPE:this.closeIfIsChild()&&At(t)}},e.prototype.handleFocusIn=function(t){var e,o,n=t.relatedTarget;!this.tabGuardCtrl.isTabGuard(n)&&(this.getGui().contains(n)||(null===(o=null===(e=this.activeMenuItem)||void 0===e?void 0:e.getSubMenuGui())||void 0===o?void 0:o.contains(n)))||(this.activeMenuItem?this.activeMenuItem.activate():this.activateFirstItem())},e.prototype.handleFocusOut=function(t){var e,o=t.relatedTarget;!this.activeMenuItem||this.getGui().contains(o)||null!==(e=this.activeMenuItem.getSubMenuGui())&&void 0!==e&&e.contains(o)||this.activeMenuItem.isSubMenuOpening()||this.activeMenuItem.deactivate()},e.prototype.clearActiveItem=function(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)},e.prototype.addMenuItems=function(t){var e=this;null!=t&&hr.all(t.map(function(t){return"separator"===t?hr.resolve({eGui:e.createSeparator()}):"string"===typeof t?(console.warn("AG Grid: unrecognised menu item ".concat(t)),hr.resolve({eGui:null})):e.addItem(t)})).then(function(t){t.forEach(function(t){(null===t||void 0===t?void 0:t.eGui)&&(e.appendChild(t.eGui),t.comp&&e.menuItems.push(t.comp))})})},e.prototype.addItem=function(t){var e=this,o=this.createManagedBean(new Uh);return o.init({menuItemDef:t,isAnotherSubMenuOpen:function(){return e.menuItems.some(function(t){return t.isSubMenuOpen()})},level:this.level,contextParams:this.params}).then(function(){return o.setParentComponent(e),e.addManagedListener(o,Uh.EVENT_CLOSE_MENU,function(t){e.dispatchEvent(t)}),e.addManagedListener(o,Uh.EVENT_MENU_ITEM_ACTIVATED,function(t){e.activeMenuItem&&e.activeMenuItem!==t.menuItem&&e.activeMenuItem.deactivate(),e.activeMenuItem=t.menuItem}),{comp:o,eGui:o.getGui()}})},e.prototype.activateFirstItem=function(){var t=this.menuItems.filter(function(t){return!t.isDisabled()})[0];t&&t.activate()},e.prototype.createSeparator=function(){return yn('\n            <div class="ag-menu-separator" aria-hidden="true">\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n            </div>')},e.prototype.handleNavKey=function(t){switch(t){case jn.UP:case jn.DOWN:var e=this.findNextItem(t===jn.UP);return void(e&&e!==this.activeMenuItem&&e.activate())}t===(this.gridOptionsService.get("enableRtl")?jn.RIGHT:jn.LEFT)?this.closeIfIsChild():this.openChild()},e.prototype.closeIfIsChild=function(t){var e=this.getParentComponent();return!!(e&&e instanceof Uh)&&(t&&t.preventDefault(),e.closeSubMenu(),e.getGui().focus(),!0)},e.prototype.openChild=function(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)},e.prototype.findNextItem=function(t){var e=this.menuItems.filter(function(t){return!t.isDisabled()});if(e.length){if(!this.activeMenuItem)return t?ft(e):e[0];var o;t&&e.reverse();for(var n=!1,r=0;r<e.length;r++){var i=e[r];if(n){o=i;break}i===this.activeMenuItem&&(n=!0)}return n&&!o?e[0]:o||this.activeMenuItem}},e.prototype.destroy=function(){this.clearActiveItem(),t.prototype.destroy.call(this)},Nh([J("focusService")],e.prototype,"focusService",void 0),Nh([Y],e.prototype,"postConstruct",null),e}(pd),Gh=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Vh=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Bh=function(t){function e(e){var o=t.call(this)||this;return o.wrappedComponent=e,o.setTemplateFromElement(e.getGui()),o}return Gh(e,t),e.prototype.postConstruct=function(){var t=this;this.initialiseTabGuard({onTabKeyDown:function(e){return t.onTabKeyDown(e)},handleKeyDown:function(e){return t.handleKeyDown(e)}})},e.prototype.handleKeyDown=function(t){t.key===jn.ESCAPE&&this.closePanel()},e.prototype.onTabKeyDown=function(t){t.defaultPrevented||(this.closePanel(),t.preventDefault())},e.prototype.closePanel=function(){var t=this.parentComponent;t.closeSubMenu(),setTimeout(function(){return t.getGui().focus()},0)},Vh([Y],e.prototype,"postConstruct",null),e}(pd),zh=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Hh=function(){return(Hh=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},jh=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Uh=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isActive=!1,e.subMenuIsOpen=!1,e.subMenuIsOpening=!1,e.suppressRootStyles=!0,e.suppressAria=!0,e.suppressFocus=!0,e}return zh(e,t),e.prototype.init=function(t){var e,o,n=this,r=t.menuItemDef,i=t.isAnotherSubMenuOpen,a=t.level,s=t.childComponent,l=t.contextParams;return this.params=t.menuItemDef,this.level=a,this.isAnotherSubMenuOpen=i,this.childComponent=s,this.contextParams=l,this.cssClassPrefix=null!==(o=null===(e=this.params.menuItemParams)||void 0===e?void 0:e.cssClassPrefix)&&void 0!==o?o:"ag-menu-option",this.userComponentFactory.getMenuItemCompDetails(this.params,Hh(Hh({},r),{level:a,isAnotherSubMenuOpen:i,openSubMenu:function(t){return n.openSubMenu(t)},closeSubMenu:function(){return n.closeSubMenu()},closeMenu:function(t){return n.closeMenu(t)},updateTooltip:function(t){return n.updateTooltip(t)},onItemActivated:function(){return n.onItemActivated()}})).newAgStackInstance().then(function(t){var e;n.menuItemComp=t;var o=null===(e=t.configureDefaults)||void 0===e?void 0:e.call(t);o&&n.configureDefaults(!0===o?void 0:o)})},e.prototype.addListeners=function(t,e){var o=this;(null===e||void 0===e?void 0:e.suppressClick)||this.addManagedListener(t,"click",function(t){return o.onItemSelected(t)}),(null===e||void 0===e?void 0:e.suppressKeyboardSelect)||this.addManagedListener(t,"keydown",function(t){t.key!==jn.ENTER&&t.key!==jn.SPACE||(t.preventDefault(),o.onItemSelected(t))}),(null===e||void 0===e?void 0:e.suppressMouseDown)||this.addManagedListener(t,"mousedown",function(t){t.stopPropagation(),t.preventDefault()}),(null===e||void 0===e?void 0:e.suppressMouseOver)||(this.addManagedListener(t,"mouseenter",function(){return o.onMouseEnter()}),this.addManagedListener(t,"mouseleave",function(){return o.onMouseLeave()}))},e.prototype.isDisabled=function(){return!!this.params.disabled},e.prototype.openSubMenu=function(t){var o,n,r=this;if(void 0===t&&(t=!1),this.closeSubMenu(),this.params.subMenu){this.subMenuIsOpening=!0;var i,a=yn('<div class="ag-menu" role="presentation"></div>');this.eSubMenuGui=a;var s=function(){r.subMenuIsOpening=!1};if(this.childComponent){var l=this.createBean(new Bh(this.childComponent));l.setParentComponent(this);var u=l.getGui(),c=function(){return r.cancelDeactivate()};u.addEventListener("mouseenter",c),i=function(){return u.removeEventListener("mouseenter",c)},a.appendChild(u),this.childComponent.afterGuiAttached&&(s=function(){r.childComponent.afterGuiAttached(),r.subMenuIsOpening=!1})}else if(this.params.subMenu){var p=this.createBean(new kh(this.level+1,this.contextParams));p.setParentComponent(this),p.addMenuItems(this.params.subMenu),a.appendChild(p.getGui()),this.addManagedListener(p,e.EVENT_CLOSE_MENU,function(t){return r.dispatchEvent(t)}),p.addGuiEventListener("mouseenter",function(){return r.cancelDeactivate()}),i=function(){return r.destroyBean(p)},t&&(s=function(){p.activateFirstItem(),r.subMenuIsOpening=!1})}var d=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:this.eGui,ePopup:a}),h=this.localeService.getLocaleTextFunc(),f=this.popupService.addPopup({modal:!0,eChild:a,positionCallback:d,anchorToElement:this.eGui,ariaLabel:h("ariaLabelSubMenu","SubMenu"),afterGuiAttached:s});this.subMenuIsOpen=!0,this.setAriaExpanded(!0),this.hideSubMenu=function(){var t,e;f&&f.hideFunc(),r.subMenuIsOpen=!1,r.setAriaExpanded(!1),i(),null===(e=(t=r.menuItemComp).setExpanded)||void 0===e||e.call(t,!1),r.eSubMenuGui=void 0},null===(n=(o=this.menuItemComp).setExpanded)||void 0===n||n.call(o,!0)}},e.prototype.setAriaExpanded=function(t){this.suppressAria||Xe(this.eGui,t)},e.prototype.closeSubMenu=function(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,this.setAriaExpanded(!1))},e.prototype.isSubMenuOpen=function(){return this.subMenuIsOpen},e.prototype.isSubMenuOpening=function(){return this.subMenuIsOpening},e.prototype.activate=function(t){var e,o,n=this;this.cancelActivate(),this.params.disabled||(this.isActive=!0,this.suppressRootStyles||this.eGui.classList.add("".concat(this.cssClassPrefix,"-active")),null===(o=(e=this.menuItemComp).setActive)||void 0===o||o.call(e,!0),this.suppressFocus||this.eGui.focus({preventScroll:!0}),t&&this.params.subMenu&&window.setTimeout(function(){n.isAlive()&&n.isActive&&n.openSubMenu()},300),this.onItemActivated())},e.prototype.deactivate=function(){var t,e;this.cancelDeactivate(),this.suppressRootStyles||this.eGui.classList.remove("".concat(this.cssClassPrefix,"-active")),null===(e=(t=this.menuItemComp).setActive)||void 0===e||e.call(t,!1),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()},e.prototype.getGui=function(){return this.menuItemComp.getGui()},e.prototype.getParentComponent=function(){return this.parentComponent},e.prototype.setParentComponent=function(t){this.parentComponent=t},e.prototype.getSubMenuGui=function(){return this.eSubMenuGui},e.prototype.onItemSelected=function(t){var e,o,n=this;null===(o=(e=this.menuItemComp).select)||void 0===o||o.call(e),this.params.action?this.getFrameworkOverrides().wrapOutgoing(function(){return n.params.action(n.gridOptionsService.addGridCommonParams(Hh({},n.contextParams)))}):this.openSubMenu(t&&"keydown"===t.type),this.params.subMenu&&!this.params.action||this.params.suppressCloseOnSelect||this.closeMenu(t)},e.prototype.closeMenu=function(t){var o={type:e.EVENT_CLOSE_MENU,event:t};this.dispatchEvent(o)},e.prototype.onItemActivated=function(){var t={type:e.EVENT_MENU_ITEM_ACTIVATED,menuItem:this};this.dispatchEvent(t)},e.prototype.cancelActivate=function(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)},e.prototype.cancelDeactivate=function(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)},e.prototype.onMouseEnter=function(){var t=this;this.cancelDeactivate(),this.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(function(){return t.activate(!0)},e.ACTIVATION_DELAY):this.activate(!0)},e.prototype.onMouseLeave=function(){var t=this;this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(function(){return t.deactivate()},e.ACTIVATION_DELAY):this.deactivate()},e.prototype.configureDefaults=function(t){var e,o,n,r=this;if(this.tooltip=this.params.tooltip,this.menuItemComp){var i=this.menuItemComp.getGui(),a=null===(o=(e=this.menuItemComp).getRootElement)||void 0===o?void 0:o.call(e);a&&((null===t||void 0===t?void 0:t.suppressRootStyles)||i.classList.add("ag-menu-option-custom"),i=a),this.eGui=i,this.suppressRootStyles=!!(null===t||void 0===t?void 0:t.suppressRootStyles),this.suppressRootStyles||(i.classList.add(this.cssClassPrefix),null===(n=this.params.cssClasses)||void 0===n||n.forEach(function(t){return i.classList.add(t)}),this.params.disabled&&i.classList.add("".concat(this.cssClassPrefix,"-disabled"))),(null===t||void 0===t?void 0:t.suppressTooltip)||this.setTooltip(),this.suppressAria=!!(null===t||void 0===t?void 0:t.suppressAria),this.suppressAria||(ke(i,"treeitem"),Ke(i,this.level+1),this.params.disabled&&qe(i,!0)),(null===t||void 0===t?void 0:t.suppressTabIndex)||i.setAttribute("tabindex","-1"),this.params.disabled||this.addListeners(i,t),this.suppressFocus=!!(null===t||void 0===t?void 0:t.suppressFocus)}else setTimeout(function(){return r.configureDefaults(t)})},e.prototype.updateTooltip=function(t){this.tooltip=t,!this.tooltipFeature&&this.menuItemComp&&this.setTooltip()},e.prototype.setTooltip=function(){var t=this;this.tooltip&&(this.tooltipFeature=this.createManagedBean(new iu({getGui:function(){return t.getGui()},getTooltipValue:function(){return t.tooltip},getLocation:function(){return"menu"}},this.beans)),this.tooltipFeature.setComp(this.getGui()))},e.EVENT_CLOSE_MENU="closeMenu",e.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated",e.ACTIVATION_DELAY=80,jh([J("popupService")],e.prototype,"popupService",void 0),jh([J("userComponentFactory")],e.prototype,"userComponentFactory",void 0),jh([J("beans")],e.prototype,"beans",void 0),e}(Bt),Wh=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Kh=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},qh=function(t){function e(o){var n=t.call(this,e.getTemplate(o))||this;return n.config=o,n.closable=!0,n}return Wh(e,t),e.getTemplate=function(t){var e=t.cssIdentifier||"default";return'<div class="ag-panel ag-'.concat(e,'-panel" tabindex="-1">\n            <div ref="eTitleBar" class="ag-panel-title-bar ag-').concat(e,'-panel-title-bar ag-unselectable">\n                <span ref="eTitle" class="ag-panel-title-bar-title ag-').concat(e,'-panel-title-bar-title"></span>\n                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-').concat(e,'-panel-title-bar-buttons"></div>\n            </div>\n            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-').concat(e,'-panel-content-wrapper"></div>\n        </div>')},e.prototype.postConstruct=function(){var t=this,e=this.config,o=e.component,n=e.closable,r=e.hideTitleBar,i=e.title,a=e.minWidth,s=void 0===a?250:a,l=e.width,u=e.minHeight,c=void 0===u?250:u,p=e.height,d=e.centered,h=e.popup,f=e.x,g=e.y;this.positionableFeature=new Br(this.getGui(),{minWidth:s,width:l,minHeight:c,height:p,centered:d,x:f,y:g,popup:h,calculateTopBuffer:function(){return t.positionableFeature.getHeight()-t.getBodyHeight()}}),this.createManagedBean(this.positionableFeature);var y=this.getGui();o&&this.setBodyComponent(o),r?Qo(this.eTitleBar,!1):(i&&this.setTitle(i),this.setClosable(null!=n?n:this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",function(e){var o=t.gridOptionsService.getDocument();if(y.contains(e.relatedTarget)||y.contains(o.activeElement)||t.eTitleBarButtons.contains(e.target))e.preventDefault();else{var n=t.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");n&&n.focus()}}),h&&this.positionableFeature.isPositioned()||(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")},e.prototype.renderComponent=function(){var t=this,e=this.getGui();e.focus(),this.close=function(){e.parentElement.removeChild(e),t.destroy()}},e.prototype.getHeight=function(){return this.positionableFeature.getHeight()},e.prototype.setHeight=function(t){this.positionableFeature.setHeight(t)},e.prototype.getWidth=function(){return this.positionableFeature.getWidth()},e.prototype.setWidth=function(t){this.positionableFeature.setWidth(t)},e.prototype.setClosable=function(t){if(t!==this.closable&&(this.closable=t),t){var o=this.closeButtonComp=new Sr(e.CLOSE_BTN_TEMPLATE);this.getContext().createBean(o);var n=o.getGui(),r=zn("close",this.gridOptionsService);r.classList.add("ag-panel-title-bar-button-icon"),n.appendChild(r),this.addTitleBarButton(o),o.addManagedListener(n,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){(n=this.closeButtonComp.getGui()).parentElement.removeChild(n),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}},e.prototype.setBodyComponent=function(t){t.setParentComponent(this),this.eContentWrapper.appendChild(t.getGui())},e.prototype.addTitleBarButton=function(t,e){var o=this.eTitleBarButtons,n=o.children,r=n.length;null==e&&(e=r),e=Math.max(0,Math.min(e,r)),t.addCssClass("ag-panel-title-bar-button");var i=t.getGui();0===e?o.insertAdjacentElement("afterbegin",i):e===r?o.insertAdjacentElement("beforeend",i):n[e-1].insertAdjacentElement("afterend",i),t.setParentComponent(this)},e.prototype.getBodyHeight=function(){return nn(this.eContentWrapper)},e.prototype.getBodyWidth=function(){return rn(this.eContentWrapper)},e.prototype.setTitle=function(t){this.eTitle.innerText=t},e.prototype.onBtClose=function(){this.close()},e.prototype.destroy=function(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));var e=this.getGui();e&&gn(e)&&this.close(),t.prototype.destroy.call(this)},e.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>',Kh([xr("eContentWrapper")],e.prototype,"eContentWrapper",void 0),Kh([xr("eTitleBar")],e.prototype,"eTitleBar",void 0),Kh([xr("eTitleBarButtons")],e.prototype,"eTitleBarButtons",void 0),Kh([xr("eTitle")],e.prototype,"eTitle",void 0),Kh([Y],e.prototype,"postConstruct",null),e}(Sr),Yh=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Zh=function(){return(Zh=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Xh=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Jh=function(t){function e(e){var o=t.call(this,Zh(Zh({},e),{popup:!0}))||this;return o.isMaximizable=!1,o.isMaximized=!1,o.maximizeListeners=[],o.resizeListenerDestroy=null,o.lastPosition={x:0,y:0,width:0,height:0},o}return Yh(e,t),e.prototype.postConstruct=function(){var e=this,o=this.getGui(),n=this.config,r=n.movable,i=n.resizable,a=n.maximizable;this.addCssClass("ag-dialog"),t.prototype.postConstruct.call(this),this.addManagedListener(o,"focusin",function(t){o.contains(t.relatedTarget)||e.popupService.bringPopupToFront(o)}),r&&this.setMovable(r),a&&this.setMaximizable(a),i&&this.setResizable(i)},e.prototype.renderComponent=function(){var t=this.getGui(),e=this.config,o=e.alwaysOnTop,n=e.modal,r=e.title,i=e.afterGuiAttached,a=this.localeService.getLocaleTextFunc(),s=this.popupService.addPopup({modal:n,eChild:t,closeOnEsc:!0,closedCallback:this.onClosed.bind(this),alwaysOnTop:o,ariaLabel:r||a("ariaLabelDialog","Dialog"),afterGuiAttached:i});s&&(this.close=s.hideFunc)},e.prototype.onClosed=function(t){var e,o;this.destroy(),null===(o=(e=this.config).closedCallback)||void 0===o||o.call(e,t)},e.prototype.toggleMaximize=function(){var t=this.positionableFeature.getPosition();if(this.isMaximized){var e=this.lastPosition,o=e.x,n=e.y,r=e.width,i=e.height;this.setWidth(r),this.setHeight(i),this.positionableFeature.offsetElement(o,n)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=t.x,this.lastPosition.y=t.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()},e.prototype.refreshMaximizeIcon=function(){Qo(this.maximizeIcon,!this.isMaximized),Qo(this.minimizeIcon,this.isMaximized)},e.prototype.clearMaximizebleListeners=function(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(function(t){return t()}),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)},e.prototype.destroy=function(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),t.prototype.destroy.call(this)},e.prototype.setResizable=function(t){this.positionableFeature.setResizable(t)},e.prototype.setMovable=function(t){this.positionableFeature.setMovable(t,this.eTitleBar)},e.prototype.setMaximizable=function(t){var e=this;if(!t)return this.clearMaximizebleListeners(),void(this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0));var o=this.eTitleBar;if(o&&t!==this.isMaximizable){var n=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),n.addManagedListener(n.getGui(),"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(n,0),this.maximizeListeners.push(this.addManagedListener(o,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",function(){e.isMaximized=!1,e.refreshMaximizeIcon()})}},e.prototype.buildMaximizeAndMinimizeElements=function(){var t=this.maximizeButtonComp=this.createBean(new Sr('<div class="ag-dialog-button"></span>')),e=t.getGui();return this.maximizeIcon=zn("maximize",this.gridOptionsService),e.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=zn("minimize",this.gridOptionsService),e.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),t},Xh([J("popupService")],e.prototype,"popupService",void 0),e}(qh),Qh=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),$h=function(){return($h=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},tf=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},ef=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},of=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},nf=function(t){var e="function"===typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};!function(t){t[t.vertical=0]="vertical",t[t.horizontal=1]="horizontal"}(Xd||(Xd={}));var rf=0,af=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.popupList=[],e}var o;return Qh(e,t),o=e,e.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady(function(e){t.gridCtrl=e.gridCtrl}),this.addManagedListener(this.eventService,qt.EVENT_GRID_STYLES_CHANGED,this.handleThemeChange.bind(this))},e.prototype.getPopupParent=function(){var t=this.gridOptionsService.get("popupParent");return t||this.gridCtrl.getGui()},e.prototype.positionPopupForMenu=function(t){var e=t.eventSource,o=t.ePopup,n=this.getPopupIndex(o);-1!==n&&(this.popupList[n].alignedToElement=e);var r=e.getBoundingClientRect(),i=this.getParentRect(),a=this.keepXYWithinBounds(o,r.top-i.top,Xd.vertical),s=o.clientWidth>0?o.clientWidth:200;o.style.minWidth="".concat(s,"px");var l,u=i.right-i.left-s;function c(){return r.right-i.left-2}function p(){return r.left-i.left-s}this.gridOptionsService.get("enableRtl")?((l=p())<0&&(l=c(),this.setAlignedStyles(o,"left")),l>u&&(l=0,this.setAlignedStyles(o,"right"))):((l=c())>u&&(l=p(),this.setAlignedStyles(o,"right")),l<0&&(l=0,this.setAlignedStyles(o,"left"))),o.style.left="".concat(l,"px"),o.style.top="".concat(a,"px")},e.prototype.positionPopupUnderMouseEvent=function(t){var e=this,o=t.ePopup,n=t.nudgeX,r=t.nudgeY,i=t.skipObserver;this.positionPopup({ePopup:o,nudgeX:n,nudgeY:r,keepWithinBounds:!0,skipObserver:i,updatePosition:function(){return e.calculatePointerAlign(t.mouseEvent)},postProcessCallback:function(){return e.callPostProcessPopup(t.type,t.ePopup,null,t.mouseEvent,t.column,t.rowNode)}})},e.prototype.calculatePointerAlign=function(t){var e=this.getParentRect();return{x:t.clientX-e.left,y:t.clientY-e.top}},e.prototype.positionPopupByComponent=function(t){var e=this,o=t.ePopup,n=t.nudgeX,r=t.nudgeY,i=t.keepWithinBounds,a=t.eventSource,s=t.alignSide,l=void 0===s?"left":s,u=t.position,c=void 0===u?"over":u,p=t.column,d=t.rowNode,h=t.type,f=a.getBoundingClientRect(),g=this.getParentRect(),y=this.getPopupIndex(o);-1!==y&&(this.popupList[y].alignedToElement=a);this.positionPopup({ePopup:o,nudgeX:n,nudgeY:r,keepWithinBounds:i,updatePosition:function(){var n,i=f.left-g.left;"right"===l&&(i-=o.offsetWidth-f.width),"over"===c?(n=f.top-g.top,e.setAlignedStyles(o,"over")):(e.setAlignedStyles(o,"under"),n="under"===e.shouldRenderUnderOrAbove(o,f,g,t.nudgeY||0)?f.top-g.top+f.height:f.top-o.offsetHeight-2*(r||0)-g.top);return{x:i,y:n}},postProcessCallback:function(){return e.callPostProcessPopup(h,o,a,null,p,d)}})},e.prototype.shouldRenderUnderOrAbove=function(t,e,o,n){var r=o.bottom-e.bottom,i=e.top-o.top,a=t.offsetHeight+n;return r>a?"under":i>a||i>r?"above":"under"},e.prototype.setAlignedStyles=function(t,e){var o=this.getPopupIndex(t);if(-1!==o){var n=this.popupList[o].alignedToElement;if(n){["right","left","over","above","under"].forEach(function(e){n.classList.remove("ag-has-popup-positioned-".concat(e)),t.classList.remove("ag-popup-positioned-".concat(e))}),e&&(n.classList.add("ag-has-popup-positioned-".concat(e)),t.classList.add("ag-popup-positioned-".concat(e)))}}},e.prototype.callPostProcessPopup=function(t,e,o,n,r,i){var a=this.gridOptionsService.getCallback("postProcessPopup");a&&a({column:r,rowNode:i,ePopup:e,type:t,eventSource:o,mouseEvent:n})},e.prototype.positionPopup=function(t){var e=this,n=t.ePopup,r=t.keepWithinBounds,i=t.nudgeX,a=t.nudgeY,s=t.skipObserver,l=t.updatePosition,u={width:0,height:0},c=function(o){void 0===o&&(o=!1);var s=l(),c=s.x,p=s.y;o&&n.clientWidth===u.width&&n.clientHeight===u.height||(u.width=n.clientWidth,u.height=n.clientHeight,i&&(c+=i),a&&(p+=a),r&&(c=e.keepXYWithinBounds(n,c,Xd.horizontal),p=e.keepXYWithinBounds(n,p,Xd.vertical)),n.style.left="".concat(c,"px"),n.style.top="".concat(p,"px"),t.postProcessCallback&&t.postProcessCallback())};if(c(),!s){var p=this.resizeObserverService.observeResize(n,function(){return c(!0)});setTimeout(function(){return p()},o.WAIT_FOR_POPUP_CONTENT_RESIZE)}},e.prototype.getActivePopups=function(){return this.popupList.map(function(t){return t.element})},e.prototype.getPopupList=function(){return this.popupList},e.prototype.getParentRect=function(){var t=this.gridOptionsService.getDocument(),e=this.getPopupParent();return e===t.body?e=t.documentElement:"static"===getComputedStyle(e).position&&(e=e.offsetParent),ln(e)},e.prototype.keepXYWithinBounds=function(t,e,o){var n=o===Xd.vertical,r=n?"clientHeight":"clientWidth",i=n?"top":"left",a=n?"offsetHeight":"offsetWidth",s=n?"scrollTop":"scrollLeft",l=this.gridOptionsService.getDocument(),u=l.documentElement,c=this.getPopupParent(),p=c.getBoundingClientRect(),d=l.documentElement.getBoundingClientRect(),h=c===l.body,f=t[a],g=h?(n?an:sn)(u)+u[s]:c[r];h&&(g-=Math.abs(d[i]-p[i]));var y=g-f;return Math.min(Math.max(e,0),Math.abs(y))},e.prototype.addPopup=function(t){var e=this.gridOptionsService.getDocument(),o=t.eChild,n=t.ariaLabel,r=t.alwaysOnTop,i=t.positionCallback,a=t.anchorToElement;if(!e)return console.warn("AG Grid: could not find the document, document is empty"),{hideFunc:function(){}};var s=this.getPopupIndex(o);if(-1!==s)return{hideFunc:this.popupList[s].hideFunc};this.initialisePopupPosition(o);var l=this.createPopupWrapper(o,n,!!r),u=this.addEventListenersToPopup($h($h({},t),{wrapperEl:l}));return i&&i(),this.addPopupToPopupList(o,l,u,a),{hideFunc:u}},e.prototype.initialisePopupPosition=function(t){var e=this.getPopupParent().getBoundingClientRect();r(t.style.top)||(t.style.top="".concat(-1*e.top,"px")),r(t.style.left)||(t.style.left="".concat(-1*e.left,"px"))},e.prototype.createPopupWrapper=function(t,e,o){var n,r=this.getPopupParent(),i=document.createElement("div"),a=this.environment.getTheme().allThemes;return a.length&&(n=i.classList).add.apply(n,of([],ef(a),!1)),i.classList.add("ag-popup"),t.classList.add(this.gridOptionsService.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),t.hasAttribute("role")||ke(t,"dialog"),ze(t,e),i.appendChild(t),r.appendChild(i),o?this.setAlwaysOnTop(t,!0):this.bringPopupToFront(t),i},e.prototype.handleThemeChange=function(){var t,e,o,n,r,i=this.environment.getTheme().allThemes;try{for(var a=nf(this.popupList),s=a.next();!s.done;s=a.next()){var l=s.value;try{for(var u=(o=void 0,nf(Array.from(l.wrapper.classList))),c=u.next();!c.done;c=u.next()){var p=c.value;p.startsWith("ag-theme-")&&l.wrapper.classList.remove(p)}}catch(d){o={error:d}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(o)throw o.error}}i.length&&(r=l.wrapper.classList).add.apply(r,of([],ef(i),!1))}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}},e.prototype.addEventListenersToPopup=function(t){var e=this,o=this.gridOptionsService.getDocument(),n=this.getPopupParent(),r=t.wrapperEl,i=t.eChild;t.click;var a=t.closedCallback,s=t.afterGuiAttached,l=t.closeOnEsc,u=t.modal,c=!1,p=function(t){r.contains(o.activeElement)&&(t.key!==jn.ESCAPE||Dt(t)||f({keyboardEvent:t}))},d=function(t){return f({mouseEvent:t})},h=function(t){return f({touchEvent:t})},f=function(t){void 0===t&&(t={});var s=t.mouseEvent,l=t.touchEvent,u=t.keyboardEvent;e.isEventFromCurrentPopup({mouseEvent:s,touchEvent:l},i)||c||(c=!0,n.removeChild(r),o.removeEventListener("keydown",p),o.removeEventListener("mousedown",d),o.removeEventListener("touchstart",h),o.removeEventListener("contextmenu",d),e.eventService.removeEventListener(qt.EVENT_DRAG_STARTED,d),a&&a(s||l||u),e.removePopupFromPopupList(i))};return s&&s({hidePopup:f}),window.setTimeout(function(){l&&o.addEventListener("keydown",p),u&&(o.addEventListener("mousedown",d),e.eventService.addEventListener(qt.EVENT_DRAG_STARTED,d),o.addEventListener("touchstart",h),o.addEventListener("contextmenu",d))},0),f},e.prototype.addPopupToPopupList=function(t,e,o,n){this.popupList.push({element:t,wrapper:e,hideFunc:o,instanceId:rf++,isAnchored:!!n}),n&&this.setPopupPositionRelatedToElement(t,n)},e.prototype.getPopupIndex=function(t){return this.popupList.findIndex(function(e){return e.element===t})},e.prototype.setPopupPositionRelatedToElement=function(t,e){var o=this.getPopupIndex(t);if(-1!==o){var n=this.popupList[o];if(n.stopAnchoringPromise&&n.stopAnchoringPromise.then(function(t){return t&&t()}),n.stopAnchoringPromise=void 0,n.isAnchored=!1,e){var r=this.keepPopupPositionedRelativeTo({element:e,ePopup:t,hidePopup:n.hideFunc});return n.stopAnchoringPromise=r,n.isAnchored=!0,r}}},e.prototype.removePopupFromPopupList=function(t){this.setAlignedStyles(t,null),this.setPopupPositionRelatedToElement(t,null),this.popupList=this.popupList.filter(function(e){return e.element!==t})},e.prototype.keepPopupPositionedRelativeTo=function(t){var e=this,o=this.getPopupParent(),n=o.getBoundingClientRect(),r=t.element,i=t.ePopup,a=r.getBoundingClientRect(),s=n.top-a.top,l=n.left-a.left,u=s,c=l,p=i.style.top,d=parseInt(p.substring(0,p.length-1),10),h=i.style.left,f=parseInt(h.substring(0,h.length-1),10);return new hr(function(n){e.getFrameworkOverrides().setInterval(function(){var n=o.getBoundingClientRect(),a=r.getBoundingClientRect();if(0==a.top&&0==a.left&&0==a.height&&0==a.width)t.hidePopup();else{var p=n.top-a.top;if(p!=u){var h=e.keepXYWithinBounds(i,d+s-p,Xd.vertical);i.style.top="".concat(h,"px")}u=p;var g=n.left-a.left;if(g!=c){var y=e.keepXYWithinBounds(i,f+l-g,Xd.horizontal);i.style.left="".concat(y,"px")}c=g}},200).then(function(t){n(function(){null!=t&&window.clearInterval(t)})})})},e.prototype.hasAnchoredPopup=function(){return this.popupList.some(function(t){return t.isAnchored})},e.prototype.isEventFromCurrentPopup=function(t,e){var o=t.mouseEvent,n=t.touchEvent,r=o||n;if(!r)return!1;var i=this.getPopupIndex(e);if(-1===i)return!1;for(var a=i;a<this.popupList.length;a++){if(Lt(this.popupList[a].element,r))return!0}return this.isElementWithinCustomPopup(r.target)},e.prototype.isElementWithinCustomPopup=function(t){for(var e=this.gridOptionsService.getDocument();t&&t!==e.body;){if(t.classList.contains("ag-custom-component-popup")||null===t.parentElement)return!0;t=t.parentElement}return!1},e.prototype.getWrapper=function(t){for(;!t.classList.contains("ag-popup")&&t.parentElement;)t=t.parentElement;return t.classList.contains("ag-popup")?t:null},e.prototype.setAlwaysOnTop=function(t,e){var o=this.getWrapper(t);o&&(o.classList.toggle("ag-always-on-top",!!e),e&&this.bringPopupToFront(o))},e.prototype.bringPopupToFront=function(t){var e=this.getPopupParent(),o=Array.prototype.slice.call(e.querySelectorAll(".ag-popup")),n=o.length,r=Array.prototype.slice.call(e.querySelectorAll(".ag-popup.ag-always-on-top")),i=r.length,a=this.getWrapper(t);if(a&&!(n<=1)&&e.contains(t)){var s=o.indexOf(a),l=a.querySelectorAll("div"),u=[];if(l.forEach(function(t){0!==t.scrollTop&&u.push([t,t.scrollTop])}),i)a.classList.contains("ag-always-on-top")?s!==n-1&&ft(r).insertAdjacentElement("afterend",a):s!==n-i-1&&r[0].insertAdjacentElement("beforebegin",a);else s!==n-1&&ft(o).insertAdjacentElement("afterend",a);for(;u.length;){var c=u.pop();c[0].scrollTop=c[1]}var p={type:"popupToFront",eWrapper:a};this.eventService.dispatchEvent(p)}},e.WAIT_FOR_POPUP_CONTENT_RESIZE=200,tf([J("focusService")],e.prototype,"focusService",void 0),tf([J("ctrlsService")],e.prototype,"ctrlsService",void 0),tf([J("resizeObserverService")],e.prototype,"resizeObserverService",void 0),tf([Y],e.prototype,"postConstruct",null),e=o=tf([X("popupService")],e)}(Bt),sf=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),lf=function(t){function e(){var e=t.call(this,'\n        <div class="ag-autocomplete-row" role="presentation">\n            <div class="ag-autocomplete-row-label"></div>\n        </div>')||this;return e.hasHighlighting=!1,e}return sf(e,t),e.prototype.setState=function(t,e){this.value=t,this.render(),this.updateSelected(e)},e.prototype.updateSelected=function(t){this.addOrRemoveCssClass("ag-autocomplete-row-selected",t)},e.prototype.setSearchString=function(t){var e,o=!1;if(r(t)){var n=null===(e=this.value)||void 0===e?void 0:e.toLocaleLowerCase().indexOf(t.toLocaleLowerCase());if(n>=0){o=!0,this.hasHighlighting=!0;var i=n+t.length,a=ee(this.value.slice(0,n)),s=ee(this.value.slice(n,i)),l=ee(this.value.slice(i));this.getGui().lastElementChild.innerHTML="".concat(a,"<b>").concat(s,"</b>").concat(l)}}!o&&this.hasHighlighting&&(this.hasHighlighting=!1,this.render())},e.prototype.render=function(){var t;this.getGui().lastElementChild.innerHTML=null!==(t=ee(this.value))&&void 0!==t?t:"&nbsp;"},e}(Sr),uf=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),cf=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},pf=function(t){function e(o){var n=t.call(this,e.TEMPLATE)||this;return n.params=o,n.searchString="",n}return uf(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.init=function(){var t=this;this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList=this.createManagedBean(new Sh({cssIdentifier:"autocomplete"})),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:function(){return t.autocompleteEntries.length},getRow:function(e){return t.autocompleteEntries[e]}});var e=this.virtualList.getGui();this.addManagedListener(e,"click",function(){return t.params.onConfirmed()}),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(e,"mousedown",function(t){return t.preventDefault()}),this.setSelectedValue(0)},e.prototype.onNavigationKeyDown=function(t,e){t.preventDefault();var o=this.autocompleteEntries.indexOf(this.selectedValue),n=e===jn.UP?o-1:o+1;this.checkSetSelectedValue(n)},e.prototype.setSearch=function(t){this.searchString=t,r(t)?this.runSearch():(this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList.refresh(),this.checkSetSelectedValue(0)),this.updateSearchInList()},e.prototype.runContainsSearch=function(t,e){var o,n=!1,r=t.toLocaleLowerCase(),i=e.filter(function(t){var e=t.toLocaleLowerCase().indexOf(r),i=0===e,a=e>=0;return a&&(!o||!n&&i||n===i&&t.length<o.length)&&(o=t,n=i),a});return!o&&i.length&&(o=i[0]),{topMatch:o,allMatches:i}},e.prototype.runSearch=function(){var t,e,o,n,r=this.params.autocompleteEntries,i=r.map(function(t){var e;return null!==(e=t.displayValue)&&void 0!==e?e:t.key});if(this.params.useFuzzySearch)n=(o=Nn(this.searchString,i,!0).values).length?o[0]:void 0;else{var a=this.runContainsSearch(this.searchString,i);o=a.allMatches,n=a.topMatch}var s=r.filter(function(t){var e=t.key,n=t.displayValue;return o.includes(null!==n&&void 0!==n?n:e)});if(!s.length&&this.selectedValue&&(null===(e=null===(t=this.params)||void 0===t?void 0:t.forceLastSelection)||void 0===e?void 0:e.call(t,this.selectedValue,this.searchString))&&(s=[this.selectedValue]),this.autocompleteEntries=s,this.virtualList.refresh(),n){var l=o.indexOf(n);this.checkSetSelectedValue(l)}},e.prototype.updateSearchInList=function(){var t=this;this.virtualList.forEachRenderedRow(function(e){return e.setSearchString(t.searchString)})},e.prototype.checkSetSelectedValue=function(t){t>=0&&t<this.autocompleteEntries.length&&this.setSelectedValue(t)},e.prototype.setSelectedValue=function(t){var e=this.autocompleteEntries[t];this.selectedValue!==e&&(this.selectedValue=e,this.virtualList.ensureIndexVisible(t),this.virtualList.forEachRenderedRow(function(e,o){e.updateSelected(t===o)}))},e.prototype.createRowComponent=function(t){var e,o=new lf;return this.getContext().createBean(o),o.setState(null!==(e=t.displayValue)&&void 0!==e?e:t.key,t===this.selectedValue),o},e.prototype.onMouseMove=function(t){var e=this.virtualList.getGui().getBoundingClientRect(),o=this.virtualList.getScrollTop(),n=t.clientY-e.top+o,r=Math.floor(n/this.virtualList.getRowHeight());this.checkSetSelectedValue(r)},e.prototype.afterGuiAttached=function(){this.virtualList.refresh()},e.prototype.getSelectedValue=function(){var t;return this.autocompleteEntries.length&&null!==(t=this.selectedValue)&&void 0!==t?t:null},e.TEMPLATE='<div class="ag-autocomplete-list-popup">\n            <div ref="eList" class="ag-autocomplete-list"></div>\n        <div>',cf([xr("eList")],e.prototype,"eList",void 0),cf([Y],e.prototype,"init",null),e}(ga),df=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),hf=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},ff=function(t){function e(){var e=t.call(this,'\n            <div class="ag-autocomplete" role="presentation">\n                <ag-input-text-field ref="eAutocompleteInput"></ag-input-text-field>\n            </div>')||this;return e.isListOpen=!1,e.lastPosition=0,e.valid=!0,e}return df(e,t),e.prototype.postConstruct=function(){var t=this;this.eAutocompleteInput.onValueChange(function(e){return t.onValueChanged(e)}),this.eAutocompleteInput.getInputElement().setAttribute("autocomplete","off"),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.addGuiEventListener("click",this.updatePositionAndList.bind(this)),this.addDestroyFunc(function(){t.destroyBean(t.autocompleteList)}),this.addGuiEventListener("focusout",function(){return t.onFocusOut()})},e.prototype.onValueChanged=function(t){var e=n(t);this.updateValue(e),this.updateAutocompleteList(e)},e.prototype.updateValue=function(t){this.updateLastPosition(),this.dispatchEvent({type:e.EVENT_VALUE_CHANGED,value:t}),this.validate(t)},e.prototype.updateAutocompleteList=function(t){var e,o,n,r,i=null!==(o=null===(e=this.listGenerator)||void 0===e?void 0:e.call(this,t,this.lastPosition))&&void 0!==o?o:{enabled:!1};if(i.type&&i.type===(null===(n=this.autocompleteListParams)||void 0===n?void 0:n.type)||this.isListOpen&&this.closeList(),this.autocompleteListParams=i,null===(r=this.autocompleteListParams)||void 0===r?void 0:r.enabled){this.isListOpen||this.openList();var a=this.autocompleteListParams.searchString;this.autocompleteList.setSearch(null!==a&&void 0!==a?a:"")}else this.isListOpen&&this.closeList()},e.prototype.onKeyDown=function(t){var e=this,o=t.key;switch(this.updateLastPosition(),o){case jn.ENTER:this.onEnterKeyDown(t);break;case jn.TAB:this.onTabKeyDown(t);break;case jn.DOWN:case jn.UP:this.onUpDownKeyDown(t,o);break;case jn.LEFT:case jn.RIGHT:case jn.PAGE_HOME:case jn.PAGE_END:setTimeout(function(){e.updatePositionAndList()});break;case jn.ESCAPE:this.onEscapeKeyDown(t);break;case jn.SPACE:t.ctrlKey&&!this.isListOpen&&(t.preventDefault(),this.forceOpenList())}},e.prototype.confirmSelection=function(){var t,o=null===(t=this.autocompleteList)||void 0===t?void 0:t.getSelectedValue();o&&(this.closeList(),this.dispatchEvent({type:e.EVENT_OPTION_SELECTED,value:this.getValue(),position:this.lastPosition,updateEntry:o,autocompleteType:this.autocompleteListParams.type}))},e.prototype.onTabKeyDown=function(t){this.isListOpen&&(t.preventDefault(),t.stopPropagation(),this.confirmSelection())},e.prototype.onEnterKeyDown=function(t){t.preventDefault(),this.isListOpen?this.confirmSelection():this.onCompleted()},e.prototype.onUpDownKeyDown=function(t,e){var o;t.preventDefault(),this.isListOpen?null===(o=this.autocompleteList)||void 0===o||o.onNavigationKeyDown(t,e):this.forceOpenList()},e.prototype.onEscapeKeyDown=function(t){this.isListOpen&&(t.preventDefault(),t.stopPropagation(),this.closeList(),this.setCaret(this.lastPosition,!0))},e.prototype.onFocusOut=function(){this.isListOpen&&this.closeList()},e.prototype.updatePositionAndList=function(){var t;this.updateLastPosition(),this.updateAutocompleteList(null!==(t=this.eAutocompleteInput.getValue())&&void 0!==t?t:null)},e.prototype.setCaret=function(t,e){var o=this.gridOptionsService.getDocument();e&&o.activeElement===o.body&&this.eAutocompleteInput.getFocusableElement().focus();var n=this.eAutocompleteInput.getInputElement();n.setSelectionRange(t,t),t===n.value.length&&(n.scrollLeft=n.scrollWidth)},e.prototype.forceOpenList=function(){this.onValueChanged(this.eAutocompleteInput.getValue())},e.prototype.updateLastPosition=function(){var t;this.lastPosition=null!==(t=this.eAutocompleteInput.getInputElement().selectionStart)&&void 0!==t?t:0},e.prototype.validate=function(t){var o;this.validator&&(this.validationMessage=this.validator(t),this.eAutocompleteInput.getInputElement().setCustomValidity(null!==(o=this.validationMessage)&&void 0!==o?o:""),this.valid=!this.validationMessage,this.dispatchEvent({type:e.EVENT_VALID_CHANGED,isValid:this.valid,validationMessage:this.validationMessage}))},e.prototype.openList=function(){var t=this;this.isListOpen=!0,this.autocompleteList=this.createBean(new pf({autocompleteEntries:this.autocompleteListParams.entries,onConfirmed:function(){return t.confirmSelection()},forceLastSelection:this.forceLastSelection}));var e=this.autocompleteList.getGui(),o={ePopup:e,type:"autocomplete",eventSource:this.getGui(),position:"under",alignSide:this.gridOptionsService.get("enableRtl")?"right":"left",keepWithinBounds:!0},n=this.popupService.addPopup({eChild:e,anchorToElement:this.getGui(),positionCallback:function(){return t.popupService.positionPopupByComponent(o)},ariaLabel:this.listAriaLabel});this.hidePopup=n.hideFunc,this.autocompleteList.afterGuiAttached()},e.prototype.closeList=function(){this.isListOpen=!1,this.hidePopup(),this.destroyBean(this.autocompleteList),this.autocompleteList=null},e.prototype.onCompleted=function(){this.isListOpen&&this.closeList(),this.dispatchEvent({type:e.EVENT_VALUE_CONFIRMED,value:this.getValue(),isValid:this.isValid()})},e.prototype.getValue=function(){return n(this.eAutocompleteInput.getValue())},e.prototype.setInputPlaceholder=function(t){return this.eAutocompleteInput.setInputPlaceholder(t),this},e.prototype.setInputAriaLabel=function(t){return this.eAutocompleteInput.setInputAriaLabel(t),this},e.prototype.setListAriaLabel=function(t){return this.listAriaLabel=t,this},e.prototype.setListGenerator=function(t){return this.listGenerator=t,this},e.prototype.setValidator=function(t){return this.validator=t,this},e.prototype.isValid=function(){return this.valid},e.prototype.setValue=function(t){var e=t.value,o=t.position,n=t.silent,r=t.updateListOnlyIfOpen,i=t.restoreFocus;this.eAutocompleteInput.setValue(e,!0),this.setCaret(null!==o&&void 0!==o?o:this.lastPosition,i),n||this.updateValue(e),r&&!this.isListOpen||this.updateAutocompleteList(e)},e.prototype.setForceLastSelection=function(t){return this.forceLastSelection=t,this},e.prototype.setInputDisabled=function(t){return this.eAutocompleteInput.setDisabled(t),this},e.EVENT_VALUE_CHANGED="eventValueChanged",e.EVENT_VALUE_CONFIRMED="eventValueConfirmed",e.EVENT_OPTION_SELECTED="eventOptionSelected",e.EVENT_VALID_CHANGED="eventValidChanged",hf([J("popupService")],e.prototype,"popupService",void 0),hf([xr("eAutocompleteInput")],e.prototype,"eAutocompleteInput",void 0),hf([Y],e.prototype,"postConstruct",null),e}(Sr),gf=["touchstart","touchend","touchmove","touchcancel"],yf=function(){function t(t){void 0===t&&(t="javascript"),this.frameworkName=t,this.renderingEngine="vanilla",this.wrapIncoming=function(t){return t()},this.wrapOutgoing=function(t){return t()}}return t.prototype.setInterval=function(t,e){return new hr(function(o){o(window.setInterval(t,e))})},t.prototype.addEventListener=function(t,e,o,n){var r=St(gf,e);t.addEventListener(e,o,{capture:!!n,passive:r})},Object.defineProperty(t.prototype,"shouldWrapOutgoing",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.frameworkComponent=function(t){return null},t.prototype.isFrameworkComponent=function(t){return!1},t.prototype.getDocLink=function(t){var e="solid"===this.frameworkName?"react":this.frameworkName;return"https://www.ag-grid.com/".concat(e,"-data-grid").concat(t?"/".concat(t):"")},t}(),vf=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),mf=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Cf=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},_f=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},wf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vf(e,t),e.prototype.getNextCellToFocus=function(t,e,o){return void 0===o&&(o=!1),o?this.getNextCellToFocusWithCtrlPressed(t,e):this.getNextCellToFocusWithoutCtrlPressed(t,e)},e.prototype.getNextCellToFocusWithCtrlPressed=function(t,e){var o,n,r=t===jn.UP,i=t===jn.DOWN,a=t===jn.LEFT;if(r||i)n=r?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow(),o=e.column;else{var s=this.columnModel.getAllDisplayedColumns(),l=this.gridOptionsService.get("enableRtl");n=e.rowIndex,o=a!==l?s[0]:ft(s)}return{rowIndex:n,rowPinned:null,column:o}},e.prototype.getNextCellToFocusWithoutCtrlPressed=function(t,e){for(var o=e,n=!1;!n;){switch(t){case jn.UP:o=this.getCellAbove(o);break;case jn.DOWN:o=this.getCellBelow(o);break;case jn.RIGHT:o=this.gridOptionsService.get("enableRtl")?this.getCellToLeft(o):this.getCellToRight(o);break;case jn.LEFT:o=this.gridOptionsService.get("enableRtl")?this.getCellToRight(o):this.getCellToLeft(o);break;default:o=null,console.warn("AG Grid: unknown key for navigation "+t)}n=!o||this.isCellGoodToFocusOn(o)}return o},e.prototype.isCellGoodToFocusOn=function(t){var e,o=t.column;switch(t.rowPinned){case"top":e=this.pinnedRowModel.getPinnedTopRow(t.rowIndex);break;case"bottom":e=this.pinnedRowModel.getPinnedBottomRow(t.rowIndex);break;default:e=this.rowModel.getRow(t.rowIndex)}return!!e&&!o.isSuppressNavigable(e)},e.prototype.getCellToLeft=function(t){if(!t)return null;var e=this.columnModel.getDisplayedColBefore(t.column);return e?{rowIndex:t.rowIndex,column:e,rowPinned:t.rowPinned}:null},e.prototype.getCellToRight=function(t){if(!t)return null;var e=this.columnModel.getDisplayedColAfter(t.column);return e?{rowIndex:t.rowIndex,column:e,rowPinned:t.rowPinned}:null},e.prototype.getRowBelow=function(t){var e=t.rowIndex,o=t.rowPinned;if(this.isLastRowInContainer(t))switch(o){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}var n=this.rowModel.getRow(t.rowIndex),r=this.getNextStickyPosition(n);return r||{rowIndex:e+1,rowPinned:o}},e.prototype.getNextStickyPosition=function(t,e){if(this.gridOptionsService.isGroupRowsSticky()&&t&&t.sticky){var o=_f([],Cf(this.rowRenderer.getStickyTopRowCtrls()),!1).sort(function(t,e){return t.getRowNode().rowIndex-e.getRowNode().rowIndex}),n=e?-1:1,r=o.findIndex(function(e){return e.getRowNode().rowIndex===t.rowIndex}),i=o[r+n];return i?{rowIndex:i.getRowNode().rowIndex,rowPinned:null}:void 0}},e.prototype.getCellBelow=function(t){if(!t)return null;var e=this.getRowBelow(t);return e?{rowIndex:e.rowIndex,column:t.column,rowPinned:e.rowPinned}:null},e.prototype.isLastRowInContainer=function(t){var e=t.rowPinned,o=t.rowIndex;return"top"===e?this.pinnedRowModel.getPinnedTopRowData().length-1<=o:"bottom"===e?this.pinnedRowModel.getPinnedBottomRowData().length-1<=o:this.paginationProxy.getPageLastRow()<=o},e.prototype.getRowAbove=function(t){var e=t.rowIndex,o=t.rowPinned;if(o?0===e:e===this.paginationProxy.getPageFirstRow())return"top"===o?null:o&&this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;var n=this.rowModel.getRow(t.rowIndex),r=this.getNextStickyPosition(n,!0);return r||{rowIndex:e-1,rowPinned:o}},e.prototype.getCellAbove=function(t){if(!t)return null;var e=this.getRowAbove({rowIndex:t.rowIndex,rowPinned:t.rowPinned});return e?{rowIndex:e.rowIndex,column:t.column,rowPinned:e.rowPinned}:null},e.prototype.getLastBodyCell=function(){return{rowIndex:this.paginationProxy.getPageLastRow(),rowPinned:null}},e.prototype.getLastFloatingTopRow=function(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowData().length-1,rowPinned:"top"}},e.prototype.getNextTabbedCell=function(t,e){return e?this.getNextTabbedCellBackwards(t):this.getNextTabbedCellForwards(t)},e.prototype.getNextTabbedCellForwards=function(t){var e=this.columnModel.getAllDisplayedColumns(),o=t.rowIndex,n=t.rowPinned,r=this.columnModel.getDisplayedColAfter(t.column);if(!r){r=e[0];var a=this.getRowBelow(t);if(i(a))return null;if(!a.rowPinned&&!this.paginationProxy.isRowInPage(a))return null;o=a?a.rowIndex:null,n=a?a.rowPinned:null}return{rowIndex:o,column:r,rowPinned:n}},e.prototype.getNextTabbedCellBackwards=function(t){var e=this.columnModel.getAllDisplayedColumns(),o=t.rowIndex,n=t.rowPinned,r=this.columnModel.getDisplayedColBefore(t.column);if(!r){r=ft(e);var a=this.getRowAbove({rowIndex:t.rowIndex,rowPinned:t.rowPinned});if(i(a))return null;if(!a.rowPinned&&!this.paginationProxy.isRowInPage(a))return null;o=a?a.rowIndex:null,n=a?a.rowPinned:null}return{rowIndex:o,column:r,rowPinned:n}},mf([J("columnModel")],e.prototype,"columnModel",void 0),mf([J("rowModel")],e.prototype,"rowModel",void 0),mf([J("rowRenderer")],e.prototype,"rowRenderer",void 0),mf([J("pinnedRowModel")],e.prototype,"pinnedRowModel",void 0),mf([J("paginationProxy")],e.prototype,"paginationProxy",void 0),e=mf([X("cellNavigationService")],e)}(Bt),bf=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Sf=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Ef=function(t,e){return function(o,n){e(o,n,t)}},xf=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.consuming=!1,e}return bf(e,t),e.prototype.setBeans=function(t){this.logger=t.create("AlignedGridsService")},e.prototype.getAlignedGridApis=function(){var t,e=this,o=null!==(t=this.gridOptionsService.get("alignedGrids"))&&void 0!==t?t:[],n="function"===typeof o;"function"===typeof o&&(o=o());var r=function(){return"See ".concat(e.getFrameworkOverrides().getDocLink("aligned-grids"))};return o.map(function(t){var e;if(!t)return R("alignedGrids contains an undefined option."),n||R('You may want to configure via a callback to avoid setup race conditions:\n                     "alignedGrids: () => [linkedGrid]"'),void R(r());if(t instanceof ml)return t;var o=t;return"current"in o?null===(e=o.current)||void 0===e?void 0:e.api:(o.api||R("alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ".concat(r())),o.api)}).filter(function(t){return!!t&&!t.isDestroyed()})},e.prototype.init=function(){this.addManagedListener(this.eventService,qt.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))},e.prototype.fireEvent=function(t){this.consuming||this.getAlignedGridApis().forEach(function(e){var o=e.__getAlignedGridService();t(o)})},e.prototype.onEvent=function(t){this.consuming=!0,t(),this.consuming=!1},e.prototype.fireColumnEvent=function(t){this.fireEvent(function(e){e.onColumnEvent(t)})},e.prototype.fireScrollEvent=function(t){"horizontal"===t.direction&&this.fireEvent(function(e){e.onScrollEvent(t)})},e.prototype.onScrollEvent=function(t){var e=this;this.onEvent(function(){e.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(t.left,!0)})},e.prototype.getMasterColumns=function(t){var e=[];return t.columns?t.columns.forEach(function(t){e.push(t)}):t.column&&e.push(t.column),e},e.prototype.getColumnIds=function(t){var e=[];return t.columns?t.columns.forEach(function(t){e.push(t.getColId())}):t.column&&e.push(t.column.getColId()),e},e.prototype.onColumnEvent=function(t){var e=this;this.onEvent(function(){switch(t.type){case qt.EVENT_COLUMN_MOVED:case qt.EVENT_COLUMN_VISIBLE:case qt.EVENT_COLUMN_PINNED:case qt.EVENT_COLUMN_RESIZED:var o=t;e.processColumnEvent(o);break;case qt.EVENT_COLUMN_GROUP_OPENED:var n=t;e.processGroupOpenedEvent(n);break;case qt.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.")}})},e.prototype.processGroupOpenedEvent=function(t){var e=this;t.columnGroups.forEach(function(o){var n=null;if(o){var r=o.getGroupId();n=e.columnModel.getProvidedColumnGroup(r)}o&&!n||(e.logger.log("onColumnEvent-> processing "+t+" expanded = "+o.isExpanded()),e.columnModel.setColumnGroupOpened(n,o.isExpanded(),"alignedGridChanged"))})},e.prototype.processColumnEvent=function(t){var e,o=this,n=t.column,r=null;if(n&&(r=this.columnModel.getPrimaryColumn(n.getColId())),!n||r){var i=this.getMasterColumns(t);switch(t.type){case qt.EVENT_COLUMN_MOVED:var a=t,s=t.api.getColumnState().map(function(t){return{colId:t.colId}});this.columnModel.applyColumnState({state:s,applyOrder:!0},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing ".concat(t.type," toIndex = ").concat(a.toIndex));break;case qt.EVENT_COLUMN_VISIBLE:var l=t;s=t.api.getColumnState().map(function(t){return{colId:t.colId,hide:t.hide}});this.columnModel.applyColumnState({state:s},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing ".concat(t.type," visible = ").concat(l.visible));break;case qt.EVENT_COLUMN_PINNED:var u=t;s=t.api.getColumnState().map(function(t){return{colId:t.colId,pinned:t.pinned}});this.columnModel.applyColumnState({state:s},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing ".concat(t.type," pinned = ").concat(u.pinned));break;case qt.EVENT_COLUMN_RESIZED:var c=t,p={};i.forEach(function(e){o.logger.log("onColumnEvent-> processing ".concat(t.type," actualWidth = ").concat(e.getActualWidth())),p[e.getId()]={key:e.getColId(),newWidth:e.getActualWidth()}}),null===(e=c.flexColumns)||void 0===e||e.forEach(function(t){p[t.getId()]&&delete p[t.getId()]}),this.columnModel.setColumnWidths(Object.values(p),!1,c.finished,"alignedGridChanged")}var d=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(function(t){t.setGridOption("alwaysShowVerticalScroll",d)})}},Sf([J("columnModel")],e.prototype,"columnModel",void 0),Sf([J("ctrlsService")],e.prototype,"ctrlsService",void 0),Sf([Ef(0,tt("loggerFactory"))],e.prototype,"setBeans",null),Sf([Y],e.prototype,"init",null),e=Sf([X("alignedGridsService")],e)}(Bt),Tf=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Of=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Rf=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectedNodes=new Map,e.lastRowNode=null,e}return Tf(e,t),e.prototype.init=function(){var t=this;this.rowSelection=this.gridOptionsService.get("rowSelection"),this.groupSelectsChildren=this.gridOptionsService.get("groupSelectsChildren"),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],function(){t.groupSelectsChildren=t.gridOptionsService.get("groupSelectsChildren"),t.rowSelection=t.gridOptionsService.get("rowSelection"),t.deselectAllRowNodes({source:"api"})}),this.addManagedListener(this.eventService,qt.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.resetNodes(),this.lastRowNode=null},e.prototype.isMultiselect=function(){return"multiple"===this.rowSelection},e.prototype.setNodesSelected=function(t){var e,o=t.newValue,n=t.clearSelection,r=t.suppressFinishActions,i=t.rangeSelect,a=t.nodes,s=t.event,l=t.source,u=void 0===l?"api":l;if(0===a.length)return 0;if(a.length>1&&!this.isMultiselect())return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;var c=this.groupSelectsChildren&&!0===t.groupSelectsFiltered,p=a.map(function(t){return t.footer?t.sibling:t});if(i){if(a.length>1)return console.warn("AG Grid: cannot range select while selecting multiple rows"),0;var d=null;if("checkboxSelected"===u&&!1===o&&this.lastRowNode&&(this.lastRowNode.id?d=this.lastRowNode:this.lastRowNode=null),null==d&&(d=this.getLastSelectedNode()),d){var h=p[0];if(h!==d&&this.isMultiselect())return this.selectRange(h,d,o,u)}}this.lastRowNode=o?null:p[0];for(var f=0,g=0;g<p.length;g++){var y=p[g];if(!(c&&y.group))y.selectThisNode(o,s,u)&&f++;this.groupSelectsChildren&&(null===(e=y.childrenAfterGroup)||void 0===e?void 0:e.length)&&(f+=this.selectChildren(y,o,c,u))}if(!r&&(o&&(n||!this.isMultiselect())&&(f+=this.clearOtherNodes(p[0],u)),f>0)){this.updateGroupsFromChildrenSelections(u);var v={type:qt.EVENT_SELECTION_CHANGED,source:u};this.eventService.dispatchEvent(v)}return f},e.prototype.selectRange=function(t,e,o,n){var r=this;void 0===o&&(o=!0);var i=this.rowModel.getNodesInRangeForSelection(t,e),a=0;i.forEach(function(t){t.group&&r.groupSelectsChildren||t.selectThisNode(o,void 0,n)&&a++}),this.updateGroupsFromChildrenSelections(n);var s={type:qt.EVENT_SELECTION_CHANGED,source:n};return this.eventService.dispatchEvent(s),a},e.prototype.selectChildren=function(t,e,o,n){var r=o?t.childrenAfterAggFilter:t.childrenAfterGroup;return i(r)?0:this.setNodesSelected({newValue:e,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:o,source:n,nodes:r})},e.prototype.getLastSelectedNode=function(){var t=Array.from(this.selectedNodes.keys());if(0==t.length)return null;var e=this.selectedNodes.get(ft(t));return e||null},e.prototype.getSelectedNodes=function(){var t=[];return this.selectedNodes.forEach(function(e){e&&t.push(e)}),t},e.prototype.getSelectedRows=function(){var t=[];return this.selectedNodes.forEach(function(e){e&&e.data&&t.push(e.data)}),t},e.prototype.getSelectionCount=function(){return this.selectedNodes.size},e.prototype.filterFromSelection=function(t){var e=new Map;this.selectedNodes.forEach(function(o,n){o&&t(o)&&e.set(n,o)}),this.selectedNodes=e},e.prototype.updateGroupsFromChildrenSelections=function(t,e){if(!this.groupSelectsChildren)return!1;if("clientSide"!==this.rowModel.getType())return!1;var o=this.rowModel.getRootNode();e||(e=new Jd(!0,o)).setInactive();var n=!1;return e.forEachChangedNodeDepthFirst(function(e){if(e!==o){var r=e.calculateSelectedFromChildren();n=e.selectThisNode(null!==r&&r,void 0,t)||n}}),n},e.prototype.clearOtherNodes=function(t,e){var o=this,n=new Map,r=0;return this.selectedNodes.forEach(function(i){if(i&&i.id!==t.id){var a=o.selectedNodes.get(i.id);r+=a.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:e}),o.groupSelectsChildren&&i.parent&&n.set(i.parent.id,i.parent)}}),n.forEach(function(t){var o=t.calculateSelectedFromChildren();t.selectThisNode(null!==o&&o,void 0,e)}),r},e.prototype.onRowSelected=function(t){var e=t.node;this.groupSelectsChildren&&e.group||(e.isSelected()?this.selectedNodes.set(e.id,e):this.selectedNodes.delete(e.id))},e.prototype.syncInRowNode=function(t,e){this.syncInOldRowNode(t,e),this.syncInNewRowNode(t)},e.prototype.syncInOldRowNode=function(t,e){if(r(e)&&t.id!==e.id&&e){var o=e.id;this.selectedNodes.get(o)==t&&this.selectedNodes.set(e.id,e)}},e.prototype.syncInNewRowNode=function(t){this.selectedNodes.has(t.id)?(t.setSelectedInitialValue(!0),this.selectedNodes.set(t.id,t)):t.setSelectedInitialValue(!1)},e.prototype.reset=function(t){var e=this.getSelectionCount();if(this.resetNodes(),e){var o={type:qt.EVENT_SELECTION_CHANGED,source:t};this.eventService.dispatchEvent(o)}},e.prototype.resetNodes=function(){var t;null===(t=this.selectedNodes)||void 0===t||t.clear()},e.prototype.getBestCostNodeSelection=function(){if("clientSide"===this.rowModel.getType()){var t=this.rowModel.getTopLevelNodes();if(null!==t){var e=[];return function t(o){for(var n=0,r=o.length;n<r;n++){var i=o[n];if(i.isSelected())e.push(i);else{var a=i;a.group&&a.children&&t(a.children)}}}(t),e}}},e.prototype.isEmpty=function(){var t=0;return this.selectedNodes.forEach(function(e){e&&t++}),0===t},e.prototype.deselectAllRowNodes=function(t){var e=function(t){return t.selectThisNode(!1,void 0,n)},o="clientSide"===this.rowModel.getType(),n=t.source,r=t.justFiltered,i=t.justCurrentPage;if(i||r){if(!o)return void console.error("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'");this.getNodesToSelect(r,i).forEach(e)}else this.selectedNodes.forEach(function(t){t&&e(t)}),this.reset(n);o&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(n);var a={type:qt.EVENT_SELECTION_CHANGED,source:n};this.eventService.dispatchEvent(a)},e.prototype.getSelectedCounts=function(t,e){var o=this,n=0,r=0;return this.getNodesToSelect(t,e).forEach(function(t){o.groupSelectsChildren&&t.group||(t.isSelected()?n++:t.selectable&&r++)}),{selectedCount:n,notSelectedCount:r}},e.prototype.getSelectAllState=function(t,e){var o=this.getSelectedCounts(t,e),n=o.selectedCount,r=o.notSelectedCount;return(0!==n||0!==r)&&(n>0&&r>0?null:n>0)},e.prototype.hasNodesToSelect=function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),this.getNodesToSelect(t,e).filter(function(t){return t.selectable}).length>0},e.prototype.getNodesToSelect=function(t,e){var o=this;if(void 0===t&&(t=!1),void 0===e&&(e=!1),"clientSide"!==this.rowModel.getType())throw new Error("selectAll only available when rowModelType='clientSide', ie not ".concat(this.rowModel.getType()));var n=[];if(e)return this.paginationProxy.forEachNodeOnPage(function(t){if(t.group)if(t.expanded)o.groupSelectsChildren||n.push(t);else{var e=function(t){var o;n.push(t),(null===(o=t.childrenAfterFilter)||void 0===o?void 0:o.length)&&t.childrenAfterFilter.forEach(e)};e(t)}else n.push(t)}),n;var r=this.rowModel;return t?(r.forEachNodeAfterFilter(function(t){n.push(t)}),n):(r.forEachNode(function(t){n.push(t)}),n)},e.prototype.selectAllRowNodes=function(t){if("clientSide"!==this.rowModel.getType())throw new Error("selectAll only available when rowModelType='clientSide', ie not ".concat(this.rowModel.getType()));var e=t.source,o=t.justFiltered,n=t.justCurrentPage;this.getNodesToSelect(o,n).forEach(function(t){return t.selectThisNode(!0,void 0,e)}),"clientSide"===this.rowModel.getType()&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(e);var r={type:qt.EVENT_SELECTION_CHANGED,source:e};this.eventService.dispatchEvent(r)},e.prototype.getSelectionState=function(){var t=[];return this.selectedNodes.forEach(function(e){(null===e||void 0===e?void 0:e.id)&&t.push(e.id)}),t.length?t:null},e.prototype.setSelectionState=function(t,e){if(Array.isArray(t)){var o=new Set(t),n=[];this.rowModel.forEachNode(function(t){o.has(t.id)&&n.push(t)}),this.setNodesSelected({newValue:!0,nodes:n,source:e})}},Of([J("rowModel")],e.prototype,"rowModel",void 0),Of([J("paginationProxy")],e.prototype,"paginationProxy",void 0),Of([Y],e.prototype,"init",null),e=Of([X("selectionService")],e)}(Bt),Pf=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Af=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},Df=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},Mf=function(){function t(t){var e=this;this.viaApi=function(t){for(var o,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return O("Since v31, 'columnApi.".concat(t,"' is deprecated and moved to 'api.").concat(t,"'.")),(o=e.api)[t].apply(o,Df([],Af(n),!1))},this.api=t}return t.prototype.sizeColumnsToFit=function(t){this.viaApi("sizeColumnsToFit",t)},t.prototype.setColumnGroupOpened=function(t,e){this.viaApi("setColumnGroupOpened",t,e)},t.prototype.getColumnGroup=function(t,e){return this.viaApi("getColumnGroup",t,e)},t.prototype.getProvidedColumnGroup=function(t){return this.viaApi("getProvidedColumnGroup",t)},t.prototype.getDisplayNameForColumn=function(t,e){return this.viaApi("getDisplayNameForColumn",t,e)},t.prototype.getDisplayNameForColumnGroup=function(t,e){return this.viaApi("getDisplayNameForColumnGroup",t,e)},t.prototype.getColumn=function(t){return this.viaApi("getColumn",t)},t.prototype.getColumns=function(){return this.viaApi("getColumns")},t.prototype.applyColumnState=function(t){return this.viaApi("applyColumnState",t)},t.prototype.getColumnState=function(){return this.viaApi("getColumnState")},t.prototype.resetColumnState=function(){this.viaApi("resetColumnState")},t.prototype.getColumnGroupState=function(){return this.viaApi("getColumnGroupState")},t.prototype.setColumnGroupState=function(t){this.viaApi("setColumnGroupState",t)},t.prototype.resetColumnGroupState=function(){this.viaApi("resetColumnGroupState")},t.prototype.isPinning=function(){return this.viaApi("isPinning")},t.prototype.isPinningLeft=function(){return this.viaApi("isPinningLeft")},t.prototype.isPinningRight=function(){return this.viaApi("isPinningRight")},t.prototype.getDisplayedColAfter=function(t){return this.viaApi("getDisplayedColAfter",t)},t.prototype.getDisplayedColBefore=function(t){return this.viaApi("getDisplayedColBefore",t)},t.prototype.setColumnVisible=function(t,e){this.viaApi("setColumnVisible",t,e)},t.prototype.setColumnsVisible=function(t,e){this.viaApi("setColumnsVisible",t,e)},t.prototype.setColumnPinned=function(t,e){this.viaApi("setColumnPinned",t,e)},t.prototype.setColumnsPinned=function(t,e){this.viaApi("setColumnsPinned",t,e)},t.prototype.getAllGridColumns=function(){return this.viaApi("getAllGridColumns")},t.prototype.getDisplayedLeftColumns=function(){return this.viaApi("getDisplayedLeftColumns")},t.prototype.getDisplayedCenterColumns=function(){return this.viaApi("getDisplayedCenterColumns")},t.prototype.getDisplayedRightColumns=function(){return this.viaApi("getDisplayedRightColumns")},t.prototype.getAllDisplayedColumns=function(){return this.viaApi("getAllDisplayedColumns")},t.prototype.getAllDisplayedVirtualColumns=function(){return this.viaApi("getAllDisplayedVirtualColumns")},t.prototype.moveColumn=function(t,e){this.viaApi("moveColumn",t,e)},t.prototype.moveColumnByIndex=function(t,e){this.viaApi("moveColumnByIndex",t,e)},t.prototype.moveColumns=function(t,e){this.viaApi("moveColumns",t,e)},t.prototype.moveRowGroupColumn=function(t,e){this.viaApi("moveRowGroupColumn",t,e)},t.prototype.setColumnAggFunc=function(t,e){this.viaApi("setColumnAggFunc",t,e)},t.prototype.setColumnWidth=function(t,e,o,n){void 0===o&&(o=!0),this.viaApi("setColumnWidth",t,e,o,n)},t.prototype.setColumnWidths=function(t,e,o){void 0===e&&(e=!0),this.viaApi("setColumnWidths",t,e,o)},t.prototype.setPivotMode=function(t){this.viaApi("setPivotMode",t)},t.prototype.isPivotMode=function(){return this.viaApi("isPivotMode")},t.prototype.getPivotResultColumn=function(t,e){return this.viaApi("getPivotResultColumn",t,e)},t.prototype.setValueColumns=function(t){this.viaApi("setValueColumns",t)},t.prototype.getValueColumns=function(){return this.viaApi("getValueColumns")},t.prototype.removeValueColumn=function(t){this.viaApi("removeValueColumn",t)},t.prototype.removeValueColumns=function(t){this.viaApi("removeValueColumns",t)},t.prototype.addValueColumn=function(t){this.viaApi("addValueColumn",t)},t.prototype.addValueColumns=function(t){this.viaApi("addValueColumns",t)},t.prototype.setRowGroupColumns=function(t){this.viaApi("setRowGroupColumns",t)},t.prototype.removeRowGroupColumn=function(t){this.viaApi("removeRowGroupColumn",t)},t.prototype.removeRowGroupColumns=function(t){this.viaApi("removeRowGroupColumns",t)},t.prototype.addRowGroupColumn=function(t){this.viaApi("addRowGroupColumn",t)},t.prototype.addRowGroupColumns=function(t){this.viaApi("addRowGroupColumns",t)},t.prototype.getRowGroupColumns=function(){return this.viaApi("getRowGroupColumns")},t.prototype.setPivotColumns=function(t){this.viaApi("setPivotColumns",t)},t.prototype.removePivotColumn=function(t){this.viaApi("removePivotColumn",t)},t.prototype.removePivotColumns=function(t){this.viaApi("removePivotColumns",t)},t.prototype.addPivotColumn=function(t){this.viaApi("addPivotColumn",t)},t.prototype.addPivotColumns=function(t){this.viaApi("addPivotColumns",t)},t.prototype.getPivotColumns=function(){return this.viaApi("getPivotColumns")},t.prototype.getLeftDisplayedColumnGroups=function(){return this.viaApi("getLeftDisplayedColumnGroups")},t.prototype.getCenterDisplayedColumnGroups=function(){return this.viaApi("getCenterDisplayedColumnGroups")},t.prototype.getRightDisplayedColumnGroups=function(){return this.viaApi("getRightDisplayedColumnGroups")},t.prototype.getAllDisplayedColumnGroups=function(){return this.viaApi("getAllDisplayedColumnGroups")},t.prototype.autoSizeColumn=function(t,e){return this.viaApi("autoSizeColumn",t,e)},t.prototype.autoSizeColumns=function(t,e){this.viaApi("autoSizeColumns",t,e)},t.prototype.autoSizeAllColumns=function(t){this.viaApi("autoSizeAllColumns",t)},t.prototype.setPivotResultColumns=function(t){this.viaApi("setPivotResultColumns",t)},t.prototype.getPivotResultColumns=function(){return this.viaApi("getPivotResultColumns")},Pf([J("gridApi")],t.prototype,"api",void 0),t=Pf([X("columnApi")],t)}(),If=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Lf=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Ff=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.initialised=!1,e.isSsrm=!1,e}return If(e,t),e.prototype.init=function(){var t=this;this.isSsrm=this.gridOptionsService.isRowModelType("serverSide"),this.cellExpressions=this.gridOptionsService.get("enableCellExpressions"),this.isTreeData=this.gridOptionsService.get("treeData"),this.initialised=!0;var e=function(e){return t.callColumnCellValueChangedHandler(e)},o=this.gridOptionsService.useAsyncEvents();this.eventService.addEventListener(qt.EVENT_CELL_VALUE_CHANGED,e,o),this.addDestroyFunc(function(){return t.eventService.removeEventListener(qt.EVENT_CELL_VALUE_CHANGED,e,o)}),this.addManagedPropertyListener("treeData",function(e){return t.isTreeData=e.currentValue})},e.prototype.getValue=function(t,e,o,n){if(void 0===o&&(o=!1),void 0===n&&(n=!1),this.initialised||this.init(),e){var r,i=t.getColDef(),a=i.field,s=t.getColId(),l=e.data,u=e.groupData&&void 0!==e.groupData[s],c=!n&&e.aggData&&void 0!==e.aggData[s],p=this.isSsrm&&n&&!!t.getColDef().aggFunc,d=this.isSsrm&&e.footer&&e.field&&(!0===t.getColDef().showRowGroup||t.getColDef().showRowGroup===e.field);if(o&&i.filterValueGetter?r=this.executeFilterValueGetter(i.filterValueGetter,l,t,e):this.isTreeData&&c?r=e.aggData[s]:this.isTreeData&&i.valueGetter?r=this.executeValueGetter(i.valueGetter,l,t,e):this.isTreeData&&a&&l?r=w(l,a,t.isFieldContainsDots()):u?r=e.groupData[s]:c?r=e.aggData[s]:i.valueGetter?r=this.executeValueGetter(i.valueGetter,l,t,e):d?r=w(l,e.field,t.isFieldContainsDots()):a&&l&&!p&&(r=w(l,a,t.isFieldContainsDots())),this.cellExpressions&&"string"===typeof r&&0===r.indexOf("=")){var h=r.substring(1);r=this.executeValueGetter(h,l,t,e)}if(null==r){var f=this.getOpenedGroup(e,t);if(null!=f)return f}return r}},e.prototype.getOpenedGroup=function(t,e){if(this.gridOptionsService.get("showOpenedGroup")&&e.getColDef().showRowGroup)for(var o=e.getColDef().showRowGroup,n=t.parent;null!=n;){if(n.rowGroupColumn&&(!0===o||o===n.rowGroupColumn.getColId()))return n.key;n=n.parent}},e.prototype.setValue=function(t,e,o,n){var a=this.columnModel.getPrimaryColumn(e);if(!t||!a)return!1;i(t.data)&&(t.data={});var s=a.getColDef(),l=s.field,u=s.valueSetter;if(i(l)&&i(u))return console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work"),!1;if(!this.dataTypeService.checkType(a,o))return console.warn("AG Grid: Data type of the new value does not match the cell data type of the column"),!1;var c,p=this.gridOptionsService.addGridCommonParams({node:t,data:t.data,oldValue:this.getValue(a,t),newValue:o,colDef:a.getColDef(),column:a});if(p.newValue=o,void 0===(c=r(u)?"function"===typeof u?u(p):this.expressionService.evaluate(u,p):this.setValueUsingField(t.data,l,o,a.isFieldContainsDots()))&&(c=!0),!c)return!1;t.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),p.newValue=this.getValue(a,t);var d={type:qt.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:p.column,api:p.api,columnApi:p.columnApi,colDef:p.colDef,context:p.context,data:t.data,node:t,oldValue:p.oldValue,newValue:p.newValue,value:p.newValue,source:n};return this.eventService.dispatchEvent(d),!0},e.prototype.callColumnCellValueChangedHandler=function(t){var e=t.colDef.onCellValueChanged;"function"===typeof e&&this.getFrameworkOverrides().wrapOutgoing(function(){e({node:t.node,data:t.data,oldValue:t.oldValue,newValue:t.newValue,colDef:t.colDef,column:t.column,api:t.api,columnApi:t.columnApi,context:t.context})})},e.prototype.setValueUsingField=function(t,e,o,n){if(!e)return!1;var r=!1;if(n)for(var i=e.split("."),a=t;i.length>0&&a;){var s=i.shift();0===i.length?(r=a[s]===o)||(a[s]=o):a=a[s]}else(r=t[e]===o)||(t[e]=o);return!r},e.prototype.executeFilterValueGetter=function(t,e,o,n){var r=this.gridOptionsService.addGridCommonParams({data:e,node:n,column:o,colDef:o.getColDef(),getValue:this.getValueCallback.bind(this,n)});return"function"===typeof t?t(r):this.expressionService.evaluate(t,r)},e.prototype.executeValueGetter=function(t,e,o,n){var r=o.getColId(),i=this.valueCache.getValue(n,r);if(void 0!==i)return i;var a,s=this.gridOptionsService.addGridCommonParams({data:e,node:n,column:o,colDef:o.getColDef(),getValue:this.getValueCallback.bind(this,n)});return a="function"===typeof t?t(s):this.expressionService.evaluate(t,s),this.valueCache.setValue(n,r,a),a},e.prototype.getValueCallback=function(t,e){var o=this.columnModel.getPrimaryColumn(e);return o?this.getValue(o,t):null},e.prototype.getKeyForNode=function(t,e){var o=this.getValue(t,e),n=t.getColDef().keyCreator,r=o;n&&(r=n(this.gridOptionsService.addGridCommonParams({value:o,colDef:t.getColDef(),column:t,node:e,data:e.data})));return"string"===typeof r||null==r?r:("[object Object]"===(r=String(r))&&O("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key"),r)},Lf([J("expressionService")],e.prototype,"expressionService",void 0),Lf([J("columnModel")],e.prototype,"columnModel",void 0),Lf([J("valueCache")],e.prototype,"valueCache",void 0),Lf([J("dataTypeService")],e.prototype,"dataTypeService",void 0),Lf([Y],e.prototype,"init",null),e=Lf([X("valueService")],e)}(Bt),Nf=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),kf=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Gf=function(t,e){return function(o,n){e(o,n,t)}},Vf=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.expressionToFunctionCache={},e}return Nf(e,t),e.prototype.setBeans=function(t){this.logger=t.create("ExpressionService")},e.prototype.evaluate=function(t,e){if("string"===typeof t)return this.evaluateExpression(t,e);console.error("AG Grid: value should be either a string or a function",t)},e.prototype.evaluateExpression=function(t,e){try{return this.createExpressionFunction(t)(e.value,e.context,e.oldValue,e.newValue,e.value,e.node,e.data,e.colDef,e.rowIndex,e.api,e.columnApi,e.getValue,e.column,e.columnGroup)}catch(o){return console.log("Processing of the expression failed"),console.log("Expression = "+t),console.log("Params =",e),console.log("Exception = "+o),null}},e.prototype.createExpressionFunction=function(t){if(this.expressionToFunctionCache[t])return this.expressionToFunctionCache[t];var e=this.createFunctionBody(t),o=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",e);return this.expressionToFunctionCache[t]=o,o},e.prototype.createFunctionBody=function(t){return t.indexOf("return")>=0?t:"return "+t+";"},kf([Gf(0,tt("loggerFactory"))],e.prototype,"setBeans",null),e=kf([X("expressionService")],e)}(Bt),Bf=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),zf=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Hf=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.templateCache={},e.waitingCallbacks={},e}return Bf(e,t),e.prototype.getTemplate=function(t,e){var o=this.templateCache[t];if(o)return o;var n=this.waitingCallbacks[t],r=this;if(!n){n=[],this.waitingCallbacks[t]=n;var i=new XMLHttpRequest;i.onload=function(){r.handleHttpResult(this,t)},i.open("GET",t),i.send()}return e&&n.push(e),null},e.prototype.handleHttpResult=function(t,e){if(200===t.status&&null!==t.response){this.templateCache[e]=t.response||t.responseText;for(var o=this.waitingCallbacks[e],n=0;n<o.length;n++){(0,o[n])()}}else console.warn("AG Grid: Unable to get template error ".concat(t.status," - ").concat(e))},e=zf([X("templateService")],e)}(Bt),jf=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Uf=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Wf=function(t,e){return function(o,n){e(o,n,t)}},Kf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return jf(e,t),e.prototype.setBeans=function(t){this.logging=t.get("debug")},e.prototype.create=function(t){return new qf(t,this.isLogging.bind(this))},e.prototype.isLogging=function(){return this.logging},Uf([Wf(0,tt("gridOptionsService"))],e.prototype,"setBeans",null),e=Uf([X("loggerFactory")],e)}(Bt),qf=function(){function t(t,e){this.name=t,this.isLoggingFunc=e}return t.prototype.isLogging=function(){return this.isLoggingFunc()},t.prototype.log=function(t){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+t)},t}(),Yf=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Zf=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Xf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yf(e,t),e.prototype.setComp=function(t,e,o){var n=this;this.view=t,this.eGridHostDiv=e,this.eGui=o,this.eGui.setAttribute("grid-id",this.context.getGridId()),this.dragAndDropService.addDropTarget({getContainer:function(){return n.eGui},isInterestedIn:function(t){return t===Ba.HeaderCell||t===Ba.ToolPanel},getIconName:function(){return Wa.ICON_NOT_ALLOWED}}),this.mouseEventService.stampTopLevelGridCompWithGridInstance(e),this.createManagedBean(new Fl(this.view)),this.addRtlSupport();var r=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(function(){return r()}),this.ctrlsService.registerGridCtrl(this)},e.prototype.isDetailGrid=function(){var t,e=this.focusService.findTabbableParent(this.getGui());return(null===(t=null===e||void 0===e?void 0:e.getAttribute("row-id"))||void 0===t?void 0:t.startsWith("detail"))||!1},e.prototype.showDropZones=function(){return j.__isRegistered(V.RowGroupingModule,this.context.getGridId())},e.prototype.showSideBar=function(){return j.__isRegistered(V.SideBarModule,this.context.getGridId())},e.prototype.showStatusBar=function(){return j.__isRegistered(V.StatusBarModule,this.context.getGridId())},e.prototype.showWatermark=function(){return j.__isRegistered(V.EnterpriseCoreModule,this.context.getGridId())},e.prototype.onGridSizeChanged=function(){var t={type:qt.EVENT_GRID_SIZE_CHANGED,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(t)},e.prototype.addRtlSupport=function(){var t=this.gridOptionsService.get("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(t)},e.prototype.destroyGridUi=function(){this.view.destroyGridUi()},e.prototype.getGui=function(){return this.eGui},e.prototype.setResizeCursor=function(t){this.view.setCursor(t?"ew-resize":null)},e.prototype.disableUserSelect=function(t){this.view.setUserSelect(t?"none":null)},e.prototype.focusNextInnerContainer=function(t){var e=this.gridOptionsService.getDocument(),o=this.view.getFocusableContainers(),n=o.findIndex(function(t){return t.contains(e.activeElement)})+(t?-1:1);return!(n<=0||n>=o.length)&&this.focusService.focusInto(o[n])},e.prototype.focusInnerElement=function(t){var e=this.view.getFocusableContainers(),o=this.columnModel.getAllDisplayedColumns();if(t){if(e.length>1)return this.focusService.focusInto(ft(e),!0);var n=ft(o);if(this.focusService.focusGridView(n,!0))return!0}if(0===this.gridOptionsService.get("headerHeight")||this.gridOptionsService.get("suppressHeaderFocus")){if(this.focusService.focusGridView(o[0]))return!0;for(var r=1;r<e.length;r++)if(this.focusService.focusInto(e[r]))return!0;return!1}return this.focusService.focusFirstHeader()},e.prototype.forceFocusOutOfContainer=function(t){void 0===t&&(t=!1),this.view.forceFocusOutOfContainer(t)},Zf([J("focusService")],e.prototype,"focusService",void 0),Zf([J("resizeObserverService")],e.prototype,"resizeObserverService",void 0),Zf([J("columnModel")],e.prototype,"columnModel",void 0),Zf([J("ctrlsService")],e.prototype,"ctrlsService",void 0),Zf([J("mouseEventService")],e.prototype,"mouseEventService",void 0),Zf([J("dragAndDropService")],e.prototype,"dragAndDropService",void 0),e}(Bt),Jf=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Qf=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},$f=function(t){function e(e){var o=t.call(this)||this;return o.eGridDiv=e,o}return Jf(e,t),e.prototype.postConstruct=function(){var t=this;this.logger=this.loggerFactory.create("GridComp");var e={destroyGridUi:function(){return t.destroyBean(t)},setRtlClass:function(e){return t.addCssClass(e)},forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:function(e){t.getGui().style.userSelect=null!=e?e:"",t.getGui().style.webkitUserSelect=null!=e?e:""},setCursor:function(e){t.getGui().style.cursor=null!=e?e:""}};this.ctrl=this.createManagedBean(new Xf);var o=this.createTemplate();this.setTemplate(o),this.ctrl.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:function(){},focusInnerElement:function(e){return t.ctrl.focusInnerElement(e)},forceFocusOutWhenTabGuardsAreEmpty:!0})},e.prototype.insertGridIntoDom=function(){var t=this,e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(function(){t.eGridDiv.removeChild(e),t.logger.log("Grid removed from DOM")})},e.prototype.updateLayoutClasses=function(t,e){var o=this.eRootWrapperBody.classList;o.toggle(vl.AUTO_HEIGHT,e.autoHeight),o.toggle(vl.NORMAL,e.normal),o.toggle(vl.PRINT,e.print),this.addOrRemoveCssClass(vl.AUTO_HEIGHT,e.autoHeight),this.addOrRemoveCssClass(vl.NORMAL,e.normal),this.addOrRemoveCssClass(vl.PRINT,e.print)},e.prototype.createTemplate=function(){var t=this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",e=this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"",o=this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"",n=this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"";return'<div class="ag-root-wrapper" role="presentation">\n                '.concat(t,'\n                <div class="ag-root-wrapper-body" ref="rootWrapperBody" role="presentation">\n                    <ag-grid-body ref="gridBody"></ag-grid-body>\n                    ').concat(e,"\n                </div>\n                ").concat(o,"\n                <ag-pagination></ag-pagination>\n                ").concat(n,"\n            </div>")},e.prototype.getFocusableElement=function(){return this.eRootWrapperBody},e.prototype.getFocusableContainers=function(){var t=[this.gridBodyComp.getGui()];return this.sideBarComp&&t.push(this.sideBarComp.getGui()),t.filter(function(t){return gn(t)})},Qf([J("loggerFactory")],e.prototype,"loggerFactory",void 0),Qf([xr("gridBody")],e.prototype,"gridBodyComp",void 0),Qf([xr("sideBar")],e.prototype,"sideBarComp",void 0),Qf([xr("rootWrapperBody")],e.prototype,"eRootWrapperBody",void 0),Qf([Y],e.prototype,"postConstruct",null),e}(pd),tg=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),eg=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},og=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},ng=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},rg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return tg(e,t),o=e,e.prototype.progressSort=function(t,e,o){var n=this.getNextSortDirection(t);this.setSortForColumn(t,n,e,o)},e.prototype.setSortForColumn=function(t,e,o,n){"asc"!==e&&"desc"!==e&&(e=null);var r=[t];if(this.gridOptionsService.isColumnsSortingCoupledToGroup()&&t.getColDef().showRowGroup){var i=this.columnModel.getSourceColumnsForGroupColumn(t),a=null===i||void 0===i?void 0:i.filter(function(t){return t.isSortable()});a&&(r=ng([t],og(a),!1))}r.forEach(function(t){return t.setSort(e,n)});var s=[];if(!((o||this.gridOptionsService.get("alwaysMultiSort"))&&!this.gridOptionsService.get("suppressMultiSort"))){var l=this.clearSortBarTheseColumns(r,n);s.push.apply(s,ng([],og(l),!1))}this.updateSortIndex(t),s.push.apply(s,ng([],og(r),!1)),this.dispatchSortChangedEvents(n,s)},e.prototype.updateSortIndex=function(t){var e=this.gridOptionsService.isColumnsSortingCoupledToGroup(),o=this.columnModel.getGroupDisplayColumnForGroup(t.getId()),n=e&&o||t,r=this.getColumnsWithSortingOrdered();this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(function(t){return t.setSortIndex(null)});var i=r.filter(function(t){return(!e||!t.getColDef().showRowGroup)&&t!==n});(n.getSort()?ng(ng([],og(i),!1),[n],!1):i).forEach(function(t,e){t.setSortIndex(e)})},e.prototype.onSortChanged=function(t,e){this.dispatchSortChangedEvents(t,e)},e.prototype.isSortActive=function(){var t=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(function(t){return!!t.getSort()});return t&&t.length>0},e.prototype.dispatchSortChangedEvents=function(t,e){var o={type:qt.EVENT_SORT_CHANGED,source:t};e&&(o.columns=e),this.eventService.dispatchEvent(o)},e.prototype.clearSortBarTheseColumns=function(t,e){var o=[];return this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(function(n){t.includes(n)||(n.getSort()&&o.push(n),n.setSort(void 0,e))}),o},e.prototype.getNextSortDirection=function(t){var e;if(e=t.getColDef().sortingOrder?t.getColDef().sortingOrder:this.gridOptionsService.get("sortingOrder")?this.gridOptionsService.get("sortingOrder"):o.DEFAULT_SORTING_ORDER,!Array.isArray(e)||e.length<=0)return console.warn("AG Grid: sortingOrder must be an array with at least one element, currently it's ".concat(e)),null;var n,r=e.indexOf(t.getSort()),i=r<0,a=r==e.length-1;return n=i||a?e[0]:e[r+1],o.DEFAULT_SORTING_ORDER.indexOf(n)<0?(console.warn("AG Grid: invalid sort type "+n),null):n},e.prototype.getIndexedSortMap=function(){var t=this,e=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(function(t){return!!t.getSort()});if(this.columnModel.isPivotMode()){var o=this.gridOptionsService.isColumnsSortingCoupledToGroup();e=e.filter(function(e){var n=!!e.getAggFunc(),r=!e.isPrimary(),i=o?t.columnModel.getGroupDisplayColumnForGroup(e.getId()):e.getColDef().showRowGroup;return n||r||i})}var n=this.columnModel.getRowGroupColumns().filter(function(t){return!!t.getSort()}),r=this.gridOptionsService.isColumnsSortingCoupledToGroup()&&!!n.length;r&&(e=ng([],og(new Set(e.map(function(e){var o;return null!==(o=t.columnModel.getGroupDisplayColumnForGroup(e.getId()))&&void 0!==o?o:e}))),!1));var i={};e.forEach(function(t,e){return i[t.getId()]=e}),e.sort(function(t,e){var o=t.getSortIndex(),n=e.getSortIndex();return null!=o&&null!=n?o-n:null==o&&null==n?i[t.getId()]>i[e.getId()]?1:-1:null==n?-1:1});var a=new Map;return e.forEach(function(t,e){return a.set(t,e)}),r&&n.forEach(function(e){var o=t.columnModel.getGroupDisplayColumnForGroup(e.getId());a.set(e,a.get(o))}),a},e.prototype.getColumnsWithSortingOrdered=function(){return ng([],og(this.getIndexedSortMap().entries()),!1).sort(function(t,e){var o=og(t,2);o[0];var n=o[1],r=og(e,2);return r[0],n-r[1]}).map(function(t){return og(t,1)[0]})},e.prototype.getSortModel=function(){return this.getColumnsWithSortingOrdered().filter(function(t){return t.getSort()}).map(function(t){return{sort:t.getSort(),colId:t.getId()}})},e.prototype.getSortOptions=function(){return this.getColumnsWithSortingOrdered().filter(function(t){return t.getSort()}).map(function(t){return{sort:t.getSort(),column:t}})},e.prototype.canColumnDisplayMixedSort=function(t){var e=this.gridOptionsService.isColumnsSortingCoupledToGroup(),o=!!t.getColDef().showRowGroup;return e&&o},e.prototype.getDisplaySortForColumn=function(t){var e=this.columnModel.getSourceColumnsForGroupColumn(t);if(!this.canColumnDisplayMixedSort(t)||!(null===e||void 0===e?void 0:e.length))return t.getSort();var o=null!=t.getColDef().field||!!t.getColDef().valueGetter?ng([t],og(e),!1):e,n=o[0].getSort();return o.every(function(t){return t.getSort()==n})?n:"mixed"},e.prototype.getDisplaySortIndexForColumn=function(t){return this.getIndexedSortMap().get(t)},e.DEFAULT_SORTING_ORDER=["asc","desc",null],eg([J("columnModel")],e.prototype,"columnModel",void 0),e=o=eg([X("sortController")],e)}(Bt),ig=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ag=function(){return(ag=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},sg=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},lg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return ig(e,t),o=e,e.addKeyboardModeEvents=function(t){this.instanceCount>0||(t.addEventListener("keydown",o.toggleKeyboardMode),t.addEventListener("mousedown",o.toggleKeyboardMode))},e.removeKeyboardModeEvents=function(t){this.instanceCount>0||(t.addEventListener("keydown",o.toggleKeyboardMode),t.addEventListener("mousedown",o.toggleKeyboardMode))},e.toggleKeyboardMode=function(t){var e=o.keyboardModeActive,n="keydown"===t.type;n&&(t.ctrlKey||t.metaKey||t.altKey)||e!==n&&(o.keyboardModeActive=n)},e.unregisterGridCompController=function(t){o.removeKeyboardModeEvents(t)},e.prototype.init=function(){var t=this,e=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,qt.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.addManagedListener(this.eventService,qt.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_GROUP_OPENED,e),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(function(e){t.gridCtrl=e.gridCtrl})},e.prototype.registerKeyboardFocusEvents=function(){var t=this.gridOptionsService.getDocument();o.addKeyboardModeEvents(t),o.instanceCount++,this.addDestroyFunc(function(){o.instanceCount--,o.unregisterGridCompController(t)})},e.prototype.onColumnEverythingChanged=function(){if(this.focusedCellPosition){var t=this.focusedCellPosition.column,e=this.columnModel.getGridColumn(t.getId());t!==e&&this.clearFocusedCell()}},e.prototype.isKeyboardMode=function(){return o.keyboardModeActive},e.prototype.getFocusCellToUseAfterRefresh=function(){var t=this.gridOptionsService.getDocument();return this.gridOptionsService.get("suppressFocusAfterRefresh")||!this.focusedCellPosition?null:this.isDomDataMissingInHierarchy(t.activeElement,Pu.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition},e.prototype.getFocusHeaderToUseAfterRefresh=function(){var t=this.gridOptionsService.getDocument();return this.gridOptionsService.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition?null:this.isDomDataMissingInHierarchy(t.activeElement,op.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition},e.prototype.isDomDataMissingInHierarchy=function(t,e){for(var o=t;o;){if(this.gridOptionsService.getDomData(o,e))return!1;o=o.parentNode}return!0},e.prototype.getFocusedCell=function(){return this.focusedCellPosition},e.prototype.shouldRestoreFocus=function(t){var e=this;return!!this.isCellRestoreFocused(t)&&(setTimeout(function(){e.restoredFocusedCellPosition=null},0),!0)},e.prototype.isCellRestoreFocused=function(t){return null!=this.restoredFocusedCellPosition&&this.cellPositionUtils.equals(t,this.restoredFocusedCellPosition)},e.prototype.setRestoreFocusedCell=function(t){"react"===this.getFrameworkOverrides().renderingEngine&&(this.restoredFocusedCellPosition=t)},e.prototype.getFocusEventParams=function(){var t=this.focusedCellPosition,e=t.rowIndex,o=t.rowPinned,n={rowIndex:e,rowPinned:o,column:t.column,isFullWidthCell:!1},r=this.rowRenderer.getRowByPosition({rowIndex:e,rowPinned:o});return r&&(n.isFullWidthCell=r.isFullWidth()),n},e.prototype.clearFocusedCell=function(){if(this.restoredFocusedCellPosition=null,null!=this.focusedCellPosition){var t=ag({type:qt.EVENT_CELL_FOCUS_CLEARED},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(t)}},e.prototype.setFocusedCell=function(t){var e=t.column,o=t.rowIndex,r=t.rowPinned,i=t.forceBrowserFocus,a=void 0!==i&&i,s=t.preventScrollOnBrowserFocus,l=void 0!==s&&s,u=this.columnModel.getGridColumn(e);if(u){this.focusedCellPosition=u?{rowIndex:o,rowPinned:n(r),column:u}:null;var c=ag(ag({type:qt.EVENT_CELL_FOCUSED},this.getFocusEventParams()),{forceBrowserFocus:a,preventScrollOnBrowserFocus:l,floating:null});this.eventService.dispatchEvent(c)}else this.focusedCellPosition=null},e.prototype.isCellFocused=function(t){return null!=this.focusedCellPosition&&this.cellPositionUtils.equals(t,this.focusedCellPosition)},e.prototype.isRowNodeFocused=function(t){return this.isRowFocused(t.rowIndex,t.rowPinned)},e.prototype.isHeaderWrapperFocused=function(t){if(null==this.focusedHeaderPosition)return!1;var e=t.getColumnGroupChild(),o=t.getRowIndex(),n=t.getPinned(),r=this.focusedHeaderPosition,i=r.column,a=r.headerRowIndex;return e===i&&o===a&&n==i.getPinned()},e.prototype.clearFocusedHeader=function(){this.focusedHeaderPosition=null},e.prototype.getFocusedHeader=function(){return this.focusedHeaderPosition},e.prototype.setFocusedHeader=function(t,e){this.focusedHeaderPosition={headerRowIndex:t,column:e}},e.prototype.focusHeaderPosition=function(t){if(this.gridOptionsService.get("suppressHeaderFocus"))return!1;var e=t.direction,o=t.fromTab,n=t.allowUserOverride,r=t.event,i=t.fromCell,a=t.rowWithoutSpanValue,s=t.headerPosition;if(i&&this.filterManager.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(s);if(n){var l,u=this.getFocusedHeader(),c=this.headerNavigationService.getHeaderRowCount();if(o){if(l=this.gridOptionsService.getCallback("tabToNextHeader"))s=l({backwards:"Before"===e,previousHeaderPosition:u,nextHeaderPosition:s,headerRowCount:c})}else if((l=this.gridOptionsService.getCallback("navigateToNextHeader"))&&r)s=l({key:r.key,previousHeaderPosition:u,nextHeaderPosition:s,headerRowCount:c,event:r})}if(!s)return!1;if(-1===s.headerRowIndex)return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(s):this.focusGridView(s.column);this.headerNavigationService.scrollToColumn(s.column,e);var p=this.ctrlsService.getHeaderRowContainerCtrl(s.column.getPinned()).focusHeader(s.headerRowIndex,s.column,r);return p&&(null!=a||i)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(null!==a&&void 0!==a?a:-1),p},e.prototype.focusFirstHeader=function(){var t=this.columnModel.getAllDisplayedColumns()[0];if(!t)return!1;t.getParent()&&(t=this.columnModel.getColumnGroupAtLevel(t,0));var e=this.headerPositionUtils.getHeaderIndexToFocus(t,0);return this.focusHeaderPosition({headerPosition:e,rowWithoutSpanValue:0})},e.prototype.focusLastHeader=function(t){var e=this.headerNavigationService.getHeaderRowCount()-1,o=ft(this.columnModel.getAllDisplayedColumns());return this.focusHeaderPosition({headerPosition:{headerRowIndex:e,column:o},rowWithoutSpanValue:-1,event:t})},e.prototype.focusPreviousFromFirstCell=function(t){return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(t)},e.prototype.isAnyCellFocused=function(){return!!this.focusedCellPosition},e.prototype.isRowFocused=function(t,e){return null!=this.focusedCellPosition&&(this.focusedCellPosition.rowIndex===t&&this.focusedCellPosition.rowPinned===n(e))},e.prototype.findFocusableElements=function(t,e,o){void 0===o&&(o=!1);var n=Xo;e&&(n+=", "+e),o&&(n+=', [tabindex="-1"]');var r=Array.prototype.slice.apply(t.querySelectorAll("[tabindex], input, select, button, textarea, [href]")).filter(function(t){return gn(t)}),i=Array.prototype.slice.apply(t.querySelectorAll(n));if(!i.length)return r;var a;return a=i,r.filter(function(t){return-1===a.indexOf(t)})},e.prototype.focusInto=function(t,e,o){void 0===e&&(e=!1),void 0===o&&(o=!1);var n=this.findFocusableElements(t,null,o),r=e?ft(n):n[0];return!!r&&(r.focus({preventScroll:!0}),!0)},e.prototype.findFocusableElementBeforeTabGuard=function(t,e){if(!e)return null;var o=this.findFocusableElements(t),n=o.indexOf(e);if(-1===n)return null;for(var r=-1,i=n-1;i>=0;i--)if(o[i].classList.contains(Up.TAB_GUARD_TOP)){r=i;break}return r<=0?null:o[r-1]},e.prototype.findNextFocusableElement=function(t,e,o){void 0===t&&(t=this.eGridDiv);var n=this.findFocusableElements(t,e?':not([tabindex="-1"])':null),r=this.gridOptionsService.getDocument().activeElement,i=(e?n.findIndex(function(t){return t.contains(r)}):n.indexOf(r))+(o?-1:1);return i<0||i>=n.length?null:n[i]},e.prototype.isTargetUnderManagedComponent=function(t,e){if(!e)return!1;var o=t.querySelectorAll(".".concat(Nr.FOCUS_MANAGED_CLASS));if(!o.length)return!1;for(var n=0;n<o.length;n++)if(o[n].contains(e))return!0;return!1},e.prototype.findTabbableParent=function(t,e){void 0===e&&(e=5);for(var o=0;t&&null===Ro(t)&&++o<=e;)t=t.parentElement;return null===Ro(t)?null:t},e.prototype.focusGridView=function(t,e){if(this.gridOptionsService.get("suppressCellFocus"))return e?this.gridOptionsService.get("suppressHeaderFocus")?this.focusNextGridCoreContainer(!0,!0):this.focusLastHeader():this.focusNextGridCoreContainer(!1);var o=e?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!o)return!1;var r=o.rowIndex,i=o.rowPinned,a=this.getFocusedHeader();if(!t&&a&&(t=a.column),null==r||!t)return!1;if(this.navigationService.ensureCellVisible({rowIndex:r,column:t,rowPinned:i}),this.setFocusedCell({rowIndex:r,column:t,rowPinned:n(i),forceBrowserFocus:!0}),this.rangeService){var s={rowIndex:r,rowPinned:i,column:t};this.rangeService.setRangeToCell(s)}return!0},e.prototype.focusNextGridCoreContainer=function(t,e){return void 0===e&&(e=!1),!(e||!this.gridCtrl.focusNextInnerContainer(t))||((e||!t&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(t),!1)},e.prototype.focusAdvancedFilter=function(t){return this.advancedFilterFocusColumn=null===t||void 0===t?void 0:t.column,this.advancedFilterService.getCtrl().focusHeaderComp()},e.prototype.focusNextFromAdvancedFilter=function(t,e){var o,n,r=null!==(o=e?void 0:this.advancedFilterFocusColumn)&&void 0!==o?o:null===(n=this.columnModel.getAllDisplayedColumns())||void 0===n?void 0:n[0];return t?this.focusHeaderPosition({headerPosition:{column:r,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(r)},e.prototype.clearAdvancedFilterColumn=function(){this.advancedFilterFocusColumn=void 0},e.keyboardModeActive=!1,e.instanceCount=0,sg([J("eGridDiv")],e.prototype,"eGridDiv",void 0),sg([J("columnModel")],e.prototype,"columnModel",void 0),sg([J("headerNavigationService")],e.prototype,"headerNavigationService",void 0),sg([J("headerPositionUtils")],e.prototype,"headerPositionUtils",void 0),sg([J("rowRenderer")],e.prototype,"rowRenderer",void 0),sg([J("rowPositionUtils")],e.prototype,"rowPositionUtils",void 0),sg([J("cellPositionUtils")],e.prototype,"cellPositionUtils",void 0),sg([Q("rangeService")],e.prototype,"rangeService",void 0),sg([J("navigationService")],e.prototype,"navigationService",void 0),sg([J("ctrlsService")],e.prototype,"ctrlsService",void 0),sg([J("filterManager")],e.prototype,"filterManager",void 0),sg([Q("advancedFilterService")],e.prototype,"advancedFilterService",void 0),sg([Y],e.prototype,"init",null),e=o=sg([X("focusService")],e)}(Bt),ug=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),cg=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},pg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ug(e,t),e.prototype.setMouseOver=function(t){this.selectedColumns=t;var e={type:qt.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(e)},e.prototype.clearMouseOver=function(){this.selectedColumns=null;var t={type:qt.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(t)},e.prototype.isHovered=function(t){return!!this.selectedColumns&&this.selectedColumns.indexOf(t)>=0},e=cg([X("columnHoverService")],e)}(Bt),dg=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),hg=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},fg=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.executeNextFuncs=[],e.executeLaterFuncs=[],e.active=!1,e.suppressAnimation=!1,e.animationThreadCount=0,e}return dg(e,t),e.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady(function(e){return t.gridBodyCtrl=e.gridBodyCtrl})},e.prototype.isActive=function(){return this.active&&!this.suppressAnimation},e.prototype.setSuppressAnimation=function(t){this.suppressAnimation=t},e.prototype.start=function(){this.active||this.gridOptionsService.get("suppressColumnMoveAnimation")||this.gridOptionsService.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)},e.prototype.finish=function(){var t=this;this.active&&this.flush(function(){t.active=!1})},e.prototype.executeNextVMTurn=function(t){this.active?this.executeNextFuncs.push(t):t()},e.prototype.executeLaterVMTurn=function(t){this.active?this.executeLaterFuncs.push(t):t()},e.prototype.ensureAnimationCssClassPresent=function(){var t=this;this.animationThreadCount++;var e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(function(){t.animationThreadCount===e&&t.gridBodyCtrl.setColumnMovingCss(!1)})},e.prototype.flush=function(t){var e=this;if(0!==this.executeNextFuncs.length||0!==this.executeLaterFuncs.length){var o=function(t){for(;t.length;){var e=t.pop();e&&e()}};this.getFrameworkOverrides().wrapIncoming(function(){window.setTimeout(function(){return o(e.executeNextFuncs)},0),window.setTimeout(function(){o(e.executeLaterFuncs),t()},200)})}else t()},hg([J("ctrlsService")],e.prototype,"ctrlsService",void 0),hg([Y],e.prototype,"postConstruct",null),e=hg([X("columnAnimationService")],e)}(Bt),gg=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),yg=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},vg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return gg(e,t),e.prototype.postConstruct=function(){var t=this;this.ctrlsService.whenReady(function(e){t.centerRowContainerCon=e.centerRowContainerCtrl,t.addManagedListener(t.eventService,qt.EVENT_BODY_HEIGHT_CHANGED,t.checkPageSize.bind(t)),t.addManagedListener(t.eventService,qt.EVENT_SCROLL_VISIBILITY_CHANGED,t.checkPageSize.bind(t)),t.addManagedPropertyListener("paginationAutoPageSize",t.onPaginationAutoSizeChanged.bind(t)),t.checkPageSize()})},e.prototype.notActive=function(){return!this.gridOptionsService.get("paginationAutoPageSize")||null==this.centerRowContainerCon},e.prototype.onPaginationAutoSizeChanged=function(){this.notActive()?this.paginationProxy.unsetAutoCalculatedPageSize():this.checkPageSize()},e.prototype.checkPageSize=function(){var t=this;if(!this.notActive()){var e=this.centerRowContainerCon.getViewportSizeFeature().getBodyHeight();if(e>0){var o=function(){var o=t.gridOptionsService.getRowHeightAsNumber(),n=Math.floor(e/o);t.paginationProxy.setPageSize(n,"autoCalculated")};this.isBodyRendered?N(function(){return o()},50)():(o(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}},yg([J("ctrlsService")],e.prototype,"ctrlsService",void 0),yg([J("paginationProxy")],e.prototype,"paginationProxy",void 0),yg([Y],e.prototype,"postConstruct",null),e=yg([X("paginationAutoPageSizeService")],e)}(Bt),mg=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Cg=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},_g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cacheVersion=0,e}return mg(e,t),e.prototype.init=function(){this.active=this.gridOptionsService.get("valueCache"),this.neverExpires=this.gridOptionsService.get("valueCacheNeverExpires")},e.prototype.onDataChanged=function(){this.neverExpires||this.expire()},e.prototype.expire=function(){this.cacheVersion++},e.prototype.setValue=function(t,e,o){this.active&&(t.__cacheVersion!==this.cacheVersion&&(t.__cacheVersion=this.cacheVersion,t.__cacheData={}),t.__cacheData[e]=o)},e.prototype.getValue=function(t,e){if(this.active&&t.__cacheVersion===this.cacheVersion)return t.__cacheData[e]},Cg([Y],e.prototype,"init",null),e=Cg([X("valueCache")],e)}(Bt),wg=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),bg=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Sg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wg(e,t),e.prototype.init=function(){"clientSide"===this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,qt.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))},e.prototype.onCellValueChanged=function(t){"paste"!==t.source&&this.doChangeDetection(t.node,t.column)},e.prototype.doChangeDetection=function(t,e){if(!this.gridOptionsService.get("suppressChangeDetection")){var o=[t];if(this.clientSideRowModel&&!t.isRowPinned()){var n=this.gridOptionsService.get("aggregateOnlyChangedColumns"),r=new Jd(n,this.clientSideRowModel.getRootNode());r.addParentNode(t.parent,[e]),this.clientSideRowModel.doAggregate(r),r.forEachChangedNodeDepthFirst(function(t){o.push(t)})}this.rowRenderer.refreshCells({rowNodes:o})}},bg([J("rowModel")],e.prototype,"rowModel",void 0),bg([J("rowRenderer")],e.prototype,"rowRenderer",void 0),bg([Y],e.prototype,"init",null),e=bg([X("changeDetectionService")],e)}(Bt),Eg=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),xg=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Tg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Eg(e,t),e.prototype.adaptFunction=function(t,e){var o=this.componentMetadataProvider.retrieve(t);return o&&o.functionAdapter?o.functionAdapter(e):null},e.prototype.adaptCellRendererFunction=function(t){return function(){function e(){}return e.prototype.refresh=function(t){return!1},e.prototype.getGui=function(){return this.eGui},e.prototype.init=function(e){var o=t(e),n=typeof o;this.eGui="string"!==n&&"number"!==n&&"boolean"!==n?null!=o?o:yn("<span></span>"):yn("<span>"+o+"</span>")},e}()},e.prototype.doesImplementIComponent=function(t){return!!t&&(t.prototype&&"getGui"in t.prototype)},xg([J("componentMetadataProvider")],e.prototype,"componentMetadataProvider",void 0),e=xg([X("agComponentUtils")],e)}(Bt),Og=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Rg=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Pg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Og(e,t),e.prototype.postConstruct=function(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[]},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}},e.prototype.retrieve=function(t){return this.componentMetaData[t]},Rg([J("agComponentUtils")],e.prototype,"agComponentUtils",void 0),Rg([Y],e.prototype,"postConstruct",null),e=Rg([X("componentMetadataProvider")],e)}(Bt),Ag=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Dg=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Mg=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},Ig=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},Lg={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:20,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:56,headerCellMinWidth:48,listItemHeight:32,rowHeight:48,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:32,headerCellMinWidth:24,listItemHeight:24,rowHeight:28,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:48,headerCellMinWidth:36,listItemHeight:24,rowHeight:42,chartMenuPanelWidth:240},"ag-theme-quartz":{headerHeight:48,headerCellMinWidth:36,listItemHeight:24,rowHeight:42,chartMenuPanelWidth:260}},Fg={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]},Ng=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.calculatedSizes={},e}return Ag(e,t),e.prototype.postConstruct=function(){var t,e=this,o=null!==(t=this.getTheme().el)&&void 0!==t?t:this.eGridDiv;this.addManagedPropertyListener("rowHeight",function(){return e.refreshRowHeightVariable()}),this.mutationObserver=new MutationObserver(function(){e.calculatedSizes={},e.fireGridStylesChangedEvent()}),this.mutationObserver.observe(o||this.eGridDiv,{attributes:!0,attributeFilter:["class"]})},e.prototype.fireGridStylesChangedEvent=function(){var t={type:qt.EVENT_GRID_STYLES_CHANGED};this.eventService.dispatchEvent(t)},e.prototype.getSassVariable=function(t){var e=this.getTheme(),o=e.themeFamily,n=e.el;if(o&&0===o.indexOf("ag-theme")){this.calculatedSizes||(this.calculatedSizes={}),this.calculatedSizes[o]||(this.calculatedSizes[o]={});var r=this.calculatedSizes[o][t];return null!=r?r:(this.calculatedSizes[o][t]=this.calculateValueForSassProperty(t,o,n),this.calculatedSizes[o][t])}},e.prototype.calculateValueForSassProperty=function(t,e,o){var n,r="ag-theme-"+(e.match("material")?"material":e.match("balham")?"balham":e.match("alpine")?"alpine":"custom"),i=Lg[r][t],a=this.gridOptionsService.getDocument();if(o||(o=this.eGridDiv),!Fg[t])return i;var s=Fg[t],l=a.createElement("div"),u=Array.from(o.classList);(n=l.classList).add.apply(n,Ig([e],Mg(u),!1)),l.style.position="absolute";var c=s.reduce(function(t,e){var o=a.createElement("div");return o.style.position="static",o.classList.add(e),t.appendChild(o),o},l),p=0;if(a.body){a.body.appendChild(l);var d=-1!==t.toLowerCase().indexOf("height")?"height":"width";p=parseInt(window.getComputedStyle(c)[d],10),a.body.removeChild(l)}return p||i},e.prototype.isThemeDark=function(){var t=this.getTheme().theme;return!!t&&t.indexOf("dark")>=0},e.prototype.chartMenuPanelWidth=function(){return this.getSassVariable("chartMenuPanelWidth")},e.prototype.getTheme=function(){for(var t=/\bag-(material|(?:theme-([\w\-]*)))\b/g,e=this.eGridDiv,o=null,n=[];e;){if(o=t.exec(e.className)){var r=e.className.match(t);r&&(n=r);break}e=e.parentElement||void 0}if(!o)return{allThemes:n};var i=o[0];return{theme:i,el:e,themeFamily:i.replace(/-dark$/,""),allThemes:n}},e.prototype.getFromTheme=function(t,e){var o;return null!==(o=this.getSassVariable(e))&&void 0!==o?o:t},e.prototype.getDefaultRowHeight=function(){return this.getFromTheme(25,"rowHeight")},e.prototype.getListItemHeight=function(){return this.getFromTheme(20,"listItemHeight")},e.prototype.refreshRowHeightVariable=function(){var t=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),e=this.gridOptionsService.get("rowHeight");if(null==e||isNaN(e)||!isFinite(e))return null!==t&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;var o="".concat(e,"px");return t!=o?(this.eGridDiv.style.setProperty("--ag-line-height",o),e):""!=t?parseFloat(t):-1},e.prototype.getMinColWidth=function(){var t=this.getFromTheme(null,"headerCellMinWidth");return r(t)?Math.max(t,10):10},e.prototype.destroy=function(){this.calculatedSizes=null,this.mutationObserver&&this.mutationObserver.disconnect(),t.prototype.destroy.call(this)},Dg([J("eGridDiv")],e.prototype,"eGridDiv",void 0),Dg([Y],e.prototype,"postConstruct",null),e=Dg([X("environment")],e)}(Bt),kg=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Gg=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Vg=function(t,e){return function(o,n){e(o,n,t)}},Bg=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollY=0,e.uiBodyHeight=0,e}return kg(e,t),e.prototype.agWire=function(t){this.logger=t.create("RowContainerHeightService")},e.prototype.postConstruct=function(){this.addManagedListener(this.eventService,qt.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=Po(),this.logger.log("maxDivHeight = "+this.maxDivHeight)},e.prototype.isStretching=function(){return this.stretching},e.prototype.getDivStretchOffset=function(){return this.divStretchOffset},e.prototype.updateOffset=function(){if(this.stretching){var t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,e=this.getUiBodyHeight();(t!==this.scrollY||e!==this.uiBodyHeight)&&(this.scrollY=t,this.uiBodyHeight=e,this.calculateOffset())}},e.prototype.calculateOffset=function(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;var t=this.scrollY/this.maxScrollY,e=t*this.pixelsToShave;this.logger.log("Div Stretch Offset = ".concat(e," (").concat(this.pixelsToShave," * ").concat(t,")")),this.setDivStretchOffset(e)},e.prototype.setUiContainerHeight=function(t){t!==this.uiContainerHeight&&(this.uiContainerHeight=t,this.eventService.dispatchEvent({type:qt.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))},e.prototype.clearOffset=function(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)},e.prototype.setDivStretchOffset=function(t){var e="number"===typeof t?Math.floor(t):null;this.divStretchOffset!==e&&(this.divStretchOffset=e,this.eventService.dispatchEvent({type:qt.EVENT_HEIGHT_SCALE_CHANGED}))},e.prototype.setModelHeight=function(t){this.modelHeight=t,this.stretching=null!=t&&this.maxDivHeight>0&&t>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()},e.prototype.getUiContainerHeight=function(){return this.uiContainerHeight},e.prototype.getRealPixelPosition=function(t){return t-this.divStretchOffset},e.prototype.getUiBodyHeight=function(){var t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return t.bottom-t.top},e.prototype.getScrollPositionForPixel=function(t){if(this.pixelsToShave<=0)return t;var e=t/(this.modelHeight-this.getUiBodyHeight());return this.maxScrollY*e},Gg([J("ctrlsService")],e.prototype,"ctrlsService",void 0),Gg([Vg(0,tt("loggerFactory"))],e.prototype,"agWire",null),Gg([Y],e.prototype,"postConstruct",null),e=Gg([X("rowContainerHeightService")],e)}(Bt),zg=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Hg=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},jg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zg(e,t),e.prototype.init=function(){var t=this;this.addManagedPropertyListener("isRowSelectable",function(){return t.updateSelectable()})},e.prototype.updateSelectableAfterGrouping=function(){this.updateSelectable(!0)},e.prototype.updateSelectable=function(t){void 0===t&&(t=!1);var e=!!this.gridOptionsService.get("rowSelection"),o=this.gridOptionsService.get("isRowSelectable");if(e&&o){var n=this.gridOptionsService.get("groupSelectsChildren"),r="clientSide"===this.rowModel.getType()&&n,i=[],a=function(e){if(!t||e.group)if(r&&e.group){var n=e.childrenAfterGroup.some(function(t){return!0===t.selectable});e.setRowSelectable(n,!0)}else{var a=!o||o(e);e.setRowSelectable(a,!0),!a&&e.isSelected()&&i.push(e)}};if(r){var s=this.rowModel;new Jd(!1,s.getRootNode()).forEachChangedNodeDepthFirst(a,!0,!0)}else this.rowModel.forEachNode(a);i.length&&this.selectionService.setNodesSelected({nodes:i,newValue:!1,source:"selectableChanged"}),r&&this.selectionService instanceof Rf&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}},Hg([J("rowModel")],e.prototype,"rowModel",void 0),Hg([J("selectionService")],e.prototype,"selectionService",void 0),Hg([Y],e.prototype,"init",null),e=Hg([X("selectableService")],e)}(Bt),Ug=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Wg=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Kg=function(t){function e(){var e=t.call(this)||this;return e.previousAndFirstButtonsDisabled=!1,e.nextButtonDisabled=!1,e.lastButtonDisabled=!1,e.areListenersSetup=!1,e}return Ug(e,t),e.prototype.postConstruct=function(){var t=this,e=this.gridOptionsService.get("enableRtl");this.setTemplate(this.getTemplate());var o=this,n=o.btFirst,r=o.btPrevious,i=o.btNext,a=o.btLast;o.pageSizeComp,this.activateTabIndex([n,r,i,a]),n.insertAdjacentElement("afterbegin",zn(e?"last":"first",this.gridOptionsService)),r.insertAdjacentElement("afterbegin",zn(e?"next":"previous",this.gridOptionsService)),i.insertAdjacentElement("afterbegin",zn(e?"previous":"next",this.gridOptionsService)),a.insertAdjacentElement("afterbegin",zn(e?"first":"last",this.gridOptionsService)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],function(){return t.onPageSizeRelatedOptionsChange()}),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.onPaginationChanged()},e.prototype.onPaginationChanged=function(){var t=this.gridOptionsService.get("pagination")&&!this.gridOptionsService.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels(),this.onPageSizeRelatedOptionsChange())},e.prototype.onPageSizeRelatedOptionsChange=function(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())},e.prototype.setupListeners=function(){var t=this;this.areListenersSetup||(this.addManagedListener(this.eventService,qt.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(function(e){var o=e.el,n=e.fn;t.addManagedListener(o,"click",n),t.addManagedListener(o,"keydown",function(t){t.key!==jn.ENTER&&t.key!==jn.SPACE||(t.preventDefault(),n())})}),this.areListenersSetup=!0)},e.prototype.onBtFirst=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()},e.prototype.setCurrentPageLabel=function(){var t=this.paginationProxy.getTotalPages()>0,e=this.paginationProxy.getCurrentPage(),o=t?e+1:0;this.lbCurrent.textContent=this.formatNumber(o)},e.prototype.formatNumber=function(t){var e=this.gridOptionsService.getCallback("paginationNumberFormatter");if(e)return e({value:t});var o=this.localeService.getLocaleTextFunc();return Go(t,o("thousandSeparator",","),o("decimalSeparator","."))},e.prototype.getTemplate=function(){var t=this.localeService.getLocaleTextFunc(),e=t("page","Page"),o=t("to","to"),n=t("of","of"),r=t("firstPage","First Page"),i=t("previousPage","Previous Page"),a=t("nextPage","Next Page"),s=t("lastPage","Last Page"),l=this.getCompId();return'<div class="ag-paging-panel ag-unselectable" id="ag-'.concat(l,'">\n                <ag-page-size-selector ref="pageSizeComp"></ag-page-size-selector>\n                <span class="ag-paging-row-summary-panel" role="status">\n                    <span id="ag-').concat(l,'-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-').concat(l,'-to">').concat(o,'</span>\n                    <span id="ag-').concat(l,'-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-').concat(l,'-of">').concat(n,'</span>\n                    <span id="ag-').concat(l,'-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel" role="presentation">\n                    <div ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="').concat(r,'"></div>\n                    <div ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="').concat(i,'"></div>\n                    <span class="ag-paging-description" role="status">\n                        <span id="ag-').concat(l,'-start-page">').concat(e,'</span>\n                        <span id="ag-').concat(l,'-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>\n                        <span id="ag-').concat(l,'-of-page">').concat(n,'</span>\n                        <span id="ag-').concat(l,'-of-page-number" ref="lbTotal" class="ag-paging-number"></span>\n                    </span>\n                    <div ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="').concat(a,'"></div>\n                    <div ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="').concat(s,'"></div>\n                </span>\n            </div>')},e.prototype.onBtNext=function(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()},e.prototype.onBtPrevious=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()},e.prototype.onBtLast=function(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()},e.prototype.enableOrDisableButtons=function(){var t=this.paginationProxy.getCurrentPage(),e=this.paginationProxy.isLastPageFound(),o=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=0===t,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);var n=this.isZeroPagesToDisplay(),r=t===o-1;this.nextButtonDisabled=r||n,this.lastButtonDisabled=!e||n||t===o-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)},e.prototype.toggleButtonDisabled=function(t,e){qe(t,e),t.classList.toggle("ag-disabled",e)},e.prototype.updateRowLabels=function(){var t,e,o=this.paginationProxy.getCurrentPage(),n=this.paginationProxy.getPageSize(),r=this.paginationProxy.isLastPageFound(),i=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null;if(this.isZeroPagesToDisplay()?t=e=0:(e=(t=n*o+1)+n-1,r&&e>i&&(e=i)),this.lbFirstRowOnPage.textContent=this.formatNumber(t),this.rowNodeBlockLoader.isLoading()){var a=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=a("pageLastRowUnknown","?")}else this.lbLastRowOnPage.textContent=this.formatNumber(e)},e.prototype.isZeroPagesToDisplay=function(){var t=this.paginationProxy.isLastPageFound(),e=this.paginationProxy.getTotalPages();return t&&0===e},e.prototype.setTotalLabels=function(){var t=this.paginationProxy.isLastPageFound(),e=this.paginationProxy.getTotalPages(),o=t?this.paginationProxy.getMasterRowCount():null;if(1===o){var n=this.paginationProxy.getRow(0);if(n&&n.group&&!(n.groupData||n.aggData))return void this.setTotalLabelsToZero()}if(t)this.lbTotal.textContent=this.formatNumber(e),this.lbRecordCount.textContent=this.formatNumber(o);else{var r=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=r,this.lbRecordCount.innerHTML=r}},e.prototype.setTotalLabelsToZero=function(){this.lbFirstRowOnPage.textContent=this.formatNumber(0),this.lbCurrent.textContent=this.formatNumber(0),this.lbLastRowOnPage.textContent=this.formatNumber(0),this.lbTotal.textContent=this.formatNumber(0),this.lbRecordCount.textContent=this.formatNumber(0)},Wg([J("paginationProxy")],e.prototype,"paginationProxy",void 0),Wg([J("rowNodeBlockLoader")],e.prototype,"rowNodeBlockLoader",void 0),Wg([xr("btFirst")],e.prototype,"btFirst",void 0),Wg([xr("btPrevious")],e.prototype,"btPrevious",void 0),Wg([xr("btNext")],e.prototype,"btNext",void 0),Wg([xr("btLast")],e.prototype,"btLast",void 0),Wg([xr("lbRecordCount")],e.prototype,"lbRecordCount",void 0),Wg([xr("lbFirstRowOnPage")],e.prototype,"lbFirstRowOnPage",void 0),Wg([xr("lbLastRowOnPage")],e.prototype,"lbLastRowOnPage",void 0),Wg([xr("lbCurrent")],e.prototype,"lbCurrent",void 0),Wg([xr("lbTotal")],e.prototype,"lbTotal",void 0),Wg([xr("pageSizeComp")],e.prototype,"pageSizeComp",void 0),Wg([Y],e.prototype,"postConstruct",null),e}(Sr),qg=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Yg=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Zg=function(t){function e(){var o=t.call(this,e.TEMPLATE)||this;return o.inProgress=!1,o.destroyRequested=!1,o}return qg(e,t),e.prototype.updateLayoutClasses=function(t,e){var o=this.eOverlayWrapper.classList;o.toggle(vl.AUTO_HEIGHT,e.autoHeight),o.toggle(vl.NORMAL,e.normal),o.toggle(vl.PRINT,e.print)},e.prototype.postConstruct=function(){this.createManagedBean(new Fl(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.registerOverlayWrapperComp(this)},e.prototype.setWrapperTypeClass=function(t){var e=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&e.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=t,e.toggle(t,!0)},e.prototype.showOverlay=function(t,e,o){var n=this;this.inProgress||(this.setWrapperTypeClass(e),this.destroyActiveOverlay(),this.inProgress=!0,t&&t.then(function(t){n.inProgress=!1,n.eOverlayWrapper.appendChild(t.getGui()),n.activeOverlay=t,n.updateListenerDestroyFunc=o,n.destroyRequested&&(n.destroyRequested=!1,n.destroyActiveOverlay())}),this.setDisplayed(!0,{skipAriaHidden:!0}))},e.prototype.destroyActiveOverlay=function(){var t;this.inProgress?this.destroyRequested=!0:this.activeOverlay&&(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),null===(t=this.updateListenerDestroyFunc)||void 0===t||t.call(this),dn(this.eOverlayWrapper))},e.prototype.hideOverlay=function(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})},e.prototype.destroy=function(){this.destroyActiveOverlay(),t.prototype.destroy.call(this)},e.TEMPLATE='\n        <div class="ag-overlay" role="presentation">\n            <div class="ag-overlay-panel" role="presentation">\n                <div class="ag-overlay-wrapper" ref="eOverlayWrapper" role="presentation"></div>\n            </div>\n        </div>',Yg([J("overlayService")],e.prototype,"overlayService",void 0),Yg([xr("eOverlayWrapper")],e.prototype,"eOverlayWrapper",void 0),Yg([Y],e.prototype,"postConstruct",null),e}(Sr),Xg=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Jg=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Qg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Xg(e,t),e.prototype.getFirstRow=function(){var t,e=0;return this.pinnedRowModel.getPinnedTopRowCount()?t="top":this.rowModel.getRowCount()?(t=null,e=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(t="bottom"),void 0===t?null:{rowIndex:e,rowPinned:t}},e.prototype.getLastRow=function(){var t,e=null,o=this.pinnedRowModel.getPinnedBottomRowCount(),n=this.pinnedRowModel.getPinnedTopRowCount();return o?(e="bottom",t=o-1):this.rowModel.getRowCount()?(e=null,t=this.paginationProxy.getPageLastRow()):n&&(e="top",t=n-1),void 0===t?null:{rowIndex:t,rowPinned:e}},e.prototype.getRowNode=function(t){switch(t.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[t.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[t.rowIndex];default:return this.rowModel.getRow(t.rowIndex)}},e.prototype.sameRow=function(t,e){return!t&&!e||!(t&&!e||!t&&e)&&(t.rowIndex===e.rowIndex&&t.rowPinned==e.rowPinned)},e.prototype.before=function(t,e){switch(t.rowPinned){case"top":if("top"!==e.rowPinned)return!0;break;case"bottom":if("bottom"!==e.rowPinned)return!1;break;default:if(r(e.rowPinned))return"top"!==e.rowPinned}return t.rowIndex<e.rowIndex},e.prototype.rowMax=function(t){var e,o=this;return t.forEach(function(t){(void 0===e||o.before(e,t))&&(e=t)}),e},e.prototype.rowMin=function(t){var e,o=this;return t.forEach(function(t){(void 0===e||o.before(t,e))&&(e=t)}),e},Jg([J("rowModel")],e.prototype,"rowModel",void 0),Jg([J("pinnedRowModel")],e.prototype,"pinnedRowModel",void 0),Jg([J("paginationProxy")],e.prototype,"paginationProxy",void 0),e=Jg([X("rowPositionUtils")],e)}(Bt),$g=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ty=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},ey=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $g(e,t),e.prototype.createId=function(t){var e=t.rowIndex,o=t.rowPinned,n=t.column;return this.createIdFromValues({rowIndex:e,column:n,rowPinned:o})},e.prototype.createIdFromValues=function(t){var e=t.rowIndex,o=t.rowPinned,n=t.column;return"".concat(e,".").concat(null==o?"null":o,".").concat(n.getId())},e.prototype.equals=function(t,e){var o=t.column===e.column,n=t.rowPinned===e.rowPinned,r=t.rowIndex===e.rowIndex;return o&&n&&r},e=ty([X("cellPositionUtils")],e)}(Bt),oy=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ny=function(){return function(t){this.cellValueChanges=t}}(),ry=function(t){function e(e,o,n,r){var i=t.call(this,e)||this;return i.initialRange=o,i.finalRange=n,i.ranges=r,i}return oy(e,t),e}(ny),iy=function(){function t(e){this.actionStack=[],this.maxStackSize=e||t.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}return t.prototype.pop=function(){return this.actionStack.pop()},t.prototype.push=function(t){t.cellValueChanges&&t.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(t))},t.prototype.clear=function(){this.actionStack=[]},t.prototype.getCurrentStackSize=function(){return this.actionStack.length},t.DEFAULT_STACK_SIZE=10,t}(),ay=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),sy=function(){return(sy=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},ly=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},uy=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},cy=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},py=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cellValueChanges=[],e.activeCellEdit=null,e.activeRowEdit=null,e.isPasting=!1,e.isRangeInAction=!1,e.onCellValueChanged=function(t){var o={column:t.column,rowIndex:t.rowIndex,rowPinned:t.rowPinned},n=null!==e.activeCellEdit&&e.cellPositionUtils.equals(e.activeCellEdit,o),r=null!==e.activeRowEdit&&e.rowPositionUtils.sameRow(e.activeRowEdit,o);if(n||r||e.isPasting||e.isRangeInAction){var i=t.rowPinned,a=t.rowIndex,s=t.column,l=t.oldValue,u=t.value,c={rowPinned:i,rowIndex:a,columnId:s.getColId(),newValue:u,oldValue:l};e.cellValueChanges.push(c)}},e.clearStacks=function(){e.undoStack.clear(),e.redoStack.clear()},e}return ay(e,t),e.prototype.init=function(){var t=this;if(this.gridOptionsService.get("undoRedoCellEditing")){var e=this.gridOptionsService.get("undoRedoCellEditingLimit");e<=0||(this.undoStack=new iy(e),this.redoStack=new iy(e),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addCellKeyListeners(),this.addManagedListener(this.eventService,qt.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,qt.EVENT_MODEL_UPDATED,function(e){e.keepUndoRedoStack||t.clearStacks()}),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,qt.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,qt.EVENT_ROW_DRAG_END,this.clearStacks),this.ctrlsService.whenReady(function(){t.gridBodyCtrl=t.ctrlsService.getGridBodyCtrl()}))}},e.prototype.getCurrentUndoStackSize=function(){return this.undoStack?this.undoStack.getCurrentStackSize():0},e.prototype.getCurrentRedoStackSize=function(){return this.redoStack?this.redoStack.getCurrentStackSize():0},e.prototype.undo=function(t){var e={type:qt.EVENT_UNDO_STARTED,source:t};this.eventService.dispatchEvent(e);var o=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo"),n={type:qt.EVENT_UNDO_ENDED,source:t,operationPerformed:o};this.eventService.dispatchEvent(n)},e.prototype.redo=function(t){var e={type:qt.EVENT_REDO_STARTED,source:t};this.eventService.dispatchEvent(e);var o=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo"),n={type:qt.EVENT_REDO_ENDED,source:t,operationPerformed:o};this.eventService.dispatchEvent(n)},e.prototype.undoRedo=function(t,e,o,n,r){if(!t)return!1;var i=t.pop();return!(!i||!i.cellValueChanges)&&(this.processAction(i,function(t){return t[n]},r),i instanceof ry?this.processRange(i.ranges||[i[o]]):this.processCell(i.cellValueChanges),e.push(i),!0)},e.prototype.processAction=function(t,e,o){var n=this;t.cellValueChanges.forEach(function(t){var r=t.rowIndex,i=t.rowPinned,a=t.columnId,s={rowIndex:r,rowPinned:i},l=n.getRowNode(s);l.displayed&&l.setDataValue(a,e(t),o)})},e.prototype.processRange=function(t){var e,o=this;this.rangeService.removeAllCellRanges(!0),t.forEach(function(n,r){if(n){var i=n.startRow,a=n.endRow;r===t.length-1&&(e={rowPinned:i.rowPinned,rowIndex:i.rowIndex,columnId:n.startColumn.getColId()},o.setLastFocusedCell(e));var s={rowStartIndex:i.rowIndex,rowStartPinned:i.rowPinned,rowEndIndex:a.rowIndex,rowEndPinned:a.rowPinned,columnStart:n.startColumn,columns:n.columns};o.rangeService.addCellRange(s)}})},e.prototype.processCell=function(t){var e=t[0],o={rowIndex:e.rowIndex,rowPinned:e.rowPinned},n=this.getRowNode(o),r={rowPinned:e.rowPinned,rowIndex:n.rowIndex,columnId:e.columnId};this.setLastFocusedCell(r,!!this.rangeService)},e.prototype.setLastFocusedCell=function(t,e){var o=t.rowIndex,n=t.columnId,r=t.rowPinned,i=this.gridBodyCtrl.getScrollFeature(),a=this.columnModel.getGridColumn(n);if(a){i.ensureIndexVisible(o),i.ensureColumnVisible(a);var s={rowIndex:o,column:a,rowPinned:r};this.focusService.setFocusedCell(sy(sy({},s),{forceBrowserFocus:!0})),e&&this.rangeService.setRangeToCell(s)}},e.prototype.addRowEditingListeners=function(){var t=this;this.addManagedListener(this.eventService,qt.EVENT_ROW_EDITING_STARTED,function(e){t.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}}),this.addManagedListener(this.eventService,qt.EVENT_ROW_EDITING_STOPPED,function(){var e=new ny(t.cellValueChanges);t.pushActionsToUndoStack(e),t.activeRowEdit=null})},e.prototype.addCellEditingListeners=function(){var t=this;this.addManagedListener(this.eventService,qt.EVENT_CELL_EDITING_STARTED,function(e){t.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}}),this.addManagedListener(this.eventService,qt.EVENT_CELL_EDITING_STOPPED,function(e){if(t.activeCellEdit=null,e.valueChanged&&!t.activeRowEdit&&!t.isPasting&&!t.isRangeInAction){var o=new ny(t.cellValueChanges);t.pushActionsToUndoStack(o)}})},e.prototype.addPasteListeners=function(){var t=this;this.addManagedListener(this.eventService,qt.EVENT_PASTE_START,function(){t.isPasting=!0}),this.addManagedListener(this.eventService,qt.EVENT_PASTE_END,function(){var e=new ny(t.cellValueChanges);t.pushActionsToUndoStack(e),t.isPasting=!1})},e.prototype.addFillListeners=function(){var t=this;this.addManagedListener(this.eventService,qt.EVENT_FILL_START,function(){t.isRangeInAction=!0}),this.addManagedListener(this.eventService,qt.EVENT_FILL_END,function(e){var o=new ry(t.cellValueChanges,e.initialRange,e.finalRange);t.pushActionsToUndoStack(o),t.isRangeInAction=!1})},e.prototype.addCellKeyListeners=function(){var t=this;this.addManagedListener(this.eventService,qt.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,function(){t.isRangeInAction=!0}),this.addManagedListener(this.eventService,qt.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,function(){var e;e=t.rangeService&&t.gridOptionsService.get("enableRangeSelection")?new ry(t.cellValueChanges,void 0,void 0,cy([],uy(t.rangeService.getCellRanges()),!1)):new ny(t.cellValueChanges),t.pushActionsToUndoStack(e),t.isRangeInAction=!1})},e.prototype.pushActionsToUndoStack=function(t){this.undoStack.push(t),this.cellValueChanges=[],this.redoStack.clear()},e.prototype.getRowNode=function(t){switch(t.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[t.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[t.rowIndex];default:return this.rowModel.getRow(t.rowIndex)}},ly([J("focusService")],e.prototype,"focusService",void 0),ly([J("ctrlsService")],e.prototype,"ctrlsService",void 0),ly([J("rowModel")],e.prototype,"rowModel",void 0),ly([J("pinnedRowModel")],e.prototype,"pinnedRowModel",void 0),ly([J("cellPositionUtils")],e.prototype,"cellPositionUtils",void 0),ly([J("rowPositionUtils")],e.prototype,"rowPositionUtils",void 0),ly([J("columnModel")],e.prototype,"columnModel",void 0),ly([Q("rangeService")],e.prototype,"rangeService",void 0),ly([Y],e.prototype,"init",null),e=ly([X("undoRedoService")],e)}(Bt),dy=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),hy=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},fy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return dy(e,t),e.prototype.findHeader=function(t,e){var o,n,r;if(t.column instanceof Kt?(n="getDisplayedGroup".concat(e),o=this.columnModel[n](t.column)):(r="getDisplayedCol".concat(e),o=this.columnModel[r](t.column)),o){var i=t.headerRowIndex;if(this.getHeaderRowType(i)!==Mc.FLOATING_FILTER){for(var a=[o];o.getParent();)o=o.getParent(),a.push(o);o=a[a.length-1-i]}var s=this.getHeaderIndexToFocus(o,i);return{column:s.column,headerRowIndex:s.headerRowIndex}}},e.prototype.getHeaderIndexToFocus=function(t,e){var o;if(t instanceof Kt&&this.isAnyChildSpanningHeaderHeight(t)&&t.isPadding())for(var n=t,r=o=n.getLeafColumns()[0];r!==n;)e++,r=r.getParent();return{column:o||t,headerRowIndex:e}},e.prototype.isAnyChildSpanningHeaderHeight=function(t){return!!t&&t.getLeafColumns().some(function(t){return t.isSpanHeaderHeight()})},e.prototype.getColumnVisibleParent=function(t,e){var o=this.getHeaderRowType(e),n=o===Mc.FLOATING_FILTER,r=o===Mc.COLUMN,i=n?t:t.getParent(),a=e-1,s=a;if(r&&this.isAnyChildSpanningHeaderHeight(t.getParent())){for(;i&&i.isPadding();)i=i.getParent(),a--;s=a,a<0&&(i=t,a=e,s=void 0)}return{column:i,headerRowIndex:a,headerRowIndexWithoutSpan:s}},e.prototype.getColumnVisibleChild=function(t,e,o){void 0===o&&(o="After");var n=t,r=e+1,i=r;if(this.getHeaderRowType(e)===Mc.COLUMN_GROUP){for(var a=t.getDisplayedLeafColumns(),s="After"===o?a[0]:ft(a),l=[],u=s;u.getParent()!==t;)u=u.getParent(),l.push(u);if(n=s,s.isSpanHeaderHeight())for(var c=l.length-1;c>=0;c--){var p=l[c];if(!p.isPadding()){n=p;break}r++}else(n=ft(l))||(n=s)}return{column:n,headerRowIndex:r,headerRowIndexWithoutSpan:i}},e.prototype.getHeaderRowType=function(t){var e=this.ctrlsService.getHeaderRowContainerCtrl();if(e)return e.getRowType(t)},e.prototype.findColAtEdgeForHeaderRow=function(t,e){var o=this.columnModel.getAllDisplayedColumns(),n=o["start"===e?0:o.length-1];if(n){var r=this.ctrlsService.getHeaderRowContainerCtrl(n.getPinned()).getRowType(t);return r==Mc.COLUMN_GROUP?{headerRowIndex:t,column:this.columnModel.getColumnGroupAtLevel(n,t)}:{headerRowIndex:null==r?-1:t,column:n}}},hy([J("columnModel")],e.prototype,"columnModel",void 0),hy([J("ctrlsService")],e.prototype,"ctrlsService",void 0),e=hy([X("headerPositionUtils")],e)}(Bt),gy=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},yy=function(){function t(){}return t.prototype.buildColumnDefs=function(t,e,o){var n=this,r=[],i={};return t.forEach(function(t){for(var a=!0,s=n.createDefFromColumn(t,e,o),l=t.getOriginalParent(),u=null;l;){var c=null;if(l.isPadding())l=l.getOriginalParent();else{var p=i[l.getGroupId()];if(p){p.children.push(s),a=!1;break}if((c=n.createDefFromGroup(l))&&(c.children=[s],i[c.groupId]=c,s=c,l=l.getOriginalParent()),null!=l&&u===l){a=!1;break}u=l}}a&&r.push(s)}),r},t.prototype.createDefFromGroup=function(t){var e=m(t.getColGroupDef(),["children"]);return e&&(e.groupId=t.getGroupId()),e},t.prototype.createDefFromColumn=function(t,e,o){var n=m(t.getColDef());return n.colId=t.getColId(),n.width=t.getActualWidth(),n.rowGroup=t.isRowGroupActive(),n.rowGroupIndex=t.isRowGroupActive()?e.indexOf(t):null,n.pivot=t.isPivotActive(),n.pivotIndex=t.isPivotActive()?o.indexOf(t):null,n.aggFunc=t.isValueActive()?t.getAggFunc():null,n.hide=!t.isVisible()||void 0,n.pinned=t.isPinned()?t.getPinned():null,n.sort=t.getSort()?t.getSort():null,n.sortIndex=null!=t.getSortIndex()?t.getSortIndex():null,n},t=gy([X("columnDefFactory")],t)}(),vy=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},my=function(){function t(){}return t.prototype.getInitialRowClasses=function(t){var e=[];return r(t.extraCssClass)&&e.push(t.extraCssClass),e.push("ag-row"),e.push(t.rowFocused?"ag-row-focus":"ag-row-no-focus"),t.fadeRowIn&&e.push("ag-opacity-zero"),e.push(t.rowIsEven?"ag-row-even":"ag-row-odd"),t.rowNode.isRowPinned()&&e.push("ag-row-pinned"),t.rowNode.isSelected()&&e.push("ag-row-selected"),t.rowNode.footer&&e.push("ag-row-footer"),e.push("ag-row-level-"+t.rowLevel),t.rowNode.stub&&e.push("ag-row-loading"),t.fullWidthRow&&e.push("ag-full-width-row"),t.expandable&&(e.push("ag-row-group"),e.push(t.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),t.rowNode.dragging&&e.push("ag-row-dragging"),xt(e,this.processClassesFromGridOptions(t.rowNode)),xt(e,this.preProcessRowClassRules(t.rowNode)),e.push(t.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),t.firstRowOnPage&&e.push("ag-row-first"),t.lastRowOnPage&&e.push("ag-row-last"),t.fullWidthRow&&("left"===t.pinned&&e.push("ag-cell-last-left-pinned"),"right"===t.pinned&&e.push("ag-cell-first-right-pinned")),e},t.prototype.processClassesFromGridOptions=function(t){var e=[],o=function(t){"string"===typeof t?e.push(t):Array.isArray(t)&&t.forEach(function(t){return e.push(t)})},n=this.gridOptionsService.get("rowClass");if(n){if("function"===typeof n)return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];o(n)}var r=this.gridOptionsService.getCallback("getRowClass");r&&o(r({data:t.data,node:t,rowIndex:t.rowIndex}));return e},t.prototype.preProcessRowClassRules=function(t){var e=[];return this.processRowClassRules(t,function(t){e.push(t)},function(t){}),e},t.prototype.processRowClassRules=function(t,e,o){var n=this.gridOptionsService.addGridCommonParams({data:t.data,node:t,rowIndex:t.rowIndex});this.stylingService.processClassRules(void 0,this.gridOptionsService.get("rowClassRules"),n,e,o)},t.prototype.calculateRowLevel=function(t){return t.group?t.level:t.parent?t.parent.level+1:0},vy([J("stylingService")],t.prototype,"stylingService",void 0),vy([J("gridOptionsService")],t.prototype,"gridOptionsService",void 0),t=vy([X("rowCssClassCalculator")],t)}(),Cy=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),_y=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},wy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Cy(e,t),e.prototype.init=function(){var t=this;this.isAccentedSort=this.gridOptionsService.get("accentedSort"),this.primaryColumnsSortGroups=this.gridOptionsService.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",function(e){return t.isAccentedSort=e.currentValue}),this.addManagedPropertyListener("autoGroupColumnDef",function(){return t.primaryColumnsSortGroups=t.gridOptionsService.isColumnsSortingCoupledToGroup()})},e.prototype.doFullSort=function(t,e){var o=t.map(function(t,e){return{currentPos:e,rowNode:t}});return o.sort(this.compareRowNodes.bind(this,e)),o.map(function(t){return t.rowNode})},e.prototype.compareRowNodes=function(t,e,o){for(var n=e.rowNode,r=o.rowNode,i=0,a=t.length;i<a;i++){var s=t[i],l="desc"===s.sort,u=this.getValue(n,s.column),c=this.getValue(r,s.column),p=void 0,d=this.getComparator(s,n);if(p=d?d(u,c,n,r,l):ur.defaultComparator(u,c,this.isAccentedSort),!isNaN(p)&&0!==p)return"asc"===s.sort?p:-1*p}return e.currentPos-o.currentPos},e.prototype.getComparator=function(t,e){var o=t.column,n=o.getColDef().comparator;if(null!=n)return n;if(o.getColDef().showRowGroup){var r=!e.group&&o.getColDef().field;if(r){var i=this.columnModel.getPrimaryColumn(r);if(i)return i.getColDef().comparator}}},e.prototype.getValue=function(t,e){var o,n;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(e,t,!1,!1);if(t.rowGroupColumn===e){if(this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotActive())){var r=null===(o=t.allLeafChildren)||void 0===o?void 0:o[0];return r?this.valueService.getValue(e,r,!1,!1):void 0}var i=this.columnModel.getGroupDisplayColumnForGroup(e.getId());if(!i)return;return null===(n=t.groupData)||void 0===n?void 0:n[i.getId()]}return t.group&&e.getColDef().showRowGroup?void 0:this.valueService.getValue(e,t,!1,!1)},_y([J("valueService")],e.prototype,"valueService",void 0),_y([J("columnModel")],e.prototype,"columnModel",void 0),_y([Y],e.prototype,"init",null),e=_y([X("rowNodeSorter")],e)}(Bt),by=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Sy=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Ey=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ready=!1,e.readyCallbacks=[],e}var o;return by(e,t),o=e,e.prototype.checkReady=function(){if(this.ready=null!=this.gridCtrl&&null!=this.gridBodyCtrl&&null!=this.centerRowContainerCtrl&&null!=this.leftRowContainerCtrl&&null!=this.rightRowContainerCtrl&&null!=this.bottomCenterRowContainerCtrl&&null!=this.bottomLeftRowContainerCtrl&&null!=this.bottomRightRowContainerCtrl&&null!=this.topCenterRowContainerCtrl&&null!=this.topLeftRowContainerCtrl&&null!=this.topRightRowContainerCtrl&&null!=this.stickyTopCenterRowContainerCtrl&&null!=this.stickyTopLeftRowContainerCtrl&&null!=this.stickyTopRightRowContainerCtrl&&null!=this.centerHeaderRowContainerCtrl&&null!=this.leftHeaderRowContainerCtrl&&null!=this.rightHeaderRowContainerCtrl&&null!=this.fakeHScrollComp&&null!=this.fakeVScrollComp&&null!=this.gridHeaderCtrl,this.ready){var t=this.createReadyParams();this.readyCallbacks.forEach(function(e){return e(t)}),this.readyCallbacks.length=0}},e.prototype.whenReady=function(t){this.ready?t(this.createReadyParams()):this.readyCallbacks.push(t)},e.prototype.createReadyParams=function(){return{centerRowContainerCtrl:this.centerRowContainerCtrl,leftRowContainerCtrl:this.leftRowContainerCtrl,rightRowContainerCtrl:this.rightRowContainerCtrl,bottomCenterRowContainerCtrl:this.bottomCenterRowContainerCtrl,bottomLeftRowContainerCtrl:this.bottomLeftRowContainerCtrl,bottomRightRowContainerCtrl:this.bottomRightRowContainerCtrl,topCenterRowContainerCtrl:this.topCenterRowContainerCtrl,topLeftRowContainerCtrl:this.topLeftRowContainerCtrl,topRightRowContainerCtrl:this.topRightRowContainerCtrl,stickyTopCenterRowContainerCtrl:this.stickyTopCenterRowContainerCtrl,stickyTopLeftRowContainerCtrl:this.stickyTopLeftRowContainerCtrl,stickyTopRightRowContainerCtrl:this.stickyTopRightRowContainerCtrl,centerHeaderRowContainerCtrl:this.centerHeaderRowContainerCtrl,leftHeaderRowContainerCtrl:this.leftHeaderRowContainerCtrl,rightHeaderRowContainerCtrl:this.rightHeaderRowContainerCtrl,fakeHScrollComp:this.fakeHScrollComp,fakeVScrollComp:this.fakeVScrollComp,gridBodyCtrl:this.gridBodyCtrl,gridCtrl:this.gridCtrl,gridHeaderCtrl:this.gridHeaderCtrl}},e.prototype.registerFakeHScrollComp=function(t){this.fakeHScrollComp=t,this.checkReady()},e.prototype.registerFakeVScrollComp=function(t){this.fakeVScrollComp=t,this.checkReady()},e.prototype.registerGridHeaderCtrl=function(t){this.gridHeaderCtrl=t,this.checkReady()},e.prototype.registerCenterRowContainerCtrl=function(t){this.centerRowContainerCtrl=t,this.checkReady()},e.prototype.registerLeftRowContainerCtrl=function(t){this.leftRowContainerCtrl=t,this.checkReady()},e.prototype.registerRightRowContainerCtrl=function(t){this.rightRowContainerCtrl=t,this.checkReady()},e.prototype.registerTopCenterRowContainerCtrl=function(t){this.topCenterRowContainerCtrl=t,this.checkReady()},e.prototype.registerTopLeftRowContainerCon=function(t){this.topLeftRowContainerCtrl=t,this.checkReady()},e.prototype.registerTopRightRowContainerCtrl=function(t){this.topRightRowContainerCtrl=t,this.checkReady()},e.prototype.registerStickyTopCenterRowContainerCtrl=function(t){this.stickyTopCenterRowContainerCtrl=t,this.checkReady()},e.prototype.registerStickyTopLeftRowContainerCon=function(t){this.stickyTopLeftRowContainerCtrl=t,this.checkReady()},e.prototype.registerStickyTopRightRowContainerCtrl=function(t){this.stickyTopRightRowContainerCtrl=t,this.checkReady()},e.prototype.registerBottomCenterRowContainerCtrl=function(t){this.bottomCenterRowContainerCtrl=t,this.checkReady()},e.prototype.registerBottomLeftRowContainerCtrl=function(t){this.bottomLeftRowContainerCtrl=t,this.checkReady()},e.prototype.registerBottomRightRowContainerCtrl=function(t){this.bottomRightRowContainerCtrl=t,this.checkReady()},e.prototype.registerHeaderContainer=function(t,e){switch(e){case"left":this.leftHeaderRowContainerCtrl=t;break;case"right":this.rightHeaderRowContainerCtrl=t;break;default:this.centerHeaderRowContainerCtrl=t}this.checkReady()},e.prototype.registerGridBodyCtrl=function(t){this.gridBodyCtrl=t,this.checkReady()},e.prototype.registerGridCtrl=function(t){this.gridCtrl=t,this.checkReady()},e.prototype.getFakeHScrollComp=function(){return this.fakeHScrollComp},e.prototype.getFakeVScrollComp=function(){return this.fakeVScrollComp},e.prototype.getGridHeaderCtrl=function(){return this.gridHeaderCtrl},e.prototype.getGridCtrl=function(){return this.gridCtrl},e.prototype.getCenterRowContainerCtrl=function(){return this.centerRowContainerCtrl},e.prototype.getTopCenterRowContainerCtrl=function(){return this.topCenterRowContainerCtrl},e.prototype.getBottomCenterRowContainerCtrl=function(){return this.bottomCenterRowContainerCtrl},e.prototype.getStickyTopCenterRowContainerCtrl=function(){return this.stickyTopCenterRowContainerCtrl},e.prototype.getGridBodyCtrl=function(){return this.gridBodyCtrl},e.prototype.getHeaderRowContainerCtrls=function(){return[this.leftHeaderRowContainerCtrl,this.rightHeaderRowContainerCtrl,this.centerHeaderRowContainerCtrl]},e.prototype.getHeaderRowContainerCtrl=function(t){switch(t){case"left":return this.leftHeaderRowContainerCtrl;case"right":return this.rightHeaderRowContainerCtrl;default:return this.centerHeaderRowContainerCtrl}},e.NAME="ctrlsService",e=o=Sy([X(o.NAME)],e)}(Bt),xy=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ty=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Oy=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.registry={},e}return xy(e,t),e.prototype.register=function(t){this.registry[t.controllerName]=t.controllerClass},e.prototype.getInstance=function(t){var e=this.registry[t];if(null!=e)return new e},e=Ty([X("ctrlsFactory")],e)}(Bt),Ry=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Py=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Ay=function(t){function e(e,o){var n=t.call(this,e)||this;return n.direction=o,n.hideTimeout=null,n}return Ry(e,t),e.prototype.postConstruct=function(){this.addManagedListener(this.eventService,qt.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",xo()||To())},e.prototype.initialiseInvisibleScrollbar=function(){void 0===this.invisibleScrollbar&&(this.invisibleScrollbar=Lo(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))},e.prototype.addActiveListenerToggles=function(){var t=this,e=this.getGui();["mouseenter","mousedown","touchstart"].forEach(function(o){return t.addManagedListener(e,o,function(){return t.addOrRemoveCssClass("ag-scrollbar-active",!0)})}),["mouseleave","touchend"].forEach(function(o){return t.addManagedListener(e,o,function(){return t.addOrRemoveCssClass("ag-scrollbar-active",!1)})})},e.prototype.onScrollVisibilityChanged=function(){var t=this;void 0===this.invisibleScrollbar&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(function(){return t.setScrollVisible()})},e.prototype.hideAndShowInvisibleScrollAsNeeded=function(){var t=this;this.addManagedListener(this.eventService,qt.EVENT_BODY_SCROLL,function(e){e.direction===t.direction&&(null!==t.hideTimeout&&(window.clearTimeout(t.hideTimeout),t.hideTimeout=null),t.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))}),this.addManagedListener(this.eventService,qt.EVENT_BODY_SCROLL_END,function(){t.hideTimeout=window.setTimeout(function(){t.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),t.hideTimeout=null},400)})},e.prototype.attemptSettingScrollPosition=function(t){var e=this,o=this.getViewport();G(function(){return gn(o)},function(){return e.setScrollPosition(t)},100)},e.prototype.getViewport=function(){return this.eViewport},e.prototype.getContainer=function(){return this.eContainer},e.prototype.onScrollCallback=function(t){this.addManagedListener(this.getViewport(),"scroll",t)},Py([xr("eViewport")],e.prototype,"eViewport",void 0),Py([xr("eContainer")],e.prototype,"eContainer",void 0),Py([J("scrollVisibleService")],e.prototype,"scrollVisibleService",void 0),Py([J("ctrlsService")],e.prototype,"ctrlsService",void 0),Py([J("animationFrameService")],e.prototype,"animationFrameService",void 0),e}(Sr),Dy=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),My=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Iy=function(t){function e(){return t.call(this,e.TEMPLATE,"horizontal")||this}return Dy(e,t),e.prototype.postConstruct=function(){var e=this;t.prototype.postConstruct.call(this);var o=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,qt.EVENT_DISPLAYED_COLUMNS_CHANGED,o),this.addManagedListener(this.eventService,qt.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,o),this.addManagedListener(this.eventService,qt.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedPropertyListener("domLayout",o),this.ctrlsService.registerFakeHScrollComp(this),this.createManagedBean(new $u(function(t){return e.eContainer.style.width="".concat(t,"px")})),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))},e.prototype.initialiseInvisibleScrollbar=function(){void 0===this.invisibleScrollbar&&(this.enableRtl=this.gridOptionsService.get("enableRtl"),t.prototype.initialiseInvisibleScrollbar.call(this),this.invisibleScrollbar&&this.refreshCompBottom())},e.prototype.onPinnedRowDataChanged=function(){this.refreshCompBottom()},e.prototype.refreshCompBottom=function(){if(this.invisibleScrollbar){var t=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom="".concat(t,"px")}},e.prototype.onScrollVisibilityChanged=function(){t.prototype.onScrollVisibilityChanged.call(this),this.setFakeHScrollSpacerWidths()},e.prototype.setFakeHScrollSpacerWidths=function(){var t=this.scrollVisibleService.isVerticalScrollShowing(),e=this.columnModel.getDisplayedColumnsRightWidth(),o=!this.enableRtl&&t,n=this.gridOptionsService.getScrollbarWidth();o&&(e+=n),En(this.eRightSpacer,e),this.eRightSpacer.classList.toggle("ag-scroller-corner",e<=n);var r=this.columnModel.getDisplayedColumnsLeftWidth();this.enableRtl&&t&&(r+=n),En(this.eLeftSpacer,r),this.eLeftSpacer.classList.toggle("ag-scroller-corner",r<=n)},e.prototype.setScrollVisible=function(){var t=this.scrollVisibleService.isHorizontalScrollShowing(),e=this.invisibleScrollbar,o=this.gridOptionsService.get("suppressHorizontalScroll"),n=t&&this.gridOptionsService.getScrollbarWidth()||0,r=o?0:0===n&&e?16:n;this.addOrRemoveCssClass("ag-scrollbar-invisible",e),xn(this.getGui(),r),xn(this.eViewport,r),xn(this.eContainer,r),this.setDisplayed(t,{skipAriaHidden:!0})},e.prototype.getScrollPosition=function(){return cn(this.getViewport(),this.enableRtl)},e.prototype.setScrollPosition=function(t){gn(this.getViewport())||this.attemptSettingScrollPosition(t),pn(this.getViewport(),t,this.enableRtl)},e.TEMPLATE='<div class="ag-body-horizontal-scroll" aria-hidden="true">\n            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>\n            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">\n                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>\n            </div>\n            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>\n        </div>',My([xr("eLeftSpacer")],e.prototype,"eLeftSpacer",void 0),My([xr("eRightSpacer")],e.prototype,"eRightSpacer",void 0),My([J("columnModel")],e.prototype,"columnModel",void 0),My([J("pinnedRowModel")],e.prototype,"pinnedRowModel",void 0),My([Y],e.prototype,"postConstruct",null),e}(Ay),Ly=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Fy=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Ny=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ly(e,t),e.prototype.postConstruct=function(){var t=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,qt.EVENT_DISPLAYED_COLUMNS_CHANGED,t),this.addManagedListener(this.eventService,qt.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,t),this.addManagedPropertyListener("domLayout",t)},e.prototype.checkContainerWidths=function(){var t=this.gridOptionsService.isDomLayout("print"),e=t?0:this.columnModel.getDisplayedColumnsLeftWidth(),o=t?0:this.columnModel.getDisplayedColumnsRightWidth();e!=this.leftWidth&&(this.leftWidth=e,this.eventService.dispatchEvent({type:qt.EVENT_LEFT_PINNED_WIDTH_CHANGED})),o!=this.rightWidth&&(this.rightWidth=o,this.eventService.dispatchEvent({type:qt.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))},e.prototype.getPinnedRightWidth=function(){return this.rightWidth},e.prototype.getPinnedLeftWidth=function(){return this.leftWidth},Fy([J("columnModel")],e.prototype,"columnModel",void 0),Fy([Y],e.prototype,"postConstruct",null),e=Fy([X("pinnedWidthService")],e)}(Bt),ky=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Gy=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Vy=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.events=[],e}return ky(e,t),e.prototype.postConstruct=function(){"clientSide"==this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel)},e.prototype.dispatchExpanded=function(t){var e=this;if(null!=this.clientSideRowModel){this.events.push(t);null==this.dispatchExpandedDebounced&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(function(){e.clientSideRowModel&&e.clientSideRowModel.onRowGroupOpened(),e.events.forEach(function(t){return e.eventService.dispatchEvent(t)}),e.events=[]})),this.dispatchExpandedDebounced()}else this.eventService.dispatchEvent(t)},Gy([J("animationFrameService")],e.prototype,"animationFrameService",void 0),Gy([J("rowModel")],e.prototype,"rowModel",void 0),Gy([Y],e.prototype,"postConstruct",null),e=Gy([X("rowNodeEventThrottle")],e)}(Bt),By=function(t,e){var o;return"clientSide"===(null!==(o=e.rowModelType)&&void 0!==o?o:"clientSide")?{module:V.RowGroupingModule}:null},zy={enableRowGroup:By,rowGroup:By,rowGroupIndex:By,enablePivot:By,enableValue:By,pivot:By,pivotIndex:By,aggFunc:By,cellEditor:function(t){return"agRichSelect"===t.cellEditor||"agRichSelectCellEditor"===t.cellEditor?{module:V.RichSelectModule}:null},menuTabs:function(t){var e,o=["columnsMenuTab","generalMenuTab"];return(null===(e=t.menuTabs)||void 0===e?void 0:e.some(function(t){return o.includes(t)}))?{module:V.MenuModule}:null},columnsMenuParams:{module:[V.MenuModule,V.ColumnsToolPanelModule]},columnChooserParams:{module:[V.MenuModule,V.ColumnsToolPanelModule]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],dependencies:function(t,e){return"multiple"===e.rowSelection?null:"headerCheckboxSelection is only supported with rowSelection=multiple"}},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],dependencies:function(t,e){return"multiple"===e.rowSelection?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"}},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],dependencies:function(t,e){return"multiple"===e.rowSelection?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"}},children:function(){return Hy}},Hy={objectName:"colDef",allProperties:il.ALL_PROPERTIES,docsUrl:"column-properties/",deprecations:{columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."}},validations:zy},jy=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},Uy=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},Wy={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!1,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"\t",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,suppressChartToolPanelsButton:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,functionsPassive:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1},Ky={sideBar:{module:V.SideBarModule},statusBar:{module:V.StatusBarModule},enableCharts:{module:V.GridChartsModule},getMainMenuItems:{module:V.MenuModule},getContextMenuItems:{module:V.MenuModule},allowContextMenuWithControlKey:{module:V.MenuModule},enableAdvancedFilter:{module:V.AdvancedFilterModule},treeData:{supportedRowModels:["clientSide","serverSide"],module:V.RowGroupingModule,dependencies:function(t){var e,o=null!==(e=t.rowModelType)&&void 0!==e?e:"clientSide";switch(o){case"clientSide":var n="treeData requires 'getDataPath' in the ".concat(o," row model.");return t.getDataPath?null:n;case"serverSide":var r="treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ".concat(o," row model.");return t.isServerSideGroup&&t.getServerSideGroupKey?null:r}return null}},masterDetail:{module:V.MasterDetailModule},enableRangeSelection:{module:V.RangeSelectionModule},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],dependencies:function(t){var e;switch(null!==(e=t.rowModelType)&&void 0!==e?e:"clientSide"){case"clientSide":return null;case"serverSide":return t.suppressServerSideInfiniteScroll?"groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll":null}return null}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},suppressParentsInRowNodes:{dependencies:{groupSelectsChildren:[void 0,!1]}},viewportDatasource:{supportedRowModels:["viewport"],module:V.ViewportRowModelModule},serverSideDatasource:{supportedRowModels:["serverSide"],module:V.ServerSideRowModelModule},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:V.InfiniteRowModelModule},rowData:{supportedRowModels:["clientSide"],module:V.ClientSideRowModelModule},columnDefs:function(){return Hy},defaultColDef:function(){return Hy},defaultColGroupDef:function(){return Hy},autoGroupColumnDef:function(){return Hy}},qy={objectName:"gridOptions",allProperties:Uy(Uy([],jy(xe.ALL_PROPERTIES),!1),jy(Pe.EVENT_CALLBACKS),!1),propertyExceptions:["api","columnApi"],docsUrl:"grid-options/",deprecations:{enableChartToolPanelsButton:{version:"29",message:"The Chart Tool Panels button is now enabled by default. To hide the Chart Tool Panels button and display the hamburger button instead, set suppressChartToolPanelsButton=true."},functionsPassive:{version:"29.2"},onColumnRowGroupChangeRequest:{version:"29.2"},onColumnPivotChangeRequest:{version:"29.2"},onColumnValueChangeRequest:{version:"29.2"},onColumnAggFuncChangeRequest:{version:"29.2"},serverSideFilterAllLevels:{version:"30",message:"All server-side group levels are now filtered by default. This can be toggled using `serverSideOnlyRefreshFilteredGroups`."},suppressAggAtRootLevel:{version:"30",message:"The root level aggregation is now suppressed by default. This can be toggled using  `alwaysAggregateAtRootLevel`."},excludeHiddenColumnsFromQuickFilter:{version:"30",message:"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `includeHiddenColumnsInQuickFilter`."},enterMovesDown:{version:"30",renamed:"enterNavigatesVertically"},enterMovesDownAfterEdit:{version:"30",renamed:"enterNavigatesVerticallyAfterEdit"},suppressParentsInRowNodes:{version:"30.2",message:"Using suppressParentsInRowNodes is no longer recommended. To serialize nodes it is now recommended to instead remove the parent node reference before serialization."},advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"}},validations:Ky},Yy=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Zy=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},Xy=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},Jy=function(){function t(){var t=this;this.destroyed=!1,this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new rt,this.globalEventHandlerFactory=function(o){return function(n,r){if(!t.destroyed){var i=e.alwaysSyncGlobalEvents.has(n);if(!(i&&!o||!i&&o)){var a=Pe.getCallbackForEvent(n),s=t.gridOptions[a];"function"===typeof s&&t.frameworkOverrides.wrapOutgoing(function(){s(r)})}}}}}var e;return e=t,Object.defineProperty(t.prototype,"context",{get:function(){return this.gridOptions.context},enumerable:!1,configurable:!0}),t.prototype.init=function(){this.columnApi=new Mf(this.api);var t=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),t),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.getScrollbarWidth()},t.prototype.destroy=function(){this.destroyed=!0,this.columnApi=void 0},t.prototype.get=function(t){var e;return null!==(e=this.gridOptions[t])&&void 0!==e?e:Wy[t]},t.prototype.getCallback=function(t){return this.mergeGridCommonParams(this.gridOptions[t])},t.prototype.exists=function(t){return r(this.gridOptions[t])},t.prototype.mergeGridCommonParams=function(t){var e=this;if(t){return function(o){var n=o;return n.api=e.api,n.columnApi=e.columnApi,n.context=e.context,t(n)}}return t},t.toBoolean=function(t){return"boolean"===typeof t?t:"string"===typeof t&&("TRUE"===t.toUpperCase()||""==t)},t.toNumber=function(t){if("number"===typeof t)return t;if("string"===typeof t){var e=parseInt(t);if(isNaN(e))return;return e}},t.toConstrainedNum=function(t,o){return function(n){var r=e.toNumber(n);if(!(null==r||r<t||r>o))return r}},t.getCoercedValue=function(t,o){var n=e.PROPERTY_COERCIONS.get(t);return n?n(o):o},t.getCoercedGridOptions=function(t){var o={};return Object.entries(t).forEach(function(t){var n=Zy(t,2),r=n[0],i=n[1],a=e.getCoercedValue(r,i);o[r]=a}),o},t.prototype.updateGridOptions=function(t){var o=this,n=t.options,r=t.source,i=void 0===r?"api":r,a={id:e.changeSetId++,properties:[]},s=[];Object.entries(n).forEach(function(t){var n=Zy(t,2),r=n[0],l=n[1];"api"===i&&Ee[r]&&O("".concat(r," is an initial property and cannot be updated."));var u=e.getCoercedValue(r,l),c="object"===typeof u&&"api"===i,p=o.gridOptions[r];if(c||p!==u){o.gridOptions[r]=u;var d={type:r,currentValue:u,previousValue:p,changeSet:a,source:i};s.push(d)}}),this.validationService.processGridOptions(this.gridOptions),a.properties=s.map(function(t){return t.type}),s.forEach(function(t){o.gridOptions.debug&&console.log("AG Grid: Updated property ".concat(t.type," from "),t.previousValue," to  ",t.currentValue),o.propertyEventService.dispatchEvent(t)})},t.prototype.addEventListener=function(t,e){this.propertyEventService.addEventListener(t,e)},t.prototype.removeEventListener=function(t,e){this.propertyEventService.removeEventListener(t,e)},t.prototype.getScrollbarWidth=function(){if(null==this.scrollbarWidth){var t="number"===typeof this.gridOptions.scrollbarWidth&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:Mo();null!=t&&(this.scrollbarWidth=t,this.eventService.dispatchEvent({type:qt.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth},t.prototype.isRowModelType=function(t){return this.gridOptions.rowModelType===t||"clientSide"===t&&i(this.gridOptions.rowModelType)},t.prototype.isDomLayout=function(t){var e;return(null!==(e=this.gridOptions.domLayout)&&void 0!==e?e:"normal")===t},t.prototype.isRowSelection=function(){return"single"===this.gridOptions.rowSelection||"multiple"===this.gridOptions.rowSelection},t.prototype.useAsyncEvents=function(){return!this.get("suppressAsyncEvents")},t.prototype.isGetRowHeightFunction=function(){return"function"===typeof this.gridOptions.getRowHeight},t.prototype.getRowHeightForNode=function(t,e,o){if(void 0===e&&(e=!1),null==o&&(o=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(e)return{height:o,estimated:!0};var n={node:t,data:t.data},r=this.getCallback("getRowHeight")(n);if(this.isNumeric(r))return 0===r&&O("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,r),estimated:!1}}return t.detail&&this.get("masterDetail")?this.getMasterDetailRowHeight():{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:o,estimated:!1}},t.prototype.getMasterDetailRowHeight=function(){return this.get("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}},t.prototype.getRowHeightAsNumber=function(){if(!this.gridOptions.rowHeight||i(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();var t=this.environment.refreshRowHeightVariable();return-1!==t?t:(console.warn("AG Grid row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())},t.prototype.isNumeric=function(t){return!isNaN(t)&&"number"===typeof t&&isFinite(t)},t.prototype.getDomDataKey=function(){return this.domDataKey},t.prototype.getDomData=function(t,e){var o=t[this.getDomDataKey()];return o?o[e]:void 0},t.prototype.setDomData=function(t,e,o){var n=this.getDomDataKey(),r=t[n];i(r)&&(r={},t[n]=r),r[e]=o},t.prototype.getDocument=function(){var t=null;return this.gridOptions.getDocument&&r(this.gridOptions.getDocument)?t=this.gridOptions.getDocument():this.eGridDiv&&(t=this.eGridDiv.ownerDocument),t&&r(t)?t:document},t.prototype.getWindow=function(){return this.getDocument().defaultView||window},t.prototype.getRootNode=function(){return this.eGridDiv.getRootNode()},t.prototype.getAsyncTransactionWaitMillis=function(){return r(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50},t.prototype.isAnimateRows=function(){return!this.get("ensureDomOrder")&&this.get("animateRows")},t.prototype.isGroupRowsSticky=function(){return!(this.get("suppressGroupRowsSticky")||this.get("paginateChildRows")||this.get("groupHideOpenParents")||this.isDomLayout("print"))},t.prototype.isColumnsSortingCoupledToGroup=function(){var t=this.gridOptions.autoGroupColumnDef;return!(null===t||void 0===t?void 0:t.comparator)&&!this.get("treeData")},t.prototype.getGroupAggFiltering=function(){var t=this.gridOptions.groupAggFiltering;return"function"===typeof t?this.getCallback("groupAggFiltering"):!0===t?function(){return!0}:void 0},t.prototype.isGroupIncludeFooterTrueOrCallback=function(){var t=this.gridOptions.groupIncludeFooter;return!0===t||"function"===typeof t},t.prototype.getGroupIncludeFooter=function(){var t=this.gridOptions.groupIncludeFooter;return"function"===typeof t?this.getCallback("groupIncludeFooter"):!0===t?function(){return!0}:function(){return!1}},t.prototype.isGroupMultiAutoColumn=function(){return this.gridOptions.groupDisplayType?"multipleColumns"===this.gridOptions.groupDisplayType:this.get("groupHideOpenParents")},t.prototype.isGroupUseEntireRow=function(t){return!t&&"groupRows"===this.gridOptions.groupDisplayType},t.prototype.getGridCommonParams=function(){return{api:this.api,columnApi:this.columnApi,context:this.context}},t.prototype.addGridCommonParams=function(t){var e=t;return e.api=this.api,e.columnApi=this.columnApi,e.context=this.context,e},t.alwaysSyncGlobalEvents=new Set([qt.EVENT_GRID_PRE_DESTROYED]),t.PROPERTY_COERCIONS=new Map(Xy(Xy(Xy([],Zy(xe.BOOLEAN_PROPERTIES.map(function(t){return[t,e.toBoolean]})),!1),Zy(xe.NUMBER_PROPERTIES.map(function(t){return[t,e.toNumber]})),!1),[["groupAggFiltering",function(t){return"function"===typeof t?t:e.toBoolean(t)}],["pageSize",e.toConstrainedNum(1,Number.MAX_VALUE)],["autoSizePadding",e.toConstrainedNum(0,Number.MAX_VALUE)],["keepDetailRowsCount",e.toConstrainedNum(1,Number.MAX_VALUE)],["rowBuffer",e.toConstrainedNum(0,Number.MAX_VALUE)],["infiniteInitialRowCount",e.toConstrainedNum(1,Number.MAX_VALUE)],["cacheOverflowSize",e.toConstrainedNum(1,Number.MAX_VALUE)],["cacheBlockSize",e.toConstrainedNum(1,Number.MAX_VALUE)],["serverSideInitialRowCount",e.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelPageSize",e.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelBufferSize",e.toConstrainedNum(0,Number.MAX_VALUE)]],!1)),t.changeSetId=0,Yy([J("gridOptions")],t.prototype,"gridOptions",void 0),Yy([J("eventService")],t.prototype,"eventService",void 0),Yy([J("environment")],t.prototype,"environment",void 0),Yy([J("frameworkOverrides")],t.prototype,"frameworkOverrides",void 0),Yy([J("eGridDiv")],t.prototype,"eGridDiv",void 0),Yy([J("validationService")],t.prototype,"validationService",void 0),Yy([J("gridApi")],t.prototype,"api",void 0),Yy([Y],t.prototype,"init",null),Yy([Z],t.prototype,"destroy",null),t=e=Yy([X("gridOptionsService")],t)}(),Qy=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),$y=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},tv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qy(e,t),e.prototype.getLocaleTextFunc=function(){var t=this.gridOptionsService.getCallback("getLocaleText");if(t)return function(e,o,n){return t({key:e,defaultValue:o,variableValues:n})};var e=this.gridOptionsService.get("localeText");return function(t,o,n){var r=e&&e[t];if(r&&n&&n.length)for(var i=0;!(i>=n.length);){if(-1===r.indexOf("${variable}"))break;r=r.replace("${variable}",n[i++])}return null!==r&&void 0!==r?r:o}},e=$y([X("localeService")],e)}(Bt),ev=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),ov=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},nv=function(t){function e(){return t.call(this,e.TEMPLATE,"vertical")||this}return ev(e,t),e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this),this.createManagedBean(new qu(this.eContainer)),this.ctrlsService.registerFakeVScrollComp(this),this.addManagedListener(this.eventService,qt.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onRowContainerHeightChanged.bind(this))},e.prototype.setScrollVisible=function(){var t=this.scrollVisibleService.isVerticalScrollShowing(),e=this.invisibleScrollbar,o=t&&this.gridOptionsService.getScrollbarWidth()||0,n=0===o&&e?16:o;this.addOrRemoveCssClass("ag-scrollbar-invisible",e),En(this.getGui(),n),En(this.eViewport,n),En(this.eContainer,n),this.setDisplayed(t,{skipAriaHidden:!0})},e.prototype.onRowContainerHeightChanged=function(){var t=this.ctrlsService.getGridBodyCtrl().getBodyViewportElement(),e=this.getScrollPosition(),o=t.scrollTop;e!=o&&this.setScrollPosition(o,!0)},e.prototype.getScrollPosition=function(){return this.getViewport().scrollTop},e.prototype.setScrollPosition=function(t,e){e||gn(this.getViewport())||this.attemptSettingScrollPosition(t),this.getViewport().scrollTop=t},e.TEMPLATE='<div class="ag-body-vertical-scroll" aria-hidden="true">\n            <div class="ag-body-vertical-scroll-viewport" ref="eViewport">\n                <div class="ag-body-vertical-scroll-container" ref="eContainer"></div>\n            </div>\n        </div>',ov([Y],e.prototype,"postConstruct",null),e}(Ay),rv=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),iv=function(){return(iv=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},av=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},sv=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},lv=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},uv={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},cv=["january","february","march","april","may","june","july","august","september","october","november","december"],pv=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dataTypeDefinitions={},e.isWaitingForRowData=!1,e.isColumnTypeOverrideInDataTypeDefinitions=!1,e.columnStateUpdatesPendingInference={},e.columnStateUpdateListenerDestroyFuncs=[],e}return rv(e,t),e.prototype.init=function(){var t=this;this.groupHideOpenParents=this.gridOptionsService.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",function(){t.groupHideOpenParents=t.gridOptionsService.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",function(e){t.processDataTypeDefinitions(),t.columnModel.recreateColumnDefs(ge(e.source))})},e.prototype.processDataTypeDefinitions=function(){var t,e=this,o=this.getDefaultDataTypes();this.dataTypeDefinitions={},Object.entries(o).forEach(function(t){var o=sv(t,2),n=o[0],r=o[1];e.dataTypeDefinitions[n]=iv(iv({},r),{groupSafeValueFormatter:e.createGroupSafeValueFormatter(r)})});var n=null!==(t=this.gridOptionsService.get("dataTypeDefinitions"))&&void 0!==t?t:{};this.dataTypeMatchers={},Object.entries(n).forEach(function(t){var r=sv(t,2),i=r[0],a=r[1],s=e.processDataTypeDefinition(a,n,[i],o);s&&(e.dataTypeDefinitions[i]=s,a.dataTypeMatcher&&(e.dataTypeMatchers[i]=a.dataTypeMatcher))}),this.checkObjectValueHandlers(o),["dateString","text","number","boolean","date"].forEach(function(t){var n=e.dataTypeMatchers[t];n&&delete e.dataTypeMatchers[t],e.dataTypeMatchers[t]=null!==n&&void 0!==n?n:o[t].dataTypeMatcher})},e.prototype.mergeDataTypeDefinitions=function(t,e){var o=iv(iv({},t),e);return t.columnTypes&&e.columnTypes&&e.appendColumnTypes&&(o.columnTypes=lv(lv([],sv(this.convertColumnTypes(t.columnTypes)),!1),sv(this.convertColumnTypes(e.columnTypes)),!1)),o},e.prototype.processDataTypeDefinition=function(t,e,o,n){var r,i=t.extendsDataType;if(t.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),t.extendsDataType===t.baseDataType){var a=n[i],s=e[i];if(a&&s&&(a=s),!this.validateDataTypeDefinition(t,a,i))return;r=this.mergeDataTypeDefinitions(a,t)}else{if(o.includes(i))return void O('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');var l=e[i];if(!this.validateDataTypeDefinition(t,l,i))return;var u=this.processDataTypeDefinition(l,e,lv(lv([],sv(o),!1),[i],!1),n);if(!u)return;r=this.mergeDataTypeDefinitions(u,t)}return iv(iv({},r),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(r)})},e.prototype.validateDataTypeDefinition=function(t,e,o){return e?e.baseDataType===t.baseDataType||(O('The "baseDataType" property of a data type definition must match that of its parent.'),!1):(O("The data type definition ".concat(o," does not exist.")),!1)},e.prototype.createGroupSafeValueFormatter=function(t){var e=this;if(t.valueFormatter)return function(o){var n,r;if(null===(n=o.node)||void 0===n?void 0:n.group){var i=o.column.getAggFunc();if(i){if("first"===i||"last"===i)return t.valueFormatter(o);if("number"===t.baseDataType&&"count"!==i){if("number"===typeof o.value)return t.valueFormatter(o);if("object"===typeof o.value){if(!o.value)return;if("toNumber"in o.value)return t.valueFormatter(iv(iv({},o),{value:o.value.toNumber()}));if("value"in o.value)return t.valueFormatter(iv(iv({},o),{value:o.value.value}))}}}if(!e.gridOptionsService.get("suppressGroupMaintainValueType"))return}else if(e.groupHideOpenParents&&o.column.isRowGroupActive()){if("string"!==typeof o.value||(null===(r=t.dataTypeMatcher)||void 0===r?void 0:r.call(t,o.value)))return t.valueFormatter(o);if(!e.gridOptionsService.get("suppressGroupMaintainValueType"))return}return t.valueFormatter(o)}},e.prototype.updateColDefAndGetDataTypeDefinitionColumnType=function(t,e,o){var n=e.cellDataType,r=e.field;if(void 0===n&&(n=t.cellDataType),null!=n&&!0!==n||(n=!!this.canInferCellDataType(t,e)&&this.inferCellDataType(r,o)),n){var i=this.dataTypeDefinitions[n];if(i)return t.cellDataType=n,i.groupSafeValueFormatter&&(t.valueFormatter=i.groupSafeValueFormatter),i.valueParser&&(t.valueParser=i.valueParser),i.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(t,i,o),i.columnTypes;O('Missing data type definition - "'.concat(n,'"'))}else t.cellDataType=!1},e.prototype.updateColDefAndGetColumnType=function(t,e,o){var n,r,i=this.updateColDefAndGetDataTypeDefinitionColumnType(t,e,o),a=null!==(r=null!==(n=e.type)&&void 0!==n?n:i)&&void 0!==r?r:t.type;return t.type=a,a?this.convertColumnTypes(a):void 0},e.prototype.addColumnListeners=function(t){if(this.isWaitingForRowData){var e=this.columnStateUpdatesPendingInference[t.getColId()];if(e){var o=function(t){e.add(t.key)};t.addEventListener(ct.EVENT_STATE_UPDATED,o),this.columnStateUpdateListenerDestroyFuncs.push(function(){return t.removeEventListener(ct.EVENT_STATE_UPDATED,o)})}}},e.prototype.canInferCellDataType=function(t,e){var o,n=this;if("clientSide"!==this.rowModel.getType())return!1;var r={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(e,r))return!1;var i=null===e.type?t.type:e.type;if(i){var a=null!==(o=this.gridOptionsService.get("columnTypes"))&&void 0!==o?o:{};if(this.convertColumnTypes(i).some(function(t){var e=a[t.trim()];return e&&n.doColDefPropsPreventInference(e,r)}))return!1}return!this.doColDefPropsPreventInference(t,r)},e.prototype.doColDefPropsPreventInference=function(t,e){var o=this;return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(function(n){var r=sv(n,2),i=r[0],a=r[1];return o.doesColDefPropPreventInference(t,e,i,a)})},e.prototype.doesColDefPropPreventInference=function(t,e,o,n){if(!e[o])return!1;var r=t[o];return null===r?(e[o]=!1,!1):void 0===n?!!r:r===n},e.prototype.inferCellDataType=function(t,e){var o;if(t){var n,r=this.getInitialData();if(r){var i=t.indexOf(".")>=0&&!this.gridOptionsService.get("suppressFieldDotNotation");n=w(r,t,i)}else this.initWaitForRowData(e);if(null!=n)return sv(null!==(o=Object.entries(this.dataTypeMatchers).find(function(t){var e=sv(t,2);return e[0],(0,e[1])(n)}))&&void 0!==o?o:["object"],1)[0]}},e.prototype.getInitialData=function(){var t=this.gridOptionsService.get("rowData");if(null===t||void 0===t?void 0:t.length)return t[0];if(this.initialData)return this.initialData;var e=this.rowModel.getRootNode().allLeafChildren;return(null===e||void 0===e?void 0:e.length)?e[0].data:null},e.prototype.initWaitForRowData=function(t){var e=this;if(this.columnStateUpdatesPendingInference[t]=new Set,!this.isWaitingForRowData){this.isWaitingForRowData=!0;var o=this.isColumnTypeOverrideInDataTypeDefinitions;o&&this.columnModel.queueResizeOperations();var n=this.addManagedListener(this.eventService,qt.EVENT_ROW_DATA_UPDATE_STARTED,function(t){var r=t.firstRowData;if(r){null===n||void 0===n||n(),e.isWaitingForRowData=!1,e.processColumnsPendingInference(r,o),e.columnStateUpdatesPendingInference={},o&&e.columnModel.processResizeOperations();var i={type:qt.EVENT_DATA_TYPES_INFERRED};e.eventService.dispatchEvent(i)}})}},e.prototype.isPendingInference=function(){return this.isWaitingForRowData},e.prototype.processColumnsPendingInference=function(t,e){var o=this;this.initialData=t;var n=[];this.columnStateUpdateListenerDestroyFuncs.forEach(function(t){return t()}),this.columnStateUpdateListenerDestroyFuncs=[];var r={},i={};Object.entries(this.columnStateUpdatesPendingInference).forEach(function(t){var a=sv(t,2),s=a[0],l=a[1],u=o.columnModel.getGridColumn(s);if(u){var c=u.getColDef();if(o.columnModel.resetColumnDefIntoColumn(u,"cellDataTypeInferred")){var p=u.getColDef();if(e&&p.type&&p.type!==c.type){var d=o.getUpdatedColumnState(u,l);d.rowGroup&&null==d.rowGroupIndex&&(r[s]=d),d.pivot&&null==d.pivotIndex&&(i[s]=d),n.push(d)}}}}),e&&n.push.apply(n,lv([],sv(this.columnModel.generateColumnStateForRowGroupAndPivotIndexes(r,i)),!1)),n.length&&this.columnModel.applyColumnState({state:n},"cellDataTypeInferred"),this.initialData=null},e.prototype.getUpdatedColumnState=function(t,e){var o=this.columnModel.getColumnStateFromColDef(t);return e.forEach(function(t){delete o[t],"rowGroup"===t?delete o.rowGroupIndex:"pivot"===t&&delete o.pivotIndex}),o},e.prototype.checkObjectValueHandlers=function(t){var e=this.dataTypeDefinitions.object,o=t.object;this.hasObjectValueParser=e.valueParser!==o.valueParser,this.hasObjectValueFormatter=e.valueFormatter!==o.valueFormatter},e.prototype.convertColumnTypes=function(t){var e=[];t instanceof Array?t.some(function(t){return"string"!==typeof t})?console.warn("if colDef.type is supplied an array it should be of type 'string[]'"):e=t:"string"===typeof t?e=t.split(","):console.warn("colDef.type should be of type 'string' | 'string[]'");return e},e.prototype.getDateStringTypeDefinition=function(t){var e;return t&&null!==(e=this.getDataTypeDefinition(t))&&void 0!==e?e:this.dataTypeDefinitions.dateString},e.prototype.getDateParserFunction=function(t){return this.getDateStringTypeDefinition(t).dateParser},e.prototype.getDateFormatterFunction=function(t){return this.getDateStringTypeDefinition(t).dateFormatter},e.prototype.getDataTypeDefinition=function(t){var e=t.getColDef();if(e.cellDataType)return this.dataTypeDefinitions[e.cellDataType]},e.prototype.getBaseDataType=function(t){var e;return null===(e=this.getDataTypeDefinition(t))||void 0===e?void 0:e.baseDataType},e.prototype.checkType=function(t,e){var o;if(null==e)return!0;var n=null===(o=this.getDataTypeDefinition(t))||void 0===o?void 0:o.dataTypeMatcher;return!n||n(e)},e.prototype.validateColDef=function(t){"object"===t.cellDataType&&(t.valueFormatter!==this.dataTypeDefinitions.object.groupSafeValueFormatter||this.hasObjectValueFormatter||O('Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"'),t.editable&&t.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&O('Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"'))},e.prototype.setColDefPropertiesForBaseDataType=function(t,e,o){var n=this,i=function(t,o,r){var i=t.getColDef().valueFormatter;return i===e.groupSafeValueFormatter&&(i=e.valueFormatter),n.valueFormatterService.formatValue(t,o,r,i)},a=j.__isRegistered(V.SetFilterModule,this.context.getGridId()),s=this.localeService.getLocaleTextFunc(),l=function(e){var o=t.filterParams;t.filterParams="object"===typeof o?iv(iv({},o),e):e};switch(e.baseDataType){case"number":t.cellEditor="agNumberCellEditor",a&&l({comparator:function(t,e){var o=null==t?0:parseInt(t),n=null==e?0:parseInt(e);return o===n?0:o>n?1:-1}});break;case"boolean":t.cellEditor="agCheckboxCellEditor",t.cellRenderer="agCheckboxCellRenderer",t.suppressKeyboardEvent=function(t){return!!t.colDef.editable&&t.event.key===jn.SPACE},l(a?{valueFormatter:function(t){return r(t.value)?s(String(t.value),t.value?"True":"False"):s("blanks","(Blanks)")}}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:function(t,e){return e},numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:function(t,e){return!1===e},numberOfInputs:0}]});break;case"date":t.cellEditor="agDateCellEditor",t.keyCreator=function(t){return i(t.column,t.node,t.value)},a&&l({valueFormatter:function(t){var e=i(t.column,t.node,t.value);return r(e)?e:s("blanks","(Blanks)")},treeList:!0,treeListFormatter:function(t,e){if(1===e&&null!=t){var o=cv[Number(t)-1];return s(o,uv[o])}return null!==t&&void 0!==t?t:s("blanks","(Blanks)")}});break;case"dateString":t.cellEditor="agDateStringCellEditor",t.keyCreator=function(t){return i(t.column,t.node,t.value)};var u=e.dateParser;l(a?{valueFormatter:function(t){var e=i(t.column,t.node,t.value);return r(e)?e:s("blanks","(Blanks)")},treeList:!0,treeListPathGetter:function(t){var e=u(null!==t&&void 0!==t?t:void 0);return e?[String(e.getFullYear()),String(e.getMonth()+1),String(e.getDate())]:null},treeListFormatter:function(t,e){if(1===e&&null!=t){var o=cv[Number(t)-1];return s(o,uv[o])}return null!==t&&void 0!==t?t:s("blanks","(Blanks)")}}:{comparator:function(t,e){var o=u(e);return null==e||o<t?-1:o>t?1:0}});break;case"object":t.cellEditorParams={useFormatter:!0},t.comparator=function(t,e){var r=n.columnModel.getPrimaryColumn(o),a=null===r||void 0===r?void 0:r.getColDef();if(!r||!a)return 0;var s=null==t?"":i(r,null,t),l=null==e?"":i(r,null,e);return s===l?0:s>l?1:-1},t.keyCreator=function(t){return i(t.column,t.node,t.value)},a?l({valueFormatter:function(t){var e=i(t.column,t.node,t.value);return r(e)?e:s("blanks","(Blanks)")}}):t.filterValueGetter=function(t){return i(t.column,t.node,n.valueService.getValue(t.column,t.node))}}},e.prototype.getDefaultDataTypes=function(){var t=function(t){return!!t.match("^\\d{4}-\\d{2}-\\d{2}$")},e=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:function(t){var e,o;return""===(null===(o=null===(e=t.newValue)||void 0===e?void 0:e.trim)||void 0===o?void 0:o.call(e))?null:Number(t.newValue)},valueFormatter:function(t){return null==t.value?"":"number"!==typeof t.value||isNaN(t.value)?e("invalidNumber","Invalid Number"):String(t.value)},dataTypeMatcher:function(t){return"number"===typeof t}},text:{baseDataType:"text",valueParser:function(t){return""===t.newValue?null:s(t.newValue)},dataTypeMatcher:function(t){return"string"===typeof t}},boolean:{baseDataType:"boolean",valueParser:function(t){var e,o;return null==t.newValue?t.newValue:""===(null===(o=null===(e=t.newValue)||void 0===e?void 0:e.trim)||void 0===o?void 0:o.call(e))?null:"true"===String(t.newValue).toLowerCase()},valueFormatter:function(t){return null==t.value?"":String(t.value)},dataTypeMatcher:function(t){return"boolean"===typeof t}},date:{baseDataType:"date",valueParser:function(t){return Uo(null==t.newValue?null:String(t.newValue))},valueFormatter:function(t){var o;return null==t.value?"":t.value instanceof Date&&!isNaN(t.value.getTime())?null!==(o=zo(t.value,!1))&&void 0!==o?o:"":e("invalidDate","Invalid Date")},dataTypeMatcher:function(t){return t instanceof Date}},dateString:{baseDataType:"dateString",dateParser:function(t){var e;return null!==(e=Uo(t))&&void 0!==e?e:void 0},dateFormatter:function(t){var e;return null!==(e=zo(null!==t&&void 0!==t?t:null,!1))&&void 0!==e?e:void 0},valueParser:function(e){return t(String(e.newValue))?e.newValue:null},valueFormatter:function(e){return t(String(e.value))?e.value:""},dataTypeMatcher:function(e){return"string"===typeof e&&t(e)}},object:{baseDataType:"object",valueParser:function(){return null},valueFormatter:function(t){var e;return null!==(e=s(t.value))&&void 0!==e?e:""}}}},av([J("rowModel")],e.prototype,"rowModel",void 0),av([J("columnModel")],e.prototype,"columnModel",void 0),av([J("columnUtils")],e.prototype,"columnUtils",void 0),av([J("valueService")],e.prototype,"valueService",void 0),av([J("valueFormatterService")],e.prototype,"valueFormatterService",void 0),av([Y],e.prototype,"init",null),e=av([X("dataTypeService")],e)}(Bt),dv=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),hv=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},fv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return dv(e,t),e.prototype.parseValue=function(t,e,o,n){var i=t.getColDef(),a=this.gridOptionsService.addGridCommonParams({node:e,data:null===e||void 0===e?void 0:e.data,oldValue:n,newValue:o,colDef:i,column:t}),s=i.valueParser;return r(s)?"function"===typeof s?s(a):this.expressionService.evaluate(s,a):o},hv([J("expressionService")],e.prototype,"expressionService",void 0),e=hv([X("valueParserService")],e)}(Bt),gv=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),yv=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},vv=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.waitingForColumns=!1,e}return gv(e,t),e.prototype.postConstruct=function(){var t=this;this.addManagedPropertyListener("columnDefs",function(e){return t.setColumnDefs(e)})},e.prototype.start=function(){var t=this;this.ctrlsService.whenReady(function(){var e=t.gridOptionsService.get("columnDefs");e?t.setColumnsAndData(e):t.waitingForColumns=!0,t.gridReady()})},e.prototype.setColumnsAndData=function(t){this.columnModel.setColumnDefs(null!==t&&void 0!==t?t:[],"gridInitializing"),this.rowModel.start()},e.prototype.gridReady=function(){var t=this;this.dispatchGridReadyEvent();var e=j.__isRegistered(V.EnterpriseCoreModule,this.context.getGridId());new qf("AG Grid",function(){return t.gridOptionsService.get("debug")}).log("initialised successfully, enterprise = ".concat(e))},e.prototype.dispatchGridReadyEvent=function(){var t={type:qt.EVENT_GRID_READY};this.eventService.dispatchEvent(t)},e.prototype.setColumnDefs=function(t){var e=this.gridOptionsService.get("columnDefs");if(e)return this.waitingForColumns?(this.waitingForColumns=!1,void this.setColumnsAndData(e)):void this.columnModel.setColumnDefs(e,ge(t.source))},yv([J("ctrlsService")],e.prototype,"ctrlsService",void 0),yv([J("columnModel")],e.prototype,"columnModel",void 0),yv([J("rowModel")],e.prototype,"rowModel",void 0),yv([Y],e.prototype,"postConstruct",null),e=yv([X("syncService")],e)}(Bt),mv=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Cv=function(){return(Cv=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},_v=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},wv=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.manuallyDisplayed=!1,e}return mv(e,t),e.prototype.postConstruct=function(){var t=this;this.addManagedListener(this.eventService,qt.EVENT_ROW_DATA_UPDATED,function(){return t.onRowDataUpdated()}),this.addManagedListener(this.eventService,qt.EVENT_NEW_COLUMNS_LOADED,function(){return t.onNewColumnsLoaded()})},e.prototype.registerOverlayWrapperComp=function(t){this.overlayWrapperComp=t,(!this.gridOptionsService.get("columnDefs")||this.gridOptionsService.isRowModelType("clientSide")&&!this.gridOptionsService.get("rowData"))&&this.showLoadingOverlay()},e.prototype.showLoadingOverlay=function(){if(!this.gridOptionsService.get("suppressLoadingOverlay")){var t=this.userComponentFactory.getLoadingOverlayCompDetails({});this.showOverlay(t,"ag-overlay-loading-wrapper","loadingOverlayComponentParams")}},e.prototype.showNoRowsOverlay=function(){if(!this.gridOptionsService.get("suppressNoRowsOverlay")){var t=this.userComponentFactory.getNoRowsOverlayCompDetails({});this.showOverlay(t,"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams")}},e.prototype.showOverlay=function(t,e,o){var n=this,r=t.newAgStackInstance(),i=this.addManagedPropertyListener(o,function(t){var e=t.currentValue;r.then(function(t){t.refresh&&t.refresh(n.gridOptionsService.addGridCommonParams(Cv({},null!==e&&void 0!==e?e:{})))})});this.manuallyDisplayed=this.columnModel.isReady()&&!this.paginationProxy.isEmpty(),this.overlayWrapperComp.showOverlay(r,e,i)},e.prototype.hideOverlay=function(){this.manuallyDisplayed=!1,this.overlayWrapperComp.hideOverlay()},e.prototype.showOrHideOverlay=function(){var t=this.paginationProxy.isEmpty(),e=this.gridOptionsService.get("suppressNoRowsOverlay");t&&!e?this.showNoRowsOverlay():this.hideOverlay()},e.prototype.onRowDataUpdated=function(){this.showOrHideOverlay()},e.prototype.onNewColumnsLoaded=function(){!this.columnModel.isReady()||this.paginationProxy.isEmpty()||this.manuallyDisplayed||this.hideOverlay()},_v([J("userComponentFactory")],e.prototype,"userComponentFactory",void 0),_v([J("paginationProxy")],e.prototype,"paginationProxy",void 0),_v([J("columnModel")],e.prototype,"columnModel",void 0),_v([Y],e.prototype,"postConstruct",null),e=_v([X("overlayService")],e)}(Bt),bv=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Sv=function(){return(Sv=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Ev=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},xv=function(t){var e="function"===typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tv=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},Ov=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.suppressEvents=!0,e.queuedUpdateSources=new Set,e.dispatchStateUpdateEventDebounced=N(function(){return e.dispatchQueuedStateUpdateEvents()},0),e}return bv(e,t),e.prototype.postConstruct=function(){var t,e=this;this.isClientSideRowModel="clientSide"===this.rowModel.getType(),this.cachedState=null!==(t=this.gridOptionsService.get("initialState"))&&void 0!==t?t:{},this.ctrlsService.whenReady(function(){return e.suppressEventsAndDispatchInitEvent(function(){return e.setupStateOnGridReady()})});var o=this.addManagedListener(this.eventService,qt.EVENT_NEW_COLUMNS_LOADED,function(t){"gridInitializing"===t.source&&(null===o||void 0===o||o(),e.suppressEventsAndDispatchInitEvent(function(){return e.setupStateOnColumnsInitialised()}))}),n=this.addManagedListener(this.eventService,qt.EVENT_ROW_COUNT_READY,function(){null===n||void 0===n||n(),e.suppressEventsAndDispatchInitEvent(function(){return e.setupStateOnRowCountReady()})}),r=this.addManagedListener(this.eventService,qt.EVENT_FIRST_DATA_RENDERED,function(){null===r||void 0===r||r(),e.suppressEventsAndDispatchInitEvent(function(){return e.setupStateOnFirstDataRendered()})})},e.prototype.getState=function(){return this.cachedState},e.prototype.setupStateOnGridReady=function(){var t=this;this.updateCachedState("sideBar",this.getSideBarState()),this.addManagedListener(this.eventService,qt.EVENT_TOOL_PANEL_VISIBLE_CHANGED,function(){return t.updateCachedState("sideBar",t.getSideBarState())}),this.addManagedListener(this.eventService,qt.EVENT_SIDE_BAR_UPDATED,function(){return t.updateCachedState("sideBar",t.getSideBarState())})},e.prototype.setupStateOnColumnsInitialised=function(){var t,e=this,o=null!==(t=this.gridOptionsService.get("initialState"))&&void 0!==t?t:{};this.setColumnState(o),this.setColumnGroupState(o),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState()),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_VALUE_CHANGED,function(){return e.updateColumnState(["aggregation"])}),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_MOVED,function(){return e.updateColumnState(["columnOrder"])}),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_PINNED,function(){return e.updateColumnState(["columnPinning"])}),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_RESIZED,function(){return e.updateColumnState(["columnSizing"])}),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_VISIBLE,function(){return e.updateColumnState(["columnVisibility"])}),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_PIVOT_CHANGED,function(){return e.updateColumnState(["pivot"])}),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_PIVOT_MODE_CHANGED,function(){return e.updateColumnState(["pivot"])}),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return e.updateColumnState(["rowGroup"])}),this.addManagedListener(this.eventService,qt.EVENT_SORT_CHANGED,function(){return e.updateColumnState(["sort"])}),this.addManagedListener(this.eventService,qt.EVENT_NEW_COLUMNS_LOADED,function(){return e.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"])}),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_GROUP_OPENED,function(){return e.updateCachedState("columnGroup",e.getColumnGroupState())})},e.prototype.setupStateOnRowCountReady=function(){var t,e=this,o=null!==(t=this.gridOptionsService.get("initialState"))&&void 0!==t?t:{},n=o.filter,r=o.rowGroupExpansion,i=o.rowSelection,a=o.pagination,s=this.gridOptionsService.get("advancedFilterModel");(n||s)&&this.setFilterState(n,s),r&&this.setRowGroupExpansionState(r),i&&this.setRowSelectionState(i),a&&this.setPaginationState(a),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState()),this.addManagedListener(this.eventService,qt.EVENT_FILTER_CHANGED,function(){return e.updateCachedState("filter",e.getFilterState())}),this.addManagedListener(this.eventService,qt.EVENT_ROW_GROUP_OPENED,function(){return e.updateCachedState("rowGroupExpansion",e.getRowGroupExpansionState())}),this.addManagedListener(this.eventService,qt.EVENT_EXPAND_COLLAPSE_ALL,function(){return e.updateCachedState("rowGroupExpansion",e.getRowGroupExpansionState())}),this.addManagedListener(this.eventService,qt.EVENT_SELECTION_CHANGED,function(){return e.updateCachedState("rowSelection",e.getRowSelectionState())}),this.addManagedListener(this.eventService,qt.EVENT_PAGINATION_CHANGED,function(t){(t.newPage||t.newPageSize)&&e.updateCachedState("pagination",e.getPaginationState())})},e.prototype.setupStateOnFirstDataRendered=function(){var t,e=this,o=null!==(t=this.gridOptionsService.get("initialState"))&&void 0!==t?t:{},n=o.scroll,r=o.rangeSelection,i=o.focusedCell,a=o.columnOrder;i&&this.setFocusedCellState(i),r&&this.setRangeSelectionState(r),n&&this.setScrollState(n),this.setColumnPivotState(!!(null===a||void 0===a?void 0:a.orderedColIds)),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState()),this.updateCachedState("rangeSelection",this.getRangeSelectionState()),this.updateCachedState("scroll",this.getScrollState()),this.addManagedListener(this.eventService,qt.EVENT_CELL_FOCUSED,function(){return e.updateCachedState("focusedCell",e.getFocusedCellState())}),this.addManagedListener(this.eventService,qt.EVENT_RANGE_SELECTION_CHANGED,function(t){t.finished&&e.updateCachedState("rangeSelection",e.getRangeSelectionState())}),this.addManagedListener(this.eventService,qt.EVENT_BODY_SCROLL_END,function(){return e.updateCachedState("scroll",e.getScrollState())})},e.prototype.getColumnState=function(){for(var t=this.columnModel.isPivotMode(),e=[],o=[],n=[],r=[],i=[],a=[],s=[],l=[],u=[],c=this.columnModel.getColumnState(),p=0;p<c.length;p++){var d=c[p],h=d.colId,f=d.sort,g=d.sortIndex,y=d.rowGroup,v=d.rowGroupIndex,m=d.aggFunc,C=d.pivot,_=d.pivotIndex,w=d.pinned,b=d.hide,S=d.width,E=d.flex;u.push(h),f&&(e[null!==g&&void 0!==g?g:0]={colId:h,sort:f}),y&&(o[null!==v&&void 0!==v?v:0]=h),"string"===typeof m&&n.push({colId:h,aggFunc:m}),C&&(r[null!==_&&void 0!==_?_:0]=h),w&&("right"===w?a:i).push(h),b&&s.push(h),(E||S)&&l.push({colId:h,flex:null!==E&&void 0!==E?E:void 0,width:S})}return{sort:e.length?{sortModel:e}:void 0,rowGroup:o.length?{groupColIds:o}:void 0,aggregation:n.length?{aggregationModel:n}:void 0,pivot:r.length||t?{pivotMode:t,pivotColIds:r}:void 0,columnPinning:i.length||a.length?{leftColIds:i,rightColIds:a}:void 0,columnVisibility:s.length?{hiddenColIds:s}:void 0,columnSizing:l.length?{columnSizingModel:l}:void 0,columnOrder:u.length?{orderedColIds:u}:void 0}},e.prototype.setColumnState=function(t){var e=t.sort,o=t.rowGroup,n=t.aggregation,r=t.pivot,i=t.columnPinning,a=t.columnVisibility,s=t.columnSizing,l=t.columnOrder,u={},c=function(t){var e=u[t];return e||(e={colId:t},u[t]=e,e)};e&&e.sortModel.forEach(function(t,e){var o=t.colId,n=t.sort,r=c(o);r.sort=n,r.sortIndex=e}),o&&o.groupColIds.forEach(function(t,e){var o=c(t);o.rowGroup=!0,o.rowGroupIndex=e}),n&&n.aggregationModel.forEach(function(t){var e=t.colId,o=t.aggFunc;c(e).aggFunc=o}),r&&(r.pivotColIds.forEach(function(t,e){var o=c(t);o.pivot=!0,o.pivotIndex=e}),this.gridOptionsService.updateGridOptions({options:{pivotMode:r.pivotMode},source:"gridInitializing"})),i&&(i.leftColIds.forEach(function(t){c(t).pinned="left"}),i.rightColIds.forEach(function(t){c(t).pinned="right"})),a&&a.hiddenColIds.forEach(function(t){c(t).hide=!0}),s&&s.columnSizingModel.forEach(function(t){var e=t.colId,o=t.flex,n=t.width,r=c(e);r.flex=null!==o&&void 0!==o?o:null,r.width=n});var p=null===l||void 0===l?void 0:l.orderedColIds,d=!!(null===p||void 0===p?void 0:p.length),h=d?p.map(function(t){return c(t)}):Object.values(u);if(h.length){this.columnStates=h;this.columnModel.applyColumnState({state:h,applyOrder:d,defaultState:{sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null}},"gridInitializing")}},e.prototype.setColumnPivotState=function(t){var e,o,n=this.columnStates;this.columnStates=void 0;var r=this.columnGroupStates;if(this.columnGroupStates=void 0,this.columnModel.isSecondaryColumnsPresent()){if(n){var i=[];try{for(var a=xv(n),s=a.next();!s.done;s=a.next()){var l=s.value;this.columnModel.getSecondaryColumn(l.colId)&&i.push(l)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(e)throw e.error}}this.columnModel.applyColumnState({state:i,applyOrder:t},"gridInitializing")}r&&this.columnModel.setColumnGroupState(r,"gridInitializing")}},e.prototype.getColumnGroupState=function(){var t=this.columnModel.getColumnGroupState(),e=[];return t.forEach(function(t){var o=t.groupId;t.open&&e.push(o)}),e.length?{openColumnGroupIds:e}:void 0},e.prototype.setColumnGroupState=function(t){var e;if(t.hasOwnProperty("columnGroup")){var o=new Set(null===(e=t.columnGroup)||void 0===e?void 0:e.openColumnGroupIds),n=this.columnModel.getColumnGroupState().map(function(t){var e=t.groupId,n=o.has(e);return n&&o.delete(e),{groupId:e,open:n}});o.forEach(function(t){n.push({groupId:t,open:!0})}),n.length&&(this.columnGroupStates=n),this.columnModel.setColumnGroupState(n,"gridInitializing")}},e.prototype.getFilterState=function(){var t,e=this.filterManager.getFilterModel();e&&0===Object.keys(e).length&&(e=void 0);var o=null!==(t=this.filterManager.getAdvancedFilterModel())&&void 0!==t?t:void 0;return e||o?{filterModel:e,advancedFilterModel:o}:void 0},e.prototype.setFilterState=function(t,e){var o=null!==t&&void 0!==t?t:{advancedFilterModel:e},n=o.filterModel,r=o.advancedFilterModel;n&&this.filterManager.setFilterModel(n,"columnFilter"),r&&this.filterManager.setAdvancedFilterModel(r)},e.prototype.getRangeSelectionState=function(){var t,e=null===(t=this.rangeService)||void 0===t?void 0:t.getCellRanges().map(function(t){var e=t.id,o=t.type,n=t.startRow,r=t.endRow,i=t.columns,a=t.startColumn;return{id:e,type:o,startRow:n,endRow:r,colIds:i.map(function(t){return t.getColId()}),startColId:a.getColId()}});return(null===e||void 0===e?void 0:e.length)?{cellRanges:e}:void 0},e.prototype.setRangeSelectionState=function(t){var e,o=this;if(this.gridOptionsService.get("enableRangeSelection")){var n=t.cellRanges.map(function(t){return Sv(Sv({},t),{columns:t.colIds.map(function(t){return o.columnModel.getGridColumn(t)}),startColumn:o.columnModel.getGridColumn(t.startColId)})});null===(e=this.rangeService)||void 0===e||e.setCellRanges(n)}},e.prototype.getScrollState=function(){var t,e,o;if(this.isClientSideRowModel){var n=null===(t=this.ctrlsService.getGridBodyCtrl())||void 0===t?void 0:t.getScrollFeature(),r=(null!==(e=null===n||void 0===n?void 0:n.getHScrollPosition())&&void 0!==e?e:{left:0}).left,i=(null!==(o=null===n||void 0===n?void 0:n.getVScrollPosition())&&void 0!==o?o:{top:0}).top;return i||r?{top:i,left:r}:void 0}},e.prototype.setScrollState=function(t){var e;if(this.isClientSideRowModel){var o=t.top,n=t.left;null===(e=this.ctrlsService.getGridBodyCtrl())||void 0===e||e.getScrollFeature().setScrollPosition(o,n)}},e.prototype.getSideBarState=function(){var t,e;return null===(e=null===(t=this.sideBarService)||void 0===t?void 0:t.getSideBarComp())||void 0===e?void 0:e.getState()},e.prototype.getFocusedCellState=function(){if(this.isClientSideRowModel){var t=this.focusService.getFocusedCell();if(t){var e=t.column,o=t.rowIndex,n=t.rowPinned;return{colId:e.getColId(),rowIndex:o,rowPinned:n}}}},e.prototype.setFocusedCellState=function(t){if(this.isClientSideRowModel){var e=t.colId,o=t.rowIndex,n=t.rowPinned;this.focusService.setFocusedCell({column:this.columnModel.getGridColumn(e),rowIndex:o,rowPinned:n,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}},e.prototype.getPaginationState=function(){var t=this.paginationProxy.getCurrentPage(),e=this.gridOptionsService.get("paginationAutoPageSize")?void 0:this.paginationProxy.getPageSize();if(t||e)return{page:t,pageSize:e}},e.prototype.setPaginationState=function(t){t.pageSize&&!this.gridOptionsService.get("paginationAutoPageSize")&&this.paginationProxy.setPageSize(t.pageSize,"initialState"),"number"===typeof t.page&&this.paginationProxy.setPage(t.page)},e.prototype.getRowSelectionState=function(){var t,e=this.selectionService.getSelectionState();return!e||!Array.isArray(e)&&(!1===e.selectAll||!1===e.selectAllChildren)&&!(null===(t=null===e||void 0===e?void 0:e.toggledNodes)||void 0===t?void 0:t.length)?void 0:e},e.prototype.setRowSelectionState=function(t){this.selectionService.setSelectionState(t,"gridInitializing")},e.prototype.getRowGroupExpansionState=function(){var t=this.expansionService.getExpandedRows();return t.length?{expandedRowGroupIds:t}:void 0},e.prototype.setRowGroupExpansionState=function(t){this.expansionService.expandRows(t.expandedRowGroupIds)},e.prototype.updateColumnState=function(t){var e=this,o=this.getColumnState(),n=!1;Object.entries(o).forEach(function(t){var o=Tv(t,2),r=o[0];c(o[1],e.cachedState[r])||(n=!0)}),this.cachedState=Sv(Sv({},this.cachedState),o),n&&this.dispatchStateUpdateEvent(t)},e.prototype.updateCachedState=function(t,e){var o,n=this.cachedState[t];this.cachedState=Sv(Sv({},this.cachedState),((o={})[t]=e,o)),c(e,n)||this.dispatchStateUpdateEvent([t])},e.prototype.dispatchStateUpdateEvent=function(t){var e=this;this.suppressEvents||(t.forEach(function(t){return e.queuedUpdateSources.add(t)}),this.dispatchStateUpdateEventDebounced())},e.prototype.dispatchQueuedStateUpdateEvents=function(){var t=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear();var e={type:qt.EVENT_STATE_UPDATED,sources:t,state:this.cachedState};this.eventService.dispatchEvent(e)},e.prototype.suppressEventsAndDispatchInitEvent=function(t){var e=this;this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),t(),setTimeout(function(){e.suppressEvents=!1,e.queuedUpdateSources.clear(),e.isAlive()&&(e.columnAnimationService.setSuppressAnimation(!1),e.dispatchStateUpdateEvent(["gridInitializing"]))})},Ev([J("filterManager")],e.prototype,"filterManager",void 0),Ev([Q("rangeService")],e.prototype,"rangeService",void 0),Ev([J("ctrlsService")],e.prototype,"ctrlsService",void 0),Ev([Q("sideBarService")],e.prototype,"sideBarService",void 0),Ev([J("focusService")],e.prototype,"focusService",void 0),Ev([J("columnModel")],e.prototype,"columnModel",void 0),Ev([J("paginationProxy")],e.prototype,"paginationProxy",void 0),Ev([J("rowModel")],e.prototype,"rowModel",void 0),Ev([J("selectionService")],e.prototype,"selectionService",void 0),Ev([J("expansionService")],e.prototype,"expansionService",void 0),Ev([J("columnAnimationService")],e.prototype,"columnAnimationService",void 0),Ev([Y],e.prototype,"postConstruct",null),e=Ev([X("stateService")],e)}(Bt),Rv=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Pv=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Av=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},Dv=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},Mv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Rv(e,t),e.prototype.init=function(){this.processGridOptions(this.gridOptions)},e.prototype.processGridOptions=function(t){this.processOptions(t,qy)},e.prototype.processColumnDefs=function(t){this.processOptions(t,Hy)},e.prototype.processOptions=function(t,e){var o=this,n=e.validations,r=e.deprecations,i=e.allProperties,a=e.propertyExceptions,s=e.objectName,l=e.docsUrl;i&&!0!==this.gridOptions.suppressPropertyNamesCheck&&this.checkProperties(t,Dv(Dv([],Av(null!==a&&void 0!==a?a:[]),!1),Av(Object.keys(r)),!1),i,s,l);var u=new Set;Object.keys(t).forEach(function(e){var i,a=r[e];if(a)if("renamed"in a){var s=a.renamed,l=a.version;u.add("As of v".concat(l,", ").concat(String(e)," is deprecated. Please use ").concat(String(s)," instead.")),t[s]=t[e]}else{var c=a.message;l=a.version;u.add("As of v".concat(l,", ").concat(String(e)," is deprecated. ").concat(null!==c&&void 0!==c?c:""))}var p=t[e];if(null!=p&&!1!==p){var d,h=n[e];if(h){if("function"===typeof h){var f=h(t,o.gridOptions);if(!f)return;if("objectName"in f){var g=t[e];return Array.isArray(g)?void g.forEach(function(t){o.processOptions(t,f)}):void o.processOptions(t[e],f)}d=f}else d=h;var y=d.module,v=d.dependencies,m=d.supportedRowModels;if(m){var C=null!==(i=o.gridOptions.rowModelType)&&void 0!==i?i:"clientSide";if(!m.includes(C))return void u.add("".concat(String(e)," is not supported with the '").concat(C,"' row model."))}if(y){var _=Array.isArray(y)?y:[y],w=!0;if(_.forEach(function(t){j.__assertRegistered(t,String(e),o.context.getGridId())||(w=!1,u.add("".concat(String(e)," is only available when ").concat(t," is loaded.")))}),!w)return}if(v){var b=o.checkForWarning(e,v,t);if(b)return void u.add(b)}}}}),u.size>0&&u.forEach(function(t){O(t)})},e.prototype.checkForWarning=function(t,e,o){if("function"===typeof e)return e(o,this.gridOptions);var n=Object.entries(e).find(function(t){var e=Av(t,2),n=e[0],r=e[1],i=o[n];return!r.includes(i)});if(!n)return null;var r=Av(n,2),i=r[0],a=r[1];return a.length>1?"'".concat(String(t),"' requires '").concat(i,"' to be one of [").concat(a.join(", "),"]."):"'".concat(String(t),"' requires '").concat(i,"' to be ").concat(a[0],".")},e.prototype.checkProperties=function(t,e,o,n,r){var i=Fn(Object.getOwnPropertyNames(t),Dv(Dv(Dv([],Av(["__ob__","__v_skip","__metadata__"]),!1),Av(e),!1),Av(o),!1),o);if(y(i,function(t,e){O("invalid ".concat(n," property '").concat(t,"' did you mean any of these: ").concat(e.slice(0,8).join(", ")))}),Object.keys(i).length>0&&r){var a=this.getFrameworkOverrides().getDocLink(r);O("to see all the valid ".concat(n," properties please check: ").concat(a))}},Pv([J("gridOptions")],e.prototype,"gridOptions",void 0),Pv([Y],e.prototype,"init",null),e=Pv([X("validationService")],e)}(Bt),Iv=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Lv=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Fv=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.syncEventListeners=new Map,e.asyncEventListeners=new Map,e.syncGlobalEventListeners=new Set,e.asyncGlobalEventListeners=new Set,e}return Iv(e,t),e.prototype.postConstruct=function(){this.frameworkEventWrappingService=new it(this.getFrameworkOverrides())},e.prototype.addEventListener=function(t,e){var o=this.frameworkEventWrappingService.wrap(e),n=this.gridOptionsService.useAsyncEvents(),r=n?this.asyncEventListeners:this.syncEventListeners;r.has(t)||r.set(t,new Set),r.get(t).add(o),this.eventService.addEventListener(t,o,n)},e.prototype.addGlobalListener=function(t){var e=this.frameworkEventWrappingService.wrapGlobal(t),o=this.gridOptionsService.useAsyncEvents();(o?this.asyncGlobalEventListeners:this.syncGlobalEventListeners).add(e),this.eventService.addGlobalListener(e,o)},e.prototype.removeEventListener=function(t,e){var o,n=this.frameworkEventWrappingService.unwrap(e),r=this.asyncEventListeners.get(t),i=!!(null===r||void 0===r?void 0:r.delete(n));i||null===(o=this.asyncEventListeners.get(t))||void 0===o||o.delete(n),this.eventService.removeEventListener(t,n,i)},e.prototype.removeGlobalListener=function(t){var e=this.frameworkEventWrappingService.unwrapGlobal(t),o=this.asyncGlobalEventListeners.delete(e);o||this.syncGlobalEventListeners.delete(e),this.eventService.removeGlobalListener(e,o)},e.prototype.destroyEventListeners=function(t,e){var o=this;t.forEach(function(t,n){t.forEach(function(t){return o.eventService.removeEventListener(n,t,e)}),t.clear()}),t.clear()},e.prototype.destroyGlobalListeners=function(t,e){var o=this;t.forEach(function(t){return o.eventService.removeGlobalListener(t,e)}),t.clear()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.destroyGlobalListeners(this.asyncGlobalEventListeners,!0)},Lv([Y],e.prototype,"postConstruct",null),e=Lv([X("apiEventService")],e)}(Bt),Nv=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),kv=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Gv=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},Vv=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},Bv=function(t){function e(){var e=t.call(this,'<span class="ag-paging-page-size"></span>')||this;return e.hasEmptyOption=!1,e.handlePageSizeItemSelected=function(){if(e.selectPageSizeComp){var t=e.selectPageSizeComp.getValue();if(t){var o=Number(t);isNaN(o)||o<1||o===e.paginationProxy.getPageSize()||(e.paginationProxy.setPageSize(o,"pageSizeSelector"),e.hasEmptyOption&&e.toggleSelectDisplay(!0),e.selectPageSizeComp.getFocusableElement().focus())}}},e}return Nv(e,t),e.prototype.init=function(){var t=this;this.addManagedPropertyListener("paginationPageSizeSelector",function(){t.onPageSizeSelectorValuesChange()}),this.addManagedListener(this.eventService,qt.EVENT_PAGINATION_CHANGED,function(e){return t.handlePaginationChanged(e)})},e.prototype.handlePaginationChanged=function(t){if(this.selectPageSizeComp&&(null===t||void 0===t?void 0:t.newPageSize)){var e=this.paginationProxy.getPageSize();this.getPageSizeSelectorValues().includes(e)?this.selectPageSizeComp.setValue(e.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}},e.prototype.toggleSelectDisplay=function(t){this.selectPageSizeComp&&this.reset(),t&&(this.reloadPageSizesSelector(),this.selectPageSizeComp&&this.appendChild(this.selectPageSizeComp))},e.prototype.reset=function(){dn(this.getGui()),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0)},e.prototype.onPageSizeSelectorValuesChange=function(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()},e.prototype.shouldShowPageSizeSelector=function(){return this.gridOptionsService.get("pagination")&&!this.gridOptionsService.get("suppressPaginationPanel")&&!this.gridOptionsService.get("paginationAutoPageSize")&&!1!==this.gridOptionsService.get("paginationPageSizeSelector")},e.prototype.reloadPageSizesSelector=function(){var t=this,e=this.getPageSizeSelectorValues(),o=this.paginationProxy.getPageSize(),n=!o||!e.includes(o);n&&(e.unshift(""),O("The paginationPageSize grid option is set to a value that is not in the list of page size options.\n                Please make sure that the paginationPageSize grid option is set to one of the values in the \n                paginationPageSizeSelector array, or set the paginationPageSizeSelector to false to hide the page size selector.")),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0);var r=this.localeService.getLocaleTextFunc(),i=r("pageSizeSelectorLabel","Page Size:"),a=e.map(function(t){return{value:String(t),text:String(t)}}),s=r("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new ri).addOptions(a).setValue(String(n?"":o)).setAriaLabel(s).setLabel(i).onValueChange(function(){return t.handlePageSizeItemSelected()}),this.hasEmptyOption=n},e.prototype.getPageSizeSelectorValues=function(){var t=this.gridOptionsService.get("paginationPageSizeSelector");return Array.isArray(t)&&this.validateValues(t)?Vv([],Gv(t),!1).sort(function(t,e){return t-e}):[20,50,100]},e.prototype.validateValues=function(t){if(!t.length)return O("The paginationPageSizeSelector grid option is an empty array. This is most likely a mistake.\n                If you want to hide the page size selector, please set the paginationPageSizeSelector to false."),!1;for(var e=0;e<t.length;e++){var o=t[e],n=o>0;if(!("number"===typeof o))return O("The paginationPageSizeSelector grid option contains a non-numeric value.\n                    Please make sure that all values in the paginationPageSizeSelector array are numbers."),!1;if(!n)return O("The paginationPageSizeSelector grid option contains a negative number or zero.\n                    Please make sure that all values in the paginationPageSizeSelector array are positive."),!1}return!0},e.prototype.destroy=function(){this.toggleSelectDisplay(!1),t.prototype.destroy.call(this)},kv([J("localeService")],e.prototype,"localeService",void 0),kv([J("gridOptionsService")],e.prototype,"gridOptionsService",void 0),kv([J("paginationProxy")],e.prototype,"paginationProxy",void 0),kv([Y],e.prototype,"init",null),e}(Sr),zv=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Hv=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},jv=function(t){function e(){var e=t.call(this)||this;return e.descriptionContainer=null,e.announceValue=N(e.announceValue.bind(e),200),e}return zv(e,t),e.prototype.postConstruct=function(){var t=this.gridOptionsService.getDocument(),e=this.descriptionContainer=t.createElement("div");e.classList.add("ag-aria-description-container"),je(e,"polite"),We(e,"additions text"),Ue(e,!0),this.eGridDiv.appendChild(e)},e.prototype.announceValue=function(t){var e=this;this.descriptionContainer&&(this.descriptionContainer.textContent="",setTimeout(function(){e.descriptionContainer.textContent=t},50))},e.prototype.destroy=function(){t.prototype.destroy.call(this);var e=this.descriptionContainer;e&&(dn(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null},Hv([J("eGridDiv")],e.prototype,"eGridDiv",void 0),Hv([Y],e.prototype,"postConstruct",null),e=Hv([X("ariaAnnouncementService")],e)}(Bt),Uv=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},Wv=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))};function Kv(t,e,o){if(!e)return R("No gridOptions provided to createGrid"),{};var n=Jy.getCoercedGridOptions(e),r=(new Xv).create(t,n,function(e){var o=new $f(t);e.createBean(o)},void 0,o);if(!Object.isFrozen(e)&&!(null===o||void 0===o?void 0:o.frameworkOverrides)){var i="https://ag-grid.com/javascript-data-grid/grid-interface/#grid-api";Object.defineProperty(e,"api",{get:function(){R("gridOptions.api is no longer supported. See ".concat(i,"."))},configurable:!0}),Object.defineProperty(e,"columnApi",{get:function(){R("gridOptions.columnApi is no longer supported and all methods moved to the grid api. See ".concat(i,"."))},configurable:!0})}return r}var qv,Yv=function(){function t(t,e,o){var n=this;if(O("Since v31 new Grid(...) is deprecated. Use createGrid instead: `const gridApi = createGrid(...)`. The grid api is returned from createGrid and will not be available on gridOptions."),e){this.gridOptions=e;var r=(new Xv).create(t,e,function(e){var o=new $f(t);e.createBean(o).addDestroyFunc(function(){n.destroy()})},void 0,o);this.gridOptions.api=r,this.gridOptions.columnApi=new Mf(r)}else R("No gridOptions provided to the grid")}return t.prototype.destroy=function(){var t;this.gridOptions&&(null===(t=this.gridOptions.api)||void 0===t||t.destroy(),delete this.gridOptions.api,delete this.gridOptions.columnApi)},t}(),Zv=1,Xv=function(){function t(){}return t.prototype.create=function(t,e,o,n,r){var i,a=!!e.debug,s=null!==(i=e.gridId)&&void 0!==i?i:String(Zv++),l=this.getRegisteredModules(r,s),u=this.createBeansList(e.rowModelType,l,s),c=this.createProvidedBeans(t,e,r);if(u){var p={providedBeanInstances:c,beanClasses:u,debug:a,gridId:s},d=new qf("Context",function(){return p.debug}),h=new K(p,d),f=h.getBean("beans");return this.registerModuleUserComponents(f,l),this.registerStackComponents(f,l),this.registerControllers(f,l),o(h),f.syncService.start(),n&&n(h),f.gridApi}R("Failed to create grid.")},t.prototype.registerControllers=function(t,e){e.forEach(function(e){e.controllers&&e.controllers.forEach(function(e){return t.ctrlsFactory.register(e)})})},t.prototype.registerStackComponents=function(t,e){var o=this.createAgStackComponentsList(e);t.agStackComponentsRegistry.setupComponents(o)},t.prototype.getRegisteredModules=function(t,e){var o=t?t.modules:null,n=j.__getRegisteredModules(e),r=[],i={},a=function(t,e,o){var n;i[(n=e).moduleName]||(i[n.moduleName]=!0,r.push(n),j.__register(n,t,o)),e.dependantModules&&e.dependantModules.forEach(function(e){return a(t,e,o)})};return o&&o.forEach(function(t){return a(!0,t,e)}),n&&n.forEach(function(t){return a(!j.__isPackageBased(),t,void 0)}),r},t.prototype.registerModuleUserComponents=function(t,e){this.extractModuleEntity(e,function(t){return t.userComponents?t.userComponents:[]}).forEach(function(e){t.userComponentRegistry.registerDefaultComponent(e.componentName,e.componentClass)})},t.prototype.createProvidedBeans=function(t,e,o){var n=o?o.frameworkOverrides:null;i(n)&&(n=new yf);var r={gridOptions:e,eGridDiv:t,globalEventListener:o?o.globalEventListener:null,globalSyncEventListener:o?o.globalSyncEventListener:null,frameworkOverrides:n};return o&&o.providedBeanInstances&&Object.assign(r,o.providedBeanInstances),r},t.prototype.createAgStackComponentsList=function(t){var e=[{componentName:"AgCheckbox",componentClass:ui},{componentName:"AgRadioButton",componentClass:pi},{componentName:"AgToggleButton",componentClass:ph},{componentName:"AgInputTextField",componentClass:Ni},{componentName:"AgInputTextArea",componentClass:hh},{componentName:"AgInputNumberField",componentClass:Gi},{componentName:"AgInputDateField",componentClass:gh},{componentName:"AgInputRange",componentClass:vh},{componentName:"AgRichSelect",componentClass:Rh},{componentName:"AgSelect",componentClass:ri},{componentName:"AgSlider",componentClass:Dh},{componentName:"AgGridBody",componentClass:pc},{componentName:"AgHeaderRoot",componentClass:Jp},{componentName:"AgSortIndicator",componentClass:sa},{componentName:"AgPagination",componentClass:Kg},{componentName:"AgPageSizeSelector",componentClass:Bv},{componentName:"AgOverlayWrapper",componentClass:Zg},{componentName:"AgGroupComponent",componentClass:Lh},{componentName:"AgRowContainer",componentClass:Ic},{componentName:"AgFakeHorizontalScroll",componentClass:Iy},{componentName:"AgFakeVerticalScroll",componentClass:nv},{componentName:"AgAutocomplete",componentClass:ff}],o=this.extractModuleEntity(t,function(t){return t.agStackComponents?t.agStackComponents:[]});return e=e.concat(o)},t.prototype.createBeansList=function(t,e,o){void 0===t&&(t="clientSide");var n=e.filter(function(e){return!e.rowModel||e.rowModel===t}),r={clientSide:V.ClientSideRowModelModule,infinite:V.InfiniteRowModelModule,serverSide:V.ServerSideRowModelModule,viewport:V.ViewportRowModelModule};if(r[t]){if(j.__assertRegistered(r[t],"rowModelType = '".concat(t,"'"),o)){var i=[su,Qg,ey,fy,vg,ml,Ns,Tg,Pg,vd,rl,Bg,td,tv,Mv,Zd,ul,we,rt,Jy,af,Rf,xl,fe,Wp,ah,Hd,Vf,Ut,Hf,xf,wc,_g,Ff,Kf,me,Ad,nd,Wa,Mf,lg,vc,Ng,wf,Kd,uh,fc,rg,pg,fg,jg,Qt,Sg,_d,py,Me,yy,my,nh,wy,Ey,Ny,Vy,Oy,pv,fv,wl,vv,wv,Ov,Ed,Fv,jv,Od],a=this.extractModuleEntity(n,function(t){return t.beans?t.beans:[]});i.push.apply(i,Wv([],Uv(a),!1));var s=[];return i.forEach(function(t){s.indexOf(t)<0&&s.push(t)}),s}}else R("Could not find row model for rowModelType = "+t)},t.prototype.extractModuleEntity=function(t,e){return[].concat.apply([],Wv([],Uv(t.map(e)),!1))},t}(),Jv=function(){function t(){}return t.prototype.wrap=function(t,e,o,n){var r=this;void 0===o&&(o=[]);var i=this.createWrapper(t,n);return e.forEach(function(t){r.createMethod(i,t,!0)}),o.forEach(function(t){r.createMethod(i,t,!1)}),i},t.prototype.unwrap=function(t){return t},t.prototype.createMethod=function(t,e,o){t.addMethod(e,this.createMethodProxy(t,e,o))},t.prototype.createMethodProxy=function(t,e,o){return function(){return t.hasMethod(e)?t.callMethod(e,arguments):(o&&console.warn("AG Grid: Framework component is missing the method "+e+"()"),null)}},t}(),Qv={columnGroup:["column","stackedColumn","normalizedColumn"],barGroup:["bar","stackedBar","normalizedBar"],pieGroup:["pie","donut"],lineGroup:["line"],scatterGroup:["scatter","bubble"],areaGroup:["area","stackedArea","normalizedArea"],polarGroup:["radarLine","radarArea","nightingale","radialColumn","radialBar"],statisticalGroup:["boxPlot","histogram","rangeBar","rangeArea"],hierarchicalGroup:["treemap","sunburst"],specializedGroup:["heatmap","waterfall"],combinationGroup:["columnLineCombo","areaColumnCombo","customCombo"]},$v=["chartSettings","chartData","chartFormat"],tm=["chartUnlink","chartLink","chartDownload"],em={settings:"chartSettings",data:"chartData",format:"chartFormat"},om=0;!function(t){t.InsideBase="insideBase",t.InsideEnd="insideEnd",t.Center="center",t.OutsideEnd="outsideEnd"}(qv||(qv={}));var nm="undefined"===typeof t?{}:t;nm.HTMLElement="undefined"===typeof HTMLElement?{}:HTMLElement,nm.HTMLButtonElement="undefined"===typeof HTMLButtonElement?{}:HTMLButtonElement,nm.HTMLSelectElement="undefined"===typeof HTMLSelectElement?{}:HTMLSelectElement,nm.HTMLInputElement="undefined"===typeof HTMLInputElement?{}:HTMLInputElement,nm.Node="undefined"===typeof Node?{}:Node,nm.MouseEvent="undefined"===typeof MouseEvent?{}:MouseEvent;var rm,im=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},am=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},sm=function(){function t(e,o,n,r,i,a){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gridOptionsService=o,this.eventService=n,this.columnModel=r,this.beans=a,this.selectionService=i,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=t.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}return t.prototype.getCopyOfNodesMap=function(){return ur.cloneObject(this.allNodesMap)},t.prototype.getRowNode=function(t){return this.allNodesMap[t]},t.prototype.setRowData=function(e){var o=this;if("string"!==typeof e){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);var n=this.rootNode,r=this.rootNode.sibling;n.childrenAfterFilter=null,n.childrenAfterGroup=null,n.childrenAfterAggFilter=null,n.childrenAfterSort=null,n.childrenMapped=null,n.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?n.allLeafChildren=e.map(function(e){return o.createNode(e,o.rootNode,t.TOP_LEVEL)}):(n.allLeafChildren=[],n.childrenAfterGroup=[]),r&&(r.childrenAfterFilter=n.childrenAfterFilter,r.childrenAfterGroup=n.childrenAfterGroup,r.childrenAfterAggFilter=n.childrenAfterAggFilter,r.childrenAfterSort=n.childrenAfterSort,r.childrenMapped=n.childrenMapped,r.allLeafChildren=n.allLeafChildren)}else console.warn("AG Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first")},t.prototype.updateRowData=function(t,e){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(t.add);var o={remove:[],update:[],add:[]},n=[];return this.executeRemove(t,o,n),this.executeUpdate(t,o,n),this.executeAdd(t,o),this.updateSelection(n,"rowDataChanged"),e&&ur.sortRowNodesByOrder(this.rootNode.allLeafChildren,e),o},t.prototype.isRowCountReady=function(){return this.rowCountReady},t.prototype.dispatchRowDataUpdateStartedEvent=function(t){var e={type:qt.EVENT_ROW_DATA_UPDATE_STARTED,firstRowData:(null===t||void 0===t?void 0:t.length)?t[0]:null};this.eventService.dispatchEvent(e)},t.prototype.updateSelection=function(t,e){var o=t.length>0;if(o&&this.selectionService.setNodesSelected({newValue:!1,nodes:t,suppressFinishActions:!0,source:e}),this.selectionService.updateGroupsFromChildrenSelections(e),o){var n={type:qt.EVENT_SELECTION_CHANGED,source:e};this.eventService.dispatchEvent(n)}},t.prototype.executeAdd=function(e,o){var n,r=this,i=e.add,a=e.addIndex;if(!ur.missingOrEmpty(i)){var s=i.map(function(e){return r.createNode(e,r.rootNode,t.TOP_LEVEL)});if("number"===typeof a&&a>=0){var l=this.rootNode.allLeafChildren,u=l.length,c=a;if(this.gridOptionsService.get("treeData")&&a>0&&u>0)for(var p=0;p<u;p++)if((null===(n=l[p])||void 0===n?void 0:n.rowIndex)==a-1){c=p+1;break}var d=l.slice(0,c),h=l.slice(c,l.length);this.rootNode.allLeafChildren=am(am(am([],im(d),!1),im(s),!1),im(h),!1)}else this.rootNode.allLeafChildren=am(am([],im(this.rootNode.allLeafChildren),!1),im(s),!1);this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),o.add=s}},t.prototype.executeRemove=function(t,e,o){var n=this,r=t.remove;if(!ur.missingOrEmpty(r)){var i={};r.forEach(function(t){var r=n.lookupRowNode(t);r&&(r.isSelected()&&o.push(r),r.clearRowTopAndRowIndex(),i[r.id]=!0,delete n.allNodesMap[r.id],e.remove.push(r))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(function(t){return!i[t.id]}),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}},t.prototype.executeUpdate=function(e,o,n){var r=this,i=e.update;ur.missingOrEmpty(i)||i.forEach(function(e){var i=r.lookupRowNode(e);i&&(i.updateData(e),!i.selectable&&i.isSelected()&&n.push(i),r.setMasterForRow(i,e,t.TOP_LEVEL,!1),o.update.push(i))})},t.prototype.lookupRowNode=function(t){var e,o=this.gridOptionsService.getCallback("getRowId");if(o){var n=o({data:t,level:0});if(!(e=this.allNodesMap[n]))return console.error("AG Grid: could not find row id=".concat(n,", data item was not found for this id")),null}else if(!(e=this.rootNode.allLeafChildren.find(function(e){return e.data===t})))return console.error("AG Grid: could not find data item as object was not found",t),console.error("Consider using getRowId to help the Grid find matching row data"),null;return e||null},t.prototype.createNode=function(t,e,o){var n=new Fa(this.beans);n.group=!1,this.setMasterForRow(n,t,o,!0);var r=this.gridOptionsService.get("suppressParentsInRowNodes");return e&&!r&&(n.parent=e),n.level=o,n.setDataAndId(t,this.nextId.toString()),this.allNodesMap[n.id]&&console.warn("AG Grid: duplicate node id '".concat(n.id,"' detected from getRowId callback, this could cause issues in your grid.")),this.allNodesMap[n.id]=n,this.nextId++,n},t.prototype.setMasterForRow=function(t,e,o,n){if(this.gridOptionsService.get("treeData"))t.setMaster(!1),n&&(t.expanded=!1);else{if(this.gridOptionsService.get("masterDetail")){var r=this.gridOptionsService.get("isRowMaster");r?t.setMaster(r(e)):t.setMaster(!0)}else t.setMaster(!1);if(n){var i=this.columnModel.getRowGroupColumns(),a=o+(i?i.length:0);t.expanded=!!t.master&&this.isExpanded(a)}}},t.prototype.isExpanded=function(t){var e=this.gridOptionsService.get("groupDefaultExpanded");return-1===e||t<e},t.TOP_LEVEL=0,t.ROOT_NODE_ID="ROOT_NODE_ID",t}(),lm=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),um=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},cm=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},pm=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))};!function(t){t[t.Normal=0]="Normal",t[t.AfterFilter=1]="AfterFilter",t[t.AfterFilterAndSort=2]="AfterFilterAndSort",t[t.PivotNodes=3]="PivotNodes"}(rm||(rm={}));var dm,hm=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onRowHeightChanged_debounced=ur.debounce(e.onRowHeightChanged.bind(e),100),e.rowsToDisplay=[],e.hasStarted=!1,e.shouldSkipSettingDataOnStart=!1,e.isRefreshingModel=!1,e.rowCountReady=!1,e}return lm(e,t),e.prototype.init=function(){var t=this,e=this.refreshModel.bind(this,{step:ad.EVERYTHING}),o=!this.gridOptionsService.get("suppressAnimationFrame"),n=this.refreshModel.bind(this,{step:ad.EVERYTHING,afterColumnsChanged:!0,keepRenderedRows:!0,animate:o});this.addManagedListener(this.eventService,qt.EVENT_NEW_COLUMNS_LOADED,n),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:ad.PIVOT})),this.addManagedListener(this.eventService,qt.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.addManagedListener(this.eventService,qt.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanges.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_GRID_READY,function(){return t.onGridReady()}),this.addPropertyListeners(),this.rootNode=new Fa(this.beans),this.nodeManager=new sm(this.rootNode,this.gridOptionsService,this.eventService,this.columnModel,this.selectionService,this.beans)},e.prototype.addPropertyListeners=function(){var t=this,e=new Set(["treeData","masterDetail"]),o=new Set(["suppressParentsInRowNodes","groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),n=new Set(["excludeChildrenWhenTreeDataFiltering"]),r=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),i=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly"]),a=new Set(["postSortRows","groupDisplayType","accentedSort"]),s=new Set([]),l=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter"]),u=pm(pm(pm(pm(pm(pm(pm(pm(pm([],cm(e),!1),cm(o),!1),cm(n),!1),cm(r),!1),cm(r),!1),cm(i),!1),cm(a),!1),cm(s),!1),cm(l),!1);this.addManagedPropertyListeners(u,function(u){var c,p=null===(c=u.changeSet)||void 0===c?void 0:c.properties;if(p){var d=function(t){return p.some(function(e){return t.has(e)})};d(e)?t.setRowData(t.rootNode.allLeafChildren.map(function(t){return t.data})):d(o)?t.refreshModel({step:ad.EVERYTHING}):d(n)?t.refreshModel({step:ad.FILTER}):d(r)?t.refreshModel({step:ad.PIVOT}):d(i)?t.refreshModel({step:ad.AGGREGATE}):d(a)?t.refreshModel({step:ad.SORT}):d(s)?t.refreshModel({step:ad.FILTER_AGGREGATES}):d(l)&&t.refreshModel({step:ad.MAP})}}),this.addManagedPropertyListener("rowHeight",function(){return t.resetRowHeights()})},e.prototype.start=function(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()},e.prototype.setInitialData=function(){var t=this.gridOptionsService.get("rowData");t&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(t))},e.prototype.ensureRowHeightsValid=function(t,e,o,n){var r,i=!1;do{r=!1;for(var a=this.getRowIndexAtPixel(t),s=this.getRowIndexAtPixel(e),l=Math.max(a,o),u=Math.min(s,n),c=l;c<=u;c++){var p=this.getRow(c);if(p.rowHeightEstimated){var d=this.gridOptionsService.getRowHeightForNode(p);p.setRowHeight(d.height),r=!0,i=!0}}r&&this.setRowTopAndRowIndex()}while(r);return i},e.prototype.setRowTopAndRowIndex=function(){for(var t=this.environment.getDefaultRowHeight(),e=0,o=new Set,n=this.gridOptionsService.isDomLayout("normal"),r=0;r<this.rowsToDisplay.length;r++){var i=this.rowsToDisplay[r];if(null!=i.id&&o.add(i.id),null==i.rowHeight){var a=this.gridOptionsService.getRowHeightForNode(i,n,t);i.setRowHeight(a.height,a.estimated)}i.setRowTop(e),i.setRowIndex(r),e+=i.rowHeight}return o},e.prototype.clearRowTopAndRowIndex=function(t,e){var o=t.isActive(),n=function(t){t&&null!=t.id&&!e.has(t.id)&&t.clearRowTopAndRowIndex()},r=function(t){if(n(t),n(t.detailNode),n(t.sibling),t.hasChildren()&&t.childrenAfterGroup){var e=-1==t.level;o&&!e&&!t.expanded||t.childrenAfterGroup.forEach(r)}};r(this.rootNode)},e.prototype.ensureRowsAtPixel=function(t,e,o){var n=this;void 0===o&&(o=0);var r=this.getRowIndexAtPixel(e),i=this.getRow(r),a=!this.gridOptionsService.get("suppressAnimationFrame");return i!==t[0]&&(t.forEach(function(t){ur.removeFromArray(n.rootNode.allLeafChildren,t)}),t.forEach(function(t,e){ur.insertIntoArray(n.rootNode.allLeafChildren,t,Math.max(r+o,0)+e)}),this.refreshModel({step:ad.EVERYTHING,keepRenderedRows:!0,keepEditingRows:!0,animate:a}),!0)},e.prototype.highlightRowAtPixel=function(t,e){var o=null!=e?this.getRowIndexAtPixel(e):null,n=null!=o?this.getRow(o):null;if(n&&t&&n!==t&&null!=e){var r=this.getHighlightPosition(e,n);this.lastHighlightedRow&&this.lastHighlightedRow!==n&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),n.setHighlighted(r),this.lastHighlightedRow=n}else this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null)},e.prototype.getHighlightPosition=function(t,e){if(!e){var o=this.getRowIndexAtPixel(t);if(!(e=this.getRow(o||0)))return al.Below}return t-e.rowTop<e.rowHeight/2?al.Above:al.Below},e.prototype.getLastHighlightedRowNode=function(){return this.lastHighlightedRow},e.prototype.isLastRowIndexKnown=function(){return!0},e.prototype.getRowCount=function(){return this.rowsToDisplay?this.rowsToDisplay.length:0},e.prototype.getTopLevelRowCount=function(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;var t=this.rootNode.childrenAfterAggFilter;return t?t.length:0},e.prototype.getTopLevelRowDisplayedIndex=function(t){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return t;var e=this.rootNode.childrenAfterSort[t];if(this.gridOptionsService.get("groupHideOpenParents"))for(;e.expanded&&e.childrenAfterSort&&e.childrenAfterSort.length>0;)e=e.childrenAfterSort[0];return e.rowIndex},e.prototype.getRowBounds=function(t){if(ur.missing(this.rowsToDisplay))return null;var e=this.rowsToDisplay[t];return e?{rowTop:e.rowTop,rowHeight:e.rowHeight}:null},e.prototype.onRowGroupOpened=function(){var t=this.gridOptionsService.isAnimateRows();this.refreshModel({step:ad.MAP,keepRenderedRows:!0,animate:t})},e.prototype.onFilterChanged=function(t){if(!t.afterDataChange){var e=this.gridOptionsService.isAnimateRows(),o=0===t.columns.length||t.columns.some(function(t){return t.isPrimary()})?ad.FILTER:ad.FILTER_AGGREGATES;this.refreshModel({step:o,keepRenderedRows:!0,animate:e})}},e.prototype.onSortChanged=function(){var t=this.gridOptionsService.isAnimateRows();this.refreshModel({step:ad.SORT,keepRenderedRows:!0,animate:t,keepEditingRows:!0})},e.prototype.getType=function(){return"clientSide"},e.prototype.onValueChanged=function(){this.columnModel.isPivotActive()?this.refreshModel({step:ad.PIVOT}):this.refreshModel({step:ad.AGGREGATE})},e.prototype.createChangePath=function(t){var e=ur.missingOrEmpty(t),o=new Jd(!1,this.rootNode);return(e||this.gridOptionsService.get("treeData"))&&o.setInactive(),o},e.prototype.isSuppressModelUpdateAfterUpdateTransaction=function(t){if(!this.gridOptionsService.get("suppressModelUpdateAfterUpdateTransaction"))return!1;if(null==t.rowNodeTransactions)return!1;var e=t.rowNodeTransactions.filter(function(t){return null!=t.add&&t.add.length>0||null!=t.remove&&t.remove.length>0});return null==e||0==e.length},e.prototype.buildRefreshModelParams=function(t){var e=ad.EVERYTHING,o={everything:ad.EVERYTHING,group:ad.EVERYTHING,filter:ad.FILTER,map:ad.MAP,aggregate:ad.AGGREGATE,sort:ad.SORT,pivot:ad.PIVOT};if(ur.exists(t)&&(e=o[t]),!ur.missing(e))return{step:e,keepRenderedRows:!0,keepEditingRows:!0,animate:!this.gridOptionsService.get("suppressAnimationFrame")};console.error("AG Grid: invalid step ".concat(t,", available steps are ").concat(Object.keys(o).join(", ")))},e.prototype.refreshModel=function(t){if(this.hasStarted&&!this.isRefreshingModel&&!this.columnModel.shouldRowModelIgnoreRefresh()){var e="object"===typeof t&&"step"in t?t:this.buildRefreshModelParams(t);if(e&&!this.isSuppressModelUpdateAfterUpdateTransaction(e)){var o=this.createChangePath(e.rowNodeTransactions);switch(this.isRefreshingModel=!0,e.step){case ad.EVERYTHING:this.doRowGrouping(e.rowNodeTransactions,e.rowNodeOrder,o,!!e.afterColumnsChanged);case ad.FILTER:this.doFilter(o);case ad.PIVOT:this.doPivot(o);case ad.AGGREGATE:this.doAggregate(o);case ad.FILTER_AGGREGATES:this.doFilterAggregates(o);case ad.SORT:this.doSort(e.rowNodeTransactions,o);case ad.MAP:this.doRowsToDisplay()}var n=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(o,n),this.isRefreshingModel=!1;var r={type:qt.EVENT_MODEL_UPDATED,animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack};this.eventService.dispatchEvent(r)}}},e.prototype.isEmpty=function(){var t=ur.missing(this.rootNode.allLeafChildren)||0===this.rootNode.allLeafChildren.length;return ur.missing(this.rootNode)||t||!this.columnModel.isReady()},e.prototype.isRowsToRender=function(){return ur.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0},e.prototype.getNodesInRangeForSelection=function(t,e){var o=!e,n=!1,r=[],i=this.gridOptionsService.get("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(function(a){if(!n)if(o&&(a===e||a===t)&&(n=!0,a.group&&i))r.push.apply(r,pm([],cm(a.allLeafChildren),!1));else{if(!o){if(a!==e&&a!==t)return;o=!0}(!a.group||!i)&&r.push(a)}}),r},e.prototype.setDatasource=function(t){console.error("AG Grid: should never call setDatasource on clientSideRowController")},e.prototype.getTopLevelNodes=function(){return this.rootNode?this.rootNode.childrenAfterGroup:null},e.prototype.getRootNode=function(){return this.rootNode},e.prototype.getRow=function(t){return this.rowsToDisplay[t]},e.prototype.isRowPresent=function(t){return this.rowsToDisplay.indexOf(t)>=0},e.prototype.getRowIndexAtPixel=function(t){if(this.isEmpty()||0===this.rowsToDisplay.length)return-1;var e=0,o=this.rowsToDisplay.length-1;if(t<=0)return 0;if(ur.last(this.rowsToDisplay).rowTop<=t)return this.rowsToDisplay.length-1;for(var n=-1,r=-1;;){var i=Math.floor((e+o)/2),a=this.rowsToDisplay[i];if(this.isRowInPixel(a,t))return i;if(a.rowTop<t?e=i+1:a.rowTop>t&&(o=i-1),n===e&&r===o)return i;n=e,r=o}},e.prototype.isRowInPixel=function(t,e){var o=t.rowTop,n=t.rowTop+t.rowHeight;return o<=e&&n>e},e.prototype.forEachLeafNode=function(t){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach(function(e,o){return t(e,o)})},e.prototype.forEachNode=function(t,e){void 0===e&&(e=!1),this.recursivelyWalkNodesAndCallback({nodes:pm([],cm(this.rootNode.childrenAfterGroup||[]),!1),callback:t,recursionType:rm.Normal,index:0,includeFooterNodes:e})},e.prototype.forEachNodeAfterFilter=function(t,e){void 0===e&&(e=!1),this.recursivelyWalkNodesAndCallback({nodes:pm([],cm(this.rootNode.childrenAfterAggFilter||[]),!1),callback:t,recursionType:rm.AfterFilter,index:0,includeFooterNodes:e})},e.prototype.forEachNodeAfterFilterAndSort=function(t,e){void 0===e&&(e=!1),this.recursivelyWalkNodesAndCallback({nodes:pm([],cm(this.rootNode.childrenAfterSort||[]),!1),callback:t,recursionType:rm.AfterFilterAndSort,index:0,includeFooterNodes:e})},e.prototype.forEachPivotNode=function(t,e){void 0===e&&(e=!1),this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:t,recursionType:rm.PivotNodes,index:0,includeFooterNodes:e})},e.prototype.recursivelyWalkNodesAndCallback=function(t){for(var e,o=t.nodes,n=t.callback,r=t.recursionType,i=t.includeFooterNodes,a=t.index,s=0;s<o.length;s++){var l=o[s];if(n(l,a++),l.hasChildren()&&!l.footer){var u=null;switch(r){case rm.Normal:u=l.childrenAfterGroup;break;case rm.AfterFilter:u=l.childrenAfterAggFilter;break;case rm.AfterFilterAndSort:u=l.childrenAfterSort;break;case rm.PivotNodes:u=l.leafGroup?null:l.childrenAfterSort}u&&(a=this.recursivelyWalkNodesAndCallback({nodes:pm([],cm(u),!1),callback:n,recursionType:r,index:a,includeFooterNodes:i}))}}var c=null===(e=o[0])||void 0===e?void 0:e.parent;if(!i||!c)return a;if(c===this.rootNode){if(!this.gridOptionsService.get("groupIncludeTotalFooter"))return a}else if(!this.gridOptionsService.getGroupIncludeFooter()({node:c}))return a;return c.createFooter(),n(c.sibling,a++),a},e.prototype.doAggregate=function(t){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath:t})},e.prototype.doFilterAggregates=function(t){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:t}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter},e.prototype.expandOrCollapseAll=function(t){var e=this.gridOptionsService.get("treeData"),o=this.columnModel.isPivotActive(),n=function(r){r&&r.forEach(function(r){var i=function(){r.expanded=t,n(r.childrenAfterGroup)};e?ur.exists(r.childrenAfterGroup)&&i():o?!r.leafGroup&&i():r.group&&i()})};this.rootNode&&n(this.rootNode.childrenAfterGroup),this.refreshModel({step:ad.MAP});var r=t?"expandAll":"collapseAll",i={type:qt.EVENT_EXPAND_COLLAPSE_ALL,source:r};this.eventService.dispatchEvent(i)},e.prototype.doSort=function(t,e){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:t,changedPath:e})},e.prototype.doRowGrouping=function(t,e,o,n){if(this.groupStage){if(t?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:t,rowNodeOrder:e,changedPath:o}):this.groupStage.execute({rowNode:this.rootNode,changedPath:o,afterColumnsChanged:n}),this.gridOptionsService.get("groupSelectsChildren")&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",o)){var r={type:qt.EVENT_SELECTION_CHANGED,source:"rowGroupChanged"};this.eventService.dispatchEvent(r)}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren();this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:qt.EVENT_ROW_COUNT_READY}))},e.prototype.doFilter=function(t){this.filterStage.execute({rowNode:this.rootNode,changedPath:t})},e.prototype.doPivot=function(t){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode,changedPath:t})},e.prototype.getCopyOfNodesMap=function(){return this.nodeManager.getCopyOfNodesMap()},e.prototype.getRowNode=function(t){if("string"==typeof t&&0==t.indexOf(Fa.ID_PREFIX_ROW_GROUP)){var e=void 0;return this.forEachNode(function(o){o.id===t&&(e=o)}),e}return this.nodeManager.getRowNode(t)},e.prototype.setRowData=function(t){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(t),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()},e.prototype.dispatchUpdateEventsAndRefresh=function(){var t={type:qt.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(t),this.refreshModel({step:ad.EVERYTHING,newData:!0})},e.prototype.batchUpdateRowData=function(t,e){var o=this;if(null==this.applyAsyncTransactionsTimeout){this.rowDataTransactionBatch=[];var n=this.gridOptionsService.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(function(){o.executeBatchUpdateRowData()},n)}this.rowDataTransactionBatch.push({rowDataTransaction:t,callback:e})},e.prototype.flushAsyncTransactions=function(){null!=this.applyAsyncTransactionsTimeout&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())},e.prototype.executeBatchUpdateRowData=function(){var t=this;this.valueCache.onDataChanged();var e=[],o=[],n=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(function(r){var i=t.nodeManager.updateRowData(r.rowDataTransaction,void 0);o.push(i),r.callback&&e.push(r.callback.bind(null,i)),"number"===typeof r.rowDataTransaction.addIndex&&(n=!0)}),this.commonUpdateRowData(o,void 0,n),e.length>0&&window.setTimeout(function(){e.forEach(function(t){return t()})},0),o.length>0){var r={type:qt.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:o};this.eventService.dispatchEvent(r)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0},e.prototype.updateRowData=function(t,e){this.valueCache.onDataChanged();var o=this.nodeManager.updateRowData(t,e),n="number"===typeof t.addIndex;return this.commonUpdateRowData([o],e,n),o},e.prototype.createRowNodeOrder=function(){if(!this.gridOptionsService.get("suppressMaintainUnsortedOrder")){var t={};if(this.rootNode&&this.rootNode.allLeafChildren)for(var e=0;e<this.rootNode.allLeafChildren.length;e++){t[this.rootNode.allLeafChildren[e].id]=e}return t}},e.prototype.commonUpdateRowData=function(t,e,o){if(this.hasStarted){var n=!this.gridOptionsService.get("suppressAnimationFrame");o&&(e=this.createRowNodeOrder());var r={type:qt.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(r),this.refreshModel({step:ad.EVERYTHING,rowNodeTransactions:t,rowNodeOrder:e,keepRenderedRows:!0,keepEditingRows:!0,animate:n})}},e.prototype.doRowsToDisplay=function(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})},e.prototype.onRowHeightChanged=function(){this.refreshModel({step:ad.MAP,keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})},e.prototype.onRowHeightChangedDebounced=function(){this.onRowHeightChanged_debounced()},e.prototype.resetRowHeights=function(){var t=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),t&&this.onRowHeightChanged()},e.prototype.resetRowHeightsForAllRowNodes=function(){var t=!1;return this.forEachNode(function(e){e.setRowHeight(e.rowHeight,!0);var o=e.detailNode;o&&o.setRowHeight(o.rowHeight,!0),e.sibling&&e.sibling.setRowHeight(e.sibling.rowHeight,!0),t=!0}),t},e.prototype.onGridStylesChanges=function(){this.columnModel.isAutoRowHeightActive()||this.resetRowHeights()},e.prototype.onGridReady=function(){this.hasStarted||this.setInitialData()},e.prototype.isRowDataLoaded=function(){return this.rowCountReady},um([J("columnModel")],e.prototype,"columnModel",void 0),um([J("selectionService")],e.prototype,"selectionService",void 0),um([J("filterManager")],e.prototype,"filterManager",void 0),um([J("valueCache")],e.prototype,"valueCache",void 0),um([J("beans")],e.prototype,"beans",void 0),um([J("filterStage")],e.prototype,"filterStage",void 0),um([J("sortStage")],e.prototype,"sortStage",void 0),um([J("flattenStage")],e.prototype,"flattenStage",void 0),um([Q("groupStage")],e.prototype,"groupStage",void 0),um([Q("aggregationStage")],e.prototype,"aggregationStage",void 0),um([Q("pivotStage")],e.prototype,"pivotStage",void 0),um([Q("filterAggregatesStage")],e.prototype,"filterAggregatesStage",void 0),um([Y],e.prototype,"init",null),e=um([X("rowModel")],e)}(Bt),fm=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),gm=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},ym=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fm(e,t),e.prototype.execute=function(t){var e=t.changedPath;this.filterService.filter(e)},gm([J("filterService")],e.prototype,"filterService",void 0),e=gm([X("filterStage")],e)}(Bt),vm=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),mm=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Cm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vm(e,t),e.prototype.execute=function(t){var e=this,o=this.sortController.getSortOptions(),n=ur.exists(o)&&o.length>0,r=n&&ur.exists(t.rowNodeTransactions)&&this.gridOptionsService.get("deltaSort"),i=o.some(function(t){return e.gridOptionsService.isColumnsSortingCoupledToGroup()?t.column.isPrimary()&&t.column.isRowGroupActive():!!t.column.getColDef().showRowGroup});this.sortService.sort(o,n,r,t.rowNodeTransactions,t.changedPath,i)},mm([J("sortService")],e.prototype,"sortService",void 0),mm([J("sortController")],e.prototype,"sortController",void 0),e=mm([X("sortStage")],e)}(Bt),_m=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),wm=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},bm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _m(e,t),e.prototype.execute=function(t){var e=t.rowNode,o=[],n=this.columnModel.isPivotMode(),r=n&&e.leafGroup,i=r?[e]:e.childrenAfterSort,a=this.getFlattenDetails();return this.recursivelyAddToRowsToDisplay(a,i,o,n,0),!r&&o.length>0&&a.groupIncludeTotalFooter&&(e.createFooter(),this.addRowNodeToRowsToDisplay(a,e.sibling,o,0)),o},e.prototype.getFlattenDetails=function(){var t=this.gridOptionsService.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!t&&this.gridOptionsService.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:t,isGroupMultiAutoColumn:this.gridOptionsService.isGroupMultiAutoColumn(),hideOpenParents:this.gridOptionsService.get("groupHideOpenParents"),groupIncludeTotalFooter:this.gridOptionsService.get("groupIncludeTotalFooter"),getGroupIncludeFooter:this.gridOptionsService.getGroupIncludeFooter()}},e.prototype.recursivelyAddToRowsToDisplay=function(t,e,o,n,r){if(!ur.missingOrEmpty(e))for(var i=0;i<e.length;i++){var a=e[i],s=a.hasChildren(),l=n&&!s,u=t.groupRemoveSingleChildren&&s&&1===a.childrenAfterGroup.length,c=t.groupRemoveLowestSingleChildren&&s&&a.leafGroup&&1===a.childrenAfterGroup.length,p=n&&a.leafGroup,d=t.hideOpenParents&&a.expanded&&!a.master&&!p;if(!l&&!d&&!u&&!c&&this.addRowNodeToRowsToDisplay(t,a,o,r),!n||!a.leafGroup)if(s){var h=u||c;if(a.expanded||h){var f=h?r:r+1;this.recursivelyAddToRowsToDisplay(t,a.childrenAfterSort,o,n,f),t.getGroupIncludeFooter({node:a})?(a.createFooter(),this.addRowNodeToRowsToDisplay(t,a.sibling,o,f)):a.destroyFooter()}}else if(a.master&&a.expanded){var g=this.createDetailNode(a);this.addRowNodeToRowsToDisplay(t,g,o,r)}}},e.prototype.addRowNodeToRowsToDisplay=function(t,e,o,n){o.push(e),e.setUiLevel(t.isGroupMultiAutoColumn?0:n)},e.prototype.createDetailNode=function(t){if(ur.exists(t.detailNode))return t.detailNode;var e=new Fa(this.beans);return e.detail=!0,e.selectable=!1,e.parent=t,ur.exists(t.id)&&(e.id="detail_"+t.id),e.data=t.data,e.level=t.level+1,t.detailNode=e,e},wm([J("columnModel")],e.prototype,"columnModel",void 0),wm([J("beans")],e.prototype,"beans",void 0),e=wm([X("flattenStage")],e)}(Bt),Sm=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Em=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},xm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Sm(e,t),e.prototype.sort=function(t,e,o,n,r,i){var a=this,s=this.gridOptionsService.get("groupMaintainOrder"),l=this.columnModel.getAllGridColumns().some(function(t){return t.isRowGroupActive()}),u={};o&&n&&(u=this.calculateDirtyNodes(n));var c=this.columnModel.isPivotMode(),p=this.gridOptionsService.getCallback("postSortRows");r&&r.forEachChangedNodeDepthFirst(function(n){var d;a.pullDownGroupDataForHideOpenParents(n.childrenAfterAggFilter,!0);var h=c&&n.leafGroup;if(s&&l&&!n.leafGroup&&!i){var f=null===(d=a.columnModel.getRowGroupColumns())||void 0===d?void 0:d[n.level+1],g=null===(null===f||void 0===f?void 0:f.getSort()),y=n.childrenAfterAggFilter.slice(0);if(n.childrenAfterSort&&!g){var v={};n.childrenAfterSort.forEach(function(t,e){v[t.id]=e}),y.sort(function(t,e){var o,n;return(null!==(o=v[t.id])&&void 0!==o?o:0)-(null!==(n=v[e.id])&&void 0!==n?n:0)})}n.childrenAfterSort=y}else n.childrenAfterSort=!e||h?n.childrenAfterAggFilter.slice(0):o?a.doDeltaSort(n,u,r,t):a.rowNodeSorter.doFullSort(n.childrenAfterAggFilter,t);if(n.sibling&&(n.sibling.childrenAfterSort=n.childrenAfterSort),a.updateChildIndexes(n),p){var m={nodes:n.childrenAfterSort};p(m)}}),this.updateGroupDataForHideOpenParents(r)},e.prototype.calculateDirtyNodes=function(t){var e={},o=function(t){t&&t.forEach(function(t){return e[t.id]=!0})};return t&&t.forEach(function(t){o(t.add),o(t.update),o(t.remove)}),e},e.prototype.doDeltaSort=function(t,e,o,n){var r=this,i=t.childrenAfterAggFilter,a=t.childrenAfterSort;if(!a)return this.rowNodeSorter.doFullSort(i,n);var s={},l=[];i.forEach(function(t){e[t.id]||!o.canSkip(t)?l.push(t):s[t.id]=!0});var u=a.filter(function(t){return s[t.id]}),c=function(t,e){return{currentPos:e,rowNode:t}},p=l.map(c).sort(function(t,e){return r.rowNodeSorter.compareRowNodes(n,t,e)});return this.mergeSortedArrays(n,p,u.map(c)).map(function(t){return t.rowNode})},e.prototype.mergeSortedArrays=function(t,e,o){for(var n=[],r=0,i=0;r<e.length&&i<o.length;){this.rowNodeSorter.compareRowNodes(t,e[r],o[i])<0?n.push(e[r++]):n.push(o[i++])}for(;r<e.length;)n.push(e[r++]);for(;i<o.length;)n.push(o[i++]);return n},e.prototype.updateChildIndexes=function(t){if(!ur.missing(t.childrenAfterSort))for(var e=t.childrenAfterSort,o=0;o<e.length;o++){var n=e[o],r=0===o,i=o===t.childrenAfterSort.length-1;n.setFirstChild(r),n.setLastChild(i),n.setChildIndex(o)}},e.prototype.updateGroupDataForHideOpenParents=function(t){var e=this;if(this.gridOptionsService.get("groupHideOpenParents")){if(this.gridOptionsService.get("treeData"))return ur.warnOnce("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;var o=function(t){e.pullDownGroupDataForHideOpenParents(t.childrenAfterSort,!1),t.childrenAfterSort.forEach(function(t){t.hasChildren()&&o(t)})};t&&t.executeFromRootNode(function(t){return o(t)})}},e.prototype.pullDownGroupDataForHideOpenParents=function(t,e){var o=this;this.gridOptionsService.get("groupHideOpenParents")&&!ur.missing(t)&&t.forEach(function(t){o.columnModel.getGroupDisplayColumns().forEach(function(n){var r=n.getColDef().showRowGroup;if("string"===typeof r){var i=r,a=o.columnModel.getPrimaryColumn(i);if(!(a===t.rowGroupColumn))if(e)t.setGroupValue(n.getId(),void 0);else{var s=t.getFirstChildOfFirstChild(a);s&&t.setGroupValue(n.getId(),s.key)}}else console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup")})})},Em([J("columnModel")],e.prototype,"columnModel",void 0),Em([J("rowNodeSorter")],e.prototype,"rowNodeSorter",void 0),e=Em([X("sortService")],e)}(Bt),Tm=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Om=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Rm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Tm(e,t),e.prototype.filter=function(t){var e=this.filterManager.isChildFilterPresent();this.filterNodes(e,t)},e.prototype.filterNodes=function(t,e){var o=this,n=function(e,n){e.hasChildren()?e.childrenAfterFilter=t&&!n?e.childrenAfterGroup.filter(function(t){var e=t.childrenAfterFilter&&t.childrenAfterFilter.length>0,n=t.data&&o.filterManager.doesRowPassFilter({rowNode:t});return e||n}):e.childrenAfterGroup:e.childrenAfterFilter=e.childrenAfterGroup,e.sibling&&(e.sibling.childrenAfterFilter=e.childrenAfterFilter)};if(this.doingTreeDataFiltering()){var r=function(t,e){if(t.childrenAfterGroup)for(var i=0;i<t.childrenAfterGroup.length;i++){var a=t.childrenAfterGroup[i],s=e||o.filterManager.doesRowPassFilter({rowNode:a});a.childrenAfterGroup?r(t.childrenAfterGroup[i],s):n(a,s)}n(t,e)};e.executeFromRootNode(function(t){return r(t,!1)})}else{e.forEachChangedNodeDepthFirst(function(t){return n(t,!1)},!0)}},e.prototype.doingTreeDataFiltering=function(){return this.gridOptionsService.get("treeData")&&!this.gridOptionsService.get("excludeChildrenWhenTreeDataFiltering")},Om([J("filterManager")],e.prototype,"filterManager",void 0),e=Om([X("filterService")],e)}(Bt),Pm=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Am=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Dm=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},Mm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Pm(e,t),e.prototype.postConstruct=function(){var t=this;"clientSide"===this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",function(){return t.onRowDataUpdated()}))},e.prototype.isActive=function(){var t=this.gridOptionsService.exists("getRowId");return!this.gridOptionsService.get("resetRowDataOnUpdate")&&t},e.prototype.setRowData=function(t){var e=this.createTransactionForRowData(t);if(e){var o=Dm(e,2),n=o[0],r=o[1];this.clientSideRowModel.updateRowData(n,r)}},e.prototype.createTransactionForRowData=function(t){if(ur.missing(this.clientSideRowModel))console.error("AG Grid: ImmutableService only works with ClientSideRowModel");else{var e=this.gridOptionsService.getCallback("getRowId");if(null!=e){var o={remove:[],update:[],add:[]},n=this.clientSideRowModel.getCopyOfNodesMap(),r=this.gridOptionsService.get("suppressMaintainUnsortedOrder")?void 0:{};return ur.exists(t)&&t.forEach(function(t,i){var a=e({data:t,level:0}),s=n[a];(r&&(r[a]=i),s)?(s.data!==t&&o.update.push(t),n[a]=void 0):o.add.push(t)}),ur.iterateObject(n,function(t,e){e&&o.remove.push(e.data)}),[o,r]}console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!")}},e.prototype.onRowDataUpdated=function(){var t=this.gridOptionsService.get("rowData");t&&(this.isActive()?this.setRowData(t):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(t)))},Am([J("rowModel")],e.prototype,"rowModel",void 0),Am([J("rowRenderer")],e.prototype,"rowRenderer",void 0),Am([J("selectionService")],e.prototype,"selectionService",void 0),Am([Y],e.prototype,"postConstruct",null),e=Am([X("immutableService")],e)}(Bt),Im={version:"31.1.1",moduleName:V.ClientSideRowModelModule,rowModel:"clientSide",beans:[hm,ym,Cm,bm,xm,Rm,Mm]},Lm=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Fm=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Nm=function(t){function e(e,o,n){var r=t.call(this,e)||this;return r.parentCache=o,r.params=n,r.startRow=e*n.blockSize,r.endRow=r.startRow+n.blockSize,r}return Lm(e,t),e.prototype.postConstruct=function(){this.createRowNodes()},e.prototype.getBlockStateJson=function(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}},e.prototype.setDataAndId=function(t,e,o){ur.exists(e)?t.setDataAndId(e,o.toString()):t.setDataAndId(void 0,void 0)},e.prototype.loadFromDatasource=function(){var t=this,e=this.createLoadParams();ur.missing(this.params.datasource.getRows)?console.warn("AG Grid: datasource is missing getRows method"):window.setTimeout(function(){t.params.datasource.getRows(e)},0)},e.prototype.processServerFail=function(){},e.prototype.createLoadParams=function(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gridOptionsService.getGridCommonParams().context}},e.prototype.forEachNode=function(t,e,o){var n=this;this.rowNodes.forEach(function(r,i){n.startRow+i<o&&t(r,e.next())})},e.prototype.getLastAccessed=function(){return this.lastAccessed},e.prototype.getRow=function(t,e){void 0===e&&(e=!1),e||(this.lastAccessed=this.params.lastAccessedSequence.next());var o=t-this.startRow;return this.rowNodes[o]},e.prototype.getStartRow=function(){return this.startRow},e.prototype.getEndRow=function(){return this.endRow},e.prototype.createRowNodes=function(){this.rowNodes=[];for(var t=0;t<this.params.blockSize;t++){var e=this.startRow+t,o=new Fa(this.beans);o.setRowHeight(this.params.rowHeight),o.uiLevel=0,o.setRowIndex(e),o.setRowTop(this.params.rowHeight*e),this.rowNodes.push(o)}},e.prototype.processServerResult=function(t){var e=this;this.rowNodes.forEach(function(o,n){var r=t.rowData?t.rowData[n]:void 0;!o.id&&o.alreadyRendered&&r&&(e.rowNodes[n]=new Fa(e.beans),e.rowNodes[n].setRowIndex(o.rowIndex),e.rowNodes[n].setRowTop(o.rowTop),e.rowNodes[n].setRowHeight(o.rowHeight),o.clearRowTopAndRowIndex()),e.setDataAndId(e.rowNodes[n],r,e.startRow+n)});var o=null!=t.rowCount&&t.rowCount>=0?t.rowCount:void 0;this.parentCache.pageLoaded(this,o)},e.prototype.destroyRowNodes=function(){this.rowNodes.forEach(function(t){t.clearRowTopAndRowIndex()})},Fm([J("beans")],e.prototype,"beans",void 0),Fm([Y],e.prototype,"postConstruct",null),Fm([Z],e.prototype,"destroyRowNodes",null),e}($d),km=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Gm=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Vm=function(t,e){return function(o,n){e(o,n,t)}},Bm=function(t){function e(e){var o=t.call(this)||this;return o.lastRowIndexKnown=!1,o.blocks={},o.blockCount=0,o.rowCount=e.initialRowCount,o.params=e,o}return km(e,t),e.prototype.setBeans=function(t){this.logger=t.create("InfiniteCache")},e.prototype.getRow=function(t,e){void 0===e&&(e=!1);var o=Math.floor(t/this.params.blockSize),n=this.blocks[o];if(!n){if(e)return;n=this.createBlock(o)}return n.getRow(t)},e.prototype.createBlock=function(t){var e=this.createBean(new Nm(t,this,this.params));return this.blocks[e.getId()]=e,this.blockCount++,this.purgeBlocksIfNeeded(e),this.params.rowNodeBlockLoader.addBlock(e),e},e.prototype.refreshCache=function(){0==this.blockCount?this.purgeCache():(this.getBlocksInOrder().forEach(function(t){return t.setStateWaitingToLoad()}),this.params.rowNodeBlockLoader.checkBlockToLoad())},e.prototype.destroyAllBlocks=function(){var t=this;this.getBlocksInOrder().forEach(function(e){return t.destroyBlock(e)})},e.prototype.getRowCount=function(){return this.rowCount},e.prototype.isLastRowIndexKnown=function(){return this.lastRowIndexKnown},e.prototype.pageLoaded=function(t,e){this.isAlive()&&(this.logger.log("onPageLoaded: page = ".concat(t.getId(),", lastRow = ").concat(e)),this.checkRowCount(t,e),this.onCacheUpdated())},e.prototype.purgeBlocksIfNeeded=function(t){var o=this,n=this.getBlocksInOrder().filter(function(e){return e!=t});n.sort(function(t,e){return e.getLastAccessed()-t.getLastAccessed()});var r=this.params.maxBlocksInCache>0,i=r?this.params.maxBlocksInCache-1:null,a=e.MAX_EMPTY_BLOCKS_TO_KEEP-1;n.forEach(function(t,e){if(t.getState()===Nm.STATE_WAITING_TO_LOAD&&e>=a||!!r&&e>=i){if(o.isBlockCurrentlyDisplayed(t))return;if(o.isBlockFocused(t))return;o.removeBlockFromCache(t)}})},e.prototype.isBlockFocused=function(t){var e=this.focusService.getFocusCellToUseAfterRefresh();if(!e)return!1;if(null!=e.rowPinned)return!1;var o=t.getStartRow(),n=t.getEndRow();return e.rowIndex>=o&&e.rowIndex<n},e.prototype.isBlockCurrentlyDisplayed=function(t){var e=t.getStartRow(),o=t.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(e,o)},e.prototype.removeBlockFromCache=function(t){t&&this.destroyBlock(t)},e.prototype.checkRowCount=function(t,e){if("number"===typeof e&&e>=0)this.rowCount=e,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){var o=(t.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<o&&(this.rowCount=o)}},e.prototype.setRowCount=function(t,e){this.rowCount=t,ur.exists(e)&&(this.lastRowIndexKnown=e),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()},e.prototype.forEachNodeDeep=function(t){var e=this,o=new cr;this.getBlocksInOrder().forEach(function(n){return n.forEachNode(t,o,e.rowCount)})},e.prototype.getBlocksInOrder=function(){return ur.getAllValuesInObject(this.blocks).sort(function(t,e){return t.getId()-e.getId()})},e.prototype.destroyBlock=function(t){delete this.blocks[t.getId()],this.destroyBean(t),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(t)},e.prototype.onCacheUpdated=function(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();var t={type:qt.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(t)}},e.prototype.destroyAllBlocksPastVirtualRowCount=function(){var t=this,e=[];this.getBlocksInOrder().forEach(function(o){o.getId()*t.params.blockSize>=t.rowCount&&e.push(o)}),e.length>0&&e.forEach(function(e){return t.destroyBlock(e)})},e.prototype.purgeCache=function(){var t=this;this.getBlocksInOrder().forEach(function(e){return t.removeBlockFromCache(e)}),this.lastRowIndexKnown=!1,0===this.rowCount&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()},e.prototype.getRowNodesInRange=function(t,e){var o=this,n=[],r=-1,i=!1,a=new cr;ur.missing(t)&&(i=!0);var s=!1;return this.getBlocksInOrder().forEach(function(l){s||(i&&r+1!==l.getId()?s=!0:(r=l.getId(),l.forEachNode(function(o){var r=o===t||o===e;(i||r)&&n.push(o),r&&(i=!i)},a,o.rowCount)))}),s||i?[]:n},e.MAX_EMPTY_BLOCKS_TO_KEEP=2,Gm([J("rowRenderer")],e.prototype,"rowRenderer",void 0),Gm([J("focusService")],e.prototype,"focusService",void 0),Gm([Vm(0,tt("loggerFactory"))],e.prototype,"setBeans",null),Gm([Z],e.prototype,"destroyAllBlocks",null),e}(Bt),zm=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Hm=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},jm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zm(e,t),e.prototype.getRowBounds=function(t){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*t}},e.prototype.ensureRowHeightsValid=function(t,e,o,n){return!1},e.prototype.init=function(){var t=this;this.gridOptionsService.isRowModelType("infinite")&&(this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(function(){return t.destroyCache()}),this.verifyProps())},e.prototype.verifyProps=function(){this.gridOptionsService.exists("initialGroupOrderComparator")&&ur.warnOnce("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")},e.prototype.start=function(){this.setDatasource(this.gridOptionsService.get("datasource"))},e.prototype.destroyDatasource=function(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)},e.prototype.addEventListeners=function(){var t=this;this.addManagedListener(this.eventService,qt.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,qt.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this)),this.addManagedPropertyListener("datasource",function(){return t.setDatasource(t.gridOptionsService.get("datasource"))}),this.addManagedPropertyListener("cacheBlockSize",function(){return t.resetCache()}),this.addManagedPropertyListener("rowHeight",function(){t.rowHeight=t.gridOptionsService.getRowHeightAsNumber(),t.cacheParams.rowHeight=t.rowHeight,t.updateRowHeights()})},e.prototype.onFilterChanged=function(){this.reset()},e.prototype.onSortChanged=function(){this.reset()},e.prototype.onColumnEverything=function(){(!this.cacheParams||this.isSortModelDifferent())&&this.reset()},e.prototype.isSortModelDifferent=function(){return!ur.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())},e.prototype.getType=function(){return"infinite"},e.prototype.setDatasource=function(t){this.destroyDatasource(),this.datasource=t,t&&this.reset()},e.prototype.isEmpty=function(){return!this.infiniteCache},e.prototype.isRowsToRender=function(){return!!this.infiniteCache},e.prototype.getNodesInRangeForSelection=function(t,e){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(t,e):[]},e.prototype.reset=function(){this.datasource&&(null!=this.gridOptionsService.getCallback("getRowId")||this.selectionService.reset("rowDataChanged"),this.resetCache())},e.prototype.createModelUpdatedEvent=function(){return{type:qt.EVENT_MODEL_UPDATED,newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1}},e.prototype.resetCache=function(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gridOptionsService.get("infiniteInitialRowCount"),maxBlocksInCache:this.gridOptionsService.get("maxBlocksInCache"),rowHeight:this.gridOptionsService.getRowHeightAsNumber(),overflowSize:this.gridOptionsService.get("cacheOverflowSize"),blockSize:this.gridOptionsService.get("cacheBlockSize"),lastAccessedSequence:new cr},this.infiniteCache=this.createBean(new Bm(this.cacheParams)),this.eventService.dispatchEventOnce({type:qt.EVENT_ROW_COUNT_READY});var t=this.createModelUpdatedEvent();this.eventService.dispatchEvent(t)},e.prototype.updateRowHeights=function(){var t=this;this.forEachNode(function(e){e.setRowHeight(t.rowHeight),e.setRowTop(t.rowHeight*e.rowIndex)});var e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)},e.prototype.destroyCache=function(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))},e.prototype.onCacheUpdated=function(){var t=this.createModelUpdatedEvent();this.eventService.dispatchEvent(t)},e.prototype.getRow=function(t){if(this.infiniteCache&&!(t>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(t)},e.prototype.getRowNode=function(t){var e;return this.forEachNode(function(o){o.id===t&&(e=o)}),e},e.prototype.forEachNode=function(t){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(t)},e.prototype.getTopLevelRowCount=function(){return this.getRowCount()},e.prototype.getTopLevelRowDisplayedIndex=function(t){return t},e.prototype.getRowIndexAtPixel=function(t){if(0!==this.rowHeight){var e=Math.floor(t/this.rowHeight),o=this.getRowCount()-1;return e>o?o:e}return 0},e.prototype.getRowCount=function(){return this.infiniteCache?this.infiniteCache.getRowCount():0},e.prototype.isRowPresent=function(t){return!!this.getRowNode(t.id)},e.prototype.refreshCache=function(){this.infiniteCache&&this.infiniteCache.refreshCache()},e.prototype.purgeCache=function(){this.infiniteCache&&this.infiniteCache.purgeCache()},e.prototype.isLastRowIndexKnown=function(){return!!this.infiniteCache&&this.infiniteCache.isLastRowIndexKnown()},e.prototype.setRowCount=function(t,e){this.infiniteCache&&this.infiniteCache.setRowCount(t,e)},Hm([J("filterManager")],e.prototype,"filterManager",void 0),Hm([J("sortController")],e.prototype,"sortController",void 0),Hm([J("selectionService")],e.prototype,"selectionService",void 0),Hm([J("rowRenderer")],e.prototype,"rowRenderer",void 0),Hm([J("rowNodeBlockLoader")],e.prototype,"rowNodeBlockLoader",void 0),Hm([Y],e.prototype,"init",null),Hm([Z],e.prototype,"destroyDatasource",null),e=Hm([X("rowModel")],e)}(Bt),Um={version:"31.1.1",moduleName:V.InfiniteRowModelModule,rowModel:"infinite",beans:[jm]},Wm=function(){function t(){}return t.prototype.setBeans=function(t){this.beans=t},t.prototype.getFileName=function(t){var e=this.getDefaultFileExtension();return null!=t&&t.length||(t=this.getDefaultFileName()),-1===t.indexOf(".")?"".concat(t,".").concat(e):t},t.prototype.getData=function(t){var e=this.createSerializingSession(t);return this.beans.gridSerializer.serialize(e,t)},t.prototype.getDefaultFileName=function(){return"export.".concat(this.getDefaultFileExtension())},t}(),Km=function(){function t(t){this.groupColumns=[];var e=t.columnModel,o=t.valueService,n=t.gridOptionsService,r=t.valueFormatterService,i=t.valueParserService,a=t.processCellCallback,s=t.processHeaderCallback,l=t.processGroupHeaderCallback,u=t.processRowGroupCallback;this.columnModel=e,this.valueService=o,this.gridOptionsService=n,this.valueFormatterService=r,this.valueParserService=i,this.processCellCallback=a,this.processHeaderCallback=s,this.processGroupHeaderCallback=l,this.processRowGroupCallback=u}return t.prototype.prepare=function(t){this.groupColumns=t.filter(function(t){return!!t.getColDef().showRowGroup})},t.prototype.extractHeaderValue=function(t){var e=this.getHeaderName(this.processHeaderCallback,t);return null!=e?e:""},t.prototype.extractRowCellValue=function(t,e,o,n,r){var i=this.gridOptionsService.get("groupHideOpenParents")&&!r.footer||!this.shouldRenderGroupSummaryCell(r,t,e)?this.valueService.getValue(t,r):this.createValueForGroupNode(t,r);return this.processCell({accumulatedRowIndex:o,rowNode:r,column:t,value:i,processCellCallback:this.processCellCallback,type:n})},t.prototype.shouldRenderGroupSummaryCell=function(t,e,o){var n;if(!(t&&t.group))return!1;if(-1!==this.groupColumns.indexOf(e)){if(null!=(null===(n=t.groupData)||void 0===n?void 0:n[e.getId()]))return!0;if(this.gridOptionsService.isRowModelType("serverSide")&&t.group)return!0;if(t.footer&&-1===t.level){var r=e.getColDef();return null==r||!0===r.showRowGroup||r.showRowGroup===this.columnModel.getRowGroupColumns()[0].getId()}}var i=this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotMode());return 0===o&&i},t.prototype.getHeaderName=function(t,e){return t?t(this.gridOptionsService.addGridCommonParams({column:e})):this.columnModel.getDisplayNameForColumn(e,"csv",!0)},t.prototype.createValueForGroupNode=function(t,e){var o=this;if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gridOptionsService.addGridCommonParams({column:t,node:e}));var n=this.gridOptionsService.get("treeData"),r=this.gridOptionsService.get("suppressGroupMaintainValueType"),i=function(e){var i,a;if(n||r)return e.key;var s=null===(i=e.groupData)||void 0===i?void 0:i[t.getId()];return s&&e.rowGroupColumn&&!1!==e.rowGroupColumn.getColDef().useValueFormatterForExport&&null!==(a=o.valueFormatterService.formatValue(e.rowGroupColumn,e,s))&&void 0!==a?a:s},a=e.footer,s=[i(e)];if(!this.gridOptionsService.isGroupMultiAutoColumn())for(;e.parent;)e=e.parent,s.push(i(e));var l=s.reverse().join(" -> ");return a?"Total ".concat(l):l},t.prototype.processCell=function(t){var e,o=this,n=t.accumulatedRowIndex,r=t.rowNode,i=t.column,a=t.value,s=t.processCellCallback,l=t.type;return s?{value:null!==(e=s(this.gridOptionsService.addGridCommonParams({accumulatedRowIndex:n,column:i,node:r,value:a,type:l,parseValue:function(t){return o.valueParserService.parseValue(i,r,t,o.valueService.getValue(i,r))},formatValue:function(t){var e;return null!==(e=o.valueFormatterService.formatValue(i,r,t))&&void 0!==e?e:t}})))&&void 0!==e?e:""}:!1!==i.getColDef().useValueFormatterForExport?{value:null!==a&&void 0!==a?a:"",valueFormatted:this.valueFormatterService.formatValue(i,r,a)}:{value:null!==a&&void 0!==a?a:""}},t}(),qm=function(){function t(){}return t.download=function(t,e){var o=document.defaultView||window;if(o){var n=document.createElement("a"),r=o.URL.createObjectURL(e);n.setAttribute("href",r),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:o})),document.body.removeChild(n),o.setTimeout(function(){o.URL.revokeObjectURL(r)},0)}else console.warn("AG Grid: There is no `window` associated with the current `document`")},t}(),Ym=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Zm=function(t){function e(e){var o=t.call(this,e)||this;o.isFirstLine=!0,o.result="";var n=e.suppressQuotes,r=e.columnSeparator;return o.suppressQuotes=n,o.columnSeparator=r,o}return Ym(e,t),e.prototype.addCustomContent=function(t){var e=this;t&&("string"===typeof t?(/^\s*\n/.test(t)||this.beginNewLine(),t=t.replace(/\r?\n/g,"\r\n"),this.result+=t):t.forEach(function(t){e.beginNewLine(),t.forEach(function(t,o){0!==o&&(e.result+=e.columnSeparator),e.result+=e.putInQuotes(t.data.value||""),t.mergeAcross&&e.appendEmptyCells(t.mergeAcross)})}))},e.prototype.onNewHeaderGroupingRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}},e.prototype.onNewHeaderGroupingRowColumn=function(t,e,o,n){0!=o&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(e),this.appendEmptyCells(n)},e.prototype.appendEmptyCells=function(t){for(var e=1;e<=t;e++)this.result+=this.columnSeparator+this.putInQuotes("")},e.prototype.onNewHeaderRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}},e.prototype.onNewHeaderRowColumn=function(t,e){0!=e&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(t))},e.prototype.onNewBodyRow=function(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}},e.prototype.onNewBodyRowColumn=function(t,e,o){var n;0!=e&&(this.result+=this.columnSeparator);var r=this.extractRowCellValue(t,e,e,"csv",o);this.result+=this.putInQuotes(null!==(n=r.valueFormatted)&&void 0!==n?n:r.value)},e.prototype.putInQuotes=function(t){return this.suppressQuotes?t:null===t||void 0===t?'""':("string"===typeof t?e=t:"function"===typeof t.toString?e=t.toString():(console.warn("AG Grid: unknown value type during csv conversion"),e=""),'"'+e.replace(/"/g,'""')+'"');var e},e.prototype.parse=function(){return this.result},e.prototype.beginNewLine=function(){this.isFirstLine||(this.result+="\r\n"),this.isFirstLine=!1},e}(Km),Xm=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Jm=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},Qm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Xm(e,t),e.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsService:this.gridOptionsService})},e.prototype.getMergedParams=function(t){var e=this.gridOptionsService.get("defaultCsvExportParams");return Object.assign({},e,t)},e.prototype.export=function(t){if(this.isExportSuppressed())console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration.");else{var e=this.getMergedParams(t),o=this.getData(e),n=new Blob(["\ufeff",o],{type:"text/plain"}),r="function"===typeof e.fileName?e.fileName(this.gridOptionsService.getGridCommonParams()):e.fileName;qm.download(this.getFileName(r),n)}},e.prototype.exportDataAsCsv=function(t){this.export(t)},e.prototype.getDataAsCsv=function(t,e){void 0===e&&(e=!1);var o=e?Object.assign({},t):this.getMergedParams(t);return this.getData(o)},e.prototype.getDefaultFileExtension=function(){return"csv"},e.prototype.createSerializingSession=function(t){var e=this,o=e.columnModel,n=e.valueService,r=e.gridOptionsService,i=e.valueFormatterService,a=e.valueParserService,s=t,l=s.processCellCallback,u=s.processHeaderCallback,c=s.processGroupHeaderCallback,p=s.processRowGroupCallback,d=s.suppressQuotes,h=s.columnSeparator;return new Zm({columnModel:o,valueService:n,gridOptionsService:r,valueFormatterService:i,valueParserService:a,processCellCallback:l||void 0,processHeaderCallback:u||void 0,processGroupHeaderCallback:c||void 0,processRowGroupCallback:p||void 0,suppressQuotes:d||!1,columnSeparator:h||","})},e.prototype.isExportSuppressed=function(){return this.gridOptionsService.get("suppressCsvExport")},Jm([J("columnModel")],e.prototype,"columnModel",void 0),Jm([J("valueService")],e.prototype,"valueService",void 0),Jm([J("gridSerializer")],e.prototype,"gridSerializer",void 0),Jm([J("gridOptionsService")],e.prototype,"gridOptionsService",void 0),Jm([J("valueFormatterService")],e.prototype,"valueFormatterService",void 0),Jm([J("valueParserService")],e.prototype,"valueParserService",void 0),Jm([Y],e.prototype,"postConstruct",null),e=Jm([X("csvCreator")],e)}(Wm),$m=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),tC=function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};!function(t){t[t.HEADER_GROUPING=0]="HEADER_GROUPING",t[t.HEADER=1]="HEADER",t[t.BODY=2]="BODY"}(dm||(dm={}));var eC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $m(e,t),e.prototype.serialize=function(t,e){void 0===e&&(e={});var o=e.allColumns,n=e.columnKeys,r=e.skipRowGroups,i=this.getColumnsToExport(o,r,n);return ur.compose(this.prepareSession(i),this.prependContent(e),this.exportColumnGroups(e,i),this.exportHeaders(e,i),this.processPinnedTopRows(e,i),this.processRows(e,i),this.processPinnedBottomRows(e,i),this.appendContent(e))(t).parse()},e.prototype.processRow=function(t,e,o,n){var r=e.shouldRowBeSkipped||function(){return!1},i=this.gridOptionsService.get("groupRemoveSingleChildren"),a=this.gridOptionsService.get("groupRemoveLowestSingleChildren"),s=null!=e.rowPositions||!!e.onlySelected,l=this.gridOptionsService.get("groupHideOpenParents")&&!s,u=this.columnModel.isPivotMode()?n.leafGroup:!n.group,c=!!n.footer;e.skipRowGroups;var p=a&&n.leafGroup,d=1===n.allChildrenCount&&(i||p);if(!(!u&&!c&&(e.skipRowGroups||d||l)||e.onlySelected&&!n.isSelected()||e.skipPinnedTop&&"top"===n.rowPinned||e.skipPinnedBottom&&"bottom"===n.rowPinned)&&((!(-1===n.level)||u||c)&&!r(this.gridOptionsService.addGridCommonParams({node:n})))){var h=t.onNewBodyRow(n);if(o.forEach(function(t,e){h.onColumn(t,e,n)}),e.getCustomContentBelowRow){var f=e.getCustomContentBelowRow(this.gridOptionsService.addGridCommonParams({node:n}));f&&t.addCustomContent(f)}}},e.prototype.appendContent=function(t){return function(e){var o=t.appendContent;return o&&e.addCustomContent(o),e}},e.prototype.prependContent=function(t){return function(e){var o=t.prependContent;return o&&e.addCustomContent(o),e}},e.prototype.prepareSession=function(t){return function(e){return e.prepare(t),e}},e.prototype.exportColumnGroups=function(t,e){var o=this;return function(n){if(!t.skipColumnGroupHeaders){var r=new Yt,i=o.displayedGroupCreator.createDisplayedGroups(e,r,null);o.recursivelyAddHeaderGroups(i,n,t.processGroupHeaderCallback)}return n}},e.prototype.exportHeaders=function(t,e){return function(o){if(!t.skipColumnHeaders){var n=o.onNewHeaderRow();e.forEach(function(t,e){n.onColumn(t,e,void 0)})}return o}},e.prototype.processPinnedTopRows=function(t,e){var o=this;return function(n){var r=o.processRow.bind(o,n,t,e);return t.rowPositions?t.rowPositions.filter(function(t){return"top"===t.rowPinned}).sort(function(t,e){return t.rowIndex-e.rowIndex}).map(function(t){return o.pinnedRowModel.getPinnedTopRow(t.rowIndex)}).forEach(r):o.pinnedRowModel.forEachPinnedTopRow(r),n}},e.prototype.processRows=function(t,e){var o=this;return function(n){var r=o.rowModel,i=r.getType(),a="clientSide"===i,s="serverSide"===i,l=!a&&t.onlySelected,u=o.processRow.bind(o,n,t,e),c=t.exportedRows,p=void 0===c?"filteredAndSorted":c;if(t.rowPositions)t.rowPositions.filter(function(t){return null==t.rowPinned}).sort(function(t,e){return t.rowIndex-e.rowIndex}).map(function(t){return r.getRow(t.rowIndex)}).forEach(u);else if(o.columnModel.isPivotMode())a?r.forEachPivotNode(u,!0):s?r.forEachNodeAfterFilterAndSort(u,!0):r.forEachNode(u);else if(t.onlySelectedAllPages||l){var d=o.selectionService.getSelectedNodes();o.replicateSortedOrder(d),d.forEach(u)}else"all"===p?r.forEachNode(u):a?r.forEachNodeAfterFilterAndSort(u,!0):s?r.forEachNodeAfterFilterAndSort(u,!0):r.forEachNode(u);return n}},e.prototype.replicateSortedOrder=function(t){var e=this,o=this.sortController.getSortOptions(),n=function(t,r){var i,a,s,l;return null!=t.rowIndex&&null!=r.rowIndex?t.rowIndex-r.rowIndex:t.level===r.level?(null===(i=t.parent)||void 0===i?void 0:i.id)===(null===(a=r.parent)||void 0===a?void 0:a.id)?e.rowNodeSorter.compareRowNodes(o,{rowNode:t,currentPos:null!==(s=t.rowIndex)&&void 0!==s?s:-1},{rowNode:r,currentPos:null!==(l=r.rowIndex)&&void 0!==l?l:-1}):n(t.parent,r.parent):t.level>r.level?n(t.parent,r):n(t,r.parent)};t.sort(n)},e.prototype.processPinnedBottomRows=function(t,e){var o=this;return function(n){var r=o.processRow.bind(o,n,t,e);return t.rowPositions?t.rowPositions.filter(function(t){return"bottom"===t.rowPinned}).sort(function(t,e){return t.rowIndex-e.rowIndex}).map(function(t){return o.pinnedRowModel.getPinnedBottomRow(t.rowIndex)}).forEach(r):o.pinnedRowModel.forEachPinnedBottomRow(r),n}},e.prototype.getColumnsToExport=function(t,e,o){void 0===t&&(t=!1),void 0===e&&(e=!1);var n=this.columnModel.isPivotMode();if(o&&o.length)return this.columnModel.getGridColumns(o);var r=this.gridOptionsService.get("treeData"),i=[];return i=t&&!n?this.columnModel.getAllGridColumns():this.columnModel.getAllDisplayedColumns(),e&&!r&&(i=i.filter(function(t){return t.getColId()!==Jt})),i},e.prototype.recursivelyAddHeaderGroups=function(t,e,o){var n=[];t.forEach(function(t){var e=t;e.getChildren&&e.getChildren().forEach(function(t){return n.push(t)})}),t.length>0&&t[0]instanceof Kt&&this.doAddHeaderHeader(e,t,o),n&&n.length>0&&this.recursivelyAddHeaderGroups(n,e,o)},e.prototype.doAddHeaderHeader=function(t,e,o){var n=this,r=t.onNewHeaderGroupingRow(),i=0;e.forEach(function(t){var e,a=t;e=o?o(n.gridOptionsService.addGridCommonParams({columnGroup:a})):n.columnModel.getDisplayNameForColumnGroup(a,"header");var s=a.getLeafColumns().reduce(function(t,e,o,n){var r=ur.last(t);return"open"===e.getColumnGroupShow()?r&&null==r[1]||(r=[o],t.push(r)):r&&null==r[1]&&(r[1]=o-1),o===n.length-1&&r&&null==r[1]&&(r[1]=o),t},[]);r.onColumn(a,e||"",i++,a.getLeafColumns().length-1,s)})},tC([J("displayedGroupCreator")],e.prototype,"displayedGroupCreator",void 0),tC([J("columnModel")],e.prototype,"columnModel",void 0),tC([J("rowModel")],e.prototype,"rowModel",void 0),tC([J("pinnedRowModel")],e.prototype,"pinnedRowModel",void 0),tC([J("selectionService")],e.prototype,"selectionService",void 0),tC([J("rowNodeSorter")],e.prototype,"rowNodeSorter",void 0),tC([J("sortController")],e.prototype,"sortController",void 0),e=tC([X("gridSerializer")],e)}(Bt),oC={version:"31.1.1",moduleName:V.CsvExportModule,beans:[Qm,eC]},nC=function(){function t(){}return t.createHeader=function(t){void 0===t&&(t={});var e=["version"];t.version||(t.version="1.0"),t.encoding&&e.push("encoding"),t.standalone&&e.push("standalone");var o=e.map(function(e){return"".concat(e,'="').concat(t[e],'"')}).join(" ");return"".concat("<?","xml ").concat(o," ").concat("?>")},t.createXml=function(t,e){var o=this,n="";t.properties&&(t.properties.prefixedAttributes&&t.properties.prefixedAttributes.forEach(function(t){Object.keys(t.map).forEach(function(r){n+=o.returnAttributeIfPopulated(t.prefix+r,t.map[r],e)})}),t.properties.rawMap&&Object.keys(t.properties.rawMap).forEach(function(r){n+=o.returnAttributeIfPopulated(r,t.properties.rawMap[r],e)}));var r="<"+t.name+n;return t.children||null!=t.textNode?null!=t.textNode?r+">"+t.textNode+"</"+t.name+">\r\n":(r+=">\r\n",t.children&&t.children.forEach(function(t){r+=o.createXml(t,e)}),r+"</"+t.name+">\r\n"):r+"/>\r\n"},t.returnAttributeIfPopulated=function(t,e,o){if(!e&&""!==e&&0!==e)return"";var n=e;return"boolean"===typeof e&&o&&(n=o(e))," ".concat(t,'="').concat(n,'"')},t}();function rC(t,e){for(var o="",n=0;n<e;n++)o+=String.fromCharCode(255&t),t>>>=8;return o}var iC=function(t){if(!t.length)return 0;for(var e=-1,o=0,n=0;n<t.length;n++)o=t[n],e=e>>>8^sC[255&(e^o)];return-1^e},aC=function(t){return t.length?iC("string"===typeof t?(new TextEncoder).encode(t):t):0},sC=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),lC=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function s(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}l((n=n.apply(t,e||[])).next())})},uC=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},cC=function(t){return lC(void 0,void 0,void 0,function(){var e,o,n,r,i,a;return uC(this,function(s){switch(s.label){case 0:return e=new Blob([t]),[4,(l=e,lC(void 0,void 0,void 0,function(){var t,e,o,n,r;return uC(this,function(i){switch(i.label){case 0:return t=0,e=[],o=new WritableStream({write:function(o){e.push(o),t+=o.length}}),n=new ReadableStream({start:function(t){var e=new FileReader;e.onload=function(e){var o;(null===(o=e.target)||void 0===o?void 0:o.result)&&t.enqueue(e.target.result),t.close()},e.readAsArrayBuffer(l)}}),r=new window.CompressionStream("deflate-raw"),[4,n.pipeThrough(r).pipeTo(o)];case 1:return i.sent(),[2,{size:t,content:new Blob(e)}]}})}))];case 1:return o=s.sent(),n=o.size,r=o.content,a=Uint8Array.bind,[4,r.arrayBuffer()];case 2:return i=new(a.apply(Uint8Array,[void 0,s.sent()])),[2,{size:n,content:i}]}var l})})},pC=function(){return(pC=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},dC=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function s(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}l((n=n.apply(t,e||[])).next())})},hC=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},fC=ur.utf8_encode,gC=function(t,e){return dC(void 0,void 0,void 0,function(){var o,n,r,i,a,s,l,u,c;return hC(this,function(p){switch(p.label){case 0:return o=t.content,n=o?mC(o):{size:0,content:Uint8Array.from([])},r=n.size,i=n.content,a=void 0,s=void 0,l=!1,"file"===t.type&&i&&r>0?[4,cC(i)]:[3,2];case 1:u=p.sent(),a=u.content,s=u.size,l=!0,p.label=2;case 2:return c=vC(t,l,e,r,i,s),[2,pC(pC({},c),{content:a||i,isCompressed:l})]}})})},yC=function(t,e){var o=t.content,n=(o?mC(o):{content:Uint8Array.from([])}).content,r=vC(t,!1,e,n.length,n,void 0);return pC(pC({},r),{content:n,isCompressed:!1})},vC=function(t,e,o,n,r,i){var a=t.content,s=t.path,l=t.created,u=function(t){var e=t.getHours();return e<<=6,e|=t.getMinutes(),e<<=5,e|=t.getSeconds()/2}(l),c=function(t){var e=t.getFullYear()-1980;return e<<=4,e|=t.getMonth()+1,e<<=5,e|=t.getDate()}(l),p=aC(r),d=void 0!==i?i:n,h=fC(s),f=h!==s,g="";if(f){var y=rC(1,1)+rC(aC(h),4)+h;g="up"+rC(y.length,2)+y}var v="\x14\0"+(f?"\0\b":"\0\0")+rC(e?8:0,2)+rC(u,2)+rC(c,2)+rC(d?p:0,4)+rC(null!==i&&void 0!==i?i:n,4)+rC(n,4)+rC(h.length,2)+rC(g.length,2),m="PK\x03\x04"+v+h+g,C="PK\x01\x02\x14\0"+v+"\0\0\0\0\0\0"+(a?"\0\0\0\0":"\x10\0\0\0")+rC(o,4)+h+g;return{localFileHeader:Uint8Array.from(m,function(t){return t.charCodeAt(0)}),centralDirectoryHeader:Uint8Array.from(C,function(t){return t.charCodeAt(0)})}},mC=function(t){var e;"string"===typeof t?e=function(t){for(var e=new Uint8Array(t.length),o=0;o<t.length;o++)e[o]=t.charCodeAt(o);return e}(atob(t.split(";base64,")[1])):e=t;return{size:e.length,content:e}},CC=function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function a(t){try{l(n.next(t))}catch(e){i(e)}}function s(t){try{l(n.throw(t))}catch(e){i(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,s)}l((n=n.apply(t,e||[])).next())})},_C=function(t,e){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(s){i=[6,s],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},wC=function(t){var e="function"===typeof Symbol&&Symbol.iterator,o=e&&t[e],n=0;if(o)return o.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bC=function(t,e){var o="function"===typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a},SC=function(t,e,o){if(o||2===arguments.length)for(var n,r=0,i=e.length;r<i;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))},EC=function(){function t(){}return t.addFolders=function(t){t.forEach(this.addFolder.bind(this))},t.addFolder=function(t){this.folders.push({path:t,created:new Date,isBase64:!1,type:"folder"})},t.addFile=function(t,e,o){void 0===o&&(o=!1),this.files.push({path:t,created:new Date,content:o?e:(new TextEncoder).encode(e),isBase64:o,type:"file"})},t.getZipFile=function(t){return void 0===t&&(t="application/zip"),CC(this,void 0,void 0,function(){var e;return _C(this,function(o){switch(o.label){case 0:return[4,this.buildCompressedFileStream()];case 1:return e=o.sent(),this.clearStream(),[2,new Blob([e],{type:t})]}})})},t.getUncompressedZipFile=function(t){void 0===t&&(t="application/zip");var e=this.buildFileStream();return this.clearStream(),new Blob([e],{type:t})},t.clearStream=function(){this.folders=[],this.files=[]},t.packageFiles=function(t){var e,o,n=new Uint8Array(0),r=new Uint8Array(0),i=0,a=0;try{for(var s=wC(t),l=s.next();!l.done;l=s.next()){var u=l.value,c=u.localFileHeader,p=u.centralDirectoryHeader,d=u.content,h=new Uint8Array(n.length+c.length);h.set(n),h.set(c,n.length),n=h;var f=new Uint8Array(n.length+d.length);f.set(n),f.set(d,n.length),n=f;var g=new Uint8Array(r.length+p.length);g.set(r),g.set(p,r.length),r=g,i+=c.length+d.length,a+=p.length}}catch(m){e={error:m}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(e)throw e.error}}var y=function(t,e,o){var n="PK\x05\x06\0\0\0\0"+rC(t,2)+rC(t,2)+rC(e,4)+rC(o,4)+"\0\0";return Uint8Array.from(n,function(t){return t.charCodeAt(0)})}(t.length,a,i),v=new Uint8Array(n.length+r.length+y.length);return v.set(n),v.set(r,n.length),v.set(y,n.length+r.length),v},t.buildCompressedFileStream=function(){return CC(this,void 0,void 0,function(){var t,e,o,n,r,i,a,s,l,u,c,p;return _C(this,function(d){switch(d.label){case 0:t=SC(SC([],bC(this.folders),!1),bC(this.files),!1),e=[],o=0,d.label=1;case 1:d.trys.push([1,6,7,8]),n=wC(t),r=n.next(),d.label=2;case 2:return r.done?[3,5]:(i=r.value,[4,gC(i,o)]);case 3:a=d.sent(),s=a.localFileHeader,l=a.content,e.push(a),o+=s.length+l.length,d.label=4;case 4:return r=n.next(),[3,2];case 5:return[3,8];case 6:return u=d.sent(),c={error:u},[3,8];case 7:try{r&&!r.done&&(p=n.return)&&p.call(n)}finally{if(c)throw c.error}return[7];case 8:return[2,this.packageFiles(e)]}})})},t.buildFileStream=function(){var t,e,o=SC(SC([],bC(this.folders),!1),bC(this.files),!1),n=[],r=0;try{for(var i=wC(o),a=i.next();!a.done;a=i.next()){var s=a.value,l=yC(s,r),u=l.localFileHeader,c=l.content;n.push(l),r+=u.length+c.length}}catch(p){t={error:p}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return this.packageFiles(n)},t.folders=[],t.files=[],t}(),xC=[Im,Um,oC];j.registerModules(xC)}.call(this,o(11))},function(t,e,o){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.BeansContext=void 0;var r=n(o(1));e.BeansContext=r.default.createContext({})},function(t,e,o){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__spreadArray||function(t,e){for(var o=0,n=e.length,r=t.length;o<n;o++,r++)t[r]=e[o];return t},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.getNextValueIfDifferent=e.agFlushSync=e.runWithoutFlushSync=e.isComponentStateless=e.CssClasses=e.classesList=void 0;var a=i(o(8));e.classesList=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.filter(function(t){return null!=t&&""!==t}).join(" ")};var s=function(){function t(){for(var t=this,e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];this.classesMap={},e.forEach(function(e){t.classesMap[e]=!0})}return t.prototype.setClass=function(e,o){if(!!this.classesMap[e]==o)return this;var r=new t;return r.classesMap=n({},this.classesMap),r.classesMap[e]=o,r},t.prototype.toString=function(){var t=this;return Object.keys(this.classesMap).filter(function(e){return t.classesMap[e]}).join(" ")},t}();e.CssClasses=s;e.isComponentStateless=function(t){return"function"===typeof t&&!(t.prototype&&t.prototype.isReactComponent)||"object"===typeof t&&t.$$typeof===("function"===typeof Symbol&&Symbol.for?Symbol.for("react.memo"):60115)};var l=null!=a.default.createRoot&&null!=a.default.flushSync,u=!1;e.runWithoutFlushSync=function(t){return u||setTimeout(function(){return u=!1},0),u=!0,t()};e.agFlushSync=function(t,e){l&&t&&!u?a.default.flushSync(e):e()},e.getNextValueIfDifferent=function(t,e,o){if(null==e||null==t)return e;if(t===e||0===e.length&&0===t.length)return t;if(o||0===t.length&&e.length>0||t.length>0&&0===e.length)return e;for(var n=[],i=[],a=new Map,s=new Map,l=0;l<e.length;l++){var u=e[l];s.set(u.getInstanceId(),u)}for(l=0;l<t.length;l++)u=t[l],a.set(u.getInstanceId(),u),s.has(u.getInstanceId())&&n.push(u);for(l=0;l<e.length;l++){var c=(u=e[l]).getInstanceId();a.has(c)||i.push(u)}return n.length===t.length&&0===i.length?t:0===n.length&&i.length===e.length?e:r(r([],n),i)}},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.CustomComponentWrapper=e.addOptionalMethods=void 0;var a=o(4),s=i(o(63)),l=o(28);function u(t,e,o){t.forEach(function(t){var n=e[t];n&&(o[t]=n)})}e.addOptionalMethods=u;var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.awaitUpdateCallback=new a.AgPromise(function(t){e.resolveUpdateCallback=t}),e.wrapperComponent=s.default,e}return n(e,t),e.prototype.init=function(e){return this.sourceParams=e,t.prototype.init.call(this,this.getProps())},e.prototype.addMethod=function(){},e.prototype.getInstance=function(){var t=this;return this.instanceCreated.then(function(){return t.componentInstance})},e.prototype.getFrameworkComponentInstance=function(){return this},e.prototype.createElement=function(e,o){var n=this;return t.prototype.createElement.call(this,this.wrapperComponent,{initialProps:o,CustomComponentClass:e,setMethods:function(t){return n.setMethods(t)},addUpdateCallback:function(t){n.updateCallback=function(){return t(n.getProps()),new a.AgPromise(function(t){setTimeout(function(){t()})})},n.resolveUpdateCallback()}})},e.prototype.setMethods=function(t){this.providedMethods=t,u(this.getOptionalMethods(),this.providedMethods,this)},e.prototype.getOptionalMethods=function(){return[]},e.prototype.getProps=function(){return r(r({},this.sourceParams),{key:this.key,ref:this.ref})},e.prototype.refreshProps=function(){var t=this;return this.updateCallback?this.updateCallback():new a.AgPromise(function(e){return t.awaitUpdateCallback.then(function(){t.updateCallback().then(function(){return e()})})})},e}(l.ReactComponent);e.CustomComponentWrapper=c},function(t,e,o){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=o(37)},function(t,e,o){"use strict";(function(t){var n=o(0),r=o(2),i=o(16);function a(t){return n.a.isPlainObject(t)||n.a.isArray(t)}function s(t){return n.a.endsWith(t,"[]")?t.slice(0,-2):t}function l(t,e,o){return t?t.concat(e).map(function(t,e){return t=s(t),!o&&e?"["+t+"]":t}).join(o?".":""):e}const u=n.a.toFlatObject(n.a,{},null,function(t){return/^is[A-Z]/.test(t)});e.a=function(e,o,c){if(!n.a.isObject(e))throw new TypeError("target must be an object");o=o||new(i.a||FormData);const p=(c=n.a.toFlatObject(c,{metaTokens:!0,dots:!1,indexes:!1},!1,function(t,e){return!n.a.isUndefined(e[t])})).metaTokens,d=c.visitor||v,h=c.dots,f=c.indexes,g=(c.Blob||"undefined"!==typeof Blob&&Blob)&&n.a.isSpecCompliantForm(o);if(!n.a.isFunction(d))throw new TypeError("visitor must be a function");function y(e){if(null===e)return"";if(n.a.isDate(e))return e.toISOString();if(!g&&n.a.isBlob(e))throw new r.a("Blob is not supported. Use a Buffer instead.");return n.a.isArrayBuffer(e)||n.a.isTypedArray(e)?g&&"function"===typeof Blob?new Blob([e]):t.from(e):e}function v(t,e,r){let i=t;if(t&&!r&&"object"===typeof t)if(n.a.endsWith(e,"{}"))e=p?e:e.slice(0,-2),t=JSON.stringify(t);else if(n.a.isArray(t)&&function(t){return n.a.isArray(t)&&!t.some(a)}(t)||(n.a.isFileList(t)||n.a.endsWith(e,"[]"))&&(i=n.a.toArray(t)))return e=s(e),i.forEach(function(t,r){!n.a.isUndefined(t)&&null!==t&&o.append(!0===f?l([e],r,h):null===f?e:e+"[]",y(t))}),!1;return!!a(t)||(o.append(l(r,e,h),y(t)),!1)}const m=[],C=Object.assign(u,{defaultVisitor:v,convertValue:y,isVisitable:a});if(!n.a.isObject(e))throw new TypeError("data must be an object");return function t(e,r){if(!n.a.isUndefined(e)){if(-1!==m.indexOf(e))throw Error("Circular reference detected in "+r.join("."));m.push(e),n.a.forEach(e,function(e,i){!0===(!(n.a.isUndefined(e)||null===e)&&d.call(o,e,n.a.isString(i)?i.trim():i,r,C))&&t(e,r?r.concat(i):[i])}),m.pop()}}(e),o}}).call(this,o(49).Buffer)},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createSyncJsComp=e.showJsComp=void 0;e.showJsComp=function(t,e,o,r){if(t&&!t.componentFromFramework&&!e.isDestroyed()){var i=t.newAgStackInstance();if(i){var a,s,l=!1;return i.then(function(t){l?e.destroyBean(t):(s=(a=t).getGui(),o.appendChild(s),n(r,a))}),function(){l=!0,a&&(s&&s.parentElement&&s.parentElement.removeChild(s),e.destroyBean(a),r&&n(r,void 0))}}}};var n=function(t,e){t&&(t instanceof Function?t(e):t.current=e)};e.createSyncJsComp=function(t){var e=t.newAgStackInstance();if(e)return e.resolveNow(null,function(t){return t})}},function(t,e){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(n){"object"===typeof window&&(o=window)}t.exports=o},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dontSetMe=function(t,e,o){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(o," - do not set this, set it on the child."))},e.findInArray=function(t,e){for(let o=0,n=t.length;o<n;o++)if(e.apply(e,[t[o],o,t]))return t[o]},e.int=function(t){return parseInt(t,10)},e.isFunction=function(t){return"function"===typeof t||"[object Function]"===Object.prototype.toString.call(t)},e.isNum=function(t){return"number"===typeof t&&!isNaN(t)}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CustomContext=void 0;var n=o(1);e.CustomContext=n.createContext({setMethods:function(){}})},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.warnReactiveCustomComponents=e.getInstance=void 0;var n=o(4);e.getInstance=function(t,e){var o,r,i;(null!==(i=null===(r=null===(o=t)||void 0===o?void 0:o.getInstance)||void 0===r?void 0:r.call(o))&&void 0!==i?i:n.AgPromise.resolve(void 0)).then(function(t){return e(t)})},e.warnReactiveCustomComponents=function(){n._.warnOnce("Using custom components without `reactiveCustomComponents = true` is deprecated.")}},function(t,e,o){"use strict";function n(t,e){return function(){return t.apply(e,arguments)}}o.d(e,"a",function(){return n})},function(t,e,o){"use strict";e.a=null},function(t,e,o){"use strict";var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},o=0;o<10;o++)e["_"+String.fromCharCode(o)]=o;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(r){return!1}}()?Object.assign:function(t,e){for(var o,a,s=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),l=1;l<arguments.length;l++){for(var u in o=Object(arguments[l]))r.call(o,u)&&(s[u]=o[u]);if(n){a=n(o);for(var c=0;c<a.length;c++)i.call(o,a[c])&&(s[a[c]]=o[a[c]])}}return s}},function(t,e,o){var n=Array.prototype.slice,r=o(40),i=o(41),a=t.exports=function(t,e,o){return o||(o={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?o.strict?t===e:t==e:function(t,e,o){var u,c;if(s(t)||s(e))return!1;if(t.prototype!==e.prototype)return!1;if(i(t))return!!i(e)&&(t=n.call(t),e=n.call(e),a(t,e,o));if(l(t)){if(!l(e))return!1;if(t.length!==e.length)return!1;for(u=0;u<t.length;u++)if(t[u]!==e[u])return!1;return!0}try{var p=r(t),d=r(e)}catch(h){return!1}if(p.length!=d.length)return!1;for(p.sort(),d.sort(),u=p.length-1;u>=0;u--)if(p[u]!=d[u])return!1;for(u=p.length-1;u>=0;u--)if(c=p[u],!a(t[c],e[c],o))return!1;return typeof t===typeof e}(t,e,o))};function s(t){return null===t||void 0===t}function l(t){return!(!t||"object"!==typeof t||"number"!==typeof t.length)&&("function"===typeof t.copy&&"function"===typeof t.slice&&!(t.length>0&&"number"!==typeof t[0]))}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addClassName=u,e.addEvent=function(t,e,o,n){if(!t)return;const r={capture:!0,...n};t.addEventListener?t.addEventListener(e,o,r):t.attachEvent?t.attachEvent("on"+e,o):t["on"+e]=o},e.addUserSelectStyles=function(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||((e=t.createElement("style")).type="text/css",e.id="react-draggable-style-el",e.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",e.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",t.getElementsByTagName("head")[0].appendChild(e));t.body&&u(t.body,"react-draggable-transparent-selection")},e.createCSSTransform=function(t,e){const o=l(t,e,"px");return{[(0,r.browserPrefixToKey)("transform",r.default)]:o}},e.createSVGTransform=function(t,e){return l(t,e,"")},e.getTouch=function(t,e){return t.targetTouches&&(0,n.findInArray)(t.targetTouches,t=>e===t.identifier)||t.changedTouches&&(0,n.findInArray)(t.changedTouches,t=>e===t.identifier)},e.getTouchIdentifier=function(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier},e.getTranslation=l,e.innerHeight=function(t){let e=t.clientHeight;const o=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,n.int)(o.paddingTop),e-=(0,n.int)(o.paddingBottom)},e.innerWidth=function(t){let e=t.clientWidth;const o=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,n.int)(o.paddingLeft),e-=(0,n.int)(o.paddingRight)},e.matchesSelector=s,e.matchesSelectorAndParentsTo=function(t,e,o){let n=t;do{if(s(n,e))return!0;if(n===o)return!1;n=n.parentNode}while(n);return!1},e.offsetXYFromParent=function(t,e,o){const n=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),r=(t.clientX+e.scrollLeft-n.left)/o,i=(t.clientY+e.scrollTop-n.top)/o;return{x:r,y:i}},e.outerHeight=function(t){let e=t.clientHeight;const o=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,n.int)(o.borderTopWidth),e+=(0,n.int)(o.borderBottomWidth)},e.outerWidth=function(t){let e=t.clientWidth;const o=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,n.int)(o.borderLeftWidth),e+=(0,n.int)(o.borderRightWidth)},e.removeClassName=c,e.removeEvent=function(t,e,o,n){if(!t)return;const r={capture:!0,...n};t.removeEventListener?t.removeEventListener(e,o,r):t.detachEvent?t.detachEvent("on"+e,o):t["on"+e]=null},e.removeUserSelectStyles=function(t){if(!t)return;try{if(t.body&&c(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&"Caret"!==e.type&&e.removeAllRanges()}}catch(e){}};var n=o(12),r=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var o=i(e);if(o&&o.has(t))return o.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=r?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=t[a]}n.default=t,o&&o.set(t,n);return n}(o(57));function i(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return(i=function(t){return t?o:e})(t)}let a="";function s(t,e){return a||(a=(0,n.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(e){return(0,n.isFunction)(t[e])})),!!(0,n.isFunction)(t[a])&&t[a](e)}function l(t,e,o){let{x:n,y:r}=t,i="translate(".concat(n).concat(o,",").concat(r).concat(o,")");if(e){const t="".concat("string"===typeof e.x?e.x:e.x+o),n="".concat("string"===typeof e.y?e.y:e.y+o);i="translate(".concat(t,", ").concat(n,")")+i}return i}function u(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function c(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(1);e.default=function(t,e){n.useEffect(function(){var o=e.current;if(o){var n=o.parentElement;if(n){var r=document.createComment(t);return n.insertBefore(r,o),function(){n.removeChild(r)}}}},[t])}},function(t,e,o){"use strict";o.r(e);var n=o(3),r=o(1),i=function(){return(i=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},a={onResize:"resize",onDblClick:"dblclick",onClick:"click",onMouseMove:"mousemove",onMouseOut:"mouseout",onMoveStart:"movestart",onMove:"move",onMoveEnd:"moveend",onMouseUp:"mouseup",onMouseDown:"mousedown",onDragStart:"dragstart",onDrag:"drag",onDragEnd:"dragend",onZoomStart:"zoomstart",onZoom:"zoom",onZoomEnd:"zoomend",onPitch:"pitch",onPitchStart:"pitchstart",onPitchEnd:"pitchend",onWebGlContextLost:"webglcontextlost",onWebGlContextRestored:"webglcontextrestored",onRemove:"remove",onContextMenu:"contextmenu",onRender:"render",onError:"error",onSourceData:"sourcedata",onDataLoading:"dataloading",onStyleDataLoading:"styledataloading",onStyleImageMissing:"styleimagemissing",onTouchCancel:"touchcancel",onData:"data",onSourceDataLoading:"sourcedataloading",onTouchMove:"touchmove",onTouchEnd:"touchend",onTouchStart:"touchstart",onStyleData:"styledata",onBoxZoomStart:"boxzoomstart",onBoxZoomEnd:"boxzoomend",onBoxZoomCancel:"boxzoomcancel",onRotateStart:"rotatestart",onRotate:"rotate",onRotateEnd:"rotateend"},s=function(t,e,o){return Object.keys(t).reduce(function(n,r){var i=e[r];if(i){var a=function(t){i(o,t)};o.on(t[r],a),n[r]=a}return n},{})},l=function(){return(l=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},u=r.createContext(void 0);function c(t){return function(e){return r.createElement(u.Consumer,null,function(o){return r.createElement(t,l({map:o},e))})}}var p=o(8),d=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),h=function(){return(h=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},f=o(18),g=[11],y=[-.2416815,51.5285582],v=function(t){var e,l=t.accessToken,c=t.apiUrl,v=t.minZoom,m=void 0===v?0:v,C=t.maxZoom,_=void 0===C?20:C,w=t.hash,b=void 0!==w&&w,S=t.preserveDrawingBuffer,E=void 0!==S&&S,x=t.scrollZoom,T=void 0===x||x,O=t.interactive,R=void 0===O||O,P=t.dragRotate,A=void 0===P||P,D=t.pitchWithRotate,M=void 0===D||D,I=t.attributionControl,L=void 0===I||I,F=t.customAttribution,N=t.logoPosition,k=void 0===N?"bottom-left":N,G=t.renderWorldCopies,V=void 0===G||G,B=t.trackResize,z=void 0===B||B,H=t.touchZoomRotate,j=void 0===H||H,U=t.doubleClickZoom,W=void 0===U||U,K=t.keyboard,q=void 0===K||K,Y=t.dragPan,Z=void 0===Y||Y,X=t.boxZoom,J=void 0===X||X,Q=t.refreshExpiredTiles,$=void 0===Q||Q,tt=t.failIfMajorPerformanceCaveat,et=void 0!==tt&&tt,ot=t.bearingSnap,nt=void 0===ot?7:ot,rt=t.injectCSS,it=void 0===rt||rt,at=t.transformRequest;return it&&o(42),(e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={map:void 0,ready:!1},e.listeners={},e._isMounted=!0,e.calcCenter=function(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]},e.setRef=function(t){e.container=t},e}return d(e,t),e.prototype.componentDidMount=function(){var t=this,e=this.props,o=e.style,r=e.onStyleLoad,i=e.center,u=e.pitch,p=e.zoom,d=e.fitBounds,h=e.fitBoundsOptions,f=e.bearing,g=e.maxBounds;if(n.accessToken=l,c&&(n.config.API_URL=c),!Array.isArray(p))throw new Error("zoom need to be an array type of length 1 for reliable update");var v={preserveDrawingBuffer:E,hash:b,zoom:p[0],minZoom:m,maxZoom:_,maxBounds:g,container:this.container,center:d&&i===y?this.calcCenter(d):i,style:o,scrollZoom:T,attributionControl:L,customAttribution:F,interactive:R,dragRotate:A,pitchWithRotate:M,renderWorldCopies:V,trackResize:z,touchZoomRotate:j,doubleClickZoom:W,keyboard:q,dragPan:Z,boxZoom:J,refreshExpiredTiles:$,logoPosition:k,bearingSnap:nt,failIfMajorPerformanceCaveat:et,transformRequest:at};if(f){if(!Array.isArray(f))throw new Error("bearing need to be an array type of length 1 for reliable update");v.bearing=f[0]}if(u){if(!Array.isArray(u))throw new Error("pitch need to be an array type of length 1 for reliable update");v.pitch=u[0]}var C=new n.Map(v);this.setState({map:C}),d&&C.fitBounds(d,h),C.on("load",function(e){t._isMounted&&t.setState({ready:!0}),r&&r(C,e)}),this.listeners=s(a,this.props,C)},e.prototype.componentWillUnmount=function(){var t=this.state.map;this._isMounted=!1,t&&t.remove()},e.prototype.componentWillReceiveProps=function(t){var e=this.state.map;if(!e)return null;this.listeners=function(t,e,o){Object.keys(a).filter(function(o){return t[o]&&"function"!==typeof e[o]}).forEach(function(e){o.off(a[e],t[e]),delete t[e]});var n=Object.keys(a).filter(function(o){return!t[o]&&"function"===typeof e[o]}).reduce(function(t,e){return t[e]=a[e],t},{}),r=s(n,e,o);return i({},t,r)}(this.listeners,t,e);var o=e.getCenter(),n=e.getZoom(),r=e.getBearing(),l=e.getPitch(),u=this.props.zoom!==t.zoom&&(t.zoom&&t.zoom[0])!==n,c=this.props.center!==t.center&&((t.center&&t.center[0])!==o.lng||(t.center&&t.center[1])!==o.lat),p=this.props.bearing!==t.bearing&&(t.bearing&&t.bearing[0])!==r,d=this.props.pitch!==t.pitch&&(t.pitch&&t.pitch[0])!==l;if(t.maxBounds&&this.props.maxBounds!==t.maxBounds&&e.setMaxBounds(t.maxBounds),t.fitBounds){var g=this.props.fitBounds;g===t.fitBounds&&t.fitBounds.length===(g&&g.length)&&!g.filter(function(e,o){var n=t.fitBounds&&t.fitBounds[o];return e[0]!==(n&&n[0])||e[1]!==(n&&n[1])})[0]&&f(this.props.fitBoundsOptions,t.fitBoundsOptions)||e.fitBounds(t.fitBounds,t.fitBoundsOptions)}if(u||c||p||d){var y=t.movingMethod||"flyTo",v=t.flyToOptions,m=t.animationOptions;e[y](h({},m,v,{zoom:u&&t.zoom?t.zoom[0]:n,center:c?t.center:o,bearing:p?t.bearing:r,pitch:d?t.pitch:l}))}return f(this.props.style,t.style)||e.setStyle(t.style),null},e.prototype.render=function(){var t=this.props,e=t.containerStyle,o=t.className,n=t.children,i=t.renderChildrenInPortal,a=this.state,s=a.ready,l=a.map;if(i){var c=s&&l&&"function"===typeof l.getCanvasContainer?l.getCanvasContainer():void 0;return r.createElement(u.Provider,{value:l},r.createElement("div",{ref:this.setRef,className:o,style:h({},e)},s&&c&&Object(p.createPortal)(n,c)))}return r.createElement(u.Provider,{value:l},r.createElement("div",{ref:this.setRef,className:o,style:h({},e)},s&&n))},e}(r.Component)).defaultProps={onStyleLoad:function(t,e){return null},center:y,zoom:g,bearing:0,movingMethod:"flyTo",pitch:0,containerStyle:{textAlign:"left"}},e},m=function(t,e){var o={};return Array.from(new Set(Object.keys(t).concat(Object.keys(e)))).map(function(n){t[n]!==e[n]&&(o[n]=e[n])}),o},C=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),_=function(){return(_=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},w=o(18),b={mousemove:"onMouseMove",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousedown:"onMouseDown",mouseup:"onMouseUp",click:"onClick"},S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.source=_({type:"geojson"},e.props.geoJSONSourceOptions,{data:{type:"FeatureCollection",features:[]}}),e.geometry=function(t){switch(e.props.type){case"symbol":case"circle":return{type:"Point",coordinates:t};case"fill":return t.length>1?{type:"MultiPolygon",coordinates:t}:{type:"Polygon",coordinates:t};case"line":return{type:"LineString",coordinates:t};default:return{type:"Point",coordinates:t}}},e.makeFeature=function(t,o){return{type:"Feature",geometry:e.geometry(t.coordinates),properties:_({},t.properties,{id:o})}},e.initialize=function(){var t=e.props,o=t.type,n=t.layout,r=t.paint,i=t.sourceId,a=t.before,s=t.images,l=t.id,u=t.metadata,c=t.sourceLayer,p=t.minZoom,d=t.maxZoom,h=t.filter,f=e.props.map,g={id:l,source:i||l,type:o,layout:n,paint:r,metadata:u};(c&&(g["source-layer"]=c),p&&(g.minzoom=p),d&&(g.maxzoom=d),h&&(g.filter=h),s)&&(Array.isArray(s[0])?s:[s]).filter(function(t){return!f.hasImage(t[0])}).forEach(function(t){f.addImage(t[0],t[1],t[2])});i||f.getSource(l)||f.addSource(l,e.source),f.getLayer(l)||f.addLayer(g,a),Object.entries(b).forEach(function(t){var o=t[0],n=t[1],r=e.props[n];r&&f.on(o,l,r)})},e.onStyleDataChange=function(){e.props.map.getLayer(e.props.id)||(e.initialize(),e.forceUpdate())},e.getChildren=function(){var t=e.props.children;return t?Array.isArray(t)?t.reduce(function(t,e){return t.concat(e)},[]):[t]:[]},e}return C(e,t),e.prototype.componentWillMount=function(){var t=this.props.map;this.initialize(),t.on("styledata",this.onStyleDataChange)},e.prototype.componentWillUnmount=function(){var t=this,e=this.props.map,o=this.props,n=o.images,r=o.id;e&&e.getStyle()&&(e.off("styledata",this.onStyleDataChange),Object.entries(b).forEach(function(o){var n=o[0],i=o[1],a=t.props[i];a&&e.off(n,r,a)}),e.getLayer(r)&&e.removeLayer(r),this.props.sourceId||e.removeSource(r),n&&(Array.isArray(n[0])?n:[n]).map(function(t){var e=t[0];t.slice(1);return e}).forEach(e.removeImage.bind(e)))},e.prototype.componentWillReceiveProps=function(t){var e=this,o=this.props,n=o.paint,r=o.layout,i=o.before,a=o.filter,s=o.id,l=o.minZoom,u=o.maxZoom,c=this.props.map;if(!w(t.paint,n)){var p=m(n,t.paint);Object.keys(p).forEach(function(t){c.setPaintProperty(s,t,p[t])})}if(!w(t.layout,r)){var d=m(r,t.layout);Object.keys(d).forEach(function(t){c.setLayoutProperty(s,t,d[t])})}t.filter&&a&&!w(t.filter,a)&&c.setFilter(s,t.filter||[]),i!==t.before&&c.moveLayer(s,t.before),l===t.minZoom&&u===t.maxZoom||c.setLayerZoomRange(s,t.minZoom,t.maxZoom),Object.entries(b).forEach(function(o){var n=o[0],r=o[1],i=e.props[r],a=t[r];i!==a&&(i&&c.off(n,s,i),a&&c.on(n,s,a))})},e.prototype.render=function(){var t=this,e=this.props.map,o=this.props,n=o.sourceId,r=o.draggedChildren,i=this.getChildren();if(r){var a=r.map(function(t){return t.key});i=i.map(function(t){var e=a.indexOf(t.key);return-1!==e?r[e]:t})}var s=i.map(function(e,o){var n=e.props;return t.makeFeature(n,o)}).filter(Boolean),l=e.getSource(n||this.props.id);return l&&!n&&l.setData&&l.setData({type:"FeatureCollection",features:s}),null},e.defaultProps={type:"symbol",layout:{},paint:{}},e}(r.Component),E=0,x=function(){return E+=1},T=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),O=function(){return(O=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};var R=function(t){return function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.hover=[],t.draggedChildren=void 0,t.id=t.props.id||"layer-"+x(),t.getChildren=function(){return[].concat(t.props.children).filter(function(t){return"undefined"!==typeof t})},t.getChildFromId=function(t,e){return t[e]},t.areFeaturesDraggable=function(e,o){return void 0===o&&(o=t.hover),!!o.map(function(o){return!!t.getChildFromId(e,o)&&t.getChildFromId(e,o).props.draggable}).filter(Boolean).length},t.onClick=function(e){var o=e.features,n=t.getChildren(),r=t.props.map;o&&o.forEach(function(o){var i=o.properties.id;if(n){var a=t.getChildFromId(n,i),s=a&&a.props.onClick;s&&s(O({},e,{feature:o,map:r}))}})},t.onMouseEnter=function(e){var o=t.getChildren(),n=t.props.map;t.hover=[],e.features.forEach(function(r){var i=r.properties.id,a=t.getChildFromId(o,i);t.hover.push(i);var s=a&&a.props.onMouseEnter;s&&s(O({},e,{feature:r,map:n}))}),t.areFeaturesDraggable(o)&&n.dragPan.disable()},t.onMouseLeave=function(e){var o=t.getChildren(),n=t.props.map;t.areFeaturesDraggable(o)&&n.dragPan.enable(),t.hover.forEach(function(r){var i=t.getChildFromId(o,r),a=i&&i.props.onMouseLeave;a&&a(O({},e,{map:n}))}),t.draggedChildren||(t.hover=[])},t.onMouseDown=function(){t.hover.length&&t.onFeatureDown("mousedown")},t.onTouchStart=function(e){t.hover=e.features.map(function(t){return t.properties.id}),t.hover.length&&t.onFeatureDown("touchstart")},t.onFeatureDown=function(e){var o="mousedown"===e?"mousemove":"touchmove",n="mousedown"===e?"mouseup":"touchend",r=t.props.map;r.once(o,t.onFeatureDragStart),r.on(o,t.onFeatureDrag),r.once(n,function(e){r.off(o,t.onFeatureDragStart),r.off(o,t.onFeatureDrag),t.onFeatureDragEnd(e)})},t.onFeatureDragStart=function(e){var o=t.props.map,n=t.getChildren();t.hover.forEach(function(r){var i=t.getChildFromId(n,r);if(!i||i.props.draggable){var a=i&&i.props.onDragStart;a&&a(O({},e,{map:o}))}})},t.onFeatureDrag=function(e){var o=t.getChildren(),n=t.props.map,i=e.lngLat,a=i.lng,s=i.lat;t.draggedChildren=[],t.hover.forEach(function(i){var l=t.getChildFromId(o,i),u=l&&l.props.onDrag;l&&l.props.draggable&&(t.draggedChildren.push(r.cloneElement(l,{coordinates:[a,s]})),u&&u(O({},e,{map:n})))}),t.forceUpdate()},t.onFeatureDragEnd=function(e){var o=t.props.map,n=t.getChildren();t.hover.forEach(function(r){var i=t.getChildFromId(n,r),a=i&&i.props.onDragEnd;a&&i.props.draggable&&t.draggedChildren&&a(O({},e,{map:o}))}),t.draggedChildren=void 0},t}return T(o,e),o.prototype.componentWillMount=function(){var t=this.props.map;t.on("click",this.id,this.onClick),t.on("mouseenter",this.id,this.onMouseEnter),t.on("mouseleave",this.id,this.onMouseLeave),t.on("mousedown",this.id,this.onMouseDown),t.on("touchstart",this.id,this.onTouchStart)},o.prototype.componentWillUnmount=function(){var t=this.props.map;t.off("click",this.onClick),t.off("mouseenter",this.onMouseEnter),t.off("mouseleave",this.onMouseLeave),t.off("mousedown",this.onMouseDown),t.off("touchstart",this.onTouchStart)},o.prototype.render=function(){return r.createElement(t,O({},this.props,{id:this.id,map:this.props.map,draggedChildren:this.draggedChildren}))},o}(r.Component)},P=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),A=function(){return(A=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},D=o(18),M=["symbol","line","fill","fill-extrusion","circle"],I=function(t){return t.replace(/(?:^\w|[A-Z]|\b\w)/g,function(t,e){return 0===e?t.toLowerCase():t.toUpperCase()}).replace(/[\s+]|-/g,"")},L={mousemove:"OnMouseMove",mouseenter:"OnMouseEnter",mouseleave:"OnMouseLeave",mousedown:"OnMouseDown",mouseup:"OnMouseUp",click:"OnClick"},F=c(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id=e.props.id||"geojson-"+x(),e.source=A({type:"geojson"},e.props.sourceOptions,{data:e.props.data}),e.layerIds=[],e.buildLayerId=function(t){return e.id+"-"+t},e.createLayer=function(t){var o=e.props,n=o.before,r=o.layerOptions,i=o.map,a=e.buildLayerId(t);e.layerIds.push(a);var s=e.props[I(t)+"Paint"]||{},l=Object.keys(s).length?"visible":"none",u=e.props[I(t)+"Layout"]||{visibility:l};i.addLayer(A({id:a,source:e.id,type:t,paint:s,layout:u},r),n),e.mapLayerMouseHandlers(t)},e.mapLayerMouseHandlers=function(t){var o=e.props.map,n=e.buildLayerId(t);Object.keys(L).forEach(function(r){var i=e.props[""+I(t)+L[r]]||null;i&&o.on(r,n,i)})},e.onStyleDataChange=function(){e.props.map.getSource(e.id)||(e.unbind(),e.initialize(),e.forceUpdate())},e.isGeoJSONSource=function(t){return!!t&&"function"===typeof t.setData},e}return P(e,t),e.prototype.initialize=function(){this.props.map.addSource(this.id,this.source),this.createLayer("symbol"),this.createLayer("line"),this.createLayer("fill"),this.createLayer("fill-extrusion"),this.createLayer("circle")},e.prototype.unbind=function(){var t=this,e=this.props.map;if(e.getSource(this.id)){var o=e.getStyle().layers;o&&o.filter(function(e){return e.source===t.id}).forEach(function(t){return e.removeLayer(t.id)}),e.removeSource(this.id)}M.forEach(function(o){Object.keys(L).forEach(function(n){var r=I(o)+L[n];t.props[r]&&e.off(n,t.buildLayerId(o),t.props[r])})}),this.layerIds.forEach(function(t){e.getLayer(t)&&e.removeLayer(t)})},e.prototype.componentWillMount=function(){var t=this.props.map;this.initialize(),t.on("styledata",this.onStyleDataChange)},e.prototype.componentWillUnmount=function(){var t=this.props.map;t&&t.getStyle()&&(t.off("styledata",this.onStyleDataChange),this.unbind())},e.prototype.componentWillReceiveProps=function(t){var e=this,o=this.props,n=o.data,r=o.before,i=o.layerOptions,a=o.map,s=a.getSource(this.id);if(this.isGeoJSONSource(s)){t.data!==n&&(s.setData(t.data),this.source=A({type:"geojson"},t.sourceOptions,{data:t.data}));var l=t.layerOptions&&i&&!D(t.layerOptions.filter,i.filter);M.forEach(function(o){var n=e.buildLayerId(o);t.layerOptions&&l&&a.setFilter(n,t.layerOptions.filter||[]);var i=I(o)+"Paint";if(!D(t[i],e.props[i])){var s=m(e.props[i],t[i]);Object.keys(s).forEach(function(t){a.setPaintProperty(n,t,s[t])})}var u=I(o)+"Layout";if(!D(t[u],e.props[u])){var c=m(e.props[u],t[u]);Object.keys(c).forEach(function(t){a.setLayoutProperty(n,t,c[t])})}Object.keys(L).forEach(function(r){var i=I(o)+L[r];t[i]!==e.props[i]&&(e.props[i]&&a.off(r,n,e.props[i]),t[i]&&a.on(r,n,t[i]))}),r!==t.before&&a.moveLayer(n,t.before)})}},e.prototype.render=function(){return null},e}(r.Component)),N=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return N(e,t),e.prototype.render=function(){return null},e}(r.Component),G=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),V=function(){return(V=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},B={position:"absolute",zIndex:10,display:"flex",flexDirection:"column",boxShadow:"0px 1px 4px rgba(0, 0, 0, .3)",border:"1px solid rgba(0, 0, 0, 0.1)"},z={"top-right":{top:10,right:10,bottom:"auto",left:"auto"},"top-left":{top:10,left:10,bottom:"auto",right:"auto"},"bottom-right":{bottom:10,right:10,top:"auto",left:"auto"},"bottom-left":{bottom:10,left:10,top:"auto",right:"auto"}},H={backgroundColor:"#f9f9f9",opacity:.95,transition:"background-color 0.16s ease-out",cursor:"pointer",border:0,height:26,width:26,backgroundImage:"url('https://api.mapbox.com/mapbox.js/v2.4.0/images/icons-000000@2x.png')",backgroundPosition:"0px 0px",backgroundSize:"26px 260px",outline:0},j={backgroundColor:"#fff",opacity:1},U={borderBottom:"1px solid rgba(0, 0, 0, 0.1)",borderTopLeftRadius:2,borderTopRightRadius:2},W={backgroundPosition:"0px -26px",borderBottomLeftRadius:2,borderBottomRightRadius:2},K=[0,1],q=K[0],Y=K[1],Z=Object.keys(z),X=c(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={hover:void 0},e.onMouseOut=function(){e.setState({hover:void 0})},e.plusOver=function(){q!==e.state.hover&&e.setState({hover:q})},e.minusOver=function(){Y!==e.state.hover&&e.setState({hover:Y})},e.onClickPlus=function(){e.props.onControlClick(e.props.map,e.props.zoomDiff)},e.onClickMinus=function(){e.props.onControlClick(e.props.map,-e.props.zoomDiff)},e}return G(e,t),e.prototype.render=function(){var t=this.props,e=t.position,o=t.style,n=t.className,i=t.tabIndex,a=this.state.hover,s=V({},H,U,a===q?j:{}),l=V({},H,W,a===Y?j:{});return r.createElement("div",{className:n,tabIndex:i,style:V({},B,z[e],o)},r.createElement("button",{id:"zoomIn",type:"button",style:s,"aria-label":"Zoom in",onMouseOver:this.plusOver,onMouseOut:this.onMouseOut,onClick:this.onClickPlus}),r.createElement("button",{id:"zoomOut",type:"button",style:l,"aria-label":"Zoom out",onMouseOver:this.minusOver,onMouseOut:this.onMouseOut,onClick:this.onClickMinus}))},e.defaultProps={position:Z[0],zoomDiff:.5,onControlClick:function(t,e){t.zoomTo(t.getZoom()+e)}},e}(r.Component)),J=["center","top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"],Q={center:"translate(-50%, -50%)",top:"translate(-50%, 0)",left:"translate(0, -50%)",right:"translate(-100%, -50%)",bottom:"translate(-50%, -100%)","top-left":"translate(0, 0)","top-right":"translate(-100%, 0)","bottom-left":"translate(0, -100%)","bottom-right":"translate(-100%, -100%)"},$={offsetWidth:0,offsetHeight:0},tt=[0,0],et=function(t){if(!t)return et(new n.Point(0,0));if("number"===typeof t){var e=Math.round(Math.sqrt(.5*Math.pow(t,2)));return{center:new n.Point(t,t),top:new n.Point(0,t),bottom:new n.Point(0,-t),left:new n.Point(t,0),right:new n.Point(-t,0),"top-left":new n.Point(e,e),"top-right":new n.Point(-e,e),"bottom-left":new n.Point(e,-e),"bottom-right":new n.Point(-e,-e)}}return t instanceof n.Point||Array.isArray(t)?J.reduce(function(e,o){return e[o]=n.Point.convert(t),e},{}):J.reduce(function(e,o){return e[o]=n.Point.convert(t[o]||tt),e},{})},ot=function(t,e,o){var r=function(t,e){return t.project(n.LngLat.convert(e))}(e,t.coordinates),i=et(t.offset),a=t.anchor||function(t,e,o,n){var r=void 0===n?$:n,i=r.offsetHeight,a=r.offsetWidth,s=[];return o.y+e.bottom.y-i<0?s=[J[1]]:o.y+e.top.y+i>t.transform.height&&(s=[J[2]]),o.x<a/2?s.push(J[3]):o.x>t.transform.width-a/2&&s.push(J[4]),0===s.length?J[2]:s.join("-")}(e,i,r,o);return{anchor:a,position:r,offset:i[a]}},nt=function(t){return t?"translate("+t.x.toFixed(0)+"px, "+t.y.toFixed(0)+"px)":""},rt=function(t){var e=t.anchor,o=t.position,n=t.offset,r=[];return o&&r.push(nt(o)),n&&void 0!==n.x&&void 0!==n.y&&r.push(nt(n)),e&&r.push(Q[e]),r},it=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),at=function(){return(at=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},st={zIndex:3},lt=c(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.container=void 0,e.prevent=!1,e.state={},e.setContainer=function(t){t&&(e.container=t)},e.handleMapMove=function(){e.prevent||e.setState(ot(e.props,e.props.map,e.container))},e}return it(e,t),e.prototype.componentDidMount=function(){this.props.map.on("move",this.handleMapMove),this.handleMapMove()},e.prototype.havePropsChanged=function(t,e){return t.coordinates[0]!==e.coordinates[0]||t.coordinates[1]!==e.coordinates[1]||t.offset!==e.offset||t.anchor!==e.anchor},e.prototype.componentWillReceiveProps=function(t){this.havePropsChanged(this.props,t)&&this.setState(ot(t,this.props.map,this.container))},e.prototype.componentWillUnmount=function(){var t=this.props.map;this.prevent=!0,t.off("move",this.handleMapMove)},e.prototype.render=function(){var t=this.props,e=t.style,o=t.children,n=t.className,i=t.onClick,a=t.onDoubleClick,s=t.onMouseEnter,l=t.onMouseLeave,u=t.onScroll,c=t.onWheel,p=t.type,d=t.tabIndex,h=this.state.anchor,f=at({},st,e,{transform:rt(this.state).join(" ")}),g=h&&"popup"===p?"mapboxgl-popup-anchor-"+h:"";return r.createElement("div",{className:n+" "+g,onClick:i,onDoubleClick:a,onMouseEnter:s,onMouseLeave:l,onScroll:u,onWheel:c,style:f,ref:this.setContainer,tabIndex:d},o)},e.defaultProps={offset:0,onClick:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t}},e}(r.Component)),ut=function(t,e){return e?e.split(" ").concat(t).join(" "):t.join(" ")},ct=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),pt=function(){return(pt=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},dt=["mapboxgl-popup"],ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ct(e,t),e.prototype.render=function(){var t=this.props,e=t.children,o=t.className,n=pt({},this.props,{children:void 0}),i=ut(dt,o);return r.createElement(lt,pt({},n,{type:"popup",className:i}),r.createElement("div",{className:"mapboxgl-popup-tip"}),r.createElement("div",{className:"mapboxgl-popup-content"},e))},e}(r.Component),ft=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),gt=function(){return(gt=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},yt=[.01,.02,.05,.1,.2,.5,1,2,5,10,20,50,100,200,500,1e3,2e3,5e3,1e4],vt={"top-right":{top:10,right:10,bottom:"auto",left:"auto"},"top-left":{top:10,left:10,bottom:"auto",right:"auto"},"bottom-right":{bottom:10,right:10,top:"auto",left:"auto"},"bottom-left":{bottom:10,left:10,top:"auto",right:"auto"}},mt={position:"absolute",zIndex:10,boxShadow:"0px 1px 4px rgba(0, 0, 0, .3)",border:"1px solid rgba(0, 0, 0, 0.1)",right:50,backgroundColor:"#fff",opacity:.85,display:"flex",flexDirection:"row",alignItems:"baseline",padding:"3px 7px"},Ct={border:"2px solid #7e8490",boxShadow:"0px 1px 4px rgba(0, 0, 0, .3)",borderTop:"none",height:7,borderBottomLeftRadius:1,borderBottomRightRadius:1},_t=Object.keys(vt),wt=["km","mi"],bt=60,St=c(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={chosenScale:0,scaleWidth:bt},e.setScale=function(){var t=e.props,o=t.measurement,n=t.map,r=n._canvas.clientWidth,i=n.getBounds(),a=i._ne,s=i._sw,l=e._getDistanceTwoPoints([s.lng,a.lat],[a.lng,a.lat],o),u=l/r*bt,c=yt.reduce(function(t,e){return!t&&e>u?e:t},0),p=c/l*r;e.setState({chosenScale:c,scaleWidth:p})},e}return ft(e,t),e.prototype.componentWillMount=function(){this.setScale(),this.props.map.on("zoomend",this.setScale)},e.prototype.componentWillUnmount=function(){this.props.map&&this.props.map.off("zoomend",this.setScale)},e.prototype._getDistanceTwoPoints=function(t,e,o){void 0===o&&(o="km");var n=t[0],r=t[1],i=e[0],a=e[1],s="km"===o?6371:6371/1.60934,l=this._deg2rad(a-r),u=this._deg2rad(i-n),c=Math.sin(l/2)*Math.sin(l/2)+Math.cos(this._deg2rad(r))*Math.cos(this._deg2rad(a))*Math.sin(u/2)*Math.sin(u/2);return s*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))},e.prototype._deg2rad=function(t){return t*(Math.PI/180)},e.prototype._displayMeasurement=function(t,e){return e>=1?e+" "+t:"mi"===t?Math.floor(5280*e)+" ft":Math.floor(1e3*e)+" m"},e.prototype.render=function(){var t=this.props,e=t.measurement,o=t.style,n=t.position,i=t.className,a=t.tabIndex,s=this.state,l=s.chosenScale,u=s.scaleWidth;return r.createElement("div",{tabIndex:a,style:gt({},mt,vt[n],o),className:i},r.createElement("div",{style:gt({},Ct,{width:u})}),r.createElement("div",{style:{paddingLeft:10}},this._displayMeasurement(e,l)))},e.defaultProps={measurement:wt[0],position:_t[2]},e}(r.Component)),Et=function(){return(Et=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},xt=["mapboxgl-marker"],Tt=function(t){return r.createElement(lt,Et({},Et({},t),{type:"marker",className:ut(xt,t.className)}))},Ot=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Rt=function(){return(Rt=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Pt=c(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id=e.props.id,e.onStyleDataChange=function(){e.props.map.getLayer(e.id)||(e.initialize(),e.forceUpdate())},e.initialize=function(){var t=e.props.map,o=e.props,n=o.geoJsonSource,r=o.tileJsonSource,i=o.onSourceAdded;t.getSource(e.id)||!n&&!r||(n?t.addSource(e.id,n):r&&t.addSource(e.id,r),t.on("sourcedata",e.onData),i&&i(t.getSource(e.id)))},e.onData=function(){var t=e.props.map,o=t.getSource(e.props.id);if(o&&t.isSourceLoaded(e.props.id)){var n=e.props.onSourceLoaded;o&&n&&n(o),o&&e.props.geoJsonSource&&e.props.geoJsonSource.data&&o.setData(e.props.geoJsonSource.data),t.off("sourcedata",e.onData)}},e}return Ot(e,t),e.prototype.componentWillMount=function(){this.props.map.on("styledata",this.onStyleDataChange),this.initialize()},e.prototype.removeSource=function(){var t=this,e=this.props.map;if(e.getSource(this.id)){var o=e.getStyle().layers,n=void 0===o?[]:o;return(n=n.map(function(t,e){var o=(n[e+1]||{id:void 0}).id;return Rt({},t,{before:o})}).filter(function(e){return e.source===t.id})).forEach(function(t){return e.removeLayer(t.id)}),e.removeSource(this.id),n.reverse()}return[]},e.prototype.componentWillUnmount=function(){var t=this.props.map;t&&t.getStyle()&&(t.off("styledata",this.onStyleDataChange),this.removeSource())},e.prototype.componentWillReceiveProps=function(t){var e=this.props,o=e.geoJsonSource,n=e.tileJsonSource,r=e.map;if(n&&t.tileJsonSource&&(n.url!==t.tileJsonSource.url||n.tiles!==t.tileJsonSource.tiles||n.minzoom!==t.tileJsonSource.minzoom||n.maxzoom!==t.tileJsonSource.maxzoom)){var i=this.removeSource();r.addSource(this.id,t.tileJsonSource),i.forEach(function(t){return r.addLayer(t,t.before)})}o&&t.geoJsonSource&&t.geoJsonSource.data!==o.data&&t.geoJsonSource.data&&r.getSource(this.id)&&r.getSource(this.id).setData(t.geoJsonSource.data)},e.prototype.render=function(){return null},e}(r.Component)),At=o(30),Dt=o.n(At),Mt=o(22),It=o(23),Lt=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Ft=c(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={superC:Dt()({radius:e.props.radius,maxZoom:e.props.maxZoom,minZoom:e.props.minZoom,extent:e.props.extent,nodeSize:e.props.nodeSize,log:e.props.log}),clusterPoints:[]},e.featureClusterMap=new WeakMap,e.childrenChange=function(t){var o=e.state.superC;e.featureClusterMap=new WeakMap;var n=e.childrenToFeatures(t);o.load(n)},e.mapChange=function(t){void 0===t&&(t=!1);var o=e.props.map,n=e.state,r=n.superC,i=n.clusterPoints,a=o.getZoom(),s=o.getCanvas(),l=s.width,u=s.height,c=o.unproject([0,0]).toArray(),p=o.unproject([l,0]).toArray(),d=o.unproject([l,u]).toArray(),h=o.unproject([0,u]).toArray(),f=r.getClusters(Mt(Object(It.polygon)([[c,p,d,h,c]])),Math.round(a));(f.length!==i.length||t)&&e.setState({clusterPoints:f})},e.childrenToFeatures=function(t){return t.map(function(t){var o=e.feature(t&&t.props.coordinates);return e.featureClusterMap.set(o,t),o})},e.getLeaves=function(t,o,n){return e.state.superC.getLeaves(t.properties&&t.properties.cluster_id,o||1/0,n).map(function(t){return e.featureClusterMap.get(t)})},e.zoomToClusterBounds=function(t){var o=Array.prototype.slice.call(t.currentTarget.children),r=e.findMarkerElement(t.currentTarget,t.target),i=o.indexOf(r),a=e.state.clusterPoints[i];if(a.properties&&a.properties.cluster_id){var s=e.state.superC.getLeaves(a.properties&&a.properties.cluster_id,1/0),l=Mt(Object(It.featureCollection)(s));e.props.map.fitBounds(n.LngLatBounds.convert(l),{padding:e.props.zoomOnClickPadding})}},e}return Lt(e,t),e.prototype.componentWillMount=function(){var t=this.props,e=t.children,o=t.map;e&&this.childrenChange(e),o.on("move",this.mapChange),o.on("zoom",this.mapChange),this.mapChange()},e.prototype.componentWillUnmount=function(){var t=this.props.map;t.off("move",this.mapChange),t.off("zoom",this.mapChange)},e.prototype.componentWillReceiveProps=function(t){this.props.children!==t.children&&t.children&&(this.childrenChange(t.children),this.mapChange(!0))},e.prototype.feature=function(t){return{type:"Feature",geometry:{type:"Point",coordinates:t},properties:{}}},e.prototype.findMarkerElement=function(t,e){return e.parentElement===t?e:this.findMarkerElement(t,e.parentElement)},e.prototype.render=function(){var t=this,e=this.props,o=e.ClusterMarkerFactory,n=e.style,i=e.className,a=e.tabIndex,s=this.state.clusterPoints;return r.createElement("div",{style:n,className:i,tabIndex:a,onClick:this.props.zoomOnClick?this.zoomToClusterBounds:void 0},s.map(function(e){return e.properties&&e.properties.cluster?o(e.geometry.coordinates,e.properties.point_count,t.getLeaves.bind(t,e)):t.featureClusterMap.get(e)}))},e.defaultProps={radius:60,minZoom:0,maxZoom:16,extent:512,nodeSize:64,log:!1,zoomOnClick:!1,zoomOnClickPadding:20},e}(r.Component)),Nt=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),kt=function(){return(kt=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Gt={position:"absolute",zIndex:10,display:"flex",flexDirection:"column",boxShadow:"0px 1px 4px rgba(0, 0, 0, .3)",border:"1px solid rgba(0, 0, 0, 0.1)"},Vt={"top-right":{top:62,right:10,bottom:"auto",left:"auto"},"top-left":{top:62,left:10,bottom:"auto",right:"auto"},"bottom-right":{bottom:63,right:10,top:"auto",left:"auto"},"bottom-left":{bottom:63,left:10,top:"auto",right:"auto"}},Bt={backgroundColor:"#f9f9f9",opacity:.95,transition:"background-color 0.16s ease-out",cursor:"pointer",border:0,height:26,width:26,outline:0,padding:3},zt={backgroundColor:"#fff",opacity:1},Ht={borderBottom:"1px solid rgba(0, 0, 0, 0.1)",borderTopLeftRadius:2,borderTopRightRadius:2,borderBottomLeftRadius:2,borderBottomRightRadius:2},jt=function(){return r.createElement("svg",{viewBox:"0 0 20 20"},r.createElement("polygon",{fill:"#333333",points:"6,9 10,1 14,9"}),r.createElement("polygon",{fill:"#CCCCCC",points:"6,11 10,19 14,11"}))},Ut={width:20,height:20,display:"inline-block"},Wt=0,Kt=Object.keys(Vt),qt=c(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={hover:void 0},e.compassIcon=null,e.onMouseOut=function(){e.state.hover||e.setState({hover:void 0})},e.onMouseIn=function(){Wt!==e.state.hover&&e.setState({hover:Wt})},e.onClickCompass=function(){e.props.map.resetNorth()},e.onMapRotate=function(){var t="rotate("+e.props.map.transform.angle*(180/Math.PI)+"deg)";e.compassIcon&&(e.compassIcon.style.transform=t)},e.assignRef=function(t){e.compassIcon=t},e}return Nt(e,t),e.prototype.componentDidMount=function(){this.props.map.on("rotate",this.onMapRotate)},e.prototype.componentWillUnmount=function(){this.props.map.off("rotate",this.onMapRotate)},e.prototype.render=function(){var t=this.props,e=t.position,o=t.style,n=t.className,i=t.tabIndex,a=this.state.hover,s=kt({},Bt,Ht,a===Wt?zt:{});return r.createElement("div",{className:n,tabIndex:i,style:kt({},Gt,Vt[e],o)},r.createElement("button",{style:s,onMouseOver:this.onMouseIn,onMouseOut:this.onMouseOut,onClick:this.onClickCompass},r.createElement("span",{ref:this.assignRef,style:Ut},r.createElement(jt,null))))},e.defaultProps={position:Kt[0]},e}(r.Component)),Yt=function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),Zt=c(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yt(e,t),e.prototype.componentWillMount=function(){this.loadImage(this.props)},e.prototype.componentWillUnmount=function(){e.removeImage(this.props)},e.prototype.componentWillReceiveProps=function(t){var o=this.props.id;t.map!==this.props.map&&e.removeImage(this.props),t.map&&!t.map.hasImage(o)&&this.loadImage(t)},e.prototype.render=function(){return null},e.prototype.loadImage=function(t){var e=this,o=t.map,n=t.id,r=t.url,i=t.data,a=t.options,s=t.onError;i?(o.addImage(n,i,a),this.loaded()):r&&o.loadImage(r,function(t,r){t?s&&s(t):(o.addImage(n,r,a),e.loaded())})},e.removeImage=function(t){var e=t.id,o=t.map;o&&o.getStyle()&&o.removeImage(e)},e.prototype.loaded=function(){var t=this.props.onLoaded;t&&t()},e}(r.Component));o.d(e,"Layer",function(){return Xt}),o.d(e,"Feature",function(){return k}),o.d(e,"GeoJSONLayer",function(){return F}),o.d(e,"Map",function(){return v}),o.d(e,"Popup",function(){return ht}),o.d(e,"ZoomControl",function(){return X}),o.d(e,"ScaleControl",function(){return St}),o.d(e,"Marker",function(){return Tt}),o.d(e,"Source",function(){return Pt}),o.d(e,"Cluster",function(){return Ft}),o.d(e,"RotationControl",function(){return qt}),o.d(e,"Image",function(){return Zt}),o.d(e,"MapContext",function(){return u});var Xt=c(R(S));e.default=v},function(t,e,o){var n=o(47).coordEach;t.exports=function(t){var e=[1/0,1/0,-1/0,-1/0];return n(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}},function(t,e){function o(t,e,o,n){if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");if(o&&4!==o.length)throw new Error("bbox must be an Array of 4 numbers");if(n&&-1===["string","number"].indexOf(typeof n))throw new Error("id must be a number or a string");var r={type:"Feature"};return n&&(r.id=n),o&&(r.bbox=o),r.properties=e||{},r.geometry=t,r}function n(t,e,n,r){if(!t)throw new Error("No coordinates passed");if(void 0===t.length)throw new Error("Coordinates must be an array");if(t.length<2)throw new Error("Coordinates must be at least 2 numbers long");if(!f(t[0])||!f(t[1]))throw new Error("Coordinates must contain numbers");return o({type:"Point",coordinates:t},e,n,r)}function r(t,e,n,r){if(!t)throw new Error("No coordinates passed");for(var i=0;i<t.length;i++){var a=t[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++){if(0===i&&0===s&&!f(a[0][0])||!f(a[0][1]))throw new Error("Coordinates must contain numbers");if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}}return o({type:"Polygon",coordinates:t},e,n,r)}function i(t,e,n,r){if(!t)throw new Error("No coordinates passed");if(t.length<2)throw new Error("Coordinates must be an array of two or more positions");if(!f(t[0][1])||!f(t[0][1]))throw new Error("Coordinates must contain numbers");return o({type:"LineString",coordinates:t},e,n,r)}function a(t,e,n,r){if(!t)throw new Error("No coordinates passed");return o({type:"MultiLineString",coordinates:t},e,n,r)}function s(t,e,n,r){if(!t)throw new Error("No coordinates passed");return o({type:"MultiPoint",coordinates:t},e,n,r)}function l(t,e,n,r){if(!t)throw new Error("No coordinates passed");return o({type:"MultiPolygon",coordinates:t},e,n,r)}var u={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,centimeters:6373e5,centimetres:6373e5,kilometers:6373,kilometres:6373,feet:20908792.65},c={kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,centimetres:1e4,millimeter:1e6,acres:247105e-9,miles:3.86e-7,yards:1.195990046,feet:10.763910417,inches:1550.003100006};function p(t,e){if(void 0===t||null===t)throw new Error("radians is required");var o=u[e||"kilometers"];if(!o)throw new Error("units is invalid");return t*o}function d(t,e){if(void 0===t||null===t)throw new Error("distance is required");var o=u[e||"kilometers"];if(!o)throw new Error("units is invalid");return t/o}function h(t){if(null===t||void 0===t)throw new Error("radians is required");return 180*(t%(2*Math.PI))/Math.PI}function f(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}t.exports={feature:o,geometry:function(t,e,o){if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(o&&4!==o.length)throw new Error("bbox must be an Array of 4 numbers");var u;switch(t){case"Point":u=n(e).geometry;break;case"LineString":u=i(e).geometry;break;case"Polygon":u=r(e).geometry;break;case"MultiPoint":u=s(e).geometry;break;case"MultiLineString":u=a(e).geometry;break;case"MultiPolygon":u=l(e).geometry;break;default:throw new Error(t+" is invalid")}return o&&(u.bbox=o),u},featureCollection:function(t,e,o){if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");if(e&&4!==e.length)throw new Error("bbox must be an Array of 4 numbers");if(o&&-1===["string","number"].indexOf(typeof o))throw new Error("id must be a number or a string");var n={type:"FeatureCollection"};return o&&(n.id=o),e&&(n.bbox=e),n.features=t,n},geometryCollection:function(t,e,n,r){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return o({type:"GeometryCollection",geometries:t},e,n,r)},point:n,multiPoint:s,lineString:i,multiLineString:a,polygon:r,multiPolygon:l,radiansToDistance:p,distanceToRadians:d,distanceToDegrees:function(t,e){return h(d(t,e))},radians2degrees:h,degrees2radians:function(t){if(null===t||void 0===t)throw new Error("degrees is required");return t%360*Math.PI/180},bearingToAngle:function(t){if(null===t||void 0===t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e},convertDistance:function(t,e,o){if(null===t||void 0===t)throw new Error("distance is required");if(!(t>=0))throw new Error("distance must be a positive number");return p(d(t,e),o||"kilometers")},convertArea:function(t,e,o){if(null===t||void 0===t)throw new Error("area is required");if(!(t>=0))throw new Error("area must be a positive number");var n=c[e||"meters"];if(!n)throw new Error("invalid original units");var r=c[o||"kilometers"];if(!r)throw new Error("invalid final units");return t/n*r},round:function(t,e){if(void 0===t||null===t||isNaN(t))throw new Error("num is required");if(e&&!(e>=0))throw new Error("precision must be a positive number");var o=Math.pow(10,e||0);return Math.round(t*o)/o},isNumber:f}},function(t,e,o){},function(t,e,o){t.exports=o(54)()},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.canDragX=function(t){return"both"===t.props.axis||"x"===t.props.axis},e.canDragY=function(t){return"both"===t.props.axis||"y"===t.props.axis},e.createCoreData=function(t,e,o){const r=!(0,n.isNum)(t.lastX),a=i(t);return r?{node:a,deltaX:0,deltaY:0,lastX:e,lastY:o,x:e,y:o}:{node:a,deltaX:e-t.lastX,deltaY:o-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:o}},e.createDraggableData=function(t,e){const o=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/o,y:t.state.y+e.deltaY/o,deltaX:e.deltaX/o,deltaY:e.deltaY/o,lastX:t.state.x,lastY:t.state.y}},e.getBoundPosition=function(t,e,o){if(!t.props.bounds)return[e,o];let{bounds:a}=t.props;a="string"===typeof a?a:function(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}(a);const s=i(t);if("string"===typeof a){const{ownerDocument:t}=s,e=t.defaultView;let o;if(!((o="parent"===a?s.parentNode:t.querySelector(a))instanceof e.HTMLElement))throw new Error('Bounds selector "'+a+'" could not find an element.');const i=o,l=e.getComputedStyle(s),u=e.getComputedStyle(i);a={left:-s.offsetLeft+(0,n.int)(u.paddingLeft)+(0,n.int)(l.marginLeft),top:-s.offsetTop+(0,n.int)(u.paddingTop)+(0,n.int)(l.marginTop),right:(0,r.innerWidth)(i)-(0,r.outerWidth)(s)-s.offsetLeft+(0,n.int)(u.paddingRight)-(0,n.int)(l.marginRight),bottom:(0,r.innerHeight)(i)-(0,r.outerHeight)(s)-s.offsetTop+(0,n.int)(u.paddingBottom)-(0,n.int)(l.marginBottom)}}(0,n.isNum)(a.right)&&(e=Math.min(e,a.right));(0,n.isNum)(a.bottom)&&(o=Math.min(o,a.bottom));(0,n.isNum)(a.left)&&(e=Math.max(e,a.left));(0,n.isNum)(a.top)&&(o=Math.max(o,a.top));return[e,o]},e.getControlPosition=function(t,e,o){const n="number"===typeof e?(0,r.getTouch)(t,e):null;if("number"===typeof e&&!n)return null;const a=i(o),s=o.props.offsetParent||a.offsetParent||a.ownerDocument.body;return(0,r.offsetXYFromParent)(n||t,s,o.props.scale)},e.snapToGrid=function(t,e,o){const n=Math.round(e/t[0])*t[0],r=Math.round(o/t[1])*t[1];return[n,r]};var n=o(12),r=o(19);function i(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){void 0}},function(t,e,o){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ReactComponent=void 0;var i=o(1),a=o(4),s=r(o(64)),l=o(8),u=o(65),c=function(){function t(t,e,o,n){var r=this;this.portal=null,this.oldPortal=null,this.reactComponent=t,this.portalManager=e,this.componentType=o,this.suppressFallbackMethods=!!n,this.statelessComponent=this.isStateless(this.reactComponent),this.key=s.default(),this.portalKey=s.default(),this.instanceCreated=this.isStatelessComponent()?a.AgPromise.resolve(!1):new a.AgPromise(function(t){r.resolveInstanceCreated=t})}return t.prototype.getGui=function(){return this.eParentElement},t.prototype.getRootElement=function(){return this.eParentElement.firstChild},t.prototype.destroy=function(){return this.componentInstance&&"function"==typeof this.componentInstance.destroy&&this.componentInstance.destroy(),this.portalManager.destroyPortal(this.portal)},t.prototype.createParentElement=function(t){var e=this.portalManager.getComponentWrappingElement(),o=document.createElement(e||"div");return o.classList.add("ag-react-container"),t.reactContainer=o,o},t.prototype.addParentContainerStyleAndClasses=function(){var t=this;this.componentInstance&&(this.componentInstance.getReactContainerStyle&&this.componentInstance.getReactContainerStyle()&&(a._.warnOnce('Since v31.1 "getReactContainerStyle" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),Object.assign(this.eParentElement.style,this.componentInstance.getReactContainerStyle())),this.componentInstance.getReactContainerClasses&&this.componentInstance.getReactContainerClasses()&&(a._.warnOnce('Since v31.1 "getReactContainerClasses" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),this.componentInstance.getReactContainerClasses().forEach(function(e){return t.eParentElement.classList.add(e)})))},t.prototype.statelessComponentRendered=function(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0},t.prototype.getFrameworkComponentInstance=function(){return this.componentInstance},t.prototype.isStatelessComponent=function(){return this.statelessComponent},t.prototype.getReactComponentName=function(){return this.reactComponent.name},t.prototype.getMemoType=function(){return this.hasSymbol()?Symbol.for("react.memo"):60115},t.prototype.hasSymbol=function(){return"function"===typeof Symbol&&Symbol.for},t.prototype.isStateless=function(t){return"function"===typeof t&&!(t.prototype&&t.prototype.isReactComponent)||"object"===typeof t&&t.$$typeof===this.getMemoType()},t.prototype.hasMethod=function(t){var e=this.getFrameworkComponentInstance();return!!e&&null!=e[t]||this.fallbackMethodAvailable(t)},t.prototype.callMethod=function(t,e){var o=this,n=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(t,e&&e[0]?e[0]:{});if(n){var r=n[t];return r?r.apply(n,e):this.fallbackMethodAvailable(t)?this.fallbackMethod(t,e&&e[0]?e[0]:{}):void 0}setTimeout(function(){return o.callMethod(t,e)})},t.prototype.addMethod=function(t,e){this[t]=e},t.prototype.init=function(t){var e=this;return this.eParentElement=this.createParentElement(t),this.params=t,this.createOrUpdatePortal(t),new a.AgPromise(function(t){return e.createReactComponent(t)})},t.prototype.createOrUpdatePortal=function(t){var e=this;this.isStatelessComponent()||(this.ref=function(t){var o;e.componentInstance=t,e.addParentContainerStyleAndClasses(),null===(o=e.resolveInstanceCreated)||void 0===o||o.call(e,!0),e.resolveInstanceCreated=void 0},t.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,n(n({},t),{key:this.key})),this.portal=l.createPortal(this.reactElement,this.eParentElement,this.portalKey)},t.prototype.createElement=function(t,e){return i.createElement(t,e)},t.prototype.createReactComponent=function(t){this.portalManager.mountReactPortal(this.portal,this,function(e){t(e)})},t.prototype.isNullValue=function(){return this.valueRenderedIsNull(this.params)},t.prototype.rendered=function(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!(this.isStatelessComponent()||!this.getFrameworkComponentInstance())},t.prototype.valueRenderedIsNull=function(t){if(!this.componentType.cellRenderer)return!1;var e=console.error;try{return console.error=function(){},""===u.renderToStaticMarkup(i.createElement(this.reactComponent,t))}catch(o){}finally{console.error=e}return!1},t.prototype.refreshComponent=function(t){this.oldPortal=this.portal,this.createOrUpdatePortal(t),this.portalManager.updateReactPortal(this.oldPortal,this.portal)},t.prototype.fallbackMethod=function(t,e){var o=this[t+"Component"];if(!this.suppressFallbackMethods&&o)return o.bind(this)(e)},t.prototype.fallbackMethodAvailable=function(t){return!this.suppressFallbackMethods&&!!this[t+"Component"]},t}();e.ReactComponent=c},function(t,e,o){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.FloatingFilterComponentProxy=e.updateFloatingFilterParent=void 0;var r=o(4),i=o(7);function a(t,e){t.parentFilterInstance(function(o){(o.setModel(e)||r.AgPromise.resolve()).then(function(){t.filterParams.filterChangedCallback()})})}e.updateFloatingFilterParent=a;var s=function(){function t(t,e){var o=this;this.floatingFilterParams=t,this.refreshProps=e,this.model=null,this.onModelChange=function(t){return o.updateModel(t)}}return t.prototype.getProps=function(){return n(n({},this.floatingFilterParams),{model:this.model,onModelChange:this.onModelChange})},t.prototype.onParentModelChanged=function(t){this.model=t,this.refreshProps()},t.prototype.refresh=function(t){this.floatingFilterParams=t,this.refreshProps()},t.prototype.setMethods=function(t){i.addOptionalMethods(this.getOptionalMethods(),t,this)},t.prototype.getOptionalMethods=function(){return["afterGuiAttached"]},t.prototype.updateModel=function(t){this.model=t,this.refreshProps(),a(this.floatingFilterParams,t)},t}();e.FloatingFilterComponentProxy=s},function(t,e,o){"use strict";var n=o(43);function r(t){return new i(t)}function i(t){this.options=h(Object.create(this.options),t),this.trees=new Array(this.options.maxZoom+1)}function a(t,e,o,n,r){return{x:t,y:e,zoom:1/0,id:o,parentId:-1,numPoints:n,properties:r}}function s(t,e){var o=t.geometry.coordinates;return{x:c(o[0]),y:p(o[1]),zoom:1/0,id:e,parentId:-1}}function l(t){return{type:"Feature",properties:u(t),geometry:{type:"Point",coordinates:[(e=t.x,360*(e-.5)),d(t.y)]}};var e}function u(t){var e=t.numPoints,o=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return h(h({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:o})}function c(t){return t/360+.5}function p(t){var e=Math.sin(t*Math.PI/180),o=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return o<0?0:o>1?1:o}function d(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function h(t,e){for(var o in e)t[o]=e[o];return t}function f(t){return t.x}function g(t){return t.y}t.exports=r,t.exports.default=r,i.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(t){return t}},load:function(t){var e=this.options.log;e&&console.time("total time");var o="prepare "+t.length+" points";e&&console.time(o),this.points=t;for(var r=[],i=0;i<t.length;i++)t[i].geometry&&r.push(s(t[i],i));this.trees[this.options.maxZoom+1]=n(r,f,g,this.options.nodeSize,Float32Array),e&&console.timeEnd(o);for(var a=this.options.maxZoom;a>=this.options.minZoom;a--){var l=+Date.now();r=this._cluster(r,a),this.trees[a]=n(r,f,g,this.options.nodeSize,Float32Array),e&&console.log("z%d: %d clusters in %dms",a,r.length,+Date.now()-l)}return e&&console.timeEnd("total time"),this},getClusters:function(t,e){if(t[0]>t[2]){var o=this.getClusters([t[0],t[1],180,t[3]],e),n=this.getClusters([-180,t[1],t[2],t[3]],e);return o.concat(n)}for(var r=this.trees[this._limitZoom(e)],i=r.range(c(t[0]),p(t[3]),c(t[2]),p(t[1])),a=[],s=0;s<i.length;s++){var u=r.points[i[s]];a.push(u.numPoints?l(u):this.points[u.id])}return a},getChildren:function(t){var e=t>>5,o=t%32,n="No cluster with the specified id.",r=this.trees[o];if(!r)throw new Error(n);var i=r.points[e];if(!i)throw new Error(n);for(var a=this.options.radius/(this.options.extent*Math.pow(2,o-1)),s=r.within(i.x,i.y,a),u=[],c=0;c<s.length;c++){var p=r.points[s[c]];p.parentId===t&&u.push(p.numPoints?l(p):this.points[p.id])}if(0===u.length)throw new Error(n);return u},getLeaves:function(t,e,o){e=e||10,o=o||0;var n=[];return this._appendLeaves(n,t,e,o,0),n},getTile:function(t,e,o){var n=this.trees[this._limitZoom(t)],r=Math.pow(2,t),i=this.options.extent,a=this.options.radius/i,s=(o-a)/r,l=(o+1+a)/r,u={features:[]};return this._addTileFeatures(n.range((e-a)/r,s,(e+1+a)/r,l),n.points,e,o,r,u),0===e&&this._addTileFeatures(n.range(1-a/r,s,1,l),n.points,r,o,r,u),e===r-1&&this._addTileFeatures(n.range(0,s,a/r,l),n.points,-1,o,r,u),u.features.length?u:null},getClusterExpansionZoom:function(t){for(var e=t%32-1;e<this.options.maxZoom;){var o=this.getChildren(t);if(e++,1!==o.length)break;t=o[0].properties.cluster_id}return e},_appendLeaves:function(t,e,o,n,r){for(var i=this.getChildren(e),a=0;a<i.length;a++){var s=i[a].properties;if(s&&s.cluster?r+s.point_count<=n?r+=s.point_count:r=this._appendLeaves(t,s.cluster_id,o,n,r):r<n?r++:t.push(i[a]),t.length===o)break}return r},_addTileFeatures:function(t,e,o,n,r,i){for(var a=0;a<t.length;a++){var s=e[t[a]];i.features.push({type:1,geometry:[[Math.round(this.options.extent*(s.x*r-o)),Math.round(this.options.extent*(s.y*r-n))]],tags:s.numPoints?u(s):this.points[s.id].properties})}},_limitZoom:function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},_cluster:function(t,e){for(var o=[],n=this.options.radius/(this.options.extent*Math.pow(2,e)),r=0;r<t.length;r++){var i=t[r];if(!(i.zoom<=e)){i.zoom=e;var s=this.trees[e+1],l=s.within(i.x,i.y,n),u=i.numPoints||1,c=i.x*u,p=i.y*u,d=null;this.options.reduce&&(d=this.options.initial(),this._accumulate(d,i));for(var h=(r<<5)+(e+1),f=0;f<l.length;f++){var g=s.points[l[f]];if(!(g.zoom<=e)){g.zoom=e;var y=g.numPoints||1;c+=g.x*y,p+=g.y*y,u+=y,g.parentId=h,this.options.reduce&&this._accumulate(d,g)}}1===u?o.push(i):(i.parentId=h,o.push(a(c/u,p/u,h,u,d)))}}return o},_accumulate:function(t,e){var o=e.numPoints?e.properties:this.options.map(this.points[e.id].properties);this.options.reduce(t,o)}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=o(48),r=o(1),i=o(21);function a(){}class s extends r.Component{componentDidMount(){const t=this.context;if(!t||!t.getStyle())throw new Error("Map is undefined in React context.");const{modes:e,onDrawActionable:o,onDrawCombine:r,onDrawCreate:i,onDrawDelete:s,onDrawModeChange:l,onDrawRender:u,onDrawSelectionChange:c,onDrawUncombine:p,onDrawUpdate:d,position:h}=this.props;this.draw=new n(Object.assign({},this.props,{modes:Object.assign({},n.modes,e)})),t.addControl(this.draw,h),t.on("draw.actionable",o||a),t.on("draw.combine",r||a),t.on("draw.create",i||a),t.on("draw.delete",s||a),t.on("draw.modechange",l||a),t.on("draw.render",u||a),t.on("draw.selectionchange",c||a),t.on("draw.uncombine",p||a),t.on("draw.update",d||a)}componentWillUnmount(){const t=this.context;t&&t.getStyle()&&this.draw&&t.removeControl(this.draw)}render(){return null}}s.contextType=i.MapContext,s.defaultProps={position:"top-left"},e.default=s},function(t,e,o){"use strict";const{default:n,DraggableCore:r}=o(53);t.exports=n,t.exports.default=n,t.exports.DraggableCore=r},function(t,e,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),r=this&&this.__exportStar||function(t,e){for(var o in t)"default"===o||Object.prototype.hasOwnProperty.call(e,o)||n(e,t,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.AgGridReact=void 0;var i=o(60);Object.defineProperty(e,"AgGridReact",{enumerable:!0,get:function(){return i.AgGridReact}}),r(o(92),e),r(o(93),e),r(o(14),e)},,,function(t,e,o){"use strict";var n=o(17),r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,l=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,p=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.concurrent_mode"):60111,h=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,g=r?Symbol.for("react.memo"):60115,y=r?Symbol.for("react.lazy"):60116,v="function"===typeof Symbol&&Symbol.iterator;function m(t){for(var e=arguments.length-1,o="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=0;n<e;n++)o+="&args[]="+encodeURIComponent(arguments[n+1]);!function(t,e,o,n,r,i,a,s){if(!t){if(t=void 0,void 0===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[o,n,r,i,a,s],u=0;(t=Error(e.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",o)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function w(t,e,o){this.props=t,this.context=e,this.refs=_,this.updater=o||C}function b(){}function S(t,e,o){this.props=t,this.context=e,this.refs=_,this.updater=o||C}w.prototype.isReactComponent={},w.prototype.setState=function(t,e){"object"!==typeof t&&"function"!==typeof t&&null!=t&&m("85"),this.updater.enqueueSetState(this,t,e,"setState")},w.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},b.prototype=w.prototype;var E=S.prototype=new b;E.constructor=S,n(E,w.prototype),E.isPureReactComponent=!0;var x={current:null},T={current:null},O=Object.prototype.hasOwnProperty,R={key:!0,ref:!0,__self:!0,__source:!0};function P(t,e,o){var n=void 0,r={},a=null,s=null;if(null!=e)for(n in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)O.call(e,n)&&!R.hasOwnProperty(n)&&(r[n]=e[n]);var l=arguments.length-2;if(1===l)r.children=o;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];r.children=u}if(t&&t.defaultProps)for(n in l=t.defaultProps)void 0===r[n]&&(r[n]=l[n]);return{$$typeof:i,type:t,key:a,ref:s,props:r,_owner:T.current}}function A(t){return"object"===typeof t&&null!==t&&t.$$typeof===i}var D=/\/+/g,M=[];function I(t,e,o,n){if(M.length){var r=M.pop();return r.result=t,r.keyPrefix=e,r.func=o,r.context=n,r.count=0,r}return{result:t,keyPrefix:e,func:o,context:n,count:0}}function L(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>M.length&&M.push(t)}function F(t,e,o){return null==t?0:function t(e,o,n,r){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case a:l=!0}}if(l)return n(r,e,""===o?"."+N(e,0):o),1;if(l=0,o=""===o?".":o+":",Array.isArray(e))for(var u=0;u<e.length;u++){var c=o+N(s=e[u],u);l+=t(s,c,n,r)}else if(c=null===e||"object"!==typeof e?null:"function"===typeof(c=v&&e[v]||e["@@iterator"])?c:null,"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=t(s=s.value,c=o+N(s,u++),n,r);else"object"===s&&m("31","[object Object]"===(n=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":n,"");return l}(t,"",e,o)}function N(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}(t.key):e.toString(36)}function k(t,e){t.func.call(t.context,e,t.count++)}function G(t,e,o){var n=t.result,r=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?V(t,n,o,function(t){return t}):null!=t&&(A(t)&&(t=function(t,e){return{$$typeof:i,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,r+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(D,"$&/")+"/")+o)),n.push(t))}function V(t,e,o,n,r){var i="";null!=o&&(i=(""+o).replace(D,"$&/")+"/"),F(t,G,e=I(e,i,n,r)),L(e)}function B(){var t=x.current;return null===t&&m("321"),t}var z={Children:{map:function(t,e,o){if(null==t)return t;var n=[];return V(t,n,null,e,o),n},forEach:function(t,e,o){if(null==t)return t;F(t,k,e=I(null,null,e,o)),L(e)},count:function(t){return F(t,function(){return null},null)},toArray:function(t){var e=[];return V(t,e,null,function(t){return t}),e},only:function(t){return A(t)||m("143"),t}},createRef:function(){return{current:null}},Component:w,PureComponent:S,createContext:function(t,e){return void 0===e&&(e=null),(t={$$typeof:p,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:t},t.Consumer=t},forwardRef:function(t){return{$$typeof:h,render:t}},lazy:function(t){return{$$typeof:y,_ctor:t,_status:-1,_result:null}},memo:function(t,e){return{$$typeof:g,type:t,compare:void 0===e?null:e}},useCallback:function(t,e){return B().useCallback(t,e)},useContext:function(t,e){return B().useContext(t,e)},useEffect:function(t,e){return B().useEffect(t,e)},useImperativeHandle:function(t,e,o){return B().useImperativeHandle(t,e,o)},useDebugValue:function(){},useLayoutEffect:function(t,e){return B().useLayoutEffect(t,e)},useMemo:function(t,e){return B().useMemo(t,e)},useReducer:function(t,e,o){return B().useReducer(t,e,o)},useRef:function(t){return B().useRef(t)},useState:function(t){return B().useState(t)},Fragment:s,StrictMode:l,Suspense:f,createElement:P,cloneElement:function(t,e,o){(null===t||void 0===t)&&m("267",t);var r=void 0,a=n({},t.props),s=t.key,l=t.ref,u=t._owner;if(null!=e){void 0!==e.ref&&(l=e.ref,u=T.current),void 0!==e.key&&(s=""+e.key);var c=void 0;for(r in t.type&&t.type.defaultProps&&(c=t.type.defaultProps),e)O.call(e,r)&&!R.hasOwnProperty(r)&&(a[r]=void 0===e[r]&&void 0!==c?c[r]:e[r])}if(1===(r=arguments.length-2))a.children=o;else if(1<r){c=Array(r);for(var p=0;p<r;p++)c[p]=arguments[p+2];a.children=c}return{$$typeof:i,type:t.type,key:s,ref:l,props:a,_owner:u}},createFactory:function(t){var e=P.bind(null,t);return e.type=t,e},isValidElement:A,version:"16.8.6",unstable_ConcurrentMode:d,unstable_Profiler:u,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:x,ReactCurrentOwner:T,assign:n}},H={default:z},j=H&&z||H;t.exports=j.default||j},function(t,e,o){"use strict";var n=o(1),r=o(17),i=o(38);function a(t){for(var e=arguments.length-1,o="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=0;n<e;n++)o+="&args[]="+encodeURIComponent(arguments[n+1]);!function(t,e,o,n,r,i,a,s){if(!t){if(t=void 0,void 0===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[o,n,r,i,a,s],u=0;(t=Error(e.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",o)}n||a("227");var s=!1,l=null,u=!1,c=null,p={onError:function(t){s=!0,l=t}};function d(t,e,o,n,r,i,a,u,c){s=!1,l=null,function(t,e,o,n,r,i,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(o,u)}catch(c){this.onError(c)}}.apply(p,arguments)}var h=null,f={};function g(){if(h)for(var t in f){var e=f[t],o=h.indexOf(t);if(-1<o||a("96",t),!v[o])for(var n in e.extractEvents||a("97",t),v[o]=e,o=e.eventTypes){var r=void 0,i=o[n],s=e,l=n;m.hasOwnProperty(l)&&a("99",l),m[l]=i;var u=i.phasedRegistrationNames;if(u){for(r in u)u.hasOwnProperty(r)&&y(u[r],s,l);r=!0}else i.registrationName?(y(i.registrationName,s,l),r=!0):r=!1;r||a("98",n,t)}}}function y(t,e,o){C[t]&&a("100",t),C[t]=e,_[t]=e.eventTypes[o].dependencies}var v=[],m={},C={},_={},w=null,b=null,S=null;function E(t,e,o){var n=t.type||"unknown-event";t.currentTarget=S(o),function(t,e,o,n,r,i,p,h,f){if(d.apply(this,arguments),s){if(s){var g=l;s=!1,l=null}else a("198"),g=void 0;u||(u=!0,c=g)}}(n,e,void 0,t),t.currentTarget=null}function x(t,e){return null==e&&a("30"),null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function T(t,e,o){Array.isArray(t)?t.forEach(e,o):t&&e.call(o,t)}var O=null;function R(t){if(t){var e=t._dispatchListeners,o=t._dispatchInstances;if(Array.isArray(e))for(var n=0;n<e.length&&!t.isPropagationStopped();n++)E(t,e[n],o[n]);else e&&E(t,e,o);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}var P={injectEventPluginOrder:function(t){h&&a("101"),h=Array.prototype.slice.call(t),g()},injectEventPluginsByName:function(t){var e,o=!1;for(e in t)if(t.hasOwnProperty(e)){var n=t[e];f.hasOwnProperty(e)&&f[e]===n||(f[e]&&a("102",e),f[e]=n,o=!0)}o&&g()}};function A(t,e){var o=t.stateNode;if(!o)return null;var n=w(o);if(!n)return null;o=n[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(n=!n.disabled)||(n=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!n;break t;default:t=!1}return t?null:(o&&"function"!==typeof o&&a("231",e,typeof o),o)}function D(t){if(null!==t&&(O=x(O,t)),t=O,O=null,t&&(T(t,R),O&&a("95"),u))throw t=c,u=!1,c=null,t}var M=Math.random().toString(36).slice(2),I="__reactInternalInstance$"+M,L="__reactEventHandlers$"+M;function F(t){if(t[I])return t[I];for(;!t[I];){if(!t.parentNode)return null;t=t.parentNode}return 5===(t=t[I]).tag||6===t.tag?t:null}function N(t){return!(t=t[I])||5!==t.tag&&6!==t.tag?null:t}function k(t){if(5===t.tag||6===t.tag)return t.stateNode;a("33")}function G(t){return t[L]||null}function V(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function B(t,e,o){(e=A(t,o.dispatchConfig.phasedRegistrationNames[e]))&&(o._dispatchListeners=x(o._dispatchListeners,e),o._dispatchInstances=x(o._dispatchInstances,t))}function z(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,o=[];e;)o.push(e),e=V(e);for(e=o.length;0<e--;)B(o[e],"captured",t);for(e=0;e<o.length;e++)B(o[e],"bubbled",t)}}function H(t,e,o){t&&o&&o.dispatchConfig.registrationName&&(e=A(t,o.dispatchConfig.registrationName))&&(o._dispatchListeners=x(o._dispatchListeners,e),o._dispatchInstances=x(o._dispatchInstances,t))}function j(t){t&&t.dispatchConfig.registrationName&&H(t._targetInst,null,t)}function U(t){T(t,z)}var W=!("undefined"===typeof window||!window.document||!window.document.createElement);function K(t,e){var o={};return o[t.toLowerCase()]=e.toLowerCase(),o["Webkit"+t]="webkit"+e,o["Moz"+t]="moz"+e,o}var q={animationend:K("Animation","AnimationEnd"),animationiteration:K("Animation","AnimationIteration"),animationstart:K("Animation","AnimationStart"),transitionend:K("Transition","TransitionEnd")},Y={},Z={};function X(t){if(Y[t])return Y[t];if(!q[t])return t;var e,o=q[t];for(e in o)if(o.hasOwnProperty(e)&&e in Z)return Y[t]=o[e];return t}W&&(Z=document.createElement("div").style,"AnimationEvent"in window||(delete q.animationend.animation,delete q.animationiteration.animation,delete q.animationstart.animation),"TransitionEvent"in window||delete q.transitionend.transition);var J=X("animationend"),Q=X("animationiteration"),$=X("animationstart"),tt=X("transitionend"),et="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ot=null,nt=null,rt=null;function it(){if(rt)return rt;var t,e,o=nt,n=o.length,r="value"in ot?ot.value:ot.textContent,i=r.length;for(t=0;t<n&&o[t]===r[t];t++);var a=n-t;for(e=1;e<=a&&o[n-e]===r[i-e];e++);return rt=r.slice(t,1<e?1-e:void 0)}function at(){return!0}function st(){return!1}function lt(t,e,o,n){for(var r in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=o,t=this.constructor.Interface)t.hasOwnProperty(r)&&((e=t[r])?this[r]=e(o):"target"===r?this.target=n:this[r]=o[r]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?at:st,this.isPropagationStopped=st,this}function ut(t,e,o,n){if(this.eventPool.length){var r=this.eventPool.pop();return this.call(r,t,e,o,n),r}return new this(t,e,o,n)}function ct(t){t instanceof this||a("279"),t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function pt(t){t.eventPool=[],t.getPooled=ut,t.release=ct}r(lt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=at)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=at)},persist:function(){this.isPersistent=at},isPersistent:st,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=st,this._dispatchInstances=this._dispatchListeners=null}}),lt.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},lt.extend=function(t){function e(){}function o(){return n.apply(this,arguments)}var n=this;e.prototype=n.prototype;var i=new e;return r(i,o.prototype),o.prototype=i,o.prototype.constructor=o,o.Interface=r({},n.Interface,t),o.extend=n.extend,pt(o),o},pt(lt);var dt=lt.extend({data:null}),ht=lt.extend({data:null}),ft=[9,13,27,32],gt=W&&"CompositionEvent"in window,yt=null;W&&"documentMode"in document&&(yt=document.documentMode);var vt=W&&"TextEvent"in window&&!yt,mt=W&&(!gt||yt&&8<yt&&11>=yt),Ct=String.fromCharCode(32),_t={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},wt=!1;function bt(t,e){switch(t){case"keyup":return-1!==ft.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function St(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Et=!1;var xt={eventTypes:_t,extractEvents:function(t,e,o,n){var r=void 0,i=void 0;if(gt)t:{switch(t){case"compositionstart":r=_t.compositionStart;break t;case"compositionend":r=_t.compositionEnd;break t;case"compositionupdate":r=_t.compositionUpdate;break t}r=void 0}else Et?bt(t,o)&&(r=_t.compositionEnd):"keydown"===t&&229===o.keyCode&&(r=_t.compositionStart);return r?(mt&&"ko"!==o.locale&&(Et||r!==_t.compositionStart?r===_t.compositionEnd&&Et&&(i=it()):(nt="value"in(ot=n)?ot.value:ot.textContent,Et=!0)),r=dt.getPooled(r,e,o,n),i?r.data=i:null!==(i=St(o))&&(r.data=i),U(r),i=r):i=null,(t=vt?function(t,e){switch(t){case"compositionend":return St(e);case"keypress":return 32!==e.which?null:(wt=!0,Ct);case"textInput":return(t=e.data)===Ct&&wt?null:t;default:return null}}(t,o):function(t,e){if(Et)return"compositionend"===t||!gt&&bt(t,e)?(t=it(),rt=nt=ot=null,Et=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mt&&"ko"!==e.locale?null:e.data;default:return null}}(t,o))?((e=ht.getPooled(_t.beforeInput,e,o,n)).data=t,U(e)):e=null,null===i?e:null===e?i:[i,e]}},Tt=null,Ot=null,Rt=null;function Pt(t){if(t=b(t)){"function"!==typeof Tt&&a("280");var e=w(t.stateNode);Tt(t.stateNode,t.type,e)}}function At(t){Ot?Rt?Rt.push(t):Rt=[t]:Ot=t}function Dt(){if(Ot){var t=Ot,e=Rt;if(Rt=Ot=null,Pt(t),e)for(t=0;t<e.length;t++)Pt(e[t])}}function Mt(t,e){return t(e)}function It(t,e,o){return t(e,o)}function Lt(){}var Ft=!1;function Nt(t,e){if(Ft)return t(e);Ft=!0;try{return Mt(t,e)}finally{Ft=!1,(null!==Ot||null!==Rt)&&(Lt(),Dt())}}var kt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gt(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!kt[t.type]:"textarea"===e}function Vt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function Bt(t){if(!W)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"===typeof e[t]),e}function zt(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Ht(t){t._valueTracker||(t._valueTracker=function(t){var e=zt(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof o&&"function"===typeof o.get&&"function"===typeof o.set){var r=o.get,i=o.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){n=""+t,i.call(this,t)}}),Object.defineProperty(t,e,{enumerable:o.enumerable}),{getValue:function(){return n},setValue:function(t){n=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function jt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var o=e.getValue(),n="";return t&&(n=zt(t)?t.checked?"true":"false":t.value),(t=n)!==o&&(e.setValue(t),!0)}var Ut=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Ut.hasOwnProperty("ReactCurrentDispatcher")||(Ut.ReactCurrentDispatcher={current:null});var Wt=/^(.*)[\\\/]/,Kt="function"===typeof Symbol&&Symbol.for,qt=Kt?Symbol.for("react.element"):60103,Yt=Kt?Symbol.for("react.portal"):60106,Zt=Kt?Symbol.for("react.fragment"):60107,Xt=Kt?Symbol.for("react.strict_mode"):60108,Jt=Kt?Symbol.for("react.profiler"):60114,Qt=Kt?Symbol.for("react.provider"):60109,$t=Kt?Symbol.for("react.context"):60110,te=Kt?Symbol.for("react.concurrent_mode"):60111,ee=Kt?Symbol.for("react.forward_ref"):60112,oe=Kt?Symbol.for("react.suspense"):60113,ne=Kt?Symbol.for("react.memo"):60115,re=Kt?Symbol.for("react.lazy"):60116,ie="function"===typeof Symbol&&Symbol.iterator;function ae(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=ie&&t[ie]||t["@@iterator"])?t:null}function se(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case te:return"ConcurrentMode";case Zt:return"Fragment";case Yt:return"Portal";case Jt:return"Profiler";case Xt:return"StrictMode";case oe:return"Suspense"}if("object"===typeof t)switch(t.$$typeof){case $t:return"Context.Consumer";case Qt:return"Context.Provider";case ee:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case ne:return se(t.type);case re:if(t=1===t._status?t._result:null)return se(t)}return null}function le(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var o="";break t;default:var n=t._debugOwner,r=t._debugSource,i=se(t.type);o=null,n&&(o=se(n.type)),n=i,i="",r?i=" (at "+r.fileName.replace(Wt,"")+":"+r.lineNumber+")":o&&(i=" (created by "+o+")"),o="\n    in "+(n||"Unknown")+i}e+=o,t=t.return}while(t);return e}var ue=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ce=Object.prototype.hasOwnProperty,pe={},de={};function he(t,e,o,n,r){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=o,this.propertyName=t,this.type=e}var fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){fe[t]=new he(t,0,!1,t,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];fe[e]=new he(e,1,!1,t[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){fe[t]=new he(t,2,!1,t.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){fe[t]=new he(t,2,!1,t,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){fe[t]=new he(t,3,!1,t.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(t){fe[t]=new he(t,3,!0,t,null)}),["capture","download"].forEach(function(t){fe[t]=new he(t,4,!1,t,null)}),["cols","rows","size","span"].forEach(function(t){fe[t]=new he(t,6,!1,t,null)}),["rowSpan","start"].forEach(function(t){fe[t]=new he(t,5,!1,t.toLowerCase(),null)});var ge=/[\-:]([a-z])/g;function ye(t){return t[1].toUpperCase()}function ve(t,e,o,n){var r=fe.hasOwnProperty(e)?fe[e]:null;(null!==r?0===r.type:!n&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,o,n){if(null===e||"undefined"===typeof e||function(t,e,o,n){if(null!==o&&0===o.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==o?!o.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,o,n))return!0;if(n)return!1;if(null!==o)switch(o.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,o,r,n)&&(o=null),n||null===r?function(t){return!!ce.call(de,t)||!ce.call(pe,t)&&(ue.test(t)?de[t]=!0:(pe[t]=!0,!1))}(e)&&(null===o?t.removeAttribute(e):t.setAttribute(e,""+o)):r.mustUseProperty?t[r.propertyName]=null===o?3!==r.type&&"":o:(e=r.attributeName,n=r.attributeNamespace,null===o?t.removeAttribute(e):(o=3===(r=r.type)||4===r&&!0===o?"":""+o,n?t.setAttributeNS(n,e,o):t.setAttribute(e,o))))}function me(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function Ce(t,e){var o=e.checked;return r({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=o?o:t._wrapperState.initialChecked})}function _e(t,e){var o=null==e.defaultValue?"":e.defaultValue,n=null!=e.checked?e.checked:e.defaultChecked;o=me(null!=e.value?e.value:o),t._wrapperState={initialChecked:n,initialValue:o,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function we(t,e){null!=(e=e.checked)&&ve(t,"checked",e,!1)}function be(t,e){we(t,e);var o=me(e.value),n=e.type;if(null!=o)"number"===n?(0===o&&""===t.value||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if("submit"===n||"reset"===n)return void t.removeAttribute("value");e.hasOwnProperty("value")?Ee(t,e.type,o):e.hasOwnProperty("defaultValue")&&Ee(t,e.type,me(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Se(t,e,o){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!("submit"!==n&&"reset"!==n||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,o||e===t.value||(t.value=e),t.defaultValue=e}""!==(o=t.name)&&(t.name=""),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!!t._wrapperState.initialChecked,""!==o&&(t.name=o)}function Ee(t,e,o){"number"===e&&t.ownerDocument.activeElement===t||(null==o?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ge,ye);fe[e]=new he(e,1,!1,t,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ge,ye);fe[e]=new he(e,1,!1,t,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ge,ye);fe[e]=new he(e,1,!1,t,"http://www.w3.org/XML/1998/namespace")}),["tabIndex","crossOrigin"].forEach(function(t){fe[t]=new he(t,1,!1,t.toLowerCase(),null)});var xe={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Te(t,e,o){return(t=lt.getPooled(xe.change,t,e,o)).type="change",At(o),U(t),t}var Oe=null,Re=null;function Pe(t){D(t)}function Ae(t){if(jt(k(t)))return t}function De(t,e){if("change"===t)return e}var Me=!1;function Ie(){Oe&&(Oe.detachEvent("onpropertychange",Le),Re=Oe=null)}function Le(t){"value"===t.propertyName&&Ae(Re)&&Nt(Pe,t=Te(Re,t,Vt(t)))}function Fe(t,e,o){"focus"===t?(Ie(),Re=o,(Oe=e).attachEvent("onpropertychange",Le)):"blur"===t&&Ie()}function Ne(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Ae(Re)}function ke(t,e){if("click"===t)return Ae(e)}function Ge(t,e){if("input"===t||"change"===t)return Ae(e)}W&&(Me=Bt("input")&&(!document.documentMode||9<document.documentMode));var Ve={eventTypes:xe,_isInputEventSupported:Me,extractEvents:function(t,e,o,n){var r=e?k(e):window,i=void 0,a=void 0,s=r.nodeName&&r.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===r.type?i=De:Gt(r)?Me?i=Ge:(i=Ne,a=Fe):(s=r.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===r.type||"radio"===r.type)&&(i=ke),i&&(i=i(t,e)))return Te(i,o,n);a&&a(t,r,e),"blur"===t&&(t=r._wrapperState)&&t.controlled&&"number"===r.type&&Ee(r,"number",r.value)}},Be=lt.extend({view:null,detail:null}),ze={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function He(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=ze[t])&&!!e[t]}function je(){return He}var Ue=0,We=0,Ke=!1,qe=!1,Ye=Be.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:je,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=Ue;return Ue=t.screenX,Ke?"mousemove"===t.type?t.screenX-e:0:(Ke=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=We;return We=t.screenY,qe?"mousemove"===t.type?t.screenY-e:0:(qe=!0,0)}}),Ze=Ye.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Xe={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Je={eventTypes:Xe,extractEvents:function(t,e,o,n){var r="mouseover"===t||"pointerover"===t,i="mouseout"===t||"pointerout"===t;if(r&&(o.relatedTarget||o.fromElement)||!i&&!r)return null;if(r=n.window===n?n:(r=n.ownerDocument)?r.defaultView||r.parentWindow:window,i?(i=e,e=(e=o.relatedTarget||o.toElement)?F(e):null):i=null,i===e)return null;var a=void 0,s=void 0,l=void 0,u=void 0;"mouseout"===t||"mouseover"===t?(a=Ye,s=Xe.mouseLeave,l=Xe.mouseEnter,u="mouse"):"pointerout"!==t&&"pointerover"!==t||(a=Ze,s=Xe.pointerLeave,l=Xe.pointerEnter,u="pointer");var c=null==i?r:k(i);if(r=null==e?r:k(e),(t=a.getPooled(s,i,o,n)).type=u+"leave",t.target=c,t.relatedTarget=r,(o=a.getPooled(l,e,o,n)).type=u+"enter",o.target=r,o.relatedTarget=c,n=e,i&&n)t:{for(r=n,u=0,a=e=i;a;a=V(a))u++;for(a=0,l=r;l;l=V(l))a++;for(;0<u-a;)e=V(e),u--;for(;0<a-u;)r=V(r),a--;for(;u--;){if(e===r||e===r.alternate)break t;e=V(e),r=V(r)}e=null}else e=null;for(r=e,e=[];i&&i!==r&&(null===(u=i.alternate)||u!==r);)e.push(i),i=V(i);for(i=[];n&&n!==r&&(null===(u=n.alternate)||u!==r);)i.push(n),n=V(n);for(n=0;n<e.length;n++)H(e[n],"bubbled",t);for(n=i.length;0<n--;)H(i[n],"captured",o);return[t,o]}};function Qe(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e}var $e=Object.prototype.hasOwnProperty;function to(t,e){if(Qe(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var o=Object.keys(t),n=Object.keys(e);if(o.length!==n.length)return!1;for(n=0;n<o.length;n++)if(!$e.call(e,o[n])||!Qe(t[o[n]],e[o[n]]))return!1;return!0}function eo(t){var e=t;if(t.alternate)for(;e.return;)e=e.return;else{if(0!==(2&e.effectTag))return 1;for(;e.return;)if(0!==(2&(e=e.return).effectTag))return 1}return 3===e.tag?2:3}function oo(t){2!==eo(t)&&a("188")}function no(t){if(!(t=function(t){var e=t.alternate;if(!e)return 3===(e=eo(t))&&a("188"),1===e?null:t;for(var o=t,n=e;;){var r=o.return,i=r?r.alternate:null;if(!r||!i)break;if(r.child===i.child){for(var s=r.child;s;){if(s===o)return oo(r),t;if(s===n)return oo(r),e;s=s.sibling}a("188")}if(o.return!==n.return)o=r,n=i;else{s=!1;for(var l=r.child;l;){if(l===o){s=!0,o=r,n=i;break}if(l===n){s=!0,n=r,o=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===o){s=!0,o=i,n=r;break}if(l===n){s=!0,n=i,o=r;break}l=l.sibling}s||a("189")}}o.alternate!==n&&a("190")}return 3!==o.tag&&a("188"),o.stateNode.current===o?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}var ro=lt.extend({animationName:null,elapsedTime:null,pseudoElement:null}),io=lt.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ao=Be.extend({relatedTarget:null});function so(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var lo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},co=Be.extend({key:function(t){if(t.key){var e=lo[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=so(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?uo[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:je,charCode:function(t){return"keypress"===t.type?so(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?so(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),po=Ye.extend({dataTransfer:null}),ho=Be.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:je}),fo=lt.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),go=Ye.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),yo=[["abort","abort"],[J,"animationEnd"],[Q,"animationIteration"],[$,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[tt,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],vo={},mo={};function Co(t,e){var o=t[0],n="on"+((t=t[1])[0].toUpperCase()+t.slice(1));e={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[o],isInteractive:e},vo[t]=e,mo[o]=e}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(t){Co(t,!0)}),yo.forEach(function(t){Co(t,!1)});var _o={eventTypes:vo,isInteractiveTopLevelEventType:function(t){return void 0!==(t=mo[t])&&!0===t.isInteractive},extractEvents:function(t,e,o,n){var r=mo[t];if(!r)return null;switch(t){case"keypress":if(0===so(o))return null;case"keydown":case"keyup":t=co;break;case"blur":case"focus":t=ao;break;case"click":if(2===o.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Ye;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=po;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=ho;break;case J:case Q:case $:t=ro;break;case tt:t=fo;break;case"scroll":t=Be;break;case"wheel":t=go;break;case"copy":case"cut":case"paste":t=io;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Ze;break;default:t=lt}return U(e=t.getPooled(r,e,o,n)),e}},wo=_o.isInteractiveTopLevelEventType,bo=[];function So(t){var e=t.targetInst,o=e;do{if(!o){t.ancestors.push(o);break}var n;for(n=o;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;t.ancestors.push(o),o=F(n)}while(o);for(o=0;o<t.ancestors.length;o++){e=t.ancestors[o];var r=Vt(t.nativeEvent);n=t.topLevelType;for(var i=t.nativeEvent,a=null,s=0;s<v.length;s++){var l=v[s];l&&(l=l.extractEvents(n,e,i,r))&&(a=x(a,l))}D(a)}}var Eo=!0;function xo(t,e){if(!e)return null;var o=(wo(t)?Oo:Ro).bind(null,t);e.addEventListener(t,o,!1)}function To(t,e){if(!e)return null;var o=(wo(t)?Oo:Ro).bind(null,t);e.addEventListener(t,o,!0)}function Oo(t,e){It(Ro,t,e)}function Ro(t,e){if(Eo){var o=Vt(e);if(null===(o=F(o))||"number"!==typeof o.tag||2===eo(o)||(o=null),bo.length){var n=bo.pop();n.topLevelType=t,n.nativeEvent=e,n.targetInst=o,t=n}else t={topLevelType:t,nativeEvent:e,targetInst:o,ancestors:[]};try{Nt(So,t)}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>bo.length&&bo.push(t)}}}var Po={},Ao=0,Do="_reactListenersID"+(""+Math.random()).slice(2);function Mo(t){return Object.prototype.hasOwnProperty.call(t,Do)||(t[Do]=Ao++,Po[t[Do]]={}),Po[t[Do]]}function Io(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Lo(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fo(t,e){var o,n=Lo(t);for(t=0;n;){if(3===n.nodeType){if(o=t+n.textContent.length,t<=e&&o>=e)return{node:n,offset:e-t};t=o}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=Lo(n)}}function No(){for(var t=window,e=Io();e instanceof t.HTMLIFrameElement;){try{var o="string"===typeof e.contentWindow.location.href}catch(n){o=!1}if(!o)break;e=Io((t=e.contentWindow).document)}return e}function ko(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function Go(t){var e=No(),o=t.focusedElem,n=t.selectionRange;if(e!==o&&o&&o.ownerDocument&&function t(e,o){return!(!e||!o)&&(e===o||(!e||3!==e.nodeType)&&(o&&3===o.nodeType?t(e,o.parentNode):"contains"in e?e.contains(o):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(o))))}(o.ownerDocument.documentElement,o)){if(null!==n&&ko(o))if(e=n.start,void 0===(t=n.end)&&(t=e),"selectionStart"in o)o.selectionStart=e,o.selectionEnd=Math.min(t,o.value.length);else if((t=(e=o.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var r=o.textContent.length,i=Math.min(n.start,r);n=void 0===n.end?i:Math.min(n.end,r),!t.extend&&i>n&&(r=n,n=i,i=r),r=Fo(o,i);var a=Fo(o,n);r&&a&&(1!==t.rangeCount||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&((e=e.createRange()).setStart(r.node,r.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}for(e=[],t=o;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<e.length;o++)(t=e[o]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Vo=W&&"documentMode"in document&&11>=document.documentMode,Bo={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},zo=null,Ho=null,jo=null,Uo=!1;function Wo(t,e){var o=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return Uo||null==zo||zo!==Io(o)?null:("selectionStart"in(o=zo)&&ko(o)?o={start:o.selectionStart,end:o.selectionEnd}:o={anchorNode:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset},jo&&to(jo,o)?null:(jo=o,(t=lt.getPooled(Bo.select,Ho,t,e)).type="select",t.target=zo,U(t),t))}var Ko={eventTypes:Bo,extractEvents:function(t,e,o,n){var r,i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;if(!(r=!i)){t:{i=Mo(i),r=_.onSelect;for(var a=0;a<r.length;a++){var s=r[a];if(!i.hasOwnProperty(s)||!i[s]){i=!1;break t}}i=!0}r=!i}if(r)return null;switch(i=e?k(e):window,t){case"focus":(Gt(i)||"true"===i.contentEditable)&&(zo=i,Ho=e,jo=null);break;case"blur":jo=Ho=zo=null;break;case"mousedown":Uo=!0;break;case"contextmenu":case"mouseup":case"dragend":return Uo=!1,Wo(o,n);case"selectionchange":if(Vo)break;case"keydown":case"keyup":return Wo(o,n)}return null}};function qo(t,e){return t=r({children:void 0},e),(e=function(t){var e="";return n.Children.forEach(t,function(t){null!=t&&(e+=t)}),e}(e.children))&&(t.children=e),t}function Yo(t,e,o,n){if(t=t.options,e){e={};for(var r=0;r<o.length;r++)e["$"+o[r]]=!0;for(o=0;o<t.length;o++)r=e.hasOwnProperty("$"+t[o].value),t[o].selected!==r&&(t[o].selected=r),r&&n&&(t[o].defaultSelected=!0)}else{for(o=""+me(o),e=null,r=0;r<t.length;r++){if(t[r].value===o)return t[r].selected=!0,void(n&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function Zo(t,e){return null!=e.dangerouslySetInnerHTML&&a("91"),r({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Xo(t,e){var o=e.value;null==o&&(o=e.defaultValue,null!=(e=e.children)&&(null!=o&&a("92"),Array.isArray(e)&&(1>=e.length||a("93"),e=e[0]),o=e),null==o&&(o="")),t._wrapperState={initialValue:me(o)}}function Jo(t,e){var o=me(e.value),n=me(e.defaultValue);null!=o&&((o=""+o)!==t.value&&(t.value=o),null==e.defaultValue&&t.defaultValue!==o&&(t.defaultValue=o)),null!=n&&(t.defaultValue=""+n)}function Qo(t){var e=t.textContent;e===t._wrapperState.initialValue&&(t.value=e)}P.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),w=G,b=N,S=k,P.injectEventPluginsByName({SimpleEventPlugin:_o,EnterLeaveEventPlugin:Je,ChangeEventPlugin:Ve,SelectEventPlugin:Ko,BeforeInputEventPlugin:xt});var $o={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function tn(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function en(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?tn(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var on,nn=void 0,rn=(on=function(t,e){if(t.namespaceURI!==$o.svg||"innerHTML"in t)t.innerHTML=e;else{for((nn=nn||document.createElement("div")).innerHTML="<svg>"+e+"</svg>",e=nn.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,o,n){MSApp.execUnsafeLocalFunction(function(){return on(t,e)})}:on);function an(t,e){if(e){var o=t.firstChild;if(o&&o===t.lastChild&&3===o.nodeType)return void(o.nodeValue=e)}t.textContent=e}var sn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ln=["Webkit","ms","Moz","O"];function un(t,e,o){return null==e||"boolean"===typeof e||""===e?"":o||"number"!==typeof e||0===e||sn.hasOwnProperty(t)&&sn[t]?(""+e).trim():e+"px"}function cn(t,e){for(var o in t=t.style,e)if(e.hasOwnProperty(o)){var n=0===o.indexOf("--"),r=un(o,e[o],n);"float"===o&&(o="cssFloat"),n?t.setProperty(o,r):t[o]=r}}Object.keys(sn).forEach(function(t){ln.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),sn[e]=sn[t]})});var pn=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dn(t,e){e&&(pn[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML)&&a("137",t,""),null!=e.dangerouslySetInnerHTML&&(null!=e.children&&a("60"),"object"===typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML||a("61")),null!=e.style&&"object"!==typeof e.style&&a("62",""))}function hn(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function fn(t,e){var o=Mo(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=_[e];for(var n=0;n<e.length;n++){var r=e[n];if(!o.hasOwnProperty(r)||!o[r]){switch(r){case"scroll":To("scroll",t);break;case"focus":case"blur":To("focus",t),To("blur",t),o.blur=!0,o.focus=!0;break;case"cancel":case"close":Bt(r)&&To(r,t);break;case"invalid":case"submit":case"reset":break;default:-1===et.indexOf(r)&&xo(r,t)}o[r]=!0}}}function gn(){}var yn=null,vn=null;function mn(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Cn(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var _n="function"===typeof setTimeout?setTimeout:void 0,wn="function"===typeof clearTimeout?clearTimeout:void 0,bn=i.unstable_scheduleCallback,Sn=i.unstable_cancelCallback;function En(t){for(t=t.nextSibling;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}function xn(t){for(t=t.firstChild;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}new Set;var Tn=[],On=-1;function Rn(t){0>On||(t.current=Tn[On],Tn[On]=null,On--)}function Pn(t,e){Tn[++On]=t.current,t.current=e}var An={},Dn={current:An},Mn={current:!1},In=An;function Ln(t,e){var o=t.type.contextTypes;if(!o)return An;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r,i={};for(r in o)i[r]=e[r];return n&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Fn(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Nn(t){Rn(Mn),Rn(Dn)}function kn(t){Rn(Mn),Rn(Dn)}function Gn(t,e,o){Dn.current!==An&&a("168"),Pn(Dn,e),Pn(Mn,o)}function Vn(t,e,o){var n=t.stateNode;if(t=e.childContextTypes,"function"!==typeof n.getChildContext)return o;for(var i in n=n.getChildContext())i in t||a("108",se(e)||"Unknown",i);return r({},o,n)}function Bn(t){var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||An,In=Dn.current,Pn(Dn,e),Pn(Mn,Mn.current),!0}function zn(t,e,o){var n=t.stateNode;n||a("169"),o?(e=Vn(t,e,In),n.__reactInternalMemoizedMergedChildContext=e,Rn(Mn),Rn(Dn),Pn(Dn,e)):Rn(Mn),Pn(Mn,o)}var Hn=null,jn=null;function Un(t){return function(e){try{return t(e)}catch(o){}}}function Wn(t,e,o,n){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.contextDependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Kn(t,e,o,n){return new Wn(t,e,o,n)}function qn(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Yn(t,e){var o=t.alternate;return null===o?((o=Kn(t.tag,e,t.key,t.mode)).elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=e,o.effectTag=0,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null),o.childExpirationTime=t.childExpirationTime,o.expirationTime=t.expirationTime,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,o.contextDependencies=t.contextDependencies,o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function Zn(t,e,o,n,r,i){var s=2;if(n=t,"function"===typeof t)qn(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case Zt:return Xn(o.children,r,i,e);case te:return Jn(o,3|r,i,e);case Xt:return Jn(o,2|r,i,e);case Jt:return(t=Kn(12,o,e,4|r)).elementType=Jt,t.type=Jt,t.expirationTime=i,t;case oe:return(t=Kn(13,o,e,r)).elementType=oe,t.type=oe,t.expirationTime=i,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case Qt:s=10;break t;case $t:s=9;break t;case ee:s=11;break t;case ne:s=14;break t;case re:s=16,n=null;break t}a("130",null==t?t:typeof t,"")}return(e=Kn(s,o,e,r)).elementType=t,e.type=n,e.expirationTime=i,e}function Xn(t,e,o,n){return(t=Kn(7,t,n,e)).expirationTime=o,t}function Jn(t,e,o,n){return t=Kn(8,t,n,e),e=0===(1&e)?Xt:te,t.elementType=e,t.type=e,t.expirationTime=o,t}function Qn(t,e,o){return(t=Kn(6,t,null,e)).expirationTime=o,t}function $n(t,e,o){return(e=Kn(4,null!==t.children?t.children:[],t.key,e)).expirationTime=o,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function tr(t,e){t.didError=!1;var o=t.earliestPendingTime;0===o?t.earliestPendingTime=t.latestPendingTime=e:o<e?t.earliestPendingTime=e:t.latestPendingTime>e&&(t.latestPendingTime=e),nr(e,t)}function er(t,e){t.didError=!1,t.latestPingedTime>=e&&(t.latestPingedTime=0);var o=t.earliestPendingTime,n=t.latestPendingTime;o===e?t.earliestPendingTime=n===e?t.latestPendingTime=0:n:n===e&&(t.latestPendingTime=o),o=t.earliestSuspendedTime,n=t.latestSuspendedTime,0===o?t.earliestSuspendedTime=t.latestSuspendedTime=e:o<e?t.earliestSuspendedTime=e:n>e&&(t.latestSuspendedTime=e),nr(e,t)}function or(t,e){var o=t.earliestPendingTime;return o>e&&(e=o),(t=t.earliestSuspendedTime)>e&&(e=t),e}function nr(t,e){var o=e.earliestSuspendedTime,n=e.latestSuspendedTime,r=e.earliestPendingTime,i=e.latestPingedTime;0===(r=0!==r?r:i)&&(0===t||n<t)&&(r=n),0!==(t=r)&&o>t&&(t=o),e.nextExpirationTimeToWorkOn=r,e.expirationTime=t}function rr(t,e){if(t&&t.defaultProps)for(var o in e=r({},e),t=t.defaultProps)void 0===e[o]&&(e[o]=t[o]);return e}var ir=(new n.Component).refs;function ar(t,e,o,n){o=null===(o=o(n,e=t.memoizedState))||void 0===o?e:r({},e,o),t.memoizedState=o,null!==(n=t.updateQueue)&&0===t.expirationTime&&(n.baseState=o)}var sr={isMounted:function(t){return!!(t=t._reactInternalFiber)&&2===eo(t)},enqueueSetState:function(t,e,o){t=t._reactInternalFiber;var n=bs(),r=Xi(n=Za(n,t));r.payload=e,void 0!==o&&null!==o&&(r.callback=o),ja(),Qi(t,r),Qa(t,n)},enqueueReplaceState:function(t,e,o){t=t._reactInternalFiber;var n=bs(),r=Xi(n=Za(n,t));r.tag=Ui,r.payload=e,void 0!==o&&null!==o&&(r.callback=o),ja(),Qi(t,r),Qa(t,n)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var o=bs(),n=Xi(o=Za(o,t));n.tag=Wi,void 0!==e&&null!==e&&(n.callback=e),ja(),Qi(t,n),Qa(t,o)}};function lr(t,e,o,n,r,i,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(n,i,a):!e.prototype||!e.prototype.isPureReactComponent||(!to(o,n)||!to(r,i))}function ur(t,e,o){var n=!1,r=An,i=e.contextType;return"object"===typeof i&&null!==i?i=Hi(i):(r=Fn(e)?In:Dn.current,i=(n=null!==(n=e.contextTypes)&&void 0!==n)?Ln(t,r):An),e=new e(o,i),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=sr,t.stateNode=e,e._reactInternalFiber=t,n&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function cr(t,e,o,n){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(o,n),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(o,n),e.state!==t&&sr.enqueueReplaceState(e,e.state,null)}function pr(t,e,o,n){var r=t.stateNode;r.props=o,r.state=t.memoizedState,r.refs=ir;var i=e.contextType;"object"===typeof i&&null!==i?r.context=Hi(i):(i=Fn(e)?In:Dn.current,r.context=Ln(t,i)),null!==(i=t.updateQueue)&&(oa(t,i,o,r,n),r.state=t.memoizedState),"function"===typeof(i=e.getDerivedStateFromProps)&&(ar(t,e,i,o),r.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(e=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&sr.enqueueReplaceState(r,r.state,null),null!==(i=t.updateQueue)&&(oa(t,i,o,r,n),r.state=t.memoizedState)),"function"===typeof r.componentDidMount&&(t.effectTag|=4)}var dr=Array.isArray;function hr(t,e,o){if(null!==(t=o.ref)&&"function"!==typeof t&&"object"!==typeof t){if(o._owner){o=o._owner;var n=void 0;o&&(1!==o.tag&&a("309"),n=o.stateNode),n||a("147",t);var r=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===r?e.ref:((e=function(t){var e=n.refs;e===ir&&(e=n.refs={}),null===t?delete e[r]:e[r]=t})._stringRef=r,e)}"string"!==typeof t&&a("284"),o._owner||a("290",t)}return t}function fr(t,e){"textarea"!==t.type&&a("31","[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,"")}function gr(t){function e(e,o){if(t){var n=e.lastEffect;null!==n?(n.nextEffect=o,e.lastEffect=o):e.firstEffect=e.lastEffect=o,o.nextEffect=null,o.effectTag=8}}function o(o,n){if(!t)return null;for(;null!==n;)e(o,n),n=n.sibling;return null}function n(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e,o){return(t=Yn(t,e)).index=0,t.sibling=null,t}function i(e,o,n){return e.index=n,t?null!==(n=e.alternate)?(n=n.index)<o?(e.effectTag=2,o):n:(e.effectTag=2,o):o}function s(e){return t&&null===e.alternate&&(e.effectTag=2),e}function l(t,e,o,n){return null===e||6!==e.tag?((e=Qn(o,t.mode,n)).return=t,e):((e=r(e,o)).return=t,e)}function u(t,e,o,n){return null!==e&&e.elementType===o.type?((n=r(e,o.props)).ref=hr(t,e,o),n.return=t,n):((n=Zn(o.type,o.key,o.props,null,t.mode,n)).ref=hr(t,e,o),n.return=t,n)}function c(t,e,o,n){return null===e||4!==e.tag||e.stateNode.containerInfo!==o.containerInfo||e.stateNode.implementation!==o.implementation?((e=$n(o,t.mode,n)).return=t,e):((e=r(e,o.children||[])).return=t,e)}function p(t,e,o,n,i){return null===e||7!==e.tag?((e=Xn(o,t.mode,n,i)).return=t,e):((e=r(e,o)).return=t,e)}function d(t,e,o){if("string"===typeof e||"number"===typeof e)return(e=Qn(""+e,t.mode,o)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case qt:return(o=Zn(e.type,e.key,e.props,null,t.mode,o)).ref=hr(t,null,e),o.return=t,o;case Yt:return(e=$n(e,t.mode,o)).return=t,e}if(dr(e)||ae(e))return(e=Xn(e,t.mode,o,null)).return=t,e;fr(t,e)}return null}function h(t,e,o,n){var r=null!==e?e.key:null;if("string"===typeof o||"number"===typeof o)return null!==r?null:l(t,e,""+o,n);if("object"===typeof o&&null!==o){switch(o.$$typeof){case qt:return o.key===r?o.type===Zt?p(t,e,o.props.children,n,r):u(t,e,o,n):null;case Yt:return o.key===r?c(t,e,o,n):null}if(dr(o)||ae(o))return null!==r?null:p(t,e,o,n,null);fr(t,o)}return null}function f(t,e,o,n,r){if("string"===typeof n||"number"===typeof n)return l(e,t=t.get(o)||null,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case qt:return t=t.get(null===n.key?o:n.key)||null,n.type===Zt?p(e,t,n.props.children,r,n.key):u(e,t,n,r);case Yt:return c(e,t=t.get(null===n.key?o:n.key)||null,n,r)}if(dr(n)||ae(n))return p(e,t=t.get(o)||null,n,r,null);fr(e,n)}return null}function g(r,a,s,l){for(var u=null,c=null,p=a,g=a=0,y=null;null!==p&&g<s.length;g++){p.index>g?(y=p,p=null):y=p.sibling;var v=h(r,p,s[g],l);if(null===v){null===p&&(p=y);break}t&&p&&null===v.alternate&&e(r,p),a=i(v,a,g),null===c?u=v:c.sibling=v,c=v,p=y}if(g===s.length)return o(r,p),u;if(null===p){for(;g<s.length;g++)(p=d(r,s[g],l))&&(a=i(p,a,g),null===c?u=p:c.sibling=p,c=p);return u}for(p=n(r,p);g<s.length;g++)(y=f(p,r,g,s[g],l))&&(t&&null!==y.alternate&&p.delete(null===y.key?g:y.key),a=i(y,a,g),null===c?u=y:c.sibling=y,c=y);return t&&p.forEach(function(t){return e(r,t)}),u}function y(r,s,l,u){var c=ae(l);"function"!==typeof c&&a("150"),null==(l=c.call(l))&&a("151");for(var p=c=null,g=s,y=s=0,v=null,m=l.next();null!==g&&!m.done;y++,m=l.next()){g.index>y?(v=g,g=null):v=g.sibling;var C=h(r,g,m.value,u);if(null===C){g||(g=v);break}t&&g&&null===C.alternate&&e(r,g),s=i(C,s,y),null===p?c=C:p.sibling=C,p=C,g=v}if(m.done)return o(r,g),c;if(null===g){for(;!m.done;y++,m=l.next())null!==(m=d(r,m.value,u))&&(s=i(m,s,y),null===p?c=m:p.sibling=m,p=m);return c}for(g=n(r,g);!m.done;y++,m=l.next())null!==(m=f(g,r,y,m.value,u))&&(t&&null!==m.alternate&&g.delete(null===m.key?y:m.key),s=i(m,s,y),null===p?c=m:p.sibling=m,p=m);return t&&g.forEach(function(t){return e(r,t)}),c}return function(t,n,i,l){var u="object"===typeof i&&null!==i&&i.type===Zt&&null===i.key;u&&(i=i.props.children);var c="object"===typeof i&&null!==i;if(c)switch(i.$$typeof){case qt:t:{for(c=i.key,u=n;null!==u;){if(u.key===c){if(7===u.tag?i.type===Zt:u.elementType===i.type){o(t,u.sibling),(n=r(u,i.type===Zt?i.props.children:i.props)).ref=hr(t,u,i),n.return=t,t=n;break t}o(t,u);break}e(t,u),u=u.sibling}i.type===Zt?((n=Xn(i.props.children,t.mode,l,i.key)).return=t,t=n):((l=Zn(i.type,i.key,i.props,null,t.mode,l)).ref=hr(t,n,i),l.return=t,t=l)}return s(t);case Yt:t:{for(u=i.key;null!==n;){if(n.key===u){if(4===n.tag&&n.stateNode.containerInfo===i.containerInfo&&n.stateNode.implementation===i.implementation){o(t,n.sibling),(n=r(n,i.children||[])).return=t,t=n;break t}o(t,n);break}e(t,n),n=n.sibling}(n=$n(i,t.mode,l)).return=t,t=n}return s(t)}if("string"===typeof i||"number"===typeof i)return i=""+i,null!==n&&6===n.tag?(o(t,n.sibling),(n=r(n,i)).return=t,t=n):(o(t,n),(n=Qn(i,t.mode,l)).return=t,t=n),s(t);if(dr(i))return g(t,n,i,l);if(ae(i))return y(t,n,i,l);if(c&&fr(t,i),"undefined"===typeof i&&!u)switch(t.tag){case 1:case 0:a("152",(l=t.type).displayName||l.name||"Component")}return o(t,n)}}var yr=gr(!0),vr=gr(!1),mr={},Cr={current:mr},_r={current:mr},wr={current:mr};function br(t){return t===mr&&a("174"),t}function Sr(t,e){Pn(wr,e),Pn(_r,t),Pn(Cr,mr);var o=e.nodeType;switch(o){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:en(null,"");break;default:e=en(e=(o=8===o?e.parentNode:e).namespaceURI||null,o=o.tagName)}Rn(Cr),Pn(Cr,e)}function Er(t){Rn(Cr),Rn(_r),Rn(wr)}function xr(t){br(wr.current);var e=br(Cr.current),o=en(e,t.type);e!==o&&(Pn(_r,t),Pn(Cr,o))}function Tr(t){_r.current===t&&(Rn(Cr),Rn(_r))}var Or=0,Rr=2,Pr=4,Ar=8,Dr=16,Mr=32,Ir=64,Lr=128,Fr=Ut.ReactCurrentDispatcher,Nr=0,kr=null,Gr=null,Vr=null,Br=null,zr=null,Hr=null,jr=0,Ur=null,Wr=0,Kr=!1,qr=null,Yr=0;function Zr(){a("321")}function Xr(t,e){if(null===e)return!1;for(var o=0;o<e.length&&o<t.length;o++)if(!Qe(t[o],e[o]))return!1;return!0}function Jr(t,e,o,n,r,i){if(Nr=i,kr=e,Vr=null!==t?t.memoizedState:null,Fr.current=null===Vr?ci:pi,e=o(n,r),Kr){do{Kr=!1,Yr+=1,Vr=null!==t?t.memoizedState:null,Hr=Br,Ur=zr=Gr=null,Fr.current=pi,e=o(n,r)}while(Kr);qr=null,Yr=0}return Fr.current=ui,(t=kr).memoizedState=Br,t.expirationTime=jr,t.updateQueue=Ur,t.effectTag|=Wr,t=null!==Gr&&null!==Gr.next,Nr=0,Hr=zr=Br=Vr=Gr=kr=null,jr=0,Ur=null,Wr=0,t&&a("300"),e}function Qr(){Fr.current=ui,Nr=0,Hr=zr=Br=Vr=Gr=kr=null,jr=0,Ur=null,Wr=0,Kr=!1,qr=null,Yr=0}function $r(){var t={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===zr?Br=zr=t:zr=zr.next=t,zr}function ti(){if(null!==Hr)Hr=(zr=Hr).next,Vr=null!==(Gr=Vr)?Gr.next:null;else{null===Vr&&a("310");var t={memoizedState:(Gr=Vr).memoizedState,baseState:Gr.baseState,queue:Gr.queue,baseUpdate:Gr.baseUpdate,next:null};zr=null===zr?Br=t:zr.next=t,Vr=Gr.next}return zr}function ei(t,e){return"function"===typeof e?e(t):e}function oi(t){var e=ti(),o=e.queue;if(null===o&&a("311"),o.lastRenderedReducer=t,0<Yr){var n=o.dispatch;if(null!==qr){var r=qr.get(o);if(void 0!==r){qr.delete(o);var i=e.memoizedState;do{i=t(i,r.action),r=r.next}while(null!==r);return Qe(i,e.memoizedState)||(bi=!0),e.memoizedState=i,e.baseUpdate===o.last&&(e.baseState=i),o.lastRenderedState=i,[i,n]}}return[e.memoizedState,n]}n=o.last;var s=e.baseUpdate;if(i=e.baseState,null!==s?(null!==n&&(n.next=null),n=s.next):n=null!==n?n.next:null,null!==n){var l=r=null,u=n,c=!1;do{var p=u.expirationTime;p<Nr?(c||(c=!0,l=s,r=i),p>jr&&(jr=p)):i=u.eagerReducer===t?u.eagerState:t(i,u.action),s=u,u=u.next}while(null!==u&&u!==n);c||(l=s,r=i),Qe(i,e.memoizedState)||(bi=!0),e.memoizedState=i,e.baseUpdate=l,e.baseState=r,o.lastRenderedState=i}return[e.memoizedState,o.dispatch]}function ni(t,e,o,n){return t={tag:t,create:e,destroy:o,deps:n,next:null},null===Ur?(Ur={lastEffect:null}).lastEffect=t.next=t:null===(e=Ur.lastEffect)?Ur.lastEffect=t.next=t:(o=e.next,e.next=t,t.next=o,Ur.lastEffect=t),t}function ri(t,e,o,n){var r=$r();Wr|=t,r.memoizedState=ni(e,o,void 0,void 0===n?null:n)}function ii(t,e,o,n){var r=ti();n=void 0===n?null:n;var i=void 0;if(null!==Gr){var a=Gr.memoizedState;if(i=a.destroy,null!==n&&Xr(n,a.deps))return void ni(Or,o,i,n)}Wr|=t,r.memoizedState=ni(e,o,i,n)}function ai(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function si(){}function li(t,e,o){25>Yr||a("301");var n=t.alternate;if(t===kr||null!==n&&n===kr)if(Kr=!0,t={expirationTime:Nr,action:o,eagerReducer:null,eagerState:null,next:null},null===qr&&(qr=new Map),void 0===(o=qr.get(e)))qr.set(e,t);else{for(e=o;null!==e.next;)e=e.next;e.next=t}else{ja();var r=bs(),i={expirationTime:r=Za(r,t),action:o,eagerReducer:null,eagerState:null,next:null},s=e.last;if(null===s)i.next=i;else{var l=s.next;null!==l&&(i.next=l),s.next=i}if(e.last=i,0===t.expirationTime&&(null===n||0===n.expirationTime)&&null!==(n=e.lastRenderedReducer))try{var u=e.lastRenderedState,c=n(u,o);if(i.eagerReducer=n,i.eagerState=c,Qe(c,u))return}catch(p){}Qa(t,r)}}var ui={readContext:Hi,useCallback:Zr,useContext:Zr,useEffect:Zr,useImperativeHandle:Zr,useLayoutEffect:Zr,useMemo:Zr,useReducer:Zr,useRef:Zr,useState:Zr,useDebugValue:Zr},ci={readContext:Hi,useCallback:function(t,e){return $r().memoizedState=[t,void 0===e?null:e],t},useContext:Hi,useEffect:function(t,e){return ri(516,Lr|Ir,t,e)},useImperativeHandle:function(t,e,o){return o=null!==o&&void 0!==o?o.concat([t]):null,ri(4,Pr|Mr,ai.bind(null,e,t),o)},useLayoutEffect:function(t,e){return ri(4,Pr|Mr,t,e)},useMemo:function(t,e){var o=$r();return e=void 0===e?null:e,t=t(),o.memoizedState=[t,e],t},useReducer:function(t,e,o){var n=$r();return e=void 0!==o?o(e):e,n.memoizedState=n.baseState=e,t=(t=n.queue={last:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=li.bind(null,kr,t),[n.memoizedState,t]},useRef:function(t){return t={current:t},$r().memoizedState=t},useState:function(t){var e=$r();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={last:null,dispatch:null,lastRenderedReducer:ei,lastRenderedState:t}).dispatch=li.bind(null,kr,t),[e.memoizedState,t]},useDebugValue:si},pi={readContext:Hi,useCallback:function(t,e){var o=ti();e=void 0===e?null:e;var n=o.memoizedState;return null!==n&&null!==e&&Xr(e,n[1])?n[0]:(o.memoizedState=[t,e],t)},useContext:Hi,useEffect:function(t,e){return ii(516,Lr|Ir,t,e)},useImperativeHandle:function(t,e,o){return o=null!==o&&void 0!==o?o.concat([t]):null,ii(4,Pr|Mr,ai.bind(null,e,t),o)},useLayoutEffect:function(t,e){return ii(4,Pr|Mr,t,e)},useMemo:function(t,e){var o=ti();e=void 0===e?null:e;var n=o.memoizedState;return null!==n&&null!==e&&Xr(e,n[1])?n[0]:(t=t(),o.memoizedState=[t,e],t)},useReducer:oi,useRef:function(){return ti().memoizedState},useState:function(t){return oi(ei)},useDebugValue:si},di=null,hi=null,fi=!1;function gi(t,e){var o=Kn(5,null,null,0);o.elementType="DELETED",o.type="DELETED",o.stateNode=e,o.return=t,o.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=o,t.lastEffect=o):t.firstEffect=t.lastEffect=o}function yi(t,e){switch(t.tag){case 5:var o=t.type;return null!==(e=1!==e.nodeType||o.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function vi(t){if(fi){var e=hi;if(e){var o=e;if(!yi(t,e)){if(!(e=En(o))||!yi(t,e))return t.effectTag|=2,fi=!1,void(di=t);gi(di,o)}di=t,hi=xn(e)}else t.effectTag|=2,fi=!1,di=t}}function mi(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&18!==t.tag;)t=t.return;di=t}function Ci(t){if(t!==di)return!1;if(!fi)return mi(t),fi=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!Cn(e,t.memoizedProps))for(e=hi;e;)gi(t,e),e=En(e);return mi(t),hi=di?En(t.stateNode):null,!0}function _i(){hi=di=null,fi=!1}var wi=Ut.ReactCurrentOwner,bi=!1;function Si(t,e,o,n){e.child=null===t?vr(e,null,o,n):yr(e,t.child,o,n)}function Ei(t,e,o,n,r){o=o.render;var i=e.ref;return zi(e,r),n=Jr(t,e,o,n,i,r),null===t||bi?(e.effectTag|=1,Si(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=r&&(t.expirationTime=0),Ii(t,e,r))}function xi(t,e,o,n,r,i){if(null===t){var a=o.type;return"function"!==typeof a||qn(a)||void 0!==a.defaultProps||null!==o.compare||void 0!==o.defaultProps?((t=Zn(o.type,null,n,null,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,Ti(t,e,a,n,r,i))}return a=t.child,r<i&&(r=a.memoizedProps,(o=null!==(o=o.compare)?o:to)(r,n)&&t.ref===e.ref)?Ii(t,e,i):(e.effectTag|=1,(t=Yn(a,n)).ref=e.ref,t.return=e,e.child=t)}function Ti(t,e,o,n,r,i){return null!==t&&to(t.memoizedProps,n)&&t.ref===e.ref&&(bi=!1,r<i)?Ii(t,e,i):Ri(t,e,o,n,i)}function Oi(t,e){var o=e.ref;(null===t&&null!==o||null!==t&&t.ref!==o)&&(e.effectTag|=128)}function Ri(t,e,o,n,r){var i=Fn(o)?In:Dn.current;return i=Ln(e,i),zi(e,r),o=Jr(t,e,o,n,i,r),null===t||bi?(e.effectTag|=1,Si(t,e,o,r),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=r&&(t.expirationTime=0),Ii(t,e,r))}function Pi(t,e,o,n,r){if(Fn(o)){var i=!0;Bn(e)}else i=!1;if(zi(e,r),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),ur(e,o,n),pr(e,o,n,r),n=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,u=o.contextType;"object"===typeof u&&null!==u?u=Hi(u):u=Ln(e,u=Fn(o)?In:Dn.current);var c=o.getDerivedStateFromProps,p="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;p||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==n||l!==u)&&cr(e,a,n,u),qi=!1;var d=e.memoizedState;l=a.state=d;var h=e.updateQueue;null!==h&&(oa(e,h,n,a,r),l=e.memoizedState),s!==n||d!==l||Mn.current||qi?("function"===typeof c&&(ar(e,o,c,n),l=e.memoizedState),(s=qi||lr(e,o,s,n,d,l,u))?(p||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.effectTag|=4)):("function"===typeof a.componentDidMount&&(e.effectTag|=4),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=u,n=s):("function"===typeof a.componentDidMount&&(e.effectTag|=4),n=!1)}else a=e.stateNode,s=e.memoizedProps,a.props=e.type===e.elementType?s:rr(e.type,s),l=a.context,"object"===typeof(u=o.contextType)&&null!==u?u=Hi(u):u=Ln(e,u=Fn(o)?In:Dn.current),(p="function"===typeof(c=o.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==n||l!==u)&&cr(e,a,n,u),qi=!1,l=e.memoizedState,d=a.state=l,null!==(h=e.updateQueue)&&(oa(e,h,n,a,r),d=e.memoizedState),s!==n||l!==d||Mn.current||qi?("function"===typeof c&&(ar(e,o,c,n),d=e.memoizedState),(c=qi||lr(e,o,s,n,l,d,u))?(p||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(n,d,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,d,u)),"function"===typeof a.componentDidUpdate&&(e.effectTag|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=256),e.memoizedProps=n,e.memoizedState=d),a.props=n,a.state=d,a.context=u,n=c):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&l===t.memoizedState||(e.effectTag|=256),n=!1);return Ai(t,e,o,n,i,r)}function Ai(t,e,o,n,r,i){Oi(t,e);var a=0!==(64&e.effectTag);if(!n&&!a)return r&&zn(e,o,!1),Ii(t,e,i);n=e.stateNode,wi.current=e;var s=a&&"function"!==typeof o.getDerivedStateFromError?null:n.render();return e.effectTag|=1,null!==t&&a?(e.child=yr(e,t.child,null,i),e.child=yr(e,null,s,i)):Si(t,e,s,i),e.memoizedState=n.state,r&&zn(e,o,!0),e.child}function Di(t){var e=t.stateNode;e.pendingContext?Gn(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Gn(0,e.context,!1),Sr(t,e.containerInfo)}function Mi(t,e,o){var n=e.mode,r=e.pendingProps,i=e.memoizedState;if(0===(64&e.effectTag)){i=null;var a=!1}else i={timedOutAt:null!==i?i.timedOutAt:0},a=!0,e.effectTag&=-65;if(null===t)if(a){var s=r.fallback;t=Xn(null,n,0,null),0===(1&e.mode)&&(t.child=null!==e.memoizedState?e.child.child:e.child),n=Xn(s,n,o,null),t.sibling=n,(o=t).return=n.return=e}else o=n=vr(e,null,r.children,o);else null!==t.memoizedState?(s=(n=t.child).sibling,a?(o=r.fallback,r=Yn(n,n.pendingProps),0===(1&e.mode)&&((a=null!==e.memoizedState?e.child.child:e.child)!==n.child&&(r.child=a)),n=r.sibling=Yn(s,o,s.expirationTime),o=r,r.childExpirationTime=0,o.return=n.return=e):o=n=yr(e,n.child,r.children,o)):(s=t.child,a?(a=r.fallback,(r=Xn(null,n,0,null)).child=s,0===(1&e.mode)&&(r.child=null!==e.memoizedState?e.child.child:e.child),(n=r.sibling=Xn(a,n,o,null)).effectTag|=2,o=r,r.childExpirationTime=0,o.return=n.return=e):n=o=yr(e,s,r.children,o)),e.stateNode=t.stateNode;return e.memoizedState=i,e.child=o,n}function Ii(t,e,o){if(null!==t&&(e.contextDependencies=t.contextDependencies),e.childExpirationTime<o)return null;if(null!==t&&e.child!==t.child&&a("153"),null!==e.child){for(o=Yn(t=e.child,t.pendingProps,t.expirationTime),e.child=o,o.return=e;null!==t.sibling;)t=t.sibling,(o=o.sibling=Yn(t,t.pendingProps,t.expirationTime)).return=e;o.sibling=null}return e.child}function Li(t,e,o){var n=e.expirationTime;if(null!==t){if(t.memoizedProps!==e.pendingProps||Mn.current)bi=!0;else if(n<o){switch(bi=!1,e.tag){case 3:Di(e),_i();break;case 5:xr(e);break;case 1:Fn(e.type)&&Bn(e);break;case 4:Sr(e,e.stateNode.containerInfo);break;case 10:Vi(e,e.memoizedProps.value);break;case 13:if(null!==e.memoizedState)return 0!==(n=e.child.childExpirationTime)&&n>=o?Mi(t,e,o):null!==(e=Ii(t,e,o))?e.sibling:null}return Ii(t,e,o)}}else bi=!1;switch(e.expirationTime=0,e.tag){case 2:n=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps;var r=Ln(e,Dn.current);if(zi(e,o),r=Jr(null,e,n,t,r,o),e.effectTag|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof){if(e.tag=1,Qr(),Fn(n)){var i=!0;Bn(e)}else i=!1;e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null;var s=n.getDerivedStateFromProps;"function"===typeof s&&ar(e,n,s,t),r.updater=sr,e.stateNode=r,r._reactInternalFiber=e,pr(e,n,t,o),e=Ai(null,e,n,!0,i,o)}else e.tag=0,Si(null,e,r,o),e=e.child;return e;case 16:switch(r=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),i=e.pendingProps,t=function(t){var e=t._result;switch(t._status){case 1:return e;case 2:case 0:throw e;default:switch(t._status=0,(e=(e=t._ctor)()).then(function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)},function(e){0===t._status&&(t._status=2,t._result=e)}),t._status){case 1:return t._result;case 2:throw t._result}throw t._result=e,e}}(r),e.type=t,r=e.tag=function(t){if("function"===typeof t)return qn(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===ee)return 11;if(t===ne)return 14}return 2}(t),i=rr(t,i),s=void 0,r){case 0:s=Ri(null,e,t,i,o);break;case 1:s=Pi(null,e,t,i,o);break;case 11:s=Ei(null,e,t,i,o);break;case 14:s=xi(null,e,t,rr(t.type,i),n,o);break;default:a("306",t,"")}return s;case 0:return n=e.type,r=e.pendingProps,Ri(t,e,n,r=e.elementType===n?r:rr(n,r),o);case 1:return n=e.type,r=e.pendingProps,Pi(t,e,n,r=e.elementType===n?r:rr(n,r),o);case 3:return Di(e),null===(n=e.updateQueue)&&a("282"),r=null!==(r=e.memoizedState)?r.element:null,oa(e,n,e.pendingProps,null,o),(n=e.memoizedState.element)===r?(_i(),e=Ii(t,e,o)):(r=e.stateNode,(r=(null===t||null===t.child)&&r.hydrate)&&(hi=xn(e.stateNode.containerInfo),di=e,r=fi=!0),r?(e.effectTag|=2,e.child=vr(e,null,n,o)):(Si(t,e,n,o),_i()),e=e.child),e;case 5:return xr(e),null===t&&vi(e),n=e.type,r=e.pendingProps,i=null!==t?t.memoizedProps:null,s=r.children,Cn(n,r)?s=null:null!==i&&Cn(n,i)&&(e.effectTag|=16),Oi(t,e),1!==o&&1&e.mode&&r.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(Si(t,e,s,o),e=e.child),e;case 6:return null===t&&vi(e),null;case 13:return Mi(t,e,o);case 4:return Sr(e,e.stateNode.containerInfo),n=e.pendingProps,null===t?e.child=yr(e,null,n,o):Si(t,e,n,o),e.child;case 11:return n=e.type,r=e.pendingProps,Ei(t,e,n,r=e.elementType===n?r:rr(n,r),o);case 7:return Si(t,e,e.pendingProps,o),e.child;case 8:case 12:return Si(t,e,e.pendingProps.children,o),e.child;case 10:t:{if(n=e.type._context,r=e.pendingProps,s=e.memoizedProps,Vi(e,i=r.value),null!==s){var l=s.value;if(0===(i=Qe(l,i)?0:0|("function"===typeof n._calculateChangedBits?n._calculateChangedBits(l,i):1073741823))){if(s.children===r.children&&!Mn.current){e=Ii(t,e,o);break t}}else for(null!==(l=e.child)&&(l.return=e);null!==l;){var u=l.contextDependencies;if(null!==u){s=l.child;for(var c=u.first;null!==c;){if(c.context===n&&0!==(c.observedBits&i)){1===l.tag&&((c=Xi(o)).tag=Wi,Qi(l,c)),l.expirationTime<o&&(l.expirationTime=o),null!==(c=l.alternate)&&c.expirationTime<o&&(c.expirationTime=o),c=o;for(var p=l.return;null!==p;){var d=p.alternate;if(p.childExpirationTime<c)p.childExpirationTime=c,null!==d&&d.childExpirationTime<c&&(d.childExpirationTime=c);else{if(!(null!==d&&d.childExpirationTime<c))break;d.childExpirationTime=c}p=p.return}u.expirationTime<o&&(u.expirationTime=o);break}c=c.next}}else s=10===l.tag&&l.type===e.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===e){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}}Si(t,e,r.children,o),e=e.child}return e;case 9:return r=e.type,n=(i=e.pendingProps).children,zi(e,o),n=n(r=Hi(r,i.unstable_observedBits)),e.effectTag|=1,Si(t,e,n,o),e.child;case 14:return i=rr(r=e.type,e.pendingProps),xi(t,e,r,i=rr(r.type,i),n,o);case 15:return Ti(t,e,e.type,e.pendingProps,n,o);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:rr(n,r),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,Fn(n)?(t=!0,Bn(e)):t=!1,zi(e,o),ur(e,n,r),pr(e,n,r,o),Ai(null,e,n,!0,t,o)}a("156")}var Fi={current:null},Ni=null,ki=null,Gi=null;function Vi(t,e){var o=t.type._context;Pn(Fi,o._currentValue),o._currentValue=e}function Bi(t){var e=Fi.current;Rn(Fi),t.type._context._currentValue=e}function zi(t,e){Ni=t,Gi=ki=null;var o=t.contextDependencies;null!==o&&o.expirationTime>=e&&(bi=!0),t.contextDependencies=null}function Hi(t,e){return Gi!==t&&!1!==e&&0!==e&&("number"===typeof e&&1073741823!==e||(Gi=t,e=1073741823),e={context:t,observedBits:e,next:null},null===ki?(null===Ni&&a("308"),ki=e,Ni.contextDependencies={first:e,expirationTime:0}):ki=ki.next=e),t._currentValue}var ji=0,Ui=1,Wi=2,Ki=3,qi=!1;function Yi(t){return{baseState:t,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Zi(t){return{baseState:t.baseState,firstUpdate:t.firstUpdate,lastUpdate:t.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Xi(t){return{expirationTime:t,tag:ji,payload:null,callback:null,next:null,nextEffect:null}}function Ji(t,e){null===t.lastUpdate?t.firstUpdate=t.lastUpdate=e:(t.lastUpdate.next=e,t.lastUpdate=e)}function Qi(t,e){var o=t.alternate;if(null===o){var n=t.updateQueue,r=null;null===n&&(n=t.updateQueue=Yi(t.memoizedState))}else n=t.updateQueue,r=o.updateQueue,null===n?null===r?(n=t.updateQueue=Yi(t.memoizedState),r=o.updateQueue=Yi(o.memoizedState)):n=t.updateQueue=Zi(r):null===r&&(r=o.updateQueue=Zi(n));null===r||n===r?Ji(n,e):null===n.lastUpdate||null===r.lastUpdate?(Ji(n,e),Ji(r,e)):(Ji(n,e),r.lastUpdate=e)}function $i(t,e){var o=t.updateQueue;null===(o=null===o?t.updateQueue=Yi(t.memoizedState):ta(t,o)).lastCapturedUpdate?o.firstCapturedUpdate=o.lastCapturedUpdate=e:(o.lastCapturedUpdate.next=e,o.lastCapturedUpdate=e)}function ta(t,e){var o=t.alternate;return null!==o&&e===o.updateQueue&&(e=t.updateQueue=Zi(e)),e}function ea(t,e,o,n,i,a){switch(o.tag){case Ui:return"function"===typeof(t=o.payload)?t.call(a,n,i):t;case Ki:t.effectTag=-2049&t.effectTag|64;case ji:if(null===(i="function"===typeof(t=o.payload)?t.call(a,n,i):t)||void 0===i)break;return r({},n,i);case Wi:qi=!0}return n}function oa(t,e,o,n,r){qi=!1;for(var i=(e=ta(t,e)).baseState,a=null,s=0,l=e.firstUpdate,u=i;null!==l;){var c=l.expirationTime;c<r?(null===a&&(a=l,i=u),s<c&&(s=c)):(u=ea(t,0,l,u,o,n),null!==l.callback&&(t.effectTag|=32,l.nextEffect=null,null===e.lastEffect?e.firstEffect=e.lastEffect=l:(e.lastEffect.nextEffect=l,e.lastEffect=l))),l=l.next}for(c=null,l=e.firstCapturedUpdate;null!==l;){var p=l.expirationTime;p<r?(null===c&&(c=l,null===a&&(i=u)),s<p&&(s=p)):(u=ea(t,0,l,u,o,n),null!==l.callback&&(t.effectTag|=32,l.nextEffect=null,null===e.lastCapturedEffect?e.firstCapturedEffect=e.lastCapturedEffect=l:(e.lastCapturedEffect.nextEffect=l,e.lastCapturedEffect=l))),l=l.next}null===a&&(e.lastUpdate=null),null===c?e.lastCapturedUpdate=null:t.effectTag|=32,null===a&&null===c&&(i=u),e.baseState=i,e.firstUpdate=a,e.firstCapturedUpdate=c,t.expirationTime=s,t.memoizedState=u}function na(t,e,o){null!==e.firstCapturedUpdate&&(null!==e.lastUpdate&&(e.lastUpdate.next=e.firstCapturedUpdate,e.lastUpdate=e.lastCapturedUpdate),e.firstCapturedUpdate=e.lastCapturedUpdate=null),ra(e.firstEffect,o),e.firstEffect=e.lastEffect=null,ra(e.firstCapturedEffect,o),e.firstCapturedEffect=e.lastCapturedEffect=null}function ra(t,e){for(;null!==t;){var o=t.callback;if(null!==o){t.callback=null;var n=e;"function"!==typeof o&&a("191",o),o.call(n)}t=t.nextEffect}}function ia(t,e){return{value:t,source:e,stack:le(e)}}function aa(t){t.effectTag|=4}var sa=void 0,la=void 0,ua=void 0,ca=void 0;sa=function(t,e){for(var o=e.child;null!==o;){if(5===o.tag||6===o.tag)t.appendChild(o.stateNode);else if(4!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},la=function(){},ua=function(t,e,o,n,i){var a=t.memoizedProps;if(a!==n){var s=e.stateNode;switch(br(Cr.current),t=null,o){case"input":a=Ce(s,a),n=Ce(s,n),t=[];break;case"option":a=qo(s,a),n=qo(s,n),t=[];break;case"select":a=r({},a,{value:void 0}),n=r({},n,{value:void 0}),t=[];break;case"textarea":a=Zo(s,a),n=Zo(s,n),t=[];break;default:"function"!==typeof a.onClick&&"function"===typeof n.onClick&&(s.onclick=gn)}dn(o,n),s=o=void 0;var l=null;for(o in a)if(!n.hasOwnProperty(o)&&a.hasOwnProperty(o)&&null!=a[o])if("style"===o){var u=a[o];for(s in u)u.hasOwnProperty(s)&&(l||(l={}),l[s]="")}else"dangerouslySetInnerHTML"!==o&&"children"!==o&&"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(C.hasOwnProperty(o)?t||(t=[]):(t=t||[]).push(o,null));for(o in n){var c=n[o];if(u=null!=a?a[o]:void 0,n.hasOwnProperty(o)&&c!==u&&(null!=c||null!=u))if("style"===o)if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(l||(l={}),l[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(l||(l={}),l[s]=c[s])}else l||(t||(t=[]),t.push(o,l)),l=c;else"dangerouslySetInnerHTML"===o?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(t=t||[]).push(o,""+c)):"children"===o?u===c||"string"!==typeof c&&"number"!==typeof c||(t=t||[]).push(o,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&(C.hasOwnProperty(o)?(null!=c&&fn(i,o),t||u===c||(t=[])):(t=t||[]).push(o,c))}l&&(t=t||[]).push("style",l),i=t,(e.updateQueue=i)&&aa(e)}},ca=function(t,e,o,n){o!==n&&aa(e)};var pa="function"===typeof WeakSet?WeakSet:Set;function da(t,e){var o=e.source,n=e.stack;null===n&&null!==o&&(n=le(o)),null!==o&&se(o.type),e=e.value,null!==t&&1===t.tag&&se(t.type);try{console.error(e)}catch(r){setTimeout(function(){throw r})}}function ha(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(o){Ya(t,o)}else e.current=null}function fa(t,e,o){if(null!==(o=null!==(o=o.updateQueue)?o.lastEffect:null)){var n=o=o.next;do{if((n.tag&t)!==Or){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}(n.tag&e)!==Or&&(r=n.create,n.destroy=r()),n=n.next}while(n!==o)}}function ga(t){switch("function"===typeof jn&&jn(t),t.tag){case 0:case 11:case 14:case 15:var e=t.updateQueue;if(null!==e&&null!==(e=e.lastEffect)){var o=e=e.next;do{var n=o.destroy;if(void 0!==n){var r=t;try{n()}catch(i){Ya(r,i)}}o=o.next}while(o!==e)}break;case 1:if(ha(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(i){Ya(t,i)}break;case 5:ha(t);break;case 4:ma(t)}}function ya(t){return 5===t.tag||3===t.tag||4===t.tag}function va(t){t:{for(var e=t.return;null!==e;){if(ya(e)){var o=e;break t}e=e.return}a("160"),o=void 0}var n=e=void 0;switch(o.tag){case 5:e=o.stateNode,n=!1;break;case 3:case 4:e=o.stateNode.containerInfo,n=!0;break;default:a("161")}16&o.effectTag&&(an(e,""),o.effectTag&=-17);t:e:for(o=t;;){for(;null===o.sibling;){if(null===o.return||ya(o.return)){o=null;break t}o=o.return}for(o.sibling.return=o.return,o=o.sibling;5!==o.tag&&6!==o.tag&&18!==o.tag;){if(2&o.effectTag)continue e;if(null===o.child||4===o.tag)continue e;o.child.return=o,o=o.child}if(!(2&o.effectTag)){o=o.stateNode;break t}}for(var r=t;;){if(5===r.tag||6===r.tag)if(o)if(n){var i=e,s=r.stateNode,l=o;8===i.nodeType?i.parentNode.insertBefore(s,l):i.insertBefore(s,l)}else e.insertBefore(r.stateNode,o);else n?(s=e,l=r.stateNode,8===s.nodeType?(i=s.parentNode).insertBefore(l,s):(i=s).appendChild(l),null!==(s=s._reactRootContainer)&&void 0!==s||null!==i.onclick||(i.onclick=gn)):e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function ma(t){for(var e=t,o=!1,n=void 0,r=void 0;;){if(!o){o=e.return;t:for(;;){switch(null===o&&a("160"),o.tag){case 5:n=o.stateNode,r=!1;break t;case 3:case 4:n=o.stateNode.containerInfo,r=!0;break t}o=o.return}o=!0}if(5===e.tag||6===e.tag){t:for(var i=e,s=i;;)if(ga(s),null!==s.child&&4!==s.tag)s.child.return=s,s=s.child;else{if(s===i)break;for(;null===s.sibling;){if(null===s.return||s.return===i)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}r?(i=n,s=e.stateNode,8===i.nodeType?i.parentNode.removeChild(s):i.removeChild(s)):n.removeChild(e.stateNode)}else if(4===e.tag){if(null!==e.child){n=e.stateNode.containerInfo,r=!0,e.child.return=e,e=e.child;continue}}else if(ga(e),null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return;4===(e=e.return).tag&&(o=!1)}e.sibling.return=e.return,e=e.sibling}}function Ca(t,e){switch(e.tag){case 0:case 11:case 14:case 15:fa(Pr,Ar,e);break;case 1:break;case 5:var o=e.stateNode;if(null!=o){var n=e.memoizedProps;t=null!==t?t.memoizedProps:n;var r=e.type,i=e.updateQueue;e.updateQueue=null,null!==i&&function(t,e,o,n,r){t[L]=r,"input"===o&&"radio"===r.type&&null!=r.name&&we(t,r),hn(o,n),n=hn(o,r);for(var i=0;i<e.length;i+=2){var a=e[i],s=e[i+1];"style"===a?cn(t,s):"dangerouslySetInnerHTML"===a?rn(t,s):"children"===a?an(t,s):ve(t,a,s,n)}switch(o){case"input":be(t,r);break;case"textarea":Jo(t,r);break;case"select":e=t._wrapperState.wasMultiple,t._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?Yo(t,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?Yo(t,!!r.multiple,r.defaultValue,!0):Yo(t,!!r.multiple,r.multiple?[]:"",!1))}}(o,i,r,t,n)}break;case 6:null===e.stateNode&&a("162"),e.stateNode.nodeValue=e.memoizedProps;break;case 3:case 12:break;case 13:if(o=e.memoizedState,n=void 0,t=e,null===o?n=!1:(n=!0,t=e.child,0===o.timedOutAt&&(o.timedOutAt=bs())),null!==t&&function(t,e){for(var o=t;;){if(5===o.tag){var n=o.stateNode;if(e)n.style.display="none";else{n=o.stateNode;var r=o.memoizedProps.style;r=void 0!==r&&null!==r&&r.hasOwnProperty("display")?r.display:null,n.style.display=un("display",r)}}else if(6===o.tag)o.stateNode.nodeValue=e?"":o.memoizedProps;else{if(13===o.tag&&null!==o.memoizedState){(n=o.child.sibling).return=o,o=n;continue}if(null!==o.child){o.child.return=o,o=o.child;continue}}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}}(t,n),null!==(o=e.updateQueue)){e.updateQueue=null;var s=e.stateNode;null===s&&(s=e.stateNode=new pa),o.forEach(function(t){var o=function(t,e){var o=t.stateNode;null!==o&&o.delete(e),e=Za(e=bs(),t),null!==(t=Ja(t,e))&&(tr(t,e),0!==(e=t.expirationTime)&&Ss(t,e))}.bind(null,e,t);s.has(t)||(s.add(t),t.then(o,o))})}break;case 17:break;default:a("163")}}var _a="function"===typeof WeakMap?WeakMap:Map;function wa(t,e,o){(o=Xi(o)).tag=Ki,o.payload={element:null};var n=e.value;return o.callback=function(){Ms(n),da(t,e)},o}function ba(t,e,o){(o=Xi(o)).tag=Ki;var n=t.type.getDerivedStateFromError;if("function"===typeof n){var r=e.value;o.payload=function(){return n(r)}}var i=t.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(o.callback=function(){"function"!==typeof n&&(null===Ga?Ga=new Set([this]):Ga.add(this));var o=e.value,r=e.stack;da(t,e),this.componentDidCatch(o,{componentStack:null!==r?r:""})}),o}function Sa(t){switch(t.tag){case 1:Fn(t.type)&&Nn();var e=t.effectTag;return 2048&e?(t.effectTag=-2049&e|64,t):null;case 3:return Er(),kn(),0!==(64&(e=t.effectTag))&&a("285"),t.effectTag=-2049&e|64,t;case 5:return Tr(t),null;case 13:return 2048&(e=t.effectTag)?(t.effectTag=-2049&e|64,t):null;case 18:return null;case 4:return Er(),null;case 10:return Bi(t),null;default:return null}}var Ea=Ut.ReactCurrentDispatcher,xa=Ut.ReactCurrentOwner,Ta=1073741822,Oa=!1,Ra=null,Pa=null,Aa=0,Da=-1,Ma=!1,Ia=null,La=!1,Fa=null,Na=null,ka=null,Ga=null;function Va(){if(null!==Ra)for(var t=Ra.return;null!==t;){var e=t;switch(e.tag){case 1:var o=e.type.childContextTypes;null!==o&&void 0!==o&&Nn();break;case 3:Er(),kn();break;case 5:Tr(e);break;case 4:Er();break;case 10:Bi(e)}t=t.return}Pa=null,Aa=0,Da=-1,Ma=!1,Ra=null}function Ba(){for(;null!==Ia;){var t=Ia.effectTag;if(16&t&&an(Ia.stateNode,""),128&t){var e=Ia.alternate;null!==e&&(null!==(e=e.ref)&&("function"===typeof e?e(null):e.current=null))}switch(14&t){case 2:va(Ia),Ia.effectTag&=-3;break;case 6:va(Ia),Ia.effectTag&=-3,Ca(Ia.alternate,Ia);break;case 4:Ca(Ia.alternate,Ia);break;case 8:ma(t=Ia),t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,null!==(t=t.alternate)&&(t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null)}Ia=Ia.nextEffect}}function za(){for(;null!==Ia;){if(256&Ia.effectTag)t:{var t=Ia.alternate,e=Ia;switch(e.tag){case 0:case 11:case 15:fa(Rr,Or,e);break t;case 1:if(256&e.effectTag&&null!==t){var o=t.memoizedProps,n=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?o:rr(e.type,o),n),t.__reactInternalSnapshotBeforeUpdate=e}break t;case 3:case 5:case 6:case 4:case 17:break t;default:a("163")}}Ia=Ia.nextEffect}}function Ha(t,e){for(;null!==Ia;){var o=Ia.effectTag;if(36&o){var n=Ia.alternate,r=Ia,i=e;switch(r.tag){case 0:case 11:case 15:fa(Dr,Mr,r);break;case 1:var s=r.stateNode;if(4&r.effectTag)if(null===n)s.componentDidMount();else{var l=r.elementType===r.type?n.memoizedProps:rr(r.type,n.memoizedProps);s.componentDidUpdate(l,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}null!==(n=r.updateQueue)&&na(0,n,s);break;case 3:if(null!==(n=r.updateQueue)){if(s=null,null!==r.child)switch(r.child.tag){case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}na(0,n,s)}break;case 5:i=r.stateNode,null===n&&4&r.effectTag&&mn(r.type,r.memoizedProps)&&i.focus();break;case 6:case 4:case 12:case 13:case 17:break;default:a("163")}}128&o&&(null!==(r=Ia.ref)&&(i=Ia.stateNode,"function"===typeof r?r(i):r.current=i)),512&o&&(Fa=t),Ia=Ia.nextEffect}}function ja(){null!==Na&&Sn(Na),null!==ka&&ka()}function Ua(t,e){La=Oa=!0,t.current===e&&a("177");var o=t.pendingCommitExpirationTime;0===o&&a("261"),t.pendingCommitExpirationTime=0;var n=e.expirationTime,r=e.childExpirationTime;for(function(t,e){if(t.didError=!1,0===e)t.earliestPendingTime=0,t.latestPendingTime=0,t.earliestSuspendedTime=0,t.latestSuspendedTime=0,t.latestPingedTime=0;else{e<t.latestPingedTime&&(t.latestPingedTime=0);var o=t.latestPendingTime;0!==o&&(o>e?t.earliestPendingTime=t.latestPendingTime=0:t.earliestPendingTime>e&&(t.earliestPendingTime=t.latestPendingTime)),0===(o=t.earliestSuspendedTime)?tr(t,e):e<t.latestSuspendedTime?(t.earliestSuspendedTime=0,t.latestSuspendedTime=0,t.latestPingedTime=0,tr(t,e)):e>o&&tr(t,e)}nr(0,t)}(t,r>n?r:n),xa.current=null,n=void 0,1<e.effectTag?null!==e.lastEffect?(e.lastEffect.nextEffect=e,n=e.firstEffect):n=e:n=e.firstEffect,yn=Eo,vn=function(){var t=No();if(ko(t)){if("selectionStart"in t)var e={start:t.selectionStart,end:t.selectionEnd};else t:{var o=(e=(e=t.ownerDocument)&&e.defaultView||window).getSelection&&e.getSelection();if(o&&0!==o.rangeCount){e=o.anchorNode;var n=o.anchorOffset,r=o.focusNode;o=o.focusOffset;try{e.nodeType,r.nodeType}catch(h){e=null;break t}var i=0,a=-1,s=-1,l=0,u=0,c=t,p=null;e:for(;;){for(var d;c!==e||0!==n&&3!==c.nodeType||(a=i+n),c!==r||0!==o&&3!==c.nodeType||(s=i+o),3===c.nodeType&&(i+=c.nodeValue.length),null!==(d=c.firstChild);)p=c,c=d;for(;;){if(c===t)break e;if(p===e&&++l===n&&(a=i),p===r&&++u===o&&(s=i),null!==(d=c.nextSibling))break;p=(c=p).parentNode}c=d}e=-1===a||-1===s?null:{start:a,end:s}}else e=null}e=e||{start:0,end:0}}else e=null;return{focusedElem:t,selectionRange:e}}(),Eo=!1,Ia=n;null!==Ia;){r=!1;var s=void 0;try{za()}catch(u){r=!0,s=u}r&&(null===Ia&&a("178"),Ya(Ia,s),null!==Ia&&(Ia=Ia.nextEffect))}for(Ia=n;null!==Ia;){r=!1,s=void 0;try{Ba()}catch(u){r=!0,s=u}r&&(null===Ia&&a("178"),Ya(Ia,s),null!==Ia&&(Ia=Ia.nextEffect))}for(Go(vn),vn=null,Eo=!!yn,yn=null,t.current=e,Ia=n;null!==Ia;){r=!1,s=void 0;try{Ha(t,o)}catch(u){r=!0,s=u}r&&(null===Ia&&a("178"),Ya(Ia,s),null!==Ia&&(Ia=Ia.nextEffect))}if(null!==n&&null!==Fa){var l=function(t,e){ka=Na=Fa=null;var o=rs;rs=!0;do{if(512&e.effectTag){var n=!1,r=void 0;try{var i=e;fa(Lr,Or,i),fa(Or,Ir,i)}catch(l){n=!0,r=l}n&&Ya(e,r)}e=e.nextEffect}while(null!==e);rs=o,0!==(o=t.expirationTime)&&Ss(t,o),cs||rs||Rs(1073741823,!1)}.bind(null,t,n);Na=i.unstable_runWithPriority(i.unstable_NormalPriority,function(){return bn(l)}),ka=l}Oa=La=!1,"function"===typeof Hn&&Hn(e.stateNode),o=e.expirationTime,0===(e=(e=e.childExpirationTime)>o?e:o)&&(Ga=null),function(t,e){t.expirationTime=e,t.finishedWork=null}(t,e)}function Wa(t){for(;;){var e=t.alternate,o=t.return,n=t.sibling;if(0===(1024&t.effectTag)){Ra=t;t:{var i=e,s=Aa,l=(e=t).pendingProps;switch(e.tag){case 2:case 16:break;case 15:case 0:break;case 1:Fn(e.type)&&Nn();break;case 3:Er(),kn(),(l=e.stateNode).pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),null!==i&&null!==i.child||(Ci(e),e.effectTag&=-3),la(e);break;case 5:Tr(e);var u=br(wr.current);if(s=e.type,null!==i&&null!=e.stateNode)ua(i,e,s,l,u),i.ref!==e.ref&&(e.effectTag|=128);else if(l){var c=br(Cr.current);if(Ci(e)){i=(l=e).stateNode;var p=l.type,d=l.memoizedProps,h=u;switch(i[I]=l,i[L]=d,s=void 0,u=p){case"iframe":case"object":xo("load",i);break;case"video":case"audio":for(p=0;p<et.length;p++)xo(et[p],i);break;case"source":xo("error",i);break;case"img":case"image":case"link":xo("error",i),xo("load",i);break;case"form":xo("reset",i),xo("submit",i);break;case"details":xo("toggle",i);break;case"input":_e(i,d),xo("invalid",i),fn(h,"onChange");break;case"select":i._wrapperState={wasMultiple:!!d.multiple},xo("invalid",i),fn(h,"onChange");break;case"textarea":Xo(i,d),xo("invalid",i),fn(h,"onChange")}for(s in dn(u,d),p=null,d)d.hasOwnProperty(s)&&(c=d[s],"children"===s?"string"===typeof c?i.textContent!==c&&(p=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(p=["children",""+c]):C.hasOwnProperty(s)&&null!=c&&fn(h,s));switch(u){case"input":Ht(i),Se(i,d,!0);break;case"textarea":Ht(i),Qo(i);break;case"select":case"option":break;default:"function"===typeof d.onClick&&(i.onclick=gn)}s=p,l.updateQueue=s,(l=null!==s)&&aa(e)}else{d=e,h=s,i=l,p=9===u.nodeType?u:u.ownerDocument,c===$o.html&&(c=tn(h)),c===$o.html?"script"===h?((i=p.createElement("div")).innerHTML="<script><\/script>",p=i.removeChild(i.firstChild)):"string"===typeof i.is?p=p.createElement(h,{is:i.is}):(p=p.createElement(h),"select"===h&&(h=p,i.multiple?h.multiple=!0:i.size&&(h.size=i.size))):p=p.createElementNS(c,h),(i=p)[I]=d,i[L]=l,sa(i,e,!1,!1),h=i;var f=u,g=hn(p=s,d=l);switch(p){case"iframe":case"object":xo("load",h),u=d;break;case"video":case"audio":for(u=0;u<et.length;u++)xo(et[u],h);u=d;break;case"source":xo("error",h),u=d;break;case"img":case"image":case"link":xo("error",h),xo("load",h),u=d;break;case"form":xo("reset",h),xo("submit",h),u=d;break;case"details":xo("toggle",h),u=d;break;case"input":_e(h,d),u=Ce(h,d),xo("invalid",h),fn(f,"onChange");break;case"option":u=qo(h,d);break;case"select":h._wrapperState={wasMultiple:!!d.multiple},u=r({},d,{value:void 0}),xo("invalid",h),fn(f,"onChange");break;case"textarea":Xo(h,d),u=Zo(h,d),xo("invalid",h),fn(f,"onChange");break;default:u=d}dn(p,u),c=void 0;var y=p,v=h,m=u;for(c in m)if(m.hasOwnProperty(c)){var _=m[c];"style"===c?cn(v,_):"dangerouslySetInnerHTML"===c?null!=(_=_?_.__html:void 0)&&rn(v,_):"children"===c?"string"===typeof _?("textarea"!==y||""!==_)&&an(v,_):"number"===typeof _&&an(v,""+_):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(C.hasOwnProperty(c)?null!=_&&fn(f,c):null!=_&&ve(v,c,_,g))}switch(p){case"input":Ht(h),Se(h,d,!1);break;case"textarea":Ht(h),Qo(h);break;case"option":null!=d.value&&h.setAttribute("value",""+me(d.value));break;case"select":(u=h).multiple=!!d.multiple,null!=(h=d.value)?Yo(u,!!d.multiple,h,!1):null!=d.defaultValue&&Yo(u,!!d.multiple,d.defaultValue,!0);break;default:"function"===typeof u.onClick&&(h.onclick=gn)}(l=mn(s,l))&&aa(e),e.stateNode=i}null!==e.ref&&(e.effectTag|=128)}else null===e.stateNode&&a("166");break;case 6:i&&null!=e.stateNode?ca(i,e,i.memoizedProps,l):("string"!==typeof l&&(null===e.stateNode&&a("166")),i=br(wr.current),br(Cr.current),Ci(e)?(s=(l=e).stateNode,i=l.memoizedProps,s[I]=l,(l=s.nodeValue!==i)&&aa(e)):(s=e,(l=(9===i.nodeType?i:i.ownerDocument).createTextNode(l))[I]=e,s.stateNode=l));break;case 11:break;case 13:if(l=e.memoizedState,0!==(64&e.effectTag)){e.expirationTime=s,Ra=e;break t}l=null!==l,s=null!==i&&null!==i.memoizedState,null!==i&&!l&&s&&(null!==(i=i.child.sibling)&&(null!==(u=e.firstEffect)?(e.firstEffect=i,i.nextEffect=u):(e.firstEffect=e.lastEffect=i,i.nextEffect=null),i.effectTag=8)),(l||s)&&(e.effectTag|=4);break;case 7:case 8:case 12:break;case 4:Er(),la(e);break;case 10:Bi(e);break;case 9:case 14:break;case 17:Fn(e.type)&&Nn();break;case 18:break;default:a("156")}Ra=null}if(e=t,1===Aa||1!==e.childExpirationTime){for(l=0,s=e.child;null!==s;)(i=s.expirationTime)>l&&(l=i),(u=s.childExpirationTime)>l&&(l=u),s=s.sibling;e.childExpirationTime=l}if(null!==Ra)return Ra;null!==o&&0===(1024&o.effectTag)&&(null===o.firstEffect&&(o.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==o.lastEffect&&(o.lastEffect.nextEffect=t.firstEffect),o.lastEffect=t.lastEffect),1<t.effectTag&&(null!==o.lastEffect?o.lastEffect.nextEffect=t:o.firstEffect=t,o.lastEffect=t))}else{if(null!==(t=Sa(t)))return t.effectTag&=1023,t;null!==o&&(o.firstEffect=o.lastEffect=null,o.effectTag|=1024)}if(null!==n)return n;if(null===o)break;t=o}return null}function Ka(t){var e=Li(t.alternate,t,Aa);return t.memoizedProps=t.pendingProps,null===e&&(e=Wa(t)),xa.current=null,e}function qa(t,e){Oa&&a("243"),ja(),Oa=!0;var o=Ea.current;Ea.current=ui;var n=t.nextExpirationTimeToWorkOn;n===Aa&&t===Pa&&null!==Ra||(Va(),Aa=n,Ra=Yn((Pa=t).current,null),t.pendingCommitExpirationTime=0);for(var r=!1;;){try{if(e)for(;null!==Ra&&!Ts();)Ra=Ka(Ra);else for(;null!==Ra;)Ra=Ka(Ra)}catch(v){if(Gi=ki=Ni=null,Qr(),null===Ra)r=!0,Ms(v);else{null===Ra&&a("271");var i=Ra,s=i.return;if(null!==s){t:{var l=t,u=s,c=i,p=v;if(s=Aa,c.effectTag|=1024,c.firstEffect=c.lastEffect=null,null!==p&&"object"===typeof p&&"function"===typeof p.then){var d=p;p=u;var h=-1,f=-1;do{if(13===p.tag){var g=p.alternate;if(null!==g&&null!==(g=g.memoizedState)){f=10*(1073741822-g.timedOutAt);break}"number"===typeof(g=p.pendingProps.maxDuration)&&(0>=g?h=0:(-1===h||g<h)&&(h=g))}p=p.return}while(null!==p);p=u;do{if((g=13===p.tag)&&(g=void 0!==p.memoizedProps.fallback&&null===p.memoizedState),g){if(null===(u=p.updateQueue)?((u=new Set).add(d),p.updateQueue=u):u.add(d),0===(1&p.mode)){p.effectTag|=64,c.effectTag&=-1957,1===c.tag&&(null===c.alternate?c.tag=17:((s=Xi(1073741823)).tag=Wi,Qi(c,s))),c.expirationTime=1073741823;break t}u=s;var y=(c=l).pingCache;null===y?(y=c.pingCache=new _a,g=new Set,y.set(d,g)):void 0===(g=y.get(d))&&(g=new Set,y.set(d,g)),g.has(u)||(g.add(u),c=Xa.bind(null,c,d,u),d.then(c,c)),-1===h?l=1073741823:(-1===f&&(f=10*(1073741822-or(l,s))-5e3),l=f+h),0<=l&&Da<l&&(Da=l),p.effectTag|=2048,p.expirationTime=s;break t}p=p.return}while(null!==p);p=Error((se(c.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+le(c))}Ma=!0,p=ia(p,c),l=u;do{switch(l.tag){case 3:l.effectTag|=2048,l.expirationTime=s,$i(l,s=wa(l,p,s));break t;case 1:if(h=p,f=l.type,c=l.stateNode,0===(64&l.effectTag)&&("function"===typeof f.getDerivedStateFromError||null!==c&&"function"===typeof c.componentDidCatch&&(null===Ga||!Ga.has(c)))){l.effectTag|=2048,l.expirationTime=s,$i(l,s=ba(l,h,s));break t}}l=l.return}while(null!==l)}Ra=Wa(i);continue}r=!0,Ms(v)}}break}if(Oa=!1,Ea.current=o,Gi=ki=Ni=null,Qr(),r)Pa=null,t.finishedWork=null;else if(null!==Ra)t.finishedWork=null;else{if(null===(o=t.current.alternate)&&a("281"),Pa=null,Ma){if(r=t.latestPendingTime,i=t.latestSuspendedTime,s=t.latestPingedTime,0!==r&&r<n||0!==i&&i<n||0!==s&&s<n)return er(t,n),void ws(t,o,n,t.expirationTime,-1);if(!t.didError&&e)return t.didError=!0,n=t.nextExpirationTimeToWorkOn=n,e=t.expirationTime=1073741823,void ws(t,o,n,e,-1)}e&&-1!==Da?(er(t,n),(e=10*(1073741822-or(t,n)))<Da&&(Da=e),e=10*(1073741822-bs()),e=Da-e,ws(t,o,n,t.expirationTime,0>e?0:e)):(t.pendingCommitExpirationTime=n,t.finishedWork=o)}}function Ya(t,e){for(var o=t.return;null!==o;){switch(o.tag){case 1:var n=o.stateNode;if("function"===typeof o.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Ga||!Ga.has(n)))return Qi(o,t=ba(o,t=ia(e,t),1073741823)),void Qa(o,1073741823);break;case 3:return Qi(o,t=wa(o,t=ia(e,t),1073741823)),void Qa(o,1073741823)}o=o.return}3===t.tag&&(Qi(t,o=wa(t,o=ia(e,t),1073741823)),Qa(t,1073741823))}function Za(t,e){var o=i.unstable_getCurrentPriorityLevel(),n=void 0;if(0===(1&e.mode))n=1073741823;else if(Oa&&!La)n=Aa;else{switch(o){case i.unstable_ImmediatePriority:n=1073741823;break;case i.unstable_UserBlockingPriority:n=1073741822-10*(1+((1073741822-t+15)/10|0));break;case i.unstable_NormalPriority:n=1073741822-25*(1+((1073741822-t+500)/25|0));break;case i.unstable_LowPriority:case i.unstable_IdlePriority:n=1;break;default:a("313")}null!==Pa&&n===Aa&&--n}return o===i.unstable_UserBlockingPriority&&(0===ss||n<ss)&&(ss=n),n}function Xa(t,e,o){var n=t.pingCache;null!==n&&n.delete(e),null!==Pa&&Aa===o?Pa=null:(e=t.earliestSuspendedTime,n=t.latestSuspendedTime,0!==e&&o<=e&&o>=n&&(t.didError=!1,(0===(e=t.latestPingedTime)||e>o)&&(t.latestPingedTime=o),nr(o,t),0!==(o=t.expirationTime)&&Ss(t,o)))}function Ja(t,e){t.expirationTime<e&&(t.expirationTime=e);var o=t.alternate;null!==o&&o.expirationTime<e&&(o.expirationTime=e);var n=t.return,r=null;if(null===n&&3===t.tag)r=t.stateNode;else for(;null!==n;){if(o=n.alternate,n.childExpirationTime<e&&(n.childExpirationTime=e),null!==o&&o.childExpirationTime<e&&(o.childExpirationTime=e),null===n.return&&3===n.tag){r=n.stateNode;break}n=n.return}return r}function Qa(t,e){null!==(t=Ja(t,e))&&(!Oa&&0!==Aa&&e>Aa&&Va(),tr(t,e),Oa&&!La&&Pa===t||Ss(t,t.expirationTime),vs>ys&&(vs=0,a("185")))}function $a(t,e,o,n,r){return i.unstable_runWithPriority(i.unstable_ImmediatePriority,function(){return t(e,o,n,r)})}var ts=null,es=null,os=0,ns=void 0,rs=!1,is=null,as=0,ss=0,ls=!1,us=null,cs=!1,ps=!1,ds=null,hs=i.unstable_now(),fs=1073741822-(hs/10|0),gs=fs,ys=50,vs=0,ms=null;function Cs(){fs=1073741822-((i.unstable_now()-hs)/10|0)}function _s(t,e){if(0!==os){if(e<os)return;null!==ns&&i.unstable_cancelCallback(ns)}os=e,t=i.unstable_now()-hs,ns=i.unstable_scheduleCallback(Os,{timeout:10*(1073741822-e)-t})}function ws(t,e,o,n,r){t.expirationTime=n,0!==r||Ts()?0<r&&(t.timeoutHandle=_n(function(t,e,o){t.pendingCommitExpirationTime=o,t.finishedWork=e,Cs(),gs=fs,Ps(t,o)}.bind(null,t,e,o),r)):(t.pendingCommitExpirationTime=o,t.finishedWork=e)}function bs(){return rs?gs:(Es(),0!==as&&1!==as||(Cs(),gs=fs),gs)}function Ss(t,e){null===t.nextScheduledRoot?(t.expirationTime=e,null===es?(ts=es=t,t.nextScheduledRoot=t):(es=es.nextScheduledRoot=t).nextScheduledRoot=ts):e>t.expirationTime&&(t.expirationTime=e),rs||(cs?ps&&(is=t,as=1073741823,As(t,1073741823,!1)):1073741823===e?Rs(1073741823,!1):_s(t,e))}function Es(){var t=0,e=null;if(null!==es)for(var o=es,n=ts;null!==n;){var r=n.expirationTime;if(0===r){if((null===o||null===es)&&a("244"),n===n.nextScheduledRoot){ts=es=n.nextScheduledRoot=null;break}if(n===ts)ts=r=n.nextScheduledRoot,es.nextScheduledRoot=r,n.nextScheduledRoot=null;else{if(n===es){(es=o).nextScheduledRoot=ts,n.nextScheduledRoot=null;break}o.nextScheduledRoot=n.nextScheduledRoot,n.nextScheduledRoot=null}n=o.nextScheduledRoot}else{if(r>t&&(t=r,e=n),n===es)break;if(1073741823===t)break;o=n,n=n.nextScheduledRoot}}is=e,as=t}var xs=!1;function Ts(){return!!xs||!!i.unstable_shouldYield()&&(xs=!0)}function Os(){try{if(!Ts()&&null!==ts){Cs();var t=ts;do{var e=t.expirationTime;0!==e&&fs<=e&&(t.nextExpirationTimeToWorkOn=fs),t=t.nextScheduledRoot}while(t!==ts)}Rs(0,!0)}finally{xs=!1}}function Rs(t,e){if(Es(),e)for(Cs(),gs=fs;null!==is&&0!==as&&t<=as&&!(xs&&fs>as);)As(is,as,fs>as),Es(),Cs(),gs=fs;else for(;null!==is&&0!==as&&t<=as;)As(is,as,!1),Es();if(e&&(os=0,ns=null),0!==as&&_s(is,as),vs=0,ms=null,null!==ds)for(t=ds,ds=null,e=0;e<t.length;e++){var o=t[e];try{o._onComplete()}catch(n){ls||(ls=!0,us=n)}}if(ls)throw t=us,us=null,ls=!1,t}function Ps(t,e){rs&&a("253"),is=t,as=e,As(t,e,!1),Rs(1073741823,!1)}function As(t,e,o){if(rs&&a("245"),rs=!0,o){var n=t.finishedWork;null!==n?Ds(t,n,e):(t.finishedWork=null,-1!==(n=t.timeoutHandle)&&(t.timeoutHandle=-1,wn(n)),qa(t,o),null!==(n=t.finishedWork)&&(Ts()?t.finishedWork=n:Ds(t,n,e)))}else null!==(n=t.finishedWork)?Ds(t,n,e):(t.finishedWork=null,-1!==(n=t.timeoutHandle)&&(t.timeoutHandle=-1,wn(n)),qa(t,o),null!==(n=t.finishedWork)&&Ds(t,n,e));rs=!1}function Ds(t,e,o){var n=t.firstBatch;if(null!==n&&n._expirationTime>=o&&(null===ds?ds=[n]:ds.push(n),n._defer))return t.finishedWork=e,void(t.expirationTime=0);t.finishedWork=null,t===ms?vs++:(ms=t,vs=0),i.unstable_runWithPriority(i.unstable_ImmediatePriority,function(){Ua(t,e)})}function Ms(t){null===is&&a("246"),is.expirationTime=0,ls||(ls=!0,us=t)}function Is(t,e){var o=cs;cs=!0;try{return t(e)}finally{(cs=o)||rs||Rs(1073741823,!1)}}function Ls(t,e){if(cs&&!ps){ps=!0;try{return t(e)}finally{ps=!1}}return t(e)}function Fs(t,e,o){cs||rs||0===ss||(Rs(ss,!1),ss=0);var n=cs;cs=!0;try{return i.unstable_runWithPriority(i.unstable_UserBlockingPriority,function(){return t(e,o)})}finally{(cs=n)||rs||Rs(1073741823,!1)}}function Ns(t,e,o,n,r){var i=e.current;t:if(o){e:{2===eo(o=o._reactInternalFiber)&&1===o.tag||a("170");var s=o;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Fn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(null!==s);a("171"),s=void 0}if(1===o.tag){var l=o.type;if(Fn(l)){o=Vn(o,l,s);break t}}o=s}else o=An;return null===e.context?e.context=o:e.pendingContext=o,e=r,(r=Xi(n)).payload={element:t},null!==(e=void 0===e?null:e)&&(r.callback=e),ja(),Qi(i,r),Qa(i,n),n}function ks(t,e,o,n){var r=e.current;return Ns(t,e,o,r=Za(bs(),r),n)}function Gs(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Vs(t){var e=1073741822-25*(1+((1073741822-bs()+500)/25|0));e>=Ta&&(e=Ta-1),this._expirationTime=Ta=e,this._root=t,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function Bs(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function zs(t,e,o){t={current:e=Kn(3,null,null,e?3:0),containerInfo:t,pendingChildren:null,pingCache:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:o,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=e.stateNode=t}function Hs(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function js(t,e,o,n,r){var i=o._reactRootContainer;if(i){if("function"===typeof r){var a=r;r=function(){var t=Gs(i._internalRoot);a.call(t)}}null!=t?i.legacy_renderSubtreeIntoContainer(t,e,r):i.render(e,r)}else{if(i=o._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var o;o=t.lastChild;)t.removeChild(o);return new zs(t,!1,e)}(o,n),"function"===typeof r){var s=r;r=function(){var t=Gs(i._internalRoot);s.call(t)}}Ls(function(){null!=t?i.legacy_renderSubtreeIntoContainer(t,e,r):i.render(e,r)})}return Gs(i._internalRoot)}function Us(t,e){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Hs(e)||a("200"),function(t,e,o){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Yt,key:null==n?null:""+n,children:t,containerInfo:e,implementation:o}}(t,e,null,o)}Tt=function(t,e,o){switch(e){case"input":if(be(t,o),e=o.name,"radio"===o.type&&null!=e){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<o.length;e++){var n=o[e];if(n!==t&&n.form===t.form){var r=G(n);r||a("90"),jt(n),be(n,r)}}}break;case"textarea":Jo(t,o);break;case"select":null!=(e=o.value)&&Yo(t,!!o.multiple,e,!1)}},Vs.prototype.render=function(t){this._defer||a("250"),this._hasChildren=!0,this._children=t;var e=this._root._internalRoot,o=this._expirationTime,n=new Bs;return Ns(t,e,null,o,n._onCommit),n},Vs.prototype.then=function(t){if(this._didComplete)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},Vs.prototype.commit=function(){var t=this._root._internalRoot,e=t.firstBatch;if(this._defer&&null!==e||a("251"),this._hasChildren){var o=this._expirationTime;if(e!==this){this._hasChildren&&(o=this._expirationTime=e._expirationTime,this.render(this._children));for(var n=null,r=e;r!==this;)n=r,r=r._next;null===n&&a("251"),n._next=r._next,this._next=e,t.firstBatch=this}this._defer=!1,Ps(t,o),e=this._next,this._next=null,null!==(e=t.firstBatch=e)&&e._hasChildren&&e.render(e._children)}else this._next=null,this._defer=!1},Vs.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++)(0,t[e])()}},Bs.prototype.then=function(t){if(this._didCommit)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},Bs.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++){var o=t[e];"function"!==typeof o&&a("191",o),o()}}},zs.prototype.render=function(t,e){var o=this._internalRoot,n=new Bs;return null!==(e=void 0===e?null:e)&&n.then(e),ks(t,o,null,n._onCommit),n},zs.prototype.unmount=function(t){var e=this._internalRoot,o=new Bs;return null!==(t=void 0===t?null:t)&&o.then(t),ks(null,e,null,o._onCommit),o},zs.prototype.legacy_renderSubtreeIntoContainer=function(t,e,o){var n=this._internalRoot,r=new Bs;return null!==(o=void 0===o?null:o)&&r.then(o),ks(e,n,t,r._onCommit),r},zs.prototype.createBatch=function(){var t=new Vs(this),e=t._expirationTime,o=this._internalRoot,n=o.firstBatch;if(null===n)o.firstBatch=t,t._next=null;else{for(o=null;null!==n&&n._expirationTime>=e;)o=n,n=n._next;t._next=n,null!==o&&(o._next=t)}return t},Mt=Is,It=Fs,Lt=function(){rs||0===ss||(Rs(ss,!1),ss=0)};var Ws={createPortal:Us,findDOMNode:function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;return void 0===e&&("function"===typeof t.render?a("188"):a("268",Object.keys(t))),t=null===(t=no(e))?null:t.stateNode},hydrate:function(t,e,o){return Hs(e)||a("200"),js(null,t,e,!0,o)},render:function(t,e,o){return Hs(e)||a("200"),js(null,t,e,!1,o)},unstable_renderSubtreeIntoContainer:function(t,e,o,n){return Hs(o)||a("200"),(null==t||void 0===t._reactInternalFiber)&&a("38"),js(t,e,o,!1,n)},unmountComponentAtNode:function(t){return Hs(t)||a("40"),!!t._reactRootContainer&&(Ls(function(){js(null,null,t,!1,function(){t._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Us.apply(void 0,arguments)},unstable_batchedUpdates:Is,unstable_interactiveUpdates:Fs,flushSync:function(t,e){rs&&a("187");var o=cs;cs=!0;try{return $a(t,e)}finally{cs=o,Rs(1073741823,!1)}},unstable_createRoot:function(t,e){return Hs(t)||a("299","unstable_createRoot"),new zs(t,!0,null!=e&&!0===e.hydrate)},unstable_flushControlled:function(t){var e=cs;cs=!0;try{$a(t)}finally{(cs=e)||rs||Rs(1073741823,!1)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[N,k,G,P.injectEventPluginsByName,m,U,function(t){T(t,j)},At,Dt,Ro,D]}};!function(t){var e=t.findFiberByHostInstance;(function(t){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var o=e.inject(t);Hn=Un(function(t){return e.onCommitFiberRoot(o,t)}),jn=Un(function(t){return e.onCommitFiberUnmount(o,t)})}catch(n){}})(r({},t,{overrideProps:null,currentDispatcherRef:Ut.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=no(t))?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null}}))}({findFiberByHostInstance:F,bundleType:0,version:"16.8.6",rendererPackageName:"react-dom"});var Ks={default:Ws},qs=Ks&&Ws||Ks;t.exports=qs.default||qs},function(t,e,o){"use strict";t.exports=o(39)},function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var o=null,n=!1,r=3,i=-1,a=-1,s=!1,l=!1;function u(){if(!s){var t=o.expirationTime;l?S():l=!0,b(d,t)}}function c(){var t=o,e=o.next;if(o===e)o=null;else{var n=o.previous;o=n.next=e,e.previous=n}t.next=t.previous=null,n=t.callback,e=t.expirationTime,t=t.priorityLevel;var i=r,s=a;r=t,a=e;try{var l=n()}finally{r=i,a=s}if("function"===typeof l)if(l={callback:l,priorityLevel:t,expirationTime:e,next:null,previous:null},null===o)o=l.next=l.previous=l;else{n=null,t=o;do{if(t.expirationTime>=e){n=t;break}t=t.next}while(t!==o);null===n?n=o:n===o&&(o=l,u()),(e=n.previous).next=n.previous=l,l.next=n,l.previous=e}}function p(){if(-1===i&&null!==o&&1===o.priorityLevel){s=!0;try{do{c()}while(null!==o&&1===o.priorityLevel)}finally{s=!1,null!==o?u():l=!1}}}function d(t){s=!0;var r=n;n=t;try{if(t)for(;null!==o;){var i=e.unstable_now();if(!(o.expirationTime<=i))break;do{c()}while(null!==o&&o.expirationTime<=i)}else if(null!==o)do{c()}while(null!==o&&!E())}finally{s=!1,n=r,null!==o?u():l=!1,p()}}var h,f,g=Date,y="function"===typeof setTimeout?setTimeout:void 0,v="function"===typeof clearTimeout?clearTimeout:void 0,m="function"===typeof requestAnimationFrame?requestAnimationFrame:void 0,C="function"===typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function _(t){h=m(function(e){v(f),t(e)}),f=y(function(){C(h),t(e.unstable_now())},100)}if("object"===typeof performance&&"function"===typeof performance.now){var w=performance;e.unstable_now=function(){return w.now()}}else e.unstable_now=function(){return g.now()};var b,S,E,x=null;if("undefined"!==typeof window?x=window:"undefined"!==typeof t&&(x=t),x&&x._schedMock){var T=x._schedMock;b=T[0],S=T[1],E=T[2],e.unstable_now=T[3]}else if("undefined"===typeof window||"function"!==typeof MessageChannel){var O=null,R=function(t){if(null!==O)try{O(t)}finally{O=null}};b=function(t){null!==O?setTimeout(b,0,t):(O=t,setTimeout(R,0,!1))},S=function(){O=null},E=function(){return!1}}else{"undefined"!==typeof console&&("function"!==typeof m&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof C&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var P=null,A=!1,D=-1,M=!1,I=!1,L=0,F=33,N=33;E=function(){return L<=e.unstable_now()};var k=new MessageChannel,G=k.port2;k.port1.onmessage=function(){A=!1;var t=P,o=D;P=null,D=-1;var n=e.unstable_now(),r=!1;if(0>=L-n){if(!(-1!==o&&o<=n))return M||(M=!0,_(V)),P=t,void(D=o);r=!0}if(null!==t){I=!0;try{t(r)}finally{I=!1}}};var V=function(t){if(null!==P){_(V);var e=t-L+N;e<N&&F<N?(8>e&&(e=8),N=e<F?F:e):F=e,L=t+N,A||(A=!0,G.postMessage(void 0))}else M=!1};b=function(t,e){P=t,D=e,I||0>e?G.postMessage(void 0):M||(M=!0,_(V))},S=function(){P=null,A=!1,D=-1}}e.unstable_ImmediatePriority=1,e.unstable_UserBlockingPriority=2,e.unstable_NormalPriority=3,e.unstable_IdlePriority=5,e.unstable_LowPriority=4,e.unstable_runWithPriority=function(t,o){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=r,a=i;r=t,i=e.unstable_now();try{return o()}finally{r=n,i=a,p()}},e.unstable_next=function(t){switch(r){case 1:case 2:case 3:var o=3;break;default:o=r}var n=r,a=i;r=o,i=e.unstable_now();try{return t()}finally{r=n,i=a,p()}},e.unstable_scheduleCallback=function(t,n){var a=-1!==i?i:e.unstable_now();if("object"===typeof n&&null!==n&&"number"===typeof n.timeout)n=a+n.timeout;else switch(r){case 1:n=a+-1;break;case 2:n=a+250;break;case 5:n=a+1073741823;break;case 4:n=a+1e4;break;default:n=a+5e3}if(t={callback:t,priorityLevel:r,expirationTime:n,next:null,previous:null},null===o)o=t.next=t.previous=t,u();else{a=null;var s=o;do{if(s.expirationTime>n){a=s;break}s=s.next}while(s!==o);null===a?a=o:a===o&&(o=t,u()),(n=a.previous).next=a.previous=t,t.next=a,t.previous=n}return t},e.unstable_cancelCallback=function(t){var e=t.next;if(null!==e){if(e===t)o=null;else{t===o&&(o=e);var n=t.previous;n.next=e,e.previous=n}t.next=t.previous=null}},e.unstable_wrapCallback=function(t){var o=r;return function(){var n=r,a=i;r=o,i=e.unstable_now();try{return t.apply(this,arguments)}finally{r=n,i=a,p()}}},e.unstable_getCurrentPriorityLevel=function(){return r},e.unstable_shouldYield=function(){return!n&&(null!==o&&o.expirationTime<a||E())},e.unstable_continueExecution=function(){null!==o&&u()},e.unstable_pauseExecution=function(){},e.unstable_getFirstCallbackNode=function(){return o}}).call(this,o(11))},function(t,e){function o(t){var e=[];for(var o in t)e.push(o);return e}(t.exports="function"===typeof Object.keys?Object.keys:o).shim=o},function(t,e){var o="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=o?n:r).supported=n,e.unsupported=r},function(t,e,o){},function(t,e,o){"use strict";var n=o(44),r=o(45),i=o(46);function a(t,e,o,r,i){e=e||s,o=o||l,i=i||Array,this.nodeSize=r||64,this.points=t,this.ids=new i(t.length),this.coords=new i(2*t.length);for(var a=0;a<t.length;a++)this.ids[a]=a,this.coords[2*a]=e(t[a]),this.coords[2*a+1]=o(t[a]);n(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function s(t){return t[0]}function l(t){return t[1]}t.exports=function(t,e,o,n,r){return new a(t,e,o,n,r)},a.prototype={range:function(t,e,o,n){return r(this.ids,this.coords,t,e,o,n,this.nodeSize)},within:function(t,e,o){return i(this.ids,this.coords,t,e,o,this.nodeSize)}}},function(t,e,o){"use strict";function n(t,e,o,n){r(t,o,n),r(e,2*o,2*n),r(e,2*o+1,2*n+1)}function r(t,e,o){var n=t[e];t[e]=t[o],t[o]=n}t.exports=function t(e,o,r,i,a,s){if(a-i<=r)return;var l=Math.floor((i+a)/2);!function t(e,o,r,i,a,s){for(;a>i;){if(a-i>600){var l=a-i+1,u=r-i+1,c=Math.log(l),p=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*p*(l-p)/l)*(u-l/2<0?-1:1),h=Math.max(i,Math.floor(r-u*p/l+d)),f=Math.min(a,Math.floor(r+(l-u)*p/l+d));t(e,o,r,h,f,s)}var g=o[2*r+s],y=i,v=a;for(n(e,o,i,r),o[2*a+s]>g&&n(e,o,i,a);y<v;){for(n(e,o,y,v),y++,v--;o[2*y+s]<g;)y++;for(;o[2*v+s]>g;)v--}o[2*i+s]===g?n(e,o,i,v):n(e,o,++v,a),v<=r&&(i=v+1),r<=v&&(a=v-1)}}(e,o,l,i,a,s%2);t(e,o,r,i,l-1,s+1);t(e,o,r,l+1,a,s+1)}},function(t,e,o){"use strict";t.exports=function(t,e,o,n,r,i,a){var s,l,u=[0,t.length-1,0],c=[];for(;u.length;){var p=u.pop(),d=u.pop(),h=u.pop();if(d-h<=a)for(var f=h;f<=d;f++)s=e[2*f],l=e[2*f+1],s>=o&&s<=r&&l>=n&&l<=i&&c.push(t[f]);else{var g=Math.floor((h+d)/2);s=e[2*g],l=e[2*g+1],s>=o&&s<=r&&l>=n&&l<=i&&c.push(t[g]);var y=(p+1)%2;(0===p?o<=s:n<=l)&&(u.push(h),u.push(g-1),u.push(y)),(0===p?r>=s:i>=l)&&(u.push(g+1),u.push(d),u.push(y))}}return c}},function(t,e,o){"use strict";function n(t,e,o,n){var r=t-o,i=e-n;return r*r+i*i}t.exports=function(t,e,o,r,i,a){var s=[0,t.length-1,0],l=[],u=i*i;for(;s.length;){var c=s.pop(),p=s.pop(),d=s.pop();if(p-d<=a)for(var h=d;h<=p;h++)n(e[2*h],e[2*h+1],o,r)<=u&&l.push(t[h]);else{var f=Math.floor((d+p)/2),g=e[2*f],y=e[2*f+1];n(g,y,o,r)<=u&&l.push(t[f]);var v=(c+1)%2;(0===c?o-i<=g:r-i<=y)&&(s.push(d),s.push(f-1),s.push(v)),(0===c?o+i>=g:r+i>=y)&&(s.push(f+1),s.push(p),s.push(v))}}return l}},function(t,e,o){"use strict";function n(t,e,o){if(null!==t){var r,i,a,s,l,u,c,p,d,h,f=0,g=0,y=t.type,v="FeatureCollection"===y,m="Feature"===y,C=v?t.features.length:1;for(r=0;r<C;r++)for(c=(h=!!(d=v?t.features[r].geometry:m?t.geometry:t)&&"GeometryCollection"===d.type)?d.geometries.length:1,i=0;i<c;i++){var _=0;if(null!==(u=h?d.geometries[i]:d)){p=u.coordinates;var w=u.type;switch(f=!o||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":e(p,g,r,_),g++,_++;break;case"LineString":case"MultiPoint":for(a=0;a<p.length;a++)e(p[a],g,r,_),g++,"MultiPoint"===w&&_++;"LineString"===w&&_++;break;case"Polygon":case"MultiLineString":for(a=0;a<p.length;a++){for(s=0;s<p[a].length-f;s++)e(p[a][s],g,r,_),g++;"MultiLineString"===w&&_++}"Polygon"===w&&_++;break;case"MultiPolygon":for(a=0;a<p.length;a++){for(s=0;s<p[a].length;s++)for(l=0;l<p[a][s].length-f;l++)e(p[a][s][l],g,r,_),g++;_++}break;case"GeometryCollection":for(a=0;a<u.geometries.length;a++)n(u.geometries[a],e,o);break;default:throw new Error("Unknown Geometry Type")}}}}}function r(t,e,o,r){var i=o;return n(t,function(t,n,r,a){i=0===n&&void 0===o?t:e(i,t,n,r,a)},r),i}function i(t,e){var o;switch(t.type){case"FeatureCollection":for(o=0;o<t.features.length;o++)e(t.features[o].properties,o);break;case"Feature":e(t.properties,0)}}function a(t,e,o){var n=o;return i(t,function(t,r){n=0===r&&void 0===o?t:e(n,t,r)}),n}function s(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var o=0;o<t.features.length;o++)e(t.features[o],o)}function l(t,e,o){var n=o;return s(t,function(t,r){n=0===r&&void 0===o?t:e(n,t,r)}),n}function u(t){var e=[];return n(t,function(t){e.push(t)}),e}function c(t,e){var o,n,r,i,a,s,l,u,c=0,p="FeatureCollection"===t.type,d="Feature"===t.type,h=p?t.features.length:1;for(o=0;o<h;o++){for(s=p?t.features[o].geometry:d?t.geometry:t,u=p?t.features[o].properties:d?t.properties:{},a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,r=0;r<a;r++)if(null!==(i=l?s.geometries[r]:s))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(i,c,u);break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)e(i.geometries[n],c,u);break;default:throw new Error("Unknown Geometry Type")}else e(null,c,u);c++}}function p(t,e,o){var n=o;return c(t,function(t,r,i){n=0===r&&void 0===o?t:e(n,t,r,i)}),n}function d(t,e){c(t,function(t,o,n){var r,i=null===t?null:t.type;switch(i){case null:case"Point":case"LineString":case"Polygon":return void e(y(t,n),o,0)}switch(i){case"MultiPoint":r="Point";break;case"MultiLineString":r="LineString";break;case"MultiPolygon":r="Polygon"}t.coordinates.forEach(function(t,i){e(y({type:r,coordinates:t},n),o,i)})})}function h(t,e,o){var n=o;return d(t,function(t,r,i){n=0===r&&0===i&&void 0===o?t:e(n,t,r,i)}),n}function f(t,e){d(t,function(t,o,n){var i=0;if(t.geometry){var a=t.geometry.type;"Point"!==a&&"MultiPoint"!==a&&r(t,function(r,a){var s=v([r,a],t.properties);return e(s,o,n,i),i++,a})}})}function g(t,e,o){var n=o,r=!1;return f(t,function(t,i,a,s){n=!1===r&&void 0===o?t:e(n,t,i,a,s),r=!0}),n}function y(t,e){if(void 0===t)throw new Error("No geometry passed");return{type:"Feature",properties:e||{},geometry:t}}function v(t,e){if(!t)throw new Error("No coordinates passed");if(t.length<2)throw new Error("Coordinates must be an array of two or more positions");return{type:"Feature",properties:e||{},geometry:{type:"LineString",coordinates:t}}}function m(t,e){if(!t)throw new Error("geojson is required");var o=t.geometry?t.geometry.type:t.type;if(!o)throw new Error("invalid geojson");if("FeatureCollection"===o)throw new Error("FeatureCollection is not supported");if("GeometryCollection"===o)throw new Error("GeometryCollection is not supported");var n=t.geometry?t.geometry.coordinates:t.coordinates;if(!n)throw new Error("geojson must contain coordinates");switch(o){case"LineString":return void e(n,0,0);case"Polygon":case"MultiLineString":for(var r=0,i=0;i<n.length;i++)"MultiLineString"===o&&(r=i),e(n[i],i,r);return;case"MultiPolygon":for(var a=0;a<n.length;a++)for(var s=0;s<n[a].length;s++)e(n[a][s],s,a);return;default:throw new Error(o+" geometry not supported")}}function C(t,e,o){var n=o;return m(t,function(t,r,i){n=0===r&&void 0===o?t:e(n,t,r,i)}),n}o.r(e),o.d(e,"coordEach",function(){return n}),o.d(e,"coordReduce",function(){return r}),o.d(e,"propEach",function(){return i}),o.d(e,"propReduce",function(){return a}),o.d(e,"featureEach",function(){return s}),o.d(e,"featureReduce",function(){return l}),o.d(e,"coordAll",function(){return u}),o.d(e,"geomEach",function(){return c}),o.d(e,"geomReduce",function(){return p}),o.d(e,"flattenEach",function(){return d}),o.d(e,"flattenReduce",function(){return h}),o.d(e,"segmentEach",function(){return f}),o.d(e,"segmentReduce",function(){return g}),o.d(e,"feature",function(){return y}),o.d(e,"lineString",function(){return v}),o.d(e,"lineEach",function(){return m}),o.d(e,"lineReduce",function(){return C})},function(t,e,o){(function(e){var o;t.exports=function t(e,n,r){function i(s,l){if(!n[s]){if(!e[s]){var u="function"==typeof o&&o;if(!l&&u)return o(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var p=n[s]={exports:{}};e[s][0].call(p.exports,function(t){var o=e[s][1][t];return i(o||t)},p,p.exports,t,e,n,r)}return n[s].exports}for(var a="function"==typeof o&&o,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,o){"use strict";var n=t("./src/setup"),r=t("./src/options"),i=t("./src/api"),a=t("./src/constants");e.exports=function(t){!function(t,e){var o={options:t=r(t)};e=i(o,e),o.api=e;var s=n(o);e.onAdd=s.onAdd,e.onRemove=s.onRemove,e.types=a.types,e.options=t}(t,this)},e.exports.modes=t("./src/modes")},{"./src/api":22,"./src/constants":23,"./src/modes":56,"./src/options":61,"./src/setup":63}],2:[function(t,e,o){function n(t){if(!(this instanceof n))return new n(t);this._bbox=t||[1/0,1/0,-1/0,-1/0],this._valid=!!t}e.exports=n,n.prototype.include=function(t){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],t[0]),this._bbox[1]=Math.min(this._bbox[1],t[1]),this._bbox[2]=Math.max(this._bbox[2],t[0]),this._bbox[3]=Math.max(this._bbox[3],t[1]),this},n.prototype.equals=function(t){var e;return e=t instanceof n?t.bbox():t,this._bbox[0]==e[0]&&this._bbox[1]==e[1]&&this._bbox[2]==e[2]&&this._bbox[3]==e[3]},n.prototype.center=function(t){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},n.prototype.union=function(t){var e;return this._valid=!0,e=t instanceof n?t.bbox():t,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[2]),this._bbox[3]=Math.max(this._bbox[3],e[3]),this},n.prototype.bbox=function(){return this._valid?this._bbox:null},n.prototype.contains=function(t){if(!t)return this._fastContains();if(!this._valid)return null;var e=t[0],o=t[1];return this._bbox[0]<=e&&this._bbox[1]<=o&&this._bbox[2]>=e&&this._bbox[3]>=o},n.prototype.intersect=function(t){return this._valid?(e=t instanceof n?t.bbox():t,!(this._bbox[0]>e[2]||this._bbox[2]<e[0]||this._bbox[3]<e[1]||this._bbox[1]>e[3])):null;var e},n.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var t="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",t)},n.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null}},{}],3:[function(t,e,o){function n(t){var e=0;if(t&&t.length>0){e+=Math.abs(r(t[0]));for(var o=1;o<t.length;o++)e-=Math.abs(r(t[o]))}return e}function r(t){var e,o,n,r,s,l,u=0,c=t.length;if(c>2){for(l=0;l<c;l++)l===c-2?(n=c-2,r=c-1,s=0):l===c-1?(n=c-1,r=0,s=1):(n=l,r=l+1,s=l+2),e=t[n],o=t[r],u+=(i(t[s][0])-i(e[0]))*Math.sin(i(o[1]));u=u*a.RADIUS*a.RADIUS/2}return u}function i(t){return t*Math.PI/180}var a=t("wgs84");e.exports.geometry=function t(e){var o,r=0;switch(e.type){case"Polygon":return n(e.coordinates);case"MultiPolygon":for(o=0;o<e.coordinates.length;o++)r+=n(e.coordinates[o]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(o=0;o<e.geometries.length;o++)r+=t(e.geometries[o]);return r}},e.exports.ring=r},{wgs84:20}],4:[function(t,e,o){e.exports=function(t){return function t(e){return Array.isArray(e)&&e.length&&"number"==typeof e[0]?[e]:e.reduce(function(e,o){return Array.isArray(o)&&Array.isArray(o[0])?e.concat(t(o)):(e.push(o),e)},[])}(t)}},{}],5:[function(t,e,o){var n=t("@mapbox/geojson-normalize"),r=t("geojson-flatten"),i=t("./flatten");e.exports=function(t){if(!t)return[];var e=[];return r(n(t)).features.forEach(function(t){t.geometry&&(e=e.concat(i(t.geometry.coordinates)))}),e}},{"./flatten":4,"@mapbox/geojson-normalize":7,"geojson-flatten":13}],6:[function(t,e,o){function n(t){for(var e=a(),o=r(t),n=0;n<o.length;n++)e.include(o[n]);return e}var r=t("@mapbox/geojson-coords"),i=t("traverse"),a=t("@mapbox/extent"),s={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},l=Object.keys(s);e.exports=function(t){return n(t).bbox()},e.exports.polygon=function(t){return n(t).polygon()},e.exports.bboxify=function(t){return i(t).map(function(t){t&&l.some(function(e){return!!t[e]&&-1!==s[e].indexOf(t.type)})&&(t.bbox=n(t).bbox(),this.update(t))})}},{"@mapbox/extent":2,"@mapbox/geojson-coords":5,traverse:19}],7:[function(t,e,o){e.exports=function(t){if(!t||!t.type)return null;var e=n[t.type];return e?"geometry"===e?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}:"feature"===e?{type:"FeatureCollection",features:[t]}:"featurecollection"===e?t:void 0:null};var n={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},{}],8:[function(t,e,o){var n=t("jsonlint-lines"),r=t("./object");e.exports.hint=function(t,e){var o,i=[];if("object"==typeof t)o=t;else{if("string"!=typeof t)return[{message:"Expected string or object as input",line:0}];try{o=n.parse(t)}catch(t){var a=t.message.match(/line (\d+)/);return[{line:parseInt(a[1],10)-1,message:t.message,error:t}]}}return i=i.concat(r.hint(o,e))}},{"./object":9,"jsonlint-lines":15}],9:[function(t,e,o){var n=t("./rhr");e.exports.hint=function(t,e){function o(t){if(e&&!1===e.noDuplicateMembers||!t.__duplicateProperties__||p.push({message:"An object contained duplicate members, making parsing ambigous: "+t.__duplicateProperties__.join(", "),line:t.__line__}),!i(t,"type","string"))if(g[t.type])t&&g[t.type](t);else{var o=y[t.type.toLowerCase()];void 0!==o?p.push({message:"Expected "+o+" but got "+t.type+" (case sensitive)",line:t.__line__}):p.push({message:"The type "+t.type+" is unknown",line:t.__line__})}}function r(t,e){return t.every(function(t){return null!==t&&typeof t===e})}function i(t,e,o){if(void 0===t[e])return p.push({message:'"'+e+'" member required',line:t.__line__});if("array"===o){if(!Array.isArray(t[e]))return p.push({message:'"'+e+'" member should be an array, but is an '+typeof t[e]+" instead",line:t.__line__})}else{if("object"===o&&t[e]&&"Object"!==t[e].constructor.name)return p.push({message:'"'+e+'" member should be '+o+", but is an "+t[e].constructor.name+" instead",line:t.__line__});if(o&&typeof t[e]!==o)return p.push({message:'"'+e+'" member should be '+o+", but is an "+typeof t[e]+" instead",line:t.__line__})}}function a(t,o){if(!Array.isArray(t))return p.push({message:"position should be an array, is a "+typeof t+" instead",line:t.__line__||o});if(t.length<2)return p.push({message:"position must have 2 or more elements",line:t.__line__||o});if(t.length>3)return p.push({message:"position should not have more than 3 elements",level:"message",line:t.__line__||o});if(!r(t,"number"))return p.push({message:"each element in a position must be a number",line:t.__line__||o});if(e&&e.precisionWarning){if(d===h)return d+=1,p.push({message:"truncated warnings: we've encountered coordinate precision warning "+h+" times, no more warnings will be reported",level:"message",line:t.__line__||o});d<h&&t.forEach(function(e){var n=0,r=String(e).split(".")[1];if(void 0!==r&&(n=r.length),n>f)return d+=1,p.push({message:"precision of coordinates should be reduced",level:"message",line:t.__line__||o})})}}function s(t,e,o,n){if(void 0===n&&void 0!==t.__line__&&(n=t.__line__),0===o)return a(t,n);if(1===o&&e)if("LinearRing"===e){if(!Array.isArray(t[t.length-1]))return p.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:n}),!0;if(t.length<4&&p.push({message:"a LinearRing of coordinates needs to have four or more positions",line:n}),t.length&&(t[t.length-1].length!==t[0].length||!t[t.length-1].every(function(e,o){return t[0][o]===e})))return p.push({message:"the first and last positions in a LinearRing of coordinates must be the same",line:n}),!0}else if("Line"===e&&t.length<2)return p.push({message:"a line needs to have two or more coordinates to be valid",line:n});if(Array.isArray(t))return t.map(function(t){return s(t,e,o-1,t.__line__||n)}).some(function(t){return t});p.push({message:"a number was found where a coordinate array should have been found: this needs to be nested more deeply",line:n})}function l(t){t.crs&&("object"==typeof t.crs&&t.crs.properties&&"urn:ogc:def:crs:OGC:1.3:CRS84"===t.crs.properties.name?p.push({message:"old-style crs member is not recommended, this object is equivalent to the default and should be removed",line:t.__line__}):p.push({message:"old-style crs member is not recommended",line:t.__line__}))}function u(t){if(t.bbox)return Array.isArray(t.bbox)?(r(t.bbox,"number")||p.push({message:"each element in a bbox member must be a number",line:t.bbox.__line__}),4!==t.bbox.length&&6!==t.bbox.length&&p.push({message:"bbox must contain 4 elements (for 2D) or 6 elements (for 3D)",line:t.bbox.__line__}),p.length):void p.push({message:"bbox member must be an array of numbers, but is a "+typeof t.bbox,line:t.__line__})}function c(t){l(t),u(t),void 0!==t.id&&"string"!=typeof t.id&&"number"!=typeof t.id&&p.push({message:'Feature "id" member must have a string or number value',line:t.__line__}),void 0!==t.features&&p.push({message:'Feature object cannot contain a "features" member',line:t.__line__}),void 0!==t.coordinates&&p.push({message:'Feature object cannot contain a "coordinates" member',line:t.__line__}),"Feature"!==t.type&&p.push({message:"GeoJSON features must have a type=feature member",line:t.__line__}),i(t,"properties","object"),i(t,"geometry","object")||t.geometry&&o(t.geometry)}var p=[],d=0,h=10,f=6,g={Point:function(t){l(t),u(t),function(t){void 0!==t.properties&&p.push({message:'geometry object cannot contain a "properties" member',line:t.__line__}),void 0!==t.geometry&&p.push({message:'geometry object cannot contain a "geometry" member',line:t.__line__}),void 0!==t.features&&p.push({message:'geometry object cannot contain a "features" member',line:t.__line__})}(t),i(t,"coordinates","array")||a(t.coordinates)},Feature:c,MultiPoint:function(t){l(t),u(t),i(t,"coordinates","array")||s(t.coordinates,"",1)},LineString:function(t){l(t),u(t),i(t,"coordinates","array")||s(t.coordinates,"Line",1)},MultiLineString:function(t){l(t),u(t),i(t,"coordinates","array")||s(t.coordinates,"Line",2)},FeatureCollection:function(t){if(l(t),u(t),void 0!==t.properties&&p.push({message:'FeatureCollection object cannot contain a "properties" member',line:t.__line__}),void 0!==t.coordinates&&p.push({message:'FeatureCollection object cannot contain a "coordinates" member',line:t.__line__}),!i(t,"features","array")){if(!r(t.features,"object"))return p.push({message:"Every feature must be an object",line:t.__line__});t.features.forEach(c)}},GeometryCollection:function(t){l(t),u(t),i(t,"geometries","array")||(r(t.geometries,"object")||p.push({message:"The geometries array in a GeometryCollection must contain only geometry objects",line:t.__line__}),1===t.geometries.length&&p.push({message:"GeometryCollection with a single geometry should be avoided in favor of single part or a single object of multi-part type",line:t.geometries.__line__}),t.geometries.forEach(function(e){e&&("GeometryCollection"===e.type&&p.push({message:"GeometryCollection should avoid nested geometry collections",line:t.geometries.__line__}),o(e))}))},Polygon:function(t){l(t),u(t),i(t,"coordinates","array")||s(t.coordinates,"LinearRing",2)||n(t,p)},MultiPolygon:function(t){l(t),u(t),i(t,"coordinates","array")||s(t.coordinates,"LinearRing",3)||n(t,p)}},y=Object.keys(g).reduce(function(t,e){return t[e.toLowerCase()]=e,t},{});return"object"!=typeof t||null===t||void 0===t?(p.push({message:"The root of a GeoJSON object must be an object.",line:0}),p):(o(t),p.forEach(function(t){({}).hasOwnProperty.call(t,"line")&&void 0===t.line&&delete t.line}),p)}},{"./rhr":10}],10:[function(t,e,o){function n(t){return t*Math.PI/180}function r(t){var e=0;if(t.length>2)for(var o,r,i=0;i<t.length-1;i++)o=t[i],e+=n((r=t[i+1])[0]-o[0])*(2+Math.sin(n(o[1]))+Math.sin(n(r[1])));return e>=0}function i(t){if(t&&t.length>0){if(r(t[0]))return!1;if(!t.slice(1,t.length).every(r))return!1}return!0}e.exports=function(t,e){(function(t){return"Polygon"===t.type?i(t.coordinates):"MultiPolygon"===t.type?t.coordinates.every(i):void 0})(t)||e.push({message:"Polygons and MultiPolygons should follow the right-hand rule",level:"message",line:t.__line__})}},{}],11:[function(t,e,o){"use strict";function n(t,e){this.x=t,this.y=e}e.exports=n,n.prototype={clone:function(){return new n(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,o=t.y-this.y;return e*e+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,o=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=o,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),o=Math.sin(t),n=e*this.x-o*this.y,r=o*this.x+e*this.y;return this.x=n,this.y=r,this},_rotateAround:function(t,e){var o=Math.cos(t),n=Math.sin(t),r=e.x+o*(this.x-e.x)-n*(this.y-e.y),i=e.y+n*(this.x-e.x)+o*(this.y-e.y);return this.x=r,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},n.convert=function(t){return t instanceof n?t:Array.isArray(t)?new n(t[0],t[1]):t}},{}],12:[function(t,e,o){},{}],13:[function(t,e,o){e.exports=function t(e){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.reduce(function(e,o){return e.concat(t(o))},[]),e;case"Feature":return e.geometry?t(e.geometry).map(function(t){return{type:"Feature",properties:JSON.parse(JSON.stringify(e.properties)),geometry:t}}):e;case"MultiPoint":return e.coordinates.map(function(t){return{type:"Point",coordinates:t}});case"MultiPolygon":return e.coordinates.map(function(t){return{type:"Polygon",coordinates:t}});case"MultiLineString":return e.coordinates.map(function(t){return{type:"LineString",coordinates:t}});case"GeometryCollection":return e.geometries.map(t).reduce(function(t,e){return t.concat(e)},[]);case"Point":case"Polygon":case"LineString":return[e]}}},{}],14:[function(t,e,o){var n=e.exports=function(t,e){if(e||(e=16),void 0===t&&(t=128),t<=0)return"0";for(var o=Math.log(Math.pow(2,t))/Math.log(e),r=2;o===1/0;r*=2)o=Math.log(Math.pow(2,t/r))/Math.log(e)*r;for(var i=o-Math.floor(o),a="",r=0;r<Math.floor(o);r++)a=(l=Math.floor(Math.random()*e).toString(e))+a;if(i){var s=Math.pow(e,i),l=Math.floor(Math.random()*s).toString(e);a=l+a}var u=parseInt(a,e);return u!==1/0&&u>=Math.pow(2,t)?n(t,e):a};n.rack=function(t,e,o){var r=function(r){var a=0;do{if(a++>10){if(!o)throw new Error("too many ID collisions, use more bits");t+=o}var s=n(t,e)}while(Object.hasOwnProperty.call(i,s));return i[s]=r,s},i=r.hats={};return r.get=function(t){return r.hats[t]},r.set=function(t,e){return r.hats[t]=e,r},r.bits=t||128,r.base=e||16,r}},{}],15:[function(t,e,o){(function(n){var r=function(){function t(){this.yy={}}var e=function(t,e,o,n){for(o=o||{},n=t.length;n--;o[t[n]]=e);return o},o=[1,12],n=[1,13],r=[1,9],i=[1,10],a=[1,11],s=[1,14],l=[1,15],u=[14,18,22,24],c=[18,22],p=[22,24],d={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,o,n,r,i,a){var s=i.length-1;switch(r){case 1:this.$=t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(t);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=i[s-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=i[s-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[i[s-2],i[s]];break;case 16:this.$={},this.$[i[s][0]]=i[s][1];break;case 17:this.$=i[s-2],void 0!==i[s-2][i[s][0]]&&(this.$.__duplicateProperties__||Object.defineProperty(this.$,"__duplicateProperties__",{value:[],enumerable:!1}),this.$.__duplicateProperties__.push(i[s][0])),i[s-2][i[s][0]]=i[s][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[i[s]];break;case 21:this.$=i[s-2],i[s-2].push(i[s])}},table:[{3:5,4:o,5:6,6:n,7:3,8:r,9:4,10:i,11:a,12:1,13:2,15:7,16:8,17:s,23:l},{1:[3]},{14:[1,16]},e(u,[2,7]),e(u,[2,8]),e(u,[2,9]),e(u,[2,10]),e(u,[2,11]),e(u,[2,12]),e(u,[2,3]),e(u,[2,4]),e(u,[2,5]),e([14,18,21,22,24],[2,1]),e(u,[2,2]),{3:20,4:o,18:[1,17],19:18,20:19},{3:5,4:o,5:6,6:n,7:3,8:r,9:4,10:i,11:a,13:23,15:7,16:8,17:s,23:l,24:[1,21],25:22},{1:[2,6]},e(u,[2,13]),{18:[1,24],22:[1,25]},e(c,[2,16]),{21:[1,26]},e(u,[2,18]),{22:[1,28],24:[1,27]},e(p,[2,20]),e(u,[2,14]),{3:20,4:o,20:29},{3:5,4:o,5:6,6:n,7:3,8:r,9:4,10:i,11:a,13:30,15:7,16:8,17:s,23:l},e(u,[2,19]),{3:5,4:o,5:6,6:n,7:3,8:r,9:4,10:i,11:a,13:31,15:7,16:8,17:s,23:l},e(c,[2,17]),e(c,[2,15]),e(p,[2,21])],defaultActions:{16:[2,6]},parseError:function(t,e){function o(t,e){this.message=t,this.hash=e}if(!e.recoverable)throw o.prototype=Error,new o(t,e);this.trace(t)},parse:function(t){var e=this,o=[0],n=[null],r=[],i=this.table,a="",s=0,l=0,u=0,c=r.slice.call(arguments,1),p=Object.create(this.lexer),d={yy:{}};for(var h in this.yy)Object.prototype.hasOwnProperty.call(this.yy,h)&&(d.yy[h]=this.yy[h]);p.setInput(t,d.yy),d.yy.lexer=p,d.yy.parser=this,void 0===p.yylloc&&(p.yylloc={});var f=p.yylloc;r.push(f);var g=p.options&&p.options.ranges;"function"==typeof d.yy.parseError?this.parseError=d.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var y,v,m,C,_,w,b,S,E,x=function(){var t;return"number"!=typeof(t=p.lex()||1)&&(t=e.symbols_[t]||t),t},T={};;){if(m=o[o.length-1],this.defaultActions[m]?C=this.defaultActions[m]:(null!==y&&void 0!==y||(y=x()),C=i[m]&&i[m][y]),void 0===C||!C.length||!C[0]){var O="";for(w in E=[],i[m])this.terminals_[w]&&w>2&&E.push("'"+this.terminals_[w]+"'");O=p.showPosition?"Parse error on line "+(s+1)+":\n"+p.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[y]||y)+"'":"Parse error on line "+(s+1)+": Unexpected "+(1==y?"end of input":"'"+(this.terminals_[y]||y)+"'"),this.parseError(O,{text:p.match,token:this.terminals_[y]||y,line:p.yylineno,loc:f,expected:E})}if(C[0]instanceof Array&&C.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+y);switch(C[0]){case 1:o.push(y),n.push(p.yytext),r.push(p.yylloc),o.push(C[1]),y=null,v?(y=v,v=null):(l=p.yyleng,a=p.yytext,s=p.yylineno,f=p.yylloc,u>0&&u--);break;case 2:if(b=this.productions_[C[1]][1],T.$=n[n.length-b],T._$={first_line:r[r.length-(b||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(b||1)].first_column,last_column:r[r.length-1].last_column},g&&(T._$.range=[r[r.length-(b||1)].range[0],r[r.length-1].range[1]]),void 0!==(_=this.performAction.apply(T,[a,l,s,d.yy,C[1],n,r].concat(c))))return _;b&&(o=o.slice(0,-1*b*2),n=n.slice(0,-1*b),r=r.slice(0,-1*b)),o.push(this.productions_[C[1]][0]),n.push(T.$),r.push(T._$),S=i[o[o.length-2]][o[o.length-1]],o.push(S);break;case 3:return!0}}return!0}},h={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,o=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),o.length-1&&(this.yylineno-=o.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:o?(o.length===n.length?this.yylloc.first_column:0)+n[n.length-o.length].length-o[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var o,n,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(r.yylloc.range=this.yylloc.range.slice(0))),(n=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],o=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(var i in r)this[i]=r[i];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,o,n;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),i=0;i<r.length;i++)if((o=this._input.match(this.rules[r[i]]))&&(!e||o[0].length>e[0].length)){if(e=o,n=i,this.options.backtrack_lexer){if(!1!==(t=this.test_match(o,r[i])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,r[n]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,o,n){switch(o){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt\/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return d.lexer=h,t.prototype=d,d.Parser=t,new t}();void 0!==t&&void 0!==o&&(o.parser=r,o.Parser=r.Parser,o.parse=function(){return r.parse.apply(r,arguments)},o.main=function(e){e[1]||(console.log("Usage: "+e[0]+" FILE"),n.exit(1));var r=t("fs").readFileSync(t("path").normalize(e[1]),"utf8");return o.parser.parse(r)},void 0!==e&&t.main===e&&o.main(n.argv.slice(1)))}).call(this,t("_process"))},{_process:18,fs:12,path:17}],16:[function(t,o,n){(function(t){function e(t,e){for(var o=-1,n=null==t?0:t.length;++o<n;)if(e(t[o],o,t))return!0;return!1}function r(t,e){return t.has(e)}function i(t){var e=-1,o=Array(t.size);return t.forEach(function(t,n){o[++e]=[n,t]}),o}function a(t){var e=-1,o=Array(t.size);return t.forEach(function(t){o[++e]=t}),o}function s(t){var e=-1,o=null==t?0:t.length;for(this.clear();++e<o;){var n=t[e];this.set(n[0],n[1])}}function l(t){var e=-1,o=null==t?0:t.length;for(this.clear();++e<o;){var n=t[e];this.set(n[0],n[1])}}function u(t){var e=-1,o=null==t?0:t.length;for(this.clear();++e<o;){var n=t[e];this.set(n[0],n[1])}}function c(t){var e=-1,o=null==t?0:t.length;for(this.__data__=new u;++e<o;)this.add(t[e])}function p(t){var e=this.__data__=new l(t);this.size=e.size}function d(t,e){var o=Yt(t),n=!o&&qt(t),r=!o&&!n&&Zt(t),i=!o&&!n&&!r&&Xt(t),a=o||n||r||i,s=a?function(t,e){for(var o=-1,n=Array(t);++o<t;)n[o]=e(o);return n}(t.length,String):[],l=s.length;for(var u in t)!e&&!Ct.call(t,u)||a&&("length"==u||r&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||E(u,l))||s.push(u);return s}function h(t,e){for(var o=t.length;o--;)if(T(t[o][0],e))return o;return-1}function f(t){return null==t?void 0===t?$:K:Rt&&Rt in Object(t)?function(t){var e=Ct.call(t,Rt),o=t[Rt];try{t[Rt]=void 0;var n=!0}catch(t){}var r=wt.call(t);return n&&(e?t[Rt]=o:delete t[Rt]),r}(t):function(t){return wt.call(t)}(t)}function g(t){return A(t)&&f(t)==N}function y(t,e,o,n,r){return t===e||(null==t||null==e||!A(t)&&!A(e)?t!==t&&e!==e:function(t,e,o,n,r,i){var a=Yt(t),s=Yt(e),l=a?k:Kt(t),u=s?k:Kt(e),c=(l=l==N?q:l)==q,d=(u=u==N?q:u)==q,h=l==u;if(h&&Zt(t)){if(!Zt(e))return!1;a=!0,c=!1}if(h&&!c)return i||(i=new p),a||Xt(t)?C(t,e,o,n,r,i):_(t,e,l,o,n,r,i);if(!(o&I)){var f=c&&Ct.call(t,"__wrapped__"),g=d&&Ct.call(e,"__wrapped__");if(f||g){var y=f?t.value():t,v=g?e.value():e;return i||(i=new p),r(y,v,o,n,i)}}return!!h&&(i||(i=new p),function(t,e,o,n,r,i){var a=o&I,s=w(t),l=s.length;if(l!=w(e).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in e:Ct.call(e,c)))return!1}var p=i.get(t);if(p&&i.get(e))return p==e;var d=!0;i.set(t,e),i.set(e,t);for(var h=a;++u<l;){var f=t[c=s[u]],g=e[c];if(n)var y=a?n(g,f,c,e,t,i):n(f,g,c,t,e,i);if(!(void 0===y?f===g||r(f,g,o,n,i):y)){d=!1;break}h||(h="constructor"==c)}if(d&&!h){var v=t.constructor,m=e.constructor;v!=m&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof m&&m instanceof m)&&(d=!1)}return i.delete(t),i.delete(e),d}(t,e,o,n,r,i))}(t,e,o,n,y,r))}function v(t){return!(!P(t)||function(t){return!!_t&&_t in t}(t))&&(O(t)?bt:ot).test(x(t))}function m(t){if(!function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||yt)}(t))return Dt(t);var e=[];for(var o in Object(t))Ct.call(t,o)&&"constructor"!=o&&e.push(o);return e}function C(t,o,n,i,a,s){var l=n&I,u=t.length,p=o.length;if(u!=p&&!(l&&p>u))return!1;var d=s.get(t);if(d&&s.get(o))return d==o;var h=-1,f=!0,g=n&L?new c:void 0;for(s.set(t,o),s.set(o,t);++h<u;){var y=t[h],v=o[h];if(i)var m=l?i(v,y,h,o,t,s):i(y,v,h,t,o,s);if(void 0!==m){if(m)continue;f=!1;break}if(g){if(!e(o,function(t,e){if(!r(g,e)&&(y===t||a(y,t,n,i,s)))return g.push(e)})){f=!1;break}}else if(y!==v&&!a(y,v,n,i,s)){f=!1;break}}return s.delete(t),s.delete(o),f}function _(t,e,o,n,r,s,l){switch(o){case et:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case tt:return!(t.byteLength!=e.byteLength||!s(new xt(t),new xt(e)));case V:case B:case W:return T(+t,+e);case z:return t.name==e.name&&t.message==e.message;case Z:case J:return t==e+"";case U:var u=i;case X:var c=n&I;if(u||(u=a),t.size!=e.size&&!c)return!1;var p=l.get(t);if(p)return p==e;n|=L,l.set(t,e);var d=C(u(t),u(e),n,r,s,l);return l.delete(t),d;case Q:if(Ut)return Ut.call(t)==Ut.call(e)}return!1}function w(t){return function(t,e,o){var n=e(t);return Yt(t)?n:function(t,e){for(var o=-1,n=e.length,r=t.length;++o<n;)t[r+o]=e[o];return t}(n,o(t))}(t,D,Wt)}function b(t,e){var o=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?o["string"==typeof e?"string":"hash"]:o.map}function S(t,e){var o=function(t,e){return null==t?void 0:t[e]}(t,e);return v(o)?o:void 0}function E(t,e){return!!(e=null==e?F:e)&&("number"==typeof t||nt.test(t))&&t>-1&&t%1==0&&t<e}function x(t){if(null!=t){try{return mt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function T(t,e){return t===e||t!==t&&e!==e}function O(t){if(!P(t))return!1;var e=f(t);return e==H||e==j||e==G||e==Y}function R(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=F}function P(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function A(t){return null!=t&&"object"==typeof t}function D(t){return function(t){return null!=t&&R(t.length)&&!O(t)}(t)?d(t):m(t)}var M="__lodash_hash_undefined__",I=1,L=2,F=9007199254740991,N="[object Arguments]",k="[object Array]",G="[object AsyncFunction]",V="[object Boolean]",B="[object Date]",z="[object Error]",H="[object Function]",j="[object GeneratorFunction]",U="[object Map]",W="[object Number]",K="[object Null]",q="[object Object]",Y="[object Proxy]",Z="[object RegExp]",X="[object Set]",J="[object String]",Q="[object Symbol]",$="[object Undefined]",tt="[object ArrayBuffer]",et="[object DataView]",ot=/^\[object .+?Constructor\]$/,nt=/^(?:0|[1-9]\d*)$/,rt={};rt["[object Float32Array]"]=rt["[object Float64Array]"]=rt["[object Int8Array]"]=rt["[object Int16Array]"]=rt["[object Int32Array]"]=rt["[object Uint8Array]"]=rt["[object Uint8ClampedArray]"]=rt["[object Uint16Array]"]=rt["[object Uint32Array]"]=!0,rt[N]=rt[k]=rt[tt]=rt[V]=rt[et]=rt[B]=rt[z]=rt[H]=rt[U]=rt[W]=rt[q]=rt[Z]=rt[X]=rt[J]=rt["[object WeakMap]"]=!1;var it="object"==typeof t&&t&&t.Object===Object&&t,at="object"==typeof self&&self&&self.Object===Object&&self,st=it||at||Function("return this")(),lt="object"==typeof n&&n&&!n.nodeType&&n,ut=lt&&"object"==typeof o&&o&&!o.nodeType&&o,ct=ut&&ut.exports===lt,pt=ct&&it.process,dt=function(){try{return pt&&pt.binding&&pt.binding("util")}catch(t){}}(),ht=dt&&dt.isTypedArray,ft=Array.prototype,gt=Function.prototype,yt=Object.prototype,vt=st["__core-js_shared__"],mt=gt.toString,Ct=yt.hasOwnProperty,_t=function(){var t=/[^.]+$/.exec(vt&&vt.keys&&vt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),wt=yt.toString,bt=RegExp("^"+mt.call(Ct).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),St=ct?st.Buffer:void 0,Et=st.Symbol,xt=st.Uint8Array,Tt=yt.propertyIsEnumerable,Ot=ft.splice,Rt=Et?Et.toStringTag:void 0,Pt=Object.getOwnPropertySymbols,At=St?St.isBuffer:void 0,Dt=function(t,e){return function(o){return t(e(o))}}(Object.keys,Object),Mt=S(st,"DataView"),It=S(st,"Map"),Lt=S(st,"Promise"),Ft=S(st,"Set"),Nt=S(st,"WeakMap"),kt=S(Object,"create"),Gt=x(Mt),Vt=x(It),Bt=x(Lt),zt=x(Ft),Ht=x(Nt),jt=Et?Et.prototype:void 0,Ut=jt?jt.valueOf:void 0;s.prototype.clear=function(){this.__data__=kt?kt(null):{},this.size=0},s.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},s.prototype.get=function(t){var e=this.__data__;if(kt){var o=e[t];return o===M?void 0:o}return Ct.call(e,t)?e[t]:void 0},s.prototype.has=function(t){var e=this.__data__;return kt?void 0!==e[t]:Ct.call(e,t)},s.prototype.set=function(t,e){var o=this.__data__;return this.size+=this.has(t)?0:1,o[t]=kt&&void 0===e?M:e,this},l.prototype.clear=function(){this.__data__=[],this.size=0},l.prototype.delete=function(t){var e=this.__data__,o=h(e,t);return!(o<0||(o==e.length-1?e.pop():Ot.call(e,o,1),--this.size,0))},l.prototype.get=function(t){var e=this.__data__,o=h(e,t);return o<0?void 0:e[o][1]},l.prototype.has=function(t){return h(this.__data__,t)>-1},l.prototype.set=function(t,e){var o=this.__data__,n=h(o,t);return n<0?(++this.size,o.push([t,e])):o[n][1]=e,this},u.prototype.clear=function(){this.size=0,this.__data__={hash:new s,map:new(It||l),string:new s}},u.prototype.delete=function(t){var e=b(this,t).delete(t);return this.size-=e?1:0,e},u.prototype.get=function(t){return b(this,t).get(t)},u.prototype.has=function(t){return b(this,t).has(t)},u.prototype.set=function(t,e){var o=b(this,t),n=o.size;return o.set(t,e),this.size+=o.size==n?0:1,this},c.prototype.add=c.prototype.push=function(t){return this.__data__.set(t,M),this},c.prototype.has=function(t){return this.__data__.has(t)},p.prototype.clear=function(){this.__data__=new l,this.size=0},p.prototype.delete=function(t){var e=this.__data__,o=e.delete(t);return this.size=e.size,o},p.prototype.get=function(t){return this.__data__.get(t)},p.prototype.has=function(t){return this.__data__.has(t)},p.prototype.set=function(t,e){var o=this.__data__;if(o instanceof l){var n=o.__data__;if(!It||n.length<199)return n.push([t,e]),this.size=++o.size,this;o=this.__data__=new u(n)}return o.set(t,e),this.size=o.size,this};var Wt=Pt?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var o=-1,n=null==t?0:t.length,r=0,i=[];++o<n;){var a=t[o];e(a,o,t)&&(i[r++]=a)}return i}(Pt(t),function(e){return Tt.call(t,e)}))}:function(){return[]},Kt=f;(Mt&&Kt(new Mt(new ArrayBuffer(1)))!=et||It&&Kt(new It)!=U||Lt&&"[object Promise]"!=Kt(Lt.resolve())||Ft&&Kt(new Ft)!=X||Nt&&"[object WeakMap]"!=Kt(new Nt))&&(Kt=function(t){var e=f(t),o=e==q?t.constructor:void 0,n=o?x(o):"";if(n)switch(n){case Gt:return et;case Vt:return U;case Bt:return"[object Promise]";case zt:return X;case Ht:return"[object WeakMap]"}return e});var qt=g(function(){return arguments}())?g:function(t){return A(t)&&Ct.call(t,"callee")&&!Tt.call(t,"callee")},Yt=Array.isArray,Zt=At||function(){return!1},Xt=ht?function(t){return function(e){return t(e)}}(ht):function(t){return A(t)&&R(t.length)&&!!rt[f(t)]};o.exports=function(t,e){return y(t,e)}}).call(this,"undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],17:[function(t,e,o){(function(t){function e(t,e){for(var o=0,n=t.length-1;n>=0;n--){var r=t[n];"."===r?t.splice(n,1):".."===r?(t.splice(n,1),o++):o&&(t.splice(n,1),o--)}if(e)for(;o--;o)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var o=[],n=0;n<t.length;n++)e(t[n],n,t)&&o.push(t[n]);return o}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(t){return r.exec(t).slice(1)};o.resolve=function(){for(var o="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var a=i>=0?arguments[i]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(o=a+"/"+o,r="/"===a.charAt(0))}return o=e(n(o.split("/"),function(t){return!!t}),!r).join("/"),(r?"/":"")+o||"."},o.normalize=function(t){var r=o.isAbsolute(t),i="/"===a(t,-1);return(t=e(n(t.split("/"),function(t){return!!t}),!r).join("/"))||r||(t="."),t&&i&&(t+="/"),(r?"/":"")+t},o.isAbsolute=function(t){return"/"===t.charAt(0)},o.join=function(){var t=Array.prototype.slice.call(arguments,0);return o.normalize(n(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},o.relative=function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var o=t.length-1;o>=0&&""===t[o];o--);return e>o?[]:t.slice(e,o-e+1)}t=o.resolve(t).substr(1),e=o.resolve(e).substr(1);for(var r=n(t.split("/")),i=n(e.split("/")),a=Math.min(r.length,i.length),s=a,l=0;l<a;l++)if(r[l]!==i[l]){s=l;break}for(var u=[],l=s;l<r.length;l++)u.push("..");return(u=u.concat(i.slice(s))).join("/")},o.sep="/",o.delimiter=":",o.dirname=function(t){var e=i(t),o=e[0],n=e[1];return o||n?(n&&(n=n.substr(0,n.length-1)),o+n):"."},o.basename=function(t,e){var o=i(t)[2];return e&&o.substr(-1*e.length)===e&&(o=o.substr(0,o.length-e.length)),o},o.extname=function(t){return i(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,o){return t.substr(e,o)}:function(t,e,o){return e<0&&(e=t.length+e),t.substr(e,o)}}).call(this,t("_process"))},{_process:18}],18:[function(t,e,o){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function a(){g&&h&&(g=!1,h.length?f=h.concat(f):y=-1,f.length&&s())}function s(){if(!g){var t=i(a);g=!0;for(var e=f.length;e;){for(h=f,f=[];++y<e;)h&&h[y].run();y=-1,e=f.length}h=null,g=!1,function(t){if(p===clearTimeout)return clearTimeout(t);if((p===r||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}(t)}}function l(t,e){this.fun=t,this.array=e}function u(){}var c,p,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{p="function"==typeof clearTimeout?clearTimeout:r}catch(t){p=r}}();var h,f=[],g=!1,y=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)e[o-1]=arguments[o];f.push(new l(t,e)),1!==f.length||g||i(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.prependListener=u,d.prependOnceListener=u,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],19:[function(t,e,o){function n(t){this.value=t}function r(t,e,o){var n=[],r=[],a=!0;return function t(s){function d(){if("object"==typeof g.node&&null!==g.node){g.keys&&g.node_===g.node||(g.keys=l(g.node)),g.isLeaf=0==g.keys.length;for(var t=0;t<r.length;t++)if(r[t].node_===s){g.circular=r[t];break}}else g.isLeaf=!0,g.keys=null;g.notLeaf=!g.isLeaf,g.notRoot=!g.isRoot}var h={},f=!0,g={node:o?i(s):s,node_:s,path:[].concat(n),parent:r[r.length-1],parents:r,key:n.slice(-1)[0],isRoot:0===n.length,level:n.length,circular:null,update:function(t,e){g.isRoot||(g.parent.node[g.key]=t),g.node=t,e&&(f=!1)},delete:function(t){delete g.parent.node[g.key],t&&(f=!1)},remove:function(t){u(g.parent.node)?g.parent.node.splice(g.key,1):delete g.parent.node[g.key],t&&(f=!1)},keys:null,before:function(t){h.before=t},after:function(t){h.after=t},pre:function(t){h.pre=t},post:function(t){h.post=t},stop:function(){a=!1},block:function(){f=!1}};if(!a)return g;d();var y=e.call(g,g.node);return void 0!==y&&g.update&&g.update(y),h.before&&h.before.call(g,g.node),f?("object"!=typeof g.node||null===g.node||g.circular||(r.push(g),d(),c(g.keys,function(e,r){n.push(e),h.pre&&h.pre.call(g,g.node[e],e);var i=t(g.node[e]);o&&p.call(g.node,e)&&(g.node[e]=i.node),i.isLast=r==g.keys.length-1,i.isFirst=0==r,h.post&&h.post.call(g,i),n.pop()}),r.pop()),h.after&&h.after.call(g,g.node),g):g}(t).node}function i(t){if("object"==typeof t&&null!==t){var e;if(u(t))e=[];else if(function(t){return"[object Date]"===a(t)}(t))e=new Date(t.getTime?t.getTime():t);else if(function(t){return"[object RegExp]"===a(t)}(t))e=new RegExp(t);else if(function(t){return"[object Error]"===a(t)}(t))e={message:t.message};else if(function(t){return"[object Boolean]"===a(t)}(t))e=new Boolean(t);else if(function(t){return"[object Number]"===a(t)}(t))e=new Number(t);else if(function(t){return"[object String]"===a(t)}(t))e=new String(t);else if(Object.create&&Object.getPrototypeOf)e=Object.create(Object.getPrototypeOf(t));else if(t.constructor===Object)e={};else{var o=t.constructor&&t.constructor.prototype||t.__proto__||{},n=function(){};n.prototype=o,e=new n}return c(l(t),function(o){e[o]=t[o]}),e}return t}function a(t){return Object.prototype.toString.call(t)}var s=e.exports=function(t){return new n(t)};n.prototype.get=function(t){for(var e=this.value,o=0;o<t.length;o++){var n=t[o];if(!e||!p.call(e,n)){e=void 0;break}e=e[n]}return e},n.prototype.has=function(t){for(var e=this.value,o=0;o<t.length;o++){var n=t[o];if(!e||!p.call(e,n))return!1;e=e[n]}return!0},n.prototype.set=function(t,e){for(var o=this.value,n=0;n<t.length-1;n++){var r=t[n];p.call(o,r)||(o[r]={}),o=o[r]}return o[t[n]]=e,e},n.prototype.map=function(t){return r(this.value,t,!0)},n.prototype.forEach=function(t){return this.value=r(this.value,t,!1),this.value},n.prototype.reduce=function(t,e){var o=1===arguments.length,n=o?this.value:e;return this.forEach(function(e){this.isRoot&&o||(n=t.call(this,n,e))}),n},n.prototype.paths=function(){var t=[];return this.forEach(function(e){t.push(this.path)}),t},n.prototype.nodes=function(){var t=[];return this.forEach(function(e){t.push(this.node)}),t},n.prototype.clone=function(){var t=[],e=[];return function o(n){for(var r=0;r<t.length;r++)if(t[r]===n)return e[r];if("object"==typeof n&&null!==n){var a=i(n);return t.push(n),e.push(a),c(l(n),function(t){a[t]=o(n[t])}),t.pop(),e.pop(),a}return n}(this.value)};var l=Object.keys||function(t){var e=[];for(var o in t)e.push(o);return e},u=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},c=function(t,e){if(t.forEach)return t.forEach(e);for(var o=0;o<t.length;o++)e(t[o],o,t)};c(l(n.prototype),function(t){s[t]=function(e){var o=[].slice.call(arguments,1),r=new n(e);return r[t].apply(r,o)}});var p=Object.hasOwnProperty||function(t,e){return e in t}},{}],20:[function(t,e,o){e.exports.RADIUS=6378137,e.exports.FLATTENING=1/298.257223563,e.exports.POLAR_RADIUS=6356752.3142},{}],21:[function(t,e,o){e.exports=function(){for(var t={},e=0;e<arguments.length;e++){var o=arguments[e];for(var r in o)n.call(o,r)&&(t[r]=o[r])}return t};var n=Object.prototype.hasOwnProperty},{}],22:[function(t,e,o){"use strict";var n=t("lodash.isequal"),r=t("@mapbox/geojson-normalize"),i=t("hat"),a=t("./lib/features_at"),s=t("./lib/string_sets_are_equal"),l=t("@mapbox/geojsonhint"),u=t("./constants"),c=t("./lib/string_set"),p={Polygon:t("./feature_types/polygon"),LineString:t("./feature_types/line_string"),Point:t("./feature_types/point"),MultiPolygon:t("./feature_types/multi_feature"),MultiLineString:t("./feature_types/multi_feature"),MultiPoint:t("./feature_types/multi_feature")};e.exports=function(t,e){return e.modes=u.modes,e.getFeatureIdsAt=function(e){return a.click({point:e},null,t).map(function(t){return t.properties.id})},e.getSelectedIds=function(){return t.store.getSelectedIds()},e.getSelected=function(){return{type:u.geojsonTypes.FEATURE_COLLECTION,features:t.store.getSelectedIds().map(function(e){return t.store.get(e)}).map(function(t){return t.toGeoJSON()})}},e.getSelectedPoints=function(){return{type:u.geojsonTypes.FEATURE_COLLECTION,features:t.store.getSelectedCoordinates().map(function(t){return{type:u.geojsonTypes.FEATURE,properties:{},geometry:{type:u.geojsonTypes.POINT,coordinates:t.coordinates}}})}},e.set=function(o){if(void 0===o.type||o.type!==u.geojsonTypes.FEATURE_COLLECTION||!Array.isArray(o.features))throw new Error("Invalid FeatureCollection");var n=t.store.createRenderBatch(),r=t.store.getAllIds().slice(),i=e.add(o),a=new c(i);return(r=r.filter(function(t){return!a.has(t)})).length&&e.delete(r),n(),i},e.add=function(e){var o=l.hint(e,{precisionWarning:!1}).filter(function(t){return"message"!==t.level});if(o.length)throw new Error(o[0].message);var a=JSON.parse(JSON.stringify(r(e))).features.map(function(e){if(e.id=e.id||i(),null===e.geometry)throw new Error("Invalid geometry: null");if(void 0===t.store.get(e.id)||t.store.get(e.id).type!==e.geometry.type){var o=p[e.geometry.type];if(void 0===o)throw new Error("Invalid geometry type: ".concat(e.geometry.type,"."));var r=new o(t,e);t.store.add(r)}else{var a=t.store.get(e.id);a.properties=e.properties,n(a.getCoordinates(),e.geometry.coordinates)||a.incomingCoords(e.geometry.coordinates)}return e.id});return t.store.render(),a},e.get=function(e){var o=t.store.get(e);if(o)return o.toGeoJSON()},e.getAll=function(){return{type:u.geojsonTypes.FEATURE_COLLECTION,features:t.store.getAll().map(function(t){return t.toGeoJSON()})}},e.delete=function(o){return t.store.delete(o,{silent:!0}),e.getMode()!==u.modes.DIRECT_SELECT||t.store.getSelectedIds().length?t.store.render():t.events.changeMode(u.modes.SIMPLE_SELECT,void 0,{silent:!0}),e},e.deleteAll=function(){return t.store.delete(t.store.getAllIds(),{silent:!0}),e.getMode()===u.modes.DIRECT_SELECT?t.events.changeMode(u.modes.SIMPLE_SELECT,void 0,{silent:!0}):t.store.render(),e},e.changeMode=function(o){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o===u.modes.SIMPLE_SELECT&&e.getMode()===u.modes.SIMPLE_SELECT?s(n.featureIds||[],t.store.getSelectedIds())?e:(t.store.setSelected(n.featureIds,{silent:!0}),t.store.render(),e):o===u.modes.DIRECT_SELECT&&e.getMode()===u.modes.DIRECT_SELECT&&n.featureId===t.store.getSelectedIds()[0]?e:(t.events.changeMode(o,n,{silent:!0}),e)},e.getMode=function(){return t.events.getMode()},e.trash=function(){return t.events.trash({silent:!0}),e},e.combineFeatures=function(){return t.events.combineFeatures({silent:!0}),e},e.uncombineFeatures=function(){return t.events.uncombineFeatures({silent:!0}),e},e.setFeatureProperty=function(o,n,r){return t.store.setFeatureProperty(o,n,r),e},e}},{"./constants":23,"./feature_types/line_string":26,"./feature_types/multi_feature":27,"./feature_types/point":28,"./feature_types/polygon":29,"./lib/features_at":37,"./lib/string_set":47,"./lib/string_sets_are_equal":48,"@mapbox/geojson-normalize":7,"@mapbox/geojsonhint":8,hat:14,"lodash.isequal":16}],23:[function(t,e,o){"use strict";e.exports={classes:{CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},sources:{HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},cursors:{ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},types:{POLYGON:"polygon",LINE:"line_string",POINT:"point"},geojsonTypes:{FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},modes:{DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},events:{CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},updateActions:{MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},meta:{FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},activeStates:{ACTIVE:"true",INACTIVE:"false"},interactions:["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],LAT_MIN:-90,LAT_RENDERED_MIN:-85,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}},{}],24:[function(t,e,o){"use strict";var n=t("./lib/mode_handler"),r=t("./lib/get_features_and_set_cursor"),i=t("./lib/features_at"),a=t("./lib/is_click"),s=t("./lib/is_tap"),l=t("./constants"),u=t("./modes/object_to_mode");e.exports=function(t){function e(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};f.stop();var a=o[e];if(void 0===a)throw new Error("".concat(e," is not valid"));h=e;var s=a(t,r);f=n(s,t),i.silent||t.map.fire(l.events.MODE_CHANGE,{mode:e}),t.store.setDirty(),t.store.render()}var o=Object.keys(t.options.modes).reduce(function(e,o){return e[o]=u(t.options.modes[o]),e},{}),c={},p={},d={},h=null,f=null;d.drag=function(e,o){o({point:e.point,time:(new Date).getTime()})?(t.ui.queueMapClasses({mouse:l.cursors.DRAG}),f.drag(e)):e.originalEvent.stopPropagation()},d.mousedrag=function(t){d.drag(t,function(t){return!a(c,t)})},d.touchdrag=function(t){d.drag(t,function(t){return!s(p,t)})},d.mousemove=function(e){if(1===(void 0!==e.originalEvent.buttons?e.originalEvent.buttons:e.originalEvent.which))return d.mousedrag(e);var o=r(e,t);e.featureTarget=o,f.mousemove(e)},d.mousedown=function(e){c={time:(new Date).getTime(),point:e.point};var o=r(e,t);e.featureTarget=o,f.mousedown(e)},d.mouseup=function(e){var o=r(e,t);e.featureTarget=o,a(c,{point:e.point,time:(new Date).getTime()})?f.click(e):f.mouseup(e)},d.mouseout=function(t){f.mouseout(t)},d.touchstart=function(e){if(e.originalEvent.preventDefault(),t.options.touchEnabled){p={time:(new Date).getTime(),point:e.point};var o=i.touch(e,null,t)[0];e.featureTarget=o,f.touchstart(e)}},d.touchmove=function(e){if(e.originalEvent.preventDefault(),t.options.touchEnabled)return f.touchmove(e),d.touchdrag(e)},d.touchend=function(e){if(e.originalEvent.preventDefault(),t.options.touchEnabled){var o=i.touch(e,null,t)[0];e.featureTarget=o,s(p,{time:(new Date).getTime(),point:e.point})?f.tap(e):f.touchend(e)}};var g=function(t){return!(8===t||46===t||t>=48&&t<=57)};d.keydown=function(o){"mapboxgl-canvas"===(o.srcElement||o.target).classList[0]&&(8!==o.keyCode&&46!==o.keyCode||!t.options.controls.trash?g(o.keyCode)?f.keydown(o):49===o.keyCode&&t.options.controls.point?e(l.modes.DRAW_POINT):50===o.keyCode&&t.options.controls.line_string?e(l.modes.DRAW_LINE_STRING):51===o.keyCode&&t.options.controls.polygon&&e(l.modes.DRAW_POLYGON):(o.preventDefault(),f.trash()))},d.keyup=function(t){g(t.keyCode)&&f.keyup(t)},d.zoomend=function(){t.store.changeZoom()},d.data=function(e){if("style"===e.dataType){var o=t.setup,n=t.map,r=t.options,i=t.store;r.styles.some(function(t){return n.getLayer(t.id)})||(o.addLayers(),i.setDirty(),i.render())}};var y={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){h=t.options.defaultMode,f=n(o[h](t),t)},changeMode:e,actionable:function(e){var o=!1;Object.keys(e).forEach(function(t){if(void 0===y[t])throw new Error("Invalid action type");y[t]!==e[t]&&(o=!0),y[t]=e[t]}),o&&t.map.fire(l.events.ACTIONABLE,{actions:y})},currentModeName:function(){return h},currentModeRender:function(t,e){return f.render(t,e)},fire:function(t,e){d[t]&&d[t](e)},addEventListeners:function(){t.map.on("mousemove",d.mousemove),t.map.on("mousedown",d.mousedown),t.map.on("mouseup",d.mouseup),t.map.on("data",d.data),t.map.on("touchmove",d.touchmove),t.map.on("touchstart",d.touchstart),t.map.on("touchend",d.touchend),t.container.addEventListener("mouseout",d.mouseout),t.options.keybindings&&(t.container.addEventListener("keydown",d.keydown),t.container.addEventListener("keyup",d.keyup))},removeEventListeners:function(){t.map.off("mousemove",d.mousemove),t.map.off("mousedown",d.mousedown),t.map.off("mouseup",d.mouseup),t.map.off("data",d.data),t.map.off("touchmove",d.touchmove),t.map.off("touchstart",d.touchstart),t.map.off("touchend",d.touchend),t.container.removeEventListener("mouseout",d.mouseout),t.options.keybindings&&(t.container.removeEventListener("keydown",d.keydown),t.container.removeEventListener("keyup",d.keyup))},trash:function(t){f.trash(t)},combineFeatures:function(){f.combineFeatures()},uncombineFeatures:function(){f.uncombineFeatures()},getMode:function(){return h}}}},{"./constants":23,"./lib/features_at":37,"./lib/get_features_and_set_cursor":38,"./lib/is_click":39,"./lib/is_tap":41,"./lib/mode_handler":43,"./modes/object_to_mode":59}],25:[function(t,e,o){"use strict";var n=t("hat"),r=t("../constants"),i=function(t,e){this.ctx=t,this.properties=e.properties||{},this.coordinates=e.geometry.coordinates,this.id=e.id||n(),this.type=e.geometry.type};i.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},i.prototype.incomingCoords=function(t){this.setCoordinates(t)},i.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},i.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},i.prototype.setProperty=function(t,e){this.properties[t]=e},i.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:r.geojsonTypes.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},i.prototype.internal=function(t){var e={id:this.id,meta:r.meta.FEATURE,"meta:type":this.type,active:r.activeStates.INACTIVE,mode:t};if(this.ctx.options.userProperties)for(var o in this.properties)e["user_".concat(o)]=this.properties[o];return{type:r.geojsonTypes.FEATURE,properties:e,geometry:{coordinates:this.getCoordinates(),type:this.type}}},e.exports=i},{"../constants":23,hat:14}],26:[function(t,e,o){"use strict";var n=t("./feature"),r=function(t,e){n.call(this,t,e)};(r.prototype=Object.create(n.prototype)).isValid=function(){return this.coordinates.length>1},r.prototype.addCoordinate=function(t,e,o){this.changed();var n=parseInt(t,10);this.coordinates.splice(n,0,[e,o])},r.prototype.getCoordinate=function(t){var e=parseInt(t,10);return JSON.parse(JSON.stringify(this.coordinates[e]))},r.prototype.removeCoordinate=function(t){this.changed(),this.coordinates.splice(parseInt(t,10),1)},r.prototype.updateCoordinate=function(t,e,o){var n=parseInt(t,10);this.coordinates[n]=[e,o],this.changed()},e.exports=r},{"./feature":25}],27:[function(t,e,o){"use strict";var n=t("./feature"),r=t("../constants"),i=t("hat"),a={MultiPoint:t("./point"),MultiLineString:t("./line_string"),MultiPolygon:t("./polygon")},s=function(t,e,o,n,r){var i=o.split("."),a=parseInt(i[0],10),s=i[1]?i.slice(1).join("."):null;return t[a][e](s,n,r)},l=function(t,e){if(n.call(this,t,e),delete this.coordinates,this.model=a[e.geometry.type],void 0===this.model)throw new TypeError("".concat(e.geometry.type," is not a valid type"));this.features=this._coordinatesToFeatures(e.geometry.coordinates)};(l.prototype=Object.create(n.prototype))._coordinatesToFeatures=function(t){var e=this,o=this.model.bind(this);return t.map(function(t){return new o(e.ctx,{id:i(),type:r.geojsonTypes.FEATURE,properties:{},geometry:{coordinates:t,type:e.type.replace("Multi","")}})})},l.prototype.isValid=function(){return this.features.every(function(t){return t.isValid()})},l.prototype.setCoordinates=function(t){this.features=this._coordinatesToFeatures(t),this.changed()},l.prototype.getCoordinate=function(t){return s(this.features,"getCoordinate",t)},l.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(t){return t.type===r.geojsonTypes.POLYGON?t.getCoordinates():t.coordinates})))},l.prototype.updateCoordinate=function(t,e,o){s(this.features,"updateCoordinate",t,e,o),this.changed()},l.prototype.addCoordinate=function(t,e,o){s(this.features,"addCoordinate",t,e,o),this.changed()},l.prototype.removeCoordinate=function(t){s(this.features,"removeCoordinate",t),this.changed()},l.prototype.getFeatures=function(){return this.features},e.exports=l},{"../constants":23,"./feature":25,"./line_string":26,"./point":28,"./polygon":29,hat:14}],28:[function(t,e,o){"use strict";var n=t("./feature"),r=function(t,e){n.call(this,t,e)};(r.prototype=Object.create(n.prototype)).isValid=function(){return"number"==typeof this.coordinates[0]&&"number"==typeof this.coordinates[1]},r.prototype.updateCoordinate=function(t,e,o){3===arguments.length?this.coordinates=[e,o]:this.coordinates=[t,e],this.changed()},r.prototype.getCoordinate=function(){return this.getCoordinates()},e.exports=r},{"./feature":25}],29:[function(t,e,o){"use strict";var n=t("./feature"),r=function(t,e){n.call(this,t,e),this.coordinates=this.coordinates.map(function(t){return t.slice(0,-1)})};(r.prototype=Object.create(n.prototype)).isValid=function(){return 0!==this.coordinates.length&&this.coordinates.every(function(t){return t.length>2})},r.prototype.incomingCoords=function(t){this.coordinates=t.map(function(t){return t.slice(0,-1)}),this.changed()},r.prototype.setCoordinates=function(t){this.coordinates=t,this.changed()},r.prototype.addCoordinate=function(t,e,o){this.changed();var n=t.split(".").map(function(t){return parseInt(t,10)});this.coordinates[n[0]].splice(n[1],0,[e,o])},r.prototype.removeCoordinate=function(t){this.changed();var e=t.split(".").map(function(t){return parseInt(t,10)}),o=this.coordinates[e[0]];o&&(o.splice(e[1],1),o.length<3&&this.coordinates.splice(e[0],1))},r.prototype.getCoordinate=function(t){var e=t.split(".").map(function(t){return parseInt(t,10)}),o=this.coordinates[e[0]];return JSON.parse(JSON.stringify(o[e[1]]))},r.prototype.getCoordinates=function(){return this.coordinates.map(function(t){return t.concat([t[0]])})},r.prototype.updateCoordinate=function(t,e,o){this.changed();var n=t.split("."),r=parseInt(n[0],10),i=parseInt(n[1],10);void 0===this.coordinates[r]&&(this.coordinates[r]=[]),this.coordinates[r][i]=[e,o]},e.exports=r},{"./feature":25}],30:[function(t,e,o){"use strict";var n=t("../constants");e.exports={isOfMetaType:function(t){return function(e){var o=e.featureTarget;return!!o&&!!o.properties&&o.properties.meta===t}},isShiftMousedown:function(t){return!!t.originalEvent&&!!t.originalEvent.shiftKey&&0===t.originalEvent.button},isActiveFeature:function(t){return!!t.featureTarget&&!!t.featureTarget.properties&&t.featureTarget.properties.active===n.activeStates.ACTIVE&&t.featureTarget.properties.meta===n.meta.FEATURE},isInactiveFeature:function(t){return!!t.featureTarget&&!!t.featureTarget.properties&&t.featureTarget.properties.active===n.activeStates.INACTIVE&&t.featureTarget.properties.meta===n.meta.FEATURE},noTarget:function(t){return void 0===t.featureTarget},isFeature:function(t){return!!t.featureTarget&&!!t.featureTarget.properties&&t.featureTarget.properties.meta===n.meta.FEATURE},isVertex:function(t){var e=t.featureTarget;return!!e&&!!e.properties&&e.properties.meta===n.meta.VERTEX},isShiftDown:function(t){return!!t.originalEvent&&!0===t.originalEvent.shiftKey},isEscapeKey:function(t){return 27===t.keyCode},isEnterKey:function(t){return 13===t.keyCode},true:function(){return!0}}},{"../constants":23}],31:[function(t,e,o){"use strict";var n=t("@mapbox/geojson-extent"),r=t("../constants"),i=r.LAT_MIN,a=r.LAT_MAX,s=r.LAT_RENDERED_MIN,l=r.LAT_RENDERED_MAX,u=r.LNG_MIN,c=r.LNG_MAX;e.exports=function(t,e){var o=i,r=a,p=i,d=a,h=c,f=u;t.forEach(function(t){var e=n(t),i=e[1],a=e[3],s=e[0],l=e[2];i>o&&(o=i),a<r&&(r=a),a>p&&(p=a),i<d&&(d=i),s<h&&(h=s),l>f&&(f=l)});var g=e;return o+g.lat>l&&(g.lat=l-o),p+g.lat>a&&(g.lat=a-p),r+g.lat<s&&(g.lat=s-r),d+g.lat<i&&(g.lat=i-d),h+g.lng<=u&&(g.lng+=360*Math.ceil(Math.abs(g.lng)/360)),f+g.lng>=c&&(g.lng-=360*Math.ceil(Math.abs(g.lng)/360)),g}},{"../constants":23,"@mapbox/geojson-extent":6}],32:[function(t,e,o){"use strict";var n=t("../constants");e.exports=function(t,e,o,r){var i=e.geometry.coordinates,a=o.geometry.coordinates;if(i[1]>n.LAT_RENDERED_MAX||i[1]<n.LAT_RENDERED_MIN||a[1]>n.LAT_RENDERED_MAX||a[1]<n.LAT_RENDERED_MIN)return null;var s=r.project([i[0],i[1]]),l=r.project([a[0],a[1]]),u=r.unproject([(s.x+l.x)/2,(s.y+l.y)/2]);return{type:n.geojsonTypes.FEATURE,properties:{meta:n.meta.MIDPOINT,parent:t,lng:u.lng,lat:u.lat,coord_path:o.properties.coord_path},geometry:{type:n.geojsonTypes.POINT,coordinates:[u.lng,u.lat]}}}},{"../constants":23}],33:[function(t,e,o){"use strict";var n=t("./create_vertex"),r=t("./create_midpoint"),i=t("../constants");e.exports=function t(e){function o(t,e){var o="",i=null;t.forEach(function(t,l){var u=void 0!==e&&null!==e?"".concat(e,".").concat(l):String(l),c=n(d,t,u,a(u));if(s.midpoints&&i){var p=r(d,i,c,s.map);p&&h.push(p)}i=c;var f=JSON.stringify(t);o!==f&&h.push(c),0===l&&(o=f)})}function a(t){return!!s.selectedPaths&&-1!==s.selectedPaths.indexOf(t)}var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,u=e.geometry,c=u.type,p=u.coordinates,d=e.properties&&e.properties.id,h=[];return c===i.geojsonTypes.POINT?h.push(n(d,p,l,a(l))):c===i.geojsonTypes.POLYGON?p.forEach(function(t,e){o(t,null!==l?"".concat(l,".").concat(e):String(e))}):c===i.geojsonTypes.LINE_STRING?o(p,l):0===c.indexOf(i.geojsonTypes.MULTI_PREFIX)&&function(){var o=c.replace(i.geojsonTypes.MULTI_PREFIX,"");p.forEach(function(n,r){var a={type:i.geojsonTypes.FEATURE,properties:e.properties,geometry:{type:o,coordinates:n}};h=h.concat(t(a,s,r))})}(),h}},{"../constants":23,"./create_midpoint":32,"./create_vertex":34}],34:[function(t,e,o){"use strict";var n=t("../constants");e.exports=function(t,e,o,r){return{type:n.geojsonTypes.FEATURE,properties:{meta:n.meta.VERTEX,parent:t,coord_path:o,active:r?n.activeStates.ACTIVE:n.activeStates.INACTIVE},geometry:{type:n.geojsonTypes.POINT,coordinates:e}}}},{"../constants":23}],35:[function(t,e,o){"use strict";e.exports={enable:function(t){setTimeout(function(){t.map&&t.map.doubleClickZoom&&t._ctx&&t._ctx.store&&t._ctx.store.getInitialConfigValue&&t._ctx.store.getInitialConfigValue("doubleClickZoom")&&t.map.doubleClickZoom.enable()},0)},disable:function(t){setTimeout(function(){t.map&&t.map.doubleClickZoom&&t.map.doubleClickZoom.disable()},0)}}},{}],36:[function(t,e,o){"use strict";e.exports=function(t,e){var o=t.x-e.x,n=t.y-e.y;return Math.sqrt(o*o+n*n)}},{}],37:[function(t,e,o){"use strict";function n(t,e,o,n){if(null===o.map)return[];var a=t?i(t,n):e,u={};o.options.styles&&(u.layers=o.options.styles.map(function(t){return t.id}));var c=o.map.queryRenderedFeatures(a,u).filter(function(t){return-1!==l.indexOf(t.properties.meta)}),p=new s,d=[];return c.forEach(function(t){var e=t.properties.id;p.has(e)||(p.add(e),d.push(t))}),r(d)}var r=t("./sort_features"),i=t("./map_event_to_bounding_box"),a=t("../constants"),s=t("./string_set"),l=[a.meta.FEATURE,a.meta.MIDPOINT,a.meta.VERTEX];e.exports={click:function(t,e,o){return n(t,e,o,o.options.clickBuffer)},touch:function(t,e,o){return n(t,e,o,o.options.touchBuffer)}}},{"../constants":23,"./map_event_to_bounding_box":42,"./sort_features":46,"./string_set":47}],38:[function(t,e,o){"use strict";var n=t("./features_at"),r=t("../constants");e.exports=function(t,e){var o=n.click(t,null,e),i={mouse:r.cursors.NONE};return o[0]&&(i.mouse=o[0].properties.active===r.activeStates.ACTIVE?r.cursors.MOVE:r.cursors.POINTER,i.feature=o[0].properties.meta),-1!==e.events.currentModeName().indexOf("draw")&&(i.mouse=r.cursors.ADD),e.ui.queueMapClasses(i),e.ui.updateMapClasses(),o[0]}},{"../constants":23,"./features_at":37}],39:[function(t,e,o){"use strict";var n=t("./euclidean_distance");e.exports=function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null!=o.fineTolerance?o.fineTolerance:4,i=null!=o.grossTolerance?o.grossTolerance:12,a=null!=o.interval?o.interval:500;t.point=t.point||e.point,t.time=t.time||e.time;var s=n(t.point,e.point);return s<r||s<i&&e.time-t.time<a}},{"./euclidean_distance":36}],40:[function(t,e,o){"use strict";e.exports=function(t,e){return!!t.lngLat&&t.lngLat.lng===e[0]&&t.lngLat.lat===e[1]}},{}],41:[function(t,e,o){"use strict";var n=t("./euclidean_distance");e.exports=function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null!=o.tolerance?o.tolerance:25,i=null!=o.interval?o.interval:250;return t.point=t.point||e.point,t.time=t.time||e.time,n(t.point,e.point)<r&&e.time-t.time<i}},{"./euclidean_distance":36}],42:[function(t,e,o){"use strict";e.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[[t.point.x-e,t.point.y-e],[t.point.x+e,t.point.y+e]]}},{}],43:[function(t,e,o){"use strict";e.exports=function(t,e){var o={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},n={on:function(t,e,n){if(void 0===o[t])throw new Error("Invalid event type: ".concat(t));o[t].push({selector:e,fn:n})},render:function(t){e.store.featureChanged(t)}},r=function(t,r){for(var i=o[t],a=i.length;a--;){var s=i[a];if(s.selector(r)){s.fn.call(n,r),e.store.render(),e.ui.updateMapClasses();break}}};return t.start.call(n),{render:t.render,stop:function(){t.stop&&t.stop()},trash:function(){t.trash&&(t.trash(),e.store.render())},combineFeatures:function(){t.combineFeatures&&t.combineFeatures()},uncombineFeatures:function(){t.uncombineFeatures&&t.uncombineFeatures()},drag:function(t){r("drag",t)},click:function(t){r("click",t)},mousemove:function(t){r("mousemove",t)},mousedown:function(t){r("mousedown",t)},mouseup:function(t){r("mouseup",t)},mouseout:function(t){r("mouseout",t)},keydown:function(t){r("keydown",t)},keyup:function(t){r("keyup",t)},touchstart:function(t){r("touchstart",t)},touchmove:function(t){r("touchmove",t)},touchend:function(t){r("touchend",t)},tap:function(t){r("tap",t)}}}},{}],44:[function(t,e,o){"use strict";var n=t("@mapbox/point-geometry");e.exports=function(t,e){var o=e.getBoundingClientRect();return new n(t.clientX-o.left-(e.clientLeft||0),t.clientY-o.top-(e.clientTop||0))}},{"@mapbox/point-geometry":11}],45:[function(t,e,o){"use strict";var n=t("./constrain_feature_movement"),r=t("../constants");e.exports=function(t,e){var o=n(t.map(function(t){return t.toGeoJSON()}),e);t.forEach(function(t){var e,n=t.getCoordinates(),i=function(t){var e={lng:t[0]+o.lng,lat:t[1]+o.lat};return[e.lng,e.lat]},a=function(t){return t.map(function(t){return i(t)})};t.type===r.geojsonTypes.POINT?e=i(n):t.type===r.geojsonTypes.LINE_STRING||t.type===r.geojsonTypes.MULTI_POINT?e=n.map(i):t.type===r.geojsonTypes.POLYGON||t.type===r.geojsonTypes.MULTI_LINE_STRING?e=n.map(a):t.type===r.geojsonTypes.MULTI_POLYGON&&(e=n.map(function(t){return t.map(function(t){return a(t)})})),t.incomingCoords(e)})}},{"../constants":23,"./constrain_feature_movement":31}],46:[function(t,e,o){"use strict";function n(t,e){var o=a[t.geometry.type]-a[e.geometry.type];return 0===o&&t.geometry.type===i.geojsonTypes.POLYGON?t.area-e.area:o}var r=t("@mapbox/geojson-area"),i=t("../constants"),a={Point:0,LineString:1,Polygon:2};e.exports=function(t){return t.map(function(t){return t.geometry.type===i.geojsonTypes.POLYGON&&(t.area=r.geometry({type:i.geojsonTypes.FEATURE,property:{},geometry:t.geometry})),t}).sort(n).map(function(t){return delete t.area,t})}},{"../constants":23,"@mapbox/geojson-area":3}],47:[function(t,e,o){"use strict";function n(t){if(this._items={},this._nums={},this._length=t?t.length:0,t)for(var e=0,o=t.length;e<o;e++)this.add(t[e]),void 0!==t[e]&&("string"==typeof t[e]?this._items[t[e]]=e:this._nums[t[e]]=e)}n.prototype.add=function(t){return this.has(t)?this:(this._length++,"string"==typeof t?this._items[t]=this._length:this._nums[t]=this._length,this)},n.prototype.delete=function(t){return!1===this.has(t)?this:(this._length--,delete this._items[t],delete this._nums[t],this)},n.prototype.has=function(t){return("string"==typeof t||"number"==typeof t)&&(void 0!==this._items[t]||void 0!==this._nums[t])},n.prototype.values=function(){var t=this,e=[];return Object.keys(this._items).forEach(function(o){e.push({k:o,v:t._items[o]})}),Object.keys(this._nums).forEach(function(o){e.push({k:JSON.parse(o),v:t._nums[o]})}),e.sort(function(t,e){return t.v-e.v}).map(function(t){return t.k})},n.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this},e.exports=n},{}],48:[function(t,e,o){"use strict";e.exports=function(t,e){return t.length===e.length&&JSON.stringify(t.map(function(t){return t}).sort())===JSON.stringify(e.map(function(t){return t}).sort())}},{}],49:[function(t,e,o){"use strict";e.exports=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}]},{}],50:[function(t,e,o){"use strict";e.exports=function(t,e,o){function n(){i=!1,a&&(r.apply(o,a),a=!1)}function r(){i?a=arguments:(i=!0,t.apply(o,arguments),setTimeout(n,e))}var i,a;return r}},{}],51:[function(t,e,o){"use strict";e.exports=function(t){return[].concat(t).filter(function(t){return void 0!==t})}},{}],52:[function(t,e,o){"use strict";var n=t("../lib/common_selectors"),r=n.noTarget,i=n.isOfMetaType,a=n.isInactiveFeature,s=n.isShiftDown,l=t("../lib/create_supplementary_points"),u=t("../lib/constrain_feature_movement"),c=t("../lib/double_click_zoom"),p=t("../constants"),d=t("../lib/common_selectors"),h=t("../lib/move_features"),f=i(p.meta.VERTEX),g=i(p.meta.MIDPOINT),y={fireUpdate:function(){this.map.fire(p.events.UPDATE,{action:p.updateActions.CHANGE_COORDINATES,features:this.getSelected().map(function(t){return t.toGeoJSON()})})},fireActionable:function(t){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:t.selectedCoordPaths.length>0})},startDragging:function(t,e){this.map.dragPan.disable(),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},stopDragging:function(t){this.map.dragPan.enable(),t.dragMoving=!1,t.canDragMove=!1,t.dragMoveLocation=null},onVertex:function(t,e){this.startDragging(t,e);var o=e.featureTarget.properties,n=t.selectedCoordPaths.indexOf(o.coord_path);s(e)||-1!==n?s(e)&&-1===n&&t.selectedCoordPaths.push(o.coord_path):t.selectedCoordPaths=[o.coord_path];var r=this.pathsToCoordinates(t.featureId,t.selectedCoordPaths);this.setSelectedCoordinates(r)},onMidpoint:function(t,e){this.startDragging(t,e);var o=e.featureTarget.properties;t.feature.addCoordinate(o.coord_path,o.lng,o.lat),this.fireUpdate(),t.selectedCoordPaths=[o.coord_path]},pathsToCoordinates:function(t,e){return e.map(function(e){return{feature_id:t,coord_path:e}})},onFeature:function(t,e){0===t.selectedCoordPaths.length?this.startDragging(t,e):this.stopDragging(t)},dragFeature:function(t,e,o){h(this.getSelected(),o),t.dragMoveLocation=e.lngLat},dragVertex:function(t,e,o){for(var n=t.selectedCoordPaths.map(function(e){return t.feature.getCoordinate(e)}),r=n.map(function(t){return{type:p.geojsonTypes.FEATURE,properties:{},geometry:{type:p.geojsonTypes.POINT,coordinates:t}}}),i=u(r,o),a=0;a<n.length;a++){var s=n[a];t.feature.updateCoordinate(t.selectedCoordPaths[a],s[0]+i.lng,s[1]+i.lat)}},clickNoTarget:function(){this.changeMode(p.modes.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(p.modes.SIMPLE_SELECT)},clickActiveFeature:function(t){t.selectedCoordPaths=[],this.clearSelectedCoordinates(),t.feature.changed()},onSetup:function(t){var e=t.featureId,o=this.getFeature(e);if(!o)throw new Error("You must provide a featureId to enter direct_select mode");if(o.type===p.geojsonTypes.POINT)throw new TypeError("direct_select mode doesn't handle point features");var n={featureId:e,feature:o,dragMoveLocation:t.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:t.coordPath?[t.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(e,n.selectedCoordPaths)),this.setSelected(e),c.disable(this),this.setActionableState({trash:!0}),n},onStop:function(){c.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(t,e,o){t.featureId===e.properties.id?(e.properties.active=p.activeStates.ACTIVE,o(e),l(e,{map:this.map,midpoints:!0,selectedPaths:t.selectedCoordPaths}).forEach(o)):(e.properties.active=p.activeStates.INACTIVE,o(e)),this.fireActionable(t)},onTrash:function(t){t.selectedCoordPaths.sort().reverse().forEach(function(e){return t.feature.removeCoordinate(e)}),this.fireUpdate(),t.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(t),!1===t.feature.isValid()&&(this.deleteFeature([t.featureId]),this.changeMode(p.modes.SIMPLE_SELECT,{}))},onMouseMove:function(t,e){var o=d.isActiveFeature(e),n=f(e),r=0===t.selectedCoordPaths.length;o&&r?this.updateUIClasses({mouse:p.cursors.MOVE}):n&&!r?this.updateUIClasses({mouse:p.cursors.MOVE}):this.updateUIClasses({mouse:p.cursors.NONE}),this.stopDragging(t)},onMouseOut:function(t){t.dragMoving&&this.fireUpdate()}};y.onTouchStart=y.onMouseDown=function(t,e){return f(e)?this.onVertex(t,e):d.isActiveFeature(e)?this.onFeature(t,e):g(e)?this.onMidpoint(t,e):void 0},y.onDrag=function(t,e){if(!0===t.canDragMove){t.dragMoving=!0,e.originalEvent.stopPropagation();var o={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};t.selectedCoordPaths.length>0?this.dragVertex(t,e,o):this.dragFeature(t,e,o),t.dragMoveLocation=e.lngLat}},y.onClick=function(t,e){return r(e)?this.clickNoTarget(t,e):d.isActiveFeature(e)?this.clickActiveFeature(t,e):a(e)?this.clickInactive(t,e):void this.stopDragging(t)},y.onTap=function(t,e){return r(e)?this.clickNoTarget(t,e):d.isActiveFeature(e)?this.clickActiveFeature(t,e):a(e)?this.clickInactive(t,e):void 0},y.onTouchEnd=y.onMouseUp=function(t){t.dragMoving&&this.fireUpdate(),this.stopDragging(t)},e.exports=y},{"../constants":23,"../lib/common_selectors":30,"../lib/constrain_feature_movement":31,"../lib/create_supplementary_points":33,"../lib/double_click_zoom":35,"../lib/move_features":45}],53:[function(t,e,o){"use strict";function n(t){return function(t){if(Array.isArray(t)){for(var e=0,o=new Array(t.length);e<t.length;e++)o[e]=t[e];return o}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r=t("../lib/common_selectors"),i=t("../lib/is_event_at_coordinates"),a=t("../lib/double_click_zoom"),s=t("../constants"),l=t("../lib/create_vertex"),u={onSetup:function(t){var e,o,r=(t=t||{}).featureId,i="forward";if(r){if(!(e=this.getFeature(r)))throw new Error("Could not find a feature with the provided featureId");var l=t.from;if(l&&"Feature"===l.type&&l.geometry&&"Point"===l.geometry.type&&(l=l.geometry),l&&"Point"===l.type&&l.coordinates&&2===l.coordinates.length&&(l=l.coordinates),!l||!Array.isArray(l))throw new Error("Please use the `from` property to indicate which point to continue the line from");var u=e.coordinates.length-1;if(e.coordinates[u][0]===l[0]&&e.coordinates[u][1]===l[1]){var c;o=u+1,(c=e).addCoordinate.apply(c,[o].concat(n(e.coordinates[u])))}else{if(e.coordinates[0][0]!==l[0]||e.coordinates[0][1]!==l[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");var p;i="backwards",o=0,(p=e).addCoordinate.apply(p,[o].concat(n(e.coordinates[0])))}}else e=this.newFeature({type:s.geojsonTypes.FEATURE,properties:{},geometry:{type:s.geojsonTypes.LINE_STRING,coordinates:[]}}),o=0,this.addFeature(e);return this.clearSelectedFeatures(),a.disable(this),this.updateUIClasses({mouse:s.cursors.ADD}),this.activateUIButton(s.types.LINE),this.setActionableState({trash:!0}),{line:e,currentVertexPosition:o,direction:i}},clickAnywhere:function(t,e){if(t.currentVertexPosition>0&&i(e,t.line.coordinates[t.currentVertexPosition-1])||"backwards"===t.direction&&i(e,t.line.coordinates[t.currentVertexPosition+1]))return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.line.id]});this.updateUIClasses({mouse:s.cursors.ADD}),t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),"forward"===t.direction?(t.currentVertexPosition++,t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat)):t.line.addCoordinate(0,e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.line.id]})},onMouseMove:function(t,e){t.line.updateCoordinate(t.currentVertexPosition,e.lngLat.lng,e.lngLat.lat),r.isVertex(e)&&this.updateUIClasses({mouse:s.cursors.POINTER})}};u.onTap=u.onClick=function(t,e){if(r.isVertex(e))return this.clickOnVertex(t,e);this.clickAnywhere(t,e)},u.onKeyUp=function(t,e){r.isEnterKey(e)?this.changeMode(s.modes.SIMPLE_SELECT,{featureIds:[t.line.id]}):r.isEscapeKey(e)&&(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT))},u.onStop=function(t){a.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.line.id)&&(t.line.removeCoordinate("".concat(t.currentVertexPosition)),t.line.isValid()?this.map.fire(s.events.CREATE,{features:[t.line.toGeoJSON()]}):(this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT,{},{silent:!0})))},u.onTrash=function(t){this.deleteFeature([t.line.id],{silent:!0}),this.changeMode(s.modes.SIMPLE_SELECT)},u.toDisplayFeatures=function(t,e,o){var n=e.properties.id===t.line.id;if(e.properties.active=n?s.activeStates.ACTIVE:s.activeStates.INACTIVE,!n)return o(e);e.geometry.coordinates.length<2||(e.properties.meta=s.meta.FEATURE,o(l(t.line.id,e.geometry.coordinates["forward"===t.direction?e.geometry.coordinates.length-2:1],"".concat("forward"===t.direction?e.geometry.coordinates.length-2:1),!1)),o(e))},e.exports=u},{"../constants":23,"../lib/common_selectors":30,"../lib/create_vertex":34,"../lib/double_click_zoom":35,"../lib/is_event_at_coordinates":40}],54:[function(t,e,o){"use strict";var n=t("../lib/common_selectors"),r=t("../constants"),i={onSetup:function(){var t=this.newFeature({type:r.geojsonTypes.FEATURE,properties:{},geometry:{type:r.geojsonTypes.POINT,coordinates:[]}});return this.addFeature(t),this.clearSelectedFeatures(),this.updateUIClasses({mouse:r.cursors.ADD}),this.activateUIButton(r.types.POINT),this.setActionableState({trash:!0}),{point:t}},stopDrawingAndRemove:function(t){this.deleteFeature([t.point.id],{silent:!0}),this.changeMode(r.modes.SIMPLE_SELECT)}};i.onTap=i.onClick=function(t,e){this.updateUIClasses({mouse:r.cursors.MOVE}),t.point.updateCoordinate("",e.lngLat.lng,e.lngLat.lat),this.map.fire(r.events.CREATE,{features:[t.point.toGeoJSON()]}),this.changeMode(r.modes.SIMPLE_SELECT,{featureIds:[t.point.id]})},i.onStop=function(t){this.activateUIButton(),t.point.getCoordinate().length||this.deleteFeature([t.point.id],{silent:!0})},i.toDisplayFeatures=function(t,e,o){var n=e.properties.id===t.point.id;if(e.properties.active=n?r.activeStates.ACTIVE:r.activeStates.INACTIVE,!n)return o(e)},i.onTrash=i.stopDrawingAndRemove,i.onKeyUp=function(t,e){if(n.isEscapeKey(e)||n.isEnterKey(e))return this.stopDrawingAndRemove(t,e)},e.exports=i},{"../constants":23,"../lib/common_selectors":30}],55:[function(t,e,o){"use strict";var n=t("../lib/common_selectors"),r=t("../lib/double_click_zoom"),i=t("../constants"),a=t("../lib/is_event_at_coordinates"),s=t("../lib/create_vertex"),l={onSetup:function(){var t=this.newFeature({type:i.geojsonTypes.FEATURE,properties:{},geometry:{type:i.geojsonTypes.POLYGON,coordinates:[[]]}});return this.addFeature(t),this.clearSelectedFeatures(),r.disable(this),this.updateUIClasses({mouse:i.cursors.ADD}),this.activateUIButton(i.types.POLYGON),this.setActionableState({trash:!0}),{polygon:t,currentVertexPosition:0}},clickAnywhere:function(t,e){if(t.currentVertexPosition>0&&a(e,t.polygon.coordinates[0][t.currentVertexPosition-1]))return this.changeMode(i.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]});this.updateUIClasses({mouse:i.cursors.ADD}),t.polygon.updateCoordinate("0.".concat(t.currentVertexPosition),e.lngLat.lng,e.lngLat.lat),t.currentVertexPosition++,t.polygon.updateCoordinate("0.".concat(t.currentVertexPosition),e.lngLat.lng,e.lngLat.lat)},clickOnVertex:function(t){return this.changeMode(i.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},onMouseMove:function(t,e){t.polygon.updateCoordinate("0.".concat(t.currentVertexPosition),e.lngLat.lng,e.lngLat.lat),n.isVertex(e)&&this.updateUIClasses({mouse:i.cursors.POINTER})}};l.onTap=l.onClick=function(t,e){return n.isVertex(e)?this.clickOnVertex(t,e):this.clickAnywhere(t,e)},l.onKeyUp=function(t,e){n.isEscapeKey(e)?(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(i.modes.SIMPLE_SELECT)):n.isEnterKey(e)&&this.changeMode(i.modes.SIMPLE_SELECT,{featureIds:[t.polygon.id]})},l.onStop=function(t){this.updateUIClasses({mouse:i.cursors.NONE}),r.enable(this),this.activateUIButton(),void 0!==this.getFeature(t.polygon.id)&&(t.polygon.removeCoordinate("0.".concat(t.currentVertexPosition)),t.polygon.isValid()?this.map.fire(i.events.CREATE,{features:[t.polygon.toGeoJSON()]}):(this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(i.modes.SIMPLE_SELECT,{},{silent:!0})))},l.toDisplayFeatures=function(t,e,o){var n=e.properties.id===t.polygon.id;if(e.properties.active=n?i.activeStates.ACTIVE:i.activeStates.INACTIVE,!n)return o(e);if(0!==e.geometry.coordinates.length){var r=e.geometry.coordinates[0].length;if(!(r<3)){if(e.properties.meta=i.meta.FEATURE,o(s(t.polygon.id,e.geometry.coordinates[0][0],"0.0",!1)),r>3){var a=e.geometry.coordinates[0].length-3;o(s(t.polygon.id,e.geometry.coordinates[0][a],"0.".concat(a),!1))}if(r<=4){var l=[[e.geometry.coordinates[0][0][0],e.geometry.coordinates[0][0][1]],[e.geometry.coordinates[0][1][0],e.geometry.coordinates[0][1][1]]];if(o({type:i.geojsonTypes.FEATURE,properties:e.properties,geometry:{coordinates:l,type:i.geojsonTypes.LINE_STRING}}),3===r)return}return o(e)}}},l.onTrash=function(t){this.deleteFeature([t.polygon.id],{silent:!0}),this.changeMode(i.modes.SIMPLE_SELECT)},e.exports=l},{"../constants":23,"../lib/common_selectors":30,"../lib/create_vertex":34,"../lib/double_click_zoom":35,"../lib/is_event_at_coordinates":40}],56:[function(t,e,o){"use strict";e.exports={simple_select:t("./simple_select"),direct_select:t("./direct_select"),draw_point:t("./draw_point"),draw_polygon:t("./draw_polygon"),draw_line_string:t("./draw_line_string")}},{"./direct_select":52,"./draw_line_string":53,"./draw_point":54,"./draw_polygon":55,"./simple_select":60}],57:[function(t,e,o){"use strict";var n=e.exports=t("./mode_interface_accessors");n.prototype.onSetup=function(){},n.prototype.onDrag=function(){},n.prototype.onClick=function(){},n.prototype.onMouseMove=function(){},n.prototype.onMouseDown=function(){},n.prototype.onMouseUp=function(){},n.prototype.onMouseOut=function(){},n.prototype.onKeyUp=function(){},n.prototype.onKeyDown=function(){},n.prototype.onTouchStart=function(){},n.prototype.onTouchMove=function(){},n.prototype.onTouchEnd=function(){},n.prototype.onTap=function(){},n.prototype.onStop=function(){},n.prototype.onTrash=function(){},n.prototype.onCombineFeature=function(){},n.prototype.onUncombineFeature=function(){},n.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")}},{"./mode_interface_accessors":58}],58:[function(t,e,o){"use strict";var n=t("../constants"),r=t("../lib/features_at"),i=t("../feature_types/point"),a=t("../feature_types/line_string"),s=t("../feature_types/polygon"),l=t("../feature_types/multi_feature"),u=e.exports=function(t){this.map=t.map,this.drawConfig=JSON.parse(JSON.stringify(t.options||{})),this._ctx=t};u.prototype.setSelected=function(t){return this._ctx.store.setSelected(t)},u.prototype.setSelectedCoordinates=function(t){var e=this;this._ctx.store.setSelectedCoordinates(t),t.reduce(function(t,o){return void 0===t[o.feature_id]&&(t[o.feature_id]=!0,e._ctx.store.get(o.feature_id).changed()),t},{})},u.prototype.getSelected=function(){return this._ctx.store.getSelected()},u.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},u.prototype.isSelected=function(t){return this._ctx.store.isSelected(t)},u.prototype.getFeature=function(t){return this._ctx.store.get(t)},u.prototype.select=function(t){return this._ctx.store.select(t)},u.prototype.deselect=function(t){return this._ctx.store.deselect(t)},u.prototype.deleteFeature=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._ctx.store.delete(t,e)},u.prototype.addFeature=function(t){return this._ctx.store.add(t)},u.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},u.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},u.prototype.setActionableState=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={trash:t.trash||!1,combineFeatures:t.combineFeatures||!1,uncombineFeatures:t.uncombineFeatures||!1};return this._ctx.events.actionable(e)},u.prototype.changeMode=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._ctx.events.changeMode(t,e,o)},u.prototype.updateUIClasses=function(t){return this._ctx.ui.queueMapClasses(t)},u.prototype.activateUIButton=function(t){return this._ctx.ui.setActiveButton(t)},u.prototype.featuresAt=function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"click";if("click"!==o&&"touch"!==o)throw new Error("invalid buffer type");return r[o](t,e,this._ctx)},u.prototype.newFeature=function(t){var e=t.geometry.type;return e===n.geojsonTypes.POINT?new i(this._ctx,t):e===n.geojsonTypes.LINE_STRING?new a(this._ctx,t):e===n.geojsonTypes.POLYGON?new s(this._ctx,t):new l(this._ctx,t)},u.prototype.isInstanceOf=function(t,e){if(t===n.geojsonTypes.POINT)return e instanceof i;if(t===n.geojsonTypes.LINE_STRING)return e instanceof a;if(t===n.geojsonTypes.POLYGON)return e instanceof s;if("MultiFeature"===t)return e instanceof l;throw new Error("Unknown feature class: ".concat(t))},u.prototype.doRender=function(t){return this._ctx.store.featureChanged(t)}},{"../constants":23,"../feature_types/line_string":26,"../feature_types/multi_feature":27,"../feature_types/point":28,"../feature_types/polygon":29,"../lib/features_at":37}],59:[function(t,e,o){"use strict";var n=t("./mode_interface"),r={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},i=Object.keys(r);e.exports=function(t){var e=Object.keys(t);return function(o){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s={},l=e.reduce(function(e,o){return e[o]=t[o],e},new n(o));return{start:function(){var e=this;s=l.onSetup(a),i.forEach(function(o){var n=r[o],i=function(){return!1};t[n]&&(i=function(){return!0}),e.on(o,i,function(t){return function(e){l[t](s,e)}}(n))})},stop:function(){l.onStop(s)},trash:function(){l.onTrash(s)},combineFeatures:function(){l.onCombineFeatures(s)},uncombineFeatures:function(){l.onUncombineFeatures(s)},render:function(t,e){l.toDisplayFeatures(s,t,e)}}}}},{"./mode_interface":57}],60:[function(t,e,o){"use strict";var n=t("../lib/common_selectors"),r=t("../lib/mouse_event_point"),i=t("../lib/create_supplementary_points"),a=t("../lib/string_set"),s=t("../lib/double_click_zoom"),l=t("../lib/move_features"),u=t("../constants"),c={onSetup:function(t){var e=this,o={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoveing:!1,canDragMove:!1,initiallySelectedFeatureIds:t.featureIds||[]};return this.setSelected(o.initiallySelectedFeatureIds.filter(function(t){return void 0!==e.getFeature(t)})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),o},fireUpdate:function(){this.map.fire(u.events.UPDATE,{action:u.updateActions.MOVE,features:this.getSelected().map(function(t){return t.toGeoJSON()})})},fireActionable:function(){var t=this,e=this.getSelected(),o=e.filter(function(e){return t.isInstanceOf("MultiFeature",e)}),n=!1;if(e.length>1){n=!0;var r=e[0].type.replace("Multi","");e.forEach(function(t){t.type.replace("Multi","")!==r&&(n=!1)})}var i=o.length>0,a=e.length>0;this.setActionableState({combineFeatures:n,uncombineFeatures:i,trash:a})},getUniqueIds:function(t){return t.length?t.map(function(t){return t.properties.id}).filter(function(t){return void 0!==t}).reduce(function(t,e){return t.add(e),t},new a).values():[]},stopExtendedInteractions:function(t){t.boxSelectElement&&(t.boxSelectElement.parentNode&&t.boxSelectElement.parentNode.removeChild(t.boxSelectElement),t.boxSelectElement=null),this.map.dragPan.enable(),t.boxSelecting=!1,t.canBoxSelect=!1,t.dragMoving=!1,t.canDragMove=!1},onStop:function(){s.enable(this)},onMouseMove:function(t){return this.stopExtendedInteractions(t)},onMouseOut:function(t){if(t.dragMoving)return this.fireUpdate()}};c.onTap=c.onClick=function(t,e){return n.noTarget(e)?this.clickAnywhere(t,e):n.isOfMetaType(u.meta.VERTEX)(e)?this.clickOnVertex(t,e):n.isFeature(e)?this.clickOnFeature(t,e):void 0},c.clickAnywhere=function(t){var e=this,o=this.getSelectedIds();o.length&&(this.clearSelectedFeatures(),o.forEach(function(t){return e.doRender(t)})),s.enable(this),this.stopExtendedInteractions(t)},c.clickOnVertex=function(t,e){this.changeMode(u.modes.DIRECT_SELECT,{featureId:e.featureTarget.properties.parent,coordPath:e.featureTarget.properties.coord_path,startPos:e.lngLat}),this.updateUIClasses({mouse:u.cursors.MOVE})},c.startOnActiveFeature=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),this.doRender(e.featureTarget.properties.id),t.canDragMove=!0,t.dragMoveLocation=e.lngLat},c.clickOnFeature=function(t,e){var o=this;s.disable(this),this.stopExtendedInteractions(t);var r=n.isShiftDown(e),i=this.getSelectedIds(),a=e.featureTarget.properties.id,l=this.isSelected(a);if(!r&&l&&this.getFeature(a).type!==u.geojsonTypes.POINT)return this.changeMode(u.modes.DIRECT_SELECT,{featureId:a});l&&r?(this.deselect(a),this.updateUIClasses({mouse:u.cursors.POINTER}),1===i.length&&s.enable(this)):!l&&r?(this.select(a),this.updateUIClasses({mouse:u.cursors.MOVE})):l||r||(i.forEach(function(t){return o.doRender(t)}),this.setSelected(a),this.updateUIClasses({mouse:u.cursors.MOVE})),this.doRender(a)},c.onMouseDown=function(t,e){return n.isActiveFeature(e)?this.startOnActiveFeature(t,e):this.drawConfig.boxSelect&&n.isShiftMousedown(e)?this.startBoxSelect(t,e):void 0},c.startBoxSelect=function(t,e){this.stopExtendedInteractions(t),this.map.dragPan.disable(),t.boxSelectStartLocation=r(e.originalEvent,this.map.getContainer()),t.canBoxSelect=!0},c.onTouchStart=function(t,e){if(n.isActiveFeature(e))return this.startOnActiveFeature(t,e)},c.onDrag=function(t,e){return t.canDragMove?this.dragMove(t,e):this.drawConfig.boxSelect&&t.canBoxSelect?this.whileBoxSelect(t,e):void 0},c.whileBoxSelect=function(t,e){t.boxSelecting=!0,this.updateUIClasses({mouse:u.cursors.ADD}),t.boxSelectElement||(t.boxSelectElement=document.createElement("div"),t.boxSelectElement.classList.add(u.classes.BOX_SELECT),this.map.getContainer().appendChild(t.boxSelectElement));var o=r(e.originalEvent,this.map.getContainer()),n=Math.min(t.boxSelectStartLocation.x,o.x),i=Math.max(t.boxSelectStartLocation.x,o.x),a=Math.min(t.boxSelectStartLocation.y,o.y),s=Math.max(t.boxSelectStartLocation.y,o.y),l="translate(".concat(n,"px, ").concat(a,"px)");t.boxSelectElement.style.transform=l,t.boxSelectElement.style.WebkitTransform=l,t.boxSelectElement.style.width="".concat(i-n,"px"),t.boxSelectElement.style.height="".concat(s-a,"px")},c.dragMove=function(t,e){t.dragMoving=!0,e.originalEvent.stopPropagation();var o={lng:e.lngLat.lng-t.dragMoveLocation.lng,lat:e.lngLat.lat-t.dragMoveLocation.lat};l(this.getSelected(),o),t.dragMoveLocation=e.lngLat},c.onMouseUp=function(t,e){var o=this;if(t.dragMoving)this.fireUpdate();else if(t.boxSelecting){var n=[t.boxSelectStartLocation,r(e.originalEvent,this.map.getContainer())],i=this.featuresAt(null,n,"click"),a=this.getUniqueIds(i).filter(function(t){return!o.isSelected(t)});a.length&&(this.select(a),a.forEach(function(t){return o.doRender(t)}),this.updateUIClasses({mouse:u.cursors.MOVE}))}this.stopExtendedInteractions(t)},c.toDisplayFeatures=function(t,e,o){e.properties.active=this.isSelected(e.properties.id)?u.activeStates.ACTIVE:u.activeStates.INACTIVE,o(e),this.fireActionable(),e.properties.active===u.activeStates.ACTIVE&&e.geometry.type!==u.geojsonTypes.POINT&&i(e).forEach(o)},c.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},c.onCombineFeatures=function(){var t=this.getSelected();if(!(0===t.length||t.length<2)){for(var e=[],o=[],n=t[0].type.replace("Multi",""),r=0;r<t.length;r++){var i=t[r];if(i.type.replace("Multi","")!==n)return;i.type.includes("Multi")?i.getCoordinates().forEach(function(t){e.push(t)}):e.push(i.getCoordinates()),o.push(i.toGeoJSON())}if(o.length>1){var a=this.newFeature({type:u.geojsonTypes.FEATURE,properties:o[0].properties,geometry:{type:"Multi".concat(n),coordinates:e}});this.addFeature(a),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([a.id]),this.map.fire(u.events.COMBINE_FEATURES,{createdFeatures:[a.toGeoJSON()],deletedFeatures:o})}this.fireActionable()}},c.onUncombineFeatures=function(){var t=this,e=this.getSelected();if(0!==e.length){for(var o=[],n=[],r=0;r<e.length;r++)!function(r){var i=e[r];t.isInstanceOf("MultiFeature",i)&&(i.getFeatures().forEach(function(e){t.addFeature(e),e.properties=i.properties,o.push(e.toGeoJSON()),t.select([e.id])}),t.deleteFeature(i.id,{silent:!0}),n.push(i.toGeoJSON()))}(r);o.length>1&&this.map.fire(u.events.UNCOMBINE_FEATURES,{createdFeatures:o,deletedFeatures:n}),this.fireActionable()}},e.exports=c},{"../constants":23,"../lib/common_selectors":30,"../lib/create_supplementary_points":33,"../lib/double_click_zoom":35,"../lib/mouse_event_point":44,"../lib/move_features":45,"../lib/string_set":47}],61:[function(t,e,o){"use strict";function n(t,e){return t.map(function(t){return t.source?t:r(t,{id:"".concat(t.id,".").concat(e),source:"hot"===e?i.sources.HOT:i.sources.COLD})})}var r=t("xtend"),i=t("./constants"),a={defaultMode:i.modes.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:t("./lib/theme"),modes:t("./modes"),controls:{},userProperties:!1},s={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},l={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};e.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=r(t);return t.controls||(e.controls={}),!1===t.displayControlsDefault?e.controls=r(l,t.controls):e.controls=r(s,t.controls),(e=r(a,e)).styles=n(e.styles,"cold").concat(n(e.styles,"hot")),e}},{"./constants":23,"./lib/theme":49,"./modes":56,xtend:21}],62:[function(t,e,o){"use strict";var n=t("./constants");e.exports=function(){function t(t,e){var n=o.get(t).internal(r);o.ctx.events.currentModeRender(n,function(t){o.sources[e].push(t)})}function e(){o.isDirty=!1,o.clearChangedIds()}var o=this;if(!o.ctx.map||void 0===o.ctx.map.getSource(n.sources.HOT))return e();var r=o.ctx.events.currentModeName();o.ctx.ui.queueMapClasses({mode:r});var i=[],a=[];o.isDirty?a=o.getAllIds():(i=o.getChangedIds().filter(function(t){return void 0!==o.get(t)}),a=o.sources.hot.filter(function(t){return t.properties.id&&-1===i.indexOf(t.properties.id)&&void 0!==o.get(t.properties.id)}).map(function(t){return t.properties.id})),o.sources.hot=[];var s=o.sources.cold.length;o.sources.cold=o.isDirty?[]:o.sources.cold.filter(function(t){var e=t.properties.id||t.properties.parent;return-1===i.indexOf(e)});var l=s!==o.sources.cold.length||a.length>0;if(i.forEach(function(e){return t(e,"hot")}),a.forEach(function(e){return t(e,"cold")}),l&&o.ctx.map.getSource(n.sources.COLD).setData({type:n.geojsonTypes.FEATURE_COLLECTION,features:o.sources.cold}),o.ctx.map.getSource(n.sources.HOT).setData({type:n.geojsonTypes.FEATURE_COLLECTION,features:o.sources.hot}),o._emitSelectionChange&&(o.ctx.map.fire(n.events.SELECTION_CHANGE,{features:o.getSelected().map(function(t){return t.toGeoJSON()}),points:o.getSelectedCoordinates().map(function(t){return{type:n.geojsonTypes.FEATURE,properties:{},geometry:{type:n.geojsonTypes.POINT,coordinates:t.coordinates}}})}),o._emitSelectionChange=!1),o._deletedFeaturesToEmit.length){var u=o._deletedFeaturesToEmit.map(function(t){return t.toGeoJSON()});o._deletedFeaturesToEmit=[],o.ctx.map.fire(n.events.DELETE,{features:u})}e(),o.ctx.map.fire(n.events.RENDER,{})}},{"./constants":23}],63:[function(t,e,o){"use strict";var n=t("./events"),r=t("./store"),i=t("./ui"),a=t("./constants"),s=t("xtend");e.exports=function(t){var e=null,o=null,l={onRemove:function(){return t.map.off("load",l.connect),clearInterval(o),l.removeLayers(),t.store.restoreMapConfig(),t.ui.removeButtons(),t.events.removeEventListeners(),t.ui.clearMapClasses(),t.map=null,t.container=null,t.store=null,e&&e.parentNode&&e.parentNode.removeChild(e),e=null,this},connect:function(){t.map.off("load",l.connect),clearInterval(o),l.addLayers(),t.store.storeMapConfig(),t.events.addEventListeners()},onAdd:function(a){var u=a.fire;return a.fire=function(t,e){var o=arguments;return 1===u.length&&1!==arguments.length&&(o=[s({},{type:t},e)]),u.apply(a,o)},t.map=a,t.events=n(t),t.ui=i(t),t.container=a.getContainer(),t.store=new r(t),e=t.ui.addButtons(),t.options.boxSelect&&(a.boxZoom.disable(),a.dragPan.disable(),a.dragPan.enable()),a.loaded()?l.connect():(a.on("load",l.connect),o=setInterval(function(){a.loaded()&&l.connect()},16)),t.events.start(),e},addLayers:function(){t.map.addSource(a.sources.COLD,{data:{type:a.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),t.map.addSource(a.sources.HOT,{data:{type:a.geojsonTypes.FEATURE_COLLECTION,features:[]},type:"geojson"}),t.options.styles.forEach(function(e){t.map.addLayer(e)}),t.store.setDirty(!0),t.store.render()},removeLayers:function(){t.options.styles.forEach(function(e){t.map.getLayer(e.id)&&t.map.removeLayer(e.id)}),t.map.getSource(a.sources.COLD)&&t.map.removeSource(a.sources.COLD),t.map.getSource(a.sources.HOT)&&t.map.removeSource(a.sources.HOT)}};return t.setup=l,l}},{"./constants":23,"./events":24,"./store":64,"./ui":65,xtend:21}],64:[function(t,e,o){"use strict";function n(t){var e=this,o=this._selectedCoordinates.filter(function(t){return e._selectedFeatureIds.has(t.feature_id)});this._selectedCoordinates.length===o.length||t.silent||(this._emitSelectionChange=!0),this._selectedCoordinates=o}var r=t("./lib/throttle"),i=t("./lib/to_dense_array"),a=t("./lib/string_set"),s=t("./render"),l=t("./constants").interactions,u=e.exports=function(t){this._features={},this._featureIds=new a,this._selectedFeatureIds=new a,this._selectedCoordinates=[],this._changedFeatureIds=new a,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=t,this.sources={hot:[],cold:[]},this.render=r(s,16,this),this.isDirty=!1};u.prototype.createRenderBatch=function(){var t=this,e=this.render,o=0;return this.render=function(){o++},function(){t.render=e,o>0&&t.render()}},u.prototype.setDirty=function(){return this.isDirty=!0,this},u.prototype.featureChanged=function(t){return this._changedFeatureIds.add(t),this},u.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},u.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},u.prototype.getAllIds=function(){return this._featureIds.values()},u.prototype.add=function(t){return this.featureChanged(t.id),this._features[t.id]=t,this._featureIds.add(t.id),this},u.prototype.delete=function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(t).forEach(function(t){e._featureIds.has(t)&&(e._featureIds.delete(t),e._selectedFeatureIds.delete(t),o.silent||-1===e._deletedFeaturesToEmit.indexOf(e._features[t])&&e._deletedFeaturesToEmit.push(e._features[t]),delete e._features[t],e.isDirty=!0)}),n.call(this,o),this},u.prototype.get=function(t){return this._features[t]},u.prototype.getAll=function(){var t=this;return Object.keys(this._features).map(function(e){return t._features[e]})},u.prototype.select=function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(t).forEach(function(t){e._selectedFeatureIds.has(t)||(e._selectedFeatureIds.add(t),e._changedFeatureIds.add(t),o.silent||(e._emitSelectionChange=!0))}),this},u.prototype.deselect=function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(t).forEach(function(t){e._selectedFeatureIds.has(t)&&(e._selectedFeatureIds.delete(t),e._changedFeatureIds.add(t),o.silent||(e._emitSelectionChange=!0))}),n.call(this,o),this},u.prototype.clearSelected=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.deselect(this._selectedFeatureIds.values(),{silent:t.silent}),this},u.prototype.setSelected=function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=i(t),this.deselect(this._selectedFeatureIds.values().filter(function(e){return-1===t.indexOf(e)}),{silent:o.silent}),this.select(t.filter(function(t){return!e._selectedFeatureIds.has(t)}),{silent:o.silent}),this},u.prototype.setSelectedCoordinates=function(t){return this._selectedCoordinates=t,this._emitSelectionChange=!0,this},u.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},u.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},u.prototype.getSelected=function(){var t=this;return this._selectedFeatureIds.values().map(function(e){return t.get(e)})},u.prototype.getSelectedCoordinates=function(){var t=this;return this._selectedCoordinates.map(function(e){return{coordinates:t.get(e.feature_id).getCoordinate(e.coord_path)}})},u.prototype.isSelected=function(t){return this._selectedFeatureIds.has(t)},u.prototype.setFeatureProperty=function(t,e,o){this.get(t).setProperty(e,o),this.featureChanged(t)},u.prototype.storeMapConfig=function(){var t=this;l.forEach(function(e){t.ctx.map[e]&&(t._mapInitialConfig[e]=t.ctx.map[e].isEnabled())})},u.prototype.restoreMapConfig=function(){var t=this;Object.keys(this._mapInitialConfig).forEach(function(e){t._mapInitialConfig[e]?t.ctx.map[e].enable():t.ctx.map[e].disable()})},u.prototype.getInitialConfigValue=function(t){return void 0===this._mapInitialConfig[t]||this._mapInitialConfig[t]}},{"./constants":23,"./lib/string_set":47,"./lib/throttle":50,"./lib/to_dense_array":51,"./render":62}],65:[function(t,e,o){"use strict";var n=t("xtend"),r=t("./constants"),i=["mode","feature","mouse"];e.exports=function(t){function e(t){d=n(d,t)}function o(){if(t.container){var e=[],o=[];i.forEach(function(t){d[t]!==p[t]&&(e.push("".concat(t,"-").concat(p[t])),null!==d[t]&&o.push("".concat(t,"-").concat(d[t])))}),e.length>0&&t.container.classList.remove.apply(t.container.classList,e),o.length>0&&t.container.classList.add.apply(t.container.classList,o),p=n(p,d)}}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=document.createElement("button");return o.className="".concat(r.classes.CONTROL_BUTTON," ").concat(e.className),o.setAttribute("title",e.title),e.container.appendChild(o),o.addEventListener("click",function(o){o.preventDefault(),o.stopPropagation(),o.target!==c?(l(t),e.onActivate()):s()},!0),o}function s(){c&&(c.classList.remove(r.classes.ACTIVE_BUTTON),c=null)}function l(t){s();var e=u[t];e&&e&&"trash"!==t&&(e.classList.add(r.classes.ACTIVE_BUTTON),c=e)}var u={},c=null,p={mode:null,feature:null,mouse:null},d={mode:null,feature:null,mouse:null};return{setActiveButton:l,queueMapClasses:e,updateMapClasses:o,clearMapClasses:function(){e({mode:null,feature:null,mouse:null}),o()},addButtons:function(){var e=t.options.controls,o=document.createElement("div");return o.className="".concat(r.classes.CONTROL_GROUP," ").concat(r.classes.CONTROL_BASE),e?(e[r.types.LINE]&&(u[r.types.LINE]=a(r.types.LINE,{container:o,className:r.classes.CONTROL_BUTTON_LINE,title:"LineString tool ".concat(t.options.keybindings?"(l)":""),onActivate:function(){return t.events.changeMode(r.modes.DRAW_LINE_STRING)}})),e[r.types.POLYGON]&&(u[r.types.POLYGON]=a(r.types.POLYGON,{container:o,className:r.classes.CONTROL_BUTTON_POLYGON,title:"Polygon tool ".concat(t.options.keybindings?"(p)":""),onActivate:function(){return t.events.changeMode(r.modes.DRAW_POLYGON)}})),e[r.types.POINT]&&(u[r.types.POINT]=a(r.types.POINT,{container:o,className:r.classes.CONTROL_BUTTON_POINT,title:"Marker tool ".concat(t.options.keybindings?"(m)":""),onActivate:function(){return t.events.changeMode(r.modes.DRAW_POINT)}})),e.trash&&(u.trash=a("trash",{container:o,className:r.classes.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){t.events.trash()}})),e.combine_features&&(u.combine_features=a("combineFeatures",{container:o,className:r.classes.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){t.events.combineFeatures()}})),e.uncombine_features&&(u.uncombine_features=a("uncombineFeatures",{container:o,className:r.classes.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){t.events.uncombineFeatures()}})),o):o},removeButtons:function(){Object.keys(u).forEach(function(t){var e=u[t];e.parentNode&&e.parentNode.removeChild(e),delete u[t]})}}}},{"./constants":23,xtend:21}]},{},[1])(1)}).call(this,o(11))},function(t,e,o){"use strict";(function(t){var n=o(50),r=o(51),i=o(52);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,o){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(t,e,o);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return p(this,t)}return u(this,t,e,o)}function u(t,e,o,n){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,o,n){if(e.byteLength,o<0||e.byteLength<o)throw new RangeError("'offset' is out of bounds");if(e.byteLength<o+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===o&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,o):new Uint8Array(e,o,n);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=d(t,e);return t}(t,e,o,n):"string"===typeof e?function(t,e,o){"string"===typeof o&&""!==o||(o="utf8");if(!l.isEncoding(o))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(e,o),r=(t=s(t,n)).write(e,o);r!==n&&(t=t.slice(0,r));return t}(t,e,o):function(t,e){if(l.isBuffer(e)){var o=0|h(e.length);return 0===(t=s(t,o)).length?t:(e.copy(t,0,0,o),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||(n=e.length)!==n?s(t,0):d(t,e);if("Buffer"===e.type&&i(e.data))return d(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function p(t,e){if(c(e),t=s(t,e<0?0:0|h(e)),!l.TYPED_ARRAY_SUPPORT)for(var o=0;o<e;++o)t[o]=0;return t}function d(t,e){var o=e.length<0?0:0|h(e.length);t=s(t,o);for(var n=0;n<o;n+=1)t[n]=255&e[n];return t}function h(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function f(t,e){if(l.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var o=t.length;if(0===o)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*o;case"hex":return o>>>1;case"base64":return z(t).length;default:if(n)return B(t).length;e=(""+e).toLowerCase(),n=!0}}function g(t,e,o){var n=t[e];t[e]=t[o],t[o]=n}function y(t,e,o,n,r){if(0===t.length)return-1;if("string"===typeof o?(n=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,isNaN(o)&&(o=r?0:t.length-1),o<0&&(o=t.length+o),o>=t.length){if(r)return-1;o=t.length-1}else if(o<0){if(!r)return-1;o=0}if("string"===typeof e&&(e=l.from(e,n)),l.isBuffer(e))return 0===e.length?-1:v(t,e,o,n,r);if("number"===typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,o):Uint8Array.prototype.lastIndexOf.call(t,e,o):v(t,[e],o,n,r);throw new TypeError("val must be string, number or Buffer")}function v(t,e,o,n,r){var i,a=1,s=t.length,l=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,l/=2,o/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(r){var c=-1;for(i=o;i<s;i++)if(u(t,i)===u(e,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===l)return c*a}else-1!==c&&(i-=i-c),c=-1}else for(o+l>s&&(o=s-l),i=o;i>=0;i--){for(var p=!0,d=0;d<l;d++)if(u(t,i+d)!==u(e,d)){p=!1;break}if(p)return i}return-1}function m(t,e,o,n){o=Number(o)||0;var r=t.length-o;n?(n=Number(n))>r&&(n=r):n=r;var i=e.length;if(i%2!==0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[o+a]=s}return a}function C(t,e,o,n){return H(B(e,t.length-o),t,o,n)}function _(t,e,o,n){return H(function(t){for(var e=[],o=0;o<t.length;++o)e.push(255&t.charCodeAt(o));return e}(e),t,o,n)}function w(t,e,o,n){return _(t,e,o,n)}function b(t,e,o,n){return H(z(e),t,o,n)}function S(t,e,o,n){return H(function(t,e){for(var o,n,r,i=[],a=0;a<t.length&&!((e-=2)<0);++a)o=t.charCodeAt(a),n=o>>8,r=o%256,i.push(r),i.push(n);return i}(e,t.length-o),t,o,n)}function E(t,e,o){return 0===e&&o===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,o))}function x(t,e,o){o=Math.min(t.length,o);for(var n=[],r=e;r<o;){var i,a,s,l,u=t[r],c=null,p=u>239?4:u>223?3:u>191?2:1;if(r+p<=o)switch(p){case 1:u<128&&(c=u);break;case 2:128===(192&(i=t[r+1]))&&(l=(31&u)<<6|63&i)>127&&(c=l);break;case 3:i=t[r+1],a=t[r+2],128===(192&i)&&128===(192&a)&&(l=(15&u)<<12|(63&i)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:i=t[r+1],a=t[r+2],s=t[r+3],128===(192&i)&&128===(192&a)&&128===(192&s)&&(l=(15&u)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,p=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),r+=p}return function(t){var e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);var o="",n=0;for(;n<e;)o+=String.fromCharCode.apply(String,t.slice(n,n+=T));return o}(n)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=a(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,o){return u(null,t,e,o)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,o){return function(t,e,o,n){return c(e),e<=0?s(t,e):void 0!==o?"string"===typeof n?s(t,e).fill(o,n):s(t,e).fill(o):s(t,e)}(null,t,e,o)},l.allocUnsafe=function(t){return p(null,t)},l.allocUnsafeSlow=function(t){return p(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var o=t.length,n=e.length,r=0,i=Math.min(o,n);r<i;++r)if(t[r]!==e[r]){o=t[r],n=e[r];break}return o<n?-1:n<o?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var o;if(void 0===e)for(e=0,o=0;o<t.length;++o)e+=t[o].length;var n=l.allocUnsafe(e),r=0;for(o=0;o<t.length;++o){var a=t[o];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,r),r+=a.length}return n},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?x(this,0,t):function(t,e,o){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===o||o>this.length)&&(o=this.length),o<=0)return"";if((o>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,o);case"utf8":case"utf-8":return x(this,e,o);case"ascii":return O(this,e,o);case"latin1":case"binary":return R(this,e,o);case"base64":return E(this,e,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,o);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",o=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,o).match(/.{2}/g).join(" "),this.length>o&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,o,n,r){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===o&&(o=t?t.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),e<0||o>t.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&e>=o)return 0;if(n>=r)return-1;if(e>=o)return 1;if(this===t)return 0;for(var i=(r>>>=0)-(n>>>=0),a=(o>>>=0)-(e>>>=0),s=Math.min(i,a),u=this.slice(n,r),c=t.slice(e,o),p=0;p<s;++p)if(u[p]!==c[p]){i=u[p],a=c[p];break}return i<a?-1:a<i?1:0},l.prototype.includes=function(t,e,o){return-1!==this.indexOf(t,e,o)},l.prototype.indexOf=function(t,e,o){return y(this,t,e,o,!0)},l.prototype.lastIndexOf=function(t,e,o){return y(this,t,e,o,!1)},l.prototype.write=function(t,e,o,n){if(void 0===e)n="utf8",o=this.length,e=0;else if(void 0===o&&"string"===typeof e)n=e,o=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(o)?(o|=0,void 0===n&&(n="utf8")):(n=o,o=void 0)}var r=this.length-e;if((void 0===o||o>r)&&(o=r),t.length>0&&(o<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return m(this,t,e,o);case"utf8":case"utf-8":return C(this,t,e,o);case"ascii":return _(this,t,e,o);case"latin1":case"binary":return w(this,t,e,o);case"base64":return b(this,t,e,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,o);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function O(t,e,o){var n="";o=Math.min(t.length,o);for(var r=e;r<o;++r)n+=String.fromCharCode(127&t[r]);return n}function R(t,e,o){var n="";o=Math.min(t.length,o);for(var r=e;r<o;++r)n+=String.fromCharCode(t[r]);return n}function P(t,e,o){var n=t.length;(!e||e<0)&&(e=0),(!o||o<0||o>n)&&(o=n);for(var r="",i=e;i<o;++i)r+=V(t[i]);return r}function A(t,e,o){for(var n=t.slice(e,o),r="",i=0;i<n.length;i+=2)r+=String.fromCharCode(n[i]+256*n[i+1]);return r}function D(t,e,o){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>o)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,o,n,r,i){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<i)throw new RangeError('"value" argument is out of bounds');if(o+n>t.length)throw new RangeError("Index out of range")}function I(t,e,o,n){e<0&&(e=65535+e+1);for(var r=0,i=Math.min(t.length-o,2);r<i;++r)t[o+r]=(e&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function L(t,e,o,n){e<0&&(e=4294967295+e+1);for(var r=0,i=Math.min(t.length-o,4);r<i;++r)t[o+r]=e>>>8*(n?r:3-r)&255}function F(t,e,o,n,r,i){if(o+n>t.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function N(t,e,o,n,i){return i||F(t,0,o,4),r.write(t,e,o,n,23,4),o+4}function k(t,e,o,n,i){return i||F(t,0,o,8),r.write(t,e,o,n,52,8),o+8}l.prototype.slice=function(t,e){var o,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(o=this.subarray(t,e)).__proto__=l.prototype;else{var r=e-t;o=new l(r,void 0);for(var i=0;i<r;++i)o[i]=this[i+t]}return o},l.prototype.readUIntLE=function(t,e,o){t|=0,e|=0,o||D(t,e,this.length);for(var n=this[t],r=1,i=0;++i<e&&(r*=256);)n+=this[t+i]*r;return n},l.prototype.readUIntBE=function(t,e,o){t|=0,e|=0,o||D(t,e,this.length);for(var n=this[t+--e],r=1;e>0&&(r*=256);)n+=this[t+--e]*r;return n},l.prototype.readUInt8=function(t,e){return e||D(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||D(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||D(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||D(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,o){t|=0,e|=0,o||D(t,e,this.length);for(var n=this[t],r=1,i=0;++i<e&&(r*=256);)n+=this[t+i]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*e)),n},l.prototype.readIntBE=function(t,e,o){t|=0,e|=0,o||D(t,e,this.length);for(var n=e,r=1,i=this[t+--n];n>0&&(r*=256);)i+=this[t+--n]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},l.prototype.readInt8=function(t,e){return e||D(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||D(t,2,this.length);var o=this[t]|this[t+1]<<8;return 32768&o?4294901760|o:o},l.prototype.readInt16BE=function(t,e){e||D(t,2,this.length);var o=this[t+1]|this[t]<<8;return 32768&o?4294901760|o:o},l.prototype.readInt32LE=function(t,e){return e||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||D(t,4,this.length),r.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||D(t,4,this.length),r.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||D(t,8,this.length),r.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||D(t,8,this.length),r.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,o,n){(t=+t,e|=0,o|=0,n)||M(this,t,e,o,Math.pow(2,8*o)-1,0);var r=1,i=0;for(this[e]=255&t;++i<o&&(r*=256);)this[e+i]=t/r&255;return e+o},l.prototype.writeUIntBE=function(t,e,o,n){(t=+t,e|=0,o|=0,n)||M(this,t,e,o,Math.pow(2,8*o)-1,0);var r=o-1,i=1;for(this[e+r]=255&t;--r>=0&&(i*=256);)this[e+r]=t/i&255;return e+o},l.prototype.writeUInt8=function(t,e,o){return t=+t,e|=0,o||M(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,o){return t=+t,e|=0,o||M(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,o){return t=+t,e|=0,o||M(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,o){return t=+t,e|=0,o||M(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,o){return t=+t,e|=0,o||M(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,o,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*o-1);M(this,t,e,o,r-1,-r)}var i=0,a=1,s=0;for(this[e]=255&t;++i<o&&(a*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+o},l.prototype.writeIntBE=function(t,e,o,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*o-1);M(this,t,e,o,r-1,-r)}var i=o-1,a=1,s=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+o},l.prototype.writeInt8=function(t,e,o){return t=+t,e|=0,o||M(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,o){return t=+t,e|=0,o||M(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):I(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,o){return t=+t,e|=0,o||M(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):I(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,o){return t=+t,e|=0,o||M(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,o){return t=+t,e|=0,o||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,o){return N(this,t,e,!0,o)},l.prototype.writeFloatBE=function(t,e,o){return N(this,t,e,!1,o)},l.prototype.writeDoubleLE=function(t,e,o){return k(this,t,e,!0,o)},l.prototype.writeDoubleBE=function(t,e,o){return k(this,t,e,!1,o)},l.prototype.copy=function(t,e,o,n){if(o||(o=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<o&&(n=o),n===o)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(o<0||o>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-o&&(n=t.length-e+o);var r,i=n-o;if(this===t&&o<e&&e<n)for(r=i-1;r>=0;--r)t[r+e]=this[r+o];else if(i<1e3||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<i;++r)t[r+e]=this[r+o];else Uint8Array.prototype.set.call(t,this.subarray(o,o+i),e);return i},l.prototype.fill=function(t,e,o,n){if("string"===typeof t){if("string"===typeof e?(n=e,e=0,o=this.length):"string"===typeof o&&(n=o,o=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<o)throw new RangeError("Out of range index");if(o<=e)return this;var i;if(e>>>=0,o=void 0===o?this.length:o>>>0,t||(t=0),"number"===typeof t)for(i=e;i<o;++i)this[i]=t;else{var a=l.isBuffer(t)?t:B(new l(t,n).toString()),s=a.length;for(i=0;i<o-e;++i)this[i+e]=a[i%s]}return this};var G=/[^+\/0-9A-Za-z-_]/g;function V(t){return t<16?"0"+t.toString(16):t.toString(16)}function B(t,e){var o;e=e||1/0;for(var n=t.length,r=null,i=[],a=0;a<n;++a){if((o=t.charCodeAt(a))>55295&&o<57344){if(!r){if(o>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&i.push(239,191,189);continue}r=o;continue}if(o<56320){(e-=3)>-1&&i.push(239,191,189),r=o;continue}o=65536+(r-55296<<10|o-56320)}else r&&(e-=3)>-1&&i.push(239,191,189);if(r=null,o<128){if((e-=1)<0)break;i.push(o)}else if(o<2048){if((e-=2)<0)break;i.push(o>>6|192,63&o|128)}else if(o<65536){if((e-=3)<0)break;i.push(o>>12|224,o>>6&63|128,63&o|128)}else{if(!(o<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}}return i}function z(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(G,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function H(t,e,o,n){for(var r=0;r<n&&!(r+o>=e.length||r>=t.length);++r)e[r+o]=t[r];return r}}).call(this,o(11))},function(t,e,o){"use strict";e.byteLength=function(t){var e=u(t),o=e[0],n=e[1];return 3*(o+n)/4-n},e.toByteArray=function(t){var e,o,n=u(t),a=n[0],s=n[1],l=new i(function(t,e,o){return 3*(e+o)/4-o}(0,a,s)),c=0,p=s>0?a-4:a;for(o=0;o<p;o+=4)e=r[t.charCodeAt(o)]<<18|r[t.charCodeAt(o+1)]<<12|r[t.charCodeAt(o+2)]<<6|r[t.charCodeAt(o+3)],l[c++]=e>>16&255,l[c++]=e>>8&255,l[c++]=255&e;2===s&&(e=r[t.charCodeAt(o)]<<2|r[t.charCodeAt(o+1)]>>4,l[c++]=255&e);1===s&&(e=r[t.charCodeAt(o)]<<10|r[t.charCodeAt(o+1)]<<4|r[t.charCodeAt(o+2)]>>2,l[c++]=e>>8&255,l[c++]=255&e);return l},e.fromByteArray=function(t){for(var e,o=t.length,r=o%3,i=[],a=0,s=o-r;a<s;a+=16383)i.push(c(t,a,a+16383>s?s:a+16383));1===r?(e=t[o-1],i.push(n[e>>2]+n[e<<4&63]+"==")):2===r&&(e=(t[o-2]<<8)+t[o-1],i.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return i.join("")};for(var n=[],r=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)n[s]=a[s],r[a.charCodeAt(s)]=s;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=t.indexOf("=");return-1===o&&(o=e),[o,o===e?0:4-o%4]}function c(t,e,o){for(var r,i,a=[],s=e;s<o;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(n[(i=r)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,o,n,r){var i,a,s=8*r-n-1,l=(1<<s)-1,u=l>>1,c=-7,p=o?r-1:0,d=o?-1:1,h=t[e+p];for(p+=d,i=h&(1<<-c)-1,h>>=-c,c+=s;c>0;i=256*i+t[e+p],p+=d,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=n;c>0;a=256*a+t[e+p],p+=d,c-=8);if(0===i)i=1-u;else{if(i===l)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,n),i-=u}return(h?-1:1)*a*Math.pow(2,i-n)},e.write=function(t,e,o,n,r,i){var a,s,l,u=8*i-r-1,c=(1<<u)-1,p=c>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,f=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+p>=1?d/l:d*Math.pow(2,1-p))*l>=2&&(a++,l/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(e*l-1)*Math.pow(2,r),a+=p):(s=e*Math.pow(2,p-1)*Math.pow(2,r),a=0));r>=8;t[o+h]=255&s,h+=f,s/=256,r-=8);for(a=a<<r|s,u+=r;u>0;t[o+h]=255&a,h+=f,a/=256,u-=8);t[o+h-f]|=128*g}},function(t,e){var o={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==o.call(t)}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),e.default=void 0;var n=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var o=h(e);if(o&&o.has(t))return o.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var a=r?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=t[i]}n.default=t,o&&o.set(t,n);return n}(o(1)),r=d(o(25)),i=d(o(8)),a=d(o(56)),s=o(19),l=o(26),u=o(12),c=d(o(58)),p=d(o(27));function d(t){return t&&t.__esModule?t:{default:t}}function h(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return(h=function(t){return t?o:e})(t)}function f(){return(f=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n])}return t}).apply(this,arguments)}function g(t,e,o){return(e=function(t){var e=function(t,e){if("object"!==typeof t||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}class y extends n.Component{static getDerivedStateFromProps(t,e){let{position:o}=t,{prevPropsPosition:n}=e;return!o||n&&o.x===n.x&&o.y===n.y?null:((0,p.default)("Draggable: getDerivedStateFromProps %j",{position:o,prevPropsPosition:n}),{x:o.x,y:o.y,prevPropsPosition:{...o}})}constructor(t){super(t),g(this,"onDragStart",(t,e)=>{if((0,p.default)("Draggable: onDragStart: %j",e),!1===this.props.onStart(t,(0,l.createDraggableData)(this,e)))return!1;this.setState({dragging:!0,dragged:!0})}),g(this,"onDrag",(t,e)=>{if(!this.state.dragging)return!1;(0,p.default)("Draggable: onDrag: %j",e);const o=(0,l.createDraggableData)(this,e),n={x:o.x,y:o.y,slackX:0,slackY:0};if(this.props.bounds){const{x:t,y:e}=n;n.x+=this.state.slackX,n.y+=this.state.slackY;const[r,i]=(0,l.getBoundPosition)(this,n.x,n.y);n.x=r,n.y=i,n.slackX=this.state.slackX+(t-n.x),n.slackY=this.state.slackY+(e-n.y),o.x=n.x,o.y=n.y,o.deltaX=n.x-this.state.x,o.deltaY=n.y-this.state.y}if(!1===this.props.onDrag(t,o))return!1;this.setState(n)}),g(this,"onDragStop",(t,e)=>{if(!this.state.dragging)return!1;if(!1===this.props.onStop(t,(0,l.createDraggableData)(this,e)))return!1;(0,p.default)("Draggable: onDragStop: %j",e);const o={dragging:!1,slackX:0,slackY:0};if(Boolean(this.props.position)){const{x:t,y:e}=this.props.position;o.x=t,o.y=e}this.setState(o)}),this.state={dragging:!1,dragged:!1,x:t.position?t.position.x:t.defaultPosition.x,y:t.position?t.position.y:t.defaultPosition.y,prevPropsPosition:{...t.position},slackX:0,slackY:0,isElementSVG:!1},!t.position||t.onDrag||t.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){"undefined"!==typeof window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var t,e;return null!==(t=null===(e=this.props)||void 0===e||null===(e=e.nodeRef)||void 0===e?void 0:e.current)&&void 0!==t?t:i.default.findDOMNode(this)}render(){const{axis:t,bounds:e,children:o,defaultPosition:r,defaultClassName:i,defaultClassNameDragging:u,defaultClassNameDragged:p,position:d,positionOffset:h,scale:g,...y}=this.props;let v={},m=null;const C=!Boolean(d)||this.state.dragging,_=d||r,w={x:(0,l.canDragX)(this)&&C?this.state.x:_.x,y:(0,l.canDragY)(this)&&C?this.state.y:_.y};this.state.isElementSVG?m=(0,s.createSVGTransform)(w,h):v=(0,s.createCSSTransform)(w,h);const b=(0,a.default)(o.props.className||"",i,{[u]:this.state.dragging,[p]:this.state.dragged});return n.createElement(c.default,f({},y,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),n.cloneElement(n.Children.only(o),{className:b,style:{...o.props.style,...v},transform:m}))}}e.default=y,g(y,"displayName","Draggable"),g(y,"propTypes",{...c.default.propTypes,axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:u.dontSetMe,style:u.dontSetMe,transform:u.dontSetMe}),g(y,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})},function(t,e,o){"use strict";var n=o(55);function r(){}function i(){}i.resetWarningCache=r,t.exports=function(){function t(t,e,o,r,i,a){if(a!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var o={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:r};return o.PropTypes=o,o}},function(t,e,o){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,o){"use strict";function n(t){var e,o,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(o=n(t[e]))&&(r&&(r+=" "),r+=o);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function r(){for(var t,e,o=0,r="";o<arguments.length;)(t=arguments[o++])&&(e=n(t))&&(r&&(r+=" "),r+=e);return r}o.r(e),o.d(e,"clsx",function(){return r}),e.default=r},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.browserPrefixToKey=i,e.browserPrefixToStyle=function(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t},e.default=void 0,e.getPrefix=r;const n=["Moz","Webkit","O","ms"];function r(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"===typeof window)return"";const o=null===(t=window.document)||void 0===t||null===(t=t.documentElement)||void 0===t?void 0:t.style;if(!o)return"";if(e in o)return"";for(let r=0;r<n.length;r++)if(i(e,n[r])in o)return n[r];return""}function i(t,e){return e?"".concat(e).concat(function(t){let e="",o=!0;for(let n=0;n<t.length;n++)o?(e+=t[n].toUpperCase(),o=!1):"-"===t[n]?o=!0:e+=t[n];return e}(t)):t}e.default=r()},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var o=p(e);if(o&&o.has(t))return o.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var a=r?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=t[i]}n.default=t,o&&o.set(t,n);return n}(o(1)),r=c(o(25)),i=c(o(8)),a=o(19),s=o(26),l=o(12),u=c(o(27));function c(t){return t&&t.__esModule?t:{default:t}}function p(t){if("function"!==typeof WeakMap)return null;var e=new WeakMap,o=new WeakMap;return(p=function(t){return t?o:e})(t)}function d(t,e,o){return(e=function(t){var e=function(t,e){if("object"!==typeof t||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}const h={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let f=h.mouse;class g extends n.Component{constructor(){super(...arguments),d(this,"dragging",!1),d(this,"lastX",NaN),d(this,"lastY",NaN),d(this,"touchIdentifier",null),d(this,"mounted",!1),d(this,"handleDragStart",t=>{if(this.props.onMouseDown(t),!this.props.allowAnyClick&&"number"===typeof t.button&&0!==t.button)return!1;const e=this.findDOMNode();if(!e||!e.ownerDocument||!e.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:o}=e;if(this.props.disabled||!(t.target instanceof o.defaultView.Node)||this.props.handle&&!(0,a.matchesSelectorAndParentsTo)(t.target,this.props.handle,e)||this.props.cancel&&(0,a.matchesSelectorAndParentsTo)(t.target,this.props.cancel,e))return;"touchstart"===t.type&&t.preventDefault();const n=(0,a.getTouchIdentifier)(t);this.touchIdentifier=n;const r=(0,s.getControlPosition)(t,n,this);if(null==r)return;const{x:i,y:l}=r,c=(0,s.createCoreData)(this,i,l);(0,u.default)("DraggableCore: handleDragStart: %j",c),(0,u.default)("calling",this.props.onStart),!1!==this.props.onStart(t,c)&&!1!==this.mounted&&(this.props.enableUserSelectHack&&(0,a.addUserSelectStyles)(o),this.dragging=!0,this.lastX=i,this.lastY=l,(0,a.addEvent)(o,f.move,this.handleDrag),(0,a.addEvent)(o,f.stop,this.handleDragStop))}),d(this,"handleDrag",t=>{const e=(0,s.getControlPosition)(t,this.touchIdentifier,this);if(null==e)return;let{x:o,y:n}=e;if(Array.isArray(this.props.grid)){let t=o-this.lastX,e=n-this.lastY;if([t,e]=(0,s.snapToGrid)(this.props.grid,t,e),!t&&!e)return;o=this.lastX+t,n=this.lastY+e}const r=(0,s.createCoreData)(this,o,n);if((0,u.default)("DraggableCore: handleDrag: %j",r),!1!==this.props.onDrag(t,r)&&!1!==this.mounted)this.lastX=o,this.lastY=n;else try{this.handleDragStop(new MouseEvent("mouseup"))}catch(i){const t=document.createEvent("MouseEvents");t.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(t)}}),d(this,"handleDragStop",t=>{if(!this.dragging)return;const e=(0,s.getControlPosition)(t,this.touchIdentifier,this);if(null==e)return;let{x:o,y:n}=e;if(Array.isArray(this.props.grid)){let t=o-this.lastX||0,e=n-this.lastY||0;[t,e]=(0,s.snapToGrid)(this.props.grid,t,e),o=this.lastX+t,n=this.lastY+e}const r=(0,s.createCoreData)(this,o,n);if(!1===this.props.onStop(t,r)||!1===this.mounted)return!1;const i=this.findDOMNode();i&&this.props.enableUserSelectHack&&(0,a.removeUserSelectStyles)(i.ownerDocument),(0,u.default)("DraggableCore: handleDragStop: %j",r),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,i&&((0,u.default)("DraggableCore: Removing handlers"),(0,a.removeEvent)(i.ownerDocument,f.move,this.handleDrag),(0,a.removeEvent)(i.ownerDocument,f.stop,this.handleDragStop))}),d(this,"onMouseDown",t=>(f=h.mouse,this.handleDragStart(t))),d(this,"onMouseUp",t=>(f=h.mouse,this.handleDragStop(t))),d(this,"onTouchStart",t=>(f=h.touch,this.handleDragStart(t))),d(this,"onTouchEnd",t=>(f=h.touch,this.handleDragStop(t)))}componentDidMount(){this.mounted=!0;const t=this.findDOMNode();t&&(0,a.addEvent)(t,h.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const t=this.findDOMNode();if(t){const{ownerDocument:e}=t;(0,a.removeEvent)(e,h.mouse.move,this.handleDrag),(0,a.removeEvent)(e,h.touch.move,this.handleDrag),(0,a.removeEvent)(e,h.mouse.stop,this.handleDragStop),(0,a.removeEvent)(e,h.touch.stop,this.handleDragStop),(0,a.removeEvent)(t,h.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,a.removeUserSelectStyles)(e)}}findDOMNode(){var t,e;return null!==(t=this.props)&&void 0!==t&&t.nodeRef?null===(e=this.props)||void 0===e||null===(e=e.nodeRef)||void 0===e?void 0:e.current:i.default.findDOMNode(this)}render(){return n.cloneElement(n.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}e.default=g,d(g,"displayName","DraggableCore"),d(g,"propTypes",{allowAnyClick:r.default.bool,children:r.default.node.isRequired,disabled:r.default.bool,enableUserSelectHack:r.default.bool,offsetParent:function(t,e){if(t[e]&&1!==t[e].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:r.default.arrayOf(r.default.number),handle:r.default.string,cancel:r.default.string,nodeRef:r.default.object,onStart:r.default.func,onDrag:r.default.func,onStop:r.default.func,onMouseDown:r.default.func,scale:r.default.number,className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),d(g,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},,function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&i(e,t,o);return a(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.AgGridReact=void 0;var l=s(o(1)),u=o(61),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.apiListeners=[],e.setGridApi=function(t,o){e.api=t,e.columnApi=o,e.apiListeners.forEach(function(e){return e(t)})},e}return n(e,t),e.prototype.registerApiListener=function(t){this.apiListeners.push(t)},e.prototype.componentWillUnmount=function(){this.apiListeners.length=0},e.prototype.render=function(){return l.default.createElement(u.AgGridReactUi,r({},this.props,{setGridApi:this.setGridApi}))},e}(l.Component);e.AgGridReact=c},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&i(e,t,o);return a(e,t),e},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.AgGridReactUi=void 0;var u=o(4),c=s(o(1)),p=o(62),d=o(67),h=o(68),f=o(69),g=o(70),y=o(71),v=o(72),m=o(73),C=o(28),_=o(74),w=o(5),b=o(6),S=l(o(75)),E=l(o(76)),x=o(14);e.AgGridReactUi=function(t){var e,o,n=c.useRef(),i=c.useRef(null),a=c.useRef(null),s=c.useRef([]),l=c.useRef([]),p=c.useRef(t),d=c.useRef(!1),h=c.useState(void 0),f=h[0],g=h[1],y=c.useState(0)[1],v=c.useCallback(function(e){if(i.current=e,!i.current)return s.current.forEach(function(t){return t()}),void(s.current.length=0);var o=t.modules||[];a.current||(a.current=new _.PortalManager(function(){return y(function(t){return t+1})},t.componentWrappingElement,t.maxComponentCreationTimeMs),s.current.push(function(){var t;null===(t=a.current)||void 0===t||t.destroy(),a.current=null}));var r=u.ComponentUtil.combineAttributesAndGridOptions(t.gridOptions,t),c={providedBeanInstances:{frameworkComponentWrapper:new T(a.current,!!r.reactiveCustomComponents)},modules:o,frameworkOverrides:new R},p=new u.GridCoreCreator;n.current=p.create(i.current,r,function(e){g(e),s.current.push(function(){e.destroy()}),e.getBean(u.CtrlsService.NAME).whenReady(function(){if(!e.isDestroyed()){var o=n.current;o&&t.setGridApi&&t.setGridApi(o,new u.ColumnApi(o))}})},function(t){t.getBean(u.CtrlsService.NAME).whenReady(function(){l.current.forEach(function(t){return t()}),l.current.length=0,d.current=!0})},c)},[]),m=c.useMemo(function(){return r({height:"100%"},t.containerStyle||{})},[t.containerStyle]),C=c.useCallback(function(t){d.current?t():l.current.push(t)},[]);return c.useEffect(function(){var e=function(t,e){var o={};return Object.keys(e).forEach(function(n){var r=e[n];t[n]!==r&&(o[n]=r)}),o}(p.current,t);p.current=t,C(function(){n.current&&u.ComponentUtil.processOnChange(e,n.current)})},[t]),c.default.createElement("div",{style:m,className:t.className,ref:v},f&&!f.isDestroyed()?c.default.createElement(E.default,{context:f}):null,null!==(o=null===(e=a.current)||void 0===e?void 0:e.getPortals())&&void 0!==o?o:null)};var T=function(t){function e(e,o){var n=t.call(this)||this;return n.parent=e,n.reactiveCustomComponents=o,n}return n(e,t),e.prototype.createWrapper=function(t,e){if(this.reactiveCustomComponents){var o=function(t){switch(t){case"filter":return d.FilterComponentWrapper;case"floatingFilterComponent":return h.FloatingFilterComponentWrapper;case"dateComponent":return p.DateComponentWrapper;case"loadingOverlayComponent":return f.LoadingOverlayComponentWrapper;case"noRowsOverlayComponent":return y.NoRowsOverlayComponentWrapper;case"statusPanel":return v.StatusPanelComponentWrapper;case"toolPanel":return m.ToolPanelComponentWrapper;case"menuItem":return g.MenuItemComponentWrapper}}(e.propertyName);if(o)return new o(t,this.parent,e)}else switch(e.propertyName){case"filter":case"floatingFilterComponent":case"dateComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":x.warnReactiveCustomComponents()}var n=!e.cellRenderer&&"toolPanel"!==e.propertyName;return new C.ReactComponent(t,this.parent,e,n)},e}(u.BaseComponentWrapper),O=c.forwardRef(function(t,o){var n=c.useContext(w.BeansContext),i=n.ctrlsFactory,a=n.context,s=n.gridOptionsService,l=n.resizeObserverService,p=n.clientSideRowModel,d=n.serverSideRowModel,h=c.useState(function(){return new b.CssClasses}),f=h[0],g=h[1],y=c.useState(function(){return new b.CssClasses}),v=y[0],m=y[1],C=c.useState(),_=C[0],S=C[1],E=c.useState(),x=E[0],T=E[1],O=c.useRef(),R=c.useRef(null),P=c.useRef(),A=c.useMemo(function(){return u.ModuleRegistry.__getGridRegisteredModules(t.api.getGridId())},[t]),D=c.useMemo(function(){return f.toString()+" ag-details-row"},[f]),M=c.useMemo(function(){return v.toString()+" ag-details-grid"},[v]);o&&c.useImperativeHandle(o,function(){return{refresh:function(){var t,e;return null!==(e=null===(t=O.current)||void 0===t?void 0:t.refresh())&&void 0!==e&&e}}}),t.template&&u._.warnOnce("detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://ag-grid.com/react-data-grid/master-detail-custom-detail/");var I=c.useCallback(function(e){if(R.current=e,!R.current)return a.destroyBean(O.current),void(P.current&&P.current());var o={addOrRemoveCssClass:function(t,e){return g(function(o){return o.setClass(t,e)})},addOrRemoveDetailGridCssClass:function(t,e){return m(function(o){return o.setClass(t,e)})},setDetailGrid:function(t){return S(t)},setRowData:function(t){return T(t)},getGui:function(){return R.current}},n=i.getInstance("detailCellRenderer");if(n&&(a.createBean(n),n.init(o,t),O.current=n,s.get("detailRowAutoHeight"))){var r=function(){if(null!=R.current){var e=R.current.clientHeight;if(null!=e&&e>0){setTimeout(function(){t.node.setRowHeight(e),p?p.onRowHeightChanged():d&&d.onRowHeightChanged()},0)}}};P.current=l.observeResize(R.current,r),r()}},[]),L=c.useCallback(function(t,e){var o;null===(o=O.current)||void 0===o||o.registerDetailWithMaster(t,e)},[]);return c.default.createElement("div",{className:D,ref:I},_&&c.default.createElement(e.AgGridReactUi,r({className:M},_,{modules:A,rowData:x,setGridApi:L})))}),R=function(t){function e(){var e=t.call(this,"react")||this;return e.frameworkComponents={agGroupCellRenderer:S.default,agGroupRowRenderer:S.default,agDetailCellRenderer:O},e.wrapIncoming=function(t,e){return"ensureVisible"===e?b.runWithoutFlushSync(t):t()},e.renderingEngine="react",e}return n(e,t),e.prototype.frameworkComponent=function(t){return this.frameworkComponents[t]},e.prototype.isFrameworkComponent=function(t){if(!t)return!1;var e=t.prototype;return!(e&&"getGui"in e)},e}(u.VanillaFrameworkOverrides)},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.DateComponentWrapper=void 0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.date=null,e.onDateChange=function(t){return e.updateDate(t)},e}return n(e,t),e.prototype.getDate=function(){return this.date},e.prototype.setDate=function(t){this.date=t,this.refreshProps()},e.prototype.refresh=function(t){this.sourceParams=t,this.refreshProps()},e.prototype.getOptionalMethods=function(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]},e.prototype.updateDate=function(t){this.setDate(t),this.sourceParams.onDateChanged()},e.prototype.getProps=function(){var e=t.prototype.getProps.call(this);return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e},e}(o(7).CustomComponentWrapper);e.DateComponentWrapper=r},function(t,e,o){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&r(e,t,o);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});var s=a(o(1)),l=o(13);e.default=s.memo(function(t){var e=t.initialProps,o=t.addUpdateCallback,r=t.CustomComponentClass,i=t.setMethods,a=s.useState(e),u=a[0],c=a[1];return s.useEffect(function(){o(function(t){return c(t)})},[]),s.default.createElement(l.CustomContext.Provider,{value:{setMethods:i}},s.default.createElement(r,n({},u)))})},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=0;e.default=function(){return"agPortalKey_"+ ++n}},function(t,e,o){"use strict";t.exports=o(66)},function(t,e,o){"use strict";var n=o(17),r=o(1);function i(t){for(var e=arguments.length-1,o="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=0;n<e;n++)o+="&args[]="+encodeURIComponent(arguments[n+1]);!function(t,e,o,n,r,i,a,s){if(!t){if(t=void 0,void 0===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[o,n,r,i,a,s],u=0;(t=Error(e.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",o)}var a="function"===typeof Symbol&&Symbol.for,s=a?Symbol.for("react.portal"):60106,l=a?Symbol.for("react.fragment"):60107,u=a?Symbol.for("react.strict_mode"):60108,c=a?Symbol.for("react.profiler"):60114,p=a?Symbol.for("react.provider"):60109,d=a?Symbol.for("react.context"):60110,h=a?Symbol.for("react.concurrent_mode"):60111,f=a?Symbol.for("react.forward_ref"):60112,g=a?Symbol.for("react.suspense"):60113,y=a?Symbol.for("react.memo"):60115,v=a?Symbol.for("react.lazy"):60116;function m(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case h:return"ConcurrentMode";case l:return"Fragment";case s:return"Portal";case c:return"Profiler";case u:return"StrictMode";case g:return"Suspense"}if("object"===typeof t)switch(t.$$typeof){case d:return"Context.Consumer";case p:return"Context.Provider";case f:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case y:return m(t.type);case v:if(t=1===t._status?t._result:null)return m(t)}return null}var C=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;C.hasOwnProperty("ReactCurrentDispatcher")||(C.ReactCurrentDispatcher={current:null});var _={};function w(t,e){for(var o=0|t._threadCount;o<=e;o++)t[o]=t._currentValue2,t._threadCount=o+1}for(var b=new Uint16Array(16),S=0;15>S;S++)b[S]=S+1;b[15]=0;var E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x=Object.prototype.hasOwnProperty,T={},O={};function R(t){return!!x.call(O,t)||!x.call(T,t)&&(E.test(t)?O[t]=!0:(T[t]=!0,!1))}function P(t,e,o,n){if(null===e||"undefined"===typeof e||function(t,e,o,n){if(null!==o&&0===o.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==o?!o.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,o,n))return!0;if(n)return!1;if(null!==o)switch(o.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function A(t,e,o,n,r){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=o,this.propertyName=t,this.type=e}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){D[t]=new A(t,0,!1,t,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];D[e]=new A(e,1,!1,t[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){D[t]=new A(t,2,!1,t.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){D[t]=new A(t,2,!1,t,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){D[t]=new A(t,3,!1,t.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(t){D[t]=new A(t,3,!0,t,null)}),["capture","download"].forEach(function(t){D[t]=new A(t,4,!1,t,null)}),["cols","rows","size","span"].forEach(function(t){D[t]=new A(t,6,!1,t,null)}),["rowSpan","start"].forEach(function(t){D[t]=new A(t,5,!1,t.toLowerCase(),null)});var M=/[\-:]([a-z])/g;function I(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(M,I);D[e]=new A(e,1,!1,t,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(M,I);D[e]=new A(e,1,!1,t,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(M,I);D[e]=new A(e,1,!1,t,"http://www.w3.org/XML/1998/namespace")}),["tabIndex","crossOrigin"].forEach(function(t){D[t]=new A(t,1,!1,t.toLowerCase(),null)});var L=/["'&<>]/;function F(t){if("boolean"===typeof t||"number"===typeof t)return""+t;t=""+t;var e=L.exec(t);if(e){var o,n="",r=0;for(o=e.index;o<t.length;o++){switch(t.charCodeAt(o)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}r!==o&&(n+=t.substring(r,o)),r=o+1,n+=e}t=r!==o?n+t.substring(r,o):n}return t}var N=null,k=null,G=null,V=!1,B=!1,z=null,H=0;function j(){return null===N&&i("321"),N}function U(){return 0<H&&i("312"),{memoizedState:null,queue:null,next:null}}function W(){return null===G?null===k?(V=!1,k=G=U()):(V=!0,G=k):null===G.next?(V=!1,G=G.next=U()):(V=!0,G=G.next),G}function K(t,e,o,n){for(;B;)B=!1,H+=1,G=null,o=t(e,n);return k=N=null,H=0,G=z=null,o}function q(t,e){return"function"===typeof e?e(t):e}function Y(t,e,o){if(N=j(),G=W(),V){var n=G.queue;if(e=n.dispatch,null!==z&&void 0!==(o=z.get(n))){z.delete(n),n=G.memoizedState;do{n=t(n,o.action),o=o.next}while(null!==o);return G.memoizedState=n,[n,e]}return[G.memoizedState,e]}return t=t===q?"function"===typeof e?e():e:void 0!==o?o(e):e,G.memoizedState=t,t=(t=G.queue={last:null,dispatch:null}).dispatch=function(t,e,o){if(25>H||i("301"),t===N)if(B=!0,t={action:o,next:null},null===z&&(z=new Map),void 0===(o=z.get(e)))z.set(e,t);else{for(e=o;null!==e.next;)e=e.next;e.next=t}}.bind(null,N,t),[G.memoizedState,t]}function Z(){}var X=0,J={readContext:function(t){var e=X;return w(t,e),t[e]},useContext:function(t){j();var e=X;return w(t,e),t[e]},useMemo:function(t,e){if(N=j(),e=void 0===e?null:e,null!==(G=W())){var o=G.memoizedState;if(null!==o&&null!==e){t:{var n=o[1];if(null===n)n=!1;else{for(var r=0;r<n.length&&r<e.length;r++){var i=e[r],a=n[r];if((i!==a||0===i&&1/i!==1/a)&&(i===i||a===a)){n=!1;break t}}n=!0}}if(n)return o[0]}}return t=t(),G.memoizedState=[t,e],t},useReducer:Y,useRef:function(t){N=j();var e=(G=W()).memoizedState;return null===e?(t={current:t},G.memoizedState=t):e},useState:function(t){return Y(q,t)},useLayoutEffect:function(){},useCallback:function(t){return t},useImperativeHandle:Z,useEffect:Z,useDebugValue:Z},Q={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function $(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var tt={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},et=n({menuitem:!0},tt),ot={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nt=["Webkit","ms","Moz","O"];Object.keys(ot).forEach(function(t){nt.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ot[e]=ot[t]})});var rt=/([A-Z])/g,it=/^ms-/,at=r.Children.toArray,st=C.ReactCurrentDispatcher,lt={listing:!0,pre:!0,textarea:!0},ut=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,ct={},pt={};var dt=Object.prototype.hasOwnProperty,ht={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function ft(t,e){void 0===t&&i("152",m(e)||"Component")}function gt(t,e,o){function a(r,a){var s=function(t,e,o){var n=t.contextType;if("object"===typeof n&&null!==n)return w(n,o),n[o];if(t=t.contextTypes){for(var r in o={},t)o[r]=e[r];e=o}else e=_;return e}(a,e,o),l=[],u=!1,c={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===l)return null},enqueueReplaceState:function(t,e){u=!0,l=[e]},enqueueSetState:function(t,e){if(null===l)return null;l.push(e)}},p=void 0;if(a.prototype&&a.prototype.isReactComponent){if(p=new a(r.props,s,c),"function"===typeof a.getDerivedStateFromProps){var d=a.getDerivedStateFromProps.call(null,r.props,p.state);null!=d&&(p.state=n({},p.state,d))}}else if(N={},p=a(r.props,s,c),null==(p=K(a,r.props,p,s))||null==p.render)return void ft(t=p,a);if(p.props=r.props,p.context=s,p.updater=c,void 0===(c=p.state)&&(p.state=c=null),"function"===typeof p.UNSAFE_componentWillMount||"function"===typeof p.componentWillMount)if("function"===typeof p.componentWillMount&&"function"!==typeof a.getDerivedStateFromProps&&p.componentWillMount(),"function"===typeof p.UNSAFE_componentWillMount&&"function"!==typeof a.getDerivedStateFromProps&&p.UNSAFE_componentWillMount(),l.length){c=l;var h=u;if(l=null,u=!1,h&&1===c.length)p.state=c[0];else{d=h?c[0]:p.state;var f=!0;for(h=h?1:0;h<c.length;h++){var g=c[h];null!=(g="function"===typeof g?g.call(p,d,r.props,s):g)&&(f?(f=!1,d=n({},d,g)):n(d,g))}p.state=d}}else l=null;if(ft(t=p.render(),a),r=void 0,"function"===typeof p.getChildContext&&"object"===typeof(s=a.childContextTypes))for(var y in r=p.getChildContext())y in s||i("108",m(a)||"Unknown",y);r&&(e=n({},e,r))}for(;r.isValidElement(t);){var s=t,l=s.type;if("function"!==typeof l)break;a(s,l)}return{child:t,context:e}}var yt=function(){function t(e,o){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");r.isValidElement(e)?e.type!==l?e=[e]:(e=e.props.children,e=r.isValidElement(e)?[e]:at(e)):e=at(e),e={type:null,domNamespace:Q.html,children:e,childIndex:0,context:_,footer:""};var n=b[0];if(0===n){var a=b,s=2*(n=a.length);65536>=s||i("304");var u=new Uint16Array(s);for(u.set(a),(b=u)[0]=n+1,a=n;a<s-1;a++)b[a]=a+1;b[s-1]=0}else b[0]=b[n];this.threadID=n,this.stack=[e],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=o,this.suspenseDepth=0,this.contextIndex=-1,this.contextStack=[],this.contextValueStack=[]}return t.prototype.destroy=function(){if(!this.exhausted){this.exhausted=!0,this.clearProviders();var t=this.threadID;b[t]=b[0],b[0]=t}},t.prototype.pushProvider=function(t){var e=++this.contextIndex,o=t.type._context,n=this.threadID;w(o,n);var r=o[n];this.contextStack[e]=o,this.contextValueStack[e]=r,o[n]=t.props.value},t.prototype.popProvider=function(){var t=this.contextIndex,e=this.contextStack[t],o=this.contextValueStack[t];this.contextStack[t]=null,this.contextValueStack[t]=null,this.contextIndex--,e[this.threadID]=o},t.prototype.clearProviders=function(){for(var t=this.contextIndex;0<=t;t--)this.contextStack[t][this.threadID]=this.contextValueStack[t]},t.prototype.read=function(t){if(this.exhausted)return null;var e=X;X=this.threadID;var o=st.current;st.current=J;try{for(var n=[""],r=!1;n[0].length<t;){if(0===this.stack.length){this.exhausted=!0;var a=this.threadID;b[a]=b[0],b[0]=a;break}var s=this.stack[this.stack.length-1];if(r||s.childIndex>=s.children.length){var l=s.footer;if(""!==l&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===s.type)this.currentSelectValue=null;else if(null!=s.type&&null!=s.type.type&&s.type.type.$$typeof===p)this.popProvider(s.type);else if(s.type===g){this.suspenseDepth--;var u=n.pop();if(r){r=!1;var c=s.fallbackFrame;c||i("303"),this.stack.push(c);continue}n[this.suspenseDepth]+=u}n[this.suspenseDepth]+=l}else{var d=s.children[s.childIndex++],h="";try{h+=this.render(d,s.context,s.domNamespace)}catch(f){throw f}n.length<=this.suspenseDepth&&n.push(""),n[this.suspenseDepth]+=h}}return n[0]}finally{st.current=o,X=e}},t.prototype.render=function(t,e,o){if("string"===typeof t||"number"===typeof t)return""===(o=""+t)?"":this.makeStaticMarkup?F(o):this.previousWasTextNode?"\x3c!-- --\x3e"+F(o):(this.previousWasTextNode=!0,F(o));if(t=(e=gt(t,e,this.threadID)).child,e=e.context,null===t||!1===t)return"";if(!r.isValidElement(t)){if(null!=t&&null!=t.$$typeof){var a=t.$$typeof;a===s&&i("257"),i("258",a.toString())}return t=at(t),this.stack.push({type:null,domNamespace:o,children:t,childIndex:0,context:e,footer:""}),""}if("string"===typeof(a=t.type))return this.renderDOM(t,e,o);switch(a){case u:case h:case c:case l:return t=at(t.props.children),this.stack.push({type:null,domNamespace:o,children:t,childIndex:0,context:e,footer:""}),"";case g:i("294")}if("object"===typeof a&&null!==a)switch(a.$$typeof){case f:N={};var m=a.render(t.props,t.ref);return m=K(a.render,t.props,m,t.ref),m=at(m),this.stack.push({type:null,domNamespace:o,children:m,childIndex:0,context:e,footer:""}),"";case y:return t=[r.createElement(a.type,n({ref:t.ref},t.props))],this.stack.push({type:null,domNamespace:o,children:t,childIndex:0,context:e,footer:""}),"";case p:return o={type:t,domNamespace:o,children:a=at(t.props.children),childIndex:0,context:e,footer:""},this.pushProvider(t),this.stack.push(o),"";case d:a=t.type,m=t.props;var C=this.threadID;return w(a,C),a=at(m.children(a[C])),this.stack.push({type:t,domNamespace:o,children:a,childIndex:0,context:e,footer:""}),"";case v:i("295")}i("130",null==a?a:typeof a,"")},t.prototype.renderDOM=function(t,e,o){var a=t.type.toLowerCase();o===Q.html&&$(a),ct.hasOwnProperty(a)||(ut.test(a)||i("65",a),ct[a]=!0);var s=t.props;if("input"===a)s=n({type:void 0},s,{defaultChecked:void 0,defaultValue:void 0,value:null!=s.value?s.value:s.defaultValue,checked:null!=s.checked?s.checked:s.defaultChecked});else if("textarea"===a){var l=s.value;if(null==l){l=s.defaultValue;var u=s.children;null!=u&&(null!=l&&i("92"),Array.isArray(u)&&(1>=u.length||i("93"),u=u[0]),l=""+u),null==l&&(l="")}s=n({},s,{value:void 0,children:""+l})}else if("select"===a)this.currentSelectValue=null!=s.value?s.value:s.defaultValue,s=n({},s,{value:void 0});else if("option"===a){u=this.currentSelectValue;var c=function(t){if(void 0===t||null===t)return t;var e="";return r.Children.forEach(t,function(t){null!=t&&(e+=t)}),e}(s.children);if(null!=u){var p=null!=s.value?s.value+"":c;if(l=!1,Array.isArray(u)){for(var d=0;d<u.length;d++)if(""+u[d]===p){l=!0;break}}else l=""+u===p;s=n({selected:void 0,children:void 0},s,{selected:l,children:c})}}for(_ in(l=s)&&(et[a]&&(null!=l.children||null!=l.dangerouslySetInnerHTML)&&i("137",a,""),null!=l.dangerouslySetInnerHTML&&(null!=l.children&&i("60"),"object"===typeof l.dangerouslySetInnerHTML&&"__html"in l.dangerouslySetInnerHTML||i("61")),null!=l.style&&"object"!==typeof l.style&&i("62","")),l=s,u=this.makeStaticMarkup,c=1===this.stack.length,p="<"+t.type,l)if(dt.call(l,_)){var h=l[_];if(null!=h){if("style"===_){d=void 0;var f="",g="";for(d in h)if(h.hasOwnProperty(d)){var y=0===d.indexOf("--"),v=h[d];if(null!=v){var m=d;if(pt.hasOwnProperty(m))m=pt[m];else{var C=m.replace(rt,"-$1").toLowerCase().replace(it,"-ms-");m=pt[m]=C}f+=g+m+":",g=d,f+=y=null==v||"boolean"===typeof v||""===v?"":y||"number"!==typeof v||0===v||ot.hasOwnProperty(g)&&ot[g]?(""+v).trim():v+"px",g=";"}}h=f||null}d=null;t:if(y=a,v=l,-1===y.indexOf("-"))y="string"===typeof v.is;else switch(y){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":y=!1;break t;default:y=!0}y?ht.hasOwnProperty(_)||(d=R(d=_)&&null!=h?d+'="'+F(h)+'"':""):(y=_,d=h,h=D.hasOwnProperty(y)?D[y]:null,(v="style"!==y)&&(v=null!==h?0===h.type:2<y.length&&("o"===y[0]||"O"===y[0])&&("n"===y[1]||"N"===y[1])),v||P(y,d,h,!1)?d="":null!==h?(y=h.attributeName,d=3===(h=h.type)||4===h&&!0===d?y+'=""':y+'="'+F(d)+'"'):d=R(y)?y+'="'+F(d)+'"':""),d&&(p+=" "+d)}}u||c&&(p+=' data-reactroot=""');var _=p;l="",tt.hasOwnProperty(a)?_+="/>":(_+=">",l="</"+t.type+">");t:{if(null!=(u=s.dangerouslySetInnerHTML)){if(null!=u.__html){u=u.__html;break t}}else if("string"===typeof(u=s.children)||"number"===typeof u){u=F(u);break t}u=null}return null!=u?(s=[],lt[a]&&"\n"===u.charAt(0)&&(_+="\n"),_+=u):s=at(s.children),t=t.type,o=null==o||"http://www.w3.org/1999/xhtml"===o?$(t):"http://www.w3.org/2000/svg"===o&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":o,this.stack.push({domNamespace:o,type:a,children:s,childIndex:0,context:e,footer:l}),this.previousWasTextNode=!1,_},t}(),vt={renderToString:function(t){t=new yt(t,!1);try{return t.read(1/0)}finally{t.destroy()}},renderToStaticMarkup:function(t){t=new yt(t,!0);try{return t.read(1/0)}finally{t.destroy()}},renderToNodeStream:function(){i("207")},renderToStaticNodeStream:function(){i("208")},version:"16.8.6"},mt={default:vt},Ct=mt&&vt||mt;t.exports=Ct.default||Ct},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.FilterComponentWrapper=void 0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.model=null,e.onModelChange=function(t){return e.updateModel(t)},e.onUiChange=function(){return e.sourceParams.filterChangedCallback()},e}return n(e,t),e.prototype.isFilterActive=function(){return null!=this.model},e.prototype.doesFilterPass=function(t){return this.providedMethods.doesFilterPass(t)},e.prototype.getModel=function(){return this.model},e.prototype.setModel=function(t){return this.model=t,this.refreshProps()},e.prototype.refresh=function(t){return this.sourceParams=t,this.refreshProps(),!0},e.prototype.getOptionalMethods=function(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]},e.prototype.updateModel=function(t){var e=this;this.setModel(t).then(function(){return e.sourceParams.filterChangedCallback()})},e.prototype.getProps=function(){var e=t.prototype.getProps.call(this);return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,delete e.filterModifiedCallback,delete e.valueGetter,e},e}(o(7).CustomComponentWrapper);e.FilterComponentWrapper=r},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.FloatingFilterComponentWrapper=void 0;var r=o(7),i=o(29),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.model=null,e.onModelChange=function(t){return e.updateModel(t)},e}return n(e,t),e.prototype.onParentModelChanged=function(t){this.model=t,this.refreshProps()},e.prototype.refresh=function(t){this.sourceParams=t,this.refreshProps()},e.prototype.getOptionalMethods=function(){return["afterGuiAttached"]},e.prototype.updateModel=function(t){this.model=t,this.refreshProps(),i.updateFloatingFilterParent(this.sourceParams,t)},e.prototype.getProps=function(){var e=t.prototype.getProps.call(this);return e.model=this.model,e.onModelChange=this.onModelChange,e},e}(r.CustomComponentWrapper);e.FloatingFilterComponentWrapper=a},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.LoadingOverlayComponentWrapper=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.refresh=function(t){this.sourceParams=t,this.refreshProps()},e}(o(7).CustomComponentWrapper);e.LoadingOverlayComponentWrapper=r},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.MenuItemComponentWrapper=void 0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.active=!1,e.expanded=!1,e.onActiveChange=function(t){return e.updateActive(t)},e}return n(e,t),e.prototype.setActive=function(t){this.awaitSetActive(t)},e.prototype.setExpanded=function(t){this.expanded=t,this.refreshProps()},e.prototype.getOptionalMethods=function(){return["select","configureDefaults"]},e.prototype.awaitSetActive=function(t){return this.active=t,this.refreshProps()},e.prototype.updateActive=function(t){var e=this,o=this.awaitSetActive(t);t&&o.then(function(){return e.sourceParams.onItemActivated()})},e.prototype.getProps=function(){var e=t.prototype.getProps.call(this);return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e},e}(o(7).CustomComponentWrapper);e.MenuItemComponentWrapper=r},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.NoRowsOverlayComponentWrapper=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.refresh=function(t){this.sourceParams=t,this.refreshProps()},e}(o(7).CustomComponentWrapper);e.NoRowsOverlayComponentWrapper=r},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.StatusPanelComponentWrapper=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.refresh=function(t){return this.sourceParams=t,this.refreshProps(),!0},e}(o(7).CustomComponentWrapper);e.StatusPanelComponentWrapper=r},function(t,e,o){"use strict";var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!==typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.ToolPanelComponentWrapper=void 0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onStateChange=function(t){return e.updateState(t)},e}return n(e,t),e.prototype.refresh=function(t){return this.sourceParams=t,this.refreshProps(),!0},e.prototype.getState=function(){return this.state},e.prototype.updateState=function(t){this.state=t,this.refreshProps(),this.sourceParams.onStateUpdated()},e.prototype.getProps=function(){var e=t.prototype.getProps.call(this);return e.state=this.state,e.onStateChange=this.onStateChange,e},e}(o(7).CustomComponentWrapper);e.ToolPanelComponentWrapper=r},function(t,e,o){"use strict";var n=this&&this.__spreadArray||function(t,e){for(var o=0,n=e.length,r=t.length;o<n;o++,r++)t[r]=e[o];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.PortalManager=void 0;var r=function(){function t(e,o,n){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=o||"div",this.refresher=e,this.maxComponentCreationTimeMs=n||t.MAX_COMPONENT_CREATION_TIME_IN_MS}return t.prototype.getPortals=function(){return this.portals},t.prototype.destroy=function(){this.destroyed=!0},t.prototype.destroyPortal=function(t){this.portals=this.portals.filter(function(e){return e!==t}),this.batchUpdate()},t.prototype.getComponentWrappingElement=function(){return this.wrappingElement},t.prototype.mountReactPortal=function(t,e,o){this.portals=n(n([],this.portals),[t]),this.waitForInstance(e,o),this.batchUpdate()},t.prototype.updateReactPortal=function(t,e){this.portals[this.portals.indexOf(t)]=e,this.batchUpdate()},t.prototype.batchUpdate=function(){var t=this;this.hasPendingPortalUpdate||(setTimeout(function(){t.destroyed||(t.refresher(),t.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)},t.prototype.waitForInstance=function(t,e,o){var n=this;if(void 0===o&&(o=Date.now()),this.destroyed)e(null);else if(t.rendered())e(t);else{if(Date.now()-o>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate)return t.isNullValue()?void e(t):(console.error("AG Grid: React Component '"+t.getReactComponentName()+"' not created within "+this.maxComponentCreationTimeMs+"ms."),void console.error("    If the component is using `forwardRef` but not `useImperativeHandle`, add the following: `useImperativeHandle(ref, () => ({}));`"));window.setTimeout(function(){n.waitForInstance(t,e,o)})}},t.MAX_COMPONENT_CREATION_TIME_IN_MS=1e3,t}();e.PortalManager=r},function(t,e,o){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&r(e,t,o);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});var s=o(4),l=a(o(1)),u=o(5),c=o(10),p=o(6),d=l.forwardRef(function(t,e){var o,r=l.useContext(u.BeansContext).context,i=l.useRef(null),a=l.useRef(null),h=l.useRef(null),f=l.useRef(null),g=l.useRef(null),y=l.useRef(),v=l.useState(),m=v[0],C=v[1],_=l.useState(),w=_[0],b=_[1],S=l.useState(),E=S[0],x=S[1],T=l.useState(function(){return new p.CssClasses}),O=T[0],R=T[1],P=l.useState(function(){return new p.CssClasses("ag-hidden")}),A=P[0],D=P[1],M=l.useState(function(){return new p.CssClasses("ag-hidden")}),I=M[0],L=M[1],F=l.useState(function(){return new p.CssClasses("ag-invisible")}),N=F[0],k=F[1];l.useImperativeHandle(e,function(){return{refresh:function(){return!1}}}),l.useLayoutEffect(function(){return c.showJsComp(m,r,a.current)},[m]);var G=l.useCallback(function(e){if(i.current=e,!i.current)return r.destroyBean(y.current),void(y.current=null);var o={setInnerRenderer:function(t,e){C(t),x(e)},setChildCount:function(t){return b(t)},addOrRemoveCssClass:function(t,e){return R(function(o){return o.setClass(t,e)})},setContractedDisplayed:function(t){return L(function(e){return e.setClass("ag-hidden",!t)})},setExpandedDisplayed:function(t){return D(function(e){return e.setClass("ag-hidden",!t)})},setCheckboxVisible:function(t){return k(function(e){return e.setClass("ag-invisible",!t)})}};y.current=r.createBean(new s.GroupCellRendererCtrl),y.current.init(o,i.current,h.current,f.current,g.current,d,t)},[]),V=l.useMemo(function(){return"ag-cell-wrapper "+O.toString()},[O]),B=l.useMemo(function(){return"ag-group-expanded "+A.toString()},[A]),z=l.useMemo(function(){return"ag-group-contracted "+I.toString()},[I]),H=l.useMemo(function(){return"ag-group-checkbox "+N.toString()},[N]),j=m&&m.componentFromFramework,U=j?m.componentClass:void 0,W=null==m&&null!=E,K=s._.escapeString(E,!0);return l.default.createElement("span",n({className:V,ref:G},t.colDef?{}:{role:null===(o=y.current)||void 0===o?void 0:o.getCellAriaRole()}),l.default.createElement("span",{className:B,ref:f}),l.default.createElement("span",{className:z,ref:g}),l.default.createElement("span",{className:H,ref:h}),l.default.createElement("span",{className:"ag-group-value",ref:a},W&&l.default.createElement(l.default.Fragment,null,K),j&&l.default.createElement(U,n({},m.params))),l.default.createElement("span",{className:"ag-group-child-count"},w))});e.default=d},function(t,e,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&n(e,t,o);return r(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(4),l=i(o(1)),u=o(5),c=a(o(77)),p=a(o(20)),d=a(o(91)),h=o(6);e.default=l.memo(function(t){var e=t.context,o=l.useState(""),n=o[0],r=o[1],i=l.useState(""),a=i[0],f=(i[1],l.useState("")),g=f[0],y=f[1],v=l.useState(null),m=v[0],C=v[1],_=l.useState(null),w=_[0],b=_[1],S=l.useState(!1),E=S[0],x=S[1],T=l.useState(),O=T[0],R=T[1],P=l.useRef(null),A=l.useRef(null),D=l.useRef(),M=l.useState(null),I=M[0],L=M[1],F=l.useRef(function(){}),N=l.useCallback(function(){},[]),k=l.useMemo(function(){return e.isDestroyed()?null:e.getBean("beans")},[e]);p.default(" AG Grid ",A);var G=l.useCallback(function(t){if(A.current=t,!A.current)return e.destroyBean(P.current),void(P.current=null);if(!e.isDestroyed()){P.current=e.createBean(new s.GridCtrl);var o=P.current;F.current=o.focusInnerElement.bind(o);var n={destroyGridUi:function(){},setRtlClass:r,forceFocusOutOfContainer:function(t){var e;null===(e=D.current)||void 0===e||e.forceFocusOutOfContainer(t)},updateLayoutClasses:y,getFocusableContainers:function(){var t,e,o=[],n=null===(t=A.current)||void 0===t?void 0:t.querySelector(".ag-root"),r=null===(e=A.current)||void 0===e?void 0:e.querySelector(".ag-side-bar:not(.ag-hidden)");return n&&o.push(n),r&&o.push(r),o},setCursor:C,setUserSelect:b};o.setComp(n,A.current,A.current),x(!0)}},[]);l.useEffect(function(){if(O&&k&&P.current&&I&&A.current){var t=P.current,o=[],n=k.agStackComponentsRegistry,r=n.getComponentClass("AG-GRID-HEADER-DROP-ZONES"),i=n.getComponentClass("AG-SIDE-BAR"),a=n.getComponentClass("AG-STATUS-BAR"),s=n.getComponentClass("AG-WATERMARK"),l=n.getComponentClass("AG-PAGINATION"),u=[],c=A.current;if(t.showDropZones()&&r){var p=e.createBean(new r),d=p.getGui();c.insertAdjacentElement("afterbegin",d),u.push(d),o.push(p)}if(t.showSideBar()&&i){var h=e.createBean(new i),f=(d=h.getGui(),I.querySelector(".ag-tab-guard-bottom"));f&&(f.insertAdjacentElement("beforebegin",d),u.push(d)),o.push(h)}if(t.showStatusBar()&&a){var g=e.createBean(new a);d=g.getGui(),c.insertAdjacentElement("beforeend",d),u.push(d),o.push(g)}if(l){var y=e.createBean(new l);d=y.getGui(),c.insertAdjacentElement("beforeend",d),u.push(d),o.push(y)}if(t.showWatermark()&&s){var v=e.createBean(new s);d=v.getGui(),c.insertAdjacentElement("beforeend",d),u.push(d),o.push(v)}return function(){e.destroyBeans(o),u.forEach(function(t){t.parentElement&&t.parentElement.removeChild(t)})}}},[O,I,k]);var V=l.useMemo(function(){return h.classesList("ag-root-wrapper",n,a,g)},[n,a,g]),B=l.useMemo(function(){return h.classesList("ag-root-wrapper-body","ag-focus-managed",g)},[g]),z=l.useMemo(function(){return{userSelect:null!=w?w:"",WebkitUserSelect:null!=w?w:"",cursor:null!=m?m:""}},[w,m]),H=l.useCallback(function(t){D.current=t,R(null!==t)},[]);return l.default.createElement("div",{ref:G,className:V,style:z,role:"presentation"},l.default.createElement("div",{className:B,ref:L,role:"presentation"},E&&I&&k&&l.default.createElement(u.BeansContext.Provider,{value:k},l.default.createElement(d.default,{ref:H,eFocusableElement:I,onTabKeyDown:N,gridCtrl:P.current,forceFocusOutWhenTabGuardsAreEmpty:!0},l.default.createElement(c.default,null)))))})},function(t,e,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&n(e,t,o);return r(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(4),l=i(o(1)),u=o(5),c=a(o(78)),p=a(o(20)),d=a(o(84)),h=o(6);e.default=l.memo(function(){var t=l.useContext(u.BeansContext),e=t.context,o=t.agStackComponentsRegistry,n=t.resizeObserverService,r=l.useState(""),i=r[0],a=r[1],f=l.useState(0),g=f[0],y=f[1],v=l.useState(0),m=v[0],C=v[1],_=l.useState("0px"),w=_[0],b=_[1],S=l.useState("0px"),E=S[0],x=S[1],T=l.useState("100%"),O=T[0],R=T[1],P=l.useState(""),A=P[0],D=P[1],M=l.useState(""),I=M[0],L=M[1],F=l.useState(null),N=F[0],k=F[1],G=l.useState(""),V=G[0],B=G[1],z=l.useState(null),H=z[0],j=z[1],U=l.useState("ag-layout-normal"),W=U[0],K=U[1],q=l.useRef();q.current||(q.current=new s.CssClassManager(function(){return Y.current}));var Y=l.useRef(null),Z=l.useRef(null),X=l.useRef(null),J=l.useRef(null),Q=l.useRef(null),$=l.useRef(null),tt=l.useRef([]),et=l.useRef([]);p.default(" AG Grid Body ",Y),p.default(" AG Pinned Top ",Z),p.default(" AG Sticky Top ",X),p.default(" AG Middle ",Q),p.default(" AG Pinned Bottom ",$);var ot=l.useCallback(function(t){if(Y.current=t,!Y.current)return e.destroyBeans(tt.current),et.current.forEach(function(t){return t()}),tt.current=[],void(et.current=[]);if(e){var r=function(t){var n=o.getComponentClass(t),r=e.createBean(new n);return tt.current.push(r),r},i=function(t,e){t.appendChild(e),et.current.push(function(){return t.removeChild(e)})};i(Y.current,document.createComment(" AG Fake Horizontal Scroll ")),i(Y.current,r("AG-FAKE-HORIZONTAL-SCROLL").getGui()),i(Y.current,document.createComment(" AG Overlay Wrapper ")),i(Y.current,r("AG-OVERLAY-WRAPPER").getGui()),J.current&&(i(J.current,document.createComment(" AG Fake Vertical Scroll ")),i(J.current,r("AG-FAKE-VERTICAL-SCROLL").getGui()));var l={setRowAnimationCssOnBodyViewport:a,setColumnCount:function(t){Y.current&&s._.setAriaColCount(Y.current,t)},setRowCount:function(t){Y.current&&s._.setAriaRowCount(Y.current,t)},setTopHeight:y,setBottomHeight:C,setStickyTopHeight:b,setStickyTopTop:x,setStickyTopWidth:R,setTopDisplay:D,setBottomDisplay:L,setColumnMovingCss:function(t,e){return q.current.addOrRemoveCssClass(t,e)},updateLayoutClasses:K,setAlwaysVerticalScrollClass:k,setPinnedTopBottomOverflowY:B,setCellSelectableCss:function(t,e){return j(e?t:null)},setBodyViewportWidth:function(t){Q.current&&(Q.current.style.width=t)},registerBodyViewportResizeListener:function(t){if(Q.current){var e=n.observeResize(Q.current,t);et.current.push(function(){return e()})}}},u=e.createBean(new s.GridBodyCtrl);tt.current.push(u),u.setComp(l,Y.current,Q.current,Z.current,$.current,X.current)}},[]),nt=l.useMemo(function(){return h.classesList("ag-root","ag-unselectable",W)},[W]),rt=l.useMemo(function(){return h.classesList("ag-body-viewport",i,W,N,H)},[i,W,N,H]),it=l.useMemo(function(){return h.classesList("ag-body",W)},[W]),at=l.useMemo(function(){return h.classesList("ag-floating-top",H)},[H]),st=l.useMemo(function(){return h.classesList("ag-sticky-top",H)},[H]),lt=l.useMemo(function(){return h.classesList("ag-floating-bottom",H)},[H]),ut=l.useMemo(function(){return{height:g,minHeight:g,display:A,overflowY:V}},[g,A,V]),ct=l.useMemo(function(){return{height:w,top:E,width:O}},[w,E,O]),pt=l.useMemo(function(){return{height:m,minHeight:m,display:I,overflowY:V}},[m,I,V]),dt=function(t){return l.default.createElement(d.default,{name:t,key:t+"-container"})},ht=function(t){var e=t.section,o=t.children,n=t.className,r=t.style;return l.default.createElement("div",{ref:e,className:n,role:"presentation",style:r},o.map(dt))};return l.default.createElement("div",{ref:ot,className:nt,role:"treegrid"},l.default.createElement(c.default,null),ht({section:Z,className:at,style:ut,children:[s.RowContainerName.TOP_LEFT,s.RowContainerName.TOP_CENTER,s.RowContainerName.TOP_RIGHT,s.RowContainerName.TOP_FULL_WIDTH]}),l.default.createElement("div",{className:it,ref:J,role:"presentation"},ht({section:Q,className:rt,children:[s.RowContainerName.LEFT,s.RowContainerName.CENTER,s.RowContainerName.RIGHT,s.RowContainerName.FULL_WIDTH]})),ht({section:X,className:st,style:ct,children:[s.RowContainerName.STICKY_TOP_LEFT,s.RowContainerName.STICKY_TOP_CENTER,s.RowContainerName.STICKY_TOP_RIGHT,s.RowContainerName.STICKY_TOP_FULL_WIDTH]}),ht({section:$,className:lt,style:pt,children:[s.RowContainerName.BOTTOM_LEFT,s.RowContainerName.BOTTOM_CENTER,s.RowContainerName.BOTTOM_RIGHT,s.RowContainerName.BOTTOM_FULL_WIDTH]}))})},function(t,e,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&n(e,t,o);return r(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=i(o(1)),l=o(5),u=o(4),c=o(6),p=a(o(79));e.default=s.memo(function(){var t=s.useState(function(){return new c.CssClasses}),e=t[0],o=t[1],n=s.useState(),r=n[0],i=n[1],a=s.useContext(l.BeansContext).context,d=s.useRef(null),h=s.useRef(null),f=s.useCallback(function(t){if(d.current=t,!t)return a.destroyBean(h.current),void(h.current=null);var e={addOrRemoveCssClass:function(t,e){return o(function(o){return o.setClass(t,e)})},setHeightAndMinHeight:function(t){return i(t)}};h.current=a.createBean(new u.GridHeaderCtrl),h.current.setComp(e,d.current,d.current)},[]),g=s.useMemo(function(){return"ag-header "+e.toString()},[e]),y=s.useMemo(function(){return{height:r,minHeight:r}},[r]);return s.default.createElement("div",{ref:f,className:g,style:y,role:"presentation"},s.default.createElement(p.default,{pinned:"left"}),s.default.createElement(p.default,{pinned:null}),s.default.createElement(p.default,{pinned:"right"}))})},function(t,e,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&n(e,t,o);return r(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=i(o(1)),l=o(5),u=o(4),c=a(o(80));e.default=s.memo(function(t){var e=s.useState(!0),o=e[0],n=e[1],r=s.useState([]),i=r[0],a=r[1],p=s.useContext(l.BeansContext).context,d=s.useRef(null),h=s.useRef(null),f=s.useRef(null),g="left"===t.pinned,y="right"===t.pinned,v=!g&&!y,m=s.useCallback(function(e){if(d.current=e,!d.current)return p.destroyBean(f.current),void(f.current=null);var o={setDisplayed:n,setCtrls:function(t){return a(t)},setCenterWidth:function(t){h.current&&(h.current.style.width=t)},setViewportScrollLeft:function(t){d.current&&(d.current.scrollLeft=t)},setPinnedContainerWidth:function(t){d.current&&(d.current.style.width=t,d.current.style.minWidth=t,d.current.style.maxWidth=t)}};f.current=p.createBean(new u.HeaderRowContainerCtrl(t.pinned)),f.current.setComp(o,d.current)},[]),C=o?"":"ag-hidden",_=function(){return i.map(function(t){return s.default.createElement(c.default,{ctrl:t,key:t.getInstanceId()})})};return s.default.createElement(s.default.Fragment,null,g&&s.default.createElement("div",{ref:m,className:"ag-pinned-left-header "+C,"aria-hidden":!o,role:"rowgroup"},_()),y&&s.default.createElement("div",{ref:m,className:"ag-pinned-right-header "+C,"aria-hidden":!o,role:"rowgroup"},_()),v&&s.default.createElement("div",{ref:m,className:"ag-header-viewport "+C,role:"presentation"},s.default.createElement("div",{ref:h,className:"ag-header-container",role:"rowgroup"},_())))})},function(t,e,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&n(e,t,o);return r(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(4),l=i(o(1)),u=a(o(81)),c=a(o(82)),p=a(o(83)),d=o(6);e.default=l.memo(function(t){var e=t.ctrl,o=l.useMemo(function(){return e.getTopAndHeight()},[]),n=o.topOffset,r=o.rowHeight,i=e.getAriaRowIndex(),a=e.getHeaderRowClass(),h=l.useState(function(){return r+"px"}),f=h[0],g=h[1],y=l.useState(function(){return n+"px"}),v=y[0],m=y[1],C=l.useState(function(){return e.getHeaderCtrls()}),_=C[0],w=C[1],b=l.useRef(null),S=l.useCallback(function(t){if(b.current=t,t){var o={setHeight:function(t){return g(t)},setTop:function(t){return m(t)},setHeaderCtrls:function(t,e,o){d.agFlushSync(o,function(){w(function(o){return d.getNextValueIfDifferent(o,t,e)})})},setWidth:function(t){b.current&&(b.current.style.width=t)}};e.setComp(o,!1)}},[]),E=l.useMemo(function(){return{height:f,top:v}},[f,v]),x=l.useCallback(function(t){switch(e.getType()){case s.HeaderRowType.COLUMN_GROUP:return l.default.createElement(c.default,{ctrl:t,key:t.getInstanceId()});case s.HeaderRowType.FLOATING_FILTER:return l.default.createElement(p.default,{ctrl:t,key:t.getInstanceId()});default:return l.default.createElement(u.default,{ctrl:t,key:t.getInstanceId()})}},[]);return l.default.createElement("div",{ref:S,className:a,role:"row",style:E,"aria-rowindex":i},_.map(x))})},function(t,e,o){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&r(e,t,o);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});var s=a(o(1)),l=o(5),u=o(4),c=o(6),p=o(10);e.default=s.memo(function(t){var e=t.ctrl,o=e.isAlive(),r=s.useContext(l.BeansContext).context,i=o?e.getColId():void 0,a=s.useState(),d=a[0],h=a[1],f=s.useRef(null),g=s.useRef(null),y=s.useRef(null),v=s.useRef(),m=s.useRef();o&&!m.current&&(m.current=new u.CssClassManager(function(){return f.current}));var C=s.useCallback(function(t){var n;if(f.current=t,f.current&&o){var r={setWidth:function(t){f.current&&(f.current.style.width=t)},addOrRemoveCssClass:function(t,e){return m.current.addOrRemoveCssClass(t,e)},setAriaSort:function(t){f.current&&(t?u._.setAriaSort(f.current,t):u._.removeAriaSort(f.current))},setUserCompDetails:function(t){return h(t)},getUserCompInstance:function(){return v.current||void 0}};e.setComp(r,f.current,g.current,y.current);var i=e.getSelectAllGui();null===(n=g.current)||void 0===n||n.insertAdjacentElement("afterend",i)}},[]);s.useLayoutEffect(function(){return p.showJsComp(d,r,y.current,v)},[d]),s.useEffect(function(){e.setDragSource(f.current)},[d]);var _=s.useMemo(function(){return!!((null===d||void 0===d?void 0:d.componentFromFramework)&&c.isComponentStateless(d.componentClass))},[d]),w=d&&d.componentFromFramework,b=d&&d.componentClass;return s.default.createElement("div",{ref:C,className:"ag-header-cell","col-id":i,role:"columnheader"},s.default.createElement("div",{ref:g,className:"ag-header-cell-resize",role:"presentation"}),s.default.createElement("div",{ref:y,className:"ag-header-cell-comp-wrapper",role:"presentation"},w&&_&&s.default.createElement(b,n({},d.params)),w&&!_&&s.default.createElement(b,n({},d.params,{ref:v}))))})},function(t,e,o){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&r(e,t,o);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});var s=a(o(1)),l=o(5),u=o(10),c=o(6);e.default=s.memo(function(t){var e=s.useContext(l.BeansContext).context,o=t.ctrl,r=s.useState(function(){return new c.CssClasses}),i=r[0],a=r[1],p=s.useState(function(){return new c.CssClasses}),d=p[0],h=p[1],f=s.useState("false"),g=f[0],y=f[1],v=s.useState(),m=v[0],C=v[1],_=s.useState(),w=_[0],b=_[1],S=s.useMemo(function(){return o.getColId()},[]),E=s.useRef(null),x=s.useRef(null),T=s.useRef(),O=s.useCallback(function(t){if(E.current=t,E.current){var e={setWidth:function(t){E.current&&(E.current.style.width=t)},addOrRemoveCssClass:function(t,e){return a(function(o){return o.setClass(t,e)})},setUserCompDetails:function(t){return b(t)},setResizableDisplayed:function(t){h(function(e){return e.setClass("ag-hidden",!t)}),y(t?"false":"true")},setAriaExpanded:function(t){return C(t)},getUserCompInstance:function(){return T.current||void 0}};o.setComp(e,E.current,x.current)}},[]);s.useLayoutEffect(function(){return u.showJsComp(w,e,E.current)},[w]),s.useEffect(function(){E.current&&o.setDragSource(E.current)},[w]);var R=s.useMemo(function(){return!!((null===w||void 0===w?void 0:w.componentFromFramework)&&c.isComponentStateless(w.componentClass))},[w]),P=s.useMemo(function(){return"ag-header-group-cell "+i.toString()},[i]),A=s.useMemo(function(){return"ag-header-cell-resize "+d.toString()},[d]),D=w&&w.componentFromFramework,M=w&&w.componentClass;return s.default.createElement("div",{ref:O,className:P,"col-id":S,role:"columnheader","aria-expanded":m},D&&R&&s.default.createElement(M,n({},w.params)),D&&!R&&s.default.createElement(M,n({},w.params,{ref:T})),s.default.createElement("div",{ref:x,"aria-hidden":g,className:A}))})},function(t,e,o){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&r(e,t,o);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});var s=a(o(1)),l=o(5),u=o(4),c=o(6),p=o(10),d=o(29),h=o(13),f=o(14);e.default=s.memo(function(t){var e=s.useContext(l.BeansContext),o=e.context,r=e.gridOptionsService,i=s.useState(function(){return new c.CssClasses("ag-header-cell","ag-floating-filter")}),a=i[0],g=i[1],y=s.useState(function(){return new c.CssClasses}),v=y[0],m=y[1],C=s.useState(function(){return new c.CssClasses("ag-floating-filter-button","ag-hidden")}),_=C[0],w=C[1],b=s.useState("false"),S=b[0],E=b[1],x=s.useState(),T=x[0],O=x[1],R=s.useState(1),P=(R[0],R[1]),A=s.useRef(null),D=s.useRef(null),M=s.useRef(null),I=s.useRef(null),L=s.useRef(),F=s.useRef(),N=function(t){null!=t&&L.current&&L.current(t)},k=t.ctrl,G=s.useCallback(function(t){if(A.current=t,A.current){F.current=new u.AgPromise(function(t){L.current=t});var e={addOrRemoveCssClass:function(t,e){return g(function(o){return o.setClass(t,e)})},addOrRemoveBodyCssClass:function(t,e){return m(function(o){return o.setClass(t,e)})},setButtonWrapperDisplayed:function(t){w(function(e){return e.setClass("ag-hidden",!t)}),E(t?"false":"true")},setWidth:function(t){A.current&&(A.current.style.width=t)},setCompDetails:function(t){return O(t)},getFloatingFilterComp:function(){return F.current?F.current:null},setMenuIcon:function(t){var e;return null===(e=I.current)||void 0===e?void 0:e.appendChild(t)}};k.setComp(e,A.current,I.current,D.current)}},[]);s.useLayoutEffect(function(){return p.showJsComp(T,o,D.current,N)},[T]);var V=s.useMemo(function(){return a.toString()},[a]),B=s.useMemo(function(){return v.toString()},[v]),z=s.useMemo(function(){return _.toString()},[_]),H=s.useMemo(function(){return!!(T&&T.componentFromFramework&&c.isComponentStateless(T.componentClass))},[T]),j=s.useMemo(function(){return r.get("reactiveCustomComponents")},[]),U=s.useMemo(function(){if(T){if(j){var t=new d.FloatingFilterComponentProxy(T.params,function(){return P(function(t){return t+1})});return N(t),t}T.componentFromFramework&&f.warnReactiveCustomComponents()}},[T]),W=null===U||void 0===U?void 0:U.getProps(),K=T&&T.componentFromFramework,q=T&&T.componentClass;return s.default.createElement("div",{ref:G,className:V,role:"gridcell"},s.default.createElement("div",{ref:D,className:B,role:"presentation"},K&&!j&&s.default.createElement(q,n({},T.params,{ref:H?function(){}:N})),K&&j&&s.default.createElement(h.CustomContext.Provider,{value:{setMethods:function(t){return U.setMethods(t)}}},s.default.createElement(q,n({},W)))),s.default.createElement("div",{ref:M,"aria-hidden":S,className:z,role:"presentation"},s.default.createElement("button",{ref:I,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))})},function(t,e,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&n(e,t,o);return r(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(4),l=i(o(1)),u=o(6),c=a(o(20)),p=a(o(85)),d=o(5);e.default=l.memo(function(t){var e=l.useContext(d.BeansContext).context,o=t.name,n=l.useMemo(function(){return s.getRowContainerTypeForName(o)},[o]),r=l.useRef(null),i=l.useRef(null),a=l.useRef([]),h=l.useState(function(){return[]}),f=h[0],g=h[1],y=l.useRef(!1),v=l.useRef(),m=l.useMemo(function(){return s.RowContainerCtrl.getRowContainerCssClasses(o)},[o]),C=l.useMemo(function(){return u.classesList(m.viewport)},[m]),_=l.useMemo(function(){return u.classesList(m.container)},[m]),w=o===s.RowContainerName.CENTER||o===s.RowContainerName.TOP_CENTER||o===s.RowContainerName.BOTTOM_CENTER||o===s.RowContainerName.STICKY_TOP_CENTER,b=w?r:i;c.default(" AG Row Container "+o+" ",b);var S=l.useCallback(function(){return w?null!=r.current&&null!=i.current:null!=i.current},[]),E=l.useCallback(function(){return w?null==r.current&&null==i.current:null==i.current},[]),x=l.useCallback(function(){if(E()&&(e.destroyBean(v.current),v.current=null),S()){var t=function(t){u.agFlushSync(t,function(){g(function(t){return u.getNextValueIfDifferent(t,a.current,y.current)})})},n={setViewportHeight:function(t){r.current&&(r.current.style.height=t)},setRowCtrls:function(e){var o=e.rowCtrls,n=!!e.useFlushSync&&a.current.length>0&&o.length>0;a.current=o,t(n)},setDomOrder:function(e){y.current!=e&&(y.current=e,t(!1))},setContainerWidth:function(t){i.current&&(i.current.style.width=t)}};v.current=e.createBean(new s.RowContainerCtrl(o)),v.current.setComp(n,i.current,r.current)}},[S,E]),T=l.useCallback(function(t){i.current=t,x()},[x]),O=l.useCallback(function(t){r.current=t,x()},[x]),R=function(){return l.default.createElement("div",{className:_,ref:T,role:"rowgroup"},f.map(function(t){return l.default.createElement(p.default,{rowCtrl:t,containerType:n,key:t.getInstanceId()})}))};return l.default.createElement(l.default.Fragment,null,w?l.default.createElement("div",{className:C,ref:O,role:"presentation"},R()):R())})},function(t,e,o){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&r(e,t,o);return i(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var l=a(o(1)),u=o(4),c=o(10),p=o(6),d=o(5),h=s(o(86));e.default=l.memo(function(t){var e=l.useContext(d.BeansContext),o=e.context,r=e.gridOptionsService,i=t.rowCtrl,a=t.containerType,s=i.getTabIndex(),f=l.useRef(i.getDomOrder()),g=i.isFullWidth(),y=i.getRowNode().displayed,v=l.useState(function(){return y?i.getRowIndex():null}),m=v[0],C=v[1],_=l.useState(function(){return i.getRowId()}),w=_[0],b=_[1],S=l.useState(function(){return i.getBusinessKey()}),E=S[0],x=S[1],T=l.useState(function(){return i.getRowStyles()}),O=T[0],R=T[1],P=l.useState(function(){return null}),A=P[0],D=P[1],M=l.useState(),I=M[0],L=M[1],F=l.useState(function(){return y?i.getInitialRowTop(a):void 0}),N=F[0],k=F[1],G=l.useState(function(){return y?i.getInitialTransform(a):void 0}),V=G[0],B=G[1],z=l.useRef(null),H=l.useRef(),j=l.useRef(!1),U=l.useState(0),W=U[0],K=U[1];l.useEffect(function(){var t;if(!j.current&&I&&!(W>10)){var e=null===(t=z.current)||void 0===t?void 0:t.firstChild;e?(i.setupDetailRowAutoHeight(e),j.current=!0):K(function(t){return t+1})}},[I,W]);var q=l.useRef();q.current||(q.current=new u.CssClassManager(function(){return z.current}));var Y=l.useCallback(function(t){if(z.current=t,z.current){if(i.isAlive()){var e={setTop:k,setTransform:B,addOrRemoveCssClass:function(t,e){return q.current.addOrRemoveCssClass(t,e)},setDomOrder:function(t){return f.current=t},setRowIndex:C,setRowId:b,setRowBusinessKey:x,setUserStyles:R,setCellCtrls:function(t,e){p.agFlushSync(e,function(){D(function(e){return p.getNextValueIfDifferent(e,t,f.current)})})},showFullWidth:function(t){return L(t)},getFullWidthCellRenderer:function(){return H.current},refreshFullWidth:function(t){return $.current?(L(function(e){return n(n({},e),{params:t()})}),!0):!(!H.current||!H.current.refresh)&&H.current.refresh(t())}};i.setComp(e,z.current,a)}}else i.unsetComp(a)},[]);l.useLayoutEffect(function(){return c.showJsComp(I,o,z.current,H)},[I]);var Z=l.useMemo(function(){var t={top:N,transform:V};return Object.assign(t,O),t},[N,V,O]),X=g&&I&&I.componentFromFramework,J=!g&&null!=A,Q=l.useMemo(function(){return!!((null===I||void 0===I?void 0:I.componentFromFramework)&&p.isComponentStateless(I.componentClass))},[I]),$=l.useRef(!1);l.useEffect(function(){$.current=Q&&!!I&&!!r.get("reactiveCustomComponents")},[Q,I]);return l.default.createElement("div",{ref:Y,role:"row",style:Z,"row-index":m,"row-id":w,"row-business-key":E,tabIndex:s},J&&(null===A||void 0===A?void 0:A.map(function(t){return l.default.createElement(h.default,{cellCtrl:t,editingRow:i.isEditing(),printLayout:i.isPrintLayout(),key:t.getInstanceId()})})),X&&function(){var t=I.componentClass;return l.default.createElement(l.default.Fragment,null,Q&&l.default.createElement(t,n({},I.params)),!Q&&l.default.createElement(t,n({},I.params,{ref:H})))}())})},function(t,e,o){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&r(e,t,o);return i(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.CellCompState=void 0;var l=o(4),u=a(o(1)),c=o(6),p=s(o(87)),d=s(o(89)),h=o(5),f=o(10),g=o(90),y=o(13),v=o(14);!function(t){t[t.ShowValue=0]="ShowValue",t[t.EditValue=1]="EditValue"}(e.CellCompState||(e.CellCompState={}));var m=function(t,e,o){var r=t.compProxy;return u.default.createElement(u.default.Fragment,null,!r&&u.default.createElement(e,n({},t.compDetails.params,{ref:o})),r&&function(t,e,o){var r=t.compProxy;o(r);var i=r.getProps(),a=c.isComponentStateless(e);return u.default.createElement(y.CustomContext.Provider,{value:{setMethods:function(t){return r.setMethods(t)}}},a&&u.default.createElement(e,n({},i)),!a&&u.default.createElement(e,n({},i,{ref:function(t){return r.setRef(t)}})))}(t,e,o))};e.default=u.memo(function(t){var e=u.useContext(h.BeansContext).context,o=t.cellCtrl,r=t.printLayout,i=t.editingRow,a=o.getTabIndex(),s=o.getColumnIdSanitised(),y=o.getInstanceId(),C=u.useState(function(){return o.isCellRenderer()?void 0:{compDetails:void 0,value:o.getValueToDisplay(),force:!1}}),_=C[0],w=C[1],b=u.useState(),S=b[0],E=b[1],x=u.useState(1),T=x[0],O=x[1],R=u.useState(),P=R[0],A=R[1],D=u.useState(!1),M=D[0],I=D[1],L=u.useState(!1),F=L[0],N=L[1],k=u.useState(!1),G=k[0],V=k[1],B=u.useState(),z=B[0],H=B[1],j=u.useMemo(function(){return o.isForceWrapper()},[o]),U=u.useMemo(function(){return o.getCellAriaRole()},[o]),W=u.useRef(null),K=u.useRef(null),q=u.useRef(),Y=u.useRef(),Z=u.useRef(),X=u.useRef([]),J=u.useRef(),Q=u.useState(0),$=Q[0],tt=Q[1],et=u.useCallback(function(t){J.current=t,tt(function(t){return t+1})},[]),ot=j||null!=_&&(M||G||F),nt=u.useCallback(function(t,e){Y.current=e,e&&(function(t,e,o){var n=o.getColumn();if(!t&&e.isPopup&&e.isPopup()){var r="AG Grid: Found an issue in column "+n.getColId()+". If using React, specify an editor is a popup using colDef.cellEditorPopup=true. AG Grid React cannot depend on the editor component specifying if it's in a popup (via the isPopup() method on the editor), as React needs to know this information BEFORE the component is created.";l._.doOnce(function(){return console.warn(r)},"jsEditorComp-isPopup-"+o.getColumn().getColId())}if(t&&e.getPopupPosition&&null!=e.getPopupPosition()){var i="AG Grid: Found an issue in column "+n.getColId()+". If using React, specify an editor popup position using colDef.cellEditorPopupPosition=true. AG Grid React cannot depend on the editor component specifying it's position (via the getPopupPosition() method on the editor), as React needs to know this information BEFORE the component is created.";l._.doOnce(function(){return console.warn(i)},"jsEditorComp-getPopupPosition-"+o.getColumn().getColId())}}(t,e,o),e.isCancelBeforeStart&&e.isCancelBeforeStart()&&setTimeout(function(){o.stopEditing(!0),o.focusCell(!0)}))},[o]),rt=u.useCallback(function(t){return nt(!0,t)},[nt]),it=u.useCallback(function(t){return nt(!1,t)},[nt]),at=u.useRef();at.current||(at.current=new l.CssClassManager(function(){return W.current})),d.default(_,ot,J.current,$,q,W);var st=u.useRef();u.useLayoutEffect(function(){var t=st.current,e=_;if(st.current=_,null!=t&&null!=t.compDetails&&null!=e&&null!=e.compDetails){var o=t.compDetails,n=e.compDetails;o.componentClass==n.componentClass&&null!=K.current&&null!=K.current.refresh&&1!=K.current.refresh(n.params)&&O(function(t){return t+1})}},[_]),u.useLayoutEffect(function(){if(S&&!S.compDetails.componentFromFramework){var t=S.compDetails,o=!0===S.popup,n=f.createSyncJsComp(t);if(n){var r=n.getGui();if(nt(o,n),!o){var i=(j?Z:W).current;null===i||void 0===i||i.appendChild(r),n.afterGuiAttached&&n.afterGuiAttached()}return H(n),function(){e.destroyBean(n),nt(o,void 0),H(void 0),r&&r.parentElement&&r.parentElement.removeChild(r)}}}},[S]);var lt=u.useCallback(function(t){if(Z.current=t,!Z.current)return X.current.forEach(function(t){return t()}),void(X.current=[]);var n=function(t){var o;if(t){var n=t.getGui();null===(o=Z.current)||void 0===o||o.insertAdjacentElement("afterbegin",n),X.current.push(function(){e.destroyBean(t),l._.removeFromParent(n)})}return t};M&&n(o.createSelectionCheckbox()),G&&n(o.createDndSource()),F&&n(o.createRowDragComp())},[o,e,G,F,M]),ut=u.useCallback(function(t){if(W.current=t,W.current&&o){var e={addOrRemoveCssClass:function(t,e){return at.current.addOrRemoveCssClass(t,e)},setUserStyles:function(t){return A(t)},getFocusableElement:function(){return W.current},setIncludeSelection:function(t){return I(t)},setIncludeRowDrag:function(t){return N(t)},setIncludeDndSource:function(t){return V(t)},getCellEditor:function(){return Y.current||null},getCellRenderer:function(){return K.current?K.current:q.current},getParentOfValue:function(){return J.current?J.current:Z.current?Z.current:W.current},setRenderDetails:function(t,e,o){w(function(n){return(null===n||void 0===n?void 0:n.compDetails)!==t||(null===n||void 0===n?void 0:n.value)!==e||(null===n||void 0===n?void 0:n.force)!==o?{value:e,compDetails:t,force:o}:n})},setEditDetails:function(t,e,o,n){if(t){var r=void 0;n?r=new g.CellEditorComponentProxy(t.params,function(){return O(function(t){return t+1})}):t.componentFromFramework&&v.warnReactiveCustomComponents(),E({compDetails:t,popup:e,popupPosition:o,compProxy:r}),e||w(void 0)}else E(function(t){(null===t||void 0===t?void 0:t.compProxy)&&(Y.current=void 0)})}},n=Z.current||void 0;o.setComp(e,W.current,n,r,i)}},[]),ct=u.useMemo(function(){return!!(_&&_.compDetails&&_.compDetails.componentFromFramework&&c.isComponentStateless(_.compDetails.componentClass))},[_]);u.useLayoutEffect(function(){var t;W.current&&(at.current.addOrRemoveCssClass("ag-cell-value",!ot),at.current.addOrRemoveCssClass("ag-cell-inline-editing",!!S&&!S.popup),at.current.addOrRemoveCssClass("ag-cell-popup-editing",!!S&&!!S.popup),at.current.addOrRemoveCssClass("ag-cell-not-inline-editing",!S||!!S.popup),null===(t=o.getRowCtrl())||void 0===t||t.setInlineEditingCss(!!S),o.shouldRestoreFocus()&&!o.isEditing()&&W.current.focus({preventScroll:!0}))});var pt=function(){return u.default.createElement(u.default.Fragment,null,null!=_&&function(t,e,o,r,i,a,s){var l=t.compDetails,c=t.value,p=!l,d=l&&l.componentFromFramework,h=l&&l.componentClass,f=(null===c||void 0===c?void 0:c.toString)?c.toString():c,g=function(){return u.default.createElement(u.default.Fragment,null,p&&u.default.createElement(u.default.Fragment,null,f),d&&!a&&u.default.createElement(h,n({},l.params,{key:e,ref:r})),d&&a&&u.default.createElement(h,n({},l.params,{key:e})))};return u.default.createElement(u.default.Fragment,null,i?u.default.createElement("span",{role:"presentation",id:"cell-"+o,className:"ag-cell-value",ref:s},g()):g())}(_,T,y,K,ot,ct,et),null!=S&&function(t,e,o,n,r,i){var a=t.compDetails,s=a.componentClass,l=a.componentFromFramework&&!t.popup,c=a.componentFromFramework&&t.popup,d=!a.componentFromFramework&&t.popup;return u.default.createElement(u.default.Fragment,null,l&&m(t,s,e),c&&u.default.createElement(p.default,{editDetails:t,cellCtrl:r,eParentCell:n,wrappedContent:m(t,s,o)}),d&&i&&u.default.createElement(p.default,{editDetails:t,cellCtrl:r,eParentCell:n,jsChildComp:i}))}(S,it,rt,W.current,o,z))};return u.default.createElement("div",{ref:ut,style:P,tabIndex:a,role:U,"col-id":s},ot?u.default.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:lt},pt()):pt())})},function(t,e,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&n(e,t,o);return r(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});var a=o(4),s=i(o(1)),l=o(8),u=o(5),c=o(88);e.default=s.memo(function(t){var e=s.useState(),o=e[0],n=e[1],r=s.useContext(u.BeansContext),i=r.context,p=r.popupService,d=r.localeService,h=r.gridOptionsService;return c.useEffectOnce(function(){var e=t.editDetails,o=t.cellCtrl,r=t.eParentCell,s=e.compDetails,l=h.get("stopEditingWhenCellsLoseFocus"),u=i.createBean(new a.PopupEditorWrapper(s.params)),c=u.getGui();if(t.jsChildComp){var f=t.jsChildComp.getGui();f&&c.appendChild(f)}var g={column:o.getColumn(),rowNode:o.getRowNode(),type:"popupCellEditor",eventSource:r,ePopup:c,position:e.popupPosition,keepWithinBounds:!0},y=p.positionPopupByComponent.bind(p,g),v=d.getLocaleTextFunc(),m=p.addPopup({modal:l,eChild:c,closeOnEsc:!0,closedCallback:function(){o.onPopupEditorClosed()},anchorToElement:r,positionCallback:y,ariaLabel:v("ariaLabelCellEditor","Cell Editor")}),C=m?m.hideFunc:void 0;return n(u),t.jsChildComp&&t.jsChildComp.afterGuiAttached&&t.jsChildComp.afterGuiAttached(),function(){null!=C&&C(),i.destroyBean(u)}}),s.default.createElement(s.default.Fragment,null,o&&t.wrappedContent&&l.createPortal(t.wrappedContent,o.getGui()))})},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useEffectOnce=void 0;var n=o(1);e.useEffectOnce=function(t){var e=n.useRef(t),o=n.useRef(),r=n.useRef(!1),i=n.useRef(!1),a=n.useState(0)[1];r.current&&(i.current=!0),n.useEffect(function(){return r.current||(o.current=e.current(),r.current=!0),a(function(t){return t+1}),function(){i.current&&o.current&&o.current()}},[])}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(1),r=o(5);e.default=function(t,e,o,i,a,s){var l=n.useContext(r.BeansContext).context,u=n.useCallback(function(){var t=a.current;if(t){var e=t.getGui();e&&e.parentElement&&e.parentElement.removeChild(e),l.destroyBean(t),a.current=void 0}},[]);n.useEffect(function(){var n=null!=t,r=t&&t.compDetails&&!t.compDetails.componentFromFramework;if(!n||!r||e&&null==o)u();else{var i=t.compDetails;if(a.current){var l=a.current,c=!(null==l.refresh||0!=t.force)&&l.refresh(i.params);if(!0===c||void 0===c)return;u()}var p=i.newAgStackInstance();if(p){var d=p.resolveNow(null,function(t){return t});if(d){var h=d.getGui();h&&((e?o:s.current).appendChild(h),a.current=d)}}}},[t,e,i]),n.useEffect(function(){return u},[])}},function(t,e,o){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.CellEditorComponentProxy=void 0;var r=o(4),i=o(7),a=function(){function t(t,e){var o=this;this.cellEditorParams=t,this.refreshProps=e,this.instanceCreated=new r.AgPromise(function(t){o.resolveInstanceCreated=t}),this.onValueChange=function(t){return o.updateValue(t)},this.value=t.value}return t.prototype.getProps=function(){return n(n({},this.cellEditorParams),{initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange})},t.prototype.getValue=function(){return this.value},t.prototype.refresh=function(t){this.cellEditorParams=t,this.refreshProps()},t.prototype.setMethods=function(t){i.addOptionalMethods(this.getOptionalMethods(),t,this)},t.prototype.getInstance=function(){var t=this;return this.instanceCreated.then(function(){return t.componentInstance})},t.prototype.setRef=function(t){var e;this.componentInstance=t,null===(e=this.resolveInstanceCreated)||void 0===e||e.call(this),this.resolveInstanceCreated=void 0},t.prototype.getOptionalMethods=function(){return["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached"]},t.prototype.updateValue=function(t){this.value=t,this.refreshProps()},t}();e.CellEditorComponentProxy=a},function(t,e,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,o,n){void 0===n&&(n=o),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[o]}})}:function(t,e,o,n){void 0===n&&(n=o),t[n]=e[o]}),r=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&n(e,t,o);return r(e,t),e};Object.defineProperty(e,"__esModule",{value:!0});var a=i(o(1)),s=o(4),l=o(5),u=a.forwardRef(function(t,e){var o=t.children,n=t.eFocusableElement,r=t.onTabKeyDown,i=t.gridCtrl,u=t.forceFocusOutWhenTabGuardsAreEmpty,c=a.useContext(l.BeansContext).context,p=a.useRef(null),d=a.useRef(null),h=a.useRef(),f=function(t){var e=null==t?void 0:parseInt(t,10).toString();[p,d].forEach(function(t){var o,n;void 0===e?null===(o=t.current)||void 0===o||o.removeAttribute("tabindex"):null===(n=t.current)||void 0===n||n.setAttribute("tabindex",e)})};a.useImperativeHandle(e,function(){return{forceFocusOutOfContainer:function(t){var e;null===(e=h.current)||void 0===e||e.forceFocusOutOfContainer(t)}}});var g=a.useCallback(function(){if(!p.current&&!d.current)return c.destroyBean(h.current),void(h.current=null);if(p.current&&d.current){var t={setTabIndex:f};h.current=c.createBean(new s.TabGuardCtrl({comp:t,eTopGuard:p.current,eBottomGuard:d.current,eFocusableElement:n,onTabKeyDown:r,forceFocusOutWhenTabGuardsAreEmpty:u,focusInnerElement:function(t){return i.focusInnerElement(t)}}))}},[]),y=a.useCallback(function(t){p.current=t,g()},[g]),v=a.useCallback(function(t){d.current=t,g()},[g]),m=function(t){var e="top"===t?s.TabGuardClassNames.TAB_GUARD_TOP:s.TabGuardClassNames.TAB_GUARD_BOTTOM;return a.default.createElement("div",{className:s.TabGuardClassNames.TAB_GUARD+" "+e,role:"presentation",ref:"top"===t?y:v})};return a.default.createElement(a.default.Fragment,null,m("top"),o,m("bottom"))});e.default=a.memo(u)},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChangeDetectionStrategyType=void 0,function(t){t.IdentityCheck="IdentityCheck",t.DeepValueCheck="DeepValueCheck",t.NoCheck="NoCheck"}(e.ChangeDetectionStrategyType||(e.ChangeDetectionStrategyType={}))},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useGridMenuItem=e.useGridFloatingFilter=e.useGridFilter=e.useGridDate=e.useGridCellEditor=void 0;var n=o(1),r=o(13);function i(t){(0,n.useContext(r.CustomContext).setMethods)(t)}e.useGridCellEditor=function(t){i(t)},e.useGridDate=function(t){return i(t)},e.useGridFilter=function(t){return i(t)},e.useGridFloatingFilter=function(t){i(t)},e.useGridMenuItem=function(t){i(t)}},function(t,e,o){},function(t,e,o){},,,,,,function(t,e,o){"use strict";var n={};o.r(n),o.d(n,"hasBrowserEnv",function(){return v}),o.d(n,"hasStandardBrowserWebWorkerEnv",function(){return _}),o.d(n,"hasStandardBrowserEnv",function(){return m});var r=o(0),i=o(15),a=o(9);function s(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(t){return e[t]})}function l(t,e){this._pairs=[],t&&Object(a.a)(t,this,e)}const u=l.prototype;u.append=function(t,e){this._pairs.push([t,e])},u.toString=function(t){const e=t?function(e){return t.call(this,e,s)}:s;return this._pairs.map(function(t){return e(t[0])+"="+e(t[1])},"").join("&")};var c=l;function p(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function d(t,e,o){if(!e)return t;const n=o&&o.encode||p,i=o&&o.serialize;let a;if(a=i?i(e,o):r.a.isURLSearchParams(e)?e.toString():new c(e,o).toString(n)){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+a}return t}var h=class{constructor(){this.handlers=[]}use(t,e,o){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!o&&o.synchronous,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){r.a.forEach(this.handlers,function(e){null!==e&&t(e)})}},f=o(2),g={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},y={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:c,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const v="undefined"!==typeof window&&"undefined"!==typeof document,m=(C="undefined"!==typeof navigator&&navigator.product,v&&["ReactNative","NativeScript","NS"].indexOf(C)<0);var C;const _="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts;var w={...n,...y};var b=function(t){function e(t,o,n,i){let a=t[i++];if("__proto__"===a)return!0;const s=Number.isFinite(+a),l=i>=t.length;return a=!a&&r.a.isArray(n)?n.length:a,l?(r.a.hasOwnProp(n,a)?n[a]=[n[a],o]:n[a]=o,!s):(n[a]&&r.a.isObject(n[a])||(n[a]=[]),e(t,o,n[a],i)&&r.a.isArray(n[a])&&(n[a]=function(t){const e={},o=Object.keys(t);let n;const r=o.length;let i;for(n=0;n<r;n++)e[i=o[n]]=t[i];return e}(n[a])),!s)}if(r.a.isFormData(t)&&r.a.isFunction(t.entries)){const o={};return r.a.forEachEntry(t,(t,n)=>{e(function(t){return r.a.matchAll(/\w+|\[(\w*)]/g,t).map(t=>"[]"===t[0]?"":t[1]||t[0])}(t),n,o,0)}),o}return null};const S={transitional:g,adapter:["xhr","http"],transformRequest:[function(t,e){const o=e.getContentType()||"",n=o.indexOf("application/json")>-1,i=r.a.isObject(t);if(i&&r.a.isHTMLForm(t)&&(t=new FormData(t)),r.a.isFormData(t))return n?JSON.stringify(b(t)):t;if(r.a.isArrayBuffer(t)||r.a.isBuffer(t)||r.a.isStream(t)||r.a.isFile(t)||r.a.isBlob(t))return t;if(r.a.isArrayBufferView(t))return t.buffer;if(r.a.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(i){if(o.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return Object(a.a)(t,new w.classes.URLSearchParams,Object.assign({visitor:function(t,e,o,n){return w.isNode&&r.a.isBuffer(t)?(this.append(e,t.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((s=r.a.isFileList(t))||o.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return Object(a.a)(s?{"files[]":t}:t,e&&new e,this.formSerializer)}}return i||n?(e.setContentType("application/json",!1),function(t,e,o){if(r.a.isString(t))try{return(e||JSON.parse)(t),r.a.trim(t)}catch(n){if("SyntaxError"!==n.name)throw n}return(o||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||S.transitional,o=e&&e.forcedJSONParsing,n="json"===this.responseType;if(t&&r.a.isString(t)&&(o&&!this.responseType||n)){const o=!(e&&e.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(i){if(o){if("SyntaxError"===i.name)throw f.a.from(i,f.a.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:w.classes.FormData,Blob:w.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};r.a.forEach(["delete","get","head","post","put","patch"],t=>{S.headers[t]={}});var E=S;const x=r.a.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var T=t=>{const e={};let o,n,r;return t&&t.split("\n").forEach(function(t){r=t.indexOf(":"),o=t.substring(0,r).trim().toLowerCase(),n=t.substring(r+1).trim(),!o||e[o]&&x[o]||("set-cookie"===o?e[o]?e[o].push(n):e[o]=[n]:e[o]=e[o]?e[o]+", "+n:n)}),e};const O=Symbol("internals");function R(t){return t&&String(t).trim().toLowerCase()}function P(t){return!1===t||null==t?t:r.a.isArray(t)?t.map(P):String(t)}const A=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function D(t,e,o,n,i){return r.a.isFunction(n)?n.call(this,e,o):(i&&(e=o),r.a.isString(e)?r.a.isString(n)?-1!==e.indexOf(n):r.a.isRegExp(n)?n.test(e):void 0:void 0)}class M{constructor(t){t&&this.set(t)}set(t,e,o){const n=this;function i(t,e,o){const i=R(e);if(!i)throw new Error("header name must be a non-empty string");const a=r.a.findKey(n,i);(!a||void 0===n[a]||!0===o||void 0===o&&!1!==n[a])&&(n[a||e]=P(t))}const a=(t,e)=>r.a.forEach(t,(t,o)=>i(t,o,e));return r.a.isPlainObject(t)||t instanceof this.constructor?a(t,e):r.a.isString(t)&&(t=t.trim())&&!A(t)?a(T(t),e):null!=t&&i(e,t,o),this}get(t,e){if(t=R(t)){const o=r.a.findKey(this,t);if(o){const t=this[o];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),o=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=o.exec(t);)e[n[1]]=n[2];return e}(t);if(r.a.isFunction(e))return e.call(this,t,o);if(r.a.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=R(t)){const o=r.a.findKey(this,t);return!(!o||void 0===this[o]||e&&!D(0,this[o],o,e))}return!1}delete(t,e){const o=this;let n=!1;function i(t){if(t=R(t)){const i=r.a.findKey(o,t);!i||e&&!D(0,o[i],i,e)||(delete o[i],n=!0)}}return r.a.isArray(t)?t.forEach(i):i(t),n}clear(t){const e=Object.keys(this);let o=e.length,n=!1;for(;o--;){const r=e[o];t&&!D(0,this[r],r,t,!0)||(delete this[r],n=!0)}return n}normalize(t){const e=this,o={};return r.a.forEach(this,(n,i)=>{const a=r.a.findKey(o,i);if(a)return e[a]=P(n),void delete e[i];const s=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,o)=>e.toUpperCase()+o)}(i):String(i).trim();s!==i&&delete e[i],e[s]=P(n),o[s]=!0}),this}concat(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return this.constructor.concat(this,...e)}toJSON(t){const e=Object.create(null);return r.a.forEach(this,(o,n)=>{null!=o&&!1!==o&&(e[n]=t&&r.a.isArray(o)?o.join(", "):o)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(t=>{let[e,o]=t;return e+": "+o}).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t){const e=new this(t);for(var o=arguments.length,n=new Array(o>1?o-1:0),r=1;r<o;r++)n[r-1]=arguments[r];return n.forEach(t=>e.set(t)),e}static accessor(t){const e=(this[O]=this[O]={accessors:{}}).accessors,o=this.prototype;function n(t){const n=R(t);e[n]||(!function(t,e){const o=r.a.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+o,{value:function(t,o,r){return this[n].call(this,e,t,o,r)},configurable:!0})})}(o,t),e[n]=!0)}return r.a.isArray(t)?t.forEach(n):n(t),this}}M.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),r.a.reduceDescriptors(M.prototype,(t,e)=>{let{value:o}=t,n=e[0].toUpperCase()+e.slice(1);return{get:()=>o,set(t){this[n]=t}}}),r.a.freezeMethods(M);var I=M;function L(t,e){const o=this||E,n=e||o,i=I.from(n.headers);let a=n.data;return r.a.forEach(t,function(t){a=t.call(o,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}function F(t){return!(!t||!t.__CANCEL__)}function N(t,e,o){f.a.call(this,null==t?"canceled":t,f.a.ERR_CANCELED,e,o),this.name="CanceledError"}r.a.inherits(N,f.a,{__CANCEL__:!0});var k=N,G=o(16);var V=w.hasStandardBrowserEnv?{write(t,e,o,n,i,a){const s=[t+"="+encodeURIComponent(e)];r.a.isNumber(o)&&s.push("expires="+new Date(o).toGMTString()),r.a.isString(n)&&s.push("path="+n),r.a.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function B(t,e){return t&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?function(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}var z=w.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let o;function n(o){let n=o;return t&&(e.setAttribute("href",n),n=e.href),e.setAttribute("href",n),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return o=n(window.location.href),function(t){const e=r.a.isString(t)?n(t):t;return e.protocol===o.protocol&&e.host===o.host}}():function(){return!0};var H=function(t,e){t=t||10;const o=new Array(t),n=new Array(t);let r,i=0,a=0;return e=void 0!==e?e:1e3,function(s){const l=Date.now(),u=n[a];r||(r=l),o[i]=s,n[i]=l;let c=a,p=0;for(;c!==i;)p+=o[c++],c%=t;if((i=(i+1)%t)===a&&(a=(a+1)%t),l-r<e)return;const d=u&&l-u;return d?Math.round(1e3*p/d):void 0}};function j(t,e){let o=0;const n=H(50,250);return r=>{const i=r.loaded,a=r.lengthComputable?r.total:void 0,s=i-o,l=n(s);o=i;const u={loaded:i,total:a,progress:a?i/a:void 0,bytes:s,rate:l||void 0,estimated:l&&a&&i<=a?(a-i)/l:void 0,event:r};u[e?"download":"upload"]=!0,t(u)}}var U="undefined"!==typeof XMLHttpRequest&&function(t){return new Promise(function(e,o){let n=t.data;const i=I.from(t.headers).normalize();let a,s,{responseType:l,withXSRFToken:u}=t;function c(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}if(r.a.isFormData(n))if(w.hasStandardBrowserEnv||w.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(s=i.getContentType())){const[t,...e]=s?s.split(";").map(t=>t.trim()).filter(Boolean):[];i.setContentType([t||"multipart/form-data",...e].join("; "))}let p=new XMLHttpRequest;if(t.auth){const e=t.auth.username||"",o=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(e+":"+o))}const h=B(t.baseURL,t.url);function y(){if(!p)return;const n=I.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders());!function(t,e,o){const n=o.config.validateStatus;o.status&&n&&!n(o.status)?e(new f.a("Request failed with status code "+o.status,[f.a.ERR_BAD_REQUEST,f.a.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o)):t(o)}(function(t){e(t),c()},function(t){o(t),c()},{data:l&&"text"!==l&&"json"!==l?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:n,config:t,request:p}),p=null}if(p.open(t.method.toUpperCase(),d(h,t.params,t.paramsSerializer),!0),p.timeout=t.timeout,"onloadend"in p?p.onloadend=y:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(y)},p.onabort=function(){p&&(o(new f.a("Request aborted",f.a.ECONNABORTED,t,p)),p=null)},p.onerror=function(){o(new f.a("Network Error",f.a.ERR_NETWORK,t,p)),p=null},p.ontimeout=function(){let e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const n=t.transitional||g;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),o(new f.a(e,n.clarifyTimeoutError?f.a.ETIMEDOUT:f.a.ECONNABORTED,t,p)),p=null},w.hasStandardBrowserEnv&&(u&&r.a.isFunction(u)&&(u=u(t)),u||!1!==u&&z(h))){const e=t.xsrfHeaderName&&t.xsrfCookieName&&V.read(t.xsrfCookieName);e&&i.set(t.xsrfHeaderName,e)}void 0===n&&i.setContentType(null),"setRequestHeader"in p&&r.a.forEach(i.toJSON(),function(t,e){p.setRequestHeader(e,t)}),r.a.isUndefined(t.withCredentials)||(p.withCredentials=!!t.withCredentials),l&&"json"!==l&&(p.responseType=t.responseType),"function"===typeof t.onDownloadProgress&&p.addEventListener("progress",j(t.onDownloadProgress,!0)),"function"===typeof t.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",j(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=(e=>{p&&(o(!e||e.type?new k(null,t,p):e),p.abort(),p=null)}),t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const v=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(h);v&&-1===w.protocols.indexOf(v)?o(new f.a("Unsupported protocol "+v+":",f.a.ERR_BAD_REQUEST,t)):p.send(n||null)})};const W={http:G.a,xhr:U};r.a.forEach(W,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(o){}Object.defineProperty(t,"adapterName",{value:e})}});const K=t=>"- ".concat(t),q=t=>r.a.isFunction(t)||null===t||!1===t;var Y={getAdapter:t=>{t=r.a.isArray(t)?t:[t];const{length:e}=t;let o,n;const i={};for(let r=0;r<e;r++){let e;if(n=o=t[r],!q(o)&&void 0===(n=W[(e=String(o)).toLowerCase()]))throw new f.a("Unknown adapter '".concat(e,"'"));if(n)break;i[e||"#"+r]=n}if(!n){const t=Object.entries(i).map(t=>{let[e,o]=t;return"adapter ".concat(e," ")+(!1===o?"is not supported by the environment":"is not available in the build")});let o=e?t.length>1?"since :\n"+t.map(K).join("\n"):" "+K(t[0]):"as no adapter specified";throw new f.a("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:W};function Z(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new k(null,t)}function X(t){return Z(t),t.headers=I.from(t.headers),t.data=L.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Y.getAdapter(t.adapter||E.adapter)(t).then(function(e){return Z(t),e.data=L.call(t,t.transformResponse,e),e.headers=I.from(e.headers),e},function(e){return F(e)||(Z(t),e&&e.response&&(e.response.data=L.call(t,t.transformResponse,e.response),e.response.headers=I.from(e.response.headers))),Promise.reject(e)})}const J=t=>t instanceof I?t.toJSON():t;function Q(t,e){e=e||{};const o={};function n(t,e,o){return r.a.isPlainObject(t)&&r.a.isPlainObject(e)?r.a.merge.call({caseless:o},t,e):r.a.isPlainObject(e)?r.a.merge({},e):r.a.isArray(e)?e.slice():e}function i(t,e,o){return r.a.isUndefined(e)?r.a.isUndefined(t)?void 0:n(void 0,t,o):n(t,e,o)}function a(t,e){if(!r.a.isUndefined(e))return n(void 0,e)}function s(t,e){return r.a.isUndefined(e)?r.a.isUndefined(t)?void 0:n(void 0,t):n(void 0,e)}function l(o,r,i){return i in e?n(o,r):i in t?n(void 0,o):void 0}const u={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l,headers:(t,e)=>i(J(t),J(e),!0)};return r.a.forEach(Object.keys(Object.assign({},t,e)),function(n){const a=u[n]||i,s=a(t[n],e[n],n);r.a.isUndefined(s)&&a!==l||(o[n]=s)}),o}const $="1.6.7",tt={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{tt[t]=function(o){return typeof o===t||"a"+(e<1?"n ":" ")+t}});const et={};tt.transitional=function(t,e,o){function n(t,e){return"[Axios v"+$+"] Transitional option '"+t+"'"+e+(o?". "+o:"")}return(o,r,i)=>{if(!1===t)throw new f.a(n(r," has been removed"+(e?" in "+e:"")),f.a.ERR_DEPRECATED);return e&&!et[r]&&(et[r]=!0,console.warn(n(r," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(o,r,i)}};var ot={assertOptions:function(t,e,o){if("object"!==typeof t)throw new f.a("options must be an object",f.a.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let r=n.length;for(;r-- >0;){const i=n[r],a=e[i];if(a){const e=t[i],o=void 0===e||a(e,i,t);if(!0!==o)throw new f.a("option "+i+" must be "+o,f.a.ERR_BAD_OPTION_VALUE)}else if(!0!==o)throw new f.a("Unknown option "+i,f.a.ERR_BAD_OPTION)}},validators:tt};const nt=ot.validators;class rt{constructor(t){this.defaults=t,this.interceptors={request:new h,response:new h}}async request(t,e){try{return await this._request(t,e)}catch(o){if(o instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=new Error;const e=t.stack?t.stack.replace(/^.+\n/,""):"";o.stack?e&&!String(o.stack).endsWith(e.replace(/^.+\n.+\n/,""))&&(o.stack+="\n"+e):o.stack=e}throw o}}_request(t,e){"string"===typeof t?(e=e||{}).url=t:e=t||{},e=Q(this.defaults,e);const{transitional:o,paramsSerializer:n,headers:i}=e;void 0!==o&&ot.assertOptions(o,{silentJSONParsing:nt.transitional(nt.boolean),forcedJSONParsing:nt.transitional(nt.boolean),clarifyTimeoutError:nt.transitional(nt.boolean)},!1),null!=n&&(r.a.isFunction(n)?e.paramsSerializer={serialize:n}:ot.assertOptions(n,{encode:nt.function,serialize:nt.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let a=i&&r.a.merge(i.common,i[e.method]);i&&r.a.forEach(["delete","get","head","post","put","patch","common"],t=>{delete i[t]}),e.headers=I.concat(a,i);const s=[];let l=!0;this.interceptors.request.forEach(function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(l=l&&t.synchronous,s.unshift(t.fulfilled,t.rejected))});const u=[];let c;this.interceptors.response.forEach(function(t){u.push(t.fulfilled,t.rejected)});let p,d=0;if(!l){const t=[X.bind(this),void 0];for(t.unshift.apply(t,s),t.push.apply(t,u),p=t.length,c=Promise.resolve(e);d<p;)c=c.then(t[d++],t[d++]);return c}p=s.length;let h=e;for(d=0;d<p;){const t=s[d++],e=s[d++];try{h=t(h)}catch(f){e.call(this,f);break}}try{c=X.call(this,h)}catch(f){return Promise.reject(f)}for(d=0,p=u.length;d<p;)c=c.then(u[d++],u[d++]);return c}getUri(t){return d(B((t=Q(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}}r.a.forEach(["delete","get","head","options"],function(t){rt.prototype[t]=function(e,o){return this.request(Q(o||{},{method:t,url:e,data:(o||{}).data}))}}),r.a.forEach(["post","put","patch"],function(t){function e(e){return function(o,n,r){return this.request(Q(r||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:o,data:n}))}}rt.prototype[t]=e(),rt.prototype[t+"Form"]=e(!0)});var it=rt;class at{constructor(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(t){e=t});const o=this;this.promise.then(t=>{if(!o._listeners)return;let e=o._listeners.length;for(;e-- >0;)o._listeners[e](t);o._listeners=null}),this.promise.then=(t=>{let e;const n=new Promise(t=>{o.subscribe(t),e=t}).then(t);return n.cancel=function(){o.unsubscribe(e)},n}),t(function(t,n,r){o.reason||(o.reason=new k(t,n,r),e(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}static source(){let t;return{token:new at(function(e){t=e}),cancel:t}}}var st=at;const lt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(lt).forEach(t=>{let[e,o]=t;lt[o]=e});var ut=lt;const ct=function t(e){const o=new it(e),n=Object(i.a)(it.prototype.request,o);return r.a.extend(n,it.prototype,o,{allOwnKeys:!0}),r.a.extend(n,o,null,{allOwnKeys:!0}),n.create=function(o){return t(Q(e,o))},n}(E);ct.Axios=it,ct.CanceledError=k,ct.CancelToken=st,ct.isCancel=F,ct.VERSION=$,ct.toFormData=a.a,ct.AxiosError=f.a,ct.Cancel=ct.CanceledError,ct.all=function(t){return Promise.all(t)},ct.spread=function(t){return function(e){return t.apply(null,e)}},ct.isAxiosError=function(t){return r.a.isObject(t)&&!0===t.isAxiosError},ct.mergeConfig=Q,ct.AxiosHeaders=I,ct.formToJSON=(t=>b(r.a.isHTMLForm(t)?new FormData(t):t)),ct.getAdapter=Y.getAdapter,ct.HttpStatusCode=ut,ct.default=ct;e.a=ct}]]);
//# sourceMappingURL=2.925b44b6.chunk.js.map