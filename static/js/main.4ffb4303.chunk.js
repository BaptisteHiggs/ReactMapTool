(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(8),s=n.n(o),r=(n(24),n(21)),l=n(31),u=n.n(l),i=n(107);var m=async function(e){const t=function(e){const t='poly:"'.concat(e.map(e=>"".concat(e.lat.toString()," ").concat(e.lng.toString())).join(" "),'"');return"data="+encodeURIComponent("\n    [out:json][timeout:30];\n    node(".concat(t,");\n    way(").concat(t,");\n    (._;>;);\n    out;\n"))}(e);return(await i.a.post("https://overpass-api.de/api/interpreter",t)).data};const f="accessToken";function d(e){const t=window.location.search;if(t.length<1||"?"!==t.charAt(0))return"";{const n=t.substring(1).split("&");for(const t of n){const n=t.split("=");if(n[0]===e)return n[1]}return""}}var p=n(32),A=n.n(p),b=(n(59),n(33));n(94),n(95);function E(e){return Object.fromEntries(e.map(e=>[e,null]))}n(96);var g=n(34),v=n.n(g);const w=e=>{let{closeTable:t}=e;return c.a.createElement("div",{className:"menu"},c.a.createElement("img",{className:"cross",src:v.a,onClick:()=>t()}))};var h=e=>{let{data:t,closeTable:n}=e;const[o,s]=Object(a.useState)(500),[r,l]=Object(a.useState)(900),u=function(e){var t,n;return null!==(t=null===e||void 0===e?void 0:null===(n=e.elements)||void 0===n?void 0:n.filter(e=>!!e.tags))&&void 0!==t?t:[]}(t),i=function(e){const t=[];for(const n of e){const e=Object.keys(n.tags);for(const n of e)t.includes(n)||t.push(n)}return t}(u),[m,f]=Object(a.useState)(function(e,t){const n=[];for(const a of t){const t=E(e);for(const e of Object.keys(a.tags))t[e]=a.tags[e];n.push(t)}return n}(i,u)),[d,p]=Object(a.useState)(i.map(e=>({field:e})));return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"ag-theme-quartz",style:{height:o,width:r,resize:"both"}},c.a.createElement(b.AgGridReact,{rowData:m,columnDefs:d}),c.a.createElement("div",{style:{position:"absolute",transform:"translate(".concat(r+10,"px, -").concat(o-2,"px)")}},c.a.createElement(w,{closeTable:n}))))};const j=n(97),y=Object(r.default)({accessToken:d(f)}),O=()=>{const[e,t]=Object(a.useState)(null),[n,o]=Object(a.useState)(!1),[s,r]=Object(a.useState)(null),[l,i]=Object(a.useState)(!0),f=Object(a.useRef)(null);Object(a.useEffect)(()=>{if(e){(async()=>{const n=await e;t(null),o(!1),i(!0),r(n)})()}},[e]),Object(a.useEffect)(()=>{if(s){j(s)}},[s]);const d=e=>{let{features:n}=e;const a=n[0].geometry.coordinates[0].map(e=>({lat:e[1],lng:e[0]}));t(m(a)),o(!0)};return c.a.createElement("div",null,(!!s||n)&&c.a.createElement(A.a,{className:"draggable"},c.a.createElement("div",{className:"box"},n?c.a.createElement("div",{style:{padding:"5px"}},"Loading data..."):l&&c.a.createElement(h,{data:s,closeTable:()=>{i(!1)}}))),c.a.createElement(y,{style:"mapbox://styles/mapbox/streets-v9",containerStyle:{height:"100vh",width:"100vw"},center:[151.495830802,-24.2436222147],zoom:[15]},c.a.createElement(u.a,{ref:e=>{f.current=e},onDrawCreate:d,onDrawUpdate:d,controls:{point:!1,line_string:!1,polygon:!0,trash:!0,combine_features:!1,uncombine_features:!1},onDrawModeChange:e=>{let{mode:t}=e;"draw_polygon"===t&&function(e){const t=e.current.draw,n=t.getAll().features.filter(e=>(function(e){const t=e.geometry.coordinates[0];return t.length>0&&!!t[0]})(e));t.delete(n.map(e=>e.id))}(f)}})))};n(103),n(104);var x=async function(e){let t=null;var n,a;return 401!==(t=await async function(e){const t=await fetch(e),n=t.json(),a=t.status;return{data:n,number:a}}((n="example",a=e,"https://api.mapbox.com/styles/v1/".concat(n,"?access_token=").concat(a)))).number};const B=()=>{const[e,t]=Object(a.useState)("");Object(a.useEffect)(()=>{(async()=>{await x(e)&&function(e,t){window.location.search="".concat(e,"=").concat(t)}(f,e)})()},[e]);return c.a.createElement("div",{className:"tokenInputDiv"},c.a.createElement("form",{className:"form"},c.a.createElement("label",{className:"label",htmlFor:"text-input"},"Enter Mapbox Access Token:"),c.a.createElement("br",null),c.a.createElement("input",{className:"input",type:"text",id:"text-input",value:e,onChange:e=>{t(e.target.value)}})))};function S(){const[e,t]=Object(a.useState)(!1),n=d(f);return Object(a.useEffect)(()=>{(async()=>{const e=await x(n);t(e)})()},[n]),e?c.a.createElement(O,null):c.a.createElement(B,null)}s.a.render(c.a.createElement(S,null),document.getElementById("root"))},34:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABp0RVh0U29mdHdhcmUAUGFpbnQuTkVUIHYzLjUuMTAw9HKhAAAAqUlEQVRIS73QQQrEIBBE0RzB+1/WpBcN0nxN16IceDD8RAvyzDmvwuiE0QmjE0YnjE4Yw/ebY4zvLz/fiTNxtvaEMeRBZbRzBmNSRrvvYlx1LuqOBYzV6UJlLGAkdLE6FjDu5MBKGQsYT+pgff4H48nVwaufNMfWAWp/MFani9VRjKvOhcooxqRc1H0XY1DGUucMxqCOpRytPWF0wuiE0QmjE0YnjD7zeQHIvID5e+CS+AAAAABJRU5ErkJggg=="},35:function(e,t,n){e.exports=n(105)},59:function(e,t,n){},96:function(e,t,n){}},[[35,1,2]]]);
//# sourceMappingURL=main.4ffb4303.chunk.js.map